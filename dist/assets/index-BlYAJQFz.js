(function(){const Pu=document.createElement("link").relList;if(Pu&&Pu.supports&&Pu.supports("modulepreload"))return;for(const Di of document.querySelectorAll('link[rel="modulepreload"]'))bl(Di);new MutationObserver(Di=>{for(const ee of Di)if(ee.type==="childList")for(const R of ee.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&bl(R)}).observe(document,{childList:!0,subtree:!0});function Iu(Di){const ee={};return Di.integrity&&(ee.integrity=Di.integrity),Di.referrerPolicy&&(ee.referrerPolicy=Di.referrerPolicy),Di.crossOrigin==="use-credentials"?ee.credentials="include":Di.crossOrigin==="anonymous"?ee.credentials="omit":ee.credentials="same-origin",ee}function bl(Di){if(Di.ep)return;Di.ep=!0;const ee=Iu(Di);fetch(Di.href,ee)}})();function Ed(al){return al&&al.__esModule&&Object.prototype.hasOwnProperty.call(al,"default")?al.default:al}var jh={exports:{}};(function(al,Pu){/*! For license information please see plotly.min.js.LICENSE.txt */(function(Iu,bl){al.exports=bl()})(self,function(){return function(){var Iu={79288:function(ee,R,e){var M=e(3400),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in k){var T=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(T,k[o])}},86712:function(ee,R,e){ee.exports=e(84224)},37240:function(ee,R,e){ee.exports=e(51132)},29744:function(ee,R,e){ee.exports=e(94456)},29352:function(ee,R,e){ee.exports=e(67244)},96144:function(ee,R,e){ee.exports=e(97776)},53219:function(ee,R,e){ee.exports=e(61712)},4624:function(ee,R,e){ee.exports=e(95856)},54543:function(ee,R,e){ee.exports=e(54272)},45e3:function(ee,R,e){ee.exports=e(85404)},62300:function(ee,R,e){ee.exports=e(26048)},6920:function(ee,R,e){ee.exports=e(66240)},10264:function(ee,R,e){ee.exports=e(40448)},32016:function(ee,R,e){ee.exports=e(64884)},27528:function(ee,R,e){ee.exports=e(15088)},75556:function(ee,R,e){ee.exports=e(76744)},39204:function(ee,R,e){ee.exports=e(94704)},73996:function(ee,R,e){ee.exports=e(62396)},16489:function(ee,R,e){ee.exports=e(32028)},5e3:function(ee,R,e){ee.exports=e(81932)},77280:function(ee,R,e){ee.exports=e(45536)},33992:function(ee,R,e){ee.exports=e(42600)},17600:function(ee,R,e){ee.exports=e(21536)},49116:function(ee,R,e){ee.exports=e(65664)},46808:function(ee,R,e){ee.exports=e(29044)},36168:function(ee,R,e){ee.exports=e(48928)},13792:function(ee,R,e){var M=e(32016);M.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),ee.exports=M},3920:function(ee,R,e){ee.exports=e(43480)},25120:function(ee,R,e){ee.exports=e(6296)},4340:function(ee,R,e){ee.exports=e(7404)},86152:function(ee,R,e){ee.exports=e(65456)},56816:function(ee,R,e){ee.exports=e(22020)},89296:function(ee,R,e){ee.exports=e(29928)},20260:function(ee,R,e){ee.exports=e(75792)},32140:function(ee,R,e){ee.exports=e(156)},84764:function(ee,R,e){ee.exports=e(45499)},48824:function(ee,R,e){ee.exports=e(3296)},69967:function(ee,R,e){ee.exports=e(4184)},8363:function(ee,R,e){ee.exports=e(36952)},86636:function(ee,R,e){ee.exports=e(38983)},70192:function(ee,R,e){ee.exports=e(11572)},81604:function(ee,R,e){ee.exports=e(76924)},63796:function(ee,R,e){ee.exports=e(62944)},89336:function(ee,R,e){ee.exports=e(95443)},67484:function(ee,R,e){ee.exports=e(34864)},97312:function(ee,R,e){ee.exports=e(76272)},42192:function(ee,R,e){ee.exports=e(97924)},29800:function(ee,R,e){ee.exports=e(15436)},63560:function(ee,R,e){ee.exports=e(5621)},89904:function(ee,R,e){ee.exports=e(91304)},50248:function(ee,R,e){ee.exports=e(41724)},65832:function(ee,R,e){ee.exports=e(31991)},79440:function(ee,R,e){ee.exports=e(22869)},13752:function(ee,R,e){ee.exports=e(67776)},83096:function(ee,R,e){ee.exports=e(95952)},72196:function(ee){ee.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(ee,R,e){var M=e(72196),k=e(25376),o=e(33816),T=e(31780).templatedArray;e(36208),ee.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(ee,R,e){var M=e(3400),k=e(54460),o=e(23816).draw;function T(p){var s=p._fullLayout;M.filterVisible(s.annotations).forEach(function(t){var i=k.getFromId(p,t.xref),r=k.getFromId(p,t.yref),n=k.getRefType(t.xref),a=k.getRefType(t.yref);t._extremes={},n==="range"&&_(t,i),a==="range"&&_(t,r)})}function _(p,s){var t,i=s._id,r=i.charAt(0),n=p[r],a=p["a"+r],l=p[r+"ref"],u=p["a"+r+"ref"],h=p["_"+r+"padplus"],c=p["_"+r+"padminus"],x={x:1,y:-1}[r]*p[r+"shift"],d=3*p.arrowsize*p.arrowwidth||0,v=d+x,g=d-x,y=3*p.startarrowsize*p.arrowwidth||0,m=y+x,b=y-x;if(u===l){var f=k.findExtremes(s,[s.r2c(n)],{ppadplus:v,ppadminus:g}),S=k.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(h,m),ppadminus:Math.max(c,b)});t={min:[f.min[0],S.min[0]],max:[f.max[0],S.max[0]]}}else m=a?m+a:m,b=a?b-a:b,t=k.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(h,v,m),ppadminus:Math.max(c,g,b)});p._extremes[i]=t}ee.exports=function(p){var s=p._fullLayout;if(M.filterVisible(s.annotations).length&&p._fullData.length)return M.syncOrAsync([o,T],p)}},42300:function(ee,R,e){var M=e(3400),k=e(24040),o=e(31780).arrayEditor;function T(p,s){var t,i,r,n,a,l,u,h=p._fullLayout.annotations,c=[],x=[],d=[],v=(s||[]).length;for(t=0;t<h.length;t++)if(n=(r=h[t]).clicktoshow){for(i=0;i<v;i++)if(l=(a=s[i]).xaxis,u=a.yaxis,l._id===r.xref&&u._id===r.yref&&l.d2r(a.x)===_(r._xclick,l)&&u.d2r(a.y)===_(r._yclick,u)){(r.visible?n==="onout"?x:d:c).push(t);break}i===v&&r.visible&&n==="onout"&&x.push(t)}return{on:c,off:x,explicitOff:d}}function _(p,s){return s.type==="log"?s.l2r(p):s.d2r(p)}ee.exports={hasClickToShow:function(p,s){var t=T(p,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(p,s){var t,i,r=T(p,s),n=r.on,a=r.off.concat(r.explicitOff),l={},u=p._fullLayout.annotations;if(n.length||a.length){for(t=0;t<n.length;t++)(i=o(p.layout,"annotations",u[n[t]])).modifyItem("visible",!0),M.extendFlat(l,i.getUpdateObj());for(t=0;t<a.length;t++)(i=o(p.layout,"annotations",u[a[t]])).modifyItem("visible",!1),M.extendFlat(l,i.getUpdateObj());return k.call("update",p,{},l)}}}},87192:function(ee,R,e){var M=e(3400),k=e(76308);ee.exports=function(o,T,_,p){p("opacity");var s=p("bgcolor"),t=p("bordercolor"),i=k.opacity(t);p("borderpad");var r=p("borderwidth"),n=p("showarrow");if(p("text",n?" ":_._dfltTitle.annotation),p("textangle"),M.coerceFont(p,"font",_.font),p("width"),p("align"),p("height")&&p("valign"),n){var a,l,u=p("arrowside");u.indexOf("end")!==-1&&(a=p("arrowhead"),l=p("arrowsize")),u.indexOf("start")!==-1&&(p("startarrowhead",a),p("startarrowsize",l)),p("arrowcolor",i?T.bordercolor:k.defaultLine),p("arrowwidth",2*(i&&r||1)),p("standoff"),p("startstandoff")}var h=p("hovertext"),c=_.hoverlabel||{};if(h){var x=p("hoverlabel.bgcolor",c.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),d=p("hoverlabel.bordercolor",c.bordercolor||k.contrast(x)),v=M.extendFlat({},c.font);v.color||(v.color=d),M.coerceFont(p,"hoverlabel.font",v)}p("captureevents",!!h)}},26828:function(ee,R,e){var M=e(38248),k=e(36896);ee.exports=function(o,T,_,p){T=T||{};var s=_==="log"&&T.type==="linear",t=_==="linear"&&T.type==="log";if(s||t)for(var i,r,n=o._fullLayout.annotations,a=T._id.charAt(0),l=0;l<n.length;l++)i=n[l],r="annotations["+l+"].",i[a+"ref"]===T._id&&u(a),i["a"+a+"ref"]===T._id&&u("a"+a);function u(h){var c=i[h],x=null;x=s?k(c,T.range):Math.pow(10,c),M(x)||(x=null),p(r+h,x)}}},45216:function(ee,R,e){var M=e(3400),k=e(54460),o=e(51272),T=e(87192),_=e(13916);function p(s,t,i){function r(S,w){return M.coerce(s,t,_,S,w)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(s,t,i,r);for(var l=t.showarrow,u=["x","y"],h=[-10,-30],c={_fullLayout:i},x=0;x<2;x++){var d=u[x],v=k.coerceRef(s,t,c,d,"","paper");if(v!=="paper"&&k.getFromId(c,v)._annIndices.push(t._index),k.coercePosition(t,c,r,v,d,.5),l){var g="a"+d,y=k.coerceRef(s,t,c,g,"pixel",["pixel","paper"]);y!=="pixel"&&y!==v&&(y=t[g]="pixel");var m=y==="pixel"?h[x]:.4;k.coercePosition(t,c,r,y,g,m)}r(d+"anchor"),r(d+"shift")}if(M.noneOrAll(s,t,["x","y"]),l&&M.noneOrAll(s,t,["ax","ay"]),a){var b=r("xclick"),f=r("yclick");t._xclick=b===void 0?t.x:k.cleanPosition(b,c,t.xref),t._yclick=f===void 0?t.y:k.cleanPosition(f,c,t.yref)}}}ee.exports=function(s,t){o(s,t,{name:"annotations",handleItemDefaults:p})}},23816:function(ee,R,e){var M=e(33428),k=e(24040),o=e(7316),T=e(3400),_=T.strTranslate,p=e(54460),s=e(76308),t=e(43616),i=e(93024),r=e(72736),n=e(93972),a=e(86476),l=e(31780).arrayEditor,u=e(33652);function h(d,v){var g=d._fullLayout.annotations[v]||{},y=p.getFromId(d,g.xref),m=p.getFromId(d,g.yref);y&&y.setScale(),m&&m.setScale(),x(d,g,v,!1,y,m)}function c(d,v,g,y,m){var b=m[g],f=m[g+"ref"],S=g.indexOf("y")!==-1,w=p.getRefType(f)==="domain",E=S?y.h:y.w;return d?w?b+(S?-v:v)/d._length:d.p2r(d.r2p(b)+v):b+(S?-v:v)/E}function x(d,v,g,y,m,b){var f,S,w=d._fullLayout,E=d._fullLayout._size,O=d._context.edits;y?(f="annotation-"+y,S=y+".annotations"):(f="annotation",S="annotations");var C=l(d.layout,S,v),P=C.modifyBase,D=C.modifyItem,U=C.getUpdateObj;w._infolayer.selectAll("."+f+'[data-index="'+g+'"]').remove();var I="clip"+w._uid+"_ann"+g;if(v._input&&v.visible!==!1){var N={x:{},y:{}},W=+v.textangle||0,F=w._infolayer.append("g").classed(f,!0).attr("data-index",String(g)).style("opacity",v.opacity),j=F.append("g").classed("annotation-text-g",!0),H=O[v.showarrow?"annotationTail":"annotationPosition"],te=v.captureevents||O.annotationText||H,Q=j.append("g").style("pointer-events",te?"all":null).call(n,"pointer").on("click",function(){d._dragging=!1,d.emit("plotly_clickannotation",he(M.event))});v.hovertext&&Q.on("mouseover",function(){var me=v.hoverlabel,Me=me.font,Pe=this.getBoundingClientRect(),ge=d.getBoundingClientRect();i.loneHover({x0:Pe.left-ge.left,x1:Pe.right-ge.left,y:(Pe.top+Pe.bottom)/2-ge.top,text:v.hovertext,color:me.bgcolor,borderColor:me.bordercolor,fontFamily:Me.family,fontSize:Me.size,fontColor:Me.color,fontWeight:Me.weight,fontStyle:Me.style,fontVariant:Me.variant,fontShadow:Me.fontShadow,fontLineposition:Me.fontLineposition,fontTextcase:Me.fontTextcase},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:d})}).on("mouseout",function(){i.loneUnhover(w._hoverlayer.node())});var $=v.borderwidth,K=v.borderpad,X=$+K,Y=Q.append("rect").attr("class","bg").style("stroke-width",$+"px").call(s.stroke,v.bordercolor).call(s.fill,v.bgcolor),re=v.width||v.height,se=w._topclips.selectAll("#"+I).data(re?[0]:[]);se.enter().append("clipPath").classed("annclip",!0).attr("id",I).append("rect"),se.exit().remove();var ae=v.font,ce=w._meta?T.templateString(v.text,w._meta):v.text,fe=Q.append("text").classed("annotation-text",!0).text(ce);O.annotationText?fe.call(r.makeEditable,{delegate:Q,gd:d}).call(ve).on("edit",function(me){v.text=me,this.call(ve),D("text",me),m&&m.autorange&&P(m._name+".autorange",!0),b&&b.autorange&&P(b._name+".autorange",!0),k.call("_guiRelayout",d,U())}):fe.call(ve)}else M.selectAll("#"+I).remove();function he(me){var Me={index:g,annotation:v._input,fullAnnotation:v,event:me};return y&&(Me.subplotId=y),Me}function ve(me){return me.call(t.font,ae).attr({"text-anchor":{left:"start",right:"end"}[v.align]||"middle"}),r.convertToTspans(me,d,ye),me}function ye(){var me=fe.selectAll("a");me.size()===1&&me.text()===fe.text()&&Q.insert("a",":first-child").attr({"xlink:xlink:href":me.attr("xlink:href"),"xlink:xlink:show":me.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Y.node());var Me=Q.select(".annotation-text-math-group"),Pe=!Me.empty(),ge=t.bBox((Pe?Me:fe).node()),oe=ge.width,ie=ge.height,de=v.width||oe,Se=v.height||ie,_e=Math.round(de+2*X),we=Math.round(Se+2*X);function Ae(gt,ut){return ut==="auto"&&(ut=gt<.3333333333333333?"left":gt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ut]}for(var Oe=!1,ze=["x","y"],pe=0;pe<ze.length;pe++){var be,ke,Ie,Ee,Be,Ve=ze[pe],Ze=v[Ve+"ref"]||Ve,rt=v["a"+Ve+"ref"],it={x:m,y:b}[Ve],dt=(W+(Ve==="x"?0:-90))*Math.PI/180,vt=_e*Math.cos(dt),ht=we*Math.sin(dt),Qe=Math.abs(vt)+Math.abs(ht),Je=v[Ve+"anchor"],Tt=v[Ve+"shift"]*(Ve==="x"?1:-1),Ot=N[Ve],Pt=p.getRefType(Ze);if(it&&Pt!=="domain"){var Mt=it.r2fraction(v[Ve]);(Mt<0||Mt>1)&&(rt===Ze?((Mt=it.r2fraction(v["a"+Ve]))<0||Mt>1)&&(Oe=!0):Oe=!0),be=it._offset+it.r2p(v[Ve]),Ee=.5}else{var He=Pt==="domain";Ve==="x"?(Ie=v[Ve],be=He?it._offset+it._length*Ie:be=E.l+E.w*Ie):(Ie=1-v[Ve],be=He?it._offset+it._length*Ie:be=E.t+E.h*Ie),Ee=v.showarrow?.5:Ie}if(v.showarrow){Ot.head=be;var Ye=v["a"+Ve];if(Be=vt*Ae(.5,v.xanchor)-ht*Ae(.5,v.yanchor),rt===Ze){var Ne=p.getRefType(rt);Ne==="domain"?(Ve==="y"&&(Ye=1-Ye),Ot.tail=it._offset+it._length*Ye):Ne==="paper"?Ve==="y"?(Ye=1-Ye,Ot.tail=E.t+E.h*Ye):Ot.tail=E.l+E.w*Ye:Ot.tail=it._offset+it.r2p(Ye),ke=Be}else Ot.tail=be+Ye,ke=Be+Ye;Ot.text=Ot.tail+Be;var We=w[Ve==="x"?"width":"height"];if(Ze==="paper"&&(Ot.head=T.constrain(Ot.head,1,We-1)),rt==="pixel"){var ot=-Math.max(Ot.tail-3,Ot.text),tt=Math.min(Ot.tail+3,Ot.text)-We;ot>0?(Ot.tail+=ot,Ot.text+=ot):tt>0&&(Ot.tail-=tt,Ot.text-=tt)}Ot.tail+=Tt,Ot.head+=Tt}else ke=Be=Qe*Ae(Ee,Je),Ot.text=be+Be;Ot.text+=Tt,Be+=Tt,ke+=Tt,v["_"+Ve+"padplus"]=Qe/2+ke,v["_"+Ve+"padminus"]=Qe/2-ke,v["_"+Ve+"size"]=Qe,v["_"+Ve+"shift"]=Be}if(Oe)Q.remove();else{var Re=0,Fe=0;if(v.align!=="left"&&(Re=(de-oe)*(v.align==="center"?.5:1)),v.valign!=="top"&&(Fe=(Se-ie)*(v.valign==="middle"?.5:1)),Pe)Me.select("svg").attr({x:X+Re-1,y:X+Fe}).call(t.setClipUrl,re?I:null,d);else{var nt=X+Fe-ge.top,Ge=X+Re-ge.left;fe.call(r.positionText,Ge,nt).call(t.setClipUrl,re?I:null,d)}se.select("rect").call(t.setRect,X,X,de,Se),Y.call(t.setRect,$/2,$/2,_e-$,we-$),Q.call(t.setTranslate,Math.round(N.x.text-_e/2),Math.round(N.y.text-we/2)),j.attr({transform:"rotate("+W+","+N.x.text+","+N.y.text+")"});var ct,pt=function(gt,ut){F.selectAll(".annotation-arrow-g").remove();var kt=N.x.head,mt=N.y.head,At=N.x.tail+gt,Lt=N.y.tail+ut,Ct=N.x.text+gt,zt=N.y.text+ut,Gt=T.rotationXYMatrix(W,Ct,zt),rn=T.apply2DTransform(Gt),Nt=T.apply2DTransform2(Gt),Wt=+Y.attr("width"),Rt=+Y.attr("height"),Ln=Ct-.5*Wt,bn=Ln+Wt,hn=zt-.5*Rt,Kt=hn+Rt,on=[[Ln,hn,Ln,Kt],[Ln,Kt,bn,Kt],[bn,Kt,bn,hn],[bn,hn,Ln,hn]].map(Nt);if(!on.reduce(function($n,Gn){return $n^!!T.segmentsIntersect(kt,mt,kt+1e6,mt+1e6,Gn[0],Gn[1],Gn[2],Gn[3])},!1)){on.forEach(function($n){var Gn=T.segmentsIntersect(At,Lt,kt,mt,$n[0],$n[1],$n[2],$n[3]);Gn&&(At=Gn.x,Lt=Gn.y)});var $t=v.arrowwidth,ln=v.arrowcolor,mn=v.arrowside,xn=F.append("g").style({opacity:s.opacity(ln)}).classed("annotation-arrow-g",!0),Mn=xn.append("path").attr("d","M"+At+","+Lt+"L"+kt+","+mt).style("stroke-width",$t+"px").call(s.stroke,s.rgb(ln));if(u(Mn,mn,v),O.annotationPosition&&Mn.node().parentNode&&!y){var Sn=kt,Tn=mt;if(v.standoff){var Rn=Math.sqrt(Math.pow(kt-At,2)+Math.pow(mt-Lt,2));Sn+=v.standoff*(At-kt)/Rn,Tn+=v.standoff*(Lt-mt)/Rn}var Pn,jn,Jn=xn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(At-Sn)+","+(Lt-Tn),transform:_(Sn,Tn)}).style("stroke-width",$t+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:Jn.node(),gd:d,prepFn:function(){var $n=t.getTranslate(Q);Pn=$n.x,jn=$n.y,m&&m.autorange&&P(m._name+".autorange",!0),b&&b.autorange&&P(b._name+".autorange",!0)},moveFn:function($n,Gn){var lr=rn(Pn,jn),Jt=lr[0]+$n,Qt=lr[1]+Gn;Q.call(t.setTranslate,Jt,Qt),D("x",c(m,$n,"x",E,v)),D("y",c(b,Gn,"y",E,v)),v.axref===v.xref&&D("ax",c(m,$n,"ax",E,v)),v.ayref===v.yref&&D("ay",c(b,Gn,"ay",E,v)),xn.attr("transform",_($n,Gn)),j.attr({transform:"rotate("+W+","+Jt+","+Qt+")"})},doneFn:function(){k.call("_guiRelayout",d,U());var $n=document.querySelector(".js-notes-box-panel");$n&&$n.redraw($n.selectedObj)}})}}};v.showarrow&&pt(0,0),H&&a.init({element:Q.node(),gd:d,prepFn:function(){ct=j.attr("transform")},moveFn:function(gt,ut){var kt="pointer";if(v.showarrow)v.axref===v.xref?D("ax",c(m,gt,"ax",E,v)):D("ax",v.ax+gt),v.ayref===v.yref?D("ay",c(b,ut,"ay",E.w,v)):D("ay",v.ay+ut),pt(gt,ut);else{if(y)return;var mt,At;if(m)mt=c(m,gt,"x",E,v);else{var Lt=v._xsize/E.w,Ct=v.x+(v._xshift-v.xshift)/E.w-Lt/2;mt=a.align(Ct+gt/E.w,Lt,0,1,v.xanchor)}if(b)At=c(b,ut,"y",E,v);else{var zt=v._ysize/E.h,Gt=v.y-(v._yshift+v.yshift)/E.h-zt/2;At=a.align(Gt-ut/E.h,zt,0,1,v.yanchor)}D("x",mt),D("y",At),m&&b||(kt=a.getCursor(m?.5:mt,b?.5:At,v.xanchor,v.yanchor))}j.attr({transform:_(gt,ut)+ct}),n(Q,kt)},clickFn:function(gt,ut){v.captureevents&&d.emit("plotly_clickannotation",he(ut))},doneFn:function(){n(Q),k.call("_guiRelayout",d,U());var gt=document.querySelector(".js-notes-box-panel");gt&&gt.redraw(gt.selectedObj)}})}}}ee.exports={draw:function(d){var v=d._fullLayout;v._infolayer.selectAll(".annotation").remove();for(var g=0;g<v.annotations.length;g++)v.annotations[g].visible&&h(d,g);return o.previousPromises(d)},drawOne:h,drawRaw:x}},33652:function(ee,R,e){var M=e(33428),k=e(76308),o=e(72196),T=e(3400),_=T.strScale,p=T.strRotate,s=T.strTranslate;ee.exports=function(t,i,r){var n,a,l,u,h=t.node(),c=o[r.arrowhead||0],x=o[r.startarrowhead||0],d=(r.arrowwidth||1)*(r.arrowsize||1),v=(r.arrowwidth||1)*(r.startarrowsize||1),g=i.indexOf("start")>=0,y=i.indexOf("end")>=0,m=c.backoff*d+r.standoff,b=x.backoff*v+r.startstandoff;if(h.nodeName==="line"){n={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var f=n.x-a.x,S=n.y-a.y;if(u=(l=Math.atan2(S,f))+Math.PI,m&&b&&m+b>Math.sqrt(f*f+S*S))return void F();if(m){if(m*m>f*f+S*S)return void F();var w=m*Math.cos(l),E=m*Math.sin(l);a.x+=w,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(b){if(b*b>f*f+S*S)return void F();var O=b*Math.cos(l),C=b*Math.sin(l);n.x-=O,n.y-=C,t.attr({x1:n.x,y1:n.y})}}else if(h.nodeName==="path"){var P=h.getTotalLength(),D="";if(P<m+b)return void F();var U=h.getPointAtLength(0),I=h.getPointAtLength(.1);l=Math.atan2(U.y-I.y,U.x-I.x),n=h.getPointAtLength(Math.min(b,P)),D="0px,"+b+"px,";var N=h.getPointAtLength(P),W=h.getPointAtLength(P-.1);u=Math.atan2(N.y-W.y,N.x-W.x),a=h.getPointAtLength(Math.max(0,P-m)),D+=P-(D?b+m:m)+"px,"+P+"px",t.style("stroke-dasharray",D)}function F(){t.style("stroke-dasharray","0px,100px")}function j(H,te,Q,$){H.path&&(H.noRotate&&(Q=0),M.select(h.parentNode).append("path").attr({class:t.attr("class"),d:H.path,transform:s(te.x,te.y)+p(180*Q/Math.PI)+_($)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}g&&j(x,n,l,v),y&&j(c,a,u,d)}},79180:function(ee,R,e){var M=e(23816),k=e(42300);ee.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(26828)}},45899:function(ee,R,e){var M=e(13916),k=e(67824).overrideAll,o=e(31780).templatedArray;ee.exports=k(o("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},42456:function(ee,R,e){var M=e(3400),k=e(54460);function o(T,_){var p=_.fullSceneLayout.domain,s=_.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},M.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=s.l+p.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(p.x[1]-p.x[0])},T._ya={},M.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=s.t+(1-p.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(p.y[1]-p.y[0])}}ee.exports=function(T){for(var _=T.fullSceneLayout.annotations,p=0;p<_.length;p++)o(_[p],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},52808:function(ee,R,e){var M=e(3400),k=e(54460),o=e(51272),T=e(87192),_=e(45899);function p(s,t,i,r){function n(l,u){return M.coerce(s,t,_,l,u)}function a(l){var u=l+"axis",h={_fullLayout:{}};return h._fullLayout[u]=i[u],k.coercePosition(t,h,n,l,l,.5)}n("visible")&&(T(s,t,r.fullLayout,n),a("x"),a("y"),a("z"),M.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),M.noneOrAll(s,t,["ax","ay"])))}ee.exports=function(s,t,i){o(s,t,{name:"annotations",handleItemDefaults:p,fullLayout:i.fullLayout})}},71836:function(ee,R,e){var M=e(23816).drawRaw,k=e(94424),o=["x","y","z"];ee.exports=function(T){for(var _=T.fullSceneLayout,p=T.dataScale,s=_.annotations,t=0;t<s.length;t++){for(var i=s[t],r=!1,n=0;n<3;n++){var a=o[n],l=i[a],u=_[a+"axis"].r2fraction(l);if(u<0||u>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(i._pdata=k(T.glplot.cameraParams,[_.xaxis.r2l(i.x)*p[0],_.yaxis.r2l(i.y)*p[1],_.zaxis.r2l(i.z)*p[2]]),M(T.graphDiv,i,t,T.id,i._xa,i._ya))}}},56864:function(ee,R,e){var M=e(24040),k=e(3400);ee.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(o,T){var _=M.subplotsRegistry.gl3d;if(_)for(var p=_.attrRegex,s=Object.keys(o),t=0;t<s.length;t++){var i=s[t];p.test(i)&&(o[i].annotations||[]).length&&(k.pushUnique(T._basePlotModules,_),k.pushUnique(T._subplots.gl3d,i))}},convert:e(42456),draw:e(71836)}},54976:function(ee,R,e){ee.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(ee,R,e){var M=e(54976),k=e(3400),o=e(39032),T=o.EPOCHJD,_=o.ONEDAY,p={valType:"enumerated",values:k.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},s=function(d,v,g,y){var m={};return m[g]=p,k.coerce(d,v,m,g,y)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(d){var v=r[d];return v||(r[d]=M.instance(d))}function a(d){return k.extendFlat({},p,{description:d})}function l(d){return"Sets the calendar system to use with `"+d+"` date data."}var u={xcalendar:a(l("x"))},h=k.extendFlat({},u,{ycalendar:a(l("y"))}),c=k.extendFlat({},h,{zcalendar:a(l("z"))}),x=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ee.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:c,surface:c,mesh3d:c,scattergl:h,ohlc:u,candlestick:u},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:p,handleDefaults:s,handleTraceDefaults:function(d,v,g,y){for(var m=0;m<g.length;m++)s(d,v,g[m]+"calendar",y.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(d,v,g){for(var y,m,b,f,S,w=Math.floor((v+.05)/_)+T,E=n(g).fromJD(w),O=0;(O=d.indexOf("%",O))!==-1;)(y=d.charAt(O+1))==="0"||y==="-"||y==="_"?(b=3,m=d.charAt(O+2),y==="_"&&(y="-")):(m=y,y="0",b=2),(f=i[m])?(S=f===t?t:E.formatDate(f[y]),d=d.substr(0,O)+S+d.substr(O+b),O+=S.length):O+=b;return d}}},22548:function(ee,R){R.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],R.defaultLine="#444",R.lightLine="#eee",R.background="#fff",R.borderLine="#BEC8D9",R.lightFraction=90.9090909090909},76308:function(ee,R,e){var M=e(49760),k=e(38248),o=e(38116).isTypedArray,T=ee.exports={},_=e(22548);T.defaults=_.defaults;var p=T.defaultLine=_.defaultLine;T.lightLine=_.lightLine;var s=T.background=_.background;function t(i){if(k(i)||typeof i!="string")return i;var r=i.trim();if(r.substr(0,3)!=="rgb")return i;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return i;var a=n[1].trim().split(/\s*[\s,]\s*/),l=r.charAt(3)==="a"&&a.length===4;if(!l&&a.length!==3)return i;for(var u=0;u<a.length;u++){if(!a[u].length||(a[u]=Number(a[u]),!(a[u]>=0)))return i;if(u===3)a[u]>1&&(a[u]=1);else if(a[u]>=1)return i}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return l?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(i){var r=i.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(i){return T.tinyRGB(M(i))},T.opacity=function(i){return i?M(i).getAlpha():0},T.addOpacity=function(i,r){var n=M(i).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(i,r){var n=M(i).toRgb();if(n.a===1)return M(i).toRgbString();var a=M(r||s).toRgb(),l=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},u={r:l.r*(1-n.a)+n.r*n.a,g:l.g*(1-n.a)+n.g*n.a,b:l.b*(1-n.a)+n.b*n.a};return M(u).toRgbString()},T.interpolate=function(i,r,n){var a=M(i).toRgb(),l=M(r).toRgb(),u={r:n*a.r+(1-n)*l.r,g:n*a.g+(1-n)*l.g,b:n*a.b+(1-n)*l.b};return M(u).toRgbString()},T.contrast=function(i,r,n){var a=M(i);return a.getAlpha()!==1&&(a=M(T.combine(i,s))),(a.isDark()?r?a.lighten(r):s:n?a.darken(n):p).toString()},T.stroke=function(i,r){var n=M(r);i.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(i,r){var n=M(r);i.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(i){if(i&&typeof i=="object"){var r,n,a,l,u=Object.keys(i);for(r=0;r<u.length;r++)if(l=i[a=u[r]],a.substr(a.length-5)==="color")if(Array.isArray(l))for(n=0;n<l.length;n++)l[n]=t(l[n]);else i[a]=t(l);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(l))for(n=0;n<l.length;n++)Array.isArray(l[n])&&(l[n][1]=t(l[n][1]));else if(Array.isArray(l)){var h=l[0];if(!Array.isArray(h)&&h&&typeof h=="object")for(n=0;n<l.length;n++)T.clean(l[n])}else l&&typeof l=="object"&&!o(l)&&T.clean(l)}}},42996:function(ee,R,e){var M=e(94724),k=e(25376),o=e(92880).extendFlat,T=e(67824).overrideAll;ee.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:o({},M.ticks,{dflt:""}),ticklabeloverflow:o({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:k({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(ee){ee.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(ee,R,e){var M=e(3400),k=e(31780),o=e(26332),T=e(25404),_=e(95936),p=e(42568),s=e(42996);ee.exports=function(t,i,r){var n=k.newContainer(i,"colorbar"),a=t.colorbar||{};function l(D,U){return M.coerce(a,n,s,D,U)}var u=r.margin||{t:0,b:0,l:0,r:0},h=r.width-u.l-u.r,c=r.height-u.t-u.b,x=l("orientation")==="v",d=l("thicknessmode");l("thickness",d==="fraction"?30/(x?h:c):30);var v=l("lenmode");l("len",v==="fraction"?1:x?c:h);var g,y,m,b=l("yref")==="paper",f=l("xref")==="paper",S="left";x?(m="middle",S=f?"left":"right",g=f?1.02:1,y=.5):(m=b?"bottom":"top",S="center",g=.5,y=b?1.02:1),M.coerce(a,n,{x:{valType:"number",min:f?-2:0,max:f?3:1,dflt:g}},"x"),M.coerce(a,n,{y:{valType:"number",min:b?-2:0,max:b?3:1,dflt:y}},"y"),l("xanchor",S),l("xpad"),l("yanchor",m),l("ypad"),M.noneOrAll(a,n,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var w=M.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),o(a,n,l,"linear");var E=r.font,O={noAutotickangles:!0,outerTicks:!1,font:E};w.indexOf("inside")!==-1&&(O.bgColor="black"),p(a,n,l,"linear",O),_(a,n,l,"linear",O),T(a,n,l,"linear",O),l("title.text",r._dfltTitle.colorbar);var C=n.showticklabels?n.tickfont:E,P=M.extendFlat({},E,{family:C.family,size:M.bigFont(C.size)});M.coerceFont(l,"title.font",P),l("title.side",x?"top":"right")}},37848:function(ee,R,e){var M=e(33428),k=e(49760),o=e(7316),T=e(24040),_=e(54460),p=e(86476),s=e(3400),t=s.strTranslate,i=e(92880).extendFlat,r=e(93972),n=e(43616),a=e(76308),l=e(81668),u=e(72736),h=e(94288).flipScale,c=e(28336),x=e(37668),d=e(94724),v=e(84284),g=v.LINE_SPACING,y=v.FROM_TL,m=v.FROM_BR,b=e(63964).cn;ee.exports={draw:function(f){var S=f._fullLayout._infolayer.selectAll("g."+b.colorbar).data(function(w){var E,O,C,P,D=w._fullLayout,U=w.calcdata,I=[];function N(re){return i(re,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function W(){typeof P.calc=="function"?P.calc(w,C,E):(E._fillgradient=O.reversescale?h(O.colorscale):O.colorscale,E._zrange=[O[P.min],O[P.max]])}for(var F=0;F<U.length;F++){var j=U[F];if((C=j[0].trace)._module){var H=C._module.colorbar;if(C.visible===!0&&H)for(var te=Array.isArray(H),Q=te?H:[H],$=0;$<Q.length;$++){var K=(P=Q[$]).container;(O=K?C[K]:C)&&O.showscale&&((E=N(O.colorbar))._id="cb"+C.uid+(te&&K?"-"+K:""),E._traceIndex=C.index,E._propPrefix=(K?K+".":"")+"colorbar.",E._meta=C._meta,W(),I.push(E))}}}for(var X in D._colorAxes)if((O=D[X]).showscale){var Y=D._colorAxes[X];(E=N(O.colorbar))._id="cb"+X,E._propPrefix=X+".colorbar.",E._meta=D._meta,P={min:"cmin",max:"cmax"},Y[0]!=="heatmap"&&(C=Y[1],P.calc=C._module.colorbar.calc),W(),I.push(E)}return I}(f),function(w){return w._id});S.enter().append("g").attr("class",function(w){return w._id}).classed(b.colorbar,!0),S.each(function(w){var E=M.select(this);s.ensureSingle(E,"rect",b.cbbg),s.ensureSingle(E,"g",b.cbfills),s.ensureSingle(E,"g",b.cblines),s.ensureSingle(E,"g",b.cbaxis,function(C){C.classed(b.crisp,!0)}),s.ensureSingle(E,"g",b.cbtitleunshift,function(C){C.append("g").classed(b.cbtitle,!0)}),s.ensureSingle(E,"rect",b.cboutline);var O=function(C,P,D){var U=P.orientation==="v",I=P.len,N=P.lenmode,W=P.thickness,F=P.thicknessmode,j=P.outlinewidth,H=P.borderwidth,te=P.bgcolor,Q=P.xanchor,$=P.yanchor,K=P.xpad,X=P.ypad,Y=P.x,re=U?P.y:1-P.y,se=P.yref==="paper",ae=P.xref==="paper",ce=D._fullLayout,fe=ce._size,he=P._fillcolor,ve=P._line,ye=P.title,me=ye.side,Me=P._zrange||M.extent((typeof he=="function"?he:ve.color).domain()),Pe=typeof ve.color=="function"?ve.color:function(){return ve.color},ge=typeof he=="function"?he:function(){return he},oe=P._levels,ie=function(Ne,We,ot){var tt,Re,Fe=We._levels,nt=[],Ge=[],ct=Fe.end+Fe.size/100,pt=Fe.size,gt=1.001*ot[0]-.001*ot[1],ut=1.001*ot[1]-.001*ot[0];for(Re=0;Re<1e5&&(tt=Fe.start+Re*pt,!(pt>0?tt>=ct:tt<=ct));Re++)tt>gt&&tt<ut&&nt.push(tt);if(We._fillgradient)Ge=[0];else if(typeof We._fillcolor=="function"){var kt=We._filllevels;if(kt)for(ct=kt.end+kt.size/100,pt=kt.size,Re=0;Re<1e5&&(tt=kt.start+Re*pt,!(pt>0?tt>=ct:tt<=ct));Re++)tt>ot[0]&&tt<ot[1]&&Ge.push(tt);else(Ge=nt.map(function(mt){return mt-Fe.size/2})).push(Ge[Ge.length-1]+Fe.size)}else We._fillcolor&&typeof We._fillcolor=="string"&&(Ge=[0]);return Fe.size<0&&(nt.reverse(),Ge.reverse()),{line:nt,fill:Ge}}(0,P,Me),de=ie.fill,Se=ie.line,_e=Math.round(W*(F==="fraction"?U?fe.w:fe.h:1)),we=_e/(U?fe.w:fe.h),Ae=Math.round(I*(N==="fraction"?U?fe.h:fe.w:1)),Oe=Ae/(U?fe.h:fe.w),ze=ae?fe.w:D._fullLayout.width,pe=se?fe.h:D._fullLayout.height,be=Math.round(U?Y*ze+K:re*pe+X),ke={center:.5,right:1}[Q]||0,Ie={top:1,middle:.5}[$]||0,Ee=U?Y-ke*we:re-Ie*we,Be=U?re-Ie*Oe:Y-ke*Oe,Ve=Math.round(U?pe*(1-Be):ze*Be);P._lenFrac=Oe,P._thickFrac=we,P._uFrac=Ee,P._vFrac=Be;var Ze=P._axis=function(Ne,We,ot){var tt=Ne._fullLayout,Re=We.orientation==="v",Fe={type:"linear",range:ot,tickmode:We.tickmode,nticks:We.nticks,tick0:We.tick0,dtick:We.dtick,tickvals:We.tickvals,ticktext:We.ticktext,ticks:We.ticks,ticklen:We.ticklen,tickwidth:We.tickwidth,tickcolor:We.tickcolor,showticklabels:We.showticklabels,labelalias:We.labelalias,ticklabelposition:We.ticklabelposition,ticklabeloverflow:We.ticklabeloverflow,ticklabelstep:We.ticklabelstep,tickfont:We.tickfont,tickangle:We.tickangle,tickformat:We.tickformat,exponentformat:We.exponentformat,minexponent:We.minexponent,separatethousands:We.separatethousands,showexponent:We.showexponent,showtickprefix:We.showtickprefix,tickprefix:We.tickprefix,showticksuffix:We.showticksuffix,ticksuffix:We.ticksuffix,title:We.title,showline:!0,anchor:"free",side:Re?"right":"bottom",position:1},nt=Re?"y":"x",Ge={type:"linear",_id:nt+We._id},ct={letter:nt,font:tt.font,noAutotickangles:nt==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:tt.calendar};function pt(gt,ut){return s.coerce(Fe,Ge,d,gt,ut)}return c(Fe,Ge,pt,ct,tt),x(Fe,Ge,pt,ct),Ge}(D,P,Me);Ze.position=we+(U?Y+K/fe.w:re+X/fe.h);var rt=["top","bottom"].indexOf(me)!==-1;if(U&&rt&&(Ze.title.side=me,Ze.titlex=Y+K/fe.w,Ze.titley=Be+(ye.side==="top"?Oe-X/fe.h:X/fe.h)),U||rt||(Ze.title.side=me,Ze.titley=re+X/fe.h,Ze.titlex=Be+K/fe.w),ve.color&&P.tickmode==="auto"){Ze.tickmode="linear",Ze.tick0=oe.start;var it=oe.size,dt=s.constrain(Ae/50,4,15)+1,vt=(Me[1]-Me[0])/((P.nticks||dt)*it);if(vt>1){var ht=Math.pow(10,Math.floor(Math.log(vt)/Math.LN10));it*=ht*s.roundUp(vt/ht,[2,5,10]),(Math.abs(oe.start)/oe.size+1e-6)%1<2e-6&&(Ze.tick0=0)}Ze.dtick=it}Ze.domain=U?[Be+X/fe.h,Be+Oe-X/fe.h]:[Be+K/fe.w,Be+Oe-K/fe.w],Ze.setScale(),C.attr("transform",t(Math.round(fe.l),Math.round(fe.t)));var Qe,Je=C.select("."+b.cbtitleunshift).attr("transform",t(-Math.round(fe.l),-Math.round(fe.t))),Tt=Ze.ticklabelposition,Ot=Ze.title.font.size,Pt=C.select("."+b.cbaxis),Mt=0,He=0;function Ye(Ne,We){var ot={propContainer:Ze,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:ce._dfltTitle.colorbar,containerGroup:C.select("."+b.cbtitle)},tt=Ne.charAt(0)==="h"?Ne.substr(1):"h"+Ne;C.selectAll("."+tt+",."+tt+"-math-group").remove(),l.draw(D,Ne,i(ot,We||{}))}return s.syncOrAsync([o.previousPromises,function(){var Ne,We;(U&&rt||!U&&!rt)&&(me==="top"&&(Ne=K+fe.l+ze*Y,We=X+fe.t+pe*(1-Be-Oe)+3+.75*Ot),me==="bottom"&&(Ne=K+fe.l+ze*Y,We=X+fe.t+pe*(1-Be)-3-.25*Ot),me==="right"&&(We=X+fe.t+pe*re+3+.75*Ot,Ne=K+fe.l+ze*Be),Ye(Ze._id+"title",{attributes:{x:Ne,y:We,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!rt||U&&rt){var Ne,We=C.select("."+b.cbtitle),ot=We.select("text"),tt=[-j/2,j/2],Re=We.select(".h"+Ze._id+"title-math-group").node(),Fe=15.6;if(ot.node()&&(Fe=parseInt(ot.node().style.fontSize,10)*g),Re?(Ne=n.bBox(Re),He=Ne.width,(Mt=Ne.height)>Fe&&(tt[1]-=(Mt-Fe)/2)):ot.node()&&!ot.classed(b.jsPlaceholder)&&(Ne=n.bBox(ot.node()),He=Ne.width,Mt=Ne.height),U){if(Mt){if(Mt+=5,me==="top")Ze.domain[1]-=Mt/fe.h,tt[1]*=-1;else{Ze.domain[0]+=Mt/fe.h;var nt=u.lineCount(ot);tt[1]+=(1-nt)*Fe}We.attr("transform",t(tt[0],tt[1])),Ze.setScale()}}else He&&(me==="right"&&(Ze.domain[0]+=(He+Ot/2)/fe.w),We.attr("transform",t(tt[0],tt[1])),Ze.setScale())}C.selectAll("."+b.cbfills+",."+b.cblines).attr("transform",U?t(0,Math.round(fe.h*(1-Ze.domain[1]))):t(Math.round(fe.w*Ze.domain[0]),0)),Pt.attr("transform",U?t(0,Math.round(-fe.t)):t(Math.round(-fe.l),0));var Ge=C.select("."+b.cbfills).selectAll("rect."+b.cbfill).attr("style","").data(de);Ge.enter().append("rect").classed(b.cbfill,!0).attr("style",""),Ge.exit().remove();var ct=Me.map(Ze.c2p).map(Math.round).sort(function(mt,At){return mt-At});Ge.each(function(mt,At){var Lt=[At===0?Me[0]:(de[At]+de[At-1])/2,At===de.length-1?Me[1]:(de[At]+de[At+1])/2].map(Ze.c2p).map(Math.round);U&&(Lt[1]=s.constrain(Lt[1]+(Lt[1]>Lt[0])?1:-1,ct[0],ct[1]));var Ct=M.select(this).attr(U?"x":"y",be).attr(U?"y":"x",M.min(Lt)).attr(U?"width":"height",Math.max(_e,2)).attr(U?"height":"width",Math.max(M.max(Lt)-M.min(Lt),2));if(P._fillgradient)n.gradient(Ct,D,P._id,U?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var zt=ge(mt).replace("e-","");Ct.attr("fill",k(zt).toHexString())}});var pt=C.select("."+b.cblines).selectAll("path."+b.cbline).data(ve.color&&ve.width?Se:[]);pt.enter().append("path").classed(b.cbline,!0),pt.exit().remove(),pt.each(function(mt){var At=be,Lt=Math.round(Ze.c2p(mt))+ve.width/2%1;M.select(this).attr("d","M"+(U?At+","+Lt:Lt+","+At)+(U?"h":"v")+_e).call(n.lineGroupStyle,ve.width,Pe(mt),ve.dash)}),Pt.selectAll("g."+Ze._id+"tick,path").remove();var gt=be+_e+(j||0)/2-(P.ticks==="outside"?1:0),ut=_.calcTicks(Ze),kt=_.getTickSigns(Ze)[2];return _.drawTicks(D,Ze,{vals:Ze.ticks==="inside"?_.clipEnds(Ze,ut):ut,layer:Pt,path:_.makeTickPath(Ze,gt,kt),transFn:_.makeTransTickFn(Ze)}),_.drawLabels(D,Ze,{vals:ut,layer:Pt,transFn:_.makeTransTickLabelFn(Ze),labelFns:_.makeLabelFns(Ze,gt)})},function(){if(U&&!rt||!U&&rt){var Ne,We,ot=Ze.position||0,tt=Ze._offset+Ze._length/2;if(me==="right")We=tt,Ne=fe.l+ze*ot+10+Ot*(Ze.showticklabels?1:.5);else if(Ne=tt,me==="bottom"&&(We=fe.t+pe*ot+10+(Tt.indexOf("inside")===-1?Ze.tickfont.size:0)+(Ze.ticks!=="intside"&&P.ticklen||0)),me==="top"){var Re=ye.text.split("<br>").length;We=fe.t+pe*ot+10-_e-g*Ot*Re}Ye((U?"h":"v")+Ze._id+"title",{avoid:{selection:M.select(D).selectAll("g."+Ze._id+"tick"),side:me,offsetTop:U?0:fe.t,offsetLeft:U?fe.l:0,maxShift:U?ce.width:ce.height},attributes:{x:Ne,y:We,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},o.previousPromises,function(){var Ne,We=_e+j/2;Tt.indexOf("inside")===-1&&(Ne=n.bBox(Pt.node()),We+=U?Ne.width:Ne.height),Qe=Je.select("text");var ot=0,tt=U&&me==="top",Re=!U&&me==="right",Fe=0;if(Qe.node()&&!Qe.classed(b.jsPlaceholder)){var nt,Ge=Je.select(".h"+Ze._id+"title-math-group").node();Ge&&(U&&rt||!U&&!rt)?(ot=(Ne=n.bBox(Ge)).width,nt=Ne.height):(ot=(Ne=n.bBox(Je.node())).right-fe.l-(U?be:Ve),nt=Ne.bottom-fe.t-(U?Ve:be),U||me!=="top"||(We+=Ne.height,Fe=Ne.height)),Re&&(Qe.attr("transform",t(ot/2+Ot/2,0)),ot*=2),We=Math.max(We,U?ot:nt)}var ct=2*(U?K:X)+We+H+j/2,pt=0;!U&&ye.text&&$==="bottom"&&re<=0&&(ct+=pt=ct/2,Fe+=pt),ce._hColorbarMoveTitle=pt,ce._hColorbarMoveCBTitle=Fe;var gt=H+j,ut=(U?be:Ve)-gt/2-(U?K:0),kt=(U?Ve:be)-(U?Ae:X+Fe-pt);C.select("."+b.cbbg).attr("x",ut).attr("y",kt).attr(U?"width":"height",Math.max(ct-pt,2)).attr(U?"height":"width",Math.max(Ae+gt,2)).call(a.fill,te).call(a.stroke,P.bordercolor).style("stroke-width",H);var mt=Re?Math.max(ot-10,0):0;C.selectAll("."+b.cboutline).attr("x",(U?be:Ve+K)+mt).attr("y",(U?Ve+X-Ae:be)+(tt?Mt:0)).attr(U?"width":"height",Math.max(_e,2)).attr(U?"height":"width",Math.max(Ae-(U?2*X+Mt:2*K+mt),2)).call(a.stroke,P.outlinecolor).style({fill:"none","stroke-width":j});var At=U?ke*ct:0,Lt=U?0:(1-Ie)*ct-Fe;if(At=ae?fe.l-At:-At,Lt=se?fe.t-Lt:-Lt,C.attr("transform",t(At,Lt)),!U&&(H||k(te).getAlpha()&&!k.equals(ce.paper_bgcolor,te))){var Ct=Pt.selectAll("text"),zt=Ct[0].length,Gt=C.select("."+b.cbbg).node(),rn=n.bBox(Gt),Nt=n.getTranslate(C);Ct.each(function(mn,xn){var Mn=zt-1;if(xn===0||xn===Mn){var Sn,Tn=n.bBox(this),Rn=n.getTranslate(this);if(xn===Mn){var Pn=Tn.right+Rn.x;(Sn=rn.right+Nt.x+Ve-H-2+Y-Pn)>0&&(Sn=0)}else if(xn===0){var jn=Tn.left+Rn.x;(Sn=rn.left+Nt.x+Ve+H+2-jn)<0&&(Sn=0)}Sn&&(zt<3?this.setAttribute("transform","translate("+Sn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Wt={},Rt=y[Q],Ln=m[Q],bn=y[$],hn=m[$],Kt=ct-_e;U?(N==="pixels"?(Wt.y=re,Wt.t=Ae*bn,Wt.b=Ae*hn):(Wt.t=Wt.b=0,Wt.yt=re+I*bn,Wt.yb=re-I*hn),F==="pixels"?(Wt.x=Y,Wt.l=ct*Rt,Wt.r=ct*Ln):(Wt.l=Kt*Rt,Wt.r=Kt*Ln,Wt.xl=Y-W*Rt,Wt.xr=Y+W*Ln)):(N==="pixels"?(Wt.x=Y,Wt.l=Ae*Rt,Wt.r=Ae*Ln):(Wt.l=Wt.r=0,Wt.xl=Y+I*Rt,Wt.xr=Y-I*Ln),F==="pixels"?(Wt.y=1-re,Wt.t=ct*bn,Wt.b=ct*hn):(Wt.t=Kt*bn,Wt.b=Kt*hn,Wt.yt=re-W*bn,Wt.yb=re+W*hn));var on=P.y<.5?"b":"t",$t=P.x<.5?"l":"r";D._fullLayout._reservedMargin[P._id]={};var ln={r:ce.width-ut-At,l:ut+Wt.r,b:ce.height-kt-Lt,t:kt+Wt.b};ae&&se?o.autoMargin(D,P._id,Wt):ae?D._fullLayout._reservedMargin[P._id][on]=ln[on]:se||U?D._fullLayout._reservedMargin[P._id][$t]=ln[$t]:D._fullLayout._reservedMargin[P._id][on]=ln[on]}],D)}(E,w,f);O&&O.then&&(f._promises||[]).push(O),f._context.edits.colorbarPosition&&function(C,P,D){var U,I,N,W=P.orientation==="v",F=D._fullLayout._size;p.init({element:C.node(),gd:D,prepFn:function(){U=C.attr("transform"),r(C)},moveFn:function(j,H){C.attr("transform",U+t(j,H)),I=p.align((W?P._uFrac:P._vFrac)+j/F.w,W?P._thickFrac:P._lenFrac,0,1,P.xanchor),N=p.align((W?P._vFrac:1-P._uFrac)-H/F.h,W?P._lenFrac:P._thickFrac,0,1,P.yanchor);var te=p.getCursor(I,N,P.xanchor,P.yanchor);r(C,te)},doneFn:function(){if(r(C),I!==void 0&&N!==void 0){var j={};j[P._propPrefix+"x"]=I,j[P._propPrefix+"y"]=N,P._traceIndex!==void 0?T.call("_guiRestyle",D,j,P._traceIndex):T.call("_guiRelayout",D,j)}}})}(E,w,f)}),S.exit().each(function(w){o.autoMargin(f,w._id)}).remove(),S.order()}}},90553:function(ee,R,e){var M=e(3400);ee.exports=function(k){return M.isPlainObject(k.colorbar)}},55080:function(ee,R,e){ee.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(ee,R,e){var M=e(42996),k=e(53756).counter,o=e(95376),T=e(88304).scales;function _(p){return"`"+p+"`"}o(T),ee.exports=function(p,s){p=p||"";var t,i=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:p==="marker.line"),n="showScaleDflt"in s?s.showScaleDflt:i==="z",a=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,l=s.editTypeOverride||"",u=p?p+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):_(u+(t={z:"z",c:"color"}[i]));var h=i+"auto",c=i+"min",x=i+"max",d=i+"mid",v={};v[c]=v[x]=void 0;var g={};g[h]=!1;var y={};return t==="color"&&(y.color={valType:"color",arrayOk:!0,editType:l||"style"},s.anim&&(y.color.anim=!0)),y[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:v},y[c]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},y[x]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},y[d]={valType:"number",dflt:null,editType:"calc",impliedEdits:v},y.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},y.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},y.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(y.showscale={valType:"boolean",dflt:n,editType:"calc"},y.colorbar=M),s.noColorAxis||(y.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),y}},47128:function(ee,R,e){var M=e(38248),k=e(3400),o=e(94288).extractOpts;ee.exports=function(T,_,p){var s,t=T._fullLayout,i=p.vals,r=p.containerStr,n=r?k.nestedProperty(_,r).get():_,a=o(n),l=a.auto!==!1,u=a.min,h=a.max,c=a.mid,x=function(){return k.aggNums(Math.min,null,i)},d=function(){return k.aggNums(Math.max,null,i)};u===void 0?u=x():l&&(u=n._colorAx&&M(u)?Math.min(u,x()):x()),h===void 0?h=d():l&&(h=n._colorAx&&M(h)?Math.max(h,d()):d()),l&&c!==void 0&&(h-c>c-u?u=c-(h-c):h-c<c-u&&(h=c+(c-u))),u===h&&(u-=.5,h+=.5),a._sync("min",u),a._sync("max",h),a.autocolorscale&&(s=u*h<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,a._sync("colorscale",s))}},95504:function(ee,R,e){var M=e(3400),k=e(94288).hasColorscale,o=e(94288).extractOpts;ee.exports=function(T,_){function p(l,u){var h=l["_"+u];h!==void 0&&(l[u]=h)}function s(l,u){var h=u.container?M.nestedProperty(l,u.container).get():l;if(h)if(h.coloraxis)h._colorAx=_[h.coloraxis];else{var c=o(h),x=c.auto;(x||c.min===void 0)&&p(h,u.min),(x||c.max===void 0)&&p(h,u.max),c.autocolorscale&&p(h,"colorscale")}}for(var t=0;t<T.length;t++){var i=T[t],r=i._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(i,r[n]);else s(i,r);k(i,"marker.line")&&s(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in _._colorAxes)s(_[a],{min:"cmin",max:"cmax"})}},27260:function(ee,R,e){var M=e(38248),k=e(3400),o=e(90553),T=e(64013),_=e(88304).isValid,p=e(24040).traceIs;function s(t,i){var r=i.slice(0,i.length-1);return i?k.nestedProperty(t,r).get()||{}:t}ee.exports=function t(i,r,n,a,l){var u=l.prefix,h=l.cLetter,c="_module"in r,x=s(i,u),d=s(r,u),v=s(r._template||{},u)||{},g=function(){return delete i.coloraxis,delete r.coloraxis,t(i,r,n,a,l)};if(c){var y=n._colorAxes||{},m=a(u+"coloraxis");if(m){var b=p(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",f=y[m];return void(f?(f[2].push(g),f[0]!==b&&(f[0]=!1,k.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):y[m]=[b,r,[g]])}}var S=x[h+"min"],w=x[h+"max"],E=M(S)&&M(w)&&S<w;a(u+h+"auto",!E)?a(u+h+"mid"):(a(u+h+"min"),a(u+h+"max"));var O,C,P=x.colorscale,D=v.colorscale;P!==void 0&&(O=!_(P)),D!==void 0&&(O=!_(D)),a(u+"autocolorscale",O),a(u+"colorscale"),a(u+"reversescale"),u!=="marker.line."&&(u&&c&&(C=o(x)),a(u+"showscale",C)&&(u&&v&&(d._template=v),T(x,d,n)))}},94288:function(ee,R,e){var M=e(33428),k=e(49760),o=e(38248),T=e(3400),_=e(76308),p=e(88304).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(u){var h,c,x,d=u._colorAx,v=d||u,g={};for(c=0;c<s.length;c++)g[x=s[c]]=v[x];if(d)for(h="c",c=0;c<t.length;c++)g[x=t[c]]=v["c"+x];else{var y;for(c=0;c<t.length;c++)((y="c"+(x=t[c]))in v||(y="z"+x)in v)&&(g[x]=v[y]);h=y.charAt(0)}return g._sync=function(m,b){var f=t.indexOf(m)!==-1?h+m:m;v[f]=v["_"+f]=b},g}function r(u){for(var h=i(u),c=h.min,x=h.max,d=h.reversescale?n(h.colorscale):h.colorscale,v=d.length,g=new Array(v),y=new Array(v),m=0;m<v;m++){var b=d[m];g[m]=c+b[0]*(x-c),y[m]=b[1]}return{domain:g,range:y}}function n(u){for(var h=u.length,c=new Array(h),x=h-1,d=0;x>=0;x--,d++){var v=u[x];c[d]=[1-v[0],v[1]]}return c}function a(u,h){h=h||{};for(var c=u.domain,x=u.range,d=x.length,v=new Array(d),g=0;g<d;g++){var y=k(x[g]).toRgb();v[g]=[y.r,y.g,y.b,y.a]}var m,b=M.scale.linear().domain(c).range(v).clamp(!0),f=h.noNumericCheck,S=h.returnArray;return(m=f&&S?b:f?function(w){return l(b(w))}:S?function(w){return o(w)?b(w):k(w).isValid()?w:_.defaultLine}:function(w){return o(w)?l(b(w)):k(w).isValid()?w:_.defaultLine}).domain=b.domain,m.range=function(){return x},m}function l(u){var h={r:u[0],g:u[1],b:u[2],a:u[3]};return k(h).toRgbString()}ee.exports={hasColorscale:function(u,h,c){var x=h?T.nestedProperty(u,h).get()||{}:u,d=x[c||"color"];d&&d._inputArray&&(d=d._inputArray);var v=!1;if(T.isArrayOrTypedArray(d)){for(var g=0;g<d.length;g++)if(o(d[g])){v=!0;break}}return T.isPlainObject(x)&&(v||x.showscale===!0||o(x.cmin)&&o(x.cmax)||p(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:i,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(u,h){return a(r(u),h)}}},8932:function(ee,R,e){var M=e(88304),k=e(94288);ee.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},92332:function(ee,R,e){var M=e(92880).extendFlat,k=e(49084),o=e(88304).scales;ee.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(ee,R,e){var M=e(3400),k=e(31780),o=e(92332),T=e(27260);ee.exports=function(_,p){function s(h,c){return M.coerce(_,p,o,h,c)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,i,r=p._colorAxes;function n(h,c){return M.coerce(t,i,o.coloraxis,h,c)}for(var a in r){var l=r[a];if(l[0])t=_[a]||{},(i=k.newContainer(p,a,"coloraxis"))._name=a,T(t,i,p,n,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete p._colorAxes[a]}}}},88304:function(ee,R,e){var M=e(49760),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=k.RdBu;function T(_){var p=0;if(!Array.isArray(_)||_.length<2||!_[0]||!_[_.length-1]||+_[0][0]!=0||+_[_.length-1][0]!=1)return!1;for(var s=0;s<_.length;s++){var t=_[s];if(t.length!==2||+t[0]<p||!M(t[1]).isValid())return!1;p=+t[0]}return!0}ee.exports={scales:k,defaultScale:o,get:function(_,p){if(p||(p=o),!_)return p;function s(){try{_=k[_]||JSON.parse(_)}catch{_=p}}return typeof _=="string"&&(s(),typeof _=="string"&&s()),T(_)?_:p},isValid:function(_){return k[_]!==void 0||T(_)}}},78316:function(ee){ee.exports=function(R,e,M,k,o){var T=(R-M)/(k-M),_=T+e/(k-M),p=(T+_)/2;return o==="left"||o==="bottom"?T:o==="center"||o==="middle"?p:o==="right"||o==="top"?_:T<.6666666666666666-p?T:_>1.3333333333333333-p?_:p}},67416:function(ee,R,e){var M=e(3400),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ee.exports=function(o,T,_,p){return o=_==="left"?0:_==="center"?1:_==="right"?2:M.constrain(Math.floor(3*o),0,2),T=p==="bottom"?0:p==="middle"?1:p==="top"?2:M.constrain(Math.floor(3*T),0,2),k[T][o]}},72760:function(ee,R){R.selectMode=function(e){return e==="lasso"||e==="select"},R.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},R.openMode=function(e){return e==="drawline"||e==="drawopenpath"},R.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},R.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},R.selectingOrDrawing=function(e){return R.freeMode(e)||R.rectMode(e)}},86476:function(ee,R,e){var M=e(29128),k=e(52264),o=e(89184),T=e(3400).removeElement,_=e(33816),p=ee.exports={};p.align=e(78316),p.getCursor=e(67416);var s=e(2616);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function i(r){return M(r.changedTouches?r.changedTouches[0]:r,document.body)}p.unhover=s.wrapped,p.unhoverRaw=s.raw,p.init=function(r){var n,a,l,u,h,c,x,d,v=r.gd,g=1,y=v._context.doubleClickDelay,m=r.element;v._mouseDownTime||(v._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=f,o?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=f,m.addEventListener("touchstart",f,{passive:!1})):m.ontouchstart=f;var b=r.clampFn||function(E,O,C){return Math.abs(E)<C&&(E=0),Math.abs(O)<C&&(O=0),[E,O]};function f(E){v._dragged=!1,v._dragging=!0;var O=i(E);n=O[0],a=O[1],x=E.target,c=E,d=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=n,E.clientY=a),(l=new Date().getTime())-v._mouseDownTime<y?g+=1:(g=1,v._mouseDownTime=l),r.prepFn&&r.prepFn(E,n,a),k&&!d?(h=t()).style.cursor=window.getComputedStyle(m).cursor:k||(h=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),r.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var O=i(E),C=r.minDrag||_.MINDRAG,P=b(O[0]-n,O[1]-a,C),D=P[0],U=P[1];(D||U)&&(v._dragged=!0,p.unhover(v,E)),v._dragged&&r.moveFn&&!d&&(v._dragdata={element:m,dx:D,dy:U},r.moveFn(D,U))}function w(E){if(delete v._dragdata,r.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(h):u&&(h.documentElement.style.cursor=u,u=null),v._dragging){if(v._dragging=!1,new Date().getTime()-v._mouseDownTime>y&&(g=Math.max(g-1,1)),v._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(g,c),!d){var O;try{O=new MouseEvent("click",E)}catch{var C=i(E);(O=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(O)}v._dragging=!1,v._dragged=!1}else v._dragged=!1}},p.coverSlip=t},2616:function(ee,R,e){var M=e(95924),k=e(91200),o=e(52200).getGraphDiv,T=e(92456),_=ee.exports={};_.wrapped=function(p,s,t){(p=o(p))._fullLayout&&k.clear(p._fullLayout._uid+T.HOVERID),_.raw(p,s,t)},_.raw=function(p,s){var t=p._fullLayout,i=p._hoverdata;s||(s={}),s.target&&!p._dragged&&M.triggerHandler(p,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),p._hoverdata=void 0,s.target&&i&&p.emit("plotly_unhover",{event:s,points:i}))}},98192:function(ee,R){R.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},R.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(ee,R,e){var M=e(33428),k=e(3400),o=k.numberFormat,T=e(38248),_=e(49760),p=e(24040),s=e(76308),t=e(8932),i=k.strTranslate,r=e(72736),n=e(9616),a=e(84284).LINE_SPACING,l=e(13448).DESELECTDIM,u=e(43028),h=e(7152),c=e(10624).appendArrayPointValue,x=ee.exports={};function d(ge){return ge==="none"?void 0:ge}x.font=function(ge,oe){var ie=oe.variant,de=oe.style,Se=oe.weight,_e=oe.color,we=oe.size,Ae=oe.family,Oe=oe.shadow,ze=oe.lineposition,pe=oe.textcase;Ae&&ge.style("font-family",Ae),we+1&&ge.style("font-size",we+"px"),_e&&ge.call(s.fill,_e),Se&&ge.style("font-weight",Se),de&&ge.style("font-style",de),ie&&ge.style("font-variant",ie),pe&&ge.style("text-transform",d(function(be){return v[be]}(pe))),Oe&&ge.style("text-shadow",Oe==="auto"?r.makeTextShadow(s.contrast(_e)):d(Oe)),ze&&ge.style("text-decoration-line",d(function(be){return be.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}(ze)))};var v={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function g(ge,oe,ie,de){var Se=oe.fillpattern,_e=oe.fillgradient,we=Se&&x.getPatternAttr(Se.shape,0,"");if(we){var Ae=x.getPatternAttr(Se.bgcolor,0,null),Oe=x.getPatternAttr(Se.fgcolor,0,null),ze=Se.fgopacity,pe=x.getPatternAttr(Se.size,0,8),be=x.getPatternAttr(Se.solidity,0,.3),ke=oe.uid;x.pattern(ge,"point",ie,ke,we,pe,be,void 0,Se.fillmode,Ae,Oe,ze)}else if(_e&&_e.type!=="none"){var Ie,Ee,Be=_e.type,Ve="scatterfill-"+oe.uid;de&&(Ve="legendfill-"+oe.uid),de||_e.start===void 0&&_e.stop===void 0?(Be==="horizontal"&&(Be+="reversed"),ge.call(x.gradient,ie,Ve,Be,_e.colorscale,"fill")):(Be==="horizontal"?(Ie={x:_e.start,y:0},Ee={x:_e.stop,y:0}):Be==="vertical"&&(Ie={x:0,y:_e.start},Ee={x:0,y:_e.stop}),Ie.x=oe._xA.c2p(Ie.x===void 0?oe._extremes.x.min[0].val:Ie.x,!0),Ie.y=oe._yA.c2p(Ie.y===void 0?oe._extremes.y.min[0].val:Ie.y,!0),Ee.x=oe._xA.c2p(Ee.x===void 0?oe._extremes.x.max[0].val:Ee.x,!0),Ee.y=oe._yA.c2p(Ee.y===void 0?oe._extremes.y.max[0].val:Ee.y,!0),ge.call(w,ie,Ve,"linear",_e.colorscale,"fill",Ie,Ee,!0,!1))}else oe.fillcolor&&ge.call(s.fill,oe.fillcolor)}x.setPosition=function(ge,oe,ie){ge.attr("x",oe).attr("y",ie)},x.setSize=function(ge,oe,ie){ge.attr("width",oe).attr("height",ie)},x.setRect=function(ge,oe,ie,de,Se){ge.call(x.setPosition,oe,ie).call(x.setSize,de,Se)},x.translatePoint=function(ge,oe,ie,de){var Se=ie.c2p(ge.x),_e=de.c2p(ge.y);return!!(T(Se)&&T(_e)&&oe.node())&&(oe.node().nodeName==="text"?oe.attr("x",Se).attr("y",_e):oe.attr("transform",i(Se,_e)),!0)},x.translatePoints=function(ge,oe,ie){ge.each(function(de){var Se=M.select(this);x.translatePoint(de,Se,oe,ie)})},x.hideOutsideRangePoint=function(ge,oe,ie,de,Se,_e){oe.attr("display",ie.isPtWithinRange(ge,Se)&&de.isPtWithinRange(ge,_e)?null:"none")},x.hideOutsideRangePoints=function(ge,oe){if(oe._hasClipOnAxisFalse){var ie=oe.xaxis,de=oe.yaxis;ge.each(function(Se){var _e=Se[0].trace,we=_e.xcalendar,Ae=_e.ycalendar,Oe=p.traceIs(_e,"bar-like")?".bartext":".point,.textpoint";ge.selectAll(Oe).each(function(ze){x.hideOutsideRangePoint(ze,M.select(this),ie,de,we,Ae)})})}},x.crispRound=function(ge,oe,ie){return oe&&T(oe)?ge._context.staticPlot?oe:oe<1?1:Math.round(oe):ie||0},x.singleLineStyle=function(ge,oe,ie,de,Se){oe.style("fill","none");var _e=(((ge||[])[0]||{}).trace||{}).line||{},we=ie||_e.width||0,Ae=Se||_e.dash||"";s.stroke(oe,de||_e.color),x.dashLine(oe,Ae,we)},x.lineGroupStyle=function(ge,oe,ie,de){ge.style("fill","none").each(function(Se){var _e=(((Se||[])[0]||{}).trace||{}).line||{},we=oe||_e.width||0,Ae=de||_e.dash||"";M.select(this).call(s.stroke,ie||_e.color).call(x.dashLine,Ae,we)})},x.dashLine=function(ge,oe,ie){ie=+ie||0,oe=x.dashStyle(oe,ie),ge.style({"stroke-dasharray":oe,"stroke-width":ie+"px"})},x.dashStyle=function(ge,oe){oe=+oe||1;var ie=Math.max(oe,3);return ge==="solid"?ge="":ge==="dot"?ge=ie+"px,"+ie+"px":ge==="dash"?ge=3*ie+"px,"+3*ie+"px":ge==="longdash"?ge=5*ie+"px,"+5*ie+"px":ge==="dashdot"?ge=3*ie+"px,"+ie+"px,"+ie+"px,"+ie+"px":ge==="longdashdot"&&(ge=5*ie+"px,"+2*ie+"px,"+ie+"px,"+2*ie+"px"),ge},x.singleFillStyle=function(ge,oe){var ie=M.select(ge.node());g(ge,((ie.data()[0]||[])[0]||{}).trace||{},oe,!1)},x.fillGroupStyle=function(ge,oe,ie){ge.style("stroke-width",0).each(function(de){var Se=M.select(this);de[0].trace&&g(Se,de[0].trace,oe,ie)})};var y=e(71984);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(y).forEach(function(ge){var oe=y[ge],ie=oe.n;x.symbolList.push(ie,String(ie),ge,ie+100,String(ie+100),ge+"-open"),x.symbolNames[ie]=ge,x.symbolFuncs[ie]=oe.f,x.symbolBackOffs[ie]=oe.backoff||0,oe.needLine&&(x.symbolNeedLines[ie]=!0),oe.noDot?x.symbolNoDot[ie]=!0:x.symbolList.push(ie+200,String(ie+200),ge+"-dot",ie+300,String(ie+300),ge+"-open-dot"),oe.noFill&&(x.symbolNoFill[ie]=!0)});var m=x.symbolNames.length;function b(ge,oe,ie,de){var Se=ge%100;return x.symbolFuncs[Se](oe,ie,de)+(ge>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(ge){if(T(ge))ge=+ge;else if(typeof ge=="string"){var oe=0;ge.indexOf("-open")>0&&(oe=100,ge=ge.replace("-open","")),ge.indexOf("-dot")>0&&(oe+=200,ge=ge.replace("-dot","")),(ge=x.symbolNames.indexOf(ge))>=0&&(ge+=oe)}return ge%100>=m||ge>=400?0:Math.floor(Math.max(ge,0))};var f=o("~f"),S={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function w(ge,oe,ie,de,Se,_e,we,Ae,Oe,ze){var pe,be=Se.length;de==="linear"?pe={node:"linearGradient",attrs:{x1:we.x,y1:we.y,x2:Ae.x,y2:Ae.y,gradientUnits:Oe?"userSpaceOnUse":"objectBoundingBox"},reversed:ze}:de==="radial"&&(pe={node:"radialGradient",reversed:ze});for(var ke=new Array(be),Ie=0;Ie<be;Ie++)pe.reversed?ke[be-1-Ie]=[f(100*(1-Se[Ie][0])),Se[Ie][1]]:ke[Ie]=[f(100*Se[Ie][0]),Se[Ie][1]];var Ee=oe._fullLayout,Be="g"+Ee._uid+"-"+ie,Ve=Ee._defs.select(".gradients").selectAll("#"+Be).data([de+ke.join(";")],k.identity);Ve.exit().remove(),Ve.enter().append(pe.node).each(function(){var Ze=M.select(this);pe.attrs&&Ze.attr(pe.attrs),Ze.attr("id",Be);var rt=Ze.selectAll("stop").data(ke);rt.exit().remove(),rt.enter().append("stop"),rt.each(function(it){var dt=_(it[1]);M.select(this).attr({offset:it[0]+"%","stop-color":s.tinyRGB(dt),"stop-opacity":dt.getAlpha()})})}),ge.style(_e,$(Be,oe)).style(_e+"-opacity",null),ge.classed("gradient_filled",!0)}x.gradient=function(ge,oe,ie,de,Se,_e){var we=S[de];return w(ge,oe,ie,we.type,Se,_e,we.start,we.stop,!1,we.reversed)},x.pattern=function(ge,oe,ie,de,Se,_e,we,Ae,Oe,ze,pe,be){var ke=oe==="legend";Ae&&(Oe==="overlay"?(ze=Ae,pe=s.contrast(ze)):(ze=void 0,pe=Ae));var Ie,Ee,Be,Ve,Ze,rt,it,dt,vt,ht=ie._fullLayout,Qe="p"+ht._uid+"-"+de,Je={},Tt=_(pe),Ot=s.tinyRGB(Tt),Pt=be*Tt.getAlpha();switch(Se){case"/":Ie=_e*Math.sqrt(2),Ee=_e*Math.sqrt(2),rt="path",Je={d:Be="M-"+Ie/4+","+Ee/4+"l"+Ie/2+",-"+Ee/2+"M0,"+Ee+"L"+Ie+",0M"+Ie/4*3+","+Ee/4*5+"l"+Ie/2+",-"+Ee/2,opacity:Pt,stroke:Ot,"stroke-width":(Ve=we*_e)+"px"};break;case"\\":Ie=_e*Math.sqrt(2),Ee=_e*Math.sqrt(2),rt="path",Je={d:Be="M"+Ie/4*3+",-"+Ee/4+"l"+Ie/2+","+Ee/2+"M0,0L"+Ie+","+Ee+"M-"+Ie/4+","+Ee/4*3+"l"+Ie/2+","+Ee/2,opacity:Pt,stroke:Ot,"stroke-width":(Ve=we*_e)+"px"};break;case"x":Ie=_e*Math.sqrt(2),Ee=_e*Math.sqrt(2),Be="M-"+Ie/4+","+Ee/4+"l"+Ie/2+",-"+Ee/2+"M0,"+Ee+"L"+Ie+",0M"+Ie/4*3+","+Ee/4*5+"l"+Ie/2+",-"+Ee/2+"M"+Ie/4*3+",-"+Ee/4+"l"+Ie/2+","+Ee/2+"M0,0L"+Ie+","+Ee+"M-"+Ie/4+","+Ee/4*3+"l"+Ie/2+","+Ee/2,Ve=_e-_e*Math.sqrt(1-we),rt="path",Je={d:Be,opacity:Pt,stroke:Ot,"stroke-width":Ve+"px"};break;case"|":rt="path",rt="path",Je={d:Be="M"+(Ie=_e)/2+",0L"+Ie/2+","+(Ee=_e),opacity:Pt,stroke:Ot,"stroke-width":(Ve=we*_e)+"px"};break;case"-":rt="path",rt="path",Je={d:Be="M0,"+(Ee=_e)/2+"L"+(Ie=_e)+","+Ee/2,opacity:Pt,stroke:Ot,"stroke-width":(Ve=we*_e)+"px"};break;case"+":rt="path",Be="M"+(Ie=_e)/2+",0L"+Ie/2+","+(Ee=_e)+"M0,"+Ee/2+"L"+Ie+","+Ee/2,Ve=_e-_e*Math.sqrt(1-we),rt="path",Je={d:Be,opacity:Pt,stroke:Ot,"stroke-width":Ve+"px"};break;case".":Ie=_e,Ee=_e,we<Math.PI/4?Ze=Math.sqrt(we*_e*_e/Math.PI):(it=we,dt=Math.PI/4,Ze=(vt=_e/2)+(_e/Math.sqrt(2)-vt)*(it-dt)/(1-dt)),rt="circle",Je={cx:Ie/2,cy:Ee/2,r:Ze,opacity:Pt,fill:Ot}}var Mt=[Se||"noSh",ze||"noBg",pe||"noFg",_e,we].join(";"),He=ht._defs.select(".patterns").selectAll("#"+Qe).data([Mt],k.identity);He.exit().remove(),He.enter().append("pattern").each(function(){var Ye=M.select(this);if(Ye.attr({id:Qe,width:Ie+"px",height:Ee+"px",patternUnits:"userSpaceOnUse",patternTransform:ke?"scale(0.8)":""}),ze){var Ne=_(ze),We=s.tinyRGB(Ne),ot=Ne.getAlpha(),tt=Ye.selectAll("rect").data([0]);tt.exit().remove(),tt.enter().append("rect").attr({width:Ie+"px",height:Ee+"px",fill:We,"fill-opacity":ot})}var Re=Ye.selectAll(rt).data([0]);Re.exit().remove(),Re.enter().append(rt).attr(Je)}),ge.style("fill",$(Qe,ie)).style("fill-opacity",null),ge.classed("pattern_filled",!0)},x.initGradients=function(ge){var oe=ge._fullLayout;k.ensureSingle(oe._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(ge).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(ge){var oe=ge._fullLayout;k.ensureSingle(oe._defs,"g","patterns").selectAll("pattern").remove(),M.select(ge).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(ge,oe,ie){return ge&&k.isArrayOrTypedArray(ge)?oe<ge.length?ge[oe]:ie:ge},x.pointStyle=function(ge,oe,ie,de){if(ge.size()){var Se=x.makePointStyleFns(oe);ge.each(function(_e){x.singlePointStyle(_e,M.select(this),oe,Se,ie,de)})}},x.singlePointStyle=function(ge,oe,ie,de,Se,_e){var we=ie.marker,Ae=we.line;if(_e&&_e.i>=0&&ge.i===void 0&&(ge.i=_e.i),oe.style("opacity",de.selectedOpacityFn?de.selectedOpacityFn(ge):ge.mo===void 0?we.opacity:ge.mo),de.ms2mrc){var Oe;Oe=ge.ms==="various"||we.size==="various"?3:de.ms2mrc(ge.ms),ge.mrc=Oe,de.selectedSizeFn&&(Oe=ge.mrc=de.selectedSizeFn(ge));var ze=x.symbolNumber(ge.mx||we.symbol)||0;ge.om=ze%200>=100;var pe=Pe(ge,ie),be=Y(ge,ie);oe.attr("d",b(ze,Oe,pe,be))}var ke,Ie,Ee,Be=!1;if(ge.so)Ee=Ae.outlierwidth,Ie=Ae.outliercolor,ke=we.outliercolor;else{var Ve=(Ae||{}).width;Ee=(ge.mlw+1||Ve+1||(ge.trace?(ge.trace.marker.line||{}).width:0)+1)-1||0,Ie="mlc"in ge?ge.mlcc=de.lineScale(ge.mlc):k.isArrayOrTypedArray(Ae.color)?s.defaultLine:Ae.color,k.isArrayOrTypedArray(we.color)&&(ke=s.defaultLine,Be=!0),ke="mc"in ge?ge.mcc=de.markerScale(ge.mc):we.color||we.colors||"rgba(0,0,0,0)",de.selectedColorFn&&(ke=de.selectedColorFn(ge))}if(ge.om)oe.call(s.stroke,ke).style({"stroke-width":(Ee||1)+"px",fill:"none"});else{oe.style("stroke-width",(ge.isBlank?0:Ee)+"px");var Ze=we.gradient,rt=ge.mgt;rt?Be=!0:rt=Ze&&Ze.type,k.isArrayOrTypedArray(rt)&&(rt=rt[0],S[rt]||(rt=0));var it=we.pattern,dt=it&&x.getPatternAttr(it.shape,ge.i,"");if(rt&&rt!=="none"){var vt=ge.mgc;vt?Be=!0:vt=Ze.color;var ht=ie.uid;Be&&(ht+="-"+ge.i),x.gradient(oe,Se,ht,rt,[[0,vt],[1,ke]],"fill")}else if(dt){var Qe=!1,Je=it.fgcolor;!Je&&_e&&_e.color&&(Je=_e.color,Qe=!0);var Tt=x.getPatternAttr(Je,ge.i,_e&&_e.color||null),Ot=x.getPatternAttr(it.bgcolor,ge.i,null),Pt=it.fgopacity,Mt=x.getPatternAttr(it.size,ge.i,8),He=x.getPatternAttr(it.solidity,ge.i,.3);Qe=Qe||ge.mcc||k.isArrayOrTypedArray(it.shape)||k.isArrayOrTypedArray(it.bgcolor)||k.isArrayOrTypedArray(it.fgcolor)||k.isArrayOrTypedArray(it.size)||k.isArrayOrTypedArray(it.solidity);var Ye=ie.uid;Qe&&(Ye+="-"+ge.i),x.pattern(oe,"point",Se,Ye,dt,Mt,He,ge.mcc,it.fillmode,Ot,Tt,Pt)}else k.isArrayOrTypedArray(ke)?s.fill(oe,ke[ge.i]):s.fill(oe,ke);Ee&&s.stroke(oe,Ie)}},x.makePointStyleFns=function(ge){var oe={},ie=ge.marker;return oe.markerScale=x.tryColorscale(ie,""),oe.lineScale=x.tryColorscale(ie,"line"),p.traceIs(ge,"symbols")&&(oe.ms2mrc=u.isBubble(ge)?h(ge):function(){return(ie.size||6)/2}),ge.selectedpoints&&k.extendFlat(oe,x.makeSelectedPointStyleFns(ge)),oe},x.makeSelectedPointStyleFns=function(ge){var oe={},ie=ge.selected||{},de=ge.unselected||{},Se=ge.marker||{},_e=ie.marker||{},we=de.marker||{},Ae=Se.opacity,Oe=_e.opacity,ze=we.opacity,pe=Oe!==void 0,be=ze!==void 0;(k.isArrayOrTypedArray(Ae)||pe||be)&&(oe.selectedOpacityFn=function(dt){var vt=dt.mo===void 0?Se.opacity:dt.mo;return dt.selected?pe?Oe:vt:be?ze:l*vt});var ke=Se.color,Ie=_e.color,Ee=we.color;(Ie||Ee)&&(oe.selectedColorFn=function(dt){var vt=dt.mcc||ke;return dt.selected?Ie||vt:Ee||vt});var Be=Se.size,Ve=_e.size,Ze=we.size,rt=Ve!==void 0,it=Ze!==void 0;return p.traceIs(ge,"symbols")&&(rt||it)&&(oe.selectedSizeFn=function(dt){var vt=dt.mrc||Be/2;return dt.selected?rt?Ve/2:vt:it?Ze/2:vt}),oe},x.makeSelectedTextStyleFns=function(ge){var oe={},ie=ge.selected||{},de=ge.unselected||{},Se=ge.textfont||{},_e=ie.textfont||{},we=de.textfont||{},Ae=Se.color,Oe=_e.color,ze=we.color;return oe.selectedTextColorFn=function(pe){var be=pe.tc||Ae;return pe.selected?Oe||be:ze||(Oe?be:s.addOpacity(be,l))},oe},x.selectedPointStyle=function(ge,oe){if(ge.size()&&oe.selectedpoints){var ie=x.makeSelectedPointStyleFns(oe),de=oe.marker||{},Se=[];ie.selectedOpacityFn&&Se.push(function(_e,we){_e.style("opacity",ie.selectedOpacityFn(we))}),ie.selectedColorFn&&Se.push(function(_e,we){s.fill(_e,ie.selectedColorFn(we))}),ie.selectedSizeFn&&Se.push(function(_e,we){var Ae=we.mx||de.symbol||0,Oe=ie.selectedSizeFn(we);_e.attr("d",b(x.symbolNumber(Ae),Oe,Pe(we,oe),Y(we,oe))),we.mrc2=Oe}),Se.length&&ge.each(function(_e){for(var we=M.select(this),Ae=0;Ae<Se.length;Ae++)Se[Ae](we,_e)})}},x.tryColorscale=function(ge,oe){var ie=oe?k.nestedProperty(ge,oe).get():ge;if(ie){var de=ie.color;if((ie.colorscale||ie._colorAx)&&k.isArrayOrTypedArray(de))return t.makeColorScaleFuncFromTrace(ie)}return k.identity};var E,O,C={start:1,end:-1,middle:0,bottom:1,top:-1};function P(ge,oe,ie,de,Se){var _e=M.select(ge.node().parentNode),we=oe.indexOf("top")!==-1?"top":oe.indexOf("bottom")!==-1?"bottom":"middle",Ae=oe.indexOf("left")!==-1?"end":oe.indexOf("right")!==-1?"start":"middle",Oe=de?de/.8+1:0,ze=(r.lineCount(ge)-1)*a+1,pe=C[Ae]*Oe,be=.75*ie+C[we]*Oe+(C[we]-1)*ze*ie/2;ge.attr("text-anchor",Ae),Se||_e.attr("transform",i(pe,be))}function D(ge,oe){var ie=ge.ts||oe.textfont.size;return T(ie)&&ie>0?ie:0}function U(ge,oe,ie){return ie&&(ge=H(ge)),oe?N(ge[1]):I(ge[0])}function I(ge){var oe=M.round(ge,2);return E=oe,oe}function N(ge){var oe=M.round(ge,2);return O=oe,oe}function W(ge,oe,ie,de){var Se=ge[0]-oe[0],_e=ge[1]-oe[1],we=ie[0]-oe[0],Ae=ie[1]-oe[1],Oe=Math.pow(Se*Se+_e*_e,.25),ze=Math.pow(we*we+Ae*Ae,.25),pe=(ze*ze*Se-Oe*Oe*we)*de,be=(ze*ze*_e-Oe*Oe*Ae)*de,ke=3*ze*(Oe+ze),Ie=3*Oe*(Oe+ze);return[[I(oe[0]+(ke&&pe/ke)),N(oe[1]+(ke&&be/ke))],[I(oe[0]-(Ie&&pe/Ie)),N(oe[1]-(Ie&&be/Ie))]]}x.textPointStyle=function(ge,oe,ie){if(ge.size()){var de;if(oe.selectedpoints){var Se=x.makeSelectedTextStyleFns(oe);de=Se.selectedTextColorFn}var _e=oe.texttemplate,we=ie._fullLayout;ge.each(function(Ae){var Oe=M.select(this),ze=_e?k.extractOption(Ae,oe,"txt","texttemplate"):k.extractOption(Ae,oe,"tx","text");if(ze||ze===0){if(_e){var pe=oe._module.formatLabels,be=pe?pe(Ae,oe,we):{},ke={};c(ke,oe,Ae.i);var Ie=oe._meta||{};ze=k.texttemplateString(ze,be,we._d3locale,ke,Ae,Ie)}var Ee=Ae.tp||oe.textposition,Be=D(Ae,oe),Ve=de?de(Ae):Ae.tc||oe.textfont.color;Oe.call(x.font,{family:Ae.tf||oe.textfont.family,weight:Ae.tw||oe.textfont.weight,style:Ae.ty||oe.textfont.style,variant:Ae.tv||oe.textfont.variant,textcase:Ae.tC||oe.textfont.textcase,lineposition:Ae.tE||oe.textfont.lineposition,shadow:Ae.tS||oe.textfont.shadow,size:Be,color:Ve}).text(ze).call(r.convertToTspans,ie).call(P,Ee,Be,Ae.mrc)}else Oe.remove()})}},x.selectedTextStyle=function(ge,oe){if(ge.size()&&oe.selectedpoints){var ie=x.makeSelectedTextStyleFns(oe);ge.each(function(de){var Se=M.select(this),_e=ie.selectedTextColorFn(de),we=de.tp||oe.textposition,Ae=D(de,oe);s.fill(Se,_e);var Oe=p.traceIs(oe,"bar-like");P(Se,we,Ae,de.mrc2||de.mrc,Oe)})}},x.smoothopen=function(ge,oe){if(ge.length<3)return"M"+ge.join("L");var ie,de="M"+ge[0],Se=[];for(ie=1;ie<ge.length-1;ie++)Se.push(W(ge[ie-1],ge[ie],ge[ie+1],oe));for(de+="Q"+Se[0][0]+" "+ge[1],ie=2;ie<ge.length-1;ie++)de+="C"+Se[ie-2][1]+" "+Se[ie-1][0]+" "+ge[ie];return de+"Q"+Se[ge.length-3][1]+" "+ge[ge.length-1]},x.smoothclosed=function(ge,oe){if(ge.length<3)return"M"+ge.join("L")+"Z";var ie,de="M"+ge[0],Se=ge.length-1,_e=[W(ge[Se],ge[0],ge[1],oe)];for(ie=1;ie<Se;ie++)_e.push(W(ge[ie-1],ge[ie],ge[ie+1],oe));for(_e.push(W(ge[Se-1],ge[Se],ge[0],oe)),ie=1;ie<=Se;ie++)de+="C"+_e[ie-1][1]+" "+_e[ie][0]+" "+ge[ie];return de+"C"+_e[Se][1]+" "+_e[0][0]+" "+ge[0]+"Z"};var F={hv:function(ge,oe,ie){return"H"+I(oe[0])+"V"+U(oe,1,ie)},vh:function(ge,oe,ie){return"V"+N(oe[1])+"H"+U(oe,0,ie)},hvh:function(ge,oe,ie){return"H"+I((ge[0]+oe[0])/2)+"V"+N(oe[1])+"H"+U(oe,0,ie)},vhv:function(ge,oe,ie){return"V"+N((ge[1]+oe[1])/2)+"H"+I(oe[0])+"V"+U(oe,1,ie)}},j=function(ge,oe,ie){return"L"+U(oe,0,ie)+","+U(oe,1,ie)};function H(ge,oe){var ie=ge.backoff,de=ge.trace,Se=ge.d,_e=ge.i;if(ie&&de&&de.marker&&de.marker.angle%360==0&&de.line&&de.line.shape!=="spline"){var we=k.isArrayOrTypedArray(ie),Ae=ge,Oe=oe?oe[0]:E||0,ze=oe?oe[1]:O||0,pe=Ae[0],be=Ae[1],ke=pe-Oe,Ie=be-ze,Ee=Math.atan2(Ie,ke),Be=we?ie[_e]:ie;if(Be==="auto"){var Ve=Ae.i;de.type==="scatter"&&Ve--;var Ze=Ae.marker,rt=Ze.symbol;k.isArrayOrTypedArray(rt)&&(rt=rt[Ve]);var it=Ze.size;k.isArrayOrTypedArray(it)&&(it=it[Ve]),Be=Ze?x.symbolBackOffs[x.symbolNumber(rt)]*it:0,Be+=x.getMarkerStandoff(Se[Ve],de)||0}var dt=pe-Be*Math.cos(Ee),vt=be-Be*Math.sin(Ee);(dt<=pe&&dt>=Oe||dt>=pe&&dt<=Oe)&&(vt<=be&&vt>=ze||vt>=be&&vt<=ze)&&(ge=[dt,vt])}return ge}x.steps=function(ge){var oe=F[ge]||j;return function(ie){for(var de="M"+I(ie[0][0])+","+N(ie[0][1]),Se=ie.length,_e=1;_e<Se;_e++)de+=oe(ie[_e-1],ie[_e],_e===Se-1);return de}},x.applyBackoff=H,x.makeTester=function(){var ge=k.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(ie){ie.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),oe=k.ensureSingle(ge,"path","js-reference-point",function(ie){ie.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=ge,x.testref=oe},x.savedBBoxes={};var te=0;function Q(ge){var oe=ge.getAttribute("data-unformatted");if(oe!==null)return oe+ge.getAttribute("data-math")+ge.getAttribute("text-anchor")+ge.getAttribute("style")}function $(ge,oe){if(!ge)return null;var ie=oe._context,de=ie._exportedPlot?"":ie._baseUrl||"";return de?"url('"+de+"#"+ge+"')":"url(#"+ge+")"}x.bBox=function(ge,oe,ie){var de,Se,_e;if(ie||(ie=Q(ge)),ie){if(de=x.savedBBoxes[ie])return k.extendFlat({},de)}else if(ge.childNodes.length===1){var we=ge.childNodes[0];if(ie=Q(we)){var Ae=+we.getAttribute("x")||0,Oe=+we.getAttribute("y")||0,ze=we.getAttribute("transform");if(!ze){var pe=x.bBox(we,!1,ie);return Ae&&(pe.left+=Ae,pe.right+=Ae),Oe&&(pe.top+=Oe,pe.bottom+=Oe),pe}if(ie+="~"+Ae+"~"+Oe+"~"+ze,de=x.savedBBoxes[ie])return k.extendFlat({},de)}}oe?Se=ge:(_e=x.tester.node(),Se=ge.cloneNode(!0),_e.appendChild(Se)),M.select(Se).attr("transform",null).call(r.positionText,0,0);var be=Se.getBoundingClientRect(),ke=x.testref.node().getBoundingClientRect();oe||_e.removeChild(Se);var Ie={height:be.height,width:be.width,left:be.left-ke.left,top:be.top-ke.top,right:be.right-ke.left,bottom:be.bottom-ke.top};return te>=1e4&&(x.savedBBoxes={},te=0),ie&&(x.savedBBoxes[ie]=Ie),te++,k.extendFlat({},Ie)},x.setClipUrl=function(ge,oe,ie){ge.attr("clip-path",$(oe,ie))},x.getTranslate=function(ge){var oe=(ge[ge.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ie,de,Se){return[de,Se].join(" ")}).split(" ");return{x:+oe[0]||0,y:+oe[1]||0}},x.setTranslate=function(ge,oe,ie){var de=ge.attr?"attr":"getAttribute",Se=ge.attr?"attr":"setAttribute",_e=ge[de]("transform")||"";return oe=oe||0,ie=ie||0,_e=_e.replace(/(\btranslate\(.*?\);?)/,"").trim(),_e=(_e+=i(oe,ie)).trim(),ge[Se]("transform",_e),_e},x.getScale=function(ge){var oe=(ge[ge.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ie,de,Se){return[de,Se].join(" ")}).split(" ");return{x:+oe[0]||1,y:+oe[1]||1}},x.setScale=function(ge,oe,ie){var de=ge.attr?"attr":"getAttribute",Se=ge.attr?"attr":"setAttribute",_e=ge[de]("transform")||"";return oe=oe||1,ie=ie||1,_e=_e.replace(/(\bscale\(.*?\);?)/,"").trim(),_e=(_e+="scale("+oe+","+ie+")").trim(),ge[Se]("transform",_e),_e};var K=/\s*sc.*/;x.setPointGroupScale=function(ge,oe,ie){if(oe=oe||1,ie=ie||1,ge){var de=oe===1&&ie===1?"":"scale("+oe+","+ie+")";ge.each(function(){var Se=(this.getAttribute("transform")||"").replace(K,"");Se=(Se+=de).trim(),this.setAttribute("transform",Se)})}};var X=/translate\([^)]*\)\s*$/;function Y(ge,oe){var ie;return ge&&(ie=ge.mf),ie===void 0&&(ie=oe.marker&&oe.marker.standoff||0),oe._geo||oe._xA?ie:-ie}x.setTextPointsScale=function(ge,oe,ie){ge&&ge.each(function(){var de,Se=M.select(this),_e=Se.select("text");if(_e.node()){var we=parseFloat(_e.attr("x")||0),Ae=parseFloat(_e.attr("y")||0),Oe=(Se.attr("transform")||"").match(X);de=oe===1&&ie===1?[]:[i(we,Ae),"scale("+oe+","+ie+")",i(-we,-Ae)],Oe&&de.push(Oe),Se.attr("transform",de.join(""))}})},x.getMarkerStandoff=Y;var re,se,ae,ce,fe,he,ve=Math.atan2,ye=Math.cos,me=Math.sin;function Me(ge,oe){var ie=oe[0],de=oe[1];return[ie*ye(ge)-de*me(ge),ie*me(ge)+de*ye(ge)]}function Pe(ge,oe){var ie,de,Se=ge.ma;Se===void 0&&((Se=oe.marker.angle)&&!k.isArrayOrTypedArray(Se)||(Se=0));var _e=oe.marker.angleref;if(_e==="previous"||_e==="north"){if(oe._geo){var we=oe._geo.project(ge.lonlat);ie=we[0],de=we[1]}else{var Ae=oe._xA,Oe=oe._yA;if(!Ae||!Oe)return 90;ie=Ae.c2p(ge.x),de=Oe.c2p(ge.y)}if(oe._geo){var ze,pe=ge.lonlat[0],be=ge.lonlat[1],ke=oe._geo.project([pe,be+1e-5]),Ie=oe._geo.project([pe+1e-5,be]),Ee=ve(Ie[1]-de,Ie[0]-ie),Be=ve(ke[1]-de,ke[0]-ie);if(_e==="north")ze=Se/180*Math.PI;else if(_e==="previous"){var Ve=pe/180*Math.PI,Ze=be/180*Math.PI,rt=re/180*Math.PI,it=se/180*Math.PI,dt=rt-Ve,vt=ye(it)*me(dt),ht=me(it)*ye(Ze)-ye(it)*me(Ze)*ye(dt);ze=-ve(vt,ht)-Math.PI,re=pe,se=be}var Qe=Me(Ee,[ye(ze),0]),Je=Me(Be,[me(ze),0]);Se=ve(Qe[1]+Je[1],Qe[0]+Je[0])/Math.PI*180,_e!=="previous"||he===oe.uid&&ge.i===fe+1||(Se=null)}if(_e==="previous"&&!oe._geo)if(he===oe.uid&&ge.i===fe+1&&T(ie)&&T(de)){var Tt=ie-ae,Ot=de-ce,Pt=oe.line&&oe.line.shape||"",Mt=Pt.slice(Pt.length-1);Mt==="h"&&(Ot=0),Mt==="v"&&(Tt=0),Se+=ve(Ot,Tt)/Math.PI*180+90}else Se=null}return ae=ie,ce=de,fe=ge.i,he=oe.uid,Se}x.getMarkerAngle=Pe},71984:function(ee,R,e){var M,k,o,T,_=e(21984),p=e(33428).round,s="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function l(h){return h===null}function u(h,c,x){if(!(h&&h%360!=0||c))return x;if(o===h&&T===c&&M===x)return k;function d(D,U){var I=n(D),N=a(D),W=U[0],F=U[1]+(c||0);return[W*I-F*N,W*N+F*I]}o=h,T=c,M=x;for(var v=h/180*r,g=0,y=0,m=_(x),b="",f=0;f<m.length;f++){var S=m[f],w=S[0],E=g,O=y;if(w==="M"||w==="L")g=+S[1],y=+S[2];else if(w==="m"||w==="l")g+=+S[1],y+=+S[2];else if(w==="H")g=+S[1];else if(w==="h")g+=+S[1];else if(w==="V")y=+S[1];else if(w==="v")y+=+S[1];else if(w==="A"){g=+S[1],y=+S[2];var C=d(v,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+h}w!=="H"&&w!=="V"||(w="L"),w!=="h"&&w!=="v"||(w="l"),w!=="m"&&w!=="l"||(g-=E,y-=O);var P=d(v,[g,y]);w!=="H"&&w!=="V"||(w="L"),w!=="M"&&w!=="L"&&w!=="m"&&w!=="l"||(S[1]=P[0],S[2]=P[1]),S[0]=w,b+=S[0]+S.slice(1).join(",")}return k=b,b}ee.exports={circle:{n:0,f:function(h,c,x){if(l(c))return s;var d=p(h,2),v="M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z";return x?u(c,x,v):v}},square:{n:1,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")}},diamond:{n:2,f:function(h,c,x){if(l(c))return s;var d=p(1.3*h,2);return u(c,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"Z")}},cross:{n:3,f:function(h,c,x){if(l(c))return s;var d=p(.4*h,2),v=p(1.2*h,2);return u(c,x,"M"+v+","+d+"H"+d+"V"+v+"H-"+d+"V"+d+"H-"+v+"V-"+d+"H-"+d+"V-"+v+"H"+d+"V-"+d+"H"+v+"Z")}},x:{n:4,f:function(h,c,x){if(l(c))return s;var d=p(.8*h/t,2),v="l"+d+","+d,g="l"+d+",-"+d,y="l-"+d+",-"+d,m="l-"+d+","+d;return u(c,x,"M0,"+d+v+g+y+g+y+m+y+m+v+m+v+"Z")}},"triangle-up":{n:5,f:function(h,c,x){if(l(c))return s;var d=p(2*h/i,2);return u(c,x,"M-"+d+","+p(h/2,2)+"H"+d+"L0,-"+p(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,c,x){if(l(c))return s;var d=p(2*h/i,2);return u(c,x,"M-"+d+",-"+p(h/2,2)+"H"+d+"L0,"+p(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,c,x){if(l(c))return s;var d=p(2*h/i,2);return u(c,x,"M"+p(h/2,2)+",-"+d+"V"+d+"L-"+p(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,c,x){if(l(c))return s;var d=p(2*h/i,2);return u(c,x,"M-"+p(h/2,2)+",-"+d+"V"+d+"L"+p(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,c,x){if(l(c))return s;var d=p(.6*h,2),v=p(1.2*h,2);return u(c,x,"M-"+v+",-"+d+"H"+d+"V"+v+"Z")}},"triangle-se":{n:10,f:function(h,c,x){if(l(c))return s;var d=p(.6*h,2),v=p(1.2*h,2);return u(c,x,"M"+d+",-"+v+"V"+d+"H-"+v+"Z")}},"triangle-sw":{n:11,f:function(h,c,x){if(l(c))return s;var d=p(.6*h,2),v=p(1.2*h,2);return u(c,x,"M"+v+","+d+"H-"+d+"V-"+v+"Z")}},"triangle-nw":{n:12,f:function(h,c,x){if(l(c))return s;var d=p(.6*h,2),v=p(1.2*h,2);return u(c,x,"M-"+d+","+v+"V-"+d+"H"+v+"Z")}},pentagon:{n:13,f:function(h,c,x){if(l(c))return s;var d=p(.951*h,2),v=p(.588*h,2),g=p(-h,2),y=p(-.309*h,2);return u(c,x,"M"+d+","+y+"L"+v+","+p(.809*h,2)+"H-"+v+"L-"+d+","+y+"L0,"+g+"Z")}},hexagon:{n:14,f:function(h,c,x){if(l(c))return s;var d=p(h,2),v=p(h/2,2),g=p(h*i/2,2);return u(c,x,"M"+g+",-"+v+"V"+v+"L0,"+d+"L-"+g+","+v+"V-"+v+"L0,-"+d+"Z")}},hexagon2:{n:15,f:function(h,c,x){if(l(c))return s;var d=p(h,2),v=p(h/2,2),g=p(h*i/2,2);return u(c,x,"M-"+v+","+g+"H"+v+"L"+d+",0L"+v+",-"+g+"H-"+v+"L-"+d+",0Z")}},octagon:{n:16,f:function(h,c,x){if(l(c))return s;var d=p(.924*h,2),v=p(.383*h,2);return u(c,x,"M-"+v+",-"+d+"H"+v+"L"+d+",-"+v+"V"+v+"L"+v+","+d+"H-"+v+"L-"+d+","+v+"V-"+v+"Z")}},star:{n:17,f:function(h,c,x){if(l(c))return s;var d=1.4*h,v=p(.225*d,2),g=p(.951*d,2),y=p(.363*d,2),m=p(.588*d,2),b=p(-d,2),f=p(-.309*d,2),S=p(.118*d,2),w=p(.809*d,2);return u(c,x,"M"+v+","+f+"H"+g+"L"+y+","+S+"L"+m+","+w+"L0,"+p(.382*d,2)+"L-"+m+","+w+"L-"+y+","+S+"L-"+g+","+f+"H-"+v+"L0,"+b+"Z")}},hexagram:{n:18,f:function(h,c,x){if(l(c))return s;var d=p(.66*h,2),v=p(.38*h,2),g=p(.76*h,2);return u(c,x,"M-"+g+",0l-"+v+",-"+d+"h"+g+"l"+v+",-"+d+"l"+v+","+d+"h"+g+"l-"+v+","+d+"l"+v+","+d+"h-"+g+"l-"+v+","+d+"l-"+v+",-"+d+"h-"+g+"Z")}},"star-triangle-up":{n:19,f:function(h,c,x){if(l(c))return s;var d=p(h*i*.8,2),v=p(.8*h,2),g=p(1.6*h,2),y=p(4*h,2),m="A "+y+","+y+" 0 0 1 ";return u(c,x,"M-"+d+","+v+m+d+","+v+m+"0,-"+g+m+"-"+d+","+v+"Z")}},"star-triangle-down":{n:20,f:function(h,c,x){if(l(c))return s;var d=p(h*i*.8,2),v=p(.8*h,2),g=p(1.6*h,2),y=p(4*h,2),m="A "+y+","+y+" 0 0 1 ";return u(c,x,"M"+d+",-"+v+m+"-"+d+",-"+v+m+"0,"+g+m+d+",-"+v+"Z")}},"star-square":{n:21,f:function(h,c,x){if(l(c))return s;var d=p(1.1*h,2),v=p(2*h,2),g="A "+v+","+v+" 0 0 1 ";return u(c,x,"M-"+d+",-"+d+g+"-"+d+","+d+g+d+","+d+g+d+",-"+d+g+"-"+d+",-"+d+"Z")}},"star-diamond":{n:22,f:function(h,c,x){if(l(c))return s;var d=p(1.4*h,2),v=p(1.9*h,2),g="A "+v+","+v+" 0 0 1 ";return u(c,x,"M-"+d+",0"+g+"0,"+d+g+d+",0"+g+"0,-"+d+g+"-"+d+",0Z")}},"diamond-tall":{n:23,f:function(h,c,x){if(l(c))return s;var d=p(.7*h,2),v=p(1.4*h,2);return u(c,x,"M0,"+v+"L"+d+",0L0,-"+v+"L-"+d+",0Z")}},"diamond-wide":{n:24,f:function(h,c,x){if(l(c))return s;var d=p(1.4*h,2),v=p(.7*h,2);return u(c,x,"M0,"+v+"L"+d+",0L0,-"+v+"L-"+d+",0Z")}},hourglass:{n:25,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M"+d+","+d+"H-"+d+"L"+d+",-"+d+"H-"+d+"Z")},noDot:!0},bowtie:{n:26,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M"+d+","+d+"V-"+d+"L-"+d+","+d+"V-"+d+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,c,x){if(l(c))return s;var d=p(h,2),v=p(h/t,2);return u(c,x,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,c,x){if(l(c))return s;var d=p(1.3*h,2);return u(c,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM0,-"+d+"V"+d+"M-"+d+",0H"+d)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,c,x){if(l(c))return s;var d=p(1.3*h,2),v=p(.65*h,2);return u(c,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM-"+v+",-"+v+"L"+v+","+v+"M-"+v+","+v+"L"+v+",-"+v)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,c,x){if(l(c))return s;var d=p(1.4*h,2);return u(c,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,c,x){if(l(c))return s;var d=p(1.2*h,2),v=p(.85*h,2);return u(c,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,c,x){if(l(c))return s;var d=p(h/2,2),v=p(h,2);return u(c,x,"M"+d+","+v+"V-"+v+"M"+(d-v)+",-"+v+"V"+v+"M"+v+","+d+"H-"+v+"M-"+v+","+(d-v)+"H"+v)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,c,x){if(l(c))return s;var d=p(1.2*h,2),v=p(1.6*h,2),g=p(.8*h,2);return u(c,x,"M-"+d+","+g+"L0,0M"+d+","+g+"L0,0M0,-"+v+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,c,x){if(l(c))return s;var d=p(1.2*h,2),v=p(1.6*h,2),g=p(.8*h,2);return u(c,x,"M-"+d+",-"+g+"L0,0M"+d+",-"+g+"L0,0M0,"+v+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,c,x){if(l(c))return s;var d=p(1.2*h,2),v=p(1.6*h,2),g=p(.8*h,2);return u(c,x,"M"+g+","+d+"L0,0M"+g+",-"+d+"L0,0M-"+v+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,c,x){if(l(c))return s;var d=p(1.2*h,2),v=p(1.6*h,2),g=p(.8*h,2);return u(c,x,"M-"+g+","+d+"L0,0M-"+g+",-"+d+"L0,0M"+v+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,c,x){if(l(c))return s;var d=p(1.4*h,2);return u(c,x,"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,c,x){if(l(c))return s;var d=p(1.4*h,2);return u(c,x,"M0,"+d+"V-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M"+d+","+d+"L-"+d+",-"+d)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M0,0L-"+d+","+p(2*h,2)+"H"+d+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M0,0L-"+d+",-"+p(2*h,2)+"H"+d+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,c,x){if(l(c))return s;var d=p(2*h,2),v=p(h,2);return u(c,x,"M0,0L"+d+",-"+v+"V"+v+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,c,x){if(l(c))return s;var d=p(2*h,2),v=p(h,2);return u(c,x,"M0,0L-"+d+",-"+v+"V"+v+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M-"+d+",0H"+d+"M0,0L-"+d+","+p(2*h,2)+"H"+d+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,c,x){if(l(c))return s;var d=p(h,2);return u(c,x,"M-"+d+",0H"+d+"M0,0L-"+d+",-"+p(2*h,2)+"H"+d+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,c,x){if(l(c))return s;var d=p(2*h,2),v=p(h,2);return u(c,x,"M0,-"+v+"V"+v+"M0,0L"+d+",-"+v+"V"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,c,x){if(l(c))return s;var d=p(2*h,2),v=p(h,2);return u(c,x,"M0,-"+v+"V"+v+"M0,0L-"+d+",-"+v+"V"+v+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,c,x){if(l(c))return s;var d=r/2.5,v=2*h*n(d),g=2*h*a(d);return u(c,x,"M0,0L"+-v+","+g+"L"+v+","+g+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,c,x){if(l(c))return s;var d=r/4,v=2*h*n(d),g=2*h*a(d);return u(c,x,"M0,0L"+-v+","+g+"A "+2*h+","+2*h+" 0 0 1 "+v+","+g+"Z")},backoff:.4,noDot:!0}}},97644:function(ee){ee.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(ee,R,e){var M=e(38248),k=e(24040),o=e(54460),T=e(3400),_=e(93792);function p(s,t,i,r){var n=t["error_"+r]||{},a=[];if(n.visible&&["linear","log"].indexOf(i.type)!==-1){for(var l=_(n),u=0;u<s.length;u++){var h=s[u],c=h.i;if(c===void 0)c=u;else if(c===null)continue;var x=h[r];if(M(i.c2l(x))){var d=l(x,c);if(M(d[0])&&M(d[1])){var v=h[r+"s"]=x-d[0],g=h[r+"h"]=x+d[1];a.push(v,g)}}}var y=i._id,m=t._extremes[y],b=o.findExtremes(i,a,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(b.min),m.max=m.max.concat(b.max)}}ee.exports=function(s){for(var t=s.calcdata,i=0;i<t.length;i++){var r=t[i],n=r[0].trace;if(n.visible===!0&&k.traceIs(n,"errorBarsOK")){var a=o.getFromId(s,n.xaxis),l=o.getFromId(s,n.yaxis);p(r,n,a,"x"),p(r,n,l,"y")}}}},93792:function(ee){function R(e,M){return e==="percent"?function(k){return Math.abs(k*M/100)}:e==="constant"?function(){return Math.abs(M)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}ee.exports=function(e){var M=e.type,k=e.symmetric;if(M==="data"){var o=e.array||[];if(k)return function(s,t){var i=+o[t];return[i,i]};var T=e.arrayminus||[];return function(s,t){var i=+o[t],r=+T[t];return isNaN(i)&&isNaN(r)?[NaN,NaN]:[r||0,i||0]}}var _=R(M,e.value),p=R(M,e.valueminus);return k||e.valueminus===void 0?function(s){var t=_(s);return[t,t]}:function(s){return[p(s),_(s)]}}},65200:function(ee,R,e){var M=e(38248),k=e(24040),o=e(3400),T=e(31780),_=e(97644);ee.exports=function(p,s,t,i){var r="error_"+i.axis,n=T.newContainer(s,r),a=p[r]||{};function l(x,d){return o.coerce(a,n,_,x,d)}if(l("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var u=l("type","array"in a?"data":"percent"),h=!0;u!=="sqrt"&&(h=l("symmetric",!((u==="data"?"arrayminus":"valueminus")in a))),u==="data"?(l("array"),l("traceref"),h||(l("arrayminus"),l("tracerefminus"))):u!=="percent"&&u!=="constant"||(l("value"),h||l("valueminus"));var c="copy_"+i.inherit+"style";i.inherit&&(s["error_"+i.inherit]||{}).visible&&l(c,!(a.color||M(a.thickness)||M(a.width))),i.inherit&&n[c]||(l("color",t),l("thickness"),l("width",k.traceIs(s,"gl3d")?0:4))}}},64968:function(ee,R,e){var M=e(3400),k=e(67824).overrideAll,o=e(97644),T={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var _={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o),error_z:M.extendFlat({},o)};delete _.error_x.copy_ystyle,delete _.error_y.copy_ystyle,delete _.error_z.copy_ystyle,delete _.error_z.copy_zstyle,ee.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(_,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(p,s,t){(s.error_y||{}).visible&&(t.yerr=p.yh-p.y,s.error_y.symmetric||(t.yerrneg=p.y-p.ys)),(s.error_x||{}).visible&&(t.xerr=p.xh-p.x,s.error_x.symmetric||(t.xerrneg=p.x-p.xs))}}},78512:function(ee,R,e){var M=e(33428),k=e(38248),o=e(43616),T=e(43028);ee.exports=function(_,p,s,t){var i=s.xaxis,r=s.yaxis,n=t&&t.duration>0,a=_._context.staticPlot;p.each(function(l){var u,h=l[0].trace,c=h.error_x||{},x=h.error_y||{};h.ids&&(u=function(y){return y.id});var d=T.hasMarkers(h)&&h.marker.maxdisplayed>0;x.visible||c.visible||(l=[]);var v=M.select(this).selectAll("g.errorbar").data(l,u);if(v.exit().remove(),l.length){c.visible||v.selectAll("path.xerror").remove(),x.visible||v.selectAll("path.yerror").remove(),v.style("opacity",1);var g=v.enter().append("g").classed("errorbar",!0);n&&g.style("opacity",0).transition().duration(t.duration).style("opacity",1),o.setClipUrl(v,s.layerClipId,_),v.each(function(y){var m=M.select(this),b=function(C,P,D){var U={x:P.c2p(C.x),y:D.c2p(C.y)};return C.yh!==void 0&&(U.yh=D.c2p(C.yh),U.ys=D.c2p(C.ys),k(U.ys)||(U.noYS=!0,U.ys=D.c2p(C.ys,!0))),C.xh!==void 0&&(U.xh=P.c2p(C.xh),U.xs=P.c2p(C.xs),k(U.xs)||(U.noXS=!0,U.xs=P.c2p(C.xs,!0))),U}(y,i,r);if(!d||y.vis){var f,S=m.select("path.yerror");if(x.visible&&k(b.x)&&k(b.yh)&&k(b.ys)){var w=x.width;f="M"+(b.x-w)+","+b.yh+"h"+2*w+"m-"+w+",0V"+b.ys,b.noYS||(f+="m-"+w+",0h"+2*w),S.size()?n&&(S=S.transition().duration(t.duration).ease(t.easing)):S=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",f)}else S.remove();var E=m.select("path.xerror");if(c.visible&&k(b.y)&&k(b.xh)&&k(b.xs)){var O=(c.copy_ystyle?x:c).width;f="M"+b.xh+","+(b.y-O)+"v"+2*O+"m0,-"+O+"H"+b.xs,b.noXS||(f+="m0,-"+O+"v"+2*O),E.size()?n&&(E=E.transition().duration(t.duration).ease(t.easing)):E=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",f)}else E.remove()}})}})}},92036:function(ee,R,e){var M=e(33428),k=e(76308);ee.exports=function(o){o.each(function(T){var _=T[0].trace,p=_.error_y||{},s=_.error_x||{},t=M.select(this);t.selectAll("path.yerror").style("stroke-width",p.thickness+"px").call(k.stroke,p.color),s.copy_ystyle&&(s=p),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},55756:function(ee,R,e){var M=e(25376),k=e(65460).hoverlabel,o=e(92880).extendFlat;ee.exports={hoverlabel:{bgcolor:o({},k.bgcolor,{arrayOk:!0}),bordercolor:o({},k.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:o({},k.align,{arrayOk:!0}),namelength:o({},k.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(ee,R,e){var M=e(3400),k=e(24040);function o(T,_,p,s){s=s||M.identity,Array.isArray(T)&&(_[0][p]=s(T))}ee.exports=function(T){var _=T.calcdata,p=T._fullLayout;function s(a){return function(l){return M.coerceHoverinfo({hoverinfo:l},{_module:a._module},p)}}for(var t=0;t<_.length;t++){var i=_[t],r=i[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?o:M.fillArray;n(r.hoverinfo,i,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,i,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,i,"hbg"),n(r.hoverlabel.bordercolor,i,"hbc"),n(r.hoverlabel.font.size,i,"hts"),n(r.hoverlabel.font.color,i,"htc"),n(r.hoverlabel.font.family,i,"htf"),n(r.hoverlabel.font.weight,i,"htw"),n(r.hoverlabel.font.style,i,"hty"),n(r.hoverlabel.font.variant,i,"htv"),n(r.hoverlabel.namelength,i,"hnl"),n(r.hoverlabel.align,i,"hta"))}}}},62376:function(ee,R,e){var M=e(24040),k=e(83292).hover;ee.exports=function(o,T,_){var p=M.getComponentMethod("annotations","onClick")(o,o._hoverdata);function s(){o.emit("plotly_click",{points:o._hoverdata,event:T})}_!==void 0&&k(o,T,_,!0),o._hoverdata&&T&&T.target&&(p&&p.then?p.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(ee){ee.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(ee,R,e){var M=e(3400),k=e(55756),o=e(16132);ee.exports=function(T,_,p,s){var t=M.extendFlat({},s.hoverlabel);_.hovertemplate&&(t.namelength=-1),o(T,_,function(i,r){return M.coerce(T,_,k,i,r)},t)}},10624:function(ee,R,e){var M=e(3400);R.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},R.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var i=s.xaxes||[],r=s.yaxes||[],n=0;n<i.length;n++)for(var a=0;a<r.length;a++)if(t.indexOf(i[n]+r[a])!==-1)return!0;return!1}return t.indexOf(R.getSubplot(s))!==-1},R.flat=function(s,t){for(var i=new Array(s.length),r=0;r<s.length;r++)i[r]=t;return i},R.p2c=function(s,t){for(var i=new Array(s.length),r=0;r<s.length;r++)i[r]=s[r].p2c(t);return i},R.getDistanceFunction=function(s,t,i,r){return s==="closest"?r||R.quadrature(t,i):s.charAt(0)==="x"?t:i},R.getClosest=function(s,t,i){if(i.index!==!1)i.index>=0&&i.index<s.length?i.distance=0:i.index=!1;else for(var r=0;r<s.length;r++){var n=t(s[r]);n<=i.distance&&(i.index=r,i.distance=n)}return i},R.inbox=function(s,t,i){return s*t<0||s===0?i:1/0},R.quadrature=function(s,t){return function(i){var r=s(i),n=t(i);return Math.sqrt(r*r+n*n)}},R.makeEventData=function(s,t,i){var r="index"in s?s.index:s.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,s,t,i,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),s.zLabelVal!==void 0&&(n.z=s.zLabelVal)),R.appendArrayPointValue(n,t,r),n},R.appendArrayPointValue=function(s,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],l=o(a);if(s[l]===void 0){var u=T(M.nestedProperty(t,a).get(),i);u!==void 0&&(s[l]=u)}}},R.appendArrayMultiPointValues=function(s,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],l=o(a);if(s[l]===void 0){for(var u=M.nestedProperty(t,a).get(),h=new Array(i.length),c=0;c<i.length;c++)h[c]=T(u,i[c]);s[l]=h}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(s){return k[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var _={x:!0,y:!0},p={"x unified":!0,"y unified":!0};R.isUnifiedHover=function(s){return typeof s=="string"&&!!p[s]},R.isXYhover=function(s){return typeof s=="string"&&!!_[s]}},83292:function(ee,R,e){var M=e(33428),k=e(38248),o=e(49760),T=e(3400),_=T.pushUnique,p=T.strTranslate,s=T.strRotate,t=e(95924),i=e(72736),r=e(72213),n=e(43616),a=e(76308),l=e(86476),u=e(54460),h=e(24040),c=e(10624),x=e(92456),d=e(77864),v=e(31140),g=x.YANGLE,y=Math.PI*g/180,m=1/Math.sin(y),b=Math.cos(y),f=Math.sin(y),S=x.HOVERARROWSIZE,w=x.HOVERTEXTPAD,E={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function C(Y,re){return Y.distance-re.distance}function P(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}R.hover=function(Y,re,se,ae){Y=T.getGraphDiv(Y);var ce=re.target;T.throttle(Y._fullLayout._uid+x.HOVERID,x.HOVERMINTIME,function(){(function(fe,he,ve,ye,me){ve||(ve="xy");var Me,Pe,ge,oe=Array.isArray(ve)?ve:[ve],ie=fe._fullLayout,de=ie.hoversubplots,Se=ie._plots||[],_e=Se[ve],we=ie._has("cartesian"),Ae=he.hovermode||ie.hovermode,Oe=(Ae||"").charAt(0)==="x",ze=(Ae||"").charAt(0)==="y";if(we&&(Oe||ze)&&de==="axis"){for(var pe=oe.length,be=0;be<pe;be++)if(Se[Me=oe[be]]){Pe=u.getFromId(fe,Me,"x"),ge=u.getFromId(fe,Me,"y");var ke=(Oe?Pe:ge)._subplotsWith;if(ke&&ke.length)for(var Ie=0;Ie<ke.length;Ie++)_(oe,ke[Ie])}}if(_e&&de!=="single"){var Ee=_e.overlays.map(function(bt){return bt.id});oe=oe.concat(Ee)}for(var Be=oe.length,Ve=new Array(Be),Ze=new Array(Be),rt=!1,it=0;it<Be;it++)if(Se[Me=oe[it]])rt=!0,Ve[it]=Se[Me].xaxis,Ze[it]=Se[Me].yaxis;else{if(!ie[Me]||!ie[Me]._subplot)return void T.warn("Unrecognized subplot: "+Me);var dt=ie[Me]._subplot;Ve[it]=dt.xaxis,Ze[it]=dt.yaxis}if(Ae&&!rt&&(Ae="closest"),["x","y","closest","x unified","y unified"].indexOf(Ae)===-1||!fe.calcdata||fe.querySelector(".zoombox")||fe._dragging)return l.unhoverRaw(fe,he);var vt=ie.hoverdistance;vt===-1&&(vt=1/0);var ht=ie.spikedistance;ht===-1&&(ht=1/0);var Qe,Je,Tt,Ot,Pt,Mt,He,Ye,Ne,We,ot,tt,Re,Fe=[],nt=[],Ge={hLinePoint:null,vLinePoint:null},ct=!1;if(Array.isArray(he))for(Ae="array",Tt=0;Tt<he.length;Tt++)(Pt=fe.calcdata[he[Tt].curveNumber||0])&&(Mt=Pt[0].trace,Pt[0].trace.hoverinfo!=="skip"&&(nt.push(Pt),Mt.orientation==="h"&&(ct=!0)));else{var pt,gt,ut=fe.calcdata.slice();for(ut.sort(function(bt,Ut){return(bt[0].trace.zorder||0)-(Ut[0].trace.zorder||0)}),Ot=0;Ot<ut.length;Ot++)Pt=ut[Ot],(Mt=Pt[0].trace).hoverinfo!=="skip"&&c.isTraceInSubplots(Mt,oe)&&(nt.push(Pt),Mt.orientation==="h"&&(ct=!0));if(me){if(t.triggerHandler(fe,"plotly_beforehover",he)===!1)return;var kt=me.getBoundingClientRect();pt=he.clientX-kt.left,gt=he.clientY-kt.top,ie._calcInverseTransform(fe);var mt=T.apply3DTransform(ie._invTransform)(pt,gt);if(pt=mt[0],gt=mt[1],pt<0||pt>Ve[0]._length||gt<0||gt>Ze[0]._length)return l.unhoverRaw(fe,he)}else pt="xpx"in he?he.xpx:Ve[0]._length/2,gt="ypx"in he?he.ypx:Ze[0]._length/2;if(he.pointerX=pt+Ve[0]._offset,he.pointerY=gt+Ze[0]._offset,Qe="xval"in he?c.flat(oe,he.xval):c.p2c(Ve,pt),Je="yval"in he?c.flat(oe,he.yval):c.p2c(Ze,gt),!k(Qe[0])||!k(Je[0]))return T.warn("Fx.hover failed",he,fe),l.unhoverRaw(fe,he)}var At=1/0;function Lt(bt,Ut){for(Ot=0;Ot<nt.length;Ot++)if((Pt=nt[Ot])&&Pt[0]&&Pt[0].trace&&(Mt=Pt[0].trace).visible===!0&&Mt._length!==0&&["carpet","contourcarpet"].indexOf(Mt._module.name)===-1){if(Ne=Ae,c.isUnifiedHover(Ne)&&(Ne=Ne.charAt(0)),Mt.type==="splom"?He=oe[Ye=0]:(He=c.getSubplot(Mt),Ye=oe.indexOf(He)),tt={cd:Pt,trace:Mt,xa:Ve[Ye],ya:Ze[Ye],maxHoverDistance:vt,maxSpikeDistance:ht,index:!1,distance:Math.min(At,vt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:Mt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[He]&&(tt.subplot=ie[He]._subplot),ie._splomScenes&&ie._splomScenes[Mt.uid]&&(tt.scene=ie._splomScenes[Mt.uid]),Ne==="array"){var Xt=he[Ot];"pointNumber"in Xt?(tt.index=Xt.pointNumber,Ne="closest"):(Ne="","xval"in Xt&&(We=Xt.xval,Ne="x"),"yval"in Xt&&(ot=Xt.yval,Ne=Ne?"closest":"y"))}else bt!==void 0&&Ut!==void 0?(We=bt,ot=Ut):(We=Qe[Ye],ot=Je[Ye]);if(Re=Fe.length,vt!==0)if(Mt._module&&Mt._module.hoverPoints){var un=Mt._module.hoverPoints(tt,We,ot,Ne,{finiteRange:!0,hoverLayer:ie._hoverlayer,hoversubplots:de,gd:fe});if(un)for(var cn,vn=0;vn<un.length;vn++)cn=un[vn],k(cn.x0)&&k(cn.y0)&&Fe.push(F(cn,Ae))}else T.log("Unrecognized trace type in hover:",Mt);if(Ae==="closest"&&Fe.length>Re&&(Fe.splice(0,Re),At=Fe[0].distance),we&&ht!==0&&Fe.length===0){tt.distance=ht,tt.index=!1;var en=Mt._module.hoverPoints(tt,We,ot,"closest",{hoverLayer:ie._hoverlayer});if(en&&(en=en.filter(function(An){return An.spikeDistance<=ht})),en&&en.length){var Vt,Ht=en.filter(function(An){return An.xa.showspikes&&An.xa.spikesnap!=="hovered data"});if(Ht.length){var tn=Ht[0];k(tn.x0)&&k(tn.y0)&&(Vt=zt(tn),(!Ge.vLinePoint||Ge.vLinePoint.spikeDistance>Vt.spikeDistance)&&(Ge.vLinePoint=Vt))}var sn=en.filter(function(An){return An.ya.showspikes&&An.ya.spikesnap!=="hovered data"});if(sn.length){var wn=sn[0];k(wn.x0)&&k(wn.y0)&&(Vt=zt(wn),(!Ge.hLinePoint||Ge.hLinePoint.spikeDistance>Vt.spikeDistance)&&(Ge.hLinePoint=Vt))}}}}}function Ct(bt,Ut,Xt){for(var un,cn=null,vn=1/0,en=0;en<bt.length;en++)Pe&&Pe._id!==bt[en].xa._id||ge&&ge._id!==bt[en].ya._id||(un=bt[en].spikeDistance,Xt&&en===0&&(un=-1/0),un<=vn&&un<=Ut&&(cn=bt[en],vn=un));return cn}function zt(bt){return bt?{xa:bt.xa,ya:bt.ya,x:bt.xSpike!==void 0?bt.xSpike:(bt.x0+bt.x1)/2,y:bt.ySpike!==void 0?bt.ySpike:(bt.y0+bt.y1)/2,distance:bt.distance,spikeDistance:bt.spikeDistance,curveNumber:bt.trace.index,color:bt.color,pointNumber:bt.index}:null}Lt();var Gt={fullLayout:ie,container:ie._hoverlayer,event:he};fe._spikepoints;var rn={vLinePoint:Ge.vLinePoint,hLinePoint:Ge.hLinePoint};fe._spikepoints=rn;var Nt=function(){var bt=Fe.filter(function(Xt){return Pe&&Pe._id===Xt.xa._id&&ge&&ge._id===Xt.ya._id}),Ut=Fe.filter(function(Xt){return!(Pe&&Pe._id===Xt.xa._id&&ge&&ge._id===Xt.ya._id)});bt.sort(C),Ut.sort(C),Fe=function(Xt,un){for(var cn=un.charAt(0),vn=[],en=[],Vt=[],Ht=0;Ht<Xt.length;Ht++){var tn=Xt[Ht];h.traceIs(tn.trace,"bar-like")||h.traceIs(tn.trace,"box-violin")?Vt.push(tn):tn.trace[cn+"period"]?en.push(tn):vn.push(tn)}return vn.concat(en).concat(Vt)}(Fe=bt.concat(Ut),Ae)};Nt();var Wt=Ae.charAt(0),Rt=(Wt==="x"||Wt==="y")&&Fe[0]&&O[Fe[0].trace.type];if(we&&ht!==0&&Fe.length!==0){var Ln=Ct(Fe.filter(function(bt){return bt.ya.showspikes}),ht,Rt);Ge.hLinePoint=zt(Ln);var bn=Ct(Fe.filter(function(bt){return bt.xa.showspikes}),ht,Rt);Ge.vLinePoint=zt(bn)}if(Fe.length===0){var hn=l.unhoverRaw(fe,he);return!we||Ge.hLinePoint===null&&Ge.vLinePoint===null||j(fe,Ge,Gt),hn}if(we&&H()&&j(fe,Ge,Gt),c.isXYhover(Ne)&&Fe[0].length!==0&&Fe[0].trace.type!=="splom"){var Kt=Fe[0],on=(Fe=E[Kt.trace.type]?Fe.filter(function(bt){return bt.trace.index===Kt.trace.index}):[Kt]).length;Lt(Q("x",Kt,ie),Q("y",Kt,ie));var $t,ln=[],mn={},xn=0,Mn=function(bt){var Ut=E[bt.trace.type]?P(bt):bt.trace.index;if(mn[Ut]){var Xt=mn[Ut]-1,un=ln[Xt];Xt>0&&Math.abs(bt.distance)<Math.abs(un.distance)&&(ln[Xt]=bt)}else xn++,mn[Ut]=xn,ln.push(bt)};for($t=0;$t<on;$t++)Mn(Fe[$t]);for($t=Fe.length-1;$t>on-1;$t--)Mn(Fe[$t]);Fe=ln,Nt()}var Sn=fe._hoverdata,Tn=[],Rn=$(fe),Pn=K(fe);for(Tt=0;Tt<Fe.length;Tt++){var jn=Fe[Tt],Jn=c.makeEventData(jn,jn.trace,jn.cd);if(jn.hovertemplate!==!1){var $n=!1;jn.cd[jn.index]&&jn.cd[jn.index].ht&&($n=jn.cd[jn.index].ht),jn.hovertemplate=$n||jn.trace.hovertemplate||!1}if(jn.xa&&jn.ya){var Gn=jn.x0+jn.xa._offset,lr=jn.x1+jn.xa._offset,Jt=jn.y0+jn.ya._offset,Qt=jn.y1+jn.ya._offset,En=Math.min(Gn,lr),pn=Math.max(Gn,lr),Cn=Math.min(Jt,Qt),Vn=Math.max(Jt,Qt);Jn.bbox={x0:En+Pn,x1:pn+Pn,y0:Cn+Rn,y1:Vn+Rn}}jn.eventData=[Jn],Tn.push(Jn)}fe._hoverdata=Tn;var Fn=Ae==="y"&&(nt.length>1||Fe.length>1)||Ae==="closest"&&ct&&Fe.length>1,Yn=a.combine(ie.plot_bgcolor||a.background,ie.paper_bgcolor),fr=U(Fe,{gd:fe,hovermode:Ae,rotateLabels:Fn,bgColor:Yn,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance}),Zt=fr.hoverLabels;if(c.isUnifiedHover(Ae)||(function(bt,Ut,Xt,un){var cn,vn,en,Vt,Ht,tn,sn,wn=Ut?"xa":"ya",An=Ut?"ya":"xa",Dn=0,Bn=1,Xn=bt.size(),Un=new Array(Xn),tr=0,Qn=un.minX,Zn=un.maxX,ur=un.minY,mr=un.maxY,hr=function(Or){return Or*Xt._invScaleX},rr=function(Or){return Or*Xt._invScaleY};function gr(Or){var hi=Or[0],sa=Or[Or.length-1];if(vn=hi.pmin-hi.pos-hi.dp+hi.size,en=sa.pos+sa.dp+sa.size-hi.pmax,vn>.01){for(Ht=Or.length-1;Ht>=0;Ht--)Or[Ht].dp+=vn;cn=!1}if(!(en<.01)){if(vn<-.01){for(Ht=Or.length-1;Ht>=0;Ht--)Or[Ht].dp-=en;cn=!1}if(cn){var Zi=0;for(Vt=0;Vt<Or.length;Vt++)(tn=Or[Vt]).pos+tn.dp+tn.size>hi.pmax&&Zi++;for(Vt=Or.length-1;Vt>=0&&!(Zi<=0);Vt--)(tn=Or[Vt]).pos>hi.pmax-1&&(tn.del=!0,Zi--);for(Vt=0;Vt<Or.length&&!(Zi<=0);Vt++)if((tn=Or[Vt]).pos<hi.pmin+1)for(tn.del=!0,Zi--,en=2*tn.size,Ht=Or.length-1;Ht>=0;Ht--)Or[Ht].dp-=en;for(Vt=Or.length-1;Vt>=0&&!(Zi<=0);Vt--)(tn=Or[Vt]).pos+tn.dp+tn.size>hi.pmax&&(tn.del=!0,Zi--)}}}for(bt.each(function(Or){var hi=Or[wn],sa=Or[An],Zi=hi._id.charAt(0)==="x",uo=hi.range;tr===0&&uo&&uo[0]>uo[1]!==Zi&&(Bn=-1);var co=0,Xa=Zi?Xt.width:Xt.height;if(Xt.hovermode==="x"||Xt.hovermode==="y"){var Xi,Ka,Ao=N(Or,Ut),Ho=Or.anchor,Sa=Ho==="end"?-1:1;if(Ho==="middle")Ka=(Xi=Or.crossPos+(Zi?rr(Ao.y-Or.by/2):hr(Or.bx/2+Or.tx2width/2)))+(Zi?rr(Or.by):hr(Or.bx));else if(Zi)Ka=(Xi=Or.crossPos+rr(S+Ao.y)-rr(Or.by/2-S))+rr(Or.by);else{var Ea=hr(Sa*S+Ao.x),Ja=Ea+hr(Sa*Or.bx);Xi=Or.crossPos+Math.min(Ea,Ja),Ka=Or.crossPos+Math.max(Ea,Ja)}Zi?ur!==void 0&&mr!==void 0&&Math.min(Ka,mr)-Math.max(Xi,ur)>1&&(sa.side==="left"?(co=sa._mainLinePosition,Xa=Xt.width):Xa=sa._mainLinePosition):Qn!==void 0&&Zn!==void 0&&Math.min(Ka,Zn)-Math.max(Xi,Qn)>1&&(sa.side==="top"?(co=sa._mainLinePosition,Xa=Xt.height):Xa=sa._mainLinePosition)}Un[tr++]=[{datum:Or,traceIndex:Or.trace.index,dp:0,pos:Or.pos,posref:Or.posref,size:Or.by*(Zi?m:1)/2,pmin:co,pmax:Xa}]}),Un.sort(function(Or,hi){return Or[0].posref-hi[0].posref||Bn*(hi[0].traceIndex-Or[0].traceIndex)});!cn&&Dn<=Xn;){for(Dn++,cn=!0,Vt=0;Vt<Un.length-1;){var xr=Un[Vt],Pr=Un[Vt+1],ii=xr[xr.length-1],oi=Pr[0];if((vn=ii.pos+ii.dp+ii.size-oi.pos-oi.dp+oi.size)>.01&&ii.pmin===oi.pmin&&ii.pmax===oi.pmax){for(Ht=Pr.length-1;Ht>=0;Ht--)Pr[Ht].dp+=vn;for(xr.push.apply(xr,Pr),Un.splice(Vt+1,1),sn=0,Ht=xr.length-1;Ht>=0;Ht--)sn+=xr[Ht].dp;for(en=sn/xr.length,Ht=xr.length-1;Ht>=0;Ht--)xr[Ht].dp-=en;cn=!1}else Vt++}Un.forEach(gr)}for(Vt=Un.length-1;Vt>=0;Vt--){var Vi=Un[Vt];for(Ht=Vi.length-1;Ht>=0;Ht--){var ti=Vi[Ht],ki=ti.datum;ki.offset=ti.dp,ki.del=ti.del}}}(Zt,Fn,ie,fr.commonLabelBoundingBox),W(Zt,Fn,ie._invScaleX,ie._invScaleY)),me&&me.tagName){var dn=h.getComponentMethod("annotations","hasClickToShow")(fe,Tn);r(M.select(me),dn?"pointer":"")}me&&!ye&&function(bt,Ut,Xt){if(!Xt||Xt.length!==bt._hoverdata.length)return!0;for(var un=Xt.length-1;un>=0;un--){var cn=Xt[un],vn=bt._hoverdata[un];if(cn.curveNumber!==vn.curveNumber||String(cn.pointNumber)!==String(vn.pointNumber)||String(cn.pointNumbers)!==String(vn.pointNumbers))return!0}return!1}(fe,0,Sn)&&(Sn&&fe.emit("plotly_unhover",{event:he,points:Sn}),fe.emit("plotly_hover",{event:he,points:fe._hoverdata,xaxes:Ve,yaxes:Ze,xvals:Qe,yvals:Je}))})(Y,re,se,ae,ce)})},R.loneHover=function(Y,re){var se=!0;Array.isArray(Y)||(se=!1,Y=[Y]);var ae=re.gd,ce=$(ae),fe=K(ae),he=U(Y.map(function(me){var Me=me._x0||me.x0||me.x||0,Pe=me._x1||me.x1||me.x||0,ge=me._y0||me.y0||me.y||0,oe=me._y1||me.y1||me.y||0,ie=me.eventData;if(ie){var de=Math.min(Me,Pe),Se=Math.max(Me,Pe),_e=Math.min(ge,oe),we=Math.max(ge,oe),Ae=me.trace;if(h.traceIs(Ae,"gl3d")){var Oe=ae._fullLayout[Ae.scene]._scene.container,ze=Oe.offsetLeft,pe=Oe.offsetTop;de+=ze,Se+=ze,_e+=pe,we+=pe}ie.bbox={x0:de+fe,x1:Se+fe,y0:_e+ce,y1:we+ce},re.inOut_bbox&&re.inOut_bbox.push(ie.bbox)}else ie=!1;return{color:me.color||a.defaultLine,x0:me.x0||me.x||0,x1:me.x1||me.x||0,y0:me.y0||me.y||0,y1:me.y1||me.y||0,xLabel:me.xLabel,yLabel:me.yLabel,zLabel:me.zLabel,text:me.text,name:me.name,idealAlign:me.idealAlign,borderColor:me.borderColor,fontFamily:me.fontFamily,fontSize:me.fontSize,fontColor:me.fontColor,fontWeight:me.fontWeight,fontStyle:me.fontStyle,fontVariant:me.fontVariant,nameLength:me.nameLength,textAlign:me.textAlign,trace:me.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:me.hovertemplate||!1,hovertemplateLabels:me.hovertemplateLabels||!1,eventData:ie}}),{gd:ae,hovermode:"closest",rotateLabels:!1,bgColor:re.bgColor||a.background,container:M.select(re.container),outerContainer:re.outerContainer||re.container}).hoverLabels,ve=0,ye=0;return he.sort(function(me,Me){return me.y0-Me.y0}).each(function(me,Me){var Pe=me.y0-me.by/2;me.offset=Pe-5<ve?ve-Pe+5:0,ve=Pe+me.by+me.offset,Me===re.anchorIndex&&(ye=me.offset)}).each(function(me){me.offset-=ye}),W(he,!1,ae._fullLayout._invScaleX,ae._fullLayout._invScaleY),se?he:he.node()};var D=/<extra>([\s\S]*)<\/extra>/;function U(Y,re){var se=re.gd,ae=se._fullLayout,ce=re.hovermode,fe=re.rotateLabels,he=re.bgColor,ve=re.container,ye=re.outerContainer,me=re.commonLabelOpts||{};if(Y.length===0)return[[]];var Me=re.fontFamily||x.HOVERFONT,Pe=re.fontSize||x.HOVERFONTSIZE,ge=re.fontWeight||ae.font.weight,oe=re.fontStyle||ae.font.style,ie=re.fontVariant||ae.font.variant,de=re.fontTextcase||ae.font.textcase,Se=re.fontLineposition||ae.font.lineposition,_e=re.fontShadow||ae.font.shadow,we=Y[0],Ae=we.xa,Oe=we.ya,ze=ce.charAt(0),pe=ze+"Label",be=we[pe];if(be===void 0&&Ae.type==="multicategory")for(var ke=0;ke<Y.length&&(be=Y[ke][pe])===void 0;ke++);var Ie=X(se,ye),Ee=Ie.top,Be=Ie.width,Ve=Ie.height,Ze=be!==void 0&&we.distance<=re.hoverdistance&&(ce==="x"||ce==="y");if(Ze){var rt,it,dt=!0;for(rt=0;rt<Y.length;rt++)if(dt&&Y[rt].zLabel===void 0&&(dt=!1),it=Y[rt].hoverinfo||Y[rt].trace.hoverinfo){var vt=Array.isArray(it)?it:it.split("+");if(vt.indexOf("all")===-1&&vt.indexOf(ce)===-1){Ze=!1;break}}dt&&(Ze=!1)}var ht=ve.selectAll("g.axistext").data(Ze?[0]:[]);ht.enter().append("g").classed("axistext",!0),ht.exit().remove();var Qe={minX:0,maxX:0,minY:0,maxY:0};if(ht.each(function(){var Rt=M.select(this),Ln=T.ensureSingle(Rt,"path","",function(pn){pn.style({"stroke-width":"1px"})}),bn=T.ensureSingle(Rt,"text","",function(pn){pn.attr("data-notex",1)}),hn=me.bgcolor||a.defaultLine,Kt=me.bordercolor||a.contrast(hn),on=a.contrast(hn),$t=me.font,ln={weight:$t.weight||ge,style:$t.style||oe,variant:$t.variant||ie,textcase:$t.textcase||de,lineposition:$t.lineposition||Se,shadow:$t.shadow||_e,family:$t.family||Me,size:$t.size||Pe,color:$t.color||on};Ln.style({fill:hn,stroke:Kt}),bn.text(be).call(n.font,ln).call(i.positionText,0,0).call(i.convertToTspans,se),Rt.attr("transform","");var mn,xn,Mn=X(se,bn.node());if(ce==="x"){var Sn=Ae.side==="top"?"-":"";bn.attr("text-anchor","middle").call(i.positionText,0,Ae.side==="top"?Ee-Mn.bottom-S-w:Ee-Mn.top+S+w),mn=Ae._offset+(we.x0+we.x1)/2,xn=Oe._offset+(Ae.side==="top"?0:Oe._length);var Tn=Mn.width/2+w,Rn=mn;mn<Tn?Rn=Tn:mn>ae.width-Tn&&(Rn=ae.width-Tn),Ln.attr("d","M"+(mn-Rn)+",0L"+(mn-Rn+S)+","+Sn+S+"H"+Tn+"v"+Sn+(2*w+Mn.height)+"H"+-Tn+"V"+Sn+S+"H"+(mn-Rn-S)+"Z"),mn=Rn,Qe.minX=mn-Tn,Qe.maxX=mn+Tn,Ae.side==="top"?(Qe.minY=xn-(2*w+Mn.height),Qe.maxY=xn-w):(Qe.minY=xn+w,Qe.maxY=xn+(2*w+Mn.height))}else{var Pn,jn,Jn;Oe.side==="right"?(Pn="start",jn=1,Jn="",mn=Ae._offset+Ae._length):(Pn="end",jn=-1,Jn="-",mn=Ae._offset),xn=Oe._offset+(we.y0+we.y1)/2,bn.attr("text-anchor",Pn),Ln.attr("d","M0,0L"+Jn+S+","+S+"V"+(w+Mn.height/2)+"h"+Jn+(2*w+Mn.width)+"V-"+(w+Mn.height/2)+"H"+Jn+S+"V-"+S+"Z"),Qe.minY=xn-(w+Mn.height/2),Qe.maxY=xn+(w+Mn.height/2),Oe.side==="right"?(Qe.minX=mn+S,Qe.maxX=mn+S+(2*w+Mn.width)):(Qe.minX=mn-S-(2*w+Mn.width),Qe.maxX=mn-S);var $n,Gn=Mn.height/2,lr=Ee-Mn.top-Gn,Jt="clip"+ae._uid+"commonlabel"+Oe._id;if(mn<Mn.width+2*w+S){$n="M-"+(S+w)+"-"+Gn+"h-"+(Mn.width-w)+"V"+Gn+"h"+(Mn.width-w)+"Z";var Qt=Mn.width-mn+w;i.positionText(bn,Qt,lr),Pn==="end"&&bn.selectAll("tspan").each(function(){var pn=M.select(this),Cn=n.tester.append("text").text(pn.text()).call(n.font,ln),Vn=X(se,Cn.node());Math.round(Vn.width)<Math.round(Mn.width)&&pn.attr("x",Qt-Vn.width),Cn.remove()})}else i.positionText(bn,jn*(w+S),lr),$n=null;var En=ae._topclips.selectAll("#"+Jt).data($n?[0]:[]);En.enter().append("clipPath").attr("id",Jt).append("path"),En.exit().remove(),En.select("path").attr("d",$n),n.setClipUrl(bn,$n?Jt:null,se)}Rt.attr("transform",p(mn,xn))}),c.isUnifiedHover(ce)){ve.selectAll("g.hovertext").remove();var Je=Y.filter(function(Rt){return Rt.hoverinfo!=="none"});if(Je.length===0)return[];var Tt=ae.hoverlabel,Ot=Tt.font,Pt={showlegend:!0,legend:{title:{text:be,font:Ot},font:Ot,bgcolor:Tt.bgcolor,bordercolor:Tt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ae.legend?ae.legend.traceorder:void 0,orientation:"v"}},Mt={font:Ot};d(Pt,Mt,se._fullData);var He=Mt.legend;He.entries=[];for(var Ye=0;Ye<Je.length;Ye++){var Ne=Je[Ye];if(Ne.hoverinfo!=="none"){var We=I(Ne,!0,ce,ae,be),ot=We[0],tt=We[1];Ne.name=tt,Ne.text=tt!==""?tt+" : "+ot:ot;var Re=Ne.cd[Ne.index];Re&&(Re.mc&&(Ne.mc=Re.mc),Re.mcc&&(Ne.mc=Re.mcc),Re.mlc&&(Ne.mlc=Re.mlc),Re.mlcc&&(Ne.mlc=Re.mlcc),Re.mlw&&(Ne.mlw=Re.mlw),Re.mrc&&(Ne.mrc=Re.mrc),Re.dir&&(Ne.dir=Re.dir)),Ne._distinct=!0,He.entries.push([Ne])}}He.entries.sort(function(Rt,Ln){return Rt[0].trace.index-Ln[0].trace.index}),He.layer=ve,He._inHover=!0,He._groupTitleFont=Tt.grouptitlefont,v(se,He);var Fe,nt,Ge,ct,pt=ve.select("g.legend"),gt=X(se,pt.node()),ut=gt.width+2*w,kt=gt.height+2*w,mt=Je[0],At=(mt.x0+mt.x1)/2,Lt=(mt.y0+mt.y1)/2,Ct=!(h.traceIs(mt.trace,"bar-like")||h.traceIs(mt.trace,"box-violin"));ze==="y"?Ct?(nt=Lt-w,Fe=Lt+w):(nt=Math.min.apply(null,Je.map(function(Rt){return Math.min(Rt.y0,Rt.y1)})),Fe=Math.max.apply(null,Je.map(function(Rt){return Math.max(Rt.y0,Rt.y1)}))):nt=Fe=T.mean(Je.map(function(Rt){return(Rt.y0+Rt.y1)/2}))-kt/2,ze==="x"?Ct?(Ge=At+w,ct=At-w):(Ge=Math.max.apply(null,Je.map(function(Rt){return Math.max(Rt.x0,Rt.x1)})),ct=Math.min.apply(null,Je.map(function(Rt){return Math.min(Rt.x0,Rt.x1)}))):Ge=ct=T.mean(Je.map(function(Rt){return(Rt.x0+Rt.x1)/2}))-ut/2;var zt,Gt,rn=Ae._offset,Nt=Oe._offset;return ct+=rn-ut,nt+=Nt-kt,zt=(Ge+=rn)+ut<Be&&Ge>=0?Ge:ct+ut<Be&&ct>=0?ct:rn+ut<Be?rn:Ge-At<At-ct+ut?Be-ut:0,zt+=w,Gt=(Fe+=Nt)+kt<Ve&&Fe>=0?Fe:nt+kt<Ve&&nt>=0?nt:Nt+kt<Ve?Nt:Fe-Lt<Lt-nt+kt?Ve-kt:0,Gt+=w,pt.attr("transform",p(zt-1,Gt-1)),pt}var Wt=ve.selectAll("g.hovertext").data(Y,function(Rt){return P(Rt)});return Wt.enter().append("g").classed("hovertext",!0).each(function(){var Rt=M.select(this);Rt.append("rect").call(a.fill,a.addOpacity(he,.8)),Rt.append("text").classed("name",!0),Rt.append("path").style("stroke-width","1px"),Rt.append("text").classed("nums",!0).call(n.font,{weight:ge,style:oe,variant:ie,textcase:de,lineposition:Se,shadow:_e,family:Me,size:Pe})}),Wt.exit().remove(),Wt.each(function(Rt){var Ln=M.select(this).attr("transform",""),bn=Rt.color;Array.isArray(bn)&&(bn=bn[Rt.eventData[0].pointNumber]);var hn=Rt.bgcolor||bn,Kt=a.combine(a.opacity(hn)?hn:a.defaultLine,he),on=a.combine(a.opacity(bn)?bn:a.defaultLine,he),$t=Rt.borderColor||a.contrast(Kt),ln=I(Rt,Ze,ce,ae,be,Ln),mn=ln[0],xn=ln[1],Mn=Ln.select("text.nums").call(n.font,{family:Rt.fontFamily||Me,size:Rt.fontSize||Pe,color:Rt.fontColor||$t,weight:Rt.fontWeight||ge,style:Rt.fontStyle||oe,variant:Rt.fontVariant||ie,textcase:Rt.fontTextcase||de,lineposition:Rt.fontLineposition||Se,shadow:Rt.fontShadow||_e}).text(mn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se),Sn=Ln.select("text.name"),Tn=0,Rn=0;if(xn&&xn!==mn){Sn.call(n.font,{family:Rt.fontFamily||Me,size:Rt.fontSize||Pe,color:on,weight:Rt.fontWeight||ge,style:Rt.fontStyle||oe,variant:Rt.fontVariant||ie,textcase:Rt.fontTextcase||de,lineposition:Rt.fontLineposition||Se,shadow:Rt.fontShadow||_e}).text(xn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se);var Pn=X(se,Sn.node());Tn=Pn.width+2*w,Rn=Pn.height+2*w}else Sn.remove(),Ln.select("rect").remove();Ln.select("path").style({fill:Kt,stroke:$t});var jn=Rt.xa._offset+(Rt.x0+Rt.x1)/2,Jn=Rt.ya._offset+(Rt.y0+Rt.y1)/2,$n=Math.abs(Rt.x1-Rt.x0),Gn=Math.abs(Rt.y1-Rt.y0),lr=X(se,Mn.node()),Jt=lr.width/ae._invScaleX,Qt=lr.height/ae._invScaleY;Rt.ty0=(Ee-lr.top)/ae._invScaleY,Rt.bx=Jt+2*w,Rt.by=Math.max(Qt+2*w,Rn),Rt.anchor="start",Rt.txwidth=Jt,Rt.tx2width=Tn,Rt.offset=0;var En,pn,Cn=(Jt+S+w+Tn)*ae._invScaleX;if(fe)Rt.pos=jn,En=Jn+Gn/2+Cn<=Ve,pn=Jn-Gn/2-Cn>=0,Rt.idealAlign!=="top"&&En||!pn?En?(Jn+=Gn/2,Rt.anchor="start"):Rt.anchor="middle":(Jn-=Gn/2,Rt.anchor="end"),Rt.crossPos=Jn;else{if(Rt.pos=Jn,En=jn+$n/2+Cn<=Be,pn=jn-$n/2-Cn>=0,Rt.idealAlign!=="left"&&En||!pn)if(En)jn+=$n/2,Rt.anchor="start";else{Rt.anchor="middle";var Vn=Cn/2,Fn=jn+Vn-Be,Yn=jn-Vn;Fn>0&&(jn-=Fn),Yn<0&&(jn+=-Yn)}else jn-=$n/2,Rt.anchor="end";Rt.crossPos=jn}Mn.attr("text-anchor",Rt.anchor),Tn&&Sn.attr("text-anchor",Rt.anchor),Ln.attr("transform",p(jn,Jn)+(fe?s(g):""))}),{hoverLabels:Wt,commonLabelBoundingBox:Qe}}function I(Y,re,se,ae,ce,fe){var he="",ve="";Y.nameOverride!==void 0&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=T.templateString(Y.name,Y.trace._meta)),he=te(Y.name,Y.nameLength));var ye=se.charAt(0),me=ye==="x"?"y":"x";Y.zLabel!==void 0?(Y.xLabel!==void 0&&(ve+="x: "+Y.xLabel+"<br>"),Y.yLabel!==void 0&&(ve+="y: "+Y.yLabel+"<br>"),Y.trace.type!=="choropleth"&&Y.trace.type!=="choroplethmapbox"&&(ve+=(ve?"z: ":"")+Y.zLabel)):re&&Y[ye+"Label"]===ce?ve=Y[me+"Label"]||"":Y.xLabel===void 0?Y.yLabel!==void 0&&Y.trace.type!=="scattercarpet"&&(ve=Y.yLabel):ve=Y.yLabel===void 0?Y.xLabel:"("+Y.xLabel+", "+Y.yLabel+")",!Y.text&&Y.text!==0||Array.isArray(Y.text)||(ve+=(ve?"<br>":"")+Y.text),Y.extraText!==void 0&&(ve+=(ve?"<br>":"")+Y.extraText),fe&&ve===""&&!Y.hovertemplate&&(he===""&&fe.remove(),ve=he);var Me=Y.hovertemplate||!1;if(Me){var Pe=Y.hovertemplateLabels||Y;Y[ye+"Label"]!==ce&&(Pe[ye+"other"]=Pe[ye+"Val"],Pe[ye+"otherLabel"]=Pe[ye+"Label"]),ve=(ve=T.hovertemplateString(Me,Pe,ae._d3locale,Y.eventData[0]||{},Y.trace._meta)).replace(D,function(ge,oe){return he=te(oe,Y.nameLength),""})}return[ve,he]}function N(Y,re){var se=0,ae=Y.offset;return re&&(ae*=-f,se=Y.offset*b),{x:se,y:ae}}function W(Y,re,se,ae){var ce=function(he){return he*se},fe=function(he){return he*ae};Y.each(function(he){var ve=M.select(this);if(he.del)return ve.remove();var ye,me,Me,Pe,ge=ve.select("text.nums"),oe=he.anchor,ie=oe==="end"?-1:1,de=(Pe=(Me=(me={start:1,end:-1,middle:0}[(ye=he).anchor])*(S+w))+me*(ye.txwidth+w),ye.anchor==="middle"&&(Me-=ye.tx2width/2,Pe+=ye.txwidth/2+w),{alignShift:me,textShiftX:Me,text2ShiftX:Pe}),Se=N(he,re),_e=Se.x,we=Se.y,Ae=oe==="middle";ve.select("path").attr("d",Ae?"M-"+ce(he.bx/2+he.tx2width/2)+","+fe(we-he.by/2)+"h"+ce(he.bx)+"v"+fe(he.by)+"h-"+ce(he.bx)+"Z":"M0,0L"+ce(ie*S+_e)+","+fe(S+we)+"v"+fe(he.by/2-S)+"h"+ce(ie*he.bx)+"v-"+fe(he.by)+"H"+ce(ie*S+_e)+"V"+fe(we-S)+"Z");var Oe=_e+de.textShiftX,ze=we+he.ty0-he.by/2+w,pe=he.textAlign||"auto";pe!=="auto"&&(pe==="left"&&oe!=="start"?(ge.attr("text-anchor","start"),Oe=Ae?-he.bx/2-he.tx2width/2+w:-he.bx-w):pe==="right"&&oe!=="end"&&(ge.attr("text-anchor","end"),Oe=Ae?he.bx/2-he.tx2width/2-w:he.bx+w)),ge.call(i.positionText,ce(Oe),fe(ze)),he.tx2width&&(ve.select("text.name").call(i.positionText,ce(de.text2ShiftX+de.alignShift*w+_e),fe(we+he.ty0-he.by/2+w)),ve.select("rect").call(n.setRect,ce(de.text2ShiftX+(de.alignShift-1)*he.tx2width/2+_e),fe(we-he.by/2-1),ce(he.tx2width),fe(he.by+2)))})}function F(Y,re){var se=Y.index,ae=Y.trace||{},ce=Y.cd[0],fe=Y.cd[se]||{};function he(ge){return ge||k(ge)&&ge===0}var ve=Array.isArray(se)?function(ge,oe){var ie=T.castOption(ce,se,ge);return he(ie)?ie:T.extractOption({},ae,"",oe)}:function(ge,oe){return T.extractOption(fe,ae,ge,oe)};function ye(ge,oe,ie){var de=ve(oe,ie);he(de)&&(Y[ge]=de)}if(ye("hoverinfo","hi","hoverinfo"),ye("bgcolor","hbg","hoverlabel.bgcolor"),ye("borderColor","hbc","hoverlabel.bordercolor"),ye("fontFamily","htf","hoverlabel.font.family"),ye("fontSize","hts","hoverlabel.font.size"),ye("fontColor","htc","hoverlabel.font.color"),ye("fontWeight","htw","hoverlabel.font.weight"),ye("fontStyle","hty","hoverlabel.font.style"),ye("fontVariant","htv","hoverlabel.font.variant"),ye("nameLength","hnl","hoverlabel.namelength"),ye("textAlign","hta","hoverlabel.align"),Y.posref=re==="y"||re==="closest"&&ae.orientation==="h"?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=T.constrain(Y.x0,0,Y.xa._length),Y.x1=T.constrain(Y.x1,0,Y.xa._length),Y.y0=T.constrain(Y.y0,0,Y.ya._length),Y.y1=T.constrain(Y.y1,0,Y.ya._length),Y.xLabelVal!==void 0&&(Y.xLabel="xLabel"in Y?Y.xLabel:u.hoverLabelText(Y.xa,Y.xLabelVal,ae.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),Y.yLabelVal!==void 0&&(Y.yLabel="yLabel"in Y?Y.yLabel:u.hoverLabelText(Y.ya,Y.yLabelVal,ae.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),Y.zLabelVal!==void 0&&Y.zLabel===void 0&&(Y.zLabel=String(Y.zLabelVal)),!(isNaN(Y.xerr)||Y.xa.type==="log"&&Y.xerr<=0)){var me=u.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xerrneg!==void 0?Y.xLabel+=" +"+me+" / -"+u.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+=" ± "+me,re==="x"&&(Y.distance+=1)}if(!(isNaN(Y.yerr)||Y.ya.type==="log"&&Y.yerr<=0)){var Me=u.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;Y.yerrneg!==void 0?Y.yLabel+=" +"+Me+" / -"+u.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+=" ± "+Me,re==="y"&&(Y.distance+=1)}var Pe=Y.hoverinfo||Y.trace.hoverinfo;return Pe&&Pe!=="all"&&((Pe=Array.isArray(Pe)?Pe:Pe.split("+")).indexOf("x")===-1&&(Y.xLabel=void 0),Pe.indexOf("y")===-1&&(Y.yLabel=void 0),Pe.indexOf("z")===-1&&(Y.zLabel=void 0),Pe.indexOf("text")===-1&&(Y.text=void 0),Pe.indexOf("name")===-1&&(Y.name=void 0)),Y}function j(Y,re,se){var ae,ce,fe=se.container,he=se.fullLayout,ve=he._size,ye=se.event,me=!!re.hLinePoint,Me=!!re.vLinePoint;if(fe.selectAll(".spikeline").remove(),Me||me){var Pe=a.combine(he.plot_bgcolor,he.paper_bgcolor);if(me){var ge,oe,ie=re.hLinePoint;ae=ie&&ie.xa,(ce=ie&&ie.ya).spikesnap==="cursor"?(ge=ye.pointerX,oe=ye.pointerY):(ge=ae._offset+ie.x,oe=ce._offset+ie.y);var de,Se,_e=o.readability(ie.color,Pe)<1.5?a.contrast(Pe):ie.color,we=ce.spikemode,Ae=ce.spikethickness,Oe=ce.spikecolor||_e,ze=u.getPxPosition(Y,ce);if(we.indexOf("toaxis")!==-1||we.indexOf("across")!==-1){if(we.indexOf("toaxis")!==-1&&(de=ze,Se=ge),we.indexOf("across")!==-1){var pe=ce._counterDomainMin,be=ce._counterDomainMax;ce.anchor==="free"&&(pe=Math.min(pe,ce.position),be=Math.max(be,ce.position)),de=ve.l+pe*ve.w,Se=ve.l+be*ve.w}fe.insert("line",":first-child").attr({x1:de,x2:Se,y1:oe,y2:oe,"stroke-width":Ae,stroke:Oe,"stroke-dasharray":n.dashStyle(ce.spikedash,Ae)}).classed("spikeline",!0).classed("crisp",!0),fe.insert("line",":first-child").attr({x1:de,x2:Se,y1:oe,y2:oe,"stroke-width":Ae+2,stroke:Pe}).classed("spikeline",!0).classed("crisp",!0)}we.indexOf("marker")!==-1&&fe.insert("circle",":first-child").attr({cx:ze+(ce.side!=="right"?Ae:-Ae),cy:oe,r:Ae,fill:Oe}).classed("spikeline",!0)}if(Me){var ke,Ie,Ee=re.vLinePoint;ae=Ee&&Ee.xa,ce=Ee&&Ee.ya,ae.spikesnap==="cursor"?(ke=ye.pointerX,Ie=ye.pointerY):(ke=ae._offset+Ee.x,Ie=ce._offset+Ee.y);var Be,Ve,Ze=o.readability(Ee.color,Pe)<1.5?a.contrast(Pe):Ee.color,rt=ae.spikemode,it=ae.spikethickness,dt=ae.spikecolor||Ze,vt=u.getPxPosition(Y,ae);if(rt.indexOf("toaxis")!==-1||rt.indexOf("across")!==-1){if(rt.indexOf("toaxis")!==-1&&(Be=vt,Ve=Ie),rt.indexOf("across")!==-1){var ht=ae._counterDomainMin,Qe=ae._counterDomainMax;ae.anchor==="free"&&(ht=Math.min(ht,ae.position),Qe=Math.max(Qe,ae.position)),Be=ve.t+(1-Qe)*ve.h,Ve=ve.t+(1-ht)*ve.h}fe.insert("line",":first-child").attr({x1:ke,x2:ke,y1:Be,y2:Ve,"stroke-width":it,stroke:dt,"stroke-dasharray":n.dashStyle(ae.spikedash,it)}).classed("spikeline",!0).classed("crisp",!0),fe.insert("line",":first-child").attr({x1:ke,x2:ke,y1:Be,y2:Ve,"stroke-width":it+2,stroke:Pe}).classed("spikeline",!0).classed("crisp",!0)}rt.indexOf("marker")!==-1&&fe.insert("circle",":first-child").attr({cx:ke,cy:vt-(ae.side!=="top"?it:-it),r:it,fill:dt}).classed("spikeline",!0)}}}function H(Y,re){return!re}function te(Y,re){return i.plainText(Y||"",{len:re,allowedTags:["br","sub","sup","b","i","em"]})}function Q(Y,re,se){var ae=re[Y+"a"],ce=re[Y+"Val"],fe=re.cd[0];if(ae.type==="category"||ae.type==="multicategory")ce=ae._categoriesMap[ce];else if(ae.type==="date"){var he=re.trace[Y+"periodalignment"];if(he){var ve=re.cd[re.index],ye=ve[Y+"Start"];ye===void 0&&(ye=ve[Y]);var me=ve[Y+"End"];me===void 0&&(me=ve[Y]);var Me=me-ye;he==="end"?ce+=Me:he==="middle"&&(ce+=Me/2)}ce=ae.d2c(ce)}return fe&&fe.t&&fe.t.posLetter===ae._id&&(se.boxmode!=="group"&&se.violinmode!=="group"||(ce+=fe.t.dPos)),ce}function $(Y){return Y.offsetTop+Y.clientTop}function K(Y){return Y.offsetLeft+Y.clientLeft}function X(Y,re){var se=Y._fullLayout,ae=re.getBoundingClientRect(),ce=ae.left,fe=ae.top,he=ce+ae.width,ve=fe+ae.height,ye=T.apply3DTransform(se._invTransform)(ce,fe),me=T.apply3DTransform(se._invTransform)(he,ve),Me=ye[0],Pe=ye[1],ge=me[0],oe=me[1];return{x:Me,y:Pe,width:ge-Me,height:oe-Pe,top:Math.min(Pe,oe),left:Math.min(Me,ge),right:Math.max(Me,ge),bottom:Math.max(Pe,oe)}}},16132:function(ee,R,e){var M=e(3400),k=e(76308),o=e(10624).isUnifiedHover;ee.exports=function(T,_,p,s){s=s||{};var t=_.legend;function i(r){s.font[r]||(s.font[r]=t?_.legend.font[r]:_.font[r])}_&&o(_.hovermode)&&(s.font||(s.font={}),i("size"),i("family"),i("color"),i("weight"),i("style"),i("variant"),t?(s.bgcolor||(s.bgcolor=k.combine(_.legend.bgcolor,_.paper_bgcolor)),s.bordercolor||(s.bordercolor=_.legend.bordercolor)):s.bgcolor||(s.bgcolor=_.paper_bgcolor)),p("hoverlabel.bgcolor",s.bgcolor),p("hoverlabel.bordercolor",s.bordercolor),p("hoverlabel.namelength",s.namelength),M.coerceFont(p,"hoverlabel.font",s.font),p("hoverlabel.align",s.align)}},41008:function(ee,R,e){var M=e(3400),k=e(65460);ee.exports=function(o,T){function _(p,s){return T[p]!==void 0?T[p]:M.coerce(o,T,k,p,s)}return _("clickmode"),_("hoversubplots"),_("hovermode")}},93024:function(ee,R,e){var M=e(33428),k=e(3400),o=e(86476),T=e(10624),_=e(65460),p=e(83292);ee.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:_},attributes:e(55756),layoutAttributes:_,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,i){return k.castOption(s,t,"hoverlabel."+i)},castHoverinfo:function(s,t,i){return k.castOption(s,i,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:s._module},t)})},hover:p.hover,unhover:o.unhover,loneHover:p.loneHover,loneUnhover:function(s){var t=k.isD3Selection(s)?s:M.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(ee,R,e){var M=e(92456),k=e(25376),o=k({editType:"none"});o.family.dflt=M.HOVERFONT,o.size.dflt=M.HOVERFONTSIZE,ee.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(ee,R,e){var M=e(3400),k=e(65460),o=e(41008),T=e(16132);ee.exports=function(_,p){function s(n,a){return M.coerce(_,p,k,n,a)}o(_,p)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=p._has("mapbox"),i=p._has("geo"),r=p._basePlotModules.length;p.dragmode==="zoom"&&((t||i)&&r===1||t&&i&&r===2)&&(p.dragmode="pan"),T(_,p,s),M.coerceFont(s,"hoverlabel.grouptitlefont",p.hoverlabel.font)}},81976:function(ee,R,e){var M=e(3400),k=e(16132),o=e(65460);ee.exports=function(T,_){k(T,_,function(p,s){return M.coerce(T,_,o,p,s)})}},12704:function(ee,R,e){var M=e(3400),k=e(53756).counter,o=e(86968).u,T=e(33816).idRegex,_=e(31780),p={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,a){var l=n[a+"axes"],u=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(l)?l:u.length?u:void 0}function t(r,n,a,l,u,h){var c=n(r+"gap",a),x=n("domain."+r);n(r+"side",l);for(var d=new Array(u),v=x[0],g=(x[1]-v)/(u-c),y=g*(1-c),m=0;m<u;m++){var b=v+g*m;d[h?u-1-m:m]=[b,b+y]}return d}function i(r,n,a,l,u){var h,c=new Array(a);function x(d,v){n.indexOf(v)!==-1&&l[v]===void 0?(c[d]=v,l[v]=d):c[d]=""}if(Array.isArray(r))for(h=0;h<a;h++)x(h,r[h]);else for(x(0,u),h=1;h<a;h++)x(h,u+(h+1));return c}ee.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:function(r,n){var a=r.grid||{},l=s(n,a,"x"),u=s(n,a,"y");if(r.grid||l||u){var h,c,x=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),d=Array.isArray(l),v=Array.isArray(u),g=d&&l!==a.xaxes&&v&&u!==a.yaxes;x?(h=a.subplots.length,c=a.subplots[0].length):(v&&(h=u.length),d&&(c=l.length));var y=_.newContainer(n,"grid"),m=C("rows",h),b=C("columns",c);if(m*b>1){x||d||v||C("pattern")==="independent"&&(x=!0),y._hasSubplotGrid=x;var f,S,w=C("roworder")==="top to bottom",E=x?.2:.1,O=x?.3:.1;g&&n._splomGridDflt&&(f=n._splomGridDflt.xside,S=n._splomGridDflt.yside),y._domains={x:t("x",C,E,f,b),y:t("y",C,O,S,m,w)}}else delete n.grid}function C(P,D){return M.coerce(a,y,p,P,D)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var l,u,h,c,x,d,v,g=r.grid||{},y=n._subplots,m=a._hasSubplotGrid,b=a.rows,f=a.columns,S=a.pattern==="independent",w=a._axisMap={};if(m){var E=g.subplots||[];d=a.subplots=new Array(b);var O=1;for(l=0;l<b;l++){var C=d[l]=new Array(f),P=E[l]||[];for(u=0;u<f;u++)if(S?(x=O===1?"xy":"x"+O+"y"+O,O++):x=P[u],C[u]="",y.cartesian.indexOf(x)!==-1){if(v=x.indexOf("y"),h=x.slice(0,v),c=x.slice(v),w[h]!==void 0&&w[h]!==u||w[c]!==void 0&&w[c]!==l)continue;C[u]=x,w[h]=u,w[c]=l}}}else{var D=s(n,g,"x"),U=s(n,g,"y");a.xaxes=i(D,y.xaxis,f,w,"x"),a.yaxes=i(U,y.yaxis,b,w,"y")}var I=a._anchors={},N=a.roworder==="top to bottom";for(var W in w){var F,j,H,te=W.charAt(0),Q=a[te+"side"];if(Q.length<8)I[W]="free";else if(te==="x"){if(Q.charAt(0)==="t"===N?(F=0,j=1,H=b):(F=b-1,j=-1,H=-1),m){var $=w[W];for(l=F;l!==H;l+=j)if((x=d[l][$])&&(v=x.indexOf("y"),x.slice(0,v)===W)){I[W]=x.slice(v);break}}else for(l=F;l!==H;l+=j)if(c=a.yaxes[l],y.cartesian.indexOf(W+c)!==-1){I[W]=c;break}}else if(Q.charAt(0)==="l"?(F=0,j=1,H=f):(F=f-1,j=-1,H=-1),m){var K=w[W];for(l=F;l!==H;l+=j)if((x=d[K][l])&&(v=x.indexOf("y"),x.slice(v)===W)){I[W]=x.slice(0,v);break}}else for(l=F;l!==H;l+=j)if(h=a.xaxes[l],y.cartesian.indexOf(h+W)!==-1){I[W]=h;break}}}}}},65760:function(ee,R,e){var M=e(33816),k=e(31780).templatedArray;e(36208),ee.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(ee,R,e){var M=e(38248),k=e(36896);ee.exports=function(o,T,_,p){T=T||{};var s=_==="log"&&T.type==="linear",t=_==="linear"&&T.type==="log";if(s||t){for(var i,r,n=o._fullLayout.images,a=T._id.charAt(0),l=0;l<n.length;l++)if(r="images["+l+"].",(i=n[l])[a+"ref"]===T._id){var u=i[a],h=i["size"+a],c=null,x=null;if(s){c=k(u,T.range);var d=h/Math.pow(10,c)/2;x=2*Math.log(d+Math.sqrt(1+d*d))/Math.LN10}else x=(c=Math.pow(10,u))*(Math.pow(10,h/2)-Math.pow(10,-h/2));M(c)?M(x)||(x=null):(c=null,x=null),p(r+a,c),p(r+"size"+a,x)}}}},25024:function(ee,R,e){var M=e(3400),k=e(54460),o=e(51272),T=e(65760);function _(p,s,t){function i(c,x){return M.coerce(p,s,T,c,x)}var r=i("source");if(!i("visible",!!r))return s;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var n={_fullLayout:t},a=["x","y"],l=0;l<2;l++){var u=a[l],h=k.coerceRef(p,s,n,u,"paper",void 0);h!=="paper"&&k.getFromId(n,h)._imgIndices.push(s._index),k.coercePosition(s,n,i,h,u,0)}return s}ee.exports=function(p,s){o(p,s,{name:"images",handleItemDefaults:_})}},60963:function(ee,R,e){var M=e(33428),k=e(43616),o=e(54460),T=e(79811),_=e(9616);ee.exports=function(p){var s,t,i=p._fullLayout,r=[],n={},a=[];for(t=0;t<i.images.length;t++){var l=i.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){s=T.ref2id(l.xref)+T.ref2id(l.yref);var u=i._plots[s];if(!u){a.push(l);continue}u.mainplot&&(s=u.mainplot.id),n[s]||(n[s]=[]),n[s].push(l)}else l.layer==="above"?r.push(l):a.push(l)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(f){var S=M.select(this);if(this._imgSrc!==f.source)if(S.attr("xmlns",_.svg),f.source&&f.source.slice(0,5)==="data:")S.attr("xlink:href",f.source),this._imgSrc=f.source;else{var w=new Promise((function(E){var O=new Image;function C(){S.remove(),E()}this.img=O,O.setAttribute("crossOrigin","anonymous"),O.onerror=C,O.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var D=P.toDataURL("image/png");S.attr("xlink:href",D),E()},S.on("error",C),O.src=f.source,this._imgSrc=f.source}).bind(this));p._promises.push(w)}}function d(f){var S,w,E=M.select(this),O=o.getFromId(p,f.xref),C=o.getFromId(p,f.yref),P=o.getRefType(f.xref)==="domain",D=o.getRefType(f.yref)==="domain",U=i._size;S=O!==void 0?typeof f.xref=="string"&&P?O._length*f.sizex:Math.abs(O.l2p(f.sizex)-O.l2p(0)):f.sizex*U.w,w=C!==void 0?typeof f.yref=="string"&&D?C._length*f.sizey:Math.abs(C.l2p(f.sizey)-C.l2p(0)):f.sizey*U.h;var I,N,W=S*h[f.xanchor].offset,F=w*c[f.yanchor].offset,j=h[f.xanchor].sizing+c[f.yanchor].sizing;switch(I=O!==void 0?typeof f.xref=="string"&&P?O._length*f.x+O._offset:O.r2p(f.x)+O._offset:f.x*U.w+U.l,I+=W,N=C!==void 0?typeof f.yref=="string"&&D?C._length*(1-f.y)+C._offset:C.r2p(f.y)+C._offset:U.h-f.y*U.h+U.t,N+=F,f.sizing){case"fill":j+=" slice";break;case"stretch":j="none"}E.attr({x:I,y:N,width:S,height:w,preserveAspectRatio:j,opacity:f.opacity});var H=(O&&o.getRefType(f.xref)!=="domain"?O._id:"")+(C&&o.getRefType(f.yref)!=="domain"?C._id:"");k.setClipUrl(E,H?"clip"+i._uid+H:null,p)}var v=i._imageLowerLayer.selectAll("image").data(a),g=i._imageUpperLayer.selectAll("image").data(r);v.enter().append("image"),g.enter().append("image"),v.exit().remove(),g.exit().remove(),v.each(function(f){x.bind(this)(f),d.bind(this)(f)}),g.each(function(f){x.bind(this)(f),d.bind(this)(f)});var y=Object.keys(i._plots);for(t=0;t<y.length;t++){s=y[t];var m=i._plots[s];if(m.imagelayer){var b=m.imagelayer.selectAll("image").data(n[s]||[]);b.enter().append("image"),b.exit().remove(),b.each(function(f){x.bind(this)(f),d.bind(this)(f)})}}}},7402:function(ee,R,e){ee.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(ee,R,e){var M=e(25376),k=e(22548);ee.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(ee){ee.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(ee,R,e){var M=e(24040),k=e(3400),o=e(31780),T=e(45464),_=e(3800),p=e(64859),s=e(42451);function t(i,r,n,a){var l=r[i]||{},u=o.newContainer(n,i);function h(j,H){return k.coerce(l,u,_,j,H)}var c=k.coerceFont(h,"font",n.font);if(h("bgcolor",n.paper_bgcolor),h("bordercolor"),h("visible")){for(var x,d=function(j,H){var te=x._input,Q=x;return k.coerce(te,Q,T,j,H)},v=n.font||{},g=k.coerceFont(h,"grouptitlefont",v,{overrideDflt:{size:Math.round(1.1*v.size)}}),y=0,m=!1,b="normal",f=(n.shapes||[]).filter(function(j){return j.showlegend}),S=a.concat(f).filter(function(j){return i===(j.legend||"legend")}),w=0;w<S.length;w++)if((x=S[w]).visible){var E=x._isShape;(x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(y++,x.showlegend&&(m=!0,(!E&&M.traceIs(x,"pie-like")||x._input.showlegend===!0)&&y++),k.coerceFont(d,"legendgrouptitle.font",g)),(!E&&M.traceIs(x,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(b=s.isGrouped({traceorder:b})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(b=s.isReversed({traceorder:b})?"reversed+grouped":"grouped")}var O=k.coerce(r,n,p,"showlegend",m&&y>(i==="legend"?1:0));if(O===!1&&(n[i]=void 0),(O!==!1||l.uirevision)&&(h("uirevision",n.uirevision),O!==!1)){h("borderwidth");var C,P,D,U=h("orientation")==="h",I=h("yref")==="paper",N=h("xref")==="paper",W="left";if(U?(C=0,M.getComponentMethod("rangeslider","isVisible")(r.xaxis)?I?(P=1.1,D="bottom"):(P=1,D="top"):I?(P=-.1,D="top"):(P=0,D="bottom")):(P=1,D="auto",N?C=1.02:(C=1,W="right")),k.coerce(l,u,{x:{valType:"number",editType:"legend",min:N?-2:0,max:N?3:1,dflt:C}},"x"),k.coerce(l,u,{y:{valType:"number",editType:"legend",min:I?-2:0,max:I?3:1,dflt:P}},"y"),h("traceorder",b),s.isGrouped(n[i])&&h("tracegroupgap"),h("entrywidth"),h("entrywidthmode"),h("indentation"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("xanchor",W),h("yanchor",D),h("valign"),k.noneOrAll(l,u,["x","y"]),h("title.text")){h("title.side",U?"left":"top");var F=k.extendFlat({},c,{size:k.bigFont(c.size)});k.coerceFont(h,"title.font",F)}}}}ee.exports=function(i,r,n){var a,l=n.slice(),u=r.shapes;if(u)for(a=0;a<u.length;a++){var h=u[a];if(h.showlegend){var c={_input:h._input,visible:h.visible,showlegend:h.showlegend,legend:h.legend};l.push(c)}}var x=["legend"];for(a=0;a<l.length;a++)k.pushUnique(x,l[a].legend);for(r._legends=[],a=0;a<x.length;a++){var d=x[a];t(d,i,r,l),r[d]&&r[d].visible&&(r[d]._id=d),r._legends.push(d)}}},31140:function(ee,R,e){var M=e(33428),k=e(3400),o=e(7316),T=e(24040),_=e(95924),p=e(86476),s=e(43616),t=e(76308),i=e(72736),r=e(33048),n=e(65196),a=e(84284),l=a.LINE_SPACING,u=a.FROM_TL,h=a.FROM_BR,c=e(35456),x=e(2012),d=e(42451),v=1,g=/^legend[0-9]*$/;function y(D,U){var I,N,W=U||{},F=D._fullLayout,j=P(W),H=W._inHover;if(H?(N=W.layer,I="hover"):(N=F._infolayer,I=j),N){var te;if(I+=F._uid,D._legendMouseDownTime||(D._legendMouseDownTime=0),H){if(!W.entries)return;te=c(W.entries,W)}else{for(var Q=(D.calcdata||[]).slice(),$=F.shapes,K=0;K<$.length;K++){var X=$[K];if(X.showlegend){var Y={_isShape:!0,_fullInput:X,index:X._index,name:X.name||X.label.text||"shape "+X._index,legend:X.legend,legendgroup:X.legendgroup,legendgrouptitle:X.legendgrouptitle,legendrank:X.legendrank,legendwidth:X.legendwidth,showlegend:X.showlegend,visible:X.visible,opacity:X.opacity,mode:X.type==="line"?"lines":"markers",line:X.line,marker:{line:X.line,color:X.fillcolor,size:12,symbol:X.type==="rect"?"square":X.type==="circle"?"circle":"hexagon2"}};Q.push([{trace:Y}])}}te=F.showlegend&&c(Q,W,F._legends.length>1)}var re=F.hiddenlabels||[];if(!(H||F.showlegend&&te.length))return N.selectAll("."+j).remove(),F._topdefs.select("#"+I).remove(),o.autoMargin(D,j);var se=k.ensureSingle(N,"g",j,function(Pe){H||Pe.attr("pointer-events","all")}),ae=k.ensureSingleById(F._topdefs,"clipPath",I,function(Pe){Pe.append("rect")}),ce=k.ensureSingle(se,"rect","bg",function(Pe){Pe.attr("shape-rendering","crispEdges")});ce.call(t.stroke,W.bordercolor).call(t.fill,W.bgcolor).style("stroke-width",W.borderwidth+"px");var fe,he=k.ensureSingle(se,"g","scrollbox"),ve=W.title;W._titleWidth=0,W._titleHeight=0,ve.text?((fe=k.ensureSingle(he,"text",j+"titletext")).attr("text-anchor","start").call(s.font,ve.font).text(ve.text),E(fe,he,D,W,v)):he.selectAll("."+j+"titletext").remove();var ye=k.ensureSingle(se,"rect","scrollbar",function(Pe){Pe.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),me=he.selectAll("g.groups").data(te);me.enter().append("g").attr("class","groups"),me.exit().remove();var Me=me.selectAll("g.traces").data(k.identity);Me.enter().append("g").attr("class","traces"),Me.exit().remove(),Me.style("opacity",function(Pe){var ge=Pe[0].trace;return T.traceIs(ge,"pie-like")?re.indexOf(Pe[0].label)!==-1?.5:1:ge.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(f,D,W)}).call(x,D,W).each(function(){H||M.select(this).call(w,D,j)}),k.syncOrAsync([o.previousPromises,function(){return function(Pe,ge,oe,ie){var de=Pe._fullLayout,Se=P(ie);ie||(ie=de[Se]);var _e=de._size,we=d.isVertical(ie),Ae=d.isGrouped(ie),Oe=ie.entrywidthmode==="fraction",ze=ie.borderwidth,pe=2*ze,be=n.itemGap,ke=ie.indentation+ie.itemwidth+2*be,Ie=2*(ze+be),Ee=C(ie),Be=ie.y<0||ie.y===0&&Ee==="top",Ve=ie.y>1||ie.y===1&&Ee==="bottom",Ze=ie.tracegroupgap,rt={};ie._maxHeight=Math.max(Be||Ve?de.height/2:_e.h,30);var it=0;ie._width=0,ie._height=0;var dt=function(pt){var gt=0,ut=0,kt=pt.title.side;return kt&&(kt.indexOf("left")!==-1&&(gt=pt._titleWidth),kt.indexOf("top")!==-1&&(ut=pt._titleHeight)),[gt,ut]}(ie);if(we)oe.each(function(pt){var gt=pt[0].height;s.setTranslate(this,ze+dt[0],ze+dt[1]+ie._height+gt/2+be),ie._height+=gt,ie._width=Math.max(ie._width,pt[0].width)}),it=ke+ie._width,ie._width+=be+ke+pe,ie._height+=Ie,Ae&&(ge.each(function(pt,gt){s.setTranslate(this,0,gt*ie.tracegroupgap)}),ie._height+=(ie._lgroupsLength-1)*ie.tracegroupgap);else{var vt=O(ie),ht=ie.x<0||ie.x===0&&vt==="right",Qe=ie.x>1||ie.x===1&&vt==="left",Je=Ve||Be,Tt=de.width/2;ie._maxWidth=Math.max(ht?Je&&vt==="left"?_e.l+_e.w:Tt:Qe?Je&&vt==="right"?_e.r+_e.w:Tt:_e.w,2*ke);var Ot=0,Pt=0;oe.each(function(pt){var gt=m(pt,ie,ke);Ot=Math.max(Ot,gt),Pt+=gt}),it=null;var Mt=0;if(Ae){var He=0,Ye=0,Ne=0;ge.each(function(){var pt=0,gt=0;M.select(this).selectAll("g.traces").each(function(kt){var mt=m(kt,ie,ke),At=kt[0].height;s.setTranslate(this,dt[0],dt[1]+ze+be+At/2+gt),gt+=At,pt=Math.max(pt,mt),rt[kt[0].trace.legendgroup]=pt});var ut=pt+be;Ye>0&&ut+ze+Ye>ie._maxWidth?(Mt=Math.max(Mt,Ye),Ye=0,Ne+=He+Ze,He=gt):He=Math.max(He,gt),s.setTranslate(this,Ye,Ne),Ye+=ut}),ie._width=Math.max(Mt,Ye)+ze,ie._height=Ne+He+Ie}else{var We=oe.size(),ot=Pt+pe+(We-1)*be<ie._maxWidth,tt=0,Re=0,Fe=0,nt=0;oe.each(function(pt){var gt=pt[0].height,ut=m(pt,ie,ke),kt=ot?ut:Ot;Oe||(kt+=be),kt+ze+Re-be>=ie._maxWidth&&(Mt=Math.max(Mt,nt),Re=0,Fe+=tt,ie._height+=tt,tt=0),s.setTranslate(this,dt[0]+ze+Re,dt[1]+ze+Fe+gt/2+be),nt=Re+ut+be,Re+=kt,tt=Math.max(tt,gt)}),ot?(ie._width=Re+pe,ie._height=tt+Ie):(ie._width=Math.max(Mt,nt)+pe,ie._height+=tt+Ie)}}ie._width=Math.ceil(Math.max(ie._width+dt[0],ie._titleWidth+2*(ze+n.titlePad))),ie._height=Math.ceil(Math.max(ie._height+dt[1],ie._titleHeight+2*(ze+n.itemGap))),ie._effHeight=Math.min(ie._height,ie._maxHeight);var Ge=Pe._context.edits,ct=Ge.legendText||Ge.legendPosition;oe.each(function(pt){var gt=M.select(this).select("."+Se+"toggle"),ut=pt[0].height,kt=pt[0].trace.legendgroup,mt=m(pt,ie,ke);Ae&&kt!==""&&(mt=rt[kt]);var At=ct?ke:it||mt;we||Oe||(At+=be/2),s.setRect(gt,0,-ut/2,At,ut)})}(D,me,Me,W)},function(){var Pe,ge,oe,ie,de=F._size,Se=W.borderwidth,_e=W.xref==="paper",we=W.yref==="paper";if(ve.text&&function(Je,Tt,Ot){if(Tt.title.side==="top center"||Tt.title.side==="top right"){var Pt=Tt.title.font.size*l,Mt=0,He=Je.node(),Ye=s.bBox(He).width;Tt.title.side==="top center"?Mt=.5*(Tt._width-2*Ot-2*n.titlePad-Ye):Tt.title.side==="top right"&&(Mt=Tt._width-2*Ot-2*n.titlePad-Ye),i.positionText(Je,Ot+n.titlePad+Mt,Ot+Pt)}}(fe,W,Se),!H){var Ae,Oe;Ae=_e?de.l+de.w*W.x-u[O(W)]*W._width:F.width*W.x-u[O(W)]*W._width,Oe=we?de.t+de.h*(1-W.y)-u[C(W)]*W._effHeight:F.height*(1-W.y)-u[C(W)]*W._effHeight;var ze=function(Je,Tt,Ot,Pt){var Mt=Je._fullLayout,He=Mt[Tt],Ye=O(He),Ne=C(He),We=He.xref==="paper",ot=He.yref==="paper";Je._fullLayout._reservedMargin[Tt]={};var tt=He.y<.5?"b":"t",Re=He.x<.5?"l":"r",Fe={r:Mt.width-Ot,l:Ot+He._width,b:Mt.height-Pt,t:Pt+He._effHeight};if(We&&ot)return o.autoMargin(Je,Tt,{x:He.x,y:He.y,l:He._width*u[Ye],r:He._width*h[Ye],b:He._effHeight*h[Ne],t:He._effHeight*u[Ne]});We?Je._fullLayout._reservedMargin[Tt][tt]=Fe[tt]:ot||He.orientation==="v"?Je._fullLayout._reservedMargin[Tt][Re]=Fe[Re]:Je._fullLayout._reservedMargin[Tt][tt]=Fe[tt]}(D,j,Ae,Oe);if(ze)return;if(F.margin.autoexpand){var pe=Ae,be=Oe;Ae=_e?k.constrain(Ae,0,F.width-W._width):pe,Oe=we?k.constrain(Oe,0,F.height-W._effHeight):be,Ae!==pe&&k.log("Constrain "+j+".x to make legend fit inside graph"),Oe!==be&&k.log("Constrain "+j+".y to make legend fit inside graph")}s.setTranslate(se,Ae,Oe)}if(ye.on(".drag",null),se.on("wheel",null),H||W._height<=W._maxHeight||D._context.staticPlot){var ke=W._effHeight;H&&(ke=W._height),ce.attr({width:W._width-Se,height:ke-Se,x:Se/2,y:Se/2}),s.setTranslate(he,0,0),ae.select("rect").attr({width:W._width-2*Se,height:ke-2*Se,x:Se,y:Se}),s.setClipUrl(he,I,D),s.setRect(ye,0,0,0,0),delete W._scrollY}else{var Ie,Ee,Be,Ve=Math.max(n.scrollBarMinHeight,W._effHeight*W._effHeight/W._height),Ze=W._effHeight-Ve-2*n.scrollBarMargin,rt=W._height-W._effHeight,it=Ze/rt,dt=Math.min(W._scrollY||0,rt);ce.attr({width:W._width-2*Se+n.scrollBarWidth+n.scrollBarMargin,height:W._effHeight-Se,x:Se/2,y:Se/2}),ae.select("rect").attr({width:W._width-2*Se+n.scrollBarWidth+n.scrollBarMargin,height:W._effHeight-2*Se,x:Se,y:Se+dt}),s.setClipUrl(he,I,D),Qe(dt,Ve,it),se.on("wheel",function(){Qe(dt=k.constrain(W._scrollY+M.event.deltaY/Ze*rt,0,rt),Ve,it),dt!==0&&dt!==rt&&M.event.preventDefault()});var vt=M.behavior.drag().on("dragstart",function(){var Je=M.event.sourceEvent;Ie=Je.type==="touchstart"?Je.changedTouches[0].clientY:Je.clientY,Be=dt}).on("drag",function(){var Je=M.event.sourceEvent;Je.buttons===2||Je.ctrlKey||(Ee=Je.type==="touchmove"?Je.changedTouches[0].clientY:Je.clientY,dt=function(Tt,Ot,Pt){var Mt=(Pt-Ot)/it+Tt;return k.constrain(Mt,0,rt)}(Be,Ie,Ee),Qe(dt,Ve,it))});ye.call(vt);var ht=M.behavior.drag().on("dragstart",function(){var Je=M.event.sourceEvent;Je.type==="touchstart"&&(Ie=Je.changedTouches[0].clientY,Be=dt)}).on("drag",function(){var Je=M.event.sourceEvent;Je.type==="touchmove"&&(Ee=Je.changedTouches[0].clientY,dt=function(Tt,Ot,Pt){var Mt=(Ot-Pt)/it+Tt;return k.constrain(Mt,0,rt)}(Be,Ie,Ee),Qe(dt,Ve,it))});he.call(ht)}function Qe(Je,Tt,Ot){W._scrollY=D._fullLayout[j]._scrollY=Je,s.setTranslate(he,0,-Je),s.setRect(ye,W._width,n.scrollBarMargin+Je*Ot,n.scrollBarWidth,Tt),ae.select("rect").attr("y",Se+Je)}D._context.edits.legendPosition&&(se.classed("cursor-move",!0),p.init({element:se.node(),gd:D,prepFn:function(Je){if(Je.target!==ye.node()){var Tt=s.getTranslate(se);oe=Tt.x,ie=Tt.y}},moveFn:function(Je,Tt){if(oe!==void 0&&ie!==void 0){var Ot=oe+Je,Pt=ie+Tt;s.setTranslate(se,Ot,Pt),Pe=p.align(Ot,W._width,de.l,de.l+de.w,W.xanchor),ge=p.align(Pt+W._height,-W._height,de.t+de.h,de.t,W.yanchor)}},doneFn:function(){if(Pe!==void 0&&ge!==void 0){var Je={};Je[j+".x"]=Pe,Je[j+".y"]=ge,T.call("_guiRelayout",D,Je)}},clickFn:function(Je,Tt){var Ot=N.selectAll("g.traces").filter(function(){var Pt=this.getBoundingClientRect();return Tt.clientX>=Pt.left&&Tt.clientX<=Pt.right&&Tt.clientY>=Pt.top&&Tt.clientY<=Pt.bottom});Ot.size()>0&&b(D,se,Ot,Je,Tt)}}))}],D)}}function m(D,U,I){var N=D[0],W=N.width,F=U.entrywidthmode,j=N.trace.legendwidth||U.entrywidth;return F==="fraction"?U._maxWidth*j:I+(j||W)}function b(D,U,I,N,W){var F=I.data()[0][0].trace,j={event:W,node:I.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};F._group&&(j.group=F._group),T.traceIs(F,"pie-like")&&(j.label=I.datum()[0].label);var H=_.triggerHandler(D,"plotly_legendclick",j);if(N===1){if(H===!1)return;U._clickTimeout=setTimeout(function(){D._fullLayout&&r(I,D,N)},D._context.doubleClickDelay)}else N===2&&(U._clickTimeout&&clearTimeout(U._clickTimeout),D._legendMouseDownTime=0,_.triggerHandler(D,"plotly_legenddoubleclick",j)!==!1&&H!==!1&&r(I,D,N))}function f(D,U,I){var N,W,F=P(I),j=D.data()[0][0],H=j.trace,te=T.traceIs(H,"pie-like"),Q=!I._inHover&&U._context.edits.legendText&&!te,$=I._maxNameLength;j.groupTitle?(N=j.groupTitle.text,W=j.groupTitle.font):(W=I.font,I.entries?N=j.text:(N=te?j.label:H.name,H._meta&&(N=k.templateString(N,H._meta))));var K=k.ensureSingle(D,"text",F+"text");K.attr("text-anchor","start").call(s.font,W).text(Q?S(N,$):N);var X=I.indentation+I.itemwidth+2*n.itemGap;i.positionText(K,X,0),Q?K.call(i.makeEditable,{gd:U,text:N}).call(E,D,U,I).on("edit",function(Y){this.text(S(Y,$)).call(E,D,U,I);var re=j.trace._fullInput||{},se={};if(T.hasTransform(re,"groupby")){var ae=T.getTransformIndices(re,"groupby"),ce=ae[ae.length-1],fe=k.keyedContainer(re,"transforms["+ce+"].styles","target","value.name");fe.set(j.trace._group,Y),se=fe.constructUpdate()}else se.name=Y;return re._isShape?T.call("_guiRelayout",U,"shapes["+H.index+"].name",se.name):T.call("_guiRestyle",U,se,H.index)}):E(K,D,U,I)}function S(D,U){var I=Math.max(4,U);if(D&&D.trim().length>=I/2)return D;for(var N=I-(D=D||"").length;N>0;N--)D+=" ";return D}function w(D,U,I){var N,W=U._context.doubleClickDelay,F=1,j=k.ensureSingle(D,"rect",I+"toggle",function(H){U._context.staticPlot||H.style("cursor","pointer").attr("pointer-events","all"),H.call(t.fill,"rgba(0,0,0,0)")});U._context.staticPlot||(j.on("mousedown",function(){(N=new Date().getTime())-U._legendMouseDownTime<W?F+=1:(F=1,U._legendMouseDownTime=N)}),j.on("mouseup",function(){if(!U._dragged&&!U._editing){var H=U._fullLayout[I];new Date().getTime()-U._legendMouseDownTime>W&&(F=Math.max(F-1,1)),b(U,H,D,F,M.event)}}))}function E(D,U,I,N,W){N._inHover&&D.attr("data-notex",!0),i.convertToTspans(D,I,function(){(function(F,j,H,te){var Q=F.data()[0][0];if(H._inHover||!Q||Q.trace.showlegend){var $=F.select("g[class*=math-group]"),K=$.node(),X=P(H);H||(H=j._fullLayout[X]);var Y,re,se=H.borderwidth,ae=(te===v?H.title.font:Q.groupTitle?Q.groupTitle.font:H.font).size*l;if(K){var ce=s.bBox(K);Y=ce.height,re=ce.width,te===v?s.setTranslate($,se,se+.75*Y):s.setTranslate($,0,.25*Y)}else{var fe="."+X+(te===v?"title":"")+"text",he=F.select(fe),ve=i.lineCount(he),ye=he.node();if(Y=ae*ve,re=ye?s.bBox(ye).width:0,te===v)H.title.side==="left"&&(re+=2*n.itemGap),i.positionText(he,se+n.titlePad,se+ae);else{var me=2*n.itemGap+H.indentation+H.itemwidth;Q.groupTitle&&(me=n.itemGap,re-=H.indentation+H.itemwidth),i.positionText(he,me,-ae*((ve-1)/2-.3))}}te===v?(H._titleWidth=re,H._titleHeight=Y):(Q.lineHeight=ae,Q.height=Math.max(Y,16)+3,Q.width=re)}else F.remove()})(U,I,N,W)})}function O(D){return k.isRightAnchor(D)?"right":k.isCenterAnchor(D)?"center":"left"}function C(D){return k.isBottomAnchor(D)?"bottom":k.isMiddleAnchor(D)?"middle":"top"}function P(D){return D._id||"legend"}ee.exports=function(D,U){if(U)y(D,U);else{var I=D._fullLayout,N=I._legends;I._infolayer.selectAll('[class^="legend"]').each(function(){var j=M.select(this),H=j.attr("class").split(" ")[0];H.match(g)&&N.indexOf(H)===-1&&j.remove()});for(var W=0;W<N.length;W++){var F=N[W];y(D,D._fullLayout[F])}}}},35456:function(ee,R,e){var M=e(24040),k=e(42451);ee.exports=function(o,T,_){var p,s,t=T._inHover,i=k.isGrouped(T),r=k.isReversed(T),n={},a=[],l=!1,u={},h=0,c=0;function x(N,W,F){if(T.visible!==!1&&(!_||N===T._id))if(W!==""&&k.isGrouped(T))a.indexOf(W)===-1?(a.push(W),l=!0,n[W]=[F]):n[W].push(F);else{var j="~~i"+h;a.push(j),n[j]=[F],h++}}for(p=0;p<o.length;p++){var d=o[p],v=d[0],g=v.trace,y=g.legend,m=g.legendgroup;if(t||g.visible&&g.showlegend)if(M.traceIs(g,"pie-like"))for(u[m]||(u[m]={}),s=0;s<d.length;s++){var b=d[s].label;u[m][b]||(x(y,m,{label:b,color:d[s].color,i:d[s].i,trace:g,pts:d[s].pts}),u[m][b]=!0,c=Math.max(c,(b||"").length))}else x(y,m,v),c=Math.max(c,(g.name||"").length)}if(!a.length)return[];var f=!l||!i,S=[];for(p=0;p<a.length;p++){var w=n[a[p]];f?S.push(w[0]):S.push(w)}for(f&&(S=[S]),p=0;p<S.length;p++){var E=1/0;for(s=0;s<S[p].length;s++){var O=S[p][s].trace.legendrank;E>O&&(E=O)}S[p][0]._groupMinRank=E,S[p][0]._preGroupSort=p}var C=function(N,W){return N.trace.legendrank-W.trace.legendrank||N._preSort-W._preSort};for(S.forEach(function(N,W){N[0]._preGroupSort=W}),S.sort(function(N,W){return N[0]._groupMinRank-W[0]._groupMinRank||N[0]._preGroupSort-W[0]._preGroupSort}),p=0;p<S.length;p++){S[p].forEach(function(N,W){N._preSort=W}),S[p].sort(C);var P=S[p][0].trace,D=null;for(s=0;s<S[p].length;s++){var U=S[p][s].trace.legendgrouptitle;if(U&&U.text){D=U,t&&(U.font=T._groupTitleFont);break}}if(r&&S[p].reverse(),D){var I=!1;for(s=0;s<S[p].length;s++)if(M.traceIs(S[p][s].trace,"pie-like")){I=!0;break}S[p].unshift({i:-1,groupTitle:D,noClick:I,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:T.groupclick==="toggleitem"||P.visible}})}for(s=0;s<S[p].length;s++)S[p][s]=[S[p][s]]}return T._lgroupsLength=S.length,T._maxNameLength=c,S}},33048:function(ee,R,e){var M=e(24040),k=e(3400),o=k.pushUnique,T=!0;ee.exports=function(_,p,s){var t=p._fullLayout;if(!p._dragged&&!p._editing){var i,r=t.legend.itemclick,n=t.legend.itemdoubleclick,a=t.legend.groupclick;if(s===1&&r==="toggle"&&n==="toggleothers"&&T&&p.data&&p._context.showTips&&k.notifier(k._(p,"Double-click on legend to isolate one trace"),"long"),T=!1,s===1?i=r:s===2&&(i=n),i){var l=a==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],h=_.data()[0][0];if(!h.groupTitle||!h.noClick){var c=p._fullData,x=(t.shapes||[]).filter(function(ge){return ge.showlegend}),d=c.concat(x),v=h.trace;v._isShape&&(v=v._fullInput);var g,y,m,b,f,S=v.legendgroup,w={},E=[],O=[],C=[],P=(t.shapes||[]).map(function(ge){return ge._input}),D=!1,U=v.legend,I=v._fullInput;if(I&&I._isShape||!M.traceIs(v,"pie-like")){var N,W=S&&S.length,F=[];if(W)for(g=0;g<d.length;g++)(N=d[g]).visible&&N.legendgroup===S&&F.push(g);if(i==="toggle"){var j;switch(v.visible){case!0:j="legendonly";break;case!1:j=!1;break;case"legendonly":j=!0}if(W)if(l)for(g=0;g<d.length;g++){var H=d[g];H.visible!==!1&&H.legendgroup===S&&Pe(H,j)}else Pe(v,j);else Pe(v,j)}else if(i==="toggleothers"){var te,Q,$,K,X=!0;for(g=0;g<d.length;g++)if(te=(K=d[g])===v,Q=K.showlegend!==!0,!(te||Q||W&&K.legendgroup===S||K.legend!==U||K.visible!==!0||M.traceIs(K,"notLegendIsolatable"))){X=!1;break}for(g=0;g<d.length;g++)if((K=d[g]).visible!==!1&&K.legend===U&&!M.traceIs(K,"notLegendIsolatable"))switch(v.visible){case"legendonly":Pe(K,!0);break;case!0:$=!!X||"legendonly",te=K===v,Q=K.showlegend!==!0&&!K.legendgroup,Pe(K,!!(te||W&&K.legendgroup===S||Q)||$)}}for(g=0;g<O.length;g++)if(m=O[g]){var Y=m.constructUpdate(),re=Object.keys(Y);for(y=0;y<re.length;y++)b=re[y],(w[b]=w[b]||[])[C[g]]=Y[b]}for(f=Object.keys(w),g=0;g<f.length;g++)for(b=f[g],y=0;y<E.length;y++)w[b].hasOwnProperty(y)||(w[b][y]=void 0);D?M.call("_guiUpdate",p,w,{shapes:P},E):M.call("_guiRestyle",p,w,E)}else{var se=h.label,ae=u.indexOf(se);if(i==="toggle")ae===-1?u.push(se):u.splice(ae,1);else if(i==="toggleothers"){var ce=ae!==-1,fe=[];for(g=0;g<p.calcdata.length;g++){var he=p.calcdata[g];for(y=0;y<he.length;y++){var ve=he[y].label;U===he[0].trace.legend&&se!==ve&&(u.indexOf(ve)===-1&&(ce=!0),o(u,ve),fe.push(ve))}}if(!ce)for(var ye=0;ye<fe.length;ye++){var me=u.indexOf(fe[ye]);me!==-1&&u.splice(me,1)}}M.call("_guiRelayout",p,"hiddenlabels",u)}}}}function Me(ge,oe){var ie=E.indexOf(ge),de=w.visible;return de||(de=w.visible=[]),E.indexOf(ge)===-1&&(E.push(ge),ie=E.length-1),de[ie]=oe,ie}function Pe(ge,oe){if(!h.groupTitle||l){var ie,de=ge._fullInput||ge,Se=de._isShape,_e=de.index;if(_e===void 0&&(_e=de._index),M.hasTransform(de,"groupby")){var we=O[_e];if(!we){var Ae=M.getTransformIndices(de,"groupby"),Oe=Ae[Ae.length-1];we=k.keyedContainer(de,"transforms["+Oe+"].styles","target","value.visible"),O[_e]=we}var ze=we.get(ge._group);ze===void 0&&(ze=!0),ze!==!1&&we.set(ge._group,oe),C[_e]=Me(_e,de.visible!==!1)}else{var pe=de.visible!==!1&&oe;Se?(ie=pe,P[_e].visible=ie,D=!0):Me(_e,pe)}}}}},42451:function(ee,R){R.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},R.isVertical=function(e){return e.orientation!=="h"},R.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(ee,R,e){ee.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(ee,R,e){var M=e(33428),k=e(24040),o=e(3400),T=o.strTranslate,_=e(43616),p=e(76308),s=e(94288).extractOpts,t=e(43028),i=e(10528),r=e(69656).castOption,n=e(65196);function a(h,c){return(c?"radial":"horizontal")+(h?"":"reversed")}function l(h){var c=h[0].trace,x=c.contours,d=t.hasLines(c),v=t.hasMarkers(c),g=c.visible&&c.fill&&c.fill!=="none",y=!1,m=!1;if(x){var b=x.coloring;b==="lines"?y=!0:d=b==="none"||b==="heatmap"||x.showlines,x.type==="constraint"?g=x._operation!=="=":b!=="fill"&&b!=="heatmap"||(m=!0)}return{showMarker:v,showLine:d,showFill:g,showGradientLine:y,showGradientFill:m,anyLine:d||y,anyFill:g||m}}function u(h,c,x){return h&&o.isArrayOrTypedArray(h)?c:h>x?x:h}ee.exports=function(h,c,x){var d=c._fullLayout;x||(x=d.legend);var v=x.itemsizing==="constant",g=x.itemwidth,y=(g+2*n.itemGap)/2,m=T(y,0),b=function(w,E,O,C){var P;if(w+1)P=w;else{if(!(E&&E.width>0))return 0;P=E.width}return v?C:Math.min(P,O)};function f(w,E,O){var C=w[0].trace,P=C.marker||{},D=P.line||{},U=P.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",I=O?C.visible&&C.type===O:k.traceIs(C,"bar"),N=M.select(E).select("g.legendpoints").selectAll("path.legend"+O).data(I?[w]:[]);N.enter().append("path").classed("legend"+O,!0).attr("d",U).attr("transform",m),N.exit().remove(),N.each(function(W){var F=M.select(this),j=W[0],H=b(j.mlw,P.line,5,2);F.style("stroke-width",H+"px");var te=j.mcc;if(!x._inHover&&"mc"in j){var Q=s(P),$=Q.mid;$===void 0&&($=(Q.max+Q.min)/2),te=_.tryColorscale(P,"")($)}var K=te||j.mc||P.color,X=P.pattern,Y=X&&_.getPatternAttr(X.shape,0,"");if(Y){var re=_.getPatternAttr(X.bgcolor,0,null),se=_.getPatternAttr(X.fgcolor,0,null),ae=X.fgopacity,ce=u(X.size,8,10),fe=u(X.solidity,.5,1),he="legend-"+C.uid;F.call(_.pattern,"legend",c,he,Y,ce,fe,te,X.fillmode,re,se,ae)}else F.call(p.fill,K);H&&p.stroke(F,j.mlc||D.color)})}function S(w,E,O){var C=w[0],P=C.trace,D=O?P.visible&&P.type===O:k.traceIs(P,O),U=M.select(E).select("g.legendpoints").selectAll("path.legend"+O).data(D?[w]:[]);if(U.enter().append("path").classed("legend"+O,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),U.exit().remove(),U.size()){var I=P.marker||{},N=b(r(I.line.width,C.pts),I.line,5,2),W="pieLike",F=o.minExtend(P,{marker:{line:{width:N}}},W),j=o.minExtend(C,{trace:F},W);i(U,j,F,c)}}h.each(function(w){var E=M.select(this),O=o.ensureSingle(E,"g","layers");O.style("opacity",w[0].trace.opacity);var C=x.indentation,P=x.valign,D=w[0].lineHeight,U=w[0].height;if(P==="middle"&&C===0||!D||!U)O.attr("transform",null);else{var I={top:1,bottom:-1}[P]*(.5*(D-U+3))||0,N=x.indentation;O.attr("transform",T(N,I))}O.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),O.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var W=O.selectAll("g.legendsymbols").data([w]);W.enter().append("g").classed("legendsymbols",!0),W.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,O=w[0].trace,C=[];if(O.visible)switch(O.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(D,U){var I,N=M.select(this),W=s(O),F=W.colorscale,j=W.reversescale;if(F){if(!E){var H=F.length;I=U===0?F[j?H-1:0][1]:U===1?F[j?0:H-1][1]:F[Math.floor((H-1)/2)][1]}}else{var te=O.vertexcolor||O.facecolor||O.color;I=o.isArrayOrTypedArray(te)?te[U]||te[0]:te}N.attr("d",D[0]),I?N.call(p.fill,I):N.call(function(Q){if(Q.size()){var $="legendfill-"+O.uid;_.gradient(Q,c,$,a(j,E==="radial"),F,"fill")}})})}).each(function(w){var E=w[0].trace,O=E.type==="waterfall";if(w[0]._distinct&&O){var C=w[0].trace[w[0].dir].marker;return w[0].mc=C.color,w[0].mlw=C.line.width,w[0].mlc=C.line.color,f(w,this,"waterfall")}var P=[];E.visible&&O&&(P=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var D=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);D.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(U){var I=M.select(this),N=E[U[0]].marker,W=b(void 0,N.line,5,2);I.attr("d",U[1]).style("stroke-width",W+"px").call(p.fill,N.color),W&&I.call(p.stroke,N.line.color)})}).each(function(w){f(w,this,"funnel")}).each(function(w){f(w,this)}).each(function(w){var E=w[0].trace,O=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);O.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),O.exit().remove(),O.each(function(){var C=M.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||p.opacity(E.fillcolor)!==0||p.opacity((E.line||{}).color)!==0){var P=b(void 0,E.line,5,2);C.style("stroke-width",P+"px").call(p.fill,E.fillcolor),P&&p.stroke(C,E.line.color)}else{var D=o.minExtend(E,{marker:{size:v?12:o.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});O.call(_.pointStyle,D,c)}})}).each(function(w){S(w,this,"funnelarea")}).each(function(w){S(w,this,"pie")}).each(function(w){var E,O,C=l(w),P=C.showFill,D=C.showLine,U=C.showGradientLine,I=C.showGradientFill,N=C.anyFill,W=C.anyLine,F=w[0],j=F.trace,H=s(j),te=H.colorscale,Q=H.reversescale,$=t.hasMarkers(j)||!N?"M5,0":W?"M5,-2":"M5,-3",K=M.select(this),X=K.select(".legendfill").selectAll("path").data(P||I?[w]:[]);if(X.enter().append("path").classed("js-fill",!0),X.exit().remove(),X.attr("d",$+"h"+g+"v6h-"+g+"z").call(function(se){if(se.size())if(P)_.fillGroupStyle(se,c,!0);else{var ae="legendfill-"+j.uid;_.gradient(se,c,ae,a(Q),te,"fill")}}),D||U){var Y=b(void 0,j.line,10,5);O=o.minExtend(j,{line:{width:Y}}),E=[o.minExtend(F,{trace:O})]}var re=K.select(".legendlines").selectAll("path").data(D||U?[E]:[]);re.enter().append("path").classed("js-line",!0),re.exit().remove(),re.attr("d",$+(U?"l"+g+",0.0001":"h"+g)).call(D?_.lineGroupStyle:function(se){if(se.size()){var ae="legendline-"+j.uid;_.lineGroupStyle(se),_.gradient(se,c,ae,a(Q),te,"stroke")}})}).each(function(w){var E,O,C=l(w),P=C.anyFill,D=C.anyLine,U=C.showLine,I=C.showMarker,N=w[0],W=N.trace,F=!I&&!D&&!P&&t.hasText(W);function j(re,se,ae,ce){var fe=o.nestedProperty(W,re).get(),he=o.isArrayOrTypedArray(fe)&&se?se(fe):fe;if(v&&he&&ce!==void 0&&(he=ce),ae){if(he<ae[0])return ae[0];if(he>ae[1])return ae[1]}return he}function H(re){return N._distinct&&N.index&&re[N.index]?re[N.index]:re[0]}if(I||F||U){var te={},Q={};if(I){te.mc=j("marker.color",H),te.mx=j("marker.symbol",H),te.mo=j("marker.opacity",o.mean,[.2,1]),te.mlc=j("marker.line.color",H),te.mlw=j("marker.line.width",o.mean,[0,5],2),Q.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var $=j("marker.size",o.mean,[2,16],12);te.ms=$,Q.marker.size=$}U&&(Q.line={width:j("line.width",H,[0,10],5)}),F&&(te.tx="Aa",te.tp=j("textposition",H),te.ts=10,te.tc=j("textfont.color",H),te.tf=j("textfont.family",H),te.tw=j("textfont.weight",H),te.ty=j("textfont.style",H),te.tv=j("textfont.variant",H),te.tC=j("textfont.textcase",H),te.tE=j("textfont.lineposition",H),te.tS=j("textfont.shadow",H)),E=[o.minExtend(N,te)],(O=o.minExtend(W,Q)).selectedpoints=null,O.texttemplate=null}var K=M.select(this).select("g.legendpoints"),X=K.selectAll("path.scatterpts").data(I?E:[]);X.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),X.exit().remove(),X.call(_.pointStyle,O,c),I&&(E[0].mrc=3);var Y=K.selectAll("g.pointtext").data(F?E:[]);Y.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),Y.exit().remove(),Y.selectAll("text").call(_.textPointStyle,O,c)}).each(function(w){var E=w[0].trace,O=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[w,w]:[]);O.enter().append("path").classed("legendcandle",!0).attr("d",function(C,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(C,P){var D=M.select(this),U=E[P?"increasing":"decreasing"],I=b(void 0,U.line,5,2);D.style("stroke-width",I+"px").call(p.fill,U.fillcolor),I&&p.stroke(D,U.line.color)})}).each(function(w){var E=w[0].trace,O=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[w,w]:[]);O.enter().append("path").classed("legendohlc",!0).attr("d",function(C,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(C,P){var D=M.select(this),U=E[P?"increasing":"decreasing"],I=b(void 0,U.line,5,2);D.style("fill","none").call(_.dashLine,U.line.dash,I),I&&p.stroke(D,U.line.color)})})}},66540:function(ee,R,e){e(76052),ee.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(ee,R,e){var M=e(24040),k=e(7316),o=e(79811),T=e(9224),_=e(4016).eraseActiveShape,p=e(3400),s=p._,t=ee.exports={};function i(d,v){var g,y,m=v.currentTarget,b=m.getAttribute("data-attr"),f=m.getAttribute("data-val")||!0,S=d._fullLayout,w={},E=o.list(d,null,!0),O=S._cartesianSpikesEnabled;if(b==="zoom"){var C,P=f==="in"?.5:2,D=(1+P)/2,U=(1-P)/2;for(y=0;y<E.length;y++)if(!(g=E[y]).fixedrange)if(C=g._name,f==="auto")w[C+".autorange"]=!0;else if(f==="reset")g._rangeInitial0===void 0&&g._rangeInitial1===void 0?w[C+".autorange"]=!0:g._rangeInitial0===void 0?(w[C+".autorange"]=g._autorangeInitial,w[C+".range"]=[null,g._rangeInitial1]):g._rangeInitial1===void 0?(w[C+".range"]=[g._rangeInitial0,null],w[C+".autorange"]=g._autorangeInitial):w[C+".range"]=[g._rangeInitial0,g._rangeInitial1],g._showSpikeInitial!==void 0&&(w[C+".showspikes"]=g._showSpikeInitial,O!=="on"||g._showSpikeInitial||(O="off"));else{var I=[g.r2l(g.range[0]),g.r2l(g.range[1])],N=[D*I[0]+U*I[1],D*I[1]+U*I[0]];w[C+".range[0]"]=g.l2r(N[0]),w[C+".range[1]"]=g.l2r(N[1])}}else b!=="hovermode"||f!=="x"&&f!=="y"||(f=S._isHoriz?"y":"x",m.setAttribute("data-val",f)),w[b]=f;S._cartesianSpikesEnabled=O,M.call("_guiRelayout",d,w)}function r(d,v){for(var g=v.currentTarget,y=g.getAttribute("data-attr"),m=g.getAttribute("data-val")||!0,b=d._fullLayout._subplots.gl3d||[],f={},S=y.split("."),w=0;w<b.length;w++)f[b[w]+"."+S[1]]=m;var E=m==="pan"?m:"zoom";f.dragmode=E,M.call("_guiRelayout",d,f)}function n(d,v){for(var g=v.currentTarget.getAttribute("data-attr"),y=g==="resetLastSave",m=g==="resetDefault",b=d._fullLayout,f=b._subplots.gl3d||[],S={},w=0;w<f.length;w++){var E,O=f[w],C=O+".camera",P=O+".aspectratio",D=O+".aspectmode",U=b[O]._scene;y?(S[C+".up"]=U.viewInitial.up,S[C+".eye"]=U.viewInitial.eye,S[C+".center"]=U.viewInitial.center,E=!0):m&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[P+".x"]=U.viewInitial.aspectratio.x,S[P+".y"]=U.viewInitial.aspectratio.y,S[P+".z"]=U.viewInitial.aspectratio.z,S[D]=U.viewInitial.aspectmode)}M.call("_guiRelayout",d,S)}function a(d,v){var g=v.currentTarget,y=g._previousVal,m=d._fullLayout,b=m._subplots.gl3d||[],f=["xaxis","yaxis","zaxis"],S={},w={};if(y)w=y,g._previousVal=null;else{for(var E=0;E<b.length;E++){var O=b[E],C=m[O],P=O+".hovermode";S[P]=C.hovermode,w[P]=!1;for(var D=0;D<3;D++){var U=f[D],I=O+"."+U+".showspikes";w[I]=!1,S[I]=C[U].showspikes}}g._previousVal=S}return w}function l(d,v){for(var g=v.currentTarget,y=g.getAttribute("data-attr"),m=g.getAttribute("data-val")||!0,b=d._fullLayout,f=b._subplots.geo||[],S=0;S<f.length;S++){var w=f[S],E=b[w];if(y==="zoom"){var O=E.projection.scale,C=m==="in"?2*O:.5*O;M.call("_guiRelayout",d,w+".projection.scale",C)}}y==="reset"&&x(d,"geo")}function u(d){var v=d._fullLayout;return!v.hovermode&&(v._has("cartesian")?v._isHoriz?"y":"x":"closest")}function h(d){var v=u(d);M.call("_guiRelayout",d,"hovermode",v)}function c(d,v){for(var g=v.currentTarget.getAttribute("data-val"),y=d._fullLayout,m=y._subplots.mapbox||[],b={},f=0;f<m.length;f++){var S=m[f],w=y[S].zoom,E=g==="in"?1.05*w:w/1.05;b[S+".zoom"]=E}M.call("_guiRelayout",d,b)}function x(d,v){for(var g=d._fullLayout,y=g._subplots[v]||[],m={},b=0;b<y.length;b++)for(var f=y[b],S=g[f]._subplot.viewInitial,w=Object.keys(S),E=0;E<w.length;E++){var O=w[E];m[f+"."+O]=S[O]}M.call("_guiRelayout",d,m)}t.toImage={name:"toImage",title:function(d){var v=(d._context.toImageButtonOptions||{}).format||"png";return s(d,v==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(d){var v=d._context.toImageButtonOptions,g={format:v.format||"png"};p.notifier(s(d,"Taking snapshot - this may take a few seconds"),"long"),g.format!=="svg"&&p.isIE()&&(p.notifier(s(d,"IE only supports svg.  Changing format to svg."),"long"),g.format="svg"),["filename","width","height","scale"].forEach(function(y){y in v&&(g[y]=v[y])}),M.call("downloadImage",d,g).then(function(y){p.notifier(s(d,"Snapshot succeeded")+" - "+y,"long")}).catch(function(){p.notifier(s(d,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(d){return s(d,"Edit in Chart Studio")},icon:T.disk,click:function(d){k.sendDataToCloud(d)}},t.editInChartStudio={name:"editInChartStudio",title:function(d){return s(d,"Edit in Chart Studio")},icon:T.pencil,click:function(d){k.sendDataToCloud(d)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(d){return s(d,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(d){return s(d,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(d){return s(d,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(d){return s(d,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(d){return s(d,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(d){return s(d,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:i},t.drawline={name:"drawline",title:function(d){return s(d,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:i},t.drawrect={name:"drawrect",title:function(d){return s(d,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(d){return s(d,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(d){return s(d,"Erase active shape")},icon:T.eraseshape,click:_},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(d){return s(d,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(d){return s(d,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(d){return s(d,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(d){return s(d,"Compare data on hover")},attr:"hovermode",val:function(d){return d._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(d){return s(d,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(d){return s(d,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(d){return s(d,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(d){return s(d,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(d){return s(d,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(d){return s(d,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,v){var g=a(d,v);M.call("_guiRelayout",d,g)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(d){return s(d,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(d){return s(d,"Reset view")},icon:T.home,click:function(d){for(var v={"node.groups":[],"node.x":[],"node.y":[]},g=0;g<d._fullData.length;g++){var y=d._fullData[g]._viewInitial;v["node.groups"].push(y.node.groups.slice()),v["node.x"].push(y.node.x.slice()),v["node.y"].push(y.node.y.slice())}M.call("restyle",d,v)}},t.toggleHover={name:"toggleHover",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,v){var g=a(d,v);g.hovermode=u(d),M.call("_guiRelayout",d,g)}},t.resetViews={name:"resetViews",title:function(d){return s(d,"Reset views")},icon:T.home,click:function(d,v){var g=v.currentTarget;g.setAttribute("data-attr","zoom"),g.setAttribute("data-val","reset"),i(d,v),g.setAttribute("data-attr","resetLastSave"),n(d,v),x(d,"geo"),x(d,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(d){return s(d,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(d){var v=d._fullLayout,g=v._cartesianSpikesEnabled;v._cartesianSpikesEnabled=g==="on"?"off":"on",M.call("_guiRelayout",d,function(y){for(var m=y._fullLayout._cartesianSpikesEnabled==="on",b=o.list(y,null,!0),f={},S=0;S<b.length;S++){var w=b[S];f[w._name+".showspikes"]=!!m||w._showSpikeInitial}return f}(d))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(d){return s(d,"Reset view")},attr:"reset",icon:T.home,click:function(d){x(d,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:c}},76052:function(ee,R,e){var M=e(44248),k=Object.keys(M),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),_=[];k.forEach(function(p){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,i=(s._cat||s.name).toLowerCase();_.indexOf(t)===-1&&_.push(t),_.indexOf(i)===-1&&_.push(i)}})(M[p])}),_.sort(),ee.exports={DRAW_MODES:o,backButtons:T,foreButtons:_}},90824:function(ee,R,e){var M=e(3400),k=e(76308),o=e(31780),T=e(66540);ee.exports=function(_,p){var s=_.modebar||{},t=o.newContainer(p,"modebar");function i(n,a){return M.coerce(s,t,T,n,a)}i("orientation"),i("bgcolor",k.addOpacity(p.paper_bgcolor,.5));var r=k.contrast(k.rgb(p.modebar.bgcolor));i("color",k.addOpacity(r,.3)),i("activecolor",k.addOpacity(r,.7)),i("uirevision",p.uirevision),i("add"),i("remove")}},45460:function(ee,R,e){ee.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(ee,R,e){var M=e(79811),k=e(43028),o=e(24040),T=e(10624).isUnifiedHover,_=e(66400),p=e(44248),s=e(76052).DRAW_MODES,t=e(3400).extendDeep;ee.exports=function(i){var r=i._fullLayout,n=i._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,u=n.modeBarButtons;l=Array.isArray(u)&&u.length?function(h){for(var c=t([],h),x=0;x<c.length;x++)for(var d=c[x],v=0;v<d.length;v++){var g=d[v];if(typeof g=="string"){if(p[g]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[x][v]=p[g]}}return c}(u):!n.displayModeBar&&n.watermark?[]:function(h){var c=h._fullLayout,x=h._fullData,d=h._context;function v(fe,he){if(typeof he=="string"){if(he.toLowerCase()===fe.toLowerCase())return!0}else{var ve=he.name,ye=he._cat||he.name;if(ve===fe||ye===fe.toLowerCase())return!0}return!1}var g=c.modebar.add;typeof g=="string"&&(g=[g]);var y=c.modebar.remove;typeof y=="string"&&(y=[y]);var m=d.modeBarButtonsToAdd.concat(g.filter(function(fe){for(var he=0;he<d.modeBarButtonsToRemove.length;he++)if(v(fe,d.modeBarButtonsToRemove[he]))return!1;return!0})),b=d.modeBarButtonsToRemove.concat(y.filter(function(fe){for(var he=0;he<d.modeBarButtonsToAdd.length;he++)if(v(fe,d.modeBarButtonsToAdd[he]))return!1;return!0})),f=c._has("cartesian"),S=c._has("gl3d"),w=c._has("geo"),E=c._has("pie"),O=c._has("funnelarea"),C=c._has("gl2d"),P=c._has("ternary"),D=c._has("mapbox"),U=c._has("polar"),I=c._has("smith"),N=c._has("sankey"),W=function(fe){for(var he=M.list({_fullLayout:fe},null,!0),ve=0;ve<he.length;ve++)if(!he[ve].fixedrange)return!1;return!0}(c),F=T(c.hovermode),j=[];function H(fe){if(fe.length){for(var he=[],ve=0;ve<fe.length;ve++){for(var ye=fe[ve],me=p[ye],Me=me.name.toLowerCase(),Pe=(me._cat||me.name).toLowerCase(),ge=!1,oe=0;oe<b.length;oe++){var ie=b[oe].toLowerCase();if(ie===Me||ie===Pe){ge=!0;break}}ge||he.push(p[ye])}j.push(he)}}var te=["toImage"];d.showEditInChartStudio?te.push("editInChartStudio"):d.showSendToCloud&&te.push("sendDataToCloud"),H(te);var Q=[],$=[],K=[],X=[];(f||C||E||O||P)+w+S+D+U+I>1?($=["toggleHover"],K=["resetViews"]):w?(Q=["zoomInGeo","zoomOutGeo"],$=["hoverClosestGeo"],K=["resetGeo"]):S?($=["hoverClosest3d"],K=["resetCameraDefault3d","resetCameraLastSave3d"]):D?(Q=["zoomInMapbox","zoomOutMapbox"],$=["toggleHover"],K=["resetViewMapbox"]):C?$=["hoverClosestGl2d"]:E?$=["hoverClosestPie"]:N?($=["hoverClosestCartesian","hoverCompareCartesian"],K=["resetViewSankey"]):$=["toggleHover"],f&&($=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(fe){for(var he=0;he<fe.length;he++)if(!o.traceIs(fe[he],"noHover"))return!1;return!0}(x)||F)&&($=[]),!f&&!C||W||(Q=["zoomIn2d","zoomOut2d","autoScale2d"],K[0]!=="resetViews"&&(K=["resetScale2d"])),S?X=["zoom3d","pan3d","orbitRotation","tableRotation"]:(f||C)&&!W||P?X=["zoom2d","pan2d"]:D||w?X=["pan2d"]:U&&(X=["zoom2d"]),function(fe){for(var he=!1,ve=0;ve<fe.length&&!he;ve++){var ye=fe[ve];ye._module&&ye._module.selectPoints&&(o.traceIs(ye,"scatter-like")?(k.hasMarkers(ye)||k.hasText(ye))&&(he=!0):o.traceIs(ye,"box-violin")&&ye.boxpoints!=="all"&&ye.points!=="all"||(he=!0))}return he}(x)&&X.push("select2d","lasso2d");var Y=[],re=function(fe){Y.indexOf(fe)===-1&&$.indexOf(fe)!==-1&&Y.push(fe)};if(Array.isArray(m)){for(var se=[],ae=0;ae<m.length;ae++){var ce=m[ae];typeof ce=="string"?(ce=ce.toLowerCase(),s.indexOf(ce)!==-1?(c._has("mapbox")||c._has("cartesian"))&&X.push(ce):ce==="togglespikelines"?re("toggleSpikelines"):ce==="togglehover"?re("toggleHover"):ce==="hovercompare"?re("hoverCompareCartesian"):ce==="hoverclosest"?(re("hoverClosestCartesian"),re("hoverClosestGeo"),re("hoverClosest3d"),re("hoverClosestGl2d"),re("hoverClosestPie")):ce==="v1hovermode"&&(re("toggleHover"),re("hoverClosestCartesian"),re("hoverCompareCartesian"),re("hoverClosestGeo"),re("hoverClosest3d"),re("hoverClosestGl2d"),re("hoverClosestPie"))):se.push(ce)}m=se}return H(X),H(Q.concat(K)),H(Y),function(fe,he){if(he.length)if(Array.isArray(he[0]))for(var ve=0;ve<he.length;ve++)fe.push(he[ve]);else fe.push(he);return fe}(j,m)}(i),a?a.update(i,l):r._modeBar=_(i,l)}else a&&(a.destroy(),delete r._modeBar)}},66400:function(ee,R,e){var M=e(33428),k=e(38248),o=e(3400),T=e(9224),_=e(25788).version,p=new DOMParser;function s(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(i,r){this.graphInfo=i;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,l="modebar-"+a._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var u=a.modebar,h=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(l),o.addRelatedStyleRule(l,h+"#"+l+" .modebar-group","background-color: "+u.bgcolor),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+u.color),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+u.activecolor),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(r),x=this.hasLogo!==n.displaylogo,d=this.locale!==n.locale;if(this.locale=n.locale,(c||x||d)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var v=this.getLogo();n.watermark&&(v.className=v.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(v,this.element.childNodes[0]):this.element.appendChild(v),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var r=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(l){var u=l.name;if(!u)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");r.buttonsNames.push(u);var h=r.createButton(l);r.buttonElements.push(h),a.appendChild(h)}),r.element.appendChild(a)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=i.title;a===void 0?a=i.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&n.setAttribute("data-title",a),i.attr!==void 0&&n.setAttribute("data-attr",i.attr);var l=i.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),n.setAttribute("data-val",l)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(h){i.click(r.graphInfo,h),r.updateActiveButton(h.currentTarget)}),n.setAttribute("data-toggle",i.toggle||!1),i.toggle&&M.select(n).classed("active",!0);var u=i.icon;return typeof u=="function"?n.appendChild(u()):n.appendChild(this.createIcon(u||T.question)),n.setAttribute("data-gravity",i.gravity||"n"),n},t.createIcon=function(i){var r,n=k(i.height)?Number(i.height):i.ascent-i.descent,a="http://www.w3.org/2000/svg";if(i.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,i.width,n].join(" ")),r.setAttribute("class","icon");var l=document.createElementNS(a,"path");l.setAttribute("d",i.path),i.transform?l.setAttribute("transform",i.transform):i.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),r.appendChild(l)}return i.svg&&(r=p.parseFromString(i.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(i){var r=this.graphInfo._fullLayout,n=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var l=a.getAttribute("data-val")||!0,u=a.getAttribute("data-attr"),h=a.getAttribute("data-toggle")==="true",c=M.select(a);if(h)u===n&&c.classed("active",!c.classed("active"));else{var x=u===null?u:o.nestedProperty(r,u).get();c.classed("active",x===l)}})},t.hasButtons=function(i){var r=this.buttons;if(!r||i.length!==r.length)return!1;for(var n=0;n<i.length;++n){if(i[n].length!==r[n].length)return!1;for(var a=0;a<i[n].length;a++)if(i[n][a].name!==r[n][a].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+_+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(r),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},ee.exports=function(i,r){var n=i._fullLayout,a=new s({graphInfo:i,container:n._modebardiv.node(),buttons:r});return n._privateplot&&M.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},26680:function(ee,R,e){var M=e(25376),k=e(22548),o=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ee.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(ee){ee.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(ee,R,e){var M=e(3400),k=e(76308),o=e(31780),T=e(51272),_=e(26680),p=e(85984);function s(t,i,r,n){var a=n.calendar;function l(h,c){return M.coerce(t,i,_.buttons,h,c)}if(l("visible")){var u=l("step");u!=="all"&&(!a||a==="gregorian"||u!=="month"&&u!=="year"?l("stepmode"):i.stepmode="backward",l("count")),l("label")}}ee.exports=function(t,i,r,n,a){var l=t.rangeselector||{},u=o.newContainer(i,"rangeselector");function h(d,v){return M.coerce(l,u,_,d,v)}if(h("visible",T(l,u,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var c=function(d,v,g){for(var y=g.filter(function(S){return v[S].anchor===d._id}),m=0,b=0;b<y.length;b++){var f=v[y[b]].domain;f&&(m=Math.max(f[1],m))}return[d.domain[0],m+p.yPad]}(i,r,n);h("x",c[0]),h("y",c[1]),M.noneOrAll(t,i,["x","y"]),h("xanchor"),h("yanchor"),M.coerceFont(h,"font",r.font);var x=h("bgcolor");h("activecolor",k.contrast(x,p.lightAmount,p.darkAmount)),h("bordercolor"),h("borderwidth")}}},50216:function(ee,R,e){var M=e(33428),k=e(24040),o=e(7316),T=e(76308),_=e(43616),p=e(3400),s=p.strTranslate,t=e(72736),i=e(79811),r=e(84284),n=r.LINE_SPACING,a=r.FROM_TL,l=r.FROM_BR,u=e(85984),h=e(48040);function c(v){return v._id}function x(v,g,y){var m=p.ensureSingle(v,"rect","selector-rect",function(b){b.attr("shape-rendering","crispEdges")});m.attr({rx:u.rx,ry:u.ry}),m.call(T.stroke,g.bordercolor).call(T.fill,function(b,f){return f._isActive||f._isHovered?b.activecolor:b.bgcolor}(g,y)).style("stroke-width",g.borderwidth+"px")}function d(v,g,y,m){var b,f;p.ensureSingle(v,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(_.font,g.font).text((b=y,f=m._fullLayout._meta,b.label?f?p.templateString(b.label,f):b.label:b.step==="all"?"all":b.count+b.step.charAt(0))).call(function(S){t.convertToTspans(S,m)})}ee.exports=function(v){var g=v._fullLayout._infolayer.selectAll(".rangeselector").data(function(y){for(var m=i.list(y,"x",!0),b=[],f=0;f<m.length;f++){var S=m[f];S.rangeselector&&S.rangeselector.visible&&b.push(S)}return b}(v),c);g.enter().append("g").classed("rangeselector",!0),g.exit().remove(),g.style({cursor:"pointer","pointer-events":"all"}),g.each(function(y){var m=M.select(this),b=y,f=b.rangeselector,S=m.selectAll("g.button").data(p.filterVisible(f.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(w){var E=M.select(this),O=h(b,w);w._isActive=function(C,P,D){if(P.step==="all")return C.autorange===!0;var U=Object.keys(D);return C.range[0]===D[U[0]]&&C.range[1]===D[U[1]]}(b,w,O),E.call(x,f,w),E.call(d,f,w,v),E.on("click",function(){v._dragged||k.call("_guiRelayout",v,O)}),E.on("mouseover",function(){w._isHovered=!0,E.call(x,f,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(x,f,w)})}),function(w,E,O,C,P){var D=0,U=0,I=O.borderwidth;E.each(function(){var te=M.select(this).select(".selector-text"),Q=O.font.size*n,$=Math.max(Q*t.lineCount(te),16)+3;U=Math.max(U,$)}),E.each(function(){var te=M.select(this),Q=te.select(".selector-rect"),$=te.select(".selector-text"),K=$.node()&&_.bBox($.node()).width,X=O.font.size*n,Y=t.lineCount($),re=Math.max(K+10,u.minButtonWidth);te.attr("transform",s(I+D,I)),Q.attr({x:0,y:0,width:re,height:U}),t.positionText($,re/2,U/2-(Y-1)*X/2+3),D+=re+5});var N=w._fullLayout._size,W=N.l+N.w*O.x,F=N.t+N.h*(1-O.y),j="left";p.isRightAnchor(O)&&(W-=D,j="right"),p.isCenterAnchor(O)&&(W-=D/2,j="center");var H="top";p.isBottomAnchor(O)&&(F-=U,H="bottom"),p.isMiddleAnchor(O)&&(F-=U/2,H="middle"),D=Math.ceil(D),U=Math.ceil(U),W=Math.round(W),F=Math.round(F),o.autoMargin(w,C+"-range-selector",{x:O.x,y:O.y,l:D*a[j],r:D*l[j],b:U*l[H],t:U*a[H]}),P.attr("transform",s(W,F))}(v,S,f,b._name,m)})}},48040:function(ee,R,e){var M=e(73220),k=e(3400).titleCase;ee.exports=function(o,T){var _=o._name,p={};if(T.step==="all")p[_+".autorange"]=!0;else{var s=function(t,i){var r,n=t.range,a=new Date(t.r2l(n[1])),l=i.step,u=M["utc"+k(l)],h=i.count;switch(i.stepmode){case"backward":r=t.l2r(+u.offset(a,-h));break;case"todate":var c=u.offset(a,-h);r=t.l2r(+u.ceil(c))}return[r,n[1]]}(o,T);p[_+".range[0]"]=s[0],p[_+".range[1]"]=s[1]}return p}},41152:function(ee,R,e){ee.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(ee,R,e){var M=e(22548);ee.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(ee,R,e){var M=e(79811).list,k=e(19280).getAutoRange,o=e(74636);ee.exports=function(T){for(var _=M(T,"x",!0),p=0;p<_.length;p++){var s=_[p],t=s[o.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,s))}}},74636:function(ee){ee.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(ee,R,e){var M=e(3400),k=e(31780),o=e(79811),T=e(11200),_=e(10936);ee.exports=function(p,s,t){var i=p[t],r=s[t];if(i.rangeslider||s._requestRangeslider[r._id]){M.isPlainObject(i.rangeslider)||(i.rangeslider={});var n,a,l=i.rangeslider,u=k.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(l.range)),m("range");var h=s._subplots;if(h)for(var c=h.cartesian.filter(function(f){return f.substr(0,f.indexOf("y"))===o.name2id(t)}).map(function(f){return f.substr(f.indexOf("y"),f.length)}),x=M.simpleMap(c,o.id2name),d=0;d<x.length;d++){var v=x[d];n=l[v]||{},a=k.newContainer(u,v,"yaxis");var g,y=s[v];n.range&&y.isValidRange(n.range)&&(g="fixed"),b("rangemode",g)!=="match"&&b("range",y.range.slice())}u._input=l}}function m(f,S){return M.coerce(l,u,T,f,S)}function b(f,S){return M.coerce(n,a,_,f,S)}}},20060:function(ee,R,e){var M=e(33428),k=e(24040),o=e(7316),T=e(3400),_=T.strTranslate,p=e(43616),s=e(76308),t=e(81668),i=e(57952),r=e(79811),n=e(86476),a=e(93972),l=e(74636);function u(y){return typeof y.clientX=="number"?y.clientX:y.touches&&y.touches.length>0?y.touches[0].clientX:0}function h(y,m,b,f){var S=T.ensureSingle(y,"rect",l.bgClassName,function(C){C.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),w=f.borderwidth%2==0?f.borderwidth:f.borderwidth-1,E=-f._offsetShift,O=p.crispRound(m,f.borderwidth);S.attr({width:f._width+w,height:f._height+w,transform:_(E,E),"stroke-width":O}).call(s.stroke,f.bordercolor).call(s.fill,f.bgcolor)}function c(y,m,b,f){var S=m._fullLayout;T.ensureSingleById(S._topdefs,"clipPath",f._clipId,function(w){w.append("rect").attr({x:0,y:0})}).select("rect").attr({width:f._width,height:f._height})}function x(y,m,b,f){var S,w=m.calcdata,E=y.selectAll("g."+l.rangePlotClassName).data(b._subplotsWith,T.identity);E.enter().append("g").attr("class",function(O){return l.rangePlotClassName+" "+O}).call(p.setClipUrl,f._clipId,m),E.order(),E.exit().remove(),E.each(function(O,C){var P=M.select(this),D=C===0,U=r.getFromId(m,O,"y"),I=U._name,N=f[I],W={data:[],layout:{xaxis:{type:b.type,domain:[0,1],range:f.range.slice(),calendar:b.calendar},width:f._width,height:f._height,margin:{t:0,b:0,l:0,r:0}},_context:m._context};b.rangebreaks&&(W.layout.xaxis.rangebreaks=b.rangebreaks),W.layout[I]={type:U.type,domain:[0,1],range:N.rangemode!=="match"?N.range.slice():U.range.slice(),calendar:U.calendar},U.rangebreaks&&(W.layout[I].rangebreaks=U.rangebreaks),o.supplyDefaults(W);var F=W._fullLayout.xaxis,j=W._fullLayout[I];F.clearCalc(),F.setScale(),j.clearCalc(),j.setScale();var H={id:O,plotgroup:P,xaxis:F,yaxis:j,isRangePlot:!0};D?S=H:(H.mainplot="xy",H.mainplotinfo=S),i.rangePlot(m,H,function(te,Q){for(var $=[],K=0;K<te.length;K++){var X=te[K],Y=X[0].trace;Y.xaxis+Y.yaxis===Q&&$.push(X)}return $}(w,O))})}function d(y,m,b,f,S){T.ensureSingle(y,"rect",l.maskMinClassName,function(w){w.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,l.maskColor),T.ensureSingle(y,"rect",l.maskMaxClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,l.maskColor),S.rangemode!=="match"&&(T.ensureSingle(y,"rect",l.maskMinOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).call(s.fill,l.maskOppAxisColor),T.ensureSingle(y,"rect",l.maskMaxOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).style("border-top",l.maskOppBorder).call(s.fill,l.maskOppAxisColor))}function v(y,m,b,f){m._context.staticPlot||T.ensureSingle(y,"rect",l.slideBoxClassName,function(S){S.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:f._height,fill:l.slideBoxFill})}function g(y,m,b,f){var S=T.ensureSingle(y,"g",l.grabberMinClassName),w=T.ensureSingle(y,"g",l.grabberMaxClassName),E={x:0,width:l.handleWidth,rx:l.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(f._height/4),height:Math.round(f._height/2)};T.ensureSingle(S,"rect",l.handleMinClassName,function(P){P.attr(E)}).attr(O),T.ensureSingle(w,"rect",l.handleMaxClassName,function(P){P.attr(E)}).attr(O);var C={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:m._context.staticPlot?void 0:l.grabAreaCursor};T.ensureSingle(S,"rect",l.grabAreaMinClassName,function(P){P.attr(C)}).attr("height",f._height),T.ensureSingle(w,"rect",l.grabAreaMaxClassName,function(P){P.attr(C)}).attr("height",f._height)}ee.exports=function(y){for(var m=y._fullLayout,b=m._rangeSliderData,f=0;f<b.length;f++){var S=b[f][l.name];S._clipId=S._id+"-"+m._uid}var w=m._infolayer.selectAll("g."+l.containerClassName).data(b,function(E){return E._name});w.exit().each(function(E){var O=E[l.name];m._topdefs.select("#"+O._clipId).remove()}).remove(),b.length!==0&&(w.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),w.each(function(E){var O=M.select(this),C=E[l.name],P=m[r.id2name(E.anchor)],D=C[r.id2name(E.anchor)];if(C.range){var U,I=T.simpleMap(C.range,E.r2l),N=T.simpleMap(E.range,E.r2l);U=N[0]<N[1]?[Math.min(I[0],N[0]),Math.max(I[1],N[1])]:[Math.max(I[0],N[0]),Math.min(I[1],N[1])],C.range=C._input.range=T.simpleMap(U,E.l2r)}E.cleanRange("rangeslider.range");var W=m._size,F=E.domain;C._width=W.w*(F[1]-F[0]);var j=Math.round(W.l+W.w*F[0]),H=Math.round(W.t+W.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+C._offsetShift+l.extraPad);O.attr("transform",_(j,H)),C._rl=T.simpleMap(C.range,E.r2l);var te=C._rl[0],Q=C._rl[1],$=Q-te;if(C.p2d=function(he){return he/C._width*$+te},C.d2p=function(he){return(he-te)/$*C._width},E.rangebreaks){var K=E.locateBreaks(te,Q);if(K.length){var X,Y,re=0;for(X=0;X<K.length;X++)re+=(Y=K[X]).max-Y.min;var se=C._width/(Q-te-re),ae=[-se*te];for(X=0;X<K.length;X++)Y=K[X],ae.push(ae[ae.length-1]-se*(Y.max-Y.min));for(C.d2p=function(he){for(var ve=ae[0],ye=0;ye<K.length;ye++){var me=K[ye];if(he>=me.max)ve=ae[ye+1];else if(he<me.min)break}return ve+se*he},X=0;X<K.length;X++)(Y=K[X]).pmin=C.d2p(Y.min),Y.pmax=C.d2p(Y.max);C.p2d=function(he){for(var ve=ae[0],ye=0;ye<K.length;ye++){var me=K[ye];if(he>=me.pmax)ve=ae[ye+1];else if(he<me.pmin)break}return(he-ve)/se}}}if(D.rangemode!=="match"){var ce=P.r2l(D.range[0]),fe=P.r2l(D.range[1])-ce;C.d2pOppAxis=function(he){return(he-ce)/fe*C._height}}O.call(h,y,E,C).call(c,y,E,C).call(x,y,E,C).call(d,y,E,C,D).call(v,y,E,C).call(g,y,E,C),function(he,ve,ye,me){if(!ve._context.staticPlot){var Me=he.select("rect."+l.slideBoxClassName).node(),Pe=he.select("rect."+l.grabAreaMinClassName).node(),ge=he.select("rect."+l.grabAreaMaxClassName).node();he.on("mousedown",oe),he.on("touchstart",oe)}function oe(){var ie=M.event,de=ie.target,Se=u(ie),_e=Se-he.node().getBoundingClientRect().left,we=me.d2p(ye._rl[0]),Ae=me.d2p(ye._rl[1]),Oe=n.coverSlip();function ze(be){var ke,Ie,Ee,Be=+u(be)-Se;switch(de){case Me:if(Ee="ew-resize",we+Be>ye._length||Ae+Be<0)return;ke=we+Be,Ie=Ae+Be;break;case Pe:if(Ee="col-resize",we+Be>ye._length)return;ke=we+Be,Ie=Ae;break;case ge:if(Ee="col-resize",Ae+Be<0)return;ke=we,Ie=Ae+Be;break;default:Ee="ew-resize",ke=_e,Ie=_e+Be}if(Ie<ke){var Ve=Ie;Ie=ke,ke=Ve}me._pixelMin=ke,me._pixelMax=Ie,a(M.select(Oe),Ee),function(Ze,rt,it,dt){function vt(Je){return it.l2r(T.constrain(Je,dt._rl[0],dt._rl[1]))}var ht=vt(dt.p2d(dt._pixelMin)),Qe=vt(dt.p2d(dt._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",rt,it._name+".range",[ht,Qe])})}(0,ve,ye,me)}function pe(){Oe.removeEventListener("mousemove",ze),Oe.removeEventListener("mouseup",pe),this.removeEventListener("touchmove",ze),this.removeEventListener("touchend",pe),T.removeElement(Oe)}this.addEventListener("touchmove",ze),this.addEventListener("touchend",pe),Oe.addEventListener("mousemove",ze),Oe.addEventListener("mouseup",pe)}}(O,y,E,C),function(he,ve,ye,me,Me,Pe){var ge=l.handleWidth/2;function oe(be){return T.constrain(be,0,me._width)}function ie(be){return T.constrain(be,0,me._height)}function de(be){return T.constrain(be,-ge,me._width+ge)}var Se=oe(me.d2p(ye._rl[0])),_e=oe(me.d2p(ye._rl[1]));if(he.select("rect."+l.slideBoxClassName).attr("x",Se).attr("width",_e-Se),he.select("rect."+l.maskMinClassName).attr("width",Se),he.select("rect."+l.maskMaxClassName).attr("x",_e).attr("width",me._width-_e),Pe.rangemode!=="match"){var we=me._height-ie(me.d2pOppAxis(Me._rl[1])),Ae=me._height-ie(me.d2pOppAxis(Me._rl[0]));he.select("rect."+l.maskMinOppAxisClassName).attr("x",Se).attr("height",we).attr("width",_e-Se),he.select("rect."+l.maskMaxOppAxisClassName).attr("x",Se).attr("y",Ae).attr("height",me._height-Ae).attr("width",_e-Se),he.select("rect."+l.slideBoxClassName).attr("y",we).attr("height",Ae-we)}var Oe=.5,ze=Math.round(de(Se-ge))-Oe,pe=Math.round(de(_e-ge))+Oe;he.select("g."+l.grabberMinClassName).attr("transform",_(ze,Oe)),he.select("g."+l.grabberMaxClassName).attr("transform",_(pe,Oe))}(O,0,E,C,P,D),E.side==="bottom"&&t.draw(y,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:m._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:H+C._height+C._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(ee,R,e){var M=e(79811),k=e(72736),o=e(74636),T=e(84284).LINE_SPACING,_=o.name;function p(s){var t=s&&s[_];return t&&t.visible}R.isVisible=p,R.makeData=function(s){var t=M.list({_fullLayout:s},"x",!0),i=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(p(a)){r.push(a);var l=a[_];l._id=_+a._id,l._height=(s.height-i.b-i.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}s._rangeSliderData=r},R.autoMarginOpts=function(s,t){var i=s._fullLayout,r=t[_],n=t._id.charAt(0),a=0,l=0;return t.side==="bottom"&&(a=t._depth,t.title.text!==i._dfltTitle[n]&&(l=1.5*t.title.font.size+10+r._offsetShift,l+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(i.margin.b,l),pad:o.extraPad+2*r._offsetShift}}},49692:function(ee,R,e){var M=e(3400),k=e(11200),o=e(10936),T=e(97944);ee.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},k,{yaxis:o})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},10936:function(ee){ee.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(ee,R,e){var M=e(13916),k=e(52904).line,o=e(98192).u,T=e(92880).extendFlat,_=e(67824).overrideAll,p=e(31780).templatedArray;e(36208),ee.exports=_(p("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},M.xref,{}),yref:T({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},o,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(ee){ee.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(ee,R,e){var M=e(3400),k=e(54460),o=e(51272),T=e(93956),_=e(65152);function p(s,t,i){function r(E,O){return M.coerce(s,t,T,E,O)}var n=r("path"),a=r("type",n?"path":"rect")!=="path";a&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var l=["x","y"],u=0;u<2;u++){var h,c,x,d=l[u],v={_fullLayout:i},g=k.coerceRef(s,t,v,d);if((h=k.getFromId(v,g))._selectionIndices.push(t._index),x=_.rangeToShapePosition(h),c=_.shapePositionToRange(h),a){var y=d+"0",m=d+"1",b=s[y],f=s[m];s[y]=c(s[y],!0),s[m]=c(s[m],!0),k.coercePosition(t,v,r,g,y),k.coercePosition(t,v,r,g,m);var S=t[y],w=t[m];S!==void 0&&w!==void 0&&(t[y]=x(S),t[m]=x(w),s[y]=b,s[m]=f)}}a&&M.noneOrAll(s,t,["x0","x1","y0","y1"])}ee.exports=function(s,t){o(s,t,{name:"selections",handleItemDefaults:p});for(var i=t.selections,r=0;r<i.length;r++){var n=i[r];n&&n.path===void 0&&(n.x0!==void 0&&n.x1!==void 0&&n.y0!==void 0&&n.y1!==void 0||(t.selections[r]=null))}}},23640:function(ee,R,e){var M=e(9856).readPaths,k=e(55496),o=e(1936).clearOutlineControllers,T=e(76308),_=e(43616),p=e(31780).arrayEditor,s=e(65152),t=s.getPathString;function i(u){var h=u._fullLayout;for(var c in o(u),h._selectionLayer.selectAll("path").remove(),h._plots){var x=h._plots[c].selectionLayer;x&&x.selectAll("path").remove()}for(var d=0;d<h.selections.length;d++)n(u,d)}function r(u){return u._context.editSelection}function n(u,h){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var c=s.makeSelectionsOptionsAndPlotinfo(u,h),x=c.options,d=c.plotinfo;x._input&&function(v){var g=t(u,x),y={"data-index":h,"fill-rule":"evenodd",d:g},m=x.opacity,b="rgba(0,0,0,0)",f=x.line.color||T.contrast(u._fullLayout.plot_bgcolor),S=x.line.width,w=x.line.dash;S||(S=5,w="solid");var E=r(u)&&u._fullLayout._activeSelectionIndex===h;E&&(b=u._fullLayout.activeselection.fillcolor,m=u._fullLayout.activeselection.opacity);for(var O=[],C=1;C>=0;C--){var P=v.append("path").attr(y).style("opacity",C?.1:m).call(T.stroke,f).call(T.fill,b).call(_.dashLine,C?"solid":w,C?4+S:S);if(a(P,u,x),E){var D=p(u.layout,"selections",x);P.style({cursor:"move"});var U={element:P.node(),plotinfo:d,gd:u,editHelpers:D,isActiveSelection:!0},I=M(g,u);k(I,P,U)}else P.style("pointer-events",C?"all":"none");O[C]=P}var N=O[0];O[1].node().addEventListener("click",function(){return function(W,F){if(r(W)){var j=+F.node().getAttribute("data-index");if(j>=0){if(j===W._fullLayout._activeSelectionIndex)return void l(W);W._fullLayout._activeSelectionIndex=j,W._fullLayout._deactivateSelection=l,i(W)}}}(u,N)})}(u._fullLayout._selectionLayer)}function a(u,h,c){var x=c.xref+c.yref;_.setClipUrl(u,"clip"+h._fullLayout._uid+x,h)}function l(u){r(u)&&u._fullLayout._activeSelectionIndex>=0&&(o(u),delete u._fullLayout._activeSelectionIndex,i(u))}ee.exports={draw:i,drawOne:n,activateLastSelection:function(u){if(r(u)){var h=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=h,u._fullLayout._deactivateSelection=l,i(u)}}}},34200:function(ee,R,e){var M=e(98192).u,k=e(92880).extendFlat;ee.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(ee){ee.exports=function(R,e,M){M("newselection.mode"),M("newselection.line.width")&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},5968:function(ee,R,e){var M=e(72760).selectMode,k=e(1936).clearOutline,o=e(9856),T=o.readPaths,_=o.writePaths,p=o.fixDatesForPaths;ee.exports=function(s,t){if(s.length){var i=s[0][0];if(i){var r=i.getAttribute("d"),n=t.gd,a=n._fullLayout.newselection,l=t.plotinfo,u=l.xaxis,h=l.yaxis,c=t.isActiveSelection,x=t.dragmode,d=(n.layout||{}).selections||[];if(!M(x)&&c!==void 0){var v=n._fullLayout._activeSelectionIndex;if(v<d.length)switch(n._fullLayout.selections[v].type){case"rect":x="select";break;case"path":x="lasso"}}var g,y=T(r,n,l,c),m={xref:u._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};y.length===1&&(g=y[0]),g&&g.length===5&&x==="select"?(m.type="rect",m.x0=g[0][1],m.y0=g[0][2],m.x1=g[2][1],m.y1=g[2][2]):(m.type="path",u&&h&&p(y,u,h),m.path=_(y),g=null),k(n);for(var b=t.editHelpers,f=(b||{}).modifyItem,S=[],w=0;w<d.length;w++){var E=n._fullLayout.selections[w];if(E){if(S[w]=E._input,c!==void 0&&w===n._fullLayout._activeSelectionIndex){var O=m;switch(E.type){case"rect":f("x0",O.x0),f("x1",O.x1),f("y0",O.y0),f("y1",O.y1);break;case"path":f("path",O.path)}}}else S[w]=E}return c===void 0?(S.push(m),S):b?b.getUpdateObj():{}}}}},5840:function(ee,R,e){var M=e(3400).strTranslate;function k(o,T){switch(o.type){case"log":return o.p2d(T);case"date":return o.p2r(T,0,o.calendar);default:return o.p2r(T)}}ee.exports={p2r:k,r2p:function(o,T){switch(o.type){case"log":return o.d2p(T);case"date":return o.r2p(T,0,o.calendar);default:return o.r2p(T)}},axValue:function(o){var T=o._id.charAt(0)==="y"?1:0;return function(_){return k(o,_[T])}},getTransform:function(o){return M(o.xaxis._offset,o.yaxis._offset)}}},22676:function(ee,R,e){var M=e(23640),k=e(43156);ee.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},43156:function(ee,R,e){var M=e(14756),k=e(61456),o=e(24040),T=e(43616).dashStyle,_=e(76308),p=e(93024),s=e(10624).makeEventData,t=e(72760),i=t.freeMode,r=t.rectMode,n=t.drawMode,a=t.openMode,l=t.selectMode,u=e(65152),h=e(85448),c=e(55496),x=e(1936).clearOutline,d=e(9856),v=d.handleEllipse,g=d.readPaths,y=e(93940).newShapes,m=e(5968),b=e(23640).activateLastSelection,f=e(3400),S=f.sorterAsc,w=e(92065),E=e(91200),O=e(79811).getFromId,C=e(73696),P=e(39172).redrawReglTraces,D=e(83280),U=D.MINSELECT,I=w.filter,N=w.tester,W=e(5840),F=W.p2r,j=W.axValue,H=W.getTransform;function te(ze){return ze.subplot!==void 0}function Q(ze,pe,be,ke,Ie,Ee,Be){var Ve,Ze,rt,it,dt,vt,ht,Qe,Je,Tt=pe._hoverdata,Ot=pe._fullLayout.clickmode.indexOf("event")>-1,Pt=[];if(function(We){return We&&Array.isArray(We)&&We[0].hoverOnBox!==!0}(Tt)){Y(ze,pe,Ee);var Mt=function(We,ot){var tt,Re,Fe=We[0],nt=-1,Ge=[];for(Re=0;Re<ot.length;Re++)if(tt=ot[Re],Fe.fullData._expandedIndex===tt.cd[0].trace._expandedIndex){if(Fe.hoverOnBox===!0)break;Fe.pointNumber!==void 0?nt=Fe.pointNumber:Fe.binNumber!==void 0&&(nt=Fe.binNumber,Ge=Fe.pointNumbers);break}return{pointNumber:nt,pointNumbers:Ge,searchInfo:tt}}(Tt,Ve=ae(pe,be,ke,Ie));if(Mt.pointNumbers.length>0?function(We,ot){var tt,Re,Fe,nt=[];for(Fe=0;Fe<We.length;Fe++)(tt=We[Fe]).cd[0].trace.selectedpoints&&tt.cd[0].trace.selectedpoints.length>0&&nt.push(tt);if(nt.length===1&&nt[0]===ot.searchInfo&&(Re=ot.searchInfo.cd[0].trace).selectedpoints.length===ot.pointNumbers.length){for(Fe=0;Fe<ot.pointNumbers.length;Fe++)if(Re.selectedpoints.indexOf(ot.pointNumbers[Fe])<0)return!1;return!0}return!1}(Ve,Mt):function(We){var ot,tt,Re=0;for(tt=0;tt<We.length;tt++)if((ot=We[tt].cd[0].trace).selectedpoints&&(ot.selectedpoints.length>1||(Re+=ot.selectedpoints.length)>1))return!1;return Re===1}(Ve)&&(vt=fe(Mt))){for(Be&&Be.remove(),Je=0;Je<Ve.length;Je++)(Ze=Ve[Je])._module.selectPoints(Ze,!1);he(pe,Ve),re(Ee),Ot&&Oe(pe)}else{for(ht=ze.shiftKey&&(vt!==void 0?vt:fe(Mt)),rt=function(We,ot,tt){return{pointNumber:We,searchInfo:ot,subtract:!!tt}}(Mt.pointNumber,Mt.searchInfo,ht),it=X(Ee.selectionDefs.concat([rt])),Je=0;Je<Ve.length;Je++)if(dt=ye(Ve[Je]._module.selectPoints(Ve[Je],it),Ve[Je]),Pt.length)for(var He=0;He<dt.length;He++)Pt.push(dt[He]);else Pt=dt;if(he(pe,Ve,Qe={points:Pt}),rt&&Ee&&Ee.selectionDefs.push(rt),Be){var Ye=Ee.mergedPolygons,Ne=a(Ee.dragmode);c(me(Ye,Ne),Be,Ee)}Ot&&Ae(pe,Qe)}}}function $(ze){return"pointNumber"in ze&&"searchInfo"in ze}function K(ze){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(pe,be,ke,Ie){var Ee=ze.searchInfo.cd[0].trace._expandedIndex;return Ie.cd[0].trace._expandedIndex===Ee&&ke===ze.pointNumber},isRect:!1,degenerate:!1,subtract:!!ze.subtract}}function X(ze){if(ze.length){for(var pe=[],be=$(ze[0])?0:ze[0][0][0],ke=be,Ie=$(ze[0])?0:ze[0][0][1],Ee=Ie,Be=0;Be<ze.length;Be++)if($(ze[Be]))pe.push(K(ze[Be]));else{var Ve=N(ze[Be]);Ve.subtract=!!ze[Be].subtract,pe.push(Ve),be=Math.min(be,Ve.xmin),ke=Math.max(ke,Ve.xmax),Ie=Math.min(Ie,Ve.ymin),Ee=Math.max(Ee,Ve.ymax)}return{xmin:be,xmax:ke,ymin:Ie,ymax:Ee,pts:[],contains:function(Ze,rt,it,dt){for(var vt=!1,ht=0;ht<pe.length;ht++)pe[ht].contains(Ze,rt,it,dt)&&(vt=!pe[ht].subtract);return vt},isRect:!1,degenerate:!1}}}function Y(ze,pe,be){var ke=pe._fullLayout,Ie=be.plotinfo,Ee=be.dragmode,Be=ke._lastSelectedSubplot&&ke._lastSelectedSubplot===Ie.id,Ve=(ze.shiftKey||ze.altKey)&&!(n(Ee)&&a(Ee));Be&&Ve&&Ie.selection&&Ie.selection.selectionDefs&&!be.selectionDefs?(be.selectionDefs=Ie.selection.selectionDefs,be.mergedPolygons=Ie.selection.mergedPolygons):Ve&&Ie.selection||re(be),Be||(x(pe),ke._lastSelectedSubplot=Ie.id)}function re(ze,pe){var be=ze.dragmode,ke=ze.plotinfo,Ie=ze.gd;(function(dt){return dt._fullLayout._activeShapeIndex>=0})(Ie)&&Ie._fullLayout._deactivateShape(Ie),function(dt){return dt._fullLayout._activeSelectionIndex>=0}(Ie)&&Ie._fullLayout._deactivateSelection(Ie);var Ee=Ie._fullLayout._zoomlayer,Be=n(be),Ve=l(be);if(Be||Ve){var Ze,rt,it=Ee.selectAll(".select-outline-"+ke.id);it&&Ie._fullLayout._outlining&&(Be&&(Ze=y(it,ze)),Ze&&o.call("_guiRelayout",Ie,{shapes:Ze}),Ve&&!te(ze)&&(rt=m(it,ze)),rt&&(Ie._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",Ie,{selections:rt}).then(function(){pe&&b(Ie)})),Ie._fullLayout._outlining=!1)}ke.selection={},ke.selection.selectionDefs=ze.selectionDefs=[],ke.selection.mergedPolygons=ze.mergedPolygons=[]}function se(ze){return ze._id}function ae(ze,pe,be,ke){if(!ze.calcdata)return[];var Ie,Ee,Be,Ve=[],Ze=pe.map(se),rt=be.map(se);for(Be=0;Be<ze.calcdata.length;Be++)if((Ee=(Ie=ze.calcdata[Be])[0].trace).visible===!0&&Ee._module&&Ee._module.selectPoints)if(!te({subplot:ke})||Ee.subplot!==ke&&Ee.geo!==ke)if(Ee.type==="splom"){if(Ee._xaxes[Ze[0]]&&Ee._yaxes[rt[0]]){var it=ce(Ee._module,Ie,pe[0],be[0]);it.scene=ze._fullLayout._splomScenes[Ee.uid],Ve.push(it)}}else if(Ee.type==="sankey"){var dt=ce(Ee._module,Ie,pe[0],be[0]);Ve.push(dt)}else{if(!(Ze.indexOf(Ee.xaxis)!==-1||Ee._xA&&Ee._xA.overlaying)||!(rt.indexOf(Ee.yaxis)!==-1||Ee._yA&&Ee._yA.overlaying))continue;Ve.push(ce(Ee._module,Ie,O(ze,Ee.xaxis),O(ze,Ee.yaxis)))}else Ve.push(ce(Ee._module,Ie,pe[0],be[0]));return Ve}function ce(ze,pe,be,ke){return{_module:ze,cd:pe,xaxis:be,yaxis:ke}}function fe(ze){var pe=ze.searchInfo.cd[0].trace,be=ze.pointNumber,ke=ze.pointNumbers,Ie=ke.length>0?ke[0]:be;return!!pe.selectedpoints&&pe.selectedpoints.indexOf(Ie)>-1}function he(ze,pe,be){var ke,Ie;for(ke=0;ke<pe.length;ke++){var Ee=pe[ke].cd[0].trace._fullInput,Be=ze._fullLayout._tracePreGUI[Ee.uid]||{};Be.selectedpoints===void 0&&(Be.selectedpoints=Ee._input.selectedpoints||null)}if(be){var Ve=be.points||[];for(ke=0;ke<pe.length;ke++)(Ie=pe[ke].cd[0].trace)._input.selectedpoints=Ie._fullInput.selectedpoints=[],Ie._fullInput!==Ie&&(Ie.selectedpoints=[]);for(var Ze=0;Ze<Ve.length;Ze++){var rt=Ve[Ze],it=rt.data,dt=rt.fullData,vt=rt.pointIndex,ht=rt.pointIndices;ht?([].push.apply(it.selectedpoints,ht),Ie._fullInput!==Ie&&[].push.apply(dt.selectedpoints,ht)):(it.selectedpoints.push(vt),Ie._fullInput!==Ie&&dt.selectedpoints.push(vt))}}else for(ke=0;ke<pe.length;ke++)delete(Ie=pe[ke].cd[0].trace).selectedpoints,delete Ie._input.selectedpoints,Ie._fullInput!==Ie&&delete Ie._fullInput.selectedpoints;(function(Qe,Je){for(var Tt=!1,Ot=0;Ot<Je.length;Ot++){var Pt=Je[Ot],Mt=Pt.cd;o.traceIs(Mt[0].trace,"regl")&&(Tt=!0);var He=Pt._module,Ye=He.styleOnSelect||He.style;Ye&&(Ye(Qe,Mt,Mt[0].node3),Mt[0].nodeRangePlot3&&Ye(Qe,Mt,Mt[0].nodeRangePlot3))}Tt&&(C(Qe),P(Qe))})(ze,pe)}function ve(ze,pe,be){for(var ke=(be?M.difference:M.union)({regions:ze},{regions:[pe]}).regions.reverse(),Ie=0;Ie<ke.length;Ie++){var Ee=ke[Ie];Ee.subtract=de(Ee,ke.slice(0,Ie))}return ke}function ye(ze,pe){if(Array.isArray(ze))for(var be=pe.cd,ke=pe.cd[0].trace,Ie=0;Ie<ze.length;Ie++)ze[Ie]=s(ze[Ie],ke,be);return ze}function me(ze,pe){for(var be=[],ke=0;ke<ze.length;ke++){be[ke]=[];for(var Ie=0;Ie<ze[ke].length;Ie++){be[ke][Ie]=[],be[ke][Ie][0]=Ie?"L":"M";for(var Ee=0;Ee<ze[ke][Ie].length;Ee++)be[ke][Ie].push(ze[ke][Ie][Ee])}pe||be[ke].push(["Z",be[ke][0][1],be[ke][0][2]])}return be}function Me(ze,pe){for(var be,ke,Ie=[],Ee=[],Be=0;Be<pe.length;Be++){var Ve=pe[Be];ke=Ve._module.selectPoints(Ve,ze),Ee.push(ke),be=ye(ke,Ve),Ie=Ie.concat(be)}return Ie}function Pe(ze,pe,be,ke,Ie){var Ee,Be,Ve,Ze=!!ke;Ie&&(Ee=Ie.plotinfo,Be=Ie.xaxes[0]._id,Ve=Ie.yaxes[0]._id);var rt=[],it=[],dt=ie(ze),vt=ze._fullLayout;if(Ee){var ht=vt._zoomlayer,Qe=vt.dragmode,Je=n(Qe),Tt=l(Qe);if(Je||Tt){var Ot=O(ze,Be,"x"),Pt=O(ze,Ve,"y");if(Ot&&Pt){var Mt=ht.selectAll(".select-outline-"+Ee.id);if(Mt&&ze._fullLayout._outlining&&Mt.length){for(var He=Mt[0][0].getAttribute("d"),Ye=g(He,ze,Ee),Ne=[],We=0;We<Ye.length;We++){for(var ot=Ye[We],tt=[],Re=0;Re<ot.length;Re++)tt.push([Se(Ot,ot[Re][1]),Se(Pt,ot[Re][2])]);tt.xref=Be,tt.yref=Ve,tt.subtract=de(tt,Ne),Ne.push(tt)}dt=dt.concat(Ne)}}}}var Fe=Be&&Ve?[Be+Ve]:vt._subplots.cartesian;(function(Mn){var Sn=Mn.calcdata;if(Sn)for(var Tn=0;Tn<Sn.length;Tn++){var Rn=Sn[Tn][0].trace,Pn=Mn._fullLayout._splomScenes;if(Pn){var jn=Pn[Rn.uid];jn&&(jn.selectBatch=[])}}})(ze);for(var nt={},Ge=0;Ge<Fe.length;Ge++){var ct=Fe[Ge],pt=ct.indexOf("y"),gt=ct.slice(0,pt),ut=ct.slice(pt),kt=Be&&Ve?be:void 0;if(kt=oe(dt,gt,ut,kt)){var mt=ke;if(!Ze){var At=O(ze,gt,"x"),Lt=O(ze,ut,"y");mt=ae(ze,[At],[Lt],ct);for(var Ct=0;Ct<mt.length;Ct++){var zt=mt[Ct],Gt=zt.cd[0],rn=Gt.trace;if(zt._module.name==="scattergl"&&!Gt.t.xpx){var Nt=rn.x,Wt=rn.y,Rt=rn._length;Gt.t.xpx=[],Gt.t.ypx=[];for(var Ln=0;Ln<Rt;Ln++)Gt.t.xpx[Ln]=At.c2p(Nt[Ln]),Gt.t.ypx[Ln]=Lt.c2p(Wt[Ln])}zt._module.name==="splom"&&(nt[rn.uid]||(nt[rn.uid]=!0))}}var bn=Me(kt,mt);rt=rt.concat(bn),it=it.concat(mt)}}var hn={points:rt};he(ze,it,hn);var Kt=vt.clickmode.indexOf("event")>-1&&pe;if(!Ee&&pe){var on=ie(ze,!0);if(on.length){var $t=on[0].xref,ln=on[0].yref;if($t&&ln){var mn=_e(on);we([O(ze,$t,"x"),O(ze,ln,"y")])(hn,mn)}}ze._fullLayout._noEmitSelectedAtStart?ze._fullLayout._noEmitSelectedAtStart=!1:Kt&&Ae(ze,hn),vt._reselect=!1}if(!Ee&&vt._deselect){var xn=vt._deselect;(function(Mn,Sn,Tn){for(var Rn=0;Rn<Tn.length;Rn++){var Pn=Tn[Rn];if(Pn.xaxis&&Pn.xaxis._id===Mn&&Pn.yaxis&&Pn.yaxis._id===Sn)return!0}return!1})(Be=xn.xref,Ve=xn.yref,it)||ge(ze,Be,Ve,ke),Kt&&(hn.points.length?Ae(ze,hn):Oe(ze)),vt._deselect=!1}return{eventData:hn,selectionTesters:be}}function ge(ze,pe,be,ke){ke=ae(ze,[O(ze,pe,"x")],[O(ze,be,"y")],pe+be);for(var Ie=0;Ie<ke.length;Ie++){var Ee=ke[Ie];Ee._module.selectPoints(Ee,!1)}he(ze,ke)}function oe(ze,pe,be,ke){for(var Ie,Ee=0;Ee<ze.length;Ee++){var Be=ze[Ee];pe===Be.xref&&be===Be.yref&&(Ie?ke=X(Ie=ve(Ie,Be,!!Be.subtract)):(Ie=[Be],ke=N(Be)))}return ke}function ie(ze,pe){for(var be=[],ke=ze._fullLayout,Ie=ke.selections,Ee=Ie.length,Be=0;Be<Ee;Be++)if(!pe||Be===ke._activeSelectionIndex){var Ve=Ie[Be];if(Ve){var Ze,rt,it,dt,vt,ht=Ve.xref,Qe=Ve.yref,Je=O(ze,ht,"x"),Tt=O(ze,Qe,"y");if(Ve.type==="rect"){vt=[];var Ot=Se(Je,Ve.x0),Pt=Se(Je,Ve.x1),Mt=Se(Tt,Ve.y0),He=Se(Tt,Ve.y1);vt=[[Ot,Mt],[Ot,He],[Pt,He],[Pt,Mt]],Ze=Math.min(Ot,Pt),rt=Math.max(Ot,Pt),it=Math.min(Mt,He),dt=Math.max(Mt,He),vt.xmin=Ze,vt.xmax=rt,vt.ymin=it,vt.ymax=dt,vt.xref=ht,vt.yref=Qe,vt.subtract=!1,vt.isRect=!0,be.push(vt)}else if(Ve.type==="path")for(var Ye=Ve.path.split("Z"),Ne=[],We=0;We<Ye.length;We++){var ot=Ye[We];if(ot){ot+="Z";var tt=u.extractPathCoords(ot,h.paramIsX,"raw"),Re=u.extractPathCoords(ot,h.paramIsY,"raw");Ze=1/0,rt=-1/0,it=1/0,dt=-1/0,vt=[];for(var Fe=0;Fe<tt.length;Fe++){var nt=Se(Je,tt[Fe]),Ge=Se(Tt,Re[Fe]);vt.push([nt,Ge]),Ze=Math.min(nt,Ze),rt=Math.max(nt,rt),it=Math.min(Ge,it),dt=Math.max(Ge,dt)}vt.xmin=Ze,vt.xmax=rt,vt.ymin=it,vt.ymax=dt,vt.xref=ht,vt.yref=Qe,vt.subtract=de(vt,Ne),Ne.push(vt),be.push(vt)}}}}return be}function de(ze,pe){for(var be=!1,ke=0;ke<pe.length;ke++)for(var Ie=pe[ke],Ee=0;Ee<ze.length;Ee++)if(k(ze[Ee],Ie)){be=!be;break}return be}function Se(ze,pe){return ze.type==="date"&&(pe=pe.replace("_"," ")),ze.type==="log"?ze.c2p(pe):ze.r2p(pe,null,ze.calendar)}function _e(ze){for(var pe=ze.length,be=[],ke=0;ke<pe;ke++){var Ie=ze[ke];be=(be=be.concat(Ie)).concat([Ie[0]])}return(Ee=be).isRect=Ee.length===5&&Ee[0][0]===Ee[4][0]&&Ee[0][1]===Ee[4][1]&&Ee[0][0]===Ee[1][0]&&Ee[2][0]===Ee[3][0]&&Ee[0][1]===Ee[3][1]&&Ee[1][1]===Ee[2][1]||Ee[0][1]===Ee[1][1]&&Ee[2][1]===Ee[3][1]&&Ee[0][0]===Ee[3][0]&&Ee[1][0]===Ee[2][0],Ee.isRect&&(Ee.xmin=Math.min(Ee[0][0],Ee[2][0]),Ee.xmax=Math.max(Ee[0][0],Ee[2][0]),Ee.ymin=Math.min(Ee[0][1],Ee[2][1]),Ee.ymax=Math.max(Ee[0][1],Ee[2][1])),Ee;var Ee}function we(ze){return function(pe,be){for(var ke,Ie,Ee=0;Ee<ze.length;Ee++){var Be=ze[Ee],Ve=Be._id,Ze=Ve.charAt(0);if(be.isRect){ke||(ke={});var rt=be[Ze+"min"],it=be[Ze+"max"];rt!==void 0&&it!==void 0&&(ke[Ve]=[F(Be,rt),F(Be,it)].sort(S))}else Ie||(Ie={}),Ie[Ve]=be.map(j(Be))}ke&&(pe.range=ke),Ie&&(pe.lassoPoints=Ie)}}function Ae(ze,pe){pe&&(pe.selections=(ze.layout||{}).selections||[]),ze.emit("plotly_selected",pe)}function Oe(ze){ze.emit("plotly_deselect",null)}ee.exports={reselect:Pe,prepSelect:function(ze,pe,be,ke,Ie){var Ee=!te(ke),Be=i(Ie),Ve=r(Ie),Ze=a(Ie),rt=n(Ie),it=l(Ie),dt=Ie==="drawcircle",vt=Ie==="drawline"||dt,ht=ke.gd,Qe=ht._fullLayout,Je=it&&Qe.newselection.mode==="immediate"&&Ee,Tt=Qe._zoomlayer,Ot=ke.element.getBoundingClientRect(),Pt=ke.plotinfo,Mt=H(Pt),He=pe-Ot.left,Ye=be-Ot.top;Qe._calcInverseTransform(ht);var Ne=f.apply3DTransform(Qe._invTransform)(He,Ye);He=Ne[0],Ye=Ne[1];var We,ot,tt,Re,Fe,nt,Ge,ct=Qe._invScaleX,pt=Qe._invScaleY,gt=He,ut=Ye,kt="M"+He+","+Ye,mt=ke.xaxes[0],At=ke.yaxes[0],Lt=mt._length,Ct=At._length,zt=ze.altKey&&!(n(Ie)&&Ze);Y(ze,ht,ke),Be&&(We=I([[He,Ye]],D.BENDPX));var Gt=Tt.selectAll("path.select-outline-"+Pt.id).data([1]),rn=rt?Qe.newshape:Qe.newselection;rt&&(ke.hasText=rn.label.text||rn.label.texttemplate);var Nt=rt&&!Ze?rn.fillcolor:"rgba(0,0,0,0)",Wt=rn.line.color||(Ee?_.contrast(ht._fullLayout.plot_bgcolor):"#7f7f7f");Gt.enter().append("path").attr("class","select-outline select-outline-"+Pt.id).style({opacity:rt?rn.opacity/2:1,"stroke-dasharray":T(rn.line.dash,rn.line.width),"stroke-width":rn.line.width+"px","shape-rendering":"crispEdges"}).call(_.stroke,Wt).call(_.fill,Nt).attr("fill-rule","evenodd").classed("cursor-move",!!rt).attr("transform",Mt).attr("d",kt+"Z");var Rt=Tt.append("path").attr("class","zoombox-corners").style({fill:_.background,stroke:_.defaultLine,"stroke-width":1}).attr("transform",Mt).attr("d","M0,0Z");if(rt&&ke.hasText){var Ln=Tt.select(".label-temp");Ln.empty()&&(Ln=Tt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var bn=Qe._uid+D.SELECTID,hn=[],Kt=ae(ht,ke.xaxes,ke.yaxes,ke.subplot);Je&&!ze.shiftKey&&(ke._clearSubplotSelections=function(){if(Ee){var $t=mt._id,ln=At._id;ge(ht,$t,ln,Kt);for(var mn=(ht.layout||{}).selections||[],xn=[],Mn=!1,Sn=0;Sn<mn.length;Sn++){var Tn=Qe.selections[Sn];Tn.xref!==$t||Tn.yref!==ln?xn.push(mn[Sn]):Mn=!0}Mn&&(ht._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",ht,{selections:xn}))}});var on=function($t){return $t.plotinfo.fillRangeItems||we($t.xaxes.concat($t.yaxes))}(ke);ke.moveFn=function($t,ln){ke._clearSubplotSelections&&(ke._clearSubplotSelections(),ke._clearSubplotSelections=void 0),gt=Math.max(0,Math.min(Lt,ct*$t+He)),ut=Math.max(0,Math.min(Ct,pt*ln+Ye));var mn=Math.abs(gt-He),xn=Math.abs(ut-Ye);if(Ve){var Mn,Sn,Tn;if(it){var Rn=Qe.selectdirection;switch(Mn=Rn==="any"?xn<Math.min(.6*mn,U)?"h":mn<Math.min(.6*xn,U)?"v":"d":Rn){case"h":Sn=dt?Ct/2:0,Tn=Ct;break;case"v":Sn=dt?Lt/2:0,Tn=Lt}}if(rt)switch(Qe.newshape.drawdirection){case"vertical":Mn="h",Sn=dt?Ct/2:0,Tn=Ct;break;case"horizontal":Mn="v",Sn=dt?Lt/2:0,Tn=Lt;break;case"ortho":mn<xn?(Mn="h",Sn=Ye,Tn=ut):(Mn="v",Sn=He,Tn=gt);break;default:Mn="d"}Mn==="h"?((Re=vt?v(dt,[gt,Sn],[gt,Tn]):[[He,Sn],[He,Tn],[gt,Tn],[gt,Sn]]).xmin=vt?gt:Math.min(He,gt),Re.xmax=vt?gt:Math.max(He,gt),Re.ymin=Math.min(Sn,Tn),Re.ymax=Math.max(Sn,Tn),Rt.attr("d","M"+Re.xmin+","+(Ye-U)+"h-4v"+2*U+"h4ZM"+(Re.xmax-1)+","+(Ye-U)+"h4v"+2*U+"h-4Z")):Mn==="v"?((Re=vt?v(dt,[Sn,ut],[Tn,ut]):[[Sn,Ye],[Sn,ut],[Tn,ut],[Tn,Ye]]).xmin=Math.min(Sn,Tn),Re.xmax=Math.max(Sn,Tn),Re.ymin=vt?ut:Math.min(Ye,ut),Re.ymax=vt?ut:Math.max(Ye,ut),Rt.attr("d","M"+(He-U)+","+Re.ymin+"v-4h"+2*U+"v4ZM"+(He-U)+","+(Re.ymax-1)+"v4h"+2*U+"v-4Z")):Mn==="d"&&((Re=vt?v(dt,[He,Ye],[gt,ut]):[[He,Ye],[He,ut],[gt,ut],[gt,Ye]]).xmin=Math.min(He,gt),Re.xmax=Math.max(He,gt),Re.ymin=Math.min(Ye,ut),Re.ymax=Math.max(Ye,ut),Rt.attr("d","M0,0Z"))}else Be&&(We.addPt([gt,ut]),Re=We.filtered);if(ke.selectionDefs&&ke.selectionDefs.length?(tt=ve(ke.mergedPolygons,Re,zt),Re.subtract=zt,ot=X(ke.selectionDefs.concat([Re]))):(tt=[Re],ot=N(Re)),c(me(tt,Ze),Gt,ke),it){var Pn,jn=Pe(ht,!1),Jn=jn.eventData?jn.eventData.points.slice():[];jn=Pe(ht,!1,ot,Kt,ke),ot=jn.selectionTesters,Ge=jn.eventData,Pn=We?We.filtered:_e(tt),E.throttle(bn,D.SELECTDELAY,function(){for(var $n=(hn=Me(ot,Kt)).slice(),Gn=0;Gn<Jn.length;Gn++){for(var lr=Jn[Gn],Jt=!1,Qt=0;Qt<$n.length;Qt++)if($n[Qt].curveNumber===lr.curveNumber&&$n[Qt].pointNumber===lr.pointNumber){Jt=!0;break}Jt||$n.push(lr)}$n.length&&(Ge||(Ge={}),Ge.points=$n),on(Ge,Pn),function(En,pn){En.emit("plotly_selecting",pn)}(ht,Ge)})}},ke.clickFn=function($t,ln){if(Rt.remove(),ht._fullLayout._activeShapeIndex>=0)ht._fullLayout._deactivateShape(ht);else if(!rt){var mn=Qe.clickmode;E.done(bn).then(function(){if(E.clear(bn),$t===2){for(Gt.remove(),Fe=0;Fe<Kt.length;Fe++)(nt=Kt[Fe])._module.selectPoints(nt,!1);if(he(ht,Kt),re(ke),Oe(ht),Kt.length){var xn=Kt[0].xaxis,Mn=Kt[0].yaxis;if(xn&&Mn){for(var Sn=[],Tn=ht._fullLayout.selections,Rn=0;Rn<Tn.length;Rn++){var Pn=Tn[Rn];Pn&&(Pn.xref===xn._id&&Pn.yref===Mn._id||Sn.push(Pn))}Sn.length<Tn.length&&(ht._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",ht,{selections:Sn}))}}}else mn.indexOf("select")>-1&&Q(ln,ht,ke.xaxes,ke.yaxes,ke.subplot,ke,Gt),mn==="event"&&Ae(ht,void 0);p.click(ht,ln,Pt.id)}).catch(f.error)}},ke.doneFn=function(){Rt.remove(),E.done(bn).then(function(){E.clear(bn),!Je&&Re&&ke.selectionDefs&&(Re.subtract=zt,ke.selectionDefs.push(Re),ke.mergedPolygons.length=0,[].push.apply(ke.mergedPolygons,tt)),(Je||rt)&&re(ke,Je),ke.doneFnCompleted&&ke.doneFnCompleted(hn),it&&Ae(ht,Ge)}).catch(f.error)}},clearOutline:x,clearSelectionsCache:re,selectOnClick:Q}},46056:function(ee,R,e){var M=e(13916),k=e(25376),o=e(52904).line,T=e(98192).u,_=e(92880).extendFlat,p=e(31780).templatedArray,s=(e(36208),e(45464)),t=e(21776).ye,i=e(97728);ee.exports=p("shape",{visible:_({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:_({},s.legend,{editType:"calc+arraydraw"}),legendgroup:_({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:_({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:_({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:_({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:_({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:_({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:_({},o.color,{editType:"arraydraw"}),width:_({},o.width,{editType:"calc+arraydraw"}),dash:_({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(ee,R,e){var M=e(3400),k=e(54460),o=e(85448),T=e(65152);function _(i){return s(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function p(i){return s(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function s(i,r,n,a,l,u){var h=i/2,c=u;if(r==="pixel"){var x=l?T.extractPathCoords(l,u?o.paramIsY:o.paramIsX):[n,a],d=M.aggNums(Math.max,null,x),v=M.aggNums(Math.min,null,x),g=v<0?Math.abs(v)+h:h,y=d>0?d+h:h;return{ppad:h,ppadplus:c?g:y,ppadminus:c?y:g}}return{ppad:h}}function t(i,r,n,a,l){var u=i.type==="category"||i.type==="multicategory"?i.r2c:i.d2c;if(r!==void 0)return[u(r),u(n)];if(a){var h,c,x,d,v=1/0,g=-1/0,y=a.match(o.segmentRE);for(i.type==="date"&&(u=T.decodeDate(u)),h=0;h<y.length;h++)(c=l[y[h].charAt(0)].drawn)!==void 0&&(!(x=y[h].substr(1).match(o.paramRE))||x.length<c||((d=u(x[c]))<v&&(v=d),d>g&&(g=d)));return g>=v?[v,g]:void 0}}ee.exports=function(i){var r=i._fullLayout,n=M.filterVisible(r.shapes);if(n.length&&i._fullData.length)for(var a=0;a<n.length;a++){var l,u,h=n[a];h._extremes={};var c=k.getRefType(h.xref),x=k.getRefType(h.yref);if(h.xref!=="paper"&&c!=="domain"){var d=h.xsizemode==="pixel"?h.xanchor:h.x0,v=h.xsizemode==="pixel"?h.xanchor:h.x1;(u=t(l=k.getFromId(i,h.xref),d,v,h.path,o.paramIsX))&&(h._extremes[l._id]=k.findExtremes(l,u,_(h)))}if(h.yref!=="paper"&&x!=="domain"){var g=h.ysizemode==="pixel"?h.yanchor:h.y0,y=h.ysizemode==="pixel"?h.yanchor:h.y1;(u=t(l=k.getFromId(i,h.yref),g,y,h.path,o.paramIsY))&&(h._extremes[l._id]=k.findExtremes(l,u,p(h)))}}}},85448:function(ee){ee.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(ee,R,e){var M=e(3400),k=e(54460),o=e(51272),T=e(46056),_=e(65152);function p(s,t,i){function r(W,F){return M.coerce(s,t,T,W,F)}if(t._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),M.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var n=r("path"),a=r("type",n?"path":"rect"),l=a!=="path";l&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var u=r("xsizemode"),h=r("ysizemode"),c=["x","y"],x=0;x<2;x++){var d,v,g,y=c[x],m=y+"anchor",b=y==="x"?u:h,f={_fullLayout:i},S=k.coerceRef(s,t,f,y,void 0,"paper");if(k.getRefType(S)==="range"?((d=k.getFromId(f,S))._shapeIndices.push(t._index),g=_.rangeToShapePosition(d),v=_.shapePositionToRange(d)):v=g=M.identity,l){var w=y+"0",E=y+"1",O=s[w],C=s[E];s[w]=v(s[w],!0),s[E]=v(s[E],!0),b==="pixel"?(r(w,0),r(E,10)):(k.coercePosition(t,f,r,S,w,.25),k.coercePosition(t,f,r,S,E,.75)),t[w]=g(t[w]),t[E]=g(t[E]),s[w]=O,s[E]=C}if(b==="pixel"){var P=s[m];s[m]=v(s[m],!0),k.coercePosition(t,f,r,S,m,.25),t[m]=g(t[m]),s[m]=P}}l&&M.noneOrAll(s,t,["x0","x1","y0","y1"]);var D,U,I=a==="line";if(l&&(D=r("label.texttemplate")),D||(U=r("label.text")),U||D){r("label.textangle");var N=r("label.textposition",I?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(W,F){return W?"bottom":F.indexOf("top")!==-1?"top":F.indexOf("bottom")!==-1?"bottom":"middle"}(I,N)),r("label.padding"),M.coerceFont(r,"label.font",i.font)}}}ee.exports=function(s,t){o(s,t,{name:"shapes",handleItemDefaults:p})}},60728:function(ee,R,e){var M=e(3400),k=e(54460),o=e(72736),T=e(43616),_=e(9856).readPaths,p=e(65152),s=p.getPathString,t=e(97728),i=e(84284).FROM_TL;ee.exports=function(r,n,a,l){if(l.selectAll(".shape-label").remove(),a.label.text||a.label.texttemplate){var u;if(a.label.texttemplate){var h={};if(a.type!=="path"){var c=k.getFromId(r,a.xref),x=k.getFromId(r,a.yref);for(var d in t){var v=t[d](a,c,x);v!==void 0&&(h[d]=v)}}u=M.texttemplateStringForShapes(a.label.texttemplate,{},r._fullLayout._d3locale,h)}else u=a.label.text;var g,y,m,b,f={"data-index":n},S=a.label.font,w=l.append("g").attr(f).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(a.path){var E=s(r,a),O=_(E,r);g=1/0,m=1/0,y=-1/0,b=-1/0;for(var C=0;C<O.length;C++)for(var P=0;P<O[C].length;P++)for(var D=O[C][P],U=1;U<D.length;U+=2){var I=D[U],N=D[U+1];g=Math.min(g,I),y=Math.max(y,I),m=Math.min(m,N),b=Math.max(b,N)}}else{var W=k.getFromId(r,a.xref),F=k.getRefType(a.xref),j=k.getFromId(r,a.yref),H=k.getRefType(a.yref),te=p.getDataToPixel(r,W,!1,F),Q=p.getDataToPixel(r,j,!0,H);g=te(a.x0),y=te(a.x1),m=Q(a.y0),b=Q(a.y1)}var $=a.label.textangle;$==="auto"&&($=a.type==="line"?function(se,ae,ce,fe){var he,ve;return ve=Math.abs(ce-se),he=ce>=se?ae-fe:fe-ae,-180/Math.PI*Math.atan2(he,ve)}(g,m,y,b):0),w.call(function(se){return se.call(T.font,S).attr({}),o.convertToTspans(se,r),se});var K=function(se,ae,ce,fe,he,ve,ye){var me,Me,Pe,ge,oe=he.label.textposition,ie=he.label.textangle,de=he.label.padding,Se=he.type,_e=Math.PI/180*ve,we=Math.sin(_e),Ae=Math.cos(_e),Oe=he.label.xanchor,ze=he.label.yanchor;if(Se==="line"){oe==="start"?(me=se,Me=ae):oe==="end"?(me=ce,Me=fe):(me=(se+ce)/2,Me=(ae+fe)/2),Oe==="auto"&&(Oe=oe==="start"?ie==="auto"?ce>se?"left":ce<se?"right":"center":ce>se?"right":ce<se?"left":"center":oe==="end"?ie==="auto"?ce>se?"right":ce<se?"left":"center":ce>se?"left":ce<se?"right":"center":"center");var pe={bottom:-1,middle:0,top:1};if(ie==="auto"){var be=pe[ze];Pe=-de*we*be,ge=de*Ae*be}else Pe=de*{left:1,center:0,right:-1}[Oe],ge=de*pe[ze];me+=Pe,Me+=ge}else Pe=de+3,oe.indexOf("right")!==-1?(me=Math.max(se,ce)-Pe,Oe==="auto"&&(Oe="right")):oe.indexOf("left")!==-1?(me=Math.min(se,ce)+Pe,Oe==="auto"&&(Oe="left")):(me=(se+ce)/2,Oe==="auto"&&(Oe="center")),Me=oe.indexOf("top")!==-1?Math.min(ae,fe):oe.indexOf("bottom")!==-1?Math.max(ae,fe):(ae+fe)/2,ge=de,ze==="bottom"?Me-=ge:ze==="top"&&(Me+=ge);var ke=i[ze],Ie=he.label.font.size,Ee=ye.height;return{textx:me+(Ee*ke-Ie)*we,texty:Me+-(Ee*ke-Ie)*Ae,xanchor:Oe}}(g,m,y,b,a,$,T.bBox(w.node())),X=K.textx,Y=K.texty,re=K.xanchor;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[re],y:Y,x:X,transform:"rotate("+$+","+X+","+Y+")"}).call(o.positionText,X,Y)}}},55496:function(ee,R,e){var M=e(3400).strTranslate,k=e(86476),o=e(72760),T=o.drawMode,_=o.selectMode,p=e(24040),s=e(76308),t=e(7e3),i=t.i000,r=t.i090,n=t.i180,a=t.i270,l=e(1936).clearOutlineControllers,u=e(9856),h=u.pointsOnRectangle,c=u.pointsOnEllipse,x=u.writePaths,d=e(93940).newShapes,v=e(93940).createShapeObj,g=e(5968),y=e(60728);function m(b,f){var S,w,E,O=b[f][1],C=b[f][2],P=b.length;return w=b[S=(f+1)%P][1],E=b[S][2],w===O&&E===C&&(w=b[S=(f+2)%P][1],E=b[S][2]),[S,w,E]}ee.exports=function b(f,S,w,E){E||(E=0);var O=w.gd;function C(){b(f,S,w,E++),(c(f[0])||w.hasText)&&P({redrawing:!0})}function P(he){var ve={};w.isActiveShape!==void 0&&(w.isActiveShape=!1,ve=d(S,w)),w.isActiveSelection!==void 0&&(w.isActiveSelection=!1,ve=g(S,w),O._fullLayout._reselect=!0),Object.keys(ve).length&&p.call((he||{}).redrawing?"relayout":"_guiRelayout",O,ve)}var D,U,I,N,W,F=O._fullLayout._zoomlayer,j=w.dragmode,H=T(j),te=_(j);if((H||te)&&(O._fullLayout._outlining=!0),l(O),S.attr("d",x(f)),E||!w.isActiveShape&&!w.isActiveSelection||(W=function(he,ve){for(var ye=0;ye<ve.length;ye++){var me=ve[ye];he[ye]=[];for(var Me=0;Me<me.length;Me++){he[ye][Me]=[];for(var Pe=0;Pe<me[Me].length;Pe++)he[ye][Me][Pe]=me[Me][Pe]}}return he}([],f),function(he){D=[];for(var ve=0;ve<f.length;ve++){var ye=f[ve],me=h(ye),Me=!me&&c(ye);D[ve]=[];for(var Pe=ye.length,ge=0;ge<Pe;ge++)if(ye[ge][0]!=="Z"&&(!Me||ge===i||ge===r||ge===n||ge===a)){var oe,ie=me&&w.isActiveSelection;ie&&(oe=m(ye,ge));var de=ye[ge][1],Se=ye[ge][2],_e=he.append(ie?"rect":"circle").attr("data-i",ve).attr("data-j",ge).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ie){var we=oe[1]-de,Ae=oe[2]-Se,Oe=Ae?5:Math.max(Math.min(25,Math.abs(we)-5),5),ze=we?5:Math.max(Math.min(25,Math.abs(Ae)-5),5);_e.classed(Ae?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Oe).attr("height",ze).attr("x",de-Oe/2).attr("y",Se-ze/2).attr("transform",M(we/2,Ae/2))}else _e.classed("cursor-grab",!0).attr("r",5).attr("cx",de).attr("cy",Se);D[ve][ge]={element:_e.node(),gd:O,prepFn:K,doneFn:Y,clickFn:re},k.init(D[ve][ge])}}}(F.append("g").attr("class","outline-controllers")),function(){U=[],f.length&&(U[0]={element:S[0][0],gd:O,prepFn:ae,doneFn:ce,clickFn:fe},k.init(U[0]))}()),H&&w.hasText){var Q=F.select(".label-temp"),$=v(S,w,w.dragmode);y(O,"label-temp",$,Q)}function K(he){I=+he.srcElement.getAttribute("data-i"),N=+he.srcElement.getAttribute("data-j"),D[I][N].moveFn=X}function X(he,ve){if(f.length){var ye=W[I][N][1],me=W[I][N][2],Me=f[I],Pe=Me.length;if(h(Me)){var ge=he,oe=ve;w.isActiveSelection&&(m(Me,N)[1]===Me[N][1]?oe=0:ge=0);for(var ie=0;ie<Pe;ie++)if(ie!==N){var de=Me[ie];de[1]===Me[N][1]&&(de[1]=ye+ge),de[2]===Me[N][2]&&(de[2]=me+oe)}if(Me[N][1]=ye+ge,Me[N][2]=me+oe,!h(Me))for(var Se=0;Se<Pe;Se++)for(var _e=0;_e<Me[Se].length;_e++)Me[Se][_e]=W[I][Se][_e]}else Me[N][1]=ye+he,Me[N][2]=me+ve;C()}}function Y(){P()}function re(he,ve){if(he===2){I=+ve.srcElement.getAttribute("data-i"),N=+ve.srcElement.getAttribute("data-j");var ye=f[I];h(ye)||c(ye)||function(){if(f.length&&f[I]&&f[I].length){for(var me=[],Me=0;Me<f[I].length;Me++)Me!==N&&me.push(f[I][Me]);me.length>1&&(me.length!==2||me[1][0]!=="Z")&&(N===0&&(me[0][0]="M"),f[I]=me,C(),P())}}()}}function se(he,ve){(function(ye,me){if(f.length)for(var Me=0;Me<f.length;Me++)for(var Pe=0;Pe<f[Me].length;Pe++)for(var ge=0;ge+2<f[Me][Pe].length;ge+=2)f[Me][Pe][ge+1]=W[Me][Pe][ge+1]+ye,f[Me][Pe][ge+2]=W[Me][Pe][ge+2]+me})(he,ve),C()}function ae(he){(I=+he.srcElement.getAttribute("data-i"))||(I=0),U[I].moveFn=se}function ce(){P()}function fe(he){he===2&&function(ve){if(_(ve._fullLayout.dragmode)){l(ve);var ye=ve._fullLayout._activeSelectionIndex,me=(ve.layout||{}).selections||[];if(ye<me.length){for(var Me=[],Pe=0;Pe<me.length;Pe++)Pe!==ye&&Me.push(me[Pe]);delete ve._fullLayout._activeSelectionIndex;var ge=ve._fullLayout.selections[ye];ve._fullLayout._deselect={xref:ge.xref,yref:ge.yref},p.call("_guiRelayout",ve,{selections:Me})}}}(O)}}},4016:function(ee,R,e){var M=e(33428),k=e(24040),o=e(3400),T=e(54460),_=e(9856).readPaths,p=e(55496),s=e(60728),t=e(1936).clearOutlineControllers,i=e(76308),r=e(43616),n=e(31780).arrayEditor,a=e(86476),l=e(93972),u=e(85448),h=e(65152),c=h.getPathString;function x(f){var S=f._fullLayout;for(var w in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var O=0;O<S.shapes.length;O++)S.shapes[O].visible===!0&&g(f,O)}function d(f){return!!f._fullLayout._outlining}function v(f){return!f._context.edits.shapePosition}function g(f,S){f._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var w=h.makeShapesOptionsAndPlotinfo(f,S),E=w.options,O=w.plotinfo;function C(P){var D=c(f,E),U={"data-index":S,"fill-rule":E.fillrule,d:D},I=E.opacity,N=E.fillcolor,W=E.line.width?E.line.color:"rgba(0,0,0,0)",F=E.line.width,j=E.line.dash;F||E.editable!==!0||(F=5,j="solid");var H=D[D.length-1]!=="Z",te=v(f)&&E.editable&&f._fullLayout._activeShapeIndex===S;te&&(N=H?"rgba(0,0,0,0)":f._fullLayout.activeshape.fillcolor,I=f._fullLayout.activeshape.opacity);var Q,$=P.append("g").classed("shape-group",!0).attr({"data-index":S}),K=$.append("path").attr(U).style("opacity",I).call(i.stroke,W).call(i.fill,N).call(r.dashLine,j,F);if(y($,f,E),s(f,S,E,$),(te||f._context.edits.shapePosition)&&(Q=n(f.layout,"shapes",E)),te){K.style({cursor:"move"});var X={element:K.node(),plotinfo:O,gd:f,editHelpers:Q,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},Y=_(D,f);p(Y,K,X)}else f._context.edits.shapePosition?function(re,se,ae,ce,fe,he){var ve,ye,me,Me,Pe,ge,oe,ie,de,Se,_e,we,Ae,Oe,ze,pe,be=10,ke=10,Ie=ae.xsizemode==="pixel",Ee=ae.ysizemode==="pixel",Be=ae.type==="line",Ve=ae.type==="path",Ze=he.modifyItem,rt=M.select(se.node().parentNode),it=T.getFromId(re,ae.xref),dt=T.getRefType(ae.xref),vt=T.getFromId(re,ae.yref),ht=T.getRefType(ae.yref),Qe=h.getDataToPixel(re,it,!1,dt),Je=h.getDataToPixel(re,vt,!0,ht),Tt=h.getPixelToData(re,it,!1,dt),Ot=h.getPixelToData(re,vt,!0,ht),Pt=Be?function(){var tt=10,Re=Math.max(ae.line.width,tt),Fe=fe.append("g").attr("data-index",ce).attr("drag-helper",!0);Fe.append("path").attr("d",se.attr("d")).style({cursor:"move","stroke-width":Re,"stroke-opacity":"0"});var nt={"fill-opacity":"0"},Ge=Math.max(Re/2,tt);return Fe.append("circle").attr({"data-line-point":"start-point",cx:Ie?Qe(ae.xanchor)+ae.x0:Qe(ae.x0),cy:Ee?Je(ae.yanchor)-ae.y0:Je(ae.y0),r:Ge}).style(nt).classed("cursor-grab",!0),Fe.append("circle").attr({"data-line-point":"end-point",cx:Ie?Qe(ae.xanchor)+ae.x1:Qe(ae.x1),cy:Ee?Je(ae.yanchor)-ae.y1:Je(ae.y1),r:Ge}).style(nt).classed("cursor-grab",!0),Fe}():se,Mt={element:Pt.node(),gd:re,prepFn:function(tt){d(re)||(Ie&&(Pe=Qe(ae.xanchor)),Ee&&(ge=Je(ae.yanchor)),ae.type==="path"?ze=ae.path:(ve=Ie?ae.x0:Qe(ae.x0),ye=Ee?ae.y0:Je(ae.y0),me=Ie?ae.x1:Qe(ae.x1),Me=Ee?ae.y1:Je(ae.y1)),ve<me?(de=ve,Ae="x0",Se=me,Oe="x1"):(de=me,Ae="x1",Se=ve,Oe="x0"),!Ee&&ye<Me||Ee&&ye>Me?(oe=ye,_e="y0",ie=Me,we="y1"):(oe=Me,_e="y1",ie=ye,we="y0"),He(tt),We(fe,ae),function(Re,Fe,nt){var Ge=Fe.xref,ct=Fe.yref,pt=T.getFromId(nt,Ge),gt=T.getFromId(nt,ct),ut="";Ge==="paper"||pt.autorange||(ut+=Ge),ct==="paper"||gt.autorange||(ut+=ct),r.setClipUrl(Re,ut?"clip"+nt._fullLayout._uid+ut:null,nt)}(se,ae,re),Mt.moveFn=pe==="move"?Ye:Ne,Mt.altKey=tt.altKey)},doneFn:function(){d(re)||(l(se),ot(fe),y(se,re,ae),k.call("_guiRelayout",re,he.getUpdateObj()))},clickFn:function(){d(re)||ot(fe)}};function He(tt){if(d(re))pe=null;else if(Be)pe=tt.target.tagName==="path"?"move":tt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Re=Mt.element.getBoundingClientRect(),Fe=Re.right-Re.left,nt=Re.bottom-Re.top,Ge=tt.clientX-Re.left,ct=tt.clientY-Re.top,pt=!Ve&&Fe>be&&nt>ke&&!tt.shiftKey?a.getCursor(Ge/Fe,1-ct/nt):"move";l(se,pt),pe=pt.split("-")[0]}}function Ye(tt,Re){if(ae.type==="path"){var Fe=function(ct){return ct},nt=Fe,Ge=Fe;Ie?Ze("xanchor",ae.xanchor=Tt(Pe+tt)):(nt=function(ct){return Tt(Qe(ct)+tt)},it&&it.type==="date"&&(nt=h.encodeDate(nt))),Ee?Ze("yanchor",ae.yanchor=Ot(ge+Re)):(Ge=function(ct){return Ot(Je(ct)+Re)},vt&&vt.type==="date"&&(Ge=h.encodeDate(Ge))),Ze("path",ae.path=m(ze,nt,Ge))}else Ie?Ze("xanchor",ae.xanchor=Tt(Pe+tt)):(Ze("x0",ae.x0=Tt(ve+tt)),Ze("x1",ae.x1=Tt(me+tt))),Ee?Ze("yanchor",ae.yanchor=Ot(ge+Re)):(Ze("y0",ae.y0=Ot(ye+Re)),Ze("y1",ae.y1=Ot(Me+Re)));se.attr("d",c(re,ae)),We(fe,ae),s(re,ce,ae,rt)}function Ne(tt,Re){if(Ve){var Fe=function(Wt){return Wt},nt=Fe,Ge=Fe;Ie?Ze("xanchor",ae.xanchor=Tt(Pe+tt)):(nt=function(Wt){return Tt(Qe(Wt)+tt)},it&&it.type==="date"&&(nt=h.encodeDate(nt))),Ee?Ze("yanchor",ae.yanchor=Ot(ge+Re)):(Ge=function(Wt){return Ot(Je(Wt)+Re)},vt&&vt.type==="date"&&(Ge=h.encodeDate(Ge))),Ze("path",ae.path=m(ze,nt,Ge))}else if(Be){if(pe==="resize-over-start-point"){var ct=ve+tt,pt=Ee?ye-Re:ye+Re;Ze("x0",ae.x0=Ie?ct:Tt(ct)),Ze("y0",ae.y0=Ee?pt:Ot(pt))}else if(pe==="resize-over-end-point"){var gt=me+tt,ut=Ee?Me-Re:Me+Re;Ze("x1",ae.x1=Ie?gt:Tt(gt)),Ze("y1",ae.y1=Ee?ut:Ot(ut))}}else{var kt=function(Wt){return pe.indexOf(Wt)!==-1},mt=kt("n"),At=kt("s"),Lt=kt("w"),Ct=kt("e"),zt=mt?oe+Re:oe,Gt=At?ie+Re:ie,rn=Lt?de+tt:de,Nt=Ct?Se+tt:Se;Ee&&(mt&&(zt=oe-Re),At&&(Gt=ie-Re)),(!Ee&&Gt-zt>ke||Ee&&zt-Gt>ke)&&(Ze(_e,ae[_e]=Ee?zt:Ot(zt)),Ze(we,ae[we]=Ee?Gt:Ot(Gt))),Nt-rn>be&&(Ze(Ae,ae[Ae]=Ie?rn:Tt(rn)),Ze(Oe,ae[Oe]=Ie?Nt:Tt(Nt)))}se.attr("d",c(re,ae)),We(fe,ae),s(re,ce,ae,rt)}function We(tt,Re){(Ie||Ee)&&function(){var Fe=Re.type!=="path",nt=tt.selectAll(".visual-cue").data([0]);nt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ge=Qe(Ie?Re.xanchor:o.midRange(Fe?[Re.x0,Re.x1]:h.extractPathCoords(Re.path,u.paramIsX))),ct=Je(Ee?Re.yanchor:o.midRange(Fe?[Re.y0,Re.y1]:h.extractPathCoords(Re.path,u.paramIsY)));if(Ge=h.roundPositionForSharpStrokeRendering(Ge,1),ct=h.roundPositionForSharpStrokeRendering(ct,1),Ie&&Ee){var pt="M"+(Ge-1-1)+","+(ct-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";nt.attr("d",pt)}else if(Ie){var gt="M"+(Ge-1-1)+","+(ct-9-1)+"v18 h2 v-18 Z";nt.attr("d",gt)}else{var ut="M"+(Ge-9-1)+","+(ct-1-1)+"h18 v2 h-18 Z";nt.attr("d",ut)}}()}function ot(tt){tt.selectAll(".visual-cue").remove()}a.init(Mt),Pt.node().onmousemove=He}(f,K,E,S,P,Q):E.editable===!0&&K.style("pointer-events",H||i.opacity(N)*I<=.5?"stroke":"all");K.node().addEventListener("click",function(){return function(re,se){if(v(re)){var ae=+se.node().getAttribute("data-index");if(ae>=0){if(ae===re._fullLayout._activeShapeIndex)return void b(re);re._fullLayout._activeShapeIndex=ae,re._fullLayout._deactivateShape=b,x(re)}}}(f,K)})}E._input&&E.visible===!0&&(E.layer==="above"?C(f._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?C(f._fullLayout._shapeLowerLayer):E.layer==="between"?C(O.shapelayerBetween):O._hadPlotinfo?C((O.mainplotinfo||O).shapelayer):C(f._fullLayout._shapeLowerLayer))}function y(f,S,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(f,E?"clip"+S._fullLayout._uid+E:null,S)}function m(f,S,w){return f.replace(u.segmentRE,function(E){var O=0,C=E.charAt(0),P=u.paramIsX[C],D=u.paramIsY[C],U=u.numParams[C];return C+E.substr(1).replace(u.paramRE,function(I){return O>=U||(P[O]?I=S(I):D[O]&&(I=w(I)),O++),I})})}function b(f){v(f)&&f._fullLayout._activeShapeIndex>=0&&(t(f),delete f._fullLayout._activeShapeIndex,x(f))}ee.exports={draw:x,drawOne:g,eraseActiveShape:function(f){if(v(f)){t(f);var S=f._fullLayout._activeShapeIndex,w=(f.layout||{}).shapes||[];if(S<w.length){for(var E=[],O=0;O<w.length;O++)O!==S&&E.push(w[O]);return delete f._fullLayout._activeShapeIndex,k.call("_guiRelayout",f,{shapes:E})}}},drawLabel:s}},92872:function(ee,R,e){var M=e(67824).overrideAll,k=e(45464),o=e(25376),T=e(98192).u,_=e(92880).extendFlat,p=e(21776).ye,s=e(97728);ee.exports=M({newshape:{visible:_({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:_({},k.legend,{}),legendgroup:_({},k.legendgroup,{}),legendgrouptitle:{text:_({},k.legendgrouptitle.text,{}),font:o({})},legendrank:_({},k.legendrank,{}),legendwidth:_({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:_({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:_({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:p({newshape:!0},{keys:Object.keys(s)}),font:o({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(ee){ee.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(ee,R,e){var M=e(76308),k=e(3400);ee.exports=function(o,T,_){if(_("newshape.visible"),_("newshape.name"),_("newshape.showlegend"),_("newshape.legend"),_("newshape.legendwidth"),_("newshape.legendgroup"),_("newshape.legendgrouptitle.text"),k.coerceFont(_,"newshape.legendgrouptitle.font"),_("newshape.legendrank"),_("newshape.drawdirection"),_("newshape.layer"),_("newshape.fillcolor"),_("newshape.fillrule"),_("newshape.opacity"),_("newshape.line.width")){var p=(o||{}).plot_bgcolor||"#FFF";_("newshape.line.color",M.contrast(p)),_("newshape.line.dash")}var s=o.dragmode==="drawline",t=_("newshape.label.text"),i=_("newshape.label.texttemplate");if(t||i){_("newshape.label.textangle");var r=_("newshape.label.textposition",s?"middle":"middle center");_("newshape.label.xanchor"),_("newshape.label.yanchor",function(n,a){return n?"bottom":a.indexOf("top")!==-1?"top":a.indexOf("bottom")!==-1?"bottom":"middle"}(s,r)),_("newshape.label.padding"),k.coerceFont(_,"newshape.label.font",T.font)}_("activeshape.fillcolor"),_("activeshape.opacity")}},9856:function(ee,R,e){var M=e(21984),k=e(7e3),o=k.CIRCLE_SIDES,T=k.SQRT2,_=e(5840),p=_.p2r,s=_.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function r(a,l){return Math.abs(a-l)<=1e-6}function n(a,l){var u=l[1]-a[1],h=l[2]-a[2];return Math.sqrt(u*u+h*h)}R.writePaths=function(a){var l=a.length;if(!l)return"M0,0Z";for(var u="",h=0;h<l;h++)for(var c=a[h].length,x=0;x<c;x++){var d=a[h][x][0];if(d==="Z")u+="Z";else for(var v=a[h][x].length,g=0;g<v;g++){var y=g;d==="Q"||d==="S"?y=i[g]:d==="C"&&(y=t[g]),u+=a[h][x][y],g>0&&g<v-1&&(u+=",")}}return u},R.readPaths=function(a,l,u,h){var c,x,d,v=M(a),g=[],y=-1,m=0,b=0,f=function(){x=m,d=b};f();for(var S=0;S<v.length;S++){var w,E,O,C,P=[],D=v[S][0],U=D;switch(D){case"M":g[++y]=[],m=+v[S][1],b=+v[S][2],P.push([U,m,b]),f();break;case"Q":case"S":w=+v[S][1],O=+v[S][2],m=+v[S][3],b=+v[S][4],P.push([U,m,b,w,O]);break;case"C":w=+v[S][1],O=+v[S][2],E=+v[S][3],C=+v[S][4],m=+v[S][5],b=+v[S][6],P.push([U,m,b,w,O,E,C]);break;case"T":case"L":m=+v[S][1],b=+v[S][2],P.push([U,m,b]);break;case"H":U="L",m=+v[S][1],P.push([U,m,b]);break;case"V":U="L",b=+v[S][1],P.push([U,m,b]);break;case"A":U="L";var I=+v[S][1],N=+v[S][2];+v[S][4]||(I=-I,N=-N);var W=m-I,F=b;for(c=1;c<=o/2;c++){var j=2*Math.PI*c/o;P.push([U,W+I*Math.cos(j),F+N*Math.sin(j)])}break;case"Z":m===x&&b===d||(m=x,b=d,P.push([U,m,b]))}for(var H=(u||{}).domain,te=l._fullLayout._size,Q=u&&u.xsizemode==="pixel",$=u&&u.ysizemode==="pixel",K=h===!1,X=0;X<P.length;X++){for(c=0;c+2<7;c+=2){var Y=P[X][c+1],re=P[X][c+2];Y!==void 0&&re!==void 0&&(m=Y,b=re,u&&(u.xaxis&&u.xaxis.p2r?(K&&(Y-=u.xaxis._offset),Y=Q?s(u.xaxis,u.xanchor)+Y:p(u.xaxis,Y)):(K&&(Y-=te.l),H?Y=H.x[0]+Y/te.w:Y/=te.w),u.yaxis&&u.yaxis.p2r?(K&&(re-=u.yaxis._offset),re=$?s(u.yaxis,u.yanchor)-re:p(u.yaxis,re)):(K&&(re-=te.t),re=H?H.y[1]-re/te.h:1-re/te.h)),P[X][c+1]=Y,P[X][c+2]=re)}g[y].push(P[X].slice())}}return g},R.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var l=1;l<3;l++)if(!r(a[0][l]-a[1][l],a[3][l]-a[2][l])||!r(a[0][l]-a[3][l],a[1][l]-a[2][l]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},R.pointsOnEllipse=function(a){var l=a.length;if(l!==o+1)return!1;l=o;for(var u=0;u<l;u++){var h=(2*l-u)%l,c=(l/2+h)%l,x=(l/2+u)%l;if(!r(n(a[u],a[x]),n(a[h],a[c])))return!1}return!0},R.handleEllipse=function(a,l,u){if(!a)return[l,u];var h=R.ellipseOver({x0:l[0],y0:l[1],x1:u[0],y1:u[1]}),c=(h.x1+h.x0)/2,x=(h.y1+h.y0)/2,d=(h.x1-h.x0)/2,v=(h.y1-h.y0)/2;d||(d=v/=T),v||(v=d/=T);for(var g=[],y=0;y<o;y++){var m=2*y*Math.PI/o;g.push([c+d*Math.cos(m),x+v*Math.sin(m)])}return g},R.ellipseOver=function(a){var l=a.x0,u=a.y0,h=a.x1,c=a.y1,x=h-l,d=c-u,v=((l-=x)+h)/2,g=((u-=d)+c)/2;return{x0:v-(x*=T),y0:g-(d*=T),x1:v+x,y1:g+d}},R.fixDatesForPaths=function(a,l,u){var h=l.type==="date",c=u.type==="date";if(!h&&!c)return a;for(var x=0;x<a.length;x++)for(var d=0;d<a[x].length;d++)for(var v=0;v+2<a[x][d].length;v+=2)h&&(a[x][d][v+1]=a[x][d][v+1].replace(" ","_")),c&&(a[x][d][v+2]=a[x][d][v+2].replace(" ","_"));return a}},93940:function(ee,R,e){var M=e(72760),k=M.drawMode,o=M.openMode,T=e(7e3),_=T.i000,p=T.i090,s=T.i180,t=T.i270,i=T.cos45,r=T.sin45,n=e(5840),a=n.p2r,l=n.r2p,u=e(1936).clearOutline,h=e(9856),c=h.readPaths,x=h.writePaths,d=h.ellipseOver,v=h.fixDatesForPaths;function g(y,m,b){var f,S=y[0][0],w=m.gd,E=S.getAttribute("d"),O=w._fullLayout.newshape,C=m.plotinfo,P=m.isActiveShape,D=C.xaxis,U=C.yaxis,I=!!C.domain||!C.xaxis,N=!!C.domain||!C.yaxis,W=o(b),F=c(E,w,C,P),j={editable:!0,visible:O.visible,name:O.name,showlegend:O.showlegend,legend:O.legend,legendwidth:O.legendwidth,legendgroup:O.legendgroup,legendgrouptitle:{text:O.legendgrouptitle.text,font:O.legendgrouptitle.font},legendrank:O.legendrank,label:O.label,xref:I?"paper":D._id,yref:N?"paper":U._id,layer:O.layer,opacity:O.opacity,line:{color:O.line.color,width:O.line.width,dash:O.line.dash}};if(W||(j.fillcolor=O.fillcolor,j.fillrule=O.fillrule),F.length===1&&(f=F[0]),f&&f.length===5&&b==="drawrect")j.type="rect",j.x0=f[0][1],j.y0=f[0][2],j.x1=f[2][1],j.y1=f[2][2];else if(f&&b==="drawline")j.type="line",j.x0=f[0][1],j.y0=f[0][2],j.x1=f[1][1],j.y1=f[1][2];else if(f&&b==="drawcircle"){j.type="circle";var H=f[_][1],te=f[p][1],Q=f[s][1],$=f[t][1],K=f[_][2],X=f[p][2],Y=f[s][2],re=f[t][2],se=C.xaxis&&(C.xaxis.type==="date"||C.xaxis.type==="log"),ae=C.yaxis&&(C.yaxis.type==="date"||C.yaxis.type==="log");se&&(H=l(C.xaxis,H),te=l(C.xaxis,te),Q=l(C.xaxis,Q),$=l(C.xaxis,$)),ae&&(K=l(C.yaxis,K),X=l(C.yaxis,X),Y=l(C.yaxis,Y),re=l(C.yaxis,re));var ce=(te+$)/2,fe=(K+Y)/2,he=d({x0:ce,y0:fe,x1:ce+($-te+Q-H)/2*i,y1:fe+(re-X+Y-K)/2*r});se&&(he.x0=a(C.xaxis,he.x0),he.x1=a(C.xaxis,he.x1)),ae&&(he.y0=a(C.yaxis,he.y0),he.y1=a(C.yaxis,he.y1)),j.x0=he.x0,j.y0=he.y0,j.x1=he.x1,j.y1=he.y1}else j.type="path",D&&U&&v(F,D,U),j.path=x(F),f=null;return j}ee.exports={newShapes:function(y,m){if(y.length&&y[0][0]){var b=m.gd,f=m.isActiveShape,S=m.dragmode,w=(b.layout||{}).shapes||[];if(!k(S)&&f!==void 0){var E=b._fullLayout._activeShapeIndex;if(E<w.length)switch(b._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var O=w[E].path||"";S=O[O.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var C=g(y,m,S);u(b);for(var P=m.editHelpers,D=(P||{}).modifyItem,U=[],I=0;I<w.length;I++){var N=b._fullLayout.shapes[I];if(U[I]=N._input,f!==void 0&&I===b._fullLayout._activeShapeIndex){var W=C;switch(N.type){case"line":case"rect":case"circle":D("x0",W.x0),D("x1",W.x1),D("y0",W.y0),D("y1",W.y1);break;case"path":D("path",W.path)}}}return f===void 0?(U.push(C),U):P?P.getUpdateObj():{}}},createShapeObj:g}},1936:function(ee){ee.exports={clearOutlineControllers:function(R){var e=R._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(R){var e=R._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),R._fullLayout._outlining=!1}}},65152:function(ee,R,e){var M=e(85448),k=e(3400),o=e(54460);R.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(_){return _}},R.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(_){return _}},R.decodeDate=function(T){return function(_){return _.replace&&(_=_.replace("_"," ")),T(_)}},R.encodeDate=function(T){return function(_){return T(_).replace(" ","_")}},R.extractPathCoords=function(T,_,p){var s=[];return T.match(M.segmentRE).forEach(function(t){var i=_[t.charAt(0)].drawn;if(i!==void 0){var r=t.substr(1).match(M.paramRE);if(r&&!(r.length<i)){var n=r[i],a=p?n:k.cleanNumber(n);s.push(a)}}}),s},R.getDataToPixel=function(T,_,p,s){var t,i=T._fullLayout._size;if(_)if(s==="domain")t=function(n){return _._length*(p?1-n:n)+_._offset};else{var r=R.shapePositionToRange(_);t=function(n){return _._offset+_.r2p(r(n,!0))},_.type==="date"&&(t=R.decodeDate(t))}else t=p?function(n){return i.t+i.h*(1-n)}:function(n){return i.l+i.w*n};return t},R.getPixelToData=function(T,_,p,s){var t,i=T._fullLayout._size;if(_)if(s==="domain")t=function(n){var a=(n-_._offset)/_._length;return p?1-a:a};else{var r=R.rangeToShapePosition(_);t=function(n){return r(_.p2r(n-_._offset))}}else t=p?function(n){return 1-(n-i.t)/i.h}:function(n){return(n-i.l)/i.w};return t},R.roundPositionForSharpStrokeRendering=function(T,_){var p=Math.round(_%2)===1,s=Math.round(T);return p?s+.5:s},R.makeShapesOptionsAndPlotinfo=function(T,_){var p=T._fullLayout.shapes[_]||{},s=T._fullLayout._plots[p.xref+p.yref];return s?s._hadPlotinfo=!0:(s={},p.xref&&p.xref!=="paper"&&(s.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&p.yref!=="paper"&&(s.yaxis=T._fullLayout[p.yref+"axis"])),s.xsizemode=p.xsizemode,s.ysizemode=p.ysizemode,s.xanchor=p.xanchor,s.yanchor=p.yanchor,{options:p,plotinfo:s}},R.makeSelectionsOptionsAndPlotinfo=function(T,_){var p=T._fullLayout.selections[_]||{},s=T._fullLayout._plots[p.xref+p.yref];return s?s._hadPlotinfo=!0:(s={},p.xref&&(s.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&(s.yaxis=T._fullLayout[p.yref+"axis"])),{options:p,plotinfo:s}},R.getPathString=function(T,_){var p,s,t,i,r,n,a,l,u=_.type,h=o.getRefType(_.xref),c=o.getRefType(_.yref),x=o.getFromId(T,_.xref),d=o.getFromId(T,_.yref),v=T._fullLayout._size;if(x?h==="domain"?s=function(O){return x._offset+x._length*O}:(p=R.shapePositionToRange(x),s=function(O){return x._offset+x.r2p(p(O,!0))}):s=function(O){return v.l+v.w*O},d?c==="domain"?i=function(O){return d._offset+d._length*(1-O)}:(t=R.shapePositionToRange(d),i=function(O){return d._offset+d.r2p(t(O,!0))}):i=function(O){return v.t+v.h*(1-O)},u==="path")return x&&x.type==="date"&&(s=R.decodeDate(s)),d&&d.type==="date"&&(i=R.decodeDate(i)),function(O,C,P){var D=O.path,U=O.xsizemode,I=O.ysizemode,N=O.xanchor,W=O.yanchor;return D.replace(M.segmentRE,function(F){var j=0,H=F.charAt(0),te=M.paramIsX[H],Q=M.paramIsY[H],$=M.numParams[H],K=F.substr(1).replace(M.paramRE,function(X){return te[j]?X=U==="pixel"?C(N)+Number(X):C(X):Q[j]&&(X=I==="pixel"?P(W)-Number(X):P(X)),++j>$&&(X="X"),X});return j>$&&(K=K.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+F)),H+K})}(_,s,i);if(_.xsizemode==="pixel"){var g=s(_.xanchor);r=g+_.x0,n=g+_.x1}else r=s(_.x0),n=s(_.x1);if(_.ysizemode==="pixel"){var y=i(_.yanchor);a=y-_.y0,l=y-_.y1}else a=i(_.y0),l=i(_.y1);if(u==="line")return"M"+r+","+a+"L"+n+","+l;if(u==="rect")return"M"+r+","+a+"H"+n+"V"+l+"H"+r+"Z";var m=(r+n)/2,b=(a+l)/2,f=Math.abs(m-r),S=Math.abs(b-a),w="A"+f+","+S,E=m+f+","+b;return"M"+E+w+" 0 1,1 "+m+","+(b-S)+w+" 0 0,1 "+E+"Z"}},41592:function(ee,R,e){var M=e(4016);ee.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:M.draw,drawOne:M.drawOne}},97728:function(ee){function R(o,T){return T?T.d2l(o):o}function e(o,T){return T?T.l2d(o):o}function M(o,T){return R(o.x1,T)-R(o.x0,T)}function k(o,T,_){return R(o.y1,_)-R(o.y0,_)}ee.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,T,_){return o.type!=="line"?void 0:k(o,0,_)/M(o,T)},dx:M,dy:k,width:function(o,T){return Math.abs(M(o,T))},height:function(o,T,_){return Math.abs(k(o,0,_))},length:function(o,T,_){return o.type!=="line"?void 0:Math.sqrt(Math.pow(M(o,T),2)+Math.pow(k(o,0,_),2))},xcenter:function(o,T){return e((R(o.x1,T)+R(o.x0,T))/2,T)},ycenter:function(o,T,_){return e((R(o.y1,_)+R(o.y0,_))/2,_)}}},89861:function(ee,R,e){var M=e(25376),k=e(66741),o=e(92880).extendDeepAll,T=e(67824).overrideAll,_=e(85656),p=e(31780).templatedArray,s=e(60876),t=p("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ee.exports=T(p("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:_.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},60876:function(ee){ee.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(ee,R,e){var M=e(3400),k=e(51272),o=e(89861),T=e(60876).name,_=o.steps;function p(t,i,r){function n(c,x){return M.coerce(t,i,o,c,x)}for(var a=k(t,i,{name:"steps",handleItemDefaults:s}),l=0,u=0;u<a.length;u++)a[u].visible&&l++;if(l<2?i.visible=!1:n("visible")){i._stepCount=l;var h=i._visibleSteps=M.filterVisible(a);(a[n("active")]||{}).visible||(i.active=h[0]._index),n("x"),n("y"),M.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),M.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),M.coerceFont(n,"currentvalue.font",i.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(t,i){function r(a,l){return M.coerce(t,i,_,a,l)}if(t.method==="skip"||Array.isArray(t.args)?r("visible"):i.visible=!1){r("method"),r("args");var n=r("label","step-"+i._index);r("value",n),r("execute")}}ee.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:p})}},79664:function(ee,R,e){var M=e(33428),k=e(7316),o=e(76308),T=e(43616),_=e(3400),p=_.strTranslate,s=e(72736),t=e(31780).arrayEditor,i=e(60876),r=e(84284),n=r.LINE_SPACING,a=r.FROM_TL,l=r.FROM_BR;function u(P){return i.autoMarginIdRoot+P._index}function h(P){return P._index}function c(P,D){var U=T.tester.selectAll("g."+i.labelGroupClass).data(D._visibleSteps);U.enter().append("g").classed(i.labelGroupClass,!0);var I=0,N=0;U.each(function(X){var Y=v(M.select(this),{step:X},D).node();if(Y){var re=T.bBox(Y);N=Math.max(N,re.height),I=Math.max(I,re.width)}}),U.remove();var W=D._dims={};W.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var F=P._fullLayout._size;W.lx=F.l+F.w*D.x,W.ly=F.t+F.h*(1-D.y),D.lenmode==="fraction"?W.outerLength=Math.round(F.w*D.len):W.outerLength=D.len,W.inputAreaStart=0,W.inputAreaLength=Math.round(W.outerLength-D.pad.l-D.pad.r);var j=(W.inputAreaLength-2*i.stepInset)/(D._stepCount-1),H=I+i.labelPadding;if(W.labelStride=Math.max(1,Math.ceil(H/j)),W.labelHeight=N,W.currentValueMaxWidth=0,W.currentValueHeight=0,W.currentValueTotalHeight=0,W.currentValueMaxLines=1,D.currentvalue.visible){var te=T.tester.append("g");U.each(function(X){var Y=x(te,D,X.label),re=Y.node()&&T.bBox(Y.node())||{width:0,height:0},se=s.lineCount(Y);W.currentValueMaxWidth=Math.max(W.currentValueMaxWidth,Math.ceil(re.width)),W.currentValueHeight=Math.max(W.currentValueHeight,Math.ceil(re.height)),W.currentValueMaxLines=Math.max(W.currentValueMaxLines,se)}),W.currentValueTotalHeight=W.currentValueHeight+D.currentvalue.offset,te.remove()}W.height=W.currentValueTotalHeight+i.tickOffset+D.ticklen+i.labelOffset+W.labelHeight+D.pad.t+D.pad.b;var Q="left";_.isRightAnchor(D)&&(W.lx-=W.outerLength,Q="right"),_.isCenterAnchor(D)&&(W.lx-=W.outerLength/2,Q="center");var $="top";_.isBottomAnchor(D)&&(W.ly-=W.height,$="bottom"),_.isMiddleAnchor(D)&&(W.ly-=W.height/2,$="middle"),W.outerLength=Math.ceil(W.outerLength),W.height=Math.ceil(W.height),W.lx=Math.round(W.lx),W.ly=Math.round(W.ly);var K={y:D.y,b:W.height*l[$],t:W.height*a[$]};D.lenmode==="fraction"?(K.l=0,K.xl=D.x-D.len*a[Q],K.r=0,K.xr=D.x+D.len*l[Q]):(K.x=D.x,K.l=W.outerLength*a[Q],K.r=W.outerLength*l[Q]),k.autoMargin(P,u(D),K)}function x(P,D,U){if(D.currentvalue.visible){var I,N,W=D._dims;switch(D.currentvalue.xanchor){case"right":I=W.inputAreaLength-i.currentValueInset-W.currentValueMaxWidth,N="left";break;case"center":I=.5*W.inputAreaLength,N="middle";break;default:I=i.currentValueInset,N="left"}var F=_.ensureSingle(P,"text",i.labelClass,function(K){K.attr({"text-anchor":N,"data-notex":1})}),j=D.currentvalue.prefix?D.currentvalue.prefix:"";if(typeof U=="string")j+=U;else{var H=D.steps[D.active].label,te=D._gd._fullLayout._meta;te&&(H=_.templateString(H,te)),j+=H}D.currentvalue.suffix&&(j+=D.currentvalue.suffix),F.call(T.font,D.currentvalue.font).text(j).call(s.convertToTspans,D._gd);var Q=s.lineCount(F),$=(W.currentValueMaxLines+1-Q)*D.currentvalue.font.size*n;return s.positionText(F,I,$),F}}function d(P,D,U){_.ensureSingle(P,"rect",i.gripRectClass,function(I){I.call(b,D,P,U).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(o.stroke,U.bordercolor).call(o.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function v(P,D,U){var I=_.ensureSingle(P,"text",i.labelClass,function(F){F.attr({"text-anchor":"middle","data-notex":1})}),N=D.step.label,W=U._gd._fullLayout._meta;return W&&(N=_.templateString(N,W)),I.call(T.font,U.font).text(N).call(s.convertToTspans,U._gd),I}function g(P,D){var U=_.ensureSingle(P,"g",i.labelsClass),I=D._dims,N=U.selectAll("g."+i.labelGroupClass).data(I.labelSteps);N.enter().append("g").classed(i.labelGroupClass,!0),N.exit().remove(),N.each(function(W){var F=M.select(this);F.call(v,W,D),T.setTranslate(F,w(D,W.fraction),i.tickOffset+D.ticklen+D.font.size*n+i.labelOffset+I.currentValueTotalHeight)})}function y(P,D,U,I,N){var W=Math.round(I*(U._stepCount-1)),F=U._visibleSteps[W]._index;F!==U.active&&m(P,D,U,F,!0,N)}function m(P,D,U,I,N,W){var F=U.active;U.active=I,t(P.layout,i.name,U).applyUpdate("active",I);var j=U.steps[U.active];D.call(S,U,W),D.call(x,U),P.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:N,previousActive:F}),j&&j.method&&N&&(D._nextMethod?(D._nextMethod.step=j,D._nextMethod.doCallback=N,D._nextMethod.doTransition=W):(D._nextMethod={step:j,doCallback:N,doTransition:W},D._nextMethodRaf=window.requestAnimationFrame(function(){var H=D._nextMethod.step;H.method&&(H.execute&&k.executeAPICommand(P,H.method,H.args),D._nextMethod=null,D._nextMethodRaf=null)})))}function b(P,D,U){if(!D._context.staticPlot){var I=U.node(),N=M.select(D);P.on("mousedown",F),P.on("touchstart",F)}function W(){return U.data()[0]}function F(){var j=W();D.emit("plotly_sliderstart",{slider:j});var H=U.select("."+i.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),H.call(o.fill,j.activebgcolor);var te=E(j,M.mouse(I)[0]);function Q(){var K=W(),X=E(K,M.mouse(I)[0]);y(D,U,K,X,!1)}function $(){var K=W();K._dragging=!1,H.call(o.fill,K.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),D.emit("plotly_sliderend",{slider:K,step:K.steps[K.active]})}y(D,U,j,te,!0),j._dragging=!0,N.on("mousemove",Q),N.on("touchmove",Q),N.on("mouseup",$),N.on("touchend",$)}}function f(P,D){var U=P.selectAll("rect."+i.tickRectClass).data(D._visibleSteps),I=D._dims;U.enter().append("rect").classed(i.tickRectClass,!0),U.exit().remove(),U.attr({width:D.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(N,W){var F=W%I.labelStride==0,j=M.select(this);j.attr({height:F?D.ticklen:D.minorticklen}).call(o.fill,D.tickcolor),T.setTranslate(j,w(D,W/(D._stepCount-1))-.5*D.tickwidth,(F?i.tickOffset:i.minorTickOffset)+I.currentValueTotalHeight)})}function S(P,D,U){for(var I=P.select("rect."+i.gripRectClass),N=0,W=0;W<D._stepCount;W++)if(D._visibleSteps[W]._index===D.active){N=W;break}var F=w(D,N/(D._stepCount-1));if(!D._invokingCommand){var j=I;U&&D.transition.duration>0&&(j=j.transition().duration(D.transition.duration).ease(D.transition.easing)),j.attr("transform",p(F-.5*i.gripWidth,D._dims.currentValueTotalHeight))}}function w(P,D){var U=P._dims;return U.inputAreaStart+i.stepInset+(U.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,D))}function E(P,D){var U=P._dims;return Math.min(1,Math.max(0,(D-i.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*i.stepInset-2*U.inputAreaStart)))}function O(P,D,U){var I=U._dims,N=_.ensureSingle(P,"rect",i.railTouchRectClass,function(W){W.call(b,D,P,U).style("pointer-events","all")});N.attr({width:I.inputAreaLength,height:Math.max(I.inputAreaWidth,i.tickOffset+U.ticklen+I.labelHeight)}).call(o.fill,U.bgcolor).attr("opacity",0),T.setTranslate(N,0,I.currentValueTotalHeight)}function C(P,D){var U=D._dims,I=U.inputAreaLength-2*i.railInset,N=_.ensureSingle(P,"rect",i.railRectClass);N.attr({width:I,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,D.bordercolor).call(o.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px"),T.setTranslate(N,i.railInset,.5*(U.inputAreaWidth-i.railWidth)+U.currentValueTotalHeight)}ee.exports=function(P){var D=P._context.staticPlot,U=P._fullLayout,I=function(te,Q){for(var $=te[i.name],K=[],X=0;X<$.length;X++){var Y=$[X];Y.visible&&(Y._gd=Q,K.push(Y))}return K}(U,P),N=U._infolayer.selectAll("g."+i.containerClassName).data(I.length>0?[0]:[]);function W(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),k.autoMargin(P,u(te))}if(N.enter().append("g").classed(i.containerClassName,!0).style("cursor",D?null:"ew-resize"),N.exit().each(function(){M.select(this).selectAll("g."+i.groupClassName).each(W)}).remove(),I.length!==0){var F=N.selectAll("g."+i.groupClassName).data(I,h);F.enter().append("g").classed(i.groupClassName,!0),F.exit().each(W).remove();for(var j=0;j<I.length;j++){var H=I[j];c(P,H)}F.each(function(te){var Q=M.select(this);(function($){var K=$._dims;K.labelSteps=[];for(var X=$._stepCount,Y=0;Y<X;Y+=K.labelStride)K.labelSteps.push({fraction:Y/(X-1),step:$._visibleSteps[Y]})})(te),k.manageCommandObserver(P,te,te._visibleSteps,function($){var K=Q.data()[0];K.active!==$.index&&(K._dragging||m(P,Q,K,$.index,!1,!0))}),function($,K,X){(X.steps[X.active]||{}).visible||(X.active=X._visibleSteps[0]._index),K.call(x,X).call(C,X).call(g,X).call(f,X).call(O,$,X).call(d,$,X);var Y=X._dims;T.setTranslate(K,Y.lx+X.pad.l,Y.ly+X.pad.t),K.call(S,X,!1),K.call(x,X)}(P,M.select(this),te)})}}},97544:function(ee,R,e){var M=e(60876);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(ee,R,e){var M=e(33428),k=e(38248),o=e(7316),T=e(24040),_=e(3400),p=_.strTranslate,s=e(43616),t=e(76308),i=e(72736),r=e(13448),n=e(84284).OPPOSITE_SIDE,a=/ [XY][0-9]* /;ee.exports={draw:function(l,u,h){var c,x=h.propContainer,d=h.propName,v=h.placeholder,g=h.traceIndex,y=h.avoid||{},m=h.attributes,b=h.transform,f=h.containerGroup,S=l._fullLayout,w=1,E=!1,O=x.title,C=(O&&O.text?O.text:"").trim(),P=O&&O.font?O.font:{},D=P.family,U=P.size,I=P.color,N=P.weight,W=P.style,F=P.variant,j=P.textcase,H=P.lineposition,te=P.shadow;d==="title.text"?c="titleText":d.indexOf("axis")!==-1?c="axisTitleText":d.indexOf(!0)&&(c="colorbarTitleText");var Q=l._context.edits[c];C===""?w=0:C.replace(a," % ")===v.replace(a," % ")&&(w=.2,E=!0,Q||(C="")),h._meta?C=_.templateString(C,h._meta):S._meta&&(C=_.templateString(C,S._meta));var $,K=C||Q;f||(f=_.ensureSingle(S._infolayer,"g","g-"+u),$=S._hColorbarMoveTitle);var X=f.selectAll("text").data(K?[0]:[]);if(X.enter().append("text"),X.text(C).attr("class",u),X.exit().remove(),!K)return f;function Y(ae){_.syncOrAsync([re,se],ae)}function re(ae){var ce;return!b&&$&&(b={}),b?(ce="",b.rotate&&(ce+="rotate("+[b.rotate,m.x,m.y]+")"),(b.offset||$)&&(ce+=p(0,(b.offset||0)-($||0)))):ce=null,ae.attr("transform",ce),ae.style("opacity",w*t.opacity(I)).call(s.font,{color:t.rgb(I),size:M.round(U,2),family:D,weight:N,style:W,variant:F,textcase:j,shadow:te,lineposition:H}).attr(m).call(i.convertToTspans,l),o.previousPromises(l)}function se(ae){var ce=M.select(ae.node().parentNode);if(y&&y.selection&&y.side&&C){ce.attr("transform",null);var fe=n[y.side],he=y.side==="left"||y.side==="top"?-1:1,ve=k(y.pad)?y.pad:2,ye=s.bBox(ce.node()),me={t:0,b:0,l:0,r:0},Me=l._fullLayout._reservedMargin;for(var Pe in Me)for(var ge in Me[Pe]){var oe=Me[Pe][ge];me[ge]=Math.max(me[ge],oe)}var ie={left:me.l,top:me.t,right:S.width-me.r,bottom:S.height-me.b},de=y.maxShift||he*(ie[y.side]-ye[y.side]),Se=0;if(de<0)Se=de;else{var _e=y.offsetLeft||0,we=y.offsetTop||0;ye.left-=_e,ye.right-=_e,ye.top-=we,ye.bottom-=we,y.selection.each(function(){var Oe=s.bBox(this);_.bBoxIntersect(ye,Oe,ve)&&(Se=Math.max(Se,he*(Oe[y.side]-ye[fe])+ve))}),Se=Math.min(de,Se),x._titleScoot=Math.abs(Se)}if(Se>0||de<0){var Ae={left:[-Se,0],right:[Se,0],top:[0,-Se],bottom:[0,Se]}[y.side];ce.attr("transform",p(Ae[0],Ae[1]))}}}return X.call(Y),Q&&(C?X.on(".opacity",null):(w=0,E=!0,X.text(v).on("mouseover.opacity",function(){M.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),X.call(i.makeEditable,{gd:l}).on("edit",function(ae){g!==void 0?T.call("_guiRestyle",l,d,ae,g):T.call("_guiRelayout",l,d,ae)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Y)}).on("input",function(ae){this.text(ae||" ").call(i.positionText,m.x,m.y)})),X.classed("js-placeholder",E),f}}},88444:function(ee,R,e){var M=e(25376),k=e(22548),o=e(92880).extendFlat,T=e(67824).overrideAll,_=e(66741),p=e(31780).templatedArray,s=p("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ee.exports=T(p("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(_({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(ee){ee.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},91384:function(ee,R,e){var M=e(3400),k=e(51272),o=e(88444),T=e(73712).name,_=o.buttons;function p(t,i,r){function n(a,l){return M.coerce(t,i,o,a,l)}n("visible",k(t,i,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),M.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),M.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(t,i){function r(n,a){return M.coerce(t,i,_,n,a)}r("visible",t.method==="skip"||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}ee.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:p})}},14420:function(ee,R,e){var M=e(33428),k=e(7316),o=e(76308),T=e(43616),_=e(3400),p=e(72736),s=e(31780).arrayEditor,t=e(84284).LINE_SPACING,i=e(73712),r=e(37400);function n(w){return w._index}function a(w,E){return+w.attr(i.menuIndexAttrName)===E._index}function l(w,E,O,C,P,D,U,I){E.active=U,s(w.layout,i.name,E).applyUpdate("active",U),E.type==="buttons"?h(w,C,null,null,E):E.type==="dropdown"&&(P.attr(i.menuIndexAttrName,"-1"),u(w,C,P,D,E),I||h(w,C,P,D,E))}function u(w,E,O,C,P){var D=_.ensureSingle(E,"g",i.headerClassName,function(j){j.style("pointer-events","all")}),U=P._dims,I=P.active,N=P.buttons[I]||i.blankHeaderOpts,W={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},F={width:U.headerWidth,height:U.headerHeight};D.call(c,P,N,w).call(f,P,W,F),_.ensureSingle(E,"text",i.headerArrowClassName,function(j){j.attr("text-anchor","end").call(T.font,P.font).text(i.arrowSymbol[P.direction])}).attr({x:U.headerWidth-i.arrowOffsetX+P.pad.l,y:U.headerHeight/2+i.textOffsetY+P.pad.t}),D.on("click",function(){O.call(S,String(a(O,P)?-1:P._index)),h(w,E,O,C,P)}),D.on("mouseover",function(){D.call(g)}),D.on("mouseout",function(){D.call(y,P)}),T.setTranslate(E,U.lx,U.ly)}function h(w,E,O,C,P){O||(O=E).attr("pointer-events","all");var D=function(K){return+K.attr(i.menuIndexAttrName)==-1}(O)&&P.type!=="buttons"?[]:P.buttons,U=P.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,I=O.selectAll("g."+U).data(_.filterVisible(D)),N=I.enter().append("g").classed(U,!0),W=I.exit();P.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),W.transition().attr("opacity","0").remove()):W.remove();var F=0,j=0,H=P._dims,te=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(te?j=H.headerHeight+i.gapButtonHeader:F=H.headerWidth+i.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(j=-i.gapButtonHeader+i.gapButton-H.openHeight),P.type==="dropdown"&&P.direction==="left"&&(F=-i.gapButtonHeader+i.gapButton-H.openWidth);var Q={x:H.lx+F+P.pad.l,y:H.ly+j+P.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},$={l:Q.x+P.borderwidth,t:Q.y+P.borderwidth};I.each(function(K,X){var Y=M.select(this);Y.call(c,P,K,w).call(f,P,Q),Y.on("click",function(){M.event.defaultPrevented||(K.execute&&(K.args2&&P.active===X?(l(w,P,0,E,O,C,-1),k.executeAPICommand(w,K.method,K.args2)):(l(w,P,0,E,O,C,X),k.executeAPICommand(w,K.method,K.args))),w.emit("plotly_buttonclicked",{menu:P,button:K,active:P.active}))}),Y.on("mouseover",function(){Y.call(g)}),Y.on("mouseout",function(){Y.call(y,P),I.call(v,P)})}),I.call(v,P),te?($.w=Math.max(H.openWidth,H.headerWidth),$.h=Q.y-$.t):($.w=Q.x-$.l,$.h=Math.max(H.openHeight,H.headerHeight)),$.direction=P.direction,C&&(I.size()?function(K,X,Y,re,se,ae){var ce,fe,he,ve=se.direction,ye=ve==="up"||ve==="down",me=se._dims,Me=se.active;if(ye)for(fe=0,he=0;he<Me;he++)fe+=me.heights[he]+i.gapButton;else for(ce=0,he=0;he<Me;he++)ce+=me.widths[he]+i.gapButton;re.enable(ae,ce,fe),re.hbar&&re.hbar.attr("opacity","0").transition().attr("opacity","1"),re.vbar&&re.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,P,$):function(K){var X=!!K.hbar,Y=!!K.vbar;X&&K.hbar.transition().attr("opacity","0").each("end",function(){X=!1,Y||K.disable()}),Y&&K.vbar.transition().attr("opacity","0").each("end",function(){Y=!1,X||K.disable()})}(C))}function c(w,E,O,C){w.call(x,E).call(d,E,O,C)}function x(w,E){_.ensureSingle(w,"rect",i.itemRectClassName,function(O){O.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,E.bordercolor).call(o.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function d(w,E,O,C){var P=_.ensureSingle(w,"text",i.itemTextClassName,function(I){I.attr({"text-anchor":"start","data-notex":1})}),D=O.label,U=C._fullLayout._meta;U&&(D=_.templateString(D,U)),P.call(T.font,E.font).text(D).call(p.convertToTspans,C)}function v(w,E){var O=E.active;w.each(function(C,P){var D=M.select(this);P===O&&E.showactive&&D.select("rect."+i.itemRectClassName).call(o.fill,i.activeColor)})}function g(w){w.select("rect."+i.itemRectClassName).call(o.fill,i.hoverColor)}function y(w,E){w.select("rect."+i.itemRectClassName).call(o.fill,E.bgcolor)}function m(w,E){var O=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+i.dropdownButtonClassName).data(_.filterVisible(E.buttons));C.enter().append("g").classed(i.dropdownButtonClassName,!0);var P=["up","down"].indexOf(E.direction)!==-1;C.each(function(F,j){var H=M.select(this);H.call(c,E,F,w);var te=H.select("."+i.itemTextClassName),Q=te.node()&&T.bBox(te.node()).width,$=Math.max(Q+i.textPadX,i.minWidth),K=E.font.size*t,X=p.lineCount(te),Y=Math.max(K*X,i.minHeight)+i.textOffsetY;Y=Math.ceil(Y),$=Math.ceil($),O.widths[j]=$,O.heights[j]=Y,O.height1=Math.max(O.height1,Y),O.width1=Math.max(O.width1,$),P?(O.totalWidth=Math.max(O.totalWidth,$),O.openWidth=O.totalWidth,O.totalHeight+=Y+i.gapButton,O.openHeight+=Y+i.gapButton):(O.totalWidth+=$+i.gapButton,O.openWidth+=$+i.gapButton,O.totalHeight=Math.max(O.totalHeight,Y),O.openHeight=O.totalHeight)}),P?O.totalHeight-=i.gapButton:O.totalWidth-=i.gapButton,O.headerWidth=O.width1+i.arrowPadX,O.headerHeight=O.height1,E.type==="dropdown"&&(P?(O.width1+=i.arrowPadX,O.totalHeight=O.height1):O.totalWidth=O.width1,O.totalWidth+=i.arrowPadX),C.remove();var D=O.totalWidth+E.pad.l+E.pad.r,U=O.totalHeight+E.pad.t+E.pad.b,I=w._fullLayout._size;O.lx=I.l+I.w*E.x,O.ly=I.t+I.h*(1-E.y);var N="left";_.isRightAnchor(E)&&(O.lx-=D,N="right"),_.isCenterAnchor(E)&&(O.lx-=D/2,N="center");var W="top";_.isBottomAnchor(E)&&(O.ly-=U,W="bottom"),_.isMiddleAnchor(E)&&(O.ly-=U/2,W="middle"),O.totalWidth=Math.ceil(O.totalWidth),O.totalHeight=Math.ceil(O.totalHeight),O.lx=Math.round(O.lx),O.ly=Math.round(O.ly),k.autoMargin(w,b(E),{x:E.x,y:E.y,l:D*({right:1,center:.5}[N]||0),r:D*({left:1,center:.5}[N]||0),b:U*({top:1,middle:.5}[W]||0),t:U*({bottom:1,middle:.5}[W]||0)})}function b(w){return i.autoMarginIdRoot+w._index}function f(w,E,O,C){C=C||{};var P=w.select("."+i.itemRectClassName),D=w.select("."+i.itemTextClassName),U=E.borderwidth,I=O.index,N=E._dims;T.setTranslate(w,U+O.x,U+O.y);var W=["up","down"].indexOf(E.direction)!==-1,F=C.height||(W?N.heights[I]:N.height1);P.attr({x:0,y:0,width:C.width||(W?N.width1:N.widths[I]),height:F});var j=E.font.size*t,H=(p.lineCount(D)-1)*j/2;p.positionText(D,i.textOffsetX,F/2-H+i.textOffsetY),W?O.y+=N.heights[I]+O.yPad:O.x+=N.widths[I]+O.xPad,O.index++}function S(w,E){w.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}ee.exports=function(w){var E=w._fullLayout,O=_.filterVisible(E[i.name]);function C(j){k.autoMargin(w,b(j))}var P=E._menulayer.selectAll("g."+i.containerClassName).data(O.length>0?[0]:[]);if(P.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){M.select(this).selectAll("g."+i.headerGroupClassName).each(C)}).remove(),O.length!==0){var D=P.selectAll("g."+i.headerGroupClassName).data(O,n);D.enter().append("g").classed(i.headerGroupClassName,!0);for(var U=_.ensureSingle(P,"g",i.dropdownButtonGroupClassName,function(j){j.style("pointer-events","all")}),I=0;I<O.length;I++){var N=O[I];m(w,N)}var W="updatemenus"+E._uid,F=new r(w,U,W);D.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(S)),D.exit().each(function(j){U.call(S),C(j)}).remove(),D.each(function(j){var H=M.select(this),te=j.type==="dropdown"?U:null;k.manageCommandObserver(w,j,j.buttons,function(Q){l(w,j,j.buttons[Q.index],H,te,F,Q.index,!0)}),j.type==="dropdown"?(u(w,H,U,F,j),a(U,j)&&h(w,H,U,F,j)):h(w,H,null,null,j)})}}},76908:function(ee,R,e){var M=e(73712);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(ee,R,e){ee.exports=_;var M=e(33428),k=e(76308),o=e(43616),T=e(3400);function _(p,s,t){this.gd=p,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}_.barWidth=2,_.barLength=20,_.barRadius=2,_.barPad=1,_.barColor="#808BA4",_.prototype.enable=function(p,s,t){var i=this.gd._fullLayout,r=i.width,n=i.height;this.position=p;var a,l,u,h,c=this.position.l,x=this.position.w,d=this.position.t,v=this.position.h,g=this.position.direction,y=g==="down",m=g==="left",b=g==="up",f=x,S=v;y||m||g==="right"||b||(this.position.direction="down",y=!0),y||b?(l=(a=c)+f,y?(u=d,S=(h=Math.min(u+S,n))-u):S=(h=d+S)-(u=Math.max(h-S,0))):(h=(u=d)+S,m?f=(l=c+f)-(a=Math.max(l-f,0)):(a=c,f=(l=Math.min(a+f,r))-a)),this._box={l:a,t:u,w:f,h:S};var w=x>f,E=_.barLength+2*_.barPad,O=_.barWidth+2*_.barPad,C=c,P=d+v;P+O>n&&(P=n-O);var D=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);D.exit().on(".drag",null).remove(),D.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,_.barColor),w?(this.hbar=D.attr({rx:_.barRadius,ry:_.barRadius,x:C,y:P,width:E,height:O}),this._hbarXMin=C+E/2,this._hbarTranslateMax=f-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=v>S,I=_.barWidth+2*_.barPad,N=_.barLength+2*_.barPad,W=c+x,F=d;W+I>r&&(W=r-I);var j=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);j.exit().on(".drag",null).remove(),j.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,_.barColor),U?(this.vbar=j.attr({rx:_.barRadius,ry:_.barRadius,x:W,y:F,width:I,height:N}),this._vbarYMin=F+N/2,this._vbarTranslateMax=S-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var H=this.id,te=a-.5,Q=U?l+I+.5:l+.5,$=u-.5,K=w?h+O+.5:h+.5,X=i._topdefs.selectAll("#"+H).data(w||U?[0]:[]);if(X.exit().remove(),X.enter().append("clipPath").attr("id",H).append("rect"),w||U?(this._clipRect=X.select("rect").attr({x:Math.floor(te),y:Math.floor($),width:Math.ceil(Q)-Math.floor(te),height:Math.ceil(K)-Math.floor($)}),this.container.call(o.setClipUrl,H,this.gd),this.bg.attr({x:c,y:d,width:x,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),w||U){var Y=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Y);var re=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(re),U&&this.vbar.on(".drag",null).call(re)}this.setTranslate(s,t)},_.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},_.prototype._onBoxDrag=function(){var p=this.translateX,s=this.translateY;this.hbar&&(p-=M.event.dx),this.vbar&&(s-=M.event.dy),this.setTranslate(p,s)},_.prototype._onBoxWheel=function(){var p=this.translateX,s=this.translateY;this.hbar&&(p+=M.event.deltaY),this.vbar&&(s+=M.event.deltaY),this.setTranslate(p,s)},_.prototype._onBarDrag=function(){var p=this.translateX,s=this.translateY;if(this.hbar){var t=p+this._hbarXMin,i=t+this._hbarTranslateMax;p=(T.constrain(M.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(T.constrain(M.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(p,s)},_.prototype.setTranslate=function(p,s){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;if(p=T.constrain(p||0,0,t),s=T.constrain(s||0,0,i),this.translateX=p,this.translateY=s,this.container.call(o.setTranslate,this._box.l-this.position.l-p,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+p-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=p/t;this.hbar.call(o.setTranslate,p+r*this._hbarTranslateMax,s)}if(this.vbar){var n=s/i;this.vbar.call(o.setTranslate,p,s+n*this._vbarTranslateMax)}}},84284:function(ee){ee.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(ee){ee.exports={axisRefDescription:function(R,e,M){return["If set to a",R,"axis id (e.g. *"+R+"* or","*"+R+"2*), the `"+R+"` position refers to a",R,"coordinate. If set to *paper*, the `"+R+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+M+"). If set to a",R,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+R+"2 domain* refers to the domain of the second",R," axis and a",R,"position of 0.5 refers to the","point between the",e,"and the",M,"of the domain of the","second",R,"axis."].join(" ")}}},48164:function(ee){ee.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},26880:function(ee){ee.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(ee){ee.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(ee){ee.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(ee){ee.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},13448:function(ee){ee.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(ee){ee.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},2264:function(ee,R){R.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],R.STYLE=R.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(ee,R){R.xmlns="http://www.w3.org/2000/xmlns/",R.svg="http://www.w3.org/2000/svg",R.xlink="http://www.w3.org/1999/xlink",R.svgAttrs={xmlns:R.svg,"xmlns:xlink":R.xlink}},64884:function(ee,R,e){R.version=e(25788).version,e(88324),e(79288);for(var M=e(24040),k=R.register=M.register,o=e(22448),T=Object.keys(o),_=0;_<T.length;_++){var p=T[_];p.charAt(0)!=="_"&&(R[p]=o[p]),k({moduleType:"apiMethod",name:p,fn:o[p]})}k(e(65875)),k([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),k([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),R.Icons=e(9224);var s=e(93024),t=e(7316);R.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},R.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},R.Snapshot=e(78904),R.PlotSchema=e(73060)},9224:function(ee){ee.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(ee,R){R.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},R.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},R.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},R.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},R.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},R.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(ee,R,e){var M=e(20435),k=M.mod,o=M.modHalf,T=Math.PI,_=2*T;function p(r){return Math.abs(r[1]-r[0])>_-1e-14}function s(r,n){return o(n-r,_)}function t(r,n){if(p(n))return!0;var a,l;n[0]<n[1]?(a=n[0],l=n[1]):(a=n[1],l=n[0]),(a=k(a,_))>(l=k(l,_))&&(l+=_);var u=k(r,_),h=u+_;return u>=a&&u<=l||h>=a&&h<=l}function i(r,n,a,l,u,h,c){u=u||0,h=h||0;var x,d,v,g,y,m=p([a,l]);function b(E,O){return[E*Math.cos(O)+u,h-E*Math.sin(O)]}m?(x=0,d=T,v=_):a<l?(x=a,v=l):(x=l,v=a),r<n?(g=r,y=n):(g=n,y=r);var f,S=Math.abs(v-x)<=T?0:1;function w(E,O,C){return"A"+[E,E]+" "+[0,S,C]+" "+b(E,O)}return m?f=g===null?"M"+b(y,x)+w(y,d,0)+w(y,v,0)+"Z":"M"+b(g,x)+w(g,d,0)+w(g,v,0)+"ZM"+b(y,x)+w(y,d,1)+w(y,v,1)+"Z":g===null?(f="M"+b(y,x)+w(y,v,0),c&&(f+="L0,0Z")):f="M"+b(g,x)+"L"+b(y,x)+w(y,v,0)+"L"+b(g,v)+w(g,x,1)+"Z",f}ee.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:p,isAngleInsideSector:t,isPtInsideSector:function(r,n,a,l){return!!t(n,l)&&(a[0]<a[1]?(u=a[0],h=a[1]):(u=a[1],h=a[0]),r>=u&&r<=h);var u,h},pathArc:function(r,n,a,l,u){return i(null,r,n,a,l,u,0)},pathSector:function(r,n,a,l,u){return i(null,r,n,a,l,u,1)},pathAnnulus:function(r,n,a,l,u,h){return i(r,n,a,l,u,h,1)}}},38116:function(ee,R,e){var M=e(83160).decode,k=e(63620),o=Array.isArray,T=ArrayBuffer,_=DataView;function p(n){return T.isView(n)&&!(n instanceof _)}function s(n){return o(n)||p(n)}R.isTypedArray=p,R.isArrayOrTypedArray=s,R.isArray1D=function(n){return!s(n[0])},R.ensureArray=function(n,a){return o(n)||(n=[]),n.length=a,n};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function i(n){return n.constructor===ArrayBuffer}function r(n,a,l){if(s(n)){if(s(n[0])){for(var u=l,h=0;h<n.length;h++)u=a(u,n[h].length);return u}return n.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,R.isArrayBuffer=i,R.decodeTypedArraySpec=function(n){var a=[],l=function(E){return{bdata:E.bdata,dtype:E.dtype,shape:E.shape}}(n),u=l.dtype,h=t[u];if(!h)throw new Error('Error in dtype: "'+u+'"');var c=h.BYTES_PER_ELEMENT,x=l.bdata;i(x)||(x=M(x));var d=l.shape===void 0?[x.byteLength/c]:(""+l.shape).split(",");d.reverse();var v,g,y=d.length,m=+d[0],b=c*m,f=0;if(y===1)a=new h(x);else if(y===2)for(v=+d[1],g=0;g<v;g++)a[g]=new h(x,f,m),f+=b;else{if(y!==3)throw new Error("ndim: "+y+'is not supported with the shape:"'+l.shape+'"');v=+d[1];for(var S=+d[2],w=0;w<S;w++)for(a[w]=[],g=0;g<v;g++)a[w][g]=new h(x,f,m),f+=b}return a.bdata=l.bdata,a.dtype=l.dtype,a.shape=d.reverse().join(","),n._inputArray=a,a},R.isTypedArraySpec=function(n){return k(n)&&n.hasOwnProperty("dtype")&&typeof n.dtype=="string"&&n.hasOwnProperty("bdata")&&(typeof n.bdata=="string"||i(n.bdata))&&(n.shape===void 0||n.hasOwnProperty("shape")&&(typeof n.shape=="string"||typeof n.shape=="number"))},R.concat=function(){var n,a,l,u,h,c,x,d,v=[],g=!0,y=0;for(l=0;l<arguments.length;l++)(c=(u=arguments[l]).length)&&(a?v.push(u):(a=u,h=c),o(u)?n=!1:(g=!1,y?n!==u.constructor&&(n=!1):n=u.constructor),y+=c);if(!y)return[];if(!v.length)return a;if(g)return a.concat.apply(a,v);if(n){for((x=new n(y)).set(a),l=0;l<v.length;l++)u=v[l],x.set(u,h),h+=u.length;return x}for(x=new Array(y),d=0;d<a.length;d++)x[d]=a[d];for(l=0;l<v.length;l++){for(u=v[l],d=0;d<u.length;d++)x[h+d]=u[d];h+=d}return x},R.maxRowLength=function(n){return r(n,Math.max,0)},R.minRowLength=function(n){return r(n,Math.min,1/0)}},54037:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ee.exports=function(T){return typeof T=="string"&&(T=T.replace(o,"")),M(T)?Number(T):k}},73696:function(ee){ee.exports=function(R){var e=R._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},75352:function(ee){ee.exports=function(R){R._responsiveChartHandler&&(window.removeEventListener("resize",R._responsiveChartHandler),delete R._responsiveChartHandler)}},63064:function(ee,R,e){var M=e(38248),k=e(49760),o=e(92880).extendFlat,T=e(45464),_=e(88304),p=e(76308),s=e(13448).DESELECTDIM,t=e(22296),i=e(53756).counter,r=e(20435).modHalf,n=e(38116).isArrayOrTypedArray,a=e(38116).isTypedArraySpec,l=e(38116).decodeTypedArraySpec;function u(h,c){var x=R.valObjectMeta[c.valType];if(c.arrayOk&&n(h))return!0;if(x.validateFunction)return x.validateFunction(h,c);var d={},v=d,g={set:function(y){v=y}};return x.coerceFunction(h,g,d,c),v!==d}R.valObjectMeta={data_array:{coerceFunction:function(h,c,x){c.set(n(h)?h:a(h)?l(h):x)}},enumerated:{coerceFunction:function(h,c,x,d){d.coerceNumber&&(h=+h),d.values.indexOf(h)===-1?c.set(x):c.set(h)},validateFunction:function(h,c){c.coerceNumber&&(h=+h);for(var x=c.values,d=0;d<x.length;d++){var v=String(x[d]);if(v.charAt(0)==="/"&&v.charAt(v.length-1)==="/"){if(new RegExp(v.substr(1,v.length-2)).test(h))return!0}else if(h===x[d])return!0}return!1}},boolean:{coerceFunction:function(h,c,x){h===!0||h===!1?c.set(h):c.set(x)}},number:{coerceFunction:function(h,c,x,d){a(h)&&(h=l(h)),!M(h)||d.min!==void 0&&h<d.min||d.max!==void 0&&h>d.max?c.set(x):c.set(+h)}},integer:{coerceFunction:function(h,c,x,d){(d.extras||[]).indexOf(h)===-1?(a(h)&&(h=l(h)),h%1||!M(h)||d.min!==void 0&&h<d.min||d.max!==void 0&&h>d.max?c.set(x):c.set(+h)):c.set(h)}},string:{coerceFunction:function(h,c,x,d){if(typeof h!="string"){var v=typeof h=="number";d.strict!==!0&&v?c.set(String(h)):c.set(x)}else d.noBlank&&!h?c.set(x):c.set(h)}},color:{coerceFunction:function(h,c,x){a(h)&&(h=l(h)),k(h).isValid()?c.set(h):c.set(x)}},colorlist:{coerceFunction:function(h,c,x){Array.isArray(h)&&h.length&&h.every(function(d){return k(d).isValid()})?c.set(h):c.set(x)}},colorscale:{coerceFunction:function(h,c,x){c.set(_.get(h,x))}},angle:{coerceFunction:function(h,c,x){a(h)&&(h=l(h)),h==="auto"?c.set("auto"):M(h)?c.set(r(+h,360)):c.set(x)}},subplotid:{coerceFunction:function(h,c,x,d){var v=d.regex||i(x);typeof h=="string"&&v.test(h)?c.set(h):c.set(x)},validateFunction:function(h,c){var x=c.dflt;return h===x||typeof h=="string"&&!!i(x).test(h)}},flaglist:{coerceFunction:function(h,c,x,d){if((d.extras||[]).indexOf(h)===-1)if(typeof h=="string"){for(var v=h.split("+"),g=0;g<v.length;){var y=v[g];d.flags.indexOf(y)===-1||v.indexOf(y)<g?v.splice(g,1):g++}v.length?c.set(v.join("+")):c.set(x)}else c.set(x);else c.set(h)}},any:{coerceFunction:function(h,c,x){h===void 0?c.set(x):c.set(a(h)?l(h):h)}},info_array:{coerceFunction:function(h,c,x,d){function v(I,N,W){var F,j={set:function(H){F=H}};return W===void 0&&(W=N.dflt),R.valObjectMeta[N.valType].coerceFunction(I,j,W,N),F}if(a(h)&&(h=l(h)),n(h)){var g,y,m,b,f,S,w=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(h)&&n(h[0]),E=d.items,O=[],C=Array.isArray(E),P=C&&w&&n(E[0]),D=w&&C&&!P,U=C&&!D?E.length:h.length;if(x=Array.isArray(x)?x:[],w)for(g=0;g<U;g++)for(O[g]=[],m=n(h[g])?h[g]:[],f=D?E.length:C?E[g].length:m.length,y=0;y<f;y++)b=D?E[y]:C?E[g][y]:E,(S=v(m[y],b,(x[g]||[])[y]))!==void 0&&(O[g][y]=S);else for(g=0;g<U;g++)(S=v(h[g],C?E[g]:E,x[g]))!==void 0&&(O[g]=S);c.set(O)}else c.set(x)},validateFunction:function(h,c){if(!n(h))return!1;var x=c.items,d=Array.isArray(x),v=c.dimensions===2;if(!c.freeLength&&h.length!==x.length)return!1;for(var g=0;g<h.length;g++)if(v){if(!n(h[g])||!c.freeLength&&h[g].length!==x[g].length)return!1;for(var y=0;y<h[g].length;y++)if(!u(h[g][y],d?x[g][y]:x))return!1}else if(!u(h[g],d?x[g]:x))return!1;return!0}}},R.coerce=function(h,c,x,d,v){var g=t(x,d).get(),y=t(h,d),m=t(c,d),b=y.get(),f=c._template;if(b===void 0&&f&&(b=t(f,d).get(),f=0),v===void 0&&(v=g.dflt),g.arrayOk){if(n(b))return m.set(b),b;if(a(b))return b=l(b),m.set(b),b}var S=R.valObjectMeta[g.valType].coerceFunction;S(b,m,v,g);var w=m.get();return f&&w===v&&!u(b,g)&&(S(b=t(f,d).get(),m,v,g),w=m.get()),w},R.coerce2=function(h,c,x,d,v){var g=t(h,d),y=R.coerce(h,c,x,d,v);return g.get()!=null&&y},R.coerceFont=function(h,c,x,d){d||(d={}),x=o({},x);var v={family:h(c+".family",(x=o(x,d.overrideDflt||{})).family),size:h(c+".size",x.size),color:h(c+".color",x.color),weight:h(c+".weight",x.weight),style:h(c+".style",x.style)};if(d.noFontVariant||(v.variant=h(c+".variant",x.variant)),d.noFontLineposition||(v.lineposition=h(c+".lineposition",x.lineposition)),d.noFontTextcase||(v.textcase=h(c+".textcase",x.textcase)),!d.noFontShadow){var g=x.shadow;g==="none"&&d.autoShadowDflt&&(g="auto"),v.shadow=h(c+".shadow",g)}return v},R.coercePattern=function(h,c,x,d){if(h(c+".shape")){h(c+".solidity"),h(c+".size");var v=h(c+".fillmode")==="overlay";if(!d){var g=h(c+".bgcolor",v?x:void 0);h(c+".fgcolor",v?p.contrast(g):x)}h(c+".fgopacity",v?.5:1)}},R.coerceHoverinfo=function(h,c,x){var d,v=c._module.attributes,g=v.hoverinfo?v:T,y=g.hoverinfo;if(x._dataLength===1){var m=y.dflt==="all"?y.flags.slice():y.dflt.split("+");m.splice(m.indexOf("name"),1),d=m.join("+")}return R.coerce(h,c,g,"hoverinfo",d)},R.coerceSelectionMarkerOpacity=function(h,c){if(h.marker){var x,d,v=h.marker.opacity;v!==void 0&&(n(v)||h.selected||h.unselected||(x=v,d=s*v),c("selected.marker.opacity",x),c("unselected.marker.opacity",d))}},R.validate=u},67555:function(ee,R,e){var M,k,o=e(94336).Yn,T=e(38248),_=e(24248),p=e(20435).mod,s=e(39032),t=s.BADNUM,i=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,a=s.ONESEC,l=s.EPOCHJD,u=e(24040),h=e(94336).E9,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=new Date().getFullYear()-70;function v(D){return D&&u.componentsRegistry.calendars&&typeof D=="string"&&D!=="gregorian"}function g(D,U){return String(D+Math.pow(10,U)).substr(1)}R.dateTick0=function(D,U){var I=function(W,F){return v(W)?F?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[W]:u.getComponentMethod("calendars","CANONICAL_TICK")[W]:F?"2000-01-02":"2000-01-01"}(D,!!U);if(U<2)return I;var N=R.dateTime2ms(I,D);return N+=i*(U-1),R.ms2DateTime(N,0,D)},R.dfltRange=function(D){return v(D)?u.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},R.isJSDate=function(D){return typeof D=="object"&&D!==null&&typeof D.getTime=="function"},R.dateTime2ms=function(D,U){if(R.isJSDate(D)){var I=D.getTimezoneOffset()*n,N=(D.getUTCMinutes()-D.getMinutes())*n+(D.getUTCSeconds()-D.getSeconds())*a+(D.getUTCMilliseconds()-D.getMilliseconds());if(N){var W=3*n;I=I-W/2+p(N-I+W/2,W)}return(D=Number(D)-I)>=M&&D<=k?D:t}if(typeof D!="string"&&typeof D!="number")return t;D=String(D);var F=v(U),j=D.charAt(0);!F||j!=="G"&&j!=="g"||(D=D.substr(1),U="");var H=F&&U.substr(0,7)==="chinese",te=D.match(H?x:c);if(!te)return t;var Q=te[1],$=te[3]||"1",K=Number(te[5]||1),X=Number(te[7]||0),Y=Number(te[9]||0),re=Number(te[11]||0);if(F){if(Q.length===2)return t;var se;Q=Number(Q);try{var ae=u.getComponentMethod("calendars","getCal")(U);if(H){var ce=$.charAt($.length-1)==="i";$=parseInt($,10),se=ae.newDate(Q,ae.toMonthIndex(Q,$,ce),K)}else se=ae.newDate(Q,Number($),K)}catch{return t}return se?(se.toJD()-l)*i+X*r+Y*n+re*a:t}Q=Q.length===2?(Number(Q)+2e3-d)%100+d:Number(Q),$-=1;var fe=new Date(Date.UTC(2e3,$,K,X,Y));return fe.setUTCFullYear(Q),fe.getUTCMonth()!==$||fe.getUTCDate()!==K?t:fe.getTime()+re*a},M=R.MIN_MS=R.dateTime2ms("-9999"),k=R.MAX_MS=R.dateTime2ms("9999-12-31 23:59:59.9999"),R.isDateTime=function(D,U){return R.dateTime2ms(D,U)!==t};var y=90*i,m=3*r,b=5*n;function f(D,U,I,N,W){if((U||I||N||W)&&(D+=" "+g(U,2)+":"+g(I,2),(N||W)&&(D+=":"+g(N,2),W))){for(var F=4;W%10==0;)F-=1,W/=10;D+="."+g(W,F)}return D}R.ms2DateTime=function(D,U,I){if(typeof D!="number"||!(D>=M&&D<=k))return t;U||(U=0);var N,W,F,j,H,te,Q=Math.floor(10*p(D+.05,1)),$=Math.round(D-Q/10);if(v(I)){var K=Math.floor($/i)+l,X=Math.floor(p(D,i));try{N=u.getComponentMethod("calendars","getCal")(I).fromJD(K).formatDate("yyyy-mm-dd")}catch{N=h("G%Y-%m-%d")(new Date($))}if(N.charAt(0)==="-")for(;N.length<11;)N="-0"+N.substr(1);else for(;N.length<10;)N="0"+N;W=U<y?Math.floor(X/r):0,F=U<y?Math.floor(X%r/n):0,j=U<m?Math.floor(X%n/a):0,H=U<b?X%a*10+Q:0}else te=new Date($),N=h("%Y-%m-%d")(te),W=U<y?te.getUTCHours():0,F=U<y?te.getUTCMinutes():0,j=U<m?te.getUTCSeconds():0,H=U<b?10*te.getUTCMilliseconds()+Q:0;return f(N,W,F,j,H)},R.ms2DateTimeLocal=function(D){if(!(D>=M+i&&D<=k-i))return t;var U=Math.floor(10*p(D+.05,1)),I=new Date(Math.round(D-U/10));return f(o("%Y-%m-%d")(I),I.getHours(),I.getMinutes(),I.getSeconds(),10*I.getUTCMilliseconds()+U)},R.cleanDate=function(D,U,I){if(D===t)return U;if(R.isJSDate(D)||typeof D=="number"&&isFinite(D)){if(v(I))return _.error("JS Dates and milliseconds are incompatible with world calendars",D),U;if(!(D=R.ms2DateTimeLocal(+D))&&U!==void 0)return U}else if(!R.isDateTime(D,I))return _.error("unrecognized date",D),U;return D};var S=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function O(D,U,I,N){D=D.replace(S,function(F){var j=Math.min(+F.charAt(1)||6,6);return(U/1e3%1+2).toFixed(j).substr(2).replace(/0+$/,"")||"0"});var W=new Date(Math.floor(U+.05));if(D=D.replace(w,function(){return E[I("%q")(W)]}),v(N))try{D=u.getComponentMethod("calendars","worldCalFmt")(D,U,N)}catch{return"Invalid"}return I(D)(W)}var C=[59,59.9,59.99,59.999,59.9999];R.formatDate=function(D,U,I,N,W,F){if(W=v(W)&&W,!U)if(I==="y")U=F.year;else if(I==="m")U=F.month;else{if(I!=="d")return function(j,H){var te=p(j+.05,i),Q=g(Math.floor(te/r),2)+":"+g(p(Math.floor(te/n),60),2);if(H!=="M"){T(H)||(H=0);var $=(100+Math.min(p(j/a,60),C[H])).toFixed(H).substr(1);H>0&&($=$.replace(/0+$/,"").replace(/[\.]$/,"")),Q+=":"+$}return Q}(D,I)+`
`+O(F.dayMonthYear,D,N,W);U=F.dayMonth+`
`+F.year}return O(U,D,N,W)};var P=3*i;R.incrementMonth=function(D,U,I){I=v(I)&&I;var N=p(D,i);if(D=Math.round(D-N),I)try{var W=Math.round(D/i)+l,F=u.getComponentMethod("calendars","getCal")(I),j=F.fromJD(W);return U%12?F.add(j,U,"m"):F.add(j,U/12,"y"),(j.toJD()-l)*i+N}catch{_.error("invalid ms "+D+" in calendar "+I)}var H=new Date(D+P);return H.setUTCMonth(H.getUTCMonth()+U)+N-P},R.findExactDates=function(D,U){for(var I,N,W=0,F=0,j=0,H=0,te=v(U)&&u.getComponentMethod("calendars","getCal")(U),Q=0;Q<D.length;Q++)if(N=D[Q],T(N)){if(!(N%i))if(te)try{(I=te.fromJD(N/i+l)).day()===1?I.month()===1?W++:F++:j++}catch{}else(I=new Date(N)).getUTCDate()===1?I.getUTCMonth()===0?W++:F++:j++}else H++;j+=F+=W;var $=D.length-H;return{exactYears:W/$,exactMonths:F/$,exactDays:j/$}}},52200:function(ee,R,e){var M=e(33428),k=e(24248),o=e(52248),T=e(36524);function _(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function p(r,n,a){var l="plotly.js-style-"+r,u=document.getElementById(l);u||((u=document.createElement("style")).setAttribute("id",l),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var h=u.sheet;h.insertRule?h.insertRule(n+"{"+a+"}",0):h.addRule?h.addRule(n,a,0):k.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(r){for(var n=[];i(r);)n.push(r),r=r.parentNode,typeof ShadowRoot=="function"&&r instanceof ShadowRoot&&(r=r.host);return n}function i(r){return r&&(r instanceof Element||r instanceof HTMLElement)}ee.exports={getGraphDiv:function(r){var n;if(typeof r=="string"){if((n=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=M.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:_,addStyleRule:function(r,n){p("global",r,n)},addRelatedStyleRule:p,deleteRelatedStyleRule:function(r){var n="plotly.js-style-"+r,a=document.getElementById(n);a&&_(a)},getFullTransformMatrix:function(r){var n=t(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(l){var u=s(l);if(u){var h=o.convertCssMatrix(u);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},95924:function(ee,R,e){var M=e(61252).EventEmitter,k={init:function(o){if(o._ev instanceof M)return o;var T=new M,_=new M;return o._ev=T,o._internalEv=_,o.on=T.on.bind(T),o.once=T.once.bind(T),o.removeListener=T.removeListener.bind(T),o.removeAllListeners=T.removeAllListeners.bind(T),o._internalOn=_.on.bind(_),o._internalOnce=_.once.bind(_),o._removeInternalListener=_.removeListener.bind(_),o._removeAllInternalListeners=_.removeAllListeners.bind(_),o.emit=function(p,s){typeof jQuery<"u"&&jQuery(o).trigger(p,s),T.emit(p,s),_.emit(p,s)},o},triggerHandler:function(o,T,_){var p,s;typeof jQuery<"u"&&(p=jQuery(o).triggerHandler(T,_));var t=o._ev;if(!t)return p;var i,r=t._events[T];if(!r)return p;function n(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[_]))):a.apply(t,[_])}for(r=Array.isArray(r)?r:[r],i=0;i<r.length-1;i++)n(r[i]);return s=n(r[i]),p!==void 0?p:s},purge:function(o){return delete o._ev,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.emit,delete o._ev,delete o._internalEv,delete o._internalOn,delete o._internalOnce,delete o._removeInternalListener,delete o._removeAllInternalListeners,o}};ee.exports=k},92880:function(ee,R,e){var M=e(63620),k=Array.isArray;function o(T,_,p,s){var t,i,r,n,a,l,u,h=T[0],c=T.length;if(c===2&&k(h)&&k(T[1])&&h.length===0){if(u=function(d,v){var g,y;for(g=0;g<d.length;g++){if((y=d[g])!==null&&typeof y=="object")return!1;y!==void 0&&(v[g]=y)}return!0}(T[1],h),u)return h;h.splice(0,h.length)}for(var x=1;x<c;x++)for(i in t=T[x])r=h[i],n=t[i],s&&k(n)?h[i]=n:_&&n&&(M(n)||(a=k(n)))?(a?(a=!1,l=r&&k(r)?r:[]):l=r&&M(r)?r:{},h[i]=o([l,n],_,p,s)):(n!==void 0||p)&&(h[i]=n);return h}R.extendFlat=function(){return o(arguments,!1,!1,!1)},R.extendDeep=function(){return o(arguments,!0,!1,!1)},R.extendDeepAll=function(){return o(arguments,!0,!0,!1)},R.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},68944:function(ee){ee.exports=function(R){for(var e={},M=[],k=0,o=0;o<R.length;o++){var T=R[o];e[T]!==1&&(e[T]=1,M[k++]=T)}return M}},43880:function(ee){function R(M){return M.visible===!0}function e(M){var k=M[0].trace;return k.visible===!0&&k._length!==0}ee.exports=function(M){for(var k,o=(k=M,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:R),T=[],_=0;_<M.length;_++){var p=M[_];o(p)&&T.push(p)}return T}},27144:function(ee,R,e){var M=e(33428),k=e(36116),o=e(40440),T=e(77844),_=e(42428),p=e(35536),s=e(24248),t=e(63620),i=e(22296),r=e(92065),n=Object.keys(k),a={"ISO-3":p,"USA-states":p,"country names":function(u){for(var h=0;h<n.length;h++){var c=n[h];if(new RegExp(k[c]).test(u.trim().toLowerCase()))return c}return s.log("Unrecognized country name: "+u+"."),!1}};function l(u){var h=u.geojson,c=window.PlotlyGeoAssets||{},x=typeof h=="string"?c[h]:h;return t(x)?x:(s.error("Oops ... something went wrong when fetching "+h),!1)}ee.exports={locationToFeature:function(u,h,c){if(!h||typeof h!="string")return!1;var x,d,v,g=a[u](h);if(g){if(u==="USA-states")for(x=[],v=0;v<c.length;v++)(d=c[v]).properties&&d.properties.gu&&d.properties.gu==="USA"&&x.push(d);else x=c;for(v=0;v<x.length;v++)if((d=x[v]).id===g)return d;s.log(["Location with id",g,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var h,c,x,d,v=u.geometry,g=v.coordinates,y=u.id,m=[];function b(f){for(var S=0;S<f.length-1;S++)if(f[S][0]>0&&f[S+1][0]<0)return S;return null}switch(h=y==="RUS"||y==="FJI"?function(f){var S;if(b(f)===null)S=f;else for(S=new Array(f.length),d=0;d<f.length;d++)S[d]=[f[d][0]<0?f[d][0]+360:f[d][0],f[d][1]];m.push(r.tester(S))}:y==="ATA"?function(f){var S=b(f);if(S===null)return m.push(r.tester(f));var w=new Array(f.length+1),E=0;for(d=0;d<f.length;d++)d>S?w[E++]=[f[d][0]+360,f[d][1]]:d===S?(w[E++]=f[d],w[E++]=[f[d][0],-90]):w[E++]=f[d];var O=r.tester(w);O.pts.pop(),m.push(O)}:function(f){m.push(r.tester(f))},v.type){case"MultiPolygon":for(c=0;c<g.length;c++)for(x=0;x<g[c].length;x++)h(g[c][x]);break;case"Polygon":for(c=0;c<g.length;c++)h(g[c])}return m},getTraceGeojson:l,extractTraceFeature:function(u){var h=u[0].trace,c=l(h);if(!c)return!1;var x,d={},v=[];for(x=0;x<h._length;x++){var g=u[x];(g.loc||g.loc===0)&&(d[g.loc]=g)}function y(f){var S=i(f,h.featureidkey||"id").get(),w=d[S];if(w){var E=f.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var O={type:"Feature",id:S,geometry:E,properties:{}};O.properties.ct=function(C){var P,D=C.geometry;if(D.type==="MultiPolygon")for(var U=D.coordinates,I=0,N=0;N<U.length;N++){var W={type:"Polygon",coordinates:U[N]},F=o.default(W);F>I&&(I=F,P=W)}else P=D;return T.default(P).geometry.coordinates}(O),w.fIn=f,w.fOut=O,v.push(O)}else s.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete d[S]}switch(c.type){case"FeatureCollection":var m=c.features;for(x=0;x<m.length;x++)y(m[x]);break;case"Feature":y(c);break;default:return s.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var b in d)s.log(["Location *"+b+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return v},fetchTraceGeoData:function(u){var h=window.PlotlyGeoAssets||{},c=[];function x(y){return new Promise(function(m,b){M.json(y,function(f,S){if(f){delete h[y];var w=f.status===404?'GeoJSON at URL "'+y+'" does not exist.':"Unexpected error while fetching from "+y;return b(new Error(w))}return h[y]=S,m(S)})})}function d(y){return new Promise(function(m,b){var f=0,S=setInterval(function(){return h[y]&&h[y]!=="pending"?(clearInterval(S),m(h[y])):f>100?(clearInterval(S),b("Unexpected error while fetching from "+y)):void f++},50)})}for(var v=0;v<u.length;v++){var g=u[v][0].trace.geojson;typeof g=="string"&&(h[g]?h[g]==="pending"&&c.push(d(g)):(h[g]="pending",c.push(x(g))))}return c},computeBbox:function(u){return _.default(u)}}},44808:function(ee,R,e){var M=e(39032).BADNUM;R.calcTraceToLineCoords=function(k){for(var o=k[0].trace.connectgaps,T=[],_=[],p=0;p<k.length;p++){var s=k[p].lonlat;s[0]!==M?_.push(s):!o&&_.length>0&&(T.push(_),_=[])}return _.length>0&&T.push(_),T},R.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},R.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var o=new Array(k.length),T=0;T<k.length;T++)o[T]=[k[T]];return{type:"MultiPolygon",coordinates:o}},R.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(ee,R,e){var M,k,o,T=e(20435).mod;function _(s,t,i,r,n,a,l,u){var h=i-s,c=n-s,x=l-n,d=r-t,v=a-t,g=u-a,y=h*g-x*d;if(y===0)return null;var m=(c*g-x*v)/y,b=(c*d-h*v)/y;return b<0||b>1||m<0||m>1?null:{x:s+h*m,y:t+d*m}}function p(s,t,i,r,n){var a=r*s+n*t;if(a<0)return r*r+n*n;if(a>i){var l=r-s,u=n-t;return l*l+u*u}var h=r*t-n*s;return h*h/i}R.segmentsIntersect=_,R.segmentDistance=function(s,t,i,r,n,a,l,u){if(_(s,t,i,r,n,a,l,u))return 0;var h=i-s,c=r-t,x=l-n,d=u-a,v=h*h+c*c,g=x*x+d*d,y=Math.min(p(h,c,v,n-s,a-t),p(h,c,v,l-s,u-t),p(x,d,g,s-n,t-a),p(x,d,g,i-n,r-a));return Math.sqrt(y)},R.getTextLocation=function(s,t,i,r){if(s===k&&r===o||(M={},k=s,o=r),M[i])return M[i];var n=s.getPointAtLength(T(i-r/2,t)),a=s.getPointAtLength(T(i+r/2,t)),l=Math.atan((a.y-n.y)/(a.x-n.x)),u=s.getPointAtLength(T(i,t)),h={x:(4*u.x+n.x+a.x)/6,y:(4*u.y+n.y+a.y)/6,theta:l};return M[i]=h,h},R.clearLocationCache=function(){k=null},R.getVisibleSegment=function(s,t,i){var r,n,a=t.left,l=t.right,u=t.top,h=t.bottom,c=0,x=s.getTotalLength(),d=x;function v(y){var m=s.getPointAtLength(y);y===0?r=m:y===x&&(n=m);var b=m.x<a?a-m.x:m.x>l?m.x-l:0,f=m.y<u?u-m.y:m.y>h?m.y-h:0;return Math.sqrt(b*b+f*f)}for(var g=v(c);g;){if((c+=g+i)>d)return;g=v(c)}for(g=v(d);g;){if(c>(d-=g+i))return;g=v(d)}return{min:c,max:d,len:d-c,total:x,isClosed:c===0&&d===x&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},R.findPointOnPath=function(s,t,i,r){for(var n,a,l,u=(r=r||{}).pathLength||s.getTotalLength(),h=r.tolerance||.001,c=r.iterationLimit||30,x=s.getPointAtLength(0)[i]>s.getPointAtLength(u)[i]?-1:1,d=0,v=0,g=u;d<c;){if(n=(v+g)/2,l=(a=s.getPointAtLength(n))[i]-t,Math.abs(l)<h)return a;x*l>0?g=n:v=n,d++}return a}},33040:function(ee,R,e){var M=e(38248),k=e(49760),o=e(72160),T=e(8932),_=e(22548).defaultLine,p=e(38116).isArrayOrTypedArray,s=o(_);function t(n,a){var l=n;return l[3]*=a,l}function i(n){if(M(n))return s;var a=o(n);return a.length?a:s}function r(n){return M(n)?n:1}ee.exports={formatColor:function(n,a,l){var u=n.color;u&&u._inputArray&&(u=u._inputArray);var h,c,x,d,v,g=p(u),y=p(a),m=T.extractOpts(n),b=[];if(h=m.colorscale!==void 0?T.makeColorScaleFuncFromTrace(n):i,c=g?function(S,w){return S[w]===void 0?s:o(h(S[w]))}:i,x=y?function(S,w){return S[w]===void 0?1:r(S[w])}:r,g||y)for(var f=0;f<l;f++)d=c(u,f),v=x(a,f),b[f]=t(d,v);else b=t(o(u),a);return b},parseColorScale:function(n){var a=T.extractOpts(n),l=a.colorscale;return a.reversescale&&(l=T.flipScale(a.colorscale)),l.map(function(u){var h=u[0],c=k(u[1]).toRgb();return{index:h,rgb:[c.r,c.g,c.b,c.a]}})}}},71688:function(ee,R,e){var M=e(35536);function k(o){return[o]}ee.exports={keyFun:function(o){return o.key},repeat:k,descend:M,wrap:k,unwrap:function(o){return o[0]}}},35536:function(ee){ee.exports=function(R){return R}},1396:function(ee){ee.exports=function(R,e){if(!e)return R;var M=1/Math.abs(e),k=M>1?(M*R+M*e)/M:R+e,o=String(k).length;if(o>16){var T=String(e).length;if(o>=String(R).length+T){var _=parseFloat(k).toPrecision(12);_.indexOf("e+")===-1&&(k=+_)}}return k}},3400:function(ee,R,e){var M=e(33428),k=e(94336).E9,o=e(57624).E9,T=e(38248),_=e(39032),p=_.FP_SAFE,s=-p,t=_.BADNUM,i=ee.exports={};i.adjustFormat=function(X){return!X||/^\d[.]\df/.test(X)||/[.]\d%/.test(X)?X:X==="0.f"?"~f":/^\d%/.test(X)?"~%":/^\ds/.test(X)?"~s":!/^[~,.0$]/.test(X)&&/[&fps]/.test(X)?"~"+X:X};var r={};i.warnBadFormat=function(X){var Y=String(X);r[Y]||(r[Y]=1,i.warn('encountered bad format: "'+Y+'"'))},i.noFormat=function(X){return String(X)},i.numberFormat=function(X){var Y;try{Y=o(i.adjustFormat(X))}catch{return i.warnBadFormat(X),i.noFormat}return Y},i.nestedProperty=e(22296),i.keyedContainer=e(37804),i.relativeAttr=e(23193),i.isPlainObject=e(63620),i.toLogRange=e(36896),i.relinkPrivateKeys=e(51528);var n=e(38116);i.isArrayBuffer=n.isArrayBuffer,i.isTypedArray=n.isTypedArray,i.isArrayOrTypedArray=n.isArrayOrTypedArray,i.isArray1D=n.isArray1D,i.ensureArray=n.ensureArray,i.concat=n.concat,i.maxRowLength=n.maxRowLength,i.minRowLength=n.minRowLength;var a=e(20435);i.mod=a.mod,i.modHalf=a.modHalf;var l=e(63064);i.valObjectMeta=l.valObjectMeta,i.coerce=l.coerce,i.coerce2=l.coerce2,i.coerceFont=l.coerceFont,i.coercePattern=l.coercePattern,i.coerceHoverinfo=l.coerceHoverinfo,i.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,i.validate=l.validate;var u=e(67555);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var h=e(14952);i.findBin=h.findBin,i.sorterAsc=h.sorterAsc,i.sorterDes=h.sorterDes,i.distinctVals=h.distinctVals,i.roundUp=h.roundUp,i.sort=h.sort,i.findIndexOfMin=h.findIndexOfMin,i.sortObjectKeys=e(95376);var c=e(63084);i.aggNums=c.aggNums,i.len=c.len,i.mean=c.mean,i.median=c.median,i.midRange=c.midRange,i.variance=c.variance,i.stdev=c.stdev,i.interp=c.interp;var x=e(52248);i.init2dArray=x.init2dArray,i.transposeRagged=x.transposeRagged,i.dot=x.dot,i.translationMatrix=x.translationMatrix,i.rotationMatrix=x.rotationMatrix,i.rotationXYMatrix=x.rotationXYMatrix,i.apply3DTransform=x.apply3DTransform,i.apply2DTransform=x.apply2DTransform,i.apply2DTransform2=x.apply2DTransform2,i.convertCssMatrix=x.convertCssMatrix,i.inverseTransformMatrix=x.inverseTransformMatrix;var d=e(11864);i.deg2rad=d.deg2rad,i.rad2deg=d.rad2deg,i.angleDelta=d.angleDelta,i.angleDist=d.angleDist,i.isFullCircle=d.isFullCircle,i.isAngleInsideSector=d.isAngleInsideSector,i.isPtInsideSector=d.isPtInsideSector,i.pathArc=d.pathArc,i.pathSector=d.pathSector,i.pathAnnulus=d.pathAnnulus;var v=e(98308);i.isLeftAnchor=v.isLeftAnchor,i.isCenterAnchor=v.isCenterAnchor,i.isRightAnchor=v.isRightAnchor,i.isTopAnchor=v.isTopAnchor,i.isMiddleAnchor=v.isMiddleAnchor,i.isBottomAnchor=v.isBottomAnchor;var g=e(92348);i.segmentsIntersect=g.segmentsIntersect,i.segmentDistance=g.segmentDistance,i.getTextLocation=g.getTextLocation,i.clearLocationCache=g.clearLocationCache,i.getVisibleSegment=g.getVisibleSegment,i.findPointOnPath=g.findPointOnPath;var y=e(92880);i.extendFlat=y.extendFlat,i.extendDeep=y.extendDeep,i.extendDeepAll=y.extendDeepAll,i.extendDeepNoArrays=y.extendDeepNoArrays;var m=e(24248);i.log=m.log,i.warn=m.warn,i.error=m.error;var b=e(53756);i.counterRegex=b.counter;var f=e(91200);i.throttle=f.throttle,i.throttleDone=f.done,i.clearThrottle=f.clear;var S=e(52200);function w(X){var Y={};for(var re in X)for(var se=X[re],ae=0;ae<se.length;ae++)Y[se[ae]]=+re;return Y}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(75352),i.preserveDrawingBuffer=e(34296),i.makeTraceGroups=e(30988),i._=e(98356),i.notifier=e(41792),i.filterUnique=e(68944),i.filterVisible=e(43880),i.pushUnique=e(52416),i.increment=e(1396),i.cleanNumber=e(54037),i.ensureNumber=function(X){return T(X)?(X=Number(X))>p||X<s?t:X:t},i.isIndex=function(X,Y){return!(Y!==void 0&&X>=Y)&&T(X)&&X>=0&&X%1==0},i.noop=e(16628),i.identity=e(35536),i.repeat=function(X,Y){for(var re=new Array(Y),se=0;se<Y;se++)re[se]=X;return re},i.swapAttrs=function(X,Y,re,se){re||(re="x"),se||(se="y");for(var ae=0;ae<Y.length;ae++){var ce=Y[ae],fe=i.nestedProperty(X,ce.replace("?",re)),he=i.nestedProperty(X,ce.replace("?",se)),ve=fe.get();fe.set(he.get()),he.set(ve)}},i.raiseToTop=function(X){X.parentNode.appendChild(X)},i.cancelTransition=function(X){return X.transition().duration(0)},i.constrain=function(X,Y,re){return Y>re?Math.max(re,Math.min(Y,X)):Math.max(Y,Math.min(re,X))},i.bBoxIntersect=function(X,Y,re){return re=re||0,X.left<=Y.right+re&&Y.left<=X.right+re&&X.top<=Y.bottom+re&&Y.top<=X.bottom+re},i.simpleMap=function(X,Y,re,se,ae){for(var ce=X.length,fe=new Array(ce),he=0;he<ce;he++)fe[he]=Y(X[he],re,se,ae);return fe},i.randstr=function X(Y,re,se,ae){if(se||(se=16),re===void 0&&(re=24),re<=0)return"0";var ce,fe,he=Math.log(Math.pow(2,re))/Math.log(se),ve="";for(ce=2;he===1/0;ce*=2)he=Math.log(Math.pow(2,re/ce))/Math.log(se)*ce;var ye=he-Math.floor(he);for(ce=0;ce<Math.floor(he);ce++)ve=Math.floor(Math.random()*se).toString(se)+ve;ye&&(fe=Math.pow(se,ye),ve=Math.floor(Math.random()*fe).toString(se)+ve);var me=parseInt(ve,se);return Y&&Y[ve]||me!==1/0&&me>=Math.pow(2,re)?ae>10?(i.warn("randstr failed uniqueness"),ve):X(Y,re,se,(ae||0)+1):ve},i.OptionControl=function(X,Y){X||(X={}),Y||(Y="opt");var re={optionList:[],_newoption:function(se){se[Y]=X,re[se.name]=se,re.optionList.push(se)}};return re["_"+Y]=X,re},i.smooth=function(X,Y){if((Y=Math.round(Y)||0)<2)return X;var re,se,ae,ce,fe=X.length,he=2*fe,ve=2*Y-1,ye=new Array(ve),me=new Array(fe);for(re=0;re<ve;re++)ye[re]=(1-Math.cos(Math.PI*(re+1)/Y))/(2*Y);for(re=0;re<fe;re++){for(ce=0,se=0;se<ve;se++)(ae=re+se+1-Y)<-fe?ae-=he*Math.round(ae/he):ae>=he&&(ae-=he*Math.floor(ae/he)),ae<0?ae=-1-ae:ae>=fe&&(ae=he-1-ae),ce+=X[ae]*ye[se];me[re]=ce}return me},i.syncOrAsync=function(X,Y,re){var se;function ae(){return i.syncOrAsync(X,Y,re)}for(;X.length;)if((se=(0,X.splice(0,1)[0])(Y))&&se.then)return se.then(ae);return re&&re(Y)},i.stripTrailingSlash=function(X){return X.substr(-1)==="/"?X.substr(0,X.length-1):X},i.noneOrAll=function(X,Y,re){if(X){var se,ae=!1,ce=!0;for(se=0;se<re.length;se++)X[re[se]]!=null?ae=!0:ce=!1;if(ae&&!ce)for(se=0;se<re.length;se++)X[re[se]]=Y[re[se]]}},i.mergeArray=function(X,Y,re,se){var ae=typeof se=="function";if(i.isArrayOrTypedArray(X))for(var ce=Math.min(X.length,Y.length),fe=0;fe<ce;fe++){var he=X[fe];Y[fe][re]=ae?se(he):he}},i.mergeArrayCastPositive=function(X,Y,re){return i.mergeArray(X,Y,re,function(se){var ae=+se;return isFinite(ae)&&ae>0?ae:0})},i.fillArray=function(X,Y,re,se){if(se=se||i.identity,i.isArrayOrTypedArray(X))for(var ae=0;ae<Y.length;ae++)Y[ae][re]=se(X[ae])},i.castOption=function(X,Y,re,se){se=se||i.identity;var ae=i.nestedProperty(X,re).get();return i.isArrayOrTypedArray(ae)?Array.isArray(Y)&&i.isArrayOrTypedArray(ae[Y[0]])?se(ae[Y[0]][Y[1]]):se(ae[Y]):ae},i.extractOption=function(X,Y,re,se){if(re in X)return X[re];var ae=i.nestedProperty(Y,se).get();return Array.isArray(ae)?void 0:ae},i.tagSelected=function(X,Y,re){var se,ae,ce=Y.selectedpoints,fe=Y._indexToPoints;fe&&(se=w(fe));for(var he=0;he<ce.length;he++){var ve=ce[he];if(i.isIndex(ve)||i.isArrayOrTypedArray(ve)&&i.isIndex(ve[0])&&i.isIndex(ve[1])){var ye=se?se[ve]:ve,me=re?re[ye]:ye;(ae=me)!==void 0&&ae<X.length&&(X[me].selected=1)}}},i.selIndices2selPoints=function(X){var Y=X.selectedpoints,re=X._indexToPoints;if(re){for(var se=w(re),ae=[],ce=0;ce<Y.length;ce++){var fe=Y[ce];if(i.isIndex(fe)){var he=se[fe];i.isIndex(he)&&ae.push(he)}}return ae}return Y},i.getTargetArray=function(X,Y){var re=Y.target;if(typeof re=="string"&&re){var se=i.nestedProperty(X,re).get();return!!i.isArrayOrTypedArray(se)&&se}return!!i.isArrayOrTypedArray(re)&&re},i.minExtend=function X(Y,re,se){var ae={};typeof re!="object"&&(re={});var ce,fe,he,ve=se==="pieLike"?-1:3,ye=Object.keys(Y);for(ce=0;ce<ye.length;ce++)he=Y[fe=ye[ce]],fe.charAt(0)!=="_"&&typeof he!="function"&&(fe==="module"?ae[fe]=he:Array.isArray(he)?ae[fe]=fe==="colorscale"||ve===-1?he.slice():he.slice(0,ve):i.isTypedArray(he)?ae[fe]=ve===-1?he.subarray():he.subarray(0,ve):ae[fe]=he&&typeof he=="object"?X(Y[fe],re[fe],se):he);for(ye=Object.keys(re),ce=0;ce<ye.length;ce++)typeof(he=re[fe=ye[ce]])=="object"&&fe in ae&&typeof ae[fe]=="object"||(ae[fe]=he);return ae},i.titleCase=function(X){return X.charAt(0).toUpperCase()+X.substr(1)},i.containsAny=function(X,Y){for(var re=0;re<Y.length;re++)if(X.indexOf(Y[re])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var O=/iPad|iPhone|iPod/;i.isIOS=function(){return O.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var X=C.exec(window.navigator.userAgent);if(X&&X.length===2){var Y=parseInt(X[1]);if(!isNaN(Y))return Y}return null},i.isD3Selection=function(X){return X instanceof M.selection},i.ensureSingle=function(X,Y,re,se){var ae=X.select(Y+(re?"."+re:""));if(ae.size())return ae;var ce=X.append(Y);return re&&ce.classed(re,!0),se&&ce.call(se),ce},i.ensureSingleById=function(X,Y,re,se){var ae=X.select(Y+"#"+re);if(ae.size())return ae;var ce=X.append(Y).attr("id",re);return se&&ce.call(se),ce},i.objectFromPath=function(X,Y){for(var re,se=X.split("."),ae=re={},ce=0;ce<se.length;ce++){var fe=se[ce],he=null,ve=se[ce].match(/(.*)\[([0-9]+)\]/);ve?(fe=ve[1],he=ve[2],re=re[fe]=[],ce===se.length-1?re[he]=Y:re[he]={},re=re[he]):(ce===se.length-1?re[fe]=Y:re[fe]={},re=re[fe])}return ae};var P=/^([^\[\.]+)\.(.+)?/,D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function U(X){return X.slice(0,2)==="__"}i.expandObjectPaths=function(X){var Y,re,se,ae,ce,fe,he;if(typeof X=="object"&&!Array.isArray(X)){for(re in X)if(X.hasOwnProperty(re))if(Y=re.match(P)){if(ae=X[re],U(se=Y[1]))continue;delete X[re],X[se]=i.extendDeepNoArrays(X[se]||{},i.objectFromPath(re,i.expandObjectPaths(ae))[se])}else if(Y=re.match(D)){if(ae=X[re],U(se=Y[1]))continue;if(ce=parseInt(Y[2]),delete X[re],X[se]=X[se]||[],Y[3]===".")he=Y[4],fe=X[se][ce]=X[se][ce]||{},i.extendDeepNoArrays(fe,i.objectFromPath(he,i.expandObjectPaths(ae)));else{if(U(se))continue;X[se][ce]=i.expandObjectPaths(ae)}}else{if(U(re))continue;X[re]=i.expandObjectPaths(X[re])}}return X},i.numSeparate=function(X,Y,re){if(re||(re=!1),typeof Y!="string"||Y.length===0)throw new Error("Separator string required for formatting!");typeof X=="number"&&(X=String(X));var se=/(\d+)(\d{3})/,ae=Y.charAt(0),ce=Y.charAt(1),fe=X.split("."),he=fe[0],ve=fe.length>1?ae+fe[1]:"";if(ce&&(fe.length>1||he.length>4||re))for(;se.test(he);)he=he.replace(se,"$1"+ce+"$2");return he+ve},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var I=/^\w*$/;i.templateString=function(X,Y){var re={};return X.replace(i.TEMPLATE_STRING_REGEX,function(se,ae){var ce;return I.test(ae)?ce=Y[ae]:(re[ae]=re[ae]||i.nestedProperty(Y,ae).get,ce=re[ae]()),i.isValidTextValue(ce)?ce:""})};var N={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return te.apply(N,arguments)};var W={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return te.apply(W,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,j={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return te.apply(j,arguments)};var H=/^[:|\|]/;function te(X,Y,re){var se=this,ae=arguments;Y||(Y={});var ce={};return X.replace(i.TEMPLATE_STRING_REGEX,function(fe,he,ve){var ye=he==="_xother"||he==="_yother",me=he==="_xother_"||he==="_yother_",Me=he==="xother_"||he==="yother_",Pe=he==="xother"||he==="yother"||ye||Me||me,ge=he;(ye||me)&&(ge=ge.substring(1)),(Me||me)&&(ge=ge.substring(0,ge.length-1));var oe,ie,de,Se=null,_e=null;if(se.parseMultDiv){var we=function(pe){var be=pe.match(F);return be?{key:be[1],op:be[2],number:Number(be[3])}:{key:pe,op:null,number:null}}(ge);ge=we.key,Se=we.op,_e=we.number}if(Pe){if((oe=Y[ge])===void 0)return""}else for(de=3;de<ae.length;de++)if(ie=ae[de]){if(ie.hasOwnProperty(ge)){oe=ie[ge];break}if(I.test(ge)||(oe=i.nestedProperty(ie,ge).get(),(oe=ce[ge]||i.nestedProperty(ie,ge).get())&&(ce[ge]=oe)),oe!==void 0)break}if(oe!==void 0&&(Se==="*"&&(oe*=_e),Se==="/"&&(oe/=_e)),oe===void 0&&se)return se.count<se.max&&(i.warn("Variable '"+ge+"' in "+se.name+" could not be found!"),oe=fe),se.count===se.max&&i.warn("Too many "+se.name+" warnings - additional warnings will be suppressed"),se.count++,fe;if(ve){var Ae;if(ve[0]===":"&&(Ae=re?re.numberFormat:i.numberFormat,oe!==""&&(oe=Ae(ve.replace(H,""))(oe))),ve[0]==="|"){Ae=re?re.timeFormat:k;var Oe=i.dateTime2ms(oe);oe=i.formatDate(Oe,ve.replace(H,""),!1,Ae)}}else{var ze=ge+"Label";Y.hasOwnProperty(ze)&&(oe=Y[ze])}return Pe&&(oe="("+oe+")",(ye||me)&&(oe=" "+oe),(Me||me)&&(oe+=" ")),oe})}i.subplotSort=function(X,Y){for(var re=Math.min(X.length,Y.length)+1,se=0,ae=0,ce=0;ce<re;ce++){var fe=X.charCodeAt(ce)||0,he=Y.charCodeAt(ce)||0,ve=fe>=48&&fe<=57,ye=he>=48&&he<=57;if(ve&&(se=10*se+fe-48),ye&&(ae=10*ae+he-48),!ve||!ye){if(se!==ae)return se-ae;if(fe!==he)return fe-he}}return ae-se};var Q=2e9;i.seedPseudoRandom=function(){Q=2e9},i.pseudoRandom=function(){var X=Q;return Q=(69069*Q+1)%4294967296,Math.abs(Q-X)<429496729?i.pseudoRandom():Q/4294967296},i.fillText=function(X,Y,re){var se=Array.isArray(re)?function(fe){re.push(fe)}:function(fe){re.text=fe},ae=i.extractOption(X,Y,"htx","hovertext");if(i.isValidTextValue(ae))return se(ae);var ce=i.extractOption(X,Y,"tx","text");return i.isValidTextValue(ce)?se(ce):void 0},i.isValidTextValue=function(X){return X||X===0},i.formatPercent=function(X,Y){Y=Y||0;for(var re=(Math.round(100*X*Math.pow(10,Y))*Math.pow(.1,Y)).toFixed(Y)+"%",se=0;se<Y;se++)re.indexOf(".")!==-1&&(re=(re=re.replace("0%","%")).replace(".%","%"));return re},i.isHidden=function(X){var Y=window.getComputedStyle(X).display;return!Y||Y==="none"},i.strTranslate=function(X,Y){return X||Y?"translate("+X+","+Y+")":""},i.strRotate=function(X){return X?"rotate("+X+")":""},i.strScale=function(X){return X!==1?"scale("+X+")":""},i.getTextTransform=function(X){var Y=X.noCenter,re=X.textX,se=X.textY,ae=X.targetX,ce=X.targetY,fe=X.anchorX||0,he=X.anchorY||0,ve=X.rotate,ye=X.scale;return ye?ye>1&&(ye=1):ye=0,i.strTranslate(ae-ye*(re+fe),ce-ye*(se+he))+i.strScale(ye)+(ve?"rotate("+ve+(Y?"":" "+re+" "+se)+")":"")},i.setTransormAndDisplay=function(X,Y){X.attr("transform",i.getTextTransform(Y)),X.style("display",Y.scale?null:"none")},i.ensureUniformFontSize=function(X,Y){var re=i.extendFlat({},Y);return re.size=Math.max(Y.size,X._fullLayout.uniformtext.minsize||0),re},i.join2=function(X,Y,re){var se=X.length;return se>1?X.slice(0,-1).join(Y)+re+X[se-1]:X.join(Y)},i.bigFont=function(X){return Math.round(1.2*X)};var $=i.getFirefoxVersion(),K=$!==null&&$<86;i.getPositionFromD3Event=function(){return K?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},63620:function(ee){ee.exports=function(R){return window&&window.process&&window.process.versions?Object.prototype.toString.call(R)==="[object Object]":Object.prototype.toString.call(R)==="[object Object]"&&Object.getPrototypeOf(R).hasOwnProperty("hasOwnProperty")}},37804:function(ee,R,e){var M=e(22296),k=/^\w*$/;ee.exports=function(o,T,_,p){var s,t,i;_=_||"name",p=p||"value";var r={};T&&T.length?(i=M(o,T),t=i.get()):t=o,T=T||"";var n={};if(t)for(s=0;s<t.length;s++)n[t[s][_]]=s;var a=k.test(p),l={set:function(u,h){var c=h===null?4:0;if(!t){if(!i||c===4)return;t=[],i.set(t)}var x=n[u];if(x===void 0){if(c===4)return;c|=3,x=t.length,n[u]=x}else h!==(a?t[x][p]:M(t[x],p).get())&&(c|=2);var d=t[x]=t[x]||{};return d[_]=u,a?d[p]=h:M(d,p).set(h),h!==null&&(c&=-5),r[x]=r[x]|c,l},get:function(u){if(t){var h=n[u];return h===void 0?void 0:a?t[h][p]:M(t[h],p).get()}},rename:function(u,h){var c=n[u];return c===void 0||(r[c]=1|r[c],n[h]=c,delete n[u],t[c][_]=h),l},remove:function(u){var h=n[u];if(h===void 0)return l;var c=t[h];if(Object.keys(c).length>2)return r[h]=2|r[h],l.set(u,null);if(a){for(s=h;s<t.length;s++)r[s]=3|r[s];for(s=h;s<t.length;s++)n[t[s][_]]--;t.splice(h,1),delete n[u]}else M(c,p).set(null),r[h]=6|r[h];return l},constructUpdate:function(){for(var u,h,c={},x=Object.keys(r),d=0;d<x.length;d++)h=x[d],u=T+"["+h+"]",t[h]?(1&r[h]&&(c[u+"."+_]=t[h][_]),2&r[h]&&(c[u+"."+p]=a?4&r[h]?null:t[h][p]:4&r[h]?null:M(t[h],p).get())):c[u]=null;return c}};return l}},98356:function(ee,R,e){var M=e(24040);ee.exports=function(k,o){for(var T=k._context.locale,_=0;_<2;_++){for(var p=k._context.locales,s=0;s<2;s++){var t=(p[T]||{}).dictionary;if(t){var i=t[o];if(i)return i}p=M.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return o}},24248:function(ee,R,e){var M=e(20556).dfltConfig,k=e(41792),o=ee.exports={};o.log=function(){var T;if(M.logging>1){var _=["LOG:"];for(T=0;T<arguments.length;T++)_.push(arguments[T]);console.trace.apply(console,_)}if(M.notifyOnLogging>1){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"long")}},o.warn=function(){var T;if(M.logging>0){var _=["WARN:"];for(T=0;T<arguments.length;T++)_.push(arguments[T]);console.trace.apply(console,_)}if(M.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}},o.error=function(){var T;if(M.logging>0){var _=["ERROR:"];for(T=0;T<arguments.length;T++)_.push(arguments[T]);console.error.apply(console,_)}if(M.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}}},30988:function(ee,R,e){var M=e(33428);ee.exports=function(k,o,T){var _=k.selectAll("g."+T.replace(/\s/g,".")).data(o,function(s){return s[0].trace.uid});_.exit().remove(),_.enter().append("g").attr("class",T),_.order();var p=k.classed("rangeplot")?"nodeRangePlot3":"node3";return _.each(function(s){s[0][p]=M.select(this)}),_}},52248:function(ee,R,e){var M=e(36524);R.init2dArray=function(k,o){for(var T=new Array(k),_=0;_<k;_++)T[_]=new Array(o);return T},R.transposeRagged=function(k){var o,T,_=0,p=k.length;for(o=0;o<p;o++)_=Math.max(_,k[o].length);var s=new Array(_);for(o=0;o<_;o++)for(s[o]=new Array(p),T=0;T<p;T++)s[o][T]=k[T][o];return s},R.dot=function(k,o){if(!k.length||!o.length||k.length!==o.length)return null;var T,_,p=k.length;if(k[0].length)for(T=new Array(p),_=0;_<p;_++)T[_]=R.dot(k[_],o);else if(o[0].length){var s=R.transposeRagged(o);for(T=new Array(s.length),_=0;_<s.length;_++)T[_]=R.dot(k,s[_])}else for(T=0,_=0;_<p;_++)T+=k[_]*o[_];return T},R.translationMatrix=function(k,o){return[[1,0,k],[0,1,o],[0,0,1]]},R.rotationMatrix=function(k){var o=k*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},R.rotationXYMatrix=function(k,o,T){return R.dot(R.dot(R.translationMatrix(o,T),R.rotationMatrix(k)),R.translationMatrix(-o,-T))},R.apply3DTransform=function(k){return function(){var o=arguments,T=arguments.length===1?o[0]:[o[0],o[1],o[2]||0];return R.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},R.apply2DTransform=function(k){return function(){var o=arguments;o.length===3&&(o=o[0]);var T=arguments.length===1?o[0]:[o[0],o[1]];return R.dot(k,[T[0],T[1],1]).slice(0,2)}},R.apply2DTransform2=function(k){var o=R.apply2DTransform(k);return function(T){return o(T.slice(0,2)).concat(o(T.slice(2,4)))}},R.convertCssMatrix=function(k){if(k){var o=k.length;if(o===16)return k;if(o===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},R.inverseTransformMatrix=function(k){var o=[];return M.invert(o,k),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},20435:function(ee){ee.exports={mod:function(R,e){var M=R%e;return M<0?M+e:M},modHalf:function(R,e){return Math.abs(R)>e/2?R-Math.round(R/e)*e:R}}},22296:function(ee,R,e){var M=e(38248),k=e(38116).isArrayOrTypedArray;function o(r,n){return function(){var a,l,u,h,c,x=r;for(h=0;h<n.length-1;h++){if((a=n[h])===-1){for(l=!0,u=[],c=0;c<x.length;c++)u[c]=o(x[c],n.slice(h+1))(),u[c]!==u[0]&&(l=!1);return l?u[0]:u}if(typeof a=="number"&&!k(x)||typeof(x=x[a])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(u=x[n[h]])!==null)return u}}ee.exports=function(r,n){if(M(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";var a,l,u,h,c=n.split(".");for(h=0;h<c.length;h++)if(String(c[h]).slice(0,2)==="__")throw"bad property string";for(h=0;h<c.length;){if(a=String(c[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])c[h]=a[1];else{if(h!==0)throw"bad property string";c.splice(0,1)}for(l=a[2].substr(1,a[2].length-2).split("]["),u=0;u<l.length;u++)h++,c.splice(h,0,Number(l[u]))}h++}return typeof r!="object"?function(x,d,v){return{set:function(){throw"bad container"},get:function(){},astr:d,parts:v,obj:x}}(r,n,c):{set:p(r,c,n),get:o(r,c),astr:n,parts:c,obj:r}};var T=/(^|\.)args\[/;function _(r,n){return r===void 0||r===null&&!n.match(T)}function p(r,n,a){return function(l){var u,h,c=r,x="",d=_(l,a);for(h=0;h<n.length-1;h++){if(typeof(u=n[h])=="number"&&!k(c))throw"array index but container is not an array";if(u===-1){if(d=!t(c,n.slice(h+1),l,a))break;return}if(!i(c,u,n[h+1],d))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";x=s(x,u)}if(d){if(h===n.length-1&&(delete c[n[h]],Array.isArray(c)&&+n[h]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[n[h]]=l}}function s(r,n){var a=n;return M(n)?a="["+n+"]":r&&(a="."+n),r+a}function t(r,n,a,l){var u,h=k(a),c=!0,x=a,d=l.replace("-1",0),v=!h&&_(a,d),g=n[0];for(u=0;u<r.length;u++)d=l.replace("-1",u),h&&(v=_(x=a[u%a.length],d)),v&&(c=!1),i(r,u,g,v)&&p(r[u],n,l.replace("-1",u))(x);return c}function i(r,n,a,l){if(r[n]===void 0){if(l)return!1;r[n]=typeof a=="number"?[]:{}}return!0}},16628:function(ee){ee.exports=function(){}},41792:function(ee,R,e){var M=e(33428),k=e(38248),o=[];ee.exports=function(T,_){if(o.indexOf(T)===-1){o.push(T);var p=1e3;k(_)?p=_:_==="long"&&(p=3e3);var s=M.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var r=M.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),a=i.split(/<br\s*\/?>/g),l=0;l<a.length;l++)l&&n.append("br"),n.append("span").text(a[l]);_==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(p).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(r){var n=o.indexOf(r);n!==-1&&o.splice(n,1),M.select(this).remove()})}}},72213:function(ee,R,e){var M=e(93972),k="data-savedcursor";ee.exports=function(o,T){var _=o.attr(k);if(T){if(!_){for(var p=(o.attr("class")||"").split(" "),s=0;s<p.length;s++){var t=p[s];t.indexOf("cursor-")===0&&o.attr(k,t.substr(7)).classed(t,!1)}o.attr(k)||o.attr(k,"!!")}M(o,T)}else _&&(o.attr(k,null),_==="!!"?M(o):M(o,_))}},92065:function(ee,R,e){var M=e(52248).dot,k=e(39032).BADNUM,o=ee.exports={};o.tester=function(T){var _,p=T.slice(),s=p[0][0],t=s,i=p[0][1],r=i;for(p[p.length-1][0]===p[0][0]&&p[p.length-1][1]===p[0][1]||p.push(p[0]),_=1;_<p.length;_++)s=Math.min(s,p[_][0]),t=Math.max(t,p[_][0]),i=Math.min(i,p[_][1]),r=Math.max(r,p[_][1]);var n,a=!1;p.length===5&&(p[0][0]===p[1][0]?p[2][0]===p[3][0]&&p[0][1]===p[3][1]&&p[1][1]===p[2][1]&&(a=!0,n=function(h){return h[0]===p[0][0]}):p[0][1]===p[1][1]&&p[2][1]===p[3][1]&&p[0][0]===p[3][0]&&p[1][0]===p[2][0]&&(a=!0,n=function(h){return h[1]===p[0][1]}));var l=!0,u=p[0];for(_=1;_<p.length;_++)if(u[0]!==p[_][0]||u[1]!==p[_][1]){l=!1;break}return{xmin:s,xmax:t,ymin:i,ymax:r,pts:p,contains:a?function(h,c){var x=h[0],d=h[1];return!(x===k||x<s||x>t||d===k||d<i||d>r||c&&n(h))}:function(h,c){var x=h[0],d=h[1];if(x===k||x<s||x>t||d===k||d<i||d>r)return!1;var v,g,y,m,b,f=p.length,S=p[0][0],w=p[0][1],E=0;for(v=1;v<f;v++)if(g=S,y=w,S=p[v][0],w=p[v][1],!(x<(m=Math.min(g,S))||x>Math.max(g,S)||d>Math.max(y,w)))if(d<Math.min(y,w))x!==m&&E++;else{if(d===(b=S===g?d:y+(x-g)*(w-y)/(S-g)))return v!==1||!c;d<=b&&x!==m&&E++}return E%2==1},isRect:a,degenerate:l}},o.isSegmentBent=function(T,_,p,s){var t,i,r,n=T[_],a=[T[p][0]-n[0],T[p][1]-n[1]],l=M(a,a),u=Math.sqrt(l),h=[-a[1]/u,a[0]/u];for(t=_+1;t<p;t++)if(i=[T[t][0]-n[0],T[t][1]-n[1]],(r=M(i,a))<0||r>l||Math.abs(M(i,h))>s)return!0;return!1},o.filter=function(T,_){var p=[T[0]],s=0,t=0;function i(r){T.push(r);var n=p.length,a=s;p.splice(t+1);for(var l=a+1;l<T.length;l++)(l===T.length-1||o.isSegmentBent(T,a,l+1,_))&&(p.push(T[l]),p.length<n-2&&(s=l,t=p.length-1),a=l)}return T.length>1&&i(T.pop()),{addPt:i,raw:T,filtered:p}}},5048:function(ee,R,e){var M=e(16576),k=e(28624);ee.exports=function(o,T,_){var p=o._fullLayout,s=!0;return p._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(_);else if(!t.pick||p._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:o._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:_||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(i){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),s||M({container:p._glcontainer.node()}),s}},34296:function(ee,R,e){var M=e(38248),k=e(25928);ee.exports=function(o){var T;if(typeof(T=o&&o.hasOwnProperty("userAgent")?o.userAgent:function(){var n;return typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),n}())!="string")return!0;var _=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!_){for(var p=T.split(" "),s=1;s<p.length;s++)if(p[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var i=p[t];if(i.substr(0,8)==="Version/"){var r=i.substr(8).split(".")[0];if(M(r)&&(r=+r),r>=13)return!0}}}return _}},52416:function(ee){ee.exports=function(R,e){if(e instanceof RegExp){for(var M=e.toString(),k=0;k<R.length;k++)if(R[k]instanceof RegExp&&R[k].toString()===M)return R;R.push(e)}else!e&&e!==0||R.indexOf(e)!==-1||R.push(e);return R}},94552:function(ee,R,e){var M=e(3400),k=e(20556).dfltConfig,o={add:function(T,_,p,s,t){var i,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,i),T.undoQueue.index+=1):i=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(_),i.undo.args.unshift(p),i.redo.calls.push(s),i.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var _,p;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,_=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<_.undo.calls.length;p++)o.plotDo(T,_.undo.calls[p],_.undo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var _,p;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(_=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<_.redo.calls.length;p++)o.plotDo(T,_.redo.calls[p],_.redo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,_,p){T.autoplay=!0,p=function(s,t){for(var i,r=[],n=0;n<t.length;n++)i=t[n],r[n]=i===s?i:typeof i=="object"?Array.isArray(i)?M.extendDeep([],i):M.extendDeepAll({},i):i;return r}(T,p),_.apply(null,p)}};ee.exports=o},53756:function(ee,R){R.counter=function(e,M,k,o){var T=(M||"")+(k?"":"$"),_=o===!1?"":"^";return e==="xy"?new RegExp(_+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(_+e+"([2-9]|[1-9][0-9]+)?"+T)}},23193:function(ee){var R=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;ee.exports=function(M,k){for(;k;){var o=M.match(R);if(o)M=o[1];else{if(!M.match(e))throw new Error("bad relativeAttr call:"+[M,k]);M=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return M&&k.charAt(0)!=="["?M+"."+k:M+k}},51528:function(ee,R,e){var M=e(38116).isArrayOrTypedArray,k=e(63620);ee.exports=function o(T,_){for(var p in _){var s=_[p],t=T[p];if(t!==s)if(p.charAt(0)==="_"||typeof s=="function"){if(p in T)continue;T[p]=s}else if(M(s)&&M(t)&&k(s[0])){if(p==="customdata"||p==="ids")continue;for(var i=Math.min(s.length,t.length),r=0;r<i;r++)t[r]!==s[r]&&k(s[r])&&k(t[r])&&o(t[r],s[r])}else k(s)&&k(t)&&(o(t,s),Object.keys(t).length||delete T[p])}}},14952:function(ee,R,e){var M=e(38248),k=e(24248),o=e(35536),T=e(39032).BADNUM,_=1e-9;function p(r,n){return r<n}function s(r,n){return r<=n}function t(r,n){return r>n}function i(r,n){return r>=n}R.findBin=function(r,n,a){if(M(n.start))return a?Math.ceil((r-n.start)/n.size-_)-1:Math.floor((r-n.start)/n.size+_);var l,u,h=0,c=n.length,x=0,d=c>1?(n[c-1]-n[0])/(c-1):1;for(u=d>=0?a?p:s:a?i:t,r+=d*_*(a?-1:1)*(d>=0?1:-1);h<c&&x++<100;)u(n[l=Math.floor((h+c)/2)],r)?h=l+1:c=l;return x>90&&k.log("Long binary search..."),h-1},R.sorterAsc=function(r,n){return r-n},R.sorterDes=function(r,n){return n-r},R.distinctVals=function(r){var n,a=r.slice();for(a.sort(R.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var l,u=a[n]-a[0]||1,h=u/(n||1)/1e4,c=[],x=0;x<=n;x++){var d=a[x],v=d-l;l===void 0?(c.push(d),l=d):v>h&&(u=Math.min(u,v),c.push(d),l=d)}return{vals:c,minDiff:u}},R.roundUp=function(r,n,a){for(var l,u=0,h=n.length-1,c=0,x=a?0:1,d=a?1:0,v=a?Math.ceil:Math.floor;u<h&&c++<100;)n[l=v((u+h)/2)]<=r?u=l+x:h=l-d;return n[u]},R.sort=function(r,n){for(var a=0,l=0,u=1;u<r.length;u++){var h=n(r[u],r[u-1]);if(h<0?a=1:h>0&&(l=1),a&&l)return r.sort(n)}return l?r:r.reverse()},R.findIndexOfMin=function(r,n){n=n||o;for(var a,l=1/0,u=0;u<r.length;u++){var h=n(r[u]);h<l&&(l=h,a=u)}return a}},93972:function(ee){ee.exports=function(R,e){(R.attr("class")||"").split(" ").forEach(function(M){M.indexOf("cursor-")===0&&R.classed(M,!1)}),e&&R.classed("cursor-"+e,!0)}},16576:function(ee,R,e){var M=e(76308),k=function(){};ee.exports=function(o){for(var T in o)typeof o[T]=="function"&&(o[T]=k);o.destroy=function(){o.container.parentNode.removeChild(o.container)};var _=document.createElement("div");_.className="no-webgl",_.style.cursor="pointer",_.style.fontSize="24px",_.style.color=M.defaults[0],_.style.position="absolute",_.style.left=_.style.top="0px",_.style.width=_.style.height="100%",_.style["background-color"]=M.lightLine,_.style["z-index"]=30;var p=document.createElement("p");return p.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",p.style.position="relative",p.style.top="50%",p.style.left="50%",p.style.height="30%",p.style.width="50%",p.style.margin="-15% 0 0 -25%",_.appendChild(p),o.container.appendChild(_),o.container.style.background="#FFFFFF",o.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(ee){ee.exports=function(R){return Object.keys(R).sort()}},63084:function(ee,R,e){var M=e(38248),k=e(38116).isArrayOrTypedArray;R.aggNums=function(o,T,_,p){var s,t;if((!p||p>_.length)&&(p=_.length),M(T)||(T=!1),k(_[0])){for(t=new Array(p),s=0;s<p;s++)t[s]=R.aggNums(o,T,_[s]);_=t}for(s=0;s<p;s++)M(T)?M(_[s])&&(T=o(+T,+_[s])):T=_[s];return T},R.len=function(o){return R.aggNums(function(T){return T+1},0,o)},R.mean=function(o,T){return T||(T=R.len(o)),R.aggNums(function(_,p){return _+p},0,o)/T},R.midRange=function(o){if(o!==void 0&&o.length!==0)return(R.aggNums(Math.max,null,o)+R.aggNums(Math.min,null,o))/2},R.variance=function(o,T,_){return T||(T=R.len(o)),M(_)||(_=R.mean(o,T)),R.aggNums(function(p,s){return p+Math.pow(s-_,2)},0,o)/T},R.stdev=function(o,T,_){return Math.sqrt(R.variance(o,T,_))},R.median=function(o){var T=o.slice().sort();return R.interp(T,.5)},R.interp=function(o,T){if(!M(T))throw"n should be a finite number";if((T=T*o.length-.5)<0)return o[0];if(T>o.length-1)return o[o.length-1];var _=T%1;return _*o[Math.ceil(T)]+(1-_)*o[Math.floor(T)]}},43080:function(ee,R,e){var M=e(72160);ee.exports=function(k){return k?M(k):[0,0,0,1]}},9188:function(ee,R,e){var M=e(2264),k=e(43616),o=e(3400),T=null;ee.exports=function(){if(T!==null)return T;T=!1;var _=o.isIE()||o.isSafari()||o.isIOS();if(window.navigator.userAgent&&!_){var p=Array.from(M.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")T=p.some(function(r){return s.apply(null,r)});else{var t=k.tester.append("image").attr("style",M.STYLE),i=window.getComputedStyle(t.node()).imageRendering;T=p.some(function(r){var n=r[1];return i===n||i===n.toLowerCase()}),t.remove()}}return T}},72736:function(ee,R,e){var M=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),_=e(84284).LINE_SPACING,p=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;R.convertToTspans=function(D,U,I){var N=D.text(),W=!D.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&N.match(p),F=M.select(D.node().parentNode);if(!F.empty()){var j=D.attr("class")?D.attr("class").split(" ")[0]:"text";return j+="-math",F.selectAll("svg."+j).remove(),F.selectAll("g."+j+"-group").remove(),D.style("display",null).attr({"data-unformatted":N,"data-math":"N"}),W?(U&&U._promises||[]).push(new Promise(function(te){D.style("display","none");var Q=parseInt(D.node().style.fontSize,10),$={fontSize:Q};(function(K,X,Y){var re,se,ae,ce,fe=parseInt((MathJax.version||"").split(".")[0]);if(fe===2||fe===3){var he=function(){var ye="math-output-"+k.randstr({},64),me=(ce=M.select("body").append("div").attr({id:ye}).style({visibility:"hidden",position:"absolute","font-size":X.fontSize+"px"}).text(K.replace(s,"\\lt ").replace(t,"\\gt "))).node();return fe===2?MathJax.Hub.Typeset(me):MathJax.typeset([me])},ve=function(){var ye=ce.select(fe===2?".MathJax_SVG":".MathJax"),me=!ye.empty()&&ce.select("svg").node();if(me){var Me,Pe=me.getBoundingClientRect();Me=fe===2?M.select("body").select("#MathJax_SVG_glyphs"):ye.select("defs"),Y(ye,Me,Pe)}else k.log("There was an error in the tex syntax.",K),Y();ce.remove()};fe===2?MathJax.Hub.Queue(function(){return se=k.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((re=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},he,ve,function(){if(re!=="SVG")return MathJax.Hub.setRenderer(re)},function(){return ae!==void 0&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(se)}):fe===3&&(se=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(re=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){he(),ve(),re!=="svg"&&(MathJax.config.startup.output=re),MathJax.config=se}))}else k.warn("No MathJax version:",MathJax.version)})(W[2],$,function(K,X,Y){F.selectAll("svg."+j).remove(),F.selectAll("g."+j+"-group").remove();var re=K&&K.select("svg");if(!re||!re.node())return H(),void te();var se=F.append("g").classed(j+"-group",!0).attr({"pointer-events":"none","data-unformatted":N,"data-math":"Y"});se.node().appendChild(re.node()),X&&X.node()&&re.node().insertBefore(X.node().cloneNode(!0),re.node().firstChild);var ae=Y.width,ce=Y.height;re.attr({class:j,height:ce,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var fe=D.node().style.fill||"black",he=re.select("g");he.attr({fill:fe,stroke:fe});var ve=he.node().getBoundingClientRect(),ye=ve.width,me=ve.height;(ye>ae||me>ce)&&(re.style("overflow","hidden"),ye=(ve=re.node().getBoundingClientRect()).width,me=ve.height);var Me=+D.attr("x"),Pe=+D.attr("y"),ge=-(Q||D.node().getBoundingClientRect().height)/4;if(j[0]==="y")se.attr({transform:"rotate("+[-90,Me,Pe]+")"+o(-ye/2,ge-me/2)});else if(j[0]==="l")Pe=ge-me/2;else if(j[0]==="a"&&j.indexOf("atitle")!==0)Me=0,Pe=ge;else{var oe=D.attr("text-anchor");Me-=ye*(oe==="middle"?.5:oe==="end"?1:0),Pe=Pe+ge-me/2}re.attr({x:Me,y:Pe}),I&&I.call(D,se),te(se)})})):H(),D}function H(){F.empty()||(j=D.attr("class")+"-math",F.select("svg."+j).remove()),D.text("").style("white-space","pre");var te=function(Q,$){$=$.replace(h," ");var K,X=!1,Y=[],re=-1;function se(){re++;var _e=document.createElementNS(T.svg,"tspan");M.select(_e).attr({class:"line",dy:re*_+"em"}),Q.appendChild(_e),K=_e;var we=Y;if(Y=[{node:_e}],we.length>1)for(var Ae=1;Ae<we.length;Ae++)ae(we[Ae])}function ae(_e){var we,Ae=_e.type,Oe={};if(Ae==="a"){we="a";var ze=_e.target,pe=_e.href,be=_e.popup;pe&&(Oe={"xlink:xlink:show":ze==="_blank"||ze.charAt(0)!=="_"?"new":"replace",target:ze,"xlink:xlink:href":pe},be&&(Oe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+be+'");return false;'))}else we="tspan";_e.style&&(Oe.style=_e.style);var ke=document.createElementNS(T.svg,we);if(Ae==="sup"||Ae==="sub"){ce(K,l),K.appendChild(ke);var Ie=document.createElementNS(T.svg,"tspan");ce(Ie,l),M.select(Ie).attr("dy",a[Ae]),Oe.dy=n[Ae],K.appendChild(ke),K.appendChild(Ie)}else K.appendChild(ke);M.select(ke).attr(Oe),K=_e.node=ke,Y.push(_e)}function ce(_e,we){_e.appendChild(document.createTextNode(we))}function fe(_e){if(Y.length!==1){var we=Y.pop();_e!==we.type&&k.log("Start tag <"+we.type+"> doesnt match end tag <"+_e+">. Pretending it did match.",$),K=Y[Y.length-1].node}else k.log("Ignoring unexpected end tag </"+_e+">.",$)}d.test($)?se():(K=Q,Y=[{node:Q}]);for(var he=$.split(c),ve=0;ve<he.length;ve++){var ye=he[ve],me=ye.match(x),Me=me&&me[2].toLowerCase(),Pe=r[Me];if(Me==="br")se();else if(Pe===void 0)ce(K,E(ye));else if(me[1])fe(Me);else{var ge=me[4],oe={type:Me},ie=b(ge,v);if(ie?(ie=ie.replace(f,"$1 fill:"),Pe&&(ie+=";"+Pe)):Pe&&(ie=Pe),ie&&(oe.style=ie),Me==="a"){X=!0;var de=b(ge,g);if(de){var Se=O(de);Se&&(oe.href=Se,oe.target=b(ge,y)||"_blank",oe.popup=b(ge,m))}}ae(oe)}}return X}(D.node(),N);te&&D.style("pointer-events","all"),R.positionText(D),I&&I.call(D)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},l="​",u=["http:","https:","mailto:","",void 0,":"],h=R.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,d=/<br(\s+.*)?>/i;R.BR_TAG_ALL=/<br(\s+.*)?>/gi;var v=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,g=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,y=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function b(D,U){if(!D)return null;var I=D.match(U),N=I&&(I[3]||I[4]);return N&&E(N)}var f=/(^|;)\s*color:/;R.plainText=function(D,U){for(var I=(U=U||{}).len!==void 0&&U.len!==-1?U.len:1/0,N=U.allowedTags!==void 0?U.allowedTags:["br"],W=D.split(c),F=[],j="",H=0,te=0;te<W.length;te++){var Q=W[te],$=Q.match(x),K=$&&$[2].toLowerCase();if(K)N.indexOf(K)!==-1&&(F.push(Q),j=K);else{var X=Q.length;if(H+X<I)F.push(Q),H+=X;else if(H<I){var Y=I-H;j&&(j!=="br"||Y<=3||X<=3)&&F.pop(),I>3?F.push(Q.substr(0,Y-3)+"..."):F.push(Q.substr(0,Y));break}j=""}}return F.join("")};var S={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(D){return D.replace(w,function(U,I){return(I.charAt(0)==="#"?function(N){if(!(N>1114111)){var W=String.fromCodePoint;if(W)return W(N);var F=String.fromCharCode;return N<=65535?F(N):F(55232+(N>>10),N%1024+56320)}}(I.charAt(1)==="x"?parseInt(I.substr(2),16):parseInt(I.substr(1),10)):S[I])||U})}function O(D){var U=encodeURI(decodeURI(D)),I=document.createElement("a"),N=document.createElement("a");I.href=D,N.href=U;var W=I.protocol,F=N.protocol;return u.indexOf(W)!==-1&&u.indexOf(F)!==-1?U:""}function C(D,U,I){var N,W,F,j=I.horizontalAlign,H=I.verticalAlign||"top",te=D.node().getBoundingClientRect(),Q=U.node().getBoundingClientRect();return W=H==="bottom"?function(){return te.bottom-N.height}:H==="middle"?function(){return te.top+(te.height-N.height)/2}:function(){return te.top},F=j==="right"?function(){return te.right-N.width}:j==="center"?function(){return te.left+(te.width-N.width)/2}:function(){return te.left},function(){N=this.node().getBoundingClientRect();var $=F()-Q.left,K=W()-Q.top,X=I.gd||{};if(I.gd){X._fullLayout._calcInverseTransform(X);var Y=k.apply3DTransform(X._fullLayout._invTransform)($,K);$=Y[0],K=Y[1]}return this.style({top:K+"px",left:$+"px","z-index":1e3}),this}}R.convertEntities=E,R.sanitizeHTML=function(D){D=D.replace(h," ");for(var U=document.createElement("p"),I=U,N=[],W=D.split(c),F=0;F<W.length;F++){var j=W[F],H=j.match(x),te=H&&H[2].toLowerCase();if(te in r)if(H[1])N.length&&(I=N.pop());else{var Q=H[4],$=b(Q,v),K=$?{style:$}:{};if(te==="a"){var X=b(Q,g);if(X){var Y=O(X);if(Y){K.href=Y;var re=b(Q,y);re&&(K.target=re)}}}var se=document.createElement(te);I.appendChild(se),M.select(se).attr(K),I=se,N.push(se)}else I.appendChild(document.createTextNode(E(j)))}return U.innerHTML},R.lineCount=function(D){return D.selectAll("tspan.line").size()||1},R.positionText=function(D,U,I){return D.each(function(){var N=M.select(this);function W(H,te){return te===void 0?(te=N.attr(H))===null&&(N.attr(H,0),te=0):N.attr(H,te),te}var F=W("x",U),j=W("y",I);this.nodeName==="text"&&N.selectAll("tspan.line").attr({x:F,y:j})})};var P="1px ";R.makeTextShadow=function(D){return P+P+P+D+", -"+P+"-"+P+P+D+", "+P+"-"+P+P+D+", -"+P+P+P+D},R.makeEditable=function(D,U){var I=U.gd,N=U.delegate,W=M.dispatch("edit","input","cancel"),F=N||D;if(D.style({"pointer-events":N?"none":"all"}),D.size()!==1)throw new Error("boo");function j(){var te,Q,$,K,X;te=M.select(I).select(".svg-container"),Q=te.append("div"),$=D.node().style,K=parseFloat($.fontSize||12),(X=U.text)===void 0&&(X=D.attr("data-unformatted")),Q.classed("plugin-editable editable",!0).style({position:"absolute","font-family":$.fontFamily||"Arial","font-size":K,color:U.fill||$.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-K/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(X).call(C(D,te,U)).on("blur",function(){I._editing=!1,D.text(this.textContent).style({opacity:1});var se,ae=M.select(this).attr("class");(se=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(D.node().parentNode).select(se).style({opacity:0});var ce=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),W.edit.call(D,ce)}).on("focus",function(){var se=this;I._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===se)return!1;document.activeElement===Q.node()&&Q.node().blur()})}).on("keyup",function(){M.event.which===27?(I._editing=!1,D.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),W.cancel.call(D,this.textContent)):(W.input.call(D,this.textContent),M.select(this).call(C(D,te,U)))}).on("keydown",function(){M.event.which===13&&this.blur()}).call(H),D.style({opacity:0});var Y,re=F.attr("class");(Y=re?"."+re.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(D.node().parentNode).select(Y).style({opacity:0})}function H(te){var Q=te.node(),$=document.createRange();$.selectNodeContents(Q);var K=window.getSelection();K.removeAllRanges(),K.addRange($),Q.focus()}return U.immediate?j():F.on("click",j),M.rebind(D,W,"on")}},91200:function(ee,R){var e={};function M(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}R.throttle=function(k,o,T){var _=e[k],p=Date.now();if(!_){for(var s in e)e[s].ts<p-6e4&&delete e[s];_=e[k]={ts:0,timer:null}}function t(){T(),_.ts=Date.now(),_.onDone&&(_.onDone(),_.onDone=null)}M(_),p>_.ts+o?t():_.timer=setTimeout(function(){t(),_.timer=null},o)},R.done=function(k){var o=e[k];return o&&o.timer?new Promise(function(T){var _=o.onDone;o.onDone=function(){_&&_(),T(),o.onDone=null}}):Promise.resolve()},R.clear=function(k){if(k)M(e[k]),delete e[k];else for(var o in e)R.clear(o)}},36896:function(ee,R,e){var M=e(38248);ee.exports=function(k,o){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(o[0],o[1]))/Math.LN10;return M(T)||(T=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),T}},59972:function(ee,R,e){var M=ee.exports={},k=e(79552).locationmodeToLayer,o=e(55712).NO;M.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(T,_){return T+_+".json"},M.getTopojsonFeatures=function(T,_){var p=k[T.locationmode],s=_.objects[p];return o(_,s).features}},11680:function(ee){ee.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(ee){ee.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(ee,R,e){var M=e(24040);ee.exports=function(k){for(var o,T,_=M.layoutArrayContainers,p=M.layoutArrayRegexes,s=k.split("[")[0],t=0;t<p.length;t++)if((T=k.match(p[t]))&&T.index===0){o=T[0];break}if(o||(o=_[_.indexOf(s)]),!o)return!1;var i=k.substr(o.length);return i?!!(T=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(T[1]),property:T[3]||""}:{array:o,index:"",property:""}}},67824:function(ee,R,e){var M=e(92880).extendFlat,k=e(63620),o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},_=o.flags.slice().concat(["fullReplot"]),p=T.flags.slice().concat("layoutReplot");function s(r){for(var n={},a=0;a<r.length;a++)n[r[a]]=!1;return n}function t(r,n,a){var l=M({},r);for(var u in l){var h=l[u];k(h)&&(l[u]=i(h,n,0,u))}return a==="from-root"&&(l.editType=n),l}function i(r,n,a,l){if(r.valType){var u=M({},r);if(u.editType=n,Array.isArray(r.items)){u.items=new Array(r.items.length);for(var h=0;h<r.items.length;h++)u.items[h]=i(r.items[h],n)}return u}return t(r,n,l.charAt(0)==="_"?"nested":"from-root")}ee.exports={traces:o,layout:T,traceFlags:function(){return s(_)},layoutFlags:function(){return s(p)},update:function(r,n){var a=n.editType;if(a&&a!=="none")for(var l=a.split("+"),u=0;u<l.length;u++)r[l[u]]=!0},overrideAll:t}},93404:function(ee,R,e){var M=e(38248),k=e(61784),o=e(24040),T=e(3400),_=e(7316),p=e(79811),s=e(76308),t=p.cleanId,i=p.getFromTrace,r=o.traceIs;function n(g,y){var m=g[y],b=y.charAt(0);m&&m!=="paper"&&(g[y]=t(m,b,!0))}function a(g){function y(m,b){var f=g[m],S=g.title&&g.title[b];f&&!S&&(g.title||(g.title={}),g.title[b]=g[m],delete g[m])}g&&(typeof g.title!="string"&&typeof g.title!="number"||(g.title={text:g.title}),y("titlefont","font"),y("titleposition","position"),y("titleside","side"),y("titleoffset","offset"))}function l(g){if(!T.isPlainObject(g))return!1;var y=g.name;return delete g.name,delete g.showlegend,(typeof y=="string"||typeof y=="number")&&String(y)}function u(g,y,m,b){if(m&&!b)return g;if(b&&!m||!g.trim())return y;if(!y.trim())return g;var f,S=Math.min(g.length,y.length);for(f=0;f<S&&g.charAt(f)===y.charAt(f);f++);return g.substr(0,f).trim()}function h(g){var y="middle",m="center";return typeof g=="string"&&(g.indexOf("top")!==-1?y="top":g.indexOf("bottom")!==-1&&(y="bottom"),g.indexOf("left")!==-1?m="left":g.indexOf("right")!==-1&&(m="right")),y+" "+m}function c(g,y){return y in g&&typeof g[y]=="object"&&Object.keys(g[y]).length===0}R.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&T.log("Clearing previous rejected promises from queue."),g._promises=[]},R.cleanLayout=function(g){var y,m;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var b=(_.subplotsRegistry.cartesian||{}).attrRegex,f=(_.subplotsRegistry.polar||{}).attrRegex,S=(_.subplotsRegistry.ternary||{}).attrRegex,w=(_.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(g);for(y=0;y<E.length;y++){var O=E[y];if(b&&b.test(O)){var C=g[O];C.anchor&&C.anchor!=="free"&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),C.insiderange&&delete C.range,delete C.islog,delete C.isdate,delete C.categories,c(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(f&&f.test(O))a(g[O].radialaxis);else if(S&&S.test(O)){var P=g[O];a(P.aaxis),a(P.baxis),a(P.caxis)}else if(w&&w.test(O)){var D=g[O],U=D.cameraposition;if(Array.isArray(U)&&U[0].length===4){var I=U[0],N=U[1],W=U[2],F=k([],I),j=[];for(m=0;m<3;++m)j[m]=N[m]+W*F[2+4*m];D.camera={eye:{x:j[0],y:j[1],z:j[2]},center:{x:N[0],y:N[1],z:N[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}a(D.xaxis),a(D.yaxis),a(D.zaxis)}}var H=Array.isArray(g.annotations)?g.annotations.length:0;for(y=0;y<H;y++){var te=g.annotations[y];T.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),n(te,"xref"),n(te,"yref"))}var Q=Array.isArray(g.shapes)?g.shapes.length:0;for(y=0;y<Q;y++){var $=g.shapes[y];T.isPlainObject($)&&(n($,"xref"),n($,"yref"))}var K=Array.isArray(g.images)?g.images.length:0;for(y=0;y<K;y++){var X=g.images[y];T.isPlainObject(X)&&(n(X,"xref"),n(X,"yref"))}var Y=g.legend;return Y&&(Y.x>3?(Y.x=1.02,Y.xanchor="left"):Y.x<-2&&(Y.x=-.02,Y.xanchor="right"),Y.y>3?(Y.y=1.02,Y.yanchor="bottom"):Y.y<-2&&(Y.y=-.02,Y.yanchor="top")),a(g),g.dragmode==="rotate"&&(g.dragmode="orbit"),s.clean(g),g.template&&g.template.layout&&R.cleanLayout(g.template.layout),g},R.cleanData=function(g){for(var y=0;y<g.length;y++){var m,b=g[y];if(b.type==="histogramy"&&"xbins"in b&&!("ybins"in b)&&(b.ybins=b.xbins,delete b.xbins),b.error_y&&"opacity"in b.error_y){var f=s.defaults,S=b.error_y.color||(r(b,"bar")?s.defaultLine:f[y%f.length]);b.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*b.error_y.opacity),delete b.error_y.opacity}if("bardir"in b&&(b.bardir!=="h"||!r(b,"bar")&&b.type.substr(0,9)!=="histogram"||(b.orientation="h",R.swapXYData(b)),delete b.bardir),b.type==="histogramy"&&R.swapXYData(b),b.type!=="histogramx"&&b.type!=="histogramy"||(b.type="histogram"),"scl"in b&&!("colorscale"in b)&&(b.colorscale=b.scl,delete b.scl),"reversescl"in b&&!("reversescale"in b)&&(b.reversescale=b.reversescl,delete b.reversescl),b.xaxis&&(b.xaxis=t(b.xaxis,"x")),b.yaxis&&(b.yaxis=t(b.yaxis,"y")),r(b,"gl3d")&&b.scene&&(b.scene=_.subplotsRegistry.gl3d.cleanId(b.scene)),!r(b,"pie-like")&&!r(b,"bar-like"))if(Array.isArray(b.textposition))for(m=0;m<b.textposition.length;m++)b.textposition[m]=h(b.textposition[m]);else b.textposition&&(b.textposition=h(b.textposition));var w=o.getModule(b);if(w&&w.colorbar){var E=w.colorbar.container,O=E?b[E]:b;O&&O.colorscale&&(O.colorscale==="YIGnBu"&&(O.colorscale="YlGnBu"),O.colorscale==="YIOrRd"&&(O.colorscale="YlOrRd"))}if(b.type==="surface"&&T.isPlainObject(b.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var P=b.contours[C[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if(b.type==="candlestick"||b.type==="ohlc"){var D=(b.increasing||{}).showlegend!==!1,U=(b.decreasing||{}).showlegend!==!1,I=l(b.increasing),N=l(b.decreasing);if(I!==!1&&N!==!1){var W=u(I,N,D,U);W&&(b.name=W)}else!I&&!N||b.name||(b.name=I||N)}if(Array.isArray(b.transforms)){var F=b.transforms;for(m=0;m<F.length;m++){var j=F[m];if(T.isPlainObject(j))switch(j.type){case"filter":j.filtersrc&&(j.target=j.filtersrc,delete j.filtersrc),j.calendar&&(j.valuecalendar||(j.valuecalendar=j.calendar),delete j.calendar);break;case"groupby":if(j.styles=j.styles||j.style,j.styles&&!Array.isArray(j.styles)){var H=j.styles,te=Object.keys(H);j.styles=[];for(var Q=0;Q<te.length;Q++)j.styles.push({target:te[Q],value:H[te[Q]]})}}}}c(b,"line")&&delete b.line,"marker"in b&&(c(b.marker,"line")&&delete b.marker.line,c(b,"marker")&&delete b.marker),s.clean(b),b.autobinx&&(delete b.autobinx,delete b.xbins),b.autobiny&&(delete b.autobiny,delete b.ybins),a(b),b.colorbar&&a(b.colorbar),b.marker&&b.marker.colorbar&&a(b.marker.colorbar),b.line&&b.line.colorbar&&a(b.line.colorbar),b.aaxis&&a(b.aaxis),b.baxis&&a(b.baxis)}},R.swapXYData=function(g){var y;if(T.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var m=g.error_y,b="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(g,["error_?.copy_ystyle"]),b&&T.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if(typeof g.hoverinfo=="string"){var f=g.hoverinfo.split("+");for(y=0;y<f.length;y++)f[y]==="x"?f[y]="y":f[y]==="y"&&(f[y]="x");g.hoverinfo=f.join("+")}},R.coerceTraceIndices=function(g,y){if(M(y))return[y];if(!Array.isArray(y)||!y.length)return g.data.map(function(f,S){return S});if(Array.isArray(y)){for(var m=[],b=0;b<y.length;b++)T.isIndex(y[b],g.data.length)?m.push(y[b]):T.warn("trace index (",y[b],") is not a number or is out of bounds");return m}return y},R.manageArrayContainers=function(g,y,m){var b=g.obj,f=g.parts,S=f.length,w=f[S-1],E=M(w);if(E&&y===null){var O=f.slice(0,S-1).join(".");T.nestedProperty(b,O).get().splice(w,1)}else E&&g.get()===void 0&&g.get()===void 0&&(m[g.astr]=null),g.set(y)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function d(g){var y=g.search(x);if(y>0)return g.substr(0,y)}R.hasParent=function(g,y){for(var m=d(y);m;){if(m in g)return!0;m=d(m)}return!1};var v=["x","y","z"];R.clearAxisTypes=function(g,y,m){for(var b=0;b<y.length;b++)for(var f=g._fullData[b],S=0;S<3;S++){var w=i(g,f,v[S]);if(w&&w.type!=="log"){var E=w._name,O=w._id.substr(1);if(O.substr(0,5)==="scene"){if(m[O]!==void 0)continue;E=O+"."+E}var C=E+".type";m[E]===void 0&&m[C]===void 0&&T.nestedProperty(g.layout,C).set(null)}}}},22448:function(ee,R,e){var M=e(36424);R._doPlot=M._doPlot,R.newPlot=M.newPlot,R.restyle=M.restyle,R.relayout=M.relayout,R.redraw=M.redraw,R.update=M.update,R._guiRestyle=M._guiRestyle,R._guiRelayout=M._guiRelayout,R._guiUpdate=M._guiUpdate,R._storeDirectGUIEdit=M._storeDirectGUIEdit,R.react=M.react,R.extendTraces=M.extendTraces,R.prependTraces=M.prependTraces,R.addTraces=M.addTraces,R.deleteTraces=M.deleteTraces,R.moveTraces=M.moveTraces,R.purge=M.purge,R.addFrames=M.addFrames,R.deleteFrames=M.deleteFrames,R.animate=M.animate,R.setPlotConfig=M.setPlotConfig;var k=e(52200).getGraphDiv,o=e(4016).eraseActiveShape;R.deleteActiveShape=function(_){return o(k(_))},R.toImage=e(67024),R.validate=e(21480),R.downloadImage=e(39792);var T=e(94828);R.makeTemplate=T.makeTemplate,R.validateTemplate=T.validateTemplate},17680:function(ee,R,e){var M=e(63620),k=e(16628),o=e(24248),T=e(14952).sorterAsc,_=e(24040);R.containerArrayMatch=e(69820);var p=R.isAddVal=function(t){return t==="add"||M(t)},s=R.isRemoveVal=function(t){return t===null||t==="remove"};R.applyContainerArrayChanges=function(t,i,r,n,a){var l=i.astr,u=_.getComponentMethod(l,"supplyLayoutDefaults"),h=_.getComponentMethod(l,"draw"),c=_.getComponentMethod(l,"drawOne"),x=n.replot||n.recalc||u===k||h===k,d=t.layout,v=t._fullLayout;if(r[""]){Object.keys(r).length>1&&o.warn("Full array edits are incompatible with other edits",l);var g=r[""][""];if(s(g))i.set(null);else{if(!Array.isArray(g))return o.warn("Unrecognized full array edit value",l,g),!0;i.set(g)}return!x&&(u(d,v),h(t),!0)}var y,m,b,f,S,w,E,O,C=Object.keys(r).map(Number).sort(T),P=i.get(),D=P||[],U=a(v,l).get(),I=[],N=-1,W=D.length;for(y=0;y<C.length;y++)if(f=r[b=C[y]],S=Object.keys(f),w=f[""],E=p(w),b<0||b>D.length-(E?0:1))o.warn("index out of range",l,b);else if(w!==void 0)S.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",l,b),s(w)?I.push(b):E?(w==="add"&&(w={}),D.splice(b,0,w),U&&U.splice(b,0,{})):o.warn("Unrecognized full object edit value",l,b,w),N===-1&&(N=b);else for(m=0;m<S.length;m++)O=l+"["+b+"].",a(D[b],S[m],O).set(f[S[m]]);for(y=I.length-1;y>=0;y--)D.splice(I[y],1),U&&U.splice(I[y],1);if(D.length?P||i.set(D):i.set(null),x)return!1;if(u(d,v),c!==k){var F;if(N===-1)F=C;else{for(W=Math.max(D.length,W),F=[],y=0;y<C.length&&!((b=C[y])>=N);y++)F.push(b);for(y=N;y<W;y++)F.push(y)}for(y=0;y<F.length;y++)c(t,F[y])}else h(t);return!0}},36424:function(ee,R,e){var M=e(33428),k=e(38248),o=e(52264),T=e(3400),_=T.nestedProperty,p=e(95924),s=e(94552),t=e(24040),i=e(73060),r=e(7316),n=e(54460),a=e(96312),l=e(94724),u=e(43616),h=e(76308),c=e(42464).initInteractions,x=e(9616),d=e(22676).clearOutline,v=e(20556).dfltConfig,g=e(17680),y=e(93404),m=e(39172),b=e(67824),f=e(33816).AX_NAME_PATTERN,S=0;function w(_e){var we=_e._fullLayout;we._redrawFromAutoMarginCount?we._redrawFromAutoMarginCount--:_e.emit("plotly_afterplot")}function E(_e,we){try{_e._fullLayout._paper.style("background",we)}catch(Ae){T.error(Ae)}}function O(_e,we){E(_e,h.combine(we,"white"))}function C(_e,we){if(!_e._context){_e._context=T.extendDeep({},v);var Ae=M.select("base");_e._context._baseUrl=Ae.size()&&Ae.attr("href")?window.location.href.split("#")[0]:""}var Oe,ze,pe,be=_e._context;if(we){for(ze=Object.keys(we),Oe=0;Oe<ze.length;Oe++)(pe=ze[Oe])!=="editable"&&pe!=="edits"&&pe in be&&(pe==="setBackground"&&we[pe]==="opaque"?be[pe]=O:be[pe]=we[pe]);we.plot3dPixelRatio&&!be.plotGlPixelRatio&&(be.plotGlPixelRatio=be.plot3dPixelRatio);var ke=we.editable;if(ke!==void 0)for(be.editable=ke,ze=Object.keys(be.edits),Oe=0;Oe<ze.length;Oe++)be.edits[ze[Oe]]=ke;if(we.edits)for(ze=Object.keys(we.edits),Oe=0;Oe<ze.length;Oe++)(pe=ze[Oe])in be.edits&&(be.edits[pe]=we.edits[pe]);be._exportedPlot=we._exportedPlot}be.staticPlot&&(be.editable=!1,be.edits={},be.autosizable=!1,be.scrollZoom=!1,be.doubleClick=!1,be.showTips=!1,be.showLink=!1,be.displayModeBar=!1),be.displayModeBar!=="hover"||o||(be.displayModeBar=!0),be.setBackground!=="transparent"&&typeof be.setBackground=="function"||(be.setBackground=E),be._hasZeroHeight=be._hasZeroHeight||_e.clientHeight===0,be._hasZeroWidth=be._hasZeroWidth||_e.clientWidth===0;var Ie=be.scrollZoom,Ee=be._scrollZoom={};if(Ie===!0)Ee.cartesian=1,Ee.gl3d=1,Ee.geo=1,Ee.mapbox=1;else if(typeof Ie=="string"){var Be=Ie.split("+");for(Oe=0;Oe<Be.length;Oe++)Ee[Be[Oe]]=1}else Ie!==!1&&(Ee.gl3d=1,Ee.geo=1,Ee.mapbox=1)}function P(_e,we){var Ae,Oe,ze=we+1,pe=[];for(Ae=0;Ae<_e.length;Ae++)(Oe=_e[Ae])<0?pe.push(ze+Oe):pe.push(Oe);return pe}function D(_e,we,Ae){var Oe,ze;for(Oe=0;Oe<we.length;Oe++){if((ze=we[Oe])!==parseInt(ze,10))throw new Error("all values in "+Ae+" must be integers");if(ze>=_e.data.length||ze<-_e.data.length)throw new Error(Ae+" must be valid indices for gd.data.");if(we.indexOf(ze,Oe+1)>-1||ze>=0&&we.indexOf(-_e.data.length+ze)>-1||ze<0&&we.indexOf(_e.data.length+ze)>-1)throw new Error("each index in "+Ae+" must be unique.")}}function U(_e,we,Ae){if(!Array.isArray(_e.data))throw new Error("gd.data must be an array.");if(we===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(we)||(we=[we]),D(_e,we,"currentIndices"),Ae===void 0||Array.isArray(Ae)||(Ae=[Ae]),Ae!==void 0&&D(_e,Ae,"newIndices"),Ae!==void 0&&we.length!==Ae.length)throw new Error("current and new indices must be of equal length.")}function I(_e,we,Ae,Oe,ze){(function(Ze,rt,it,dt){var vt=T.isPlainObject(dt);if(!Array.isArray(Ze.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(rt))throw new Error("update must be a key:value object");if(it===void 0)throw new Error("indices must be an integer or array of integers");for(var ht in D(Ze,it,"indices"),rt){if(!Array.isArray(rt[ht])||rt[ht].length!==it.length)throw new Error("attribute "+ht+" must be an array of length equal to indices array length");if(vt&&(!(ht in dt)||!Array.isArray(dt[ht])||dt[ht].length!==rt[ht].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(_e,we,Ae,Oe);for(var pe=function(Ze,rt,it,dt){var vt,ht,Qe,Je,Tt,Ot=T.isPlainObject(dt),Pt=[];for(var Mt in Array.isArray(it)||(it=[it]),it=P(it,Ze.data.length-1),rt)for(var He=0;He<it.length;He++){if(vt=Ze.data[it[He]],ht=(Qe=_(vt,Mt)).get(),Je=rt[Mt][He],!T.isArrayOrTypedArray(Je))throw new Error("attribute: "+Mt+" index: "+He+" must be an array");if(!T.isArrayOrTypedArray(ht))throw new Error("cannot extend missing or non-array attribute: "+Mt);if(ht.constructor!==Je.constructor)throw new Error("cannot extend array with an array of a different type: "+Mt);Tt=Ot?dt[Mt][He]:dt,k(Tt)||(Tt=-1),Pt.push({prop:Qe,target:ht,insert:Je,maxp:Math.floor(Tt)})}return Pt}(_e,we,Ae,Oe),be={},ke={},Ie=0;Ie<pe.length;Ie++){var Ee=pe[Ie].prop,Be=pe[Ie].maxp,Ve=ze(pe[Ie].target,pe[Ie].insert,Be);Ee.set(Ve[0]),Array.isArray(be[Ee.astr])||(be[Ee.astr]=[]),be[Ee.astr].push(Ve[1]),Array.isArray(ke[Ee.astr])||(ke[Ee.astr]=[]),ke[Ee.astr].push(pe[Ie].target.length)}return{update:be,maxPoints:ke}}function N(_e,we){var Ae=new _e.constructor(_e.length+we.length);return Ae.set(_e),Ae.set(we,_e.length),Ae}function W(_e,we,Ae,Oe){_e=T.getGraphDiv(_e),y.clearPromiseQueue(_e);var ze={};if(typeof we=="string")ze[we]=Ae;else{if(!T.isPlainObject(we))return T.warn("Restyle fail.",we,Ae,Oe),Promise.reject();ze=T.extendFlat({},we),Oe===void 0&&(Oe=Ae)}Object.keys(ze).length&&(_e.changed=!0);var pe=y.coerceTraceIndices(_e,Oe),be=te(_e,ze,pe),ke=be.flags;ke.calc&&(_e.calcdata=void 0),ke.clearAxisTypes&&y.clearAxisTypes(_e,pe,{});var Ie=[];ke.fullReplot?Ie.push(R._doPlot):(Ie.push(r.previousPromises),r.supplyDefaults(_e),ke.markerSize&&(r.doCalcdata(_e),X(Ie)),ke.style&&Ie.push(m.doTraceStyle),ke.colorbars&&Ie.push(m.doColorBars),Ie.push(w)),Ie.push(r.rehover,r.redrag,r.reselect),s.add(_e,W,[_e,be.undoit,be.traces],W,[_e,be.redoit,be.traces]);var Ee=T.syncOrAsync(Ie,_e);return Ee&&Ee.then||(Ee=Promise.resolve()),Ee.then(function(){return _e.emit("plotly_restyle",be.eventData),_e})}function F(_e){return _e===void 0?null:_e}function j(_e,we){return we?function(Ae,Oe,ze){var pe=_(Ae,Oe),be=pe.set;return pe.set=function(ke){H((ze||"")+Oe,pe.get(),ke,_e),be(ke)},pe}:_}function H(_e,we,Ae,Oe){if(Array.isArray(we)||Array.isArray(Ae))for(var ze=Array.isArray(we)?we:[],pe=Array.isArray(Ae)?Ae:[],be=Math.max(ze.length,pe.length),ke=0;ke<be;ke++)H(_e+"["+ke+"]",ze[ke],pe[ke],Oe);else if(T.isPlainObject(we)||T.isPlainObject(Ae)){var Ie=T.isPlainObject(we)?we:{},Ee=T.isPlainObject(Ae)?Ae:{},Be=T.extendFlat({},Ie,Ee);for(var Ve in Be)H(_e+"."+Ve,Ie[Ve],Ee[Ve],Oe)}else Oe[_e]===void 0&&(Oe[_e]=F(we))}function te(_e,we,Ae){var Oe,ze=_e._fullLayout,pe=_e._fullData,be=_e.data,ke=ze._guiEditing,Ie=j(ze._preGUI,ke),Ee=T.extendDeepAll({},we);Q(we);var Be,Ve=b.traceFlags(),Ze={},rt={};function it(){return Ae.map(function(){})}function dt(Nt){var Wt=n.id2name(Nt);Be.indexOf(Wt)===-1&&Be.push(Wt)}function vt(Nt){return"LAYOUT"+Nt+".autorange"}function ht(Nt){return"LAYOUT"+Nt+".range"}function Qe(Nt){for(var Wt=Nt;Wt<pe.length;Wt++)if(pe[Wt]._input===be[Nt])return pe[Wt]}function Je(Nt,Wt,Rt){if(Array.isArray(Nt))Nt.forEach(function(hn){Je(hn,Wt,Rt)});else if(!(Nt in we)&&!y.hasParent(we,Nt)){var Ln;if(Nt.substr(0,6)==="LAYOUT")Ln=Ie(_e.layout,Nt.replace("LAYOUT",""));else{var bn=Ae[Rt];Ln=j(ze._tracePreGUI[Qe(bn)._fullInput.uid],ke)(be[bn],Nt)}Nt in rt||(rt[Nt]=it()),rt[Nt][Rt]===void 0&&(rt[Nt][Rt]=F(Ln.get())),Wt!==void 0&&Ln.set(Wt)}}function Tt(Nt){return function(Wt){return pe[Wt][Nt]}}function Ot(Nt){return function(Wt,Rt){return Wt===!1?pe[Ae[Rt]][Nt]:null}}for(var Pt in we){if(y.hasParent(we,Pt))throw new Error("cannot set "+Pt+" and a parent attribute simultaneously");var Mt,He,Ye,Ne,We,ot,tt=we[Pt];if(Pt!=="autobinx"&&Pt!=="autobiny"||(Pt=Pt.charAt(Pt.length-1)+"bins",tt=Array.isArray(tt)?tt.map(Ot(Pt)):tt===!1?Ae.map(Tt(Pt)):null),Ze[Pt]=tt,Pt.substr(0,6)!=="LAYOUT"){for(rt[Pt]=it(),Oe=0;Oe<Ae.length;Oe++)if(Mt=be[Ae[Oe]],He=Qe(Ae[Oe]),Ne=(Ye=j(ze._tracePreGUI[He._fullInput.uid],ke)(Mt,Pt)).get(),(We=Array.isArray(tt)?tt[Oe%tt.length]:tt)!==void 0){var Re=Ye.parts[Ye.parts.length-1],Fe=Pt.substr(0,Pt.length-Re.length-1),nt=Fe?Fe+".":"",Ge=Fe?_(He,Fe).get():He;if((ot=i.getTraceValObject(He,Ye.parts))&&ot.impliedEdits&&We!==null)for(var ct in ot.impliedEdits)Je(T.relativeAttr(Pt,ct),ot.impliedEdits[ct],Oe);else if(Re!=="thicknessmode"&&Re!=="lenmode"||Ne===We||We!=="fraction"&&We!=="pixels"||!Ge){if(Pt==="type"&&(We==="pie"!=(Ne==="pie")||We==="funnelarea"!=(Ne==="funnelarea"))){var pt="x",gt="y";We!=="bar"&&Ne!=="bar"||Mt.orientation!=="h"||(pt="y",gt="x"),T.swapAttrs(Mt,["?","?src"],"labels",pt),T.swapAttrs(Mt,["d?","?0"],"label",pt),T.swapAttrs(Mt,["?","?src"],"values",gt),Ne==="pie"||Ne==="funnelarea"?(_(Mt,"marker.color").set(_(Mt,"marker.colors").get()),ze._pielayer.selectAll("g.trace").remove()):t.traceIs(Mt,"cartesian")&&_(Mt,"marker.colors").set(_(Mt,"marker.color").get())}}else{var ut=ze._size,kt=Ge.orient,mt=kt==="top"||kt==="bottom";if(Re==="thicknessmode"){var At=mt?ut.h:ut.w;Je(nt+"thickness",Ge.thickness*(We==="fraction"?1/At:At),Oe)}else{var Lt=mt?ut.w:ut.h;Je(nt+"len",Ge.len*(We==="fraction"?1/Lt:Lt),Oe)}}if(rt[Pt][Oe]=F(Ne),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Pt)!==-1){if(Pt==="orientation"){Ye.set(We);var Ct=Mt.x&&!Mt.y?"h":"v";if((Ye.get()||Ct)===He.orientation)continue}else Pt==="orientationaxes"&&(Mt.orientation={v:"h",h:"v"}[He.orientation]);y.swapXYData(Mt),Ve.calc=Ve.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Ye.parts[0])!==-1?(y.manageArrayContainers(Ye,We,rt),Ve.calc=!0):(ot?ot.arrayOk&&!t.traceIs(He,"regl")&&(T.isArrayOrTypedArray(We)||T.isArrayOrTypedArray(Ne))?Ve.calc=!0:b.update(Ve,ot):Ve.calc=!0,Ye.set(We))}if(["swapxyaxes","orientationaxes"].indexOf(Pt)!==-1&&n.swap(_e,Ae),Pt==="orientationaxes"){var zt=_(_e.layout,"hovermode"),Gt=zt.get();Gt==="x"?zt.set("y"):Gt==="y"?zt.set("x"):Gt==="x unified"?zt.set("y unified"):Gt==="y unified"&&zt.set("x unified")}if(["orientation","type"].indexOf(Pt)!==-1){for(Be=[],Oe=0;Oe<Ae.length;Oe++){var rn=be[Ae[Oe]];t.traceIs(rn,"cartesian")&&(dt(rn.xaxis||"x"),dt(rn.yaxis||"y"))}Je(Be.map(vt),!0,0),Je(Be.map(ht),[0,1],0)}}else Ye=Ie(_e.layout,Pt.replace("LAYOUT","")),rt[Pt]=[F(Ye.get())],Ye.set(Array.isArray(tt)?tt[0]:tt),Ve.calc=!0}return(Ve.calc||Ve.plot)&&(Ve.fullReplot=!0),{flags:Ve,undoit:rt,redoit:Ze,traces:Ae,eventData:T.extendDeepNoArrays([],[Ee,Ae])}}function Q(_e){var we,Ae,Oe,ze=T.counterRegex("axis",".title",!1,!1),pe=/colorbar\.title$/,be=Object.keys(_e);for(we=0;we<be.length;we++)Ae=be[we],Oe=_e[Ae],Ae!=="title"&&!ze.test(Ae)&&!pe.test(Ae)||typeof Oe!="string"&&typeof Oe!="number"?Ae.indexOf("titlefont")>-1&&Ae.indexOf("grouptitlefont")===-1?ke(Ae,Ae.replace("titlefont","title.font")):Ae.indexOf("titleposition")>-1?ke(Ae,Ae.replace("titleposition","title.position")):Ae.indexOf("titleside")>-1?ke(Ae,Ae.replace("titleside","title.side")):Ae.indexOf("titleoffset")>-1&&ke(Ae,Ae.replace("titleoffset","title.offset")):ke(Ae,Ae.replace("title","title.text"));function ke(Ie,Ee){_e[Ee]=_e[Ie],delete _e[Ie]}}function $(_e,we,Ae){_e=T.getGraphDiv(_e),y.clearPromiseQueue(_e);var Oe={};if(typeof we=="string")Oe[we]=Ae;else{if(!T.isPlainObject(we))return T.warn("Relayout fail.",we,Ae),Promise.reject();Oe=T.extendFlat({},we)}Object.keys(Oe).length&&(_e.changed=!0);var ze=ae(_e,Oe),pe=ze.flags;pe.calc&&(_e.calcdata=void 0);var be=[r.previousPromises];pe.layoutReplot?be.push(m.layoutReplot):Object.keys(Oe).length&&(K(_e,pe,ze)||r.supplyDefaults(_e),pe.legend&&be.push(m.doLegend),pe.layoutstyle&&be.push(m.layoutStyles),pe.axrange&&X(be,ze.rangesAltered),pe.ticks&&be.push(m.doTicksRelayout),pe.modebar&&be.push(m.doModeBar),pe.camera&&be.push(m.doCamera),pe.colorbars&&be.push(m.doColorBars),be.push(w)),be.push(r.rehover,r.redrag,r.reselect),s.add(_e,$,[_e,ze.undoit],$,[_e,ze.redoit]);var ke=T.syncOrAsync(be,_e);return ke&&ke.then||(ke=Promise.resolve(_e)),ke.then(function(){return _e.emit("plotly_relayout",ze.eventData),_e})}function K(_e,we,Ae){var Oe,ze,pe=_e._fullLayout;if(!we.axrange)return!1;for(var be in we)if(be!=="axrange"&&we[be])return!1;var ke=function(rt,it){return T.coerce(Oe,ze,l,rt,it)},Ie={};for(var Ee in Ae.rangesAltered){var Be=n.id2name(Ee);if(Oe=_e.layout[Be],ze=pe[Be],a(Oe,ze,ke,Ie),ze._matchGroup){for(var Ve in ze._matchGroup)if(Ve!==Ee){var Ze=pe[n.id2name(Ve)];Ze.autorange=ze.autorange,Ze.range=ze.range.slice(),Ze._input.range=ze.range.slice()}}}return!0}function X(_e,we){var Ae=we?function(Oe){var ze=[];for(var pe in we){var be=n.getFromId(Oe,pe);if(ze.push(pe),(be.ticklabelposition||"").indexOf("inside")!==-1&&be._anchorAxis&&ze.push(be._anchorAxis._id),be._matchGroup)for(var ke in be._matchGroup)we[ke]||ze.push(ke)}return n.draw(Oe,ze,{skipTitle:!0})}:function(Oe){return n.draw(Oe,"redraw")};_e.push(d,m.doAutoRangeAndConstraints,Ae,m.drawData,m.finalDraw)}var Y=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,re=/^[xyz]axis[0-9]*\.autorange$/,se=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ae(_e,we){var Ae,Oe,ze,pe=_e.layout,be=_e._fullLayout,ke=be._guiEditing,Ie=j(be._preGUI,ke),Ee=Object.keys(we),Be=n.list(_e),Ve=T.extendDeepAll({},we),Ze={};for(Q(we),Ee=Object.keys(we),Oe=0;Oe<Ee.length;Oe++)if(Ee[Oe].indexOf("allaxes")===0){for(ze=0;ze<Be.length;ze++){var rt=Be[ze]._id.substr(1),it=rt.indexOf("scene")!==-1?rt+".":"",dt=Ee[Oe].replace("allaxes",it+Be[ze]._name);we[dt]||(we[dt]=we[Ee[Oe]])}delete we[Ee[Oe]]}var vt=b.layoutFlags(),ht={},Qe={};function Je(hn,Kt){if(Array.isArray(hn))hn.forEach(function($t){Je($t,Kt)});else if(!(hn in we)&&!y.hasParent(we,hn)){var on=Ie(pe,hn);hn in Qe||(Qe[hn]=F(on.get())),Kt!==void 0&&on.set(Kt)}}var Tt,Ot={};function Pt(hn){var Kt=n.name2id(hn.split(".")[0]);return Ot[Kt]=1,Kt}for(var Mt in we){if(y.hasParent(we,Mt))throw new Error("cannot set "+Mt+" and a parent attribute simultaneously");for(var He=Ie(pe,Mt),Ye=we[Mt],Ne=He.parts.length-1;Ne>0&&typeof He.parts[Ne]!="string";)Ne--;var We=He.parts[Ne],ot=He.parts[Ne-1]+"."+We,tt=He.parts.slice(0,Ne).join("."),Re=_(_e.layout,tt).get(),Fe=_(be,tt).get(),nt=He.get();if(Ye!==void 0){ht[Mt]=Ye,Qe[Mt]=We==="reverse"?Ye:F(nt);var Ge=i.getLayoutValObject(be,He.parts);if(Ge&&Ge.impliedEdits&&Ye!==null)for(var ct in Ge.impliedEdits)Je(T.relativeAttr(Mt,ct),Ge.impliedEdits[ct]);if(["width","height"].indexOf(Mt)!==-1)if(Ye){Je("autosize",null);var pt=Mt==="height"?"width":"height";Je(pt,be[pt])}else be[Mt]=_e._initialAutoSize[Mt];else if(Mt==="autosize")Je("width",Ye?null:be.width),Je("height",Ye?null:be.height);else if(ot.match(Y))Pt(ot),_(be,tt+"._inputRange").set(null);else if(ot.match(re)){Pt(ot),_(be,tt+"._inputRange").set(null);var gt=_(be,tt).get();gt._inputDomain&&(gt._input.domain=gt._inputDomain.slice())}else ot.match(se)&&_(be,tt+"._inputDomain").set(null);if(We==="type"){Tt=Re;var ut=Fe.type==="linear"&&Ye==="log",kt=Fe.type==="log"&&Ye==="linear";if(ut||kt){if(Tt&&Tt.range)if(Fe.autorange)ut&&(Tt.range=Tt.range[1]>Tt.range[0]?[1,2]:[2,1]);else{var mt=Tt.range[0],At=Tt.range[1];ut?(mt<=0&&At<=0&&Je(tt+".autorange",!0),mt<=0?mt=At/1e6:At<=0&&(At=mt/1e6),Je(tt+".range[0]",Math.log(mt)/Math.LN10),Je(tt+".range[1]",Math.log(At)/Math.LN10)):(Je(tt+".range[0]",Math.pow(10,mt)),Je(tt+".range[1]",Math.pow(10,At)))}else Je(tt+".autorange",!0);Array.isArray(be._subplots.polar)&&be._subplots.polar.length&&be[He.parts[0]]&&He.parts[1]==="radialaxis"&&delete be[He.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(_e,Fe,Ye,Je),t.getComponentMethod("images","convertCoords")(_e,Fe,Ye,Je)}else Je(tt+".autorange",!0),Je(tt+".range",null);_(be,tt+"._inputRange").set(null)}else if(We.match(f)){var Lt=_(be,Mt).get(),Ct=(Ye||{}).type;Ct&&Ct!=="-"||(Ct="linear"),t.getComponentMethod("annotations","convertCoords")(_e,Lt,Ct,Je),t.getComponentMethod("images","convertCoords")(_e,Lt,Ct,Je)}var zt=g.containerArrayMatch(Mt);if(zt){Ae=zt.array,Oe=zt.index;var Gt=zt.property,rn=Ge||{editType:"calc"};Oe!==""&&Gt===""&&(g.isAddVal(Ye)?Qe[Mt]=null:g.isRemoveVal(Ye)?Qe[Mt]=(_(pe,Ae).get()||[])[Oe]:T.warn("unrecognized full object value",we)),b.update(vt,rn),Ze[Ae]||(Ze[Ae]={});var Nt=Ze[Ae][Oe];Nt||(Nt=Ze[Ae][Oe]={}),Nt[Gt]=Ye,delete we[Mt]}else We==="reverse"?(Re.range?Re.range.reverse():(Je(tt+".autorange",!0),Re.range=[1,0]),Fe.autorange?vt.calc=!0:vt.plot=!0):(Mt==="dragmode"&&(Ye===!1&&nt!==!1||Ye!==!1&&nt===!1)||be._has("scatter-like")&&be._has("regl")&&Mt==="dragmode"&&(Ye==="lasso"||Ye==="select")&&nt!=="lasso"&&nt!=="select"||be._has("gl2d")?vt.plot=!0:Ge?b.update(vt,Ge):vt.calc=!0,He.set(Ye))}}for(Ae in Ze)g.applyContainerArrayChanges(_e,Ie(pe,Ae),Ze[Ae],vt,Ie)||(vt.plot=!0);for(var Wt in Ot){var Rt=(Tt=n.getFromId(_e,Wt))&&Tt._constraintGroup;if(Rt)for(var Ln in vt.calc=!0,Rt)Ot[Ln]||(n.getFromId(_e,Ln)._constraintShrinkable=!0)}(ce(_e)||we.height||we.width)&&(vt.plot=!0);var bn=be.shapes;for(Oe=0;Oe<bn.length;Oe++)if(bn[Oe].showlegend){vt.calc=!0;break}return(vt.plot||vt.calc)&&(vt.layoutReplot=!0),{flags:vt,rangesAltered:Ot,undoit:Qe,redoit:ht,eventData:Ve}}function ce(_e){var we=_e._fullLayout,Ae=we.width,Oe=we.height;return _e.layout.autosize&&r.plotAutoSize(_e,_e.layout,we),we.width!==Ae||we.height!==Oe}function fe(_e,we,Ae,Oe){_e=T.getGraphDiv(_e),y.clearPromiseQueue(_e),T.isPlainObject(we)||(we={}),T.isPlainObject(Ae)||(Ae={}),Object.keys(we).length&&(_e.changed=!0),Object.keys(Ae).length&&(_e.changed=!0);var ze=y.coerceTraceIndices(_e,Oe),pe=te(_e,T.extendFlat({},we),ze),be=pe.flags,ke=ae(_e,T.extendFlat({},Ae)),Ie=ke.flags;(be.calc||Ie.calc)&&(_e.calcdata=void 0),be.clearAxisTypes&&y.clearAxisTypes(_e,ze,Ae);var Ee=[];Ie.layoutReplot?Ee.push(m.layoutReplot):be.fullReplot?Ee.push(R._doPlot):(Ee.push(r.previousPromises),K(_e,Ie,ke)||r.supplyDefaults(_e),be.style&&Ee.push(m.doTraceStyle),(be.colorbars||Ie.colorbars)&&Ee.push(m.doColorBars),Ie.legend&&Ee.push(m.doLegend),Ie.layoutstyle&&Ee.push(m.layoutStyles),Ie.axrange&&X(Ee,ke.rangesAltered),Ie.ticks&&Ee.push(m.doTicksRelayout),Ie.modebar&&Ee.push(m.doModeBar),Ie.camera&&Ee.push(m.doCamera),Ee.push(w)),Ee.push(r.rehover,r.redrag,r.reselect),s.add(_e,fe,[_e,pe.undoit,ke.undoit,pe.traces],fe,[_e,pe.redoit,ke.redoit,pe.traces]);var Be=T.syncOrAsync(Ee,_e);return Be&&Be.then||(Be=Promise.resolve(_e)),Be.then(function(){return _e.emit("plotly_update",{data:pe.eventData,layout:ke.eventData}),_e})}function he(_e){return function(we){we._fullLayout._guiEditing=!0;var Ae=_e.apply(null,arguments);return we._fullLayout._guiEditing=!1,Ae}}var ve=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ye=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function me(_e,we){for(var Ae=0;Ae<we.length;Ae++){var Oe=we[Ae],ze=_e.match(Oe.pattern);if(ze){var pe=ze[1]||"";return{head:pe,tail:_e.substr(pe.length+1),attr:Oe.attr}}}}function Me(_e,we){var Ae=_(we,_e).get();if(Ae!==void 0)return Ae;var Oe=_e.split(".");for(Oe.pop();Oe.length>1;)if(Oe.pop(),(Ae=_(we,Oe.join(".")+".uirevision").get())!==void 0)return Ae;return we.uirevision}function Pe(_e,we){for(var Ae=0;Ae<we.length;Ae++)if(we[Ae]._fullInput.uid===_e)return Ae;return-1}function ge(_e,we,Ae){for(var Oe=0;Oe<we.length;Oe++)if(we[Oe].uid===_e)return Oe;return!we[Ae]||we[Ae].uid?-1:Ae}function oe(_e,we){var Ae=T.isPlainObject(_e),Oe=Array.isArray(_e);return Ae||Oe?(Ae&&T.isPlainObject(we)||Oe&&Array.isArray(we))&&JSON.stringify(_e)===JSON.stringify(we):_e===we}function ie(_e,we,Ae,Oe){var ze,pe,be,ke=Oe.getValObject,Ie=Oe.flags,Ee=Oe.immutable,Be=Oe.inArray,Ve=Oe.arrayIndex;function Ze(){var Re=ze.editType;Be&&Re.indexOf("arraydraw")!==-1?T.pushUnique(Ie.arrays[Be],Ve):(b.update(Ie,ze),Re!=="none"&&Ie.nChanges++,Oe.transition&&ze.anim&&Ie.nChangesAnim++,(Y.test(be)||re.test(be))&&(Ie.rangesAltered[Ae[0]]=1),se.test(be)&&_(we,"_inputDomain").set(null),pe==="datarevision"&&(Ie.newDataRevision=1))}function rt(Re){return Re.valType==="data_array"||Re.arrayOk}for(pe in _e){if(Ie.calc&&!Oe.transition)return;var it=_e[pe],dt=we[pe],vt=Ae.concat(pe);if(be=vt.join("."),pe.charAt(0)!=="_"&&typeof it!="function"&&it!==dt){if((pe==="tick0"||pe==="dtick")&&Ae[0]!=="geo"){var ht=we.tickmode;if(ht==="auto"||ht==="array"||!ht)continue}if((pe!=="range"||!we.autorange)&&(pe!=="zmin"&&pe!=="zmax"||we.type!=="contourcarpet")&&(ze=ke(vt))&&(!ze._compareAsJSON||JSON.stringify(it)!==JSON.stringify(dt))){var Qe,Je=ze.valType,Tt=rt(ze),Ot=Array.isArray(it),Pt=Array.isArray(dt);if(Ot&&Pt){var Mt="_input_"+pe,He=_e[Mt],Ye=we[Mt];if(Array.isArray(He)&&He===Ye)continue}if(dt===void 0)Tt&&Ot?Ie.calc=!0:Ze();else if(ze._isLinkedToArray){var Ne=[],We=!1;Be||(Ie.arrays[pe]=Ne);var ot=Math.min(it.length,dt.length),tt=Math.max(it.length,dt.length);if(ot!==tt){if(ze.editType!=="arraydraw"){Ze();continue}We=!0}for(Qe=0;Qe<ot;Qe++)ie(it[Qe],dt[Qe],vt.concat(Qe),T.extendFlat({inArray:pe,arrayIndex:Qe},Oe));if(We)for(Qe=ot;Qe<tt;Qe++)Ne.push(Qe)}else!Je&&T.isPlainObject(it)?ie(it,dt,vt,Oe):Tt?Ot&&Pt?(Ee&&(Ie.calc=!0),(Ee||Oe.newDataRevision)&&Ze()):Ot!==Pt?Ie.calc=!0:Ze():Ot&&Pt&&it.length===dt.length&&String(it)===String(dt)||Ze()}}}for(pe in we)if(!(pe in _e)&&pe.charAt(0)!=="_"&&typeof we[pe]!="function"){if(rt(ze=ke(Ae.concat(pe)))&&Array.isArray(we[pe]))return void(Ie.calc=!0);Ze()}}function de(_e,we){var Ae;for(Ae in _e)if(Ae.charAt(0)!=="_"){var Oe=_e[Ae],ze=we[Ae];if(Oe!==ze)if(T.isPlainObject(Oe)&&T.isPlainObject(ze)){if(de(Oe,ze))return!0}else{if(!Array.isArray(Oe)||!Array.isArray(ze)||Oe.length!==ze.length)return!0;for(var pe=0;pe<Oe.length;pe++)if(Oe[pe]!==ze[pe]&&(!T.isPlainObject(Oe[pe])||!T.isPlainObject(ze[pe])||de(Oe[pe],ze[pe])))return!0}}}function Se(_e){var we=_e._fullLayout,Ae=_e.getBoundingClientRect();if(!T.equalDomRects(Ae,we._lastBBox)){var Oe=we._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(_e));we._invScaleX=Math.sqrt(Oe[0][0]*Oe[0][0]+Oe[0][1]*Oe[0][1]+Oe[0][2]*Oe[0][2]),we._invScaleY=Math.sqrt(Oe[1][0]*Oe[1][0]+Oe[1][1]*Oe[1][1]+Oe[1][2]*Oe[1][2]),we._lastBBox=Ae}}R.animate=function(_e,we,Ae){if(_e=T.getGraphDiv(_e),!T.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Oe=_e._transitionData;Oe._frameQueue||(Oe._frameQueue=[]);var ze=(Ae=r.supplyAnimationDefaults(Ae)).transition,pe=Ae.frame;function be(Ee){return Array.isArray(ze)?Ee>=ze.length?ze[0]:ze[Ee]:ze}function ke(Ee){return Array.isArray(pe)?Ee>=pe.length?pe[0]:pe[Ee]:pe}function Ie(Ee,Be){var Ve=0;return function(){if(Ee&&++Ve===Be)return Ee()}}return Oe._frameWaitingCnt===void 0&&(Oe._frameWaitingCnt=0),new Promise(function(Ee,Be){function Ve(){_e.emit("plotly_animating"),Oe._lastFrameAt=-1/0,Oe._timeToNext=0,Oe._runningTransitions=0,Oe._currentFrame=null;var Mt=function(){Oe._animationRaf=window.requestAnimationFrame(Mt),Date.now()-Oe._lastFrameAt>Oe._timeToNext&&function(){Oe._currentFrame&&Oe._currentFrame.onComplete&&Oe._currentFrame.onComplete();var He=Oe._currentFrame=Oe._frameQueue.shift();if(He){var Ye=He.name?He.name.toString():null;_e._fullLayout._currentFrame=Ye,Oe._lastFrameAt=Date.now(),Oe._timeToNext=He.frameOpts.duration,r.transition(_e,He.frame.data,He.frame.layout,y.coerceTraceIndices(_e,He.frame.traces),He.frameOpts,He.transitionOpts).then(function(){He.onComplete&&He.onComplete()}),_e.emit("plotly_animatingframe",{name:Ye,frame:He.frame,animation:{frame:He.frameOpts,transition:He.transitionOpts}})}else _e.emit("plotly_animated"),window.cancelAnimationFrame(Oe._animationRaf),Oe._animationRaf=null}()};Mt()}var Ze,rt,it=0;function dt(Mt){return Array.isArray(ze)?it>=ze.length?Mt.transitionOpts=ze[it]:Mt.transitionOpts=ze[0]:Mt.transitionOpts=ze,it++,Mt}var vt=[],ht=we==null,Qe=Array.isArray(we);if(ht||Qe||!T.isPlainObject(we)){if(ht||["string","number"].indexOf(typeof we)!==-1)for(Ze=0;Ze<Oe._frames.length;Ze++)(rt=Oe._frames[Ze])&&(ht||String(rt.group)===String(we))&&vt.push({type:"byname",name:String(rt.name),data:dt({name:rt.name})});else if(Qe)for(Ze=0;Ze<we.length;Ze++){var Je=we[Ze];["number","string"].indexOf(typeof Je)!==-1?(Je=String(Je),vt.push({type:"byname",name:Je,data:dt({name:Je})})):T.isPlainObject(Je)&&vt.push({type:"object",data:dt(T.extendFlat({},Je))})}}else vt.push({type:"object",data:dt(T.extendFlat({},we))});for(Ze=0;Ze<vt.length;Ze++)if((rt=vt[Ze]).type==="byname"&&!Oe._frameHash[rt.data.name])return T.warn('animate failure: frame not found: "'+rt.data.name+'"'),void Be();["next","immediate"].indexOf(Ae.mode)!==-1&&function(){if(Oe._frameQueue.length!==0){for(;Oe._frameQueue.length;){var Mt=Oe._frameQueue.pop();Mt.onInterrupt&&Mt.onInterrupt()}_e.emit("plotly_animationinterrupted",[])}}(),Ae.direction==="reverse"&&vt.reverse();var Tt=_e._fullLayout._currentFrame;if(Tt&&Ae.fromcurrent){var Ot=-1;for(Ze=0;Ze<vt.length;Ze++)if((rt=vt[Ze]).type==="byname"&&rt.name===Tt){Ot=Ze;break}if(Ot>0&&Ot<vt.length-1){var Pt=[];for(Ze=0;Ze<vt.length;Ze++)rt=vt[Ze],(vt[Ze].type!=="byname"||Ze>Ot)&&Pt.push(rt);vt=Pt}}vt.length>0?function(Mt){if(Mt.length!==0){for(var He=0;He<Mt.length;He++){var Ye;Ye=Mt[He].type==="byname"?r.computeFrame(_e,Mt[He].name):Mt[He].data;var Ne=ke(He),We=be(He);We.duration=Math.min(We.duration,Ne.duration);var ot={frame:Ye,name:Mt[He].name,frameOpts:Ne,transitionOpts:We};He===Mt.length-1&&(ot.onComplete=Ie(Ee,2),ot.onInterrupt=Be),Oe._frameQueue.push(ot)}Ae.mode==="immediate"&&(Oe._lastFrameAt=-1/0),Oe._animationRaf||Ve()}}(vt):(_e.emit("plotly_animated"),Ee())})},R.addFrames=function(_e,we,Ae){if(_e=T.getGraphDiv(_e),we==null)return Promise.resolve();if(!T.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Oe,ze,pe,be,ke=_e._transitionData._frames,Ie=_e._transitionData._frameHash;if(!Array.isArray(we))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+we);var Ee=ke.length+2*we.length,Be=[],Ve={};for(Oe=we.length-1;Oe>=0;Oe--)if(T.isPlainObject(we[Oe])){var Ze=we[Oe].name,rt=(Ie[Ze]||Ve[Ze]||{}).name,it=we[Oe].name,dt=Ie[rt]||Ve[rt];rt&&it&&typeof it=="number"&&dt&&S<5&&(S++,T.warn('addFrames: overwriting frame "'+(Ie[rt]||Ve[rt]).name+'" with a frame whose name of type "number" also equates to "'+rt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ve[Ze]={name:Ze},Be.push({frame:r.supplyFrameDefaults(we[Oe]),index:Ae&&Ae[Oe]!==void 0&&Ae[Oe]!==null?Ae[Oe]:Ee+Oe})}Be.sort(function(Mt,He){return Mt.index>He.index?-1:Mt.index<He.index?1:0});var vt=[],ht=[],Qe=ke.length;for(Oe=Be.length-1;Oe>=0;Oe--){if(typeof(ze=Be[Oe].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ze.name)for(;Ie[ze.name="frame "+_e._transitionData._counter++];);if(Ie[ze.name]){for(pe=0;pe<ke.length&&(ke[pe]||{}).name!==ze.name;pe++);vt.push({type:"replace",index:pe,value:ze}),ht.unshift({type:"replace",index:pe,value:ke[pe]})}else be=Math.max(0,Math.min(Be[Oe].index,Qe)),vt.push({type:"insert",index:be,value:ze}),ht.unshift({type:"delete",index:be}),Qe++}var Je=r.modifyFrames,Tt=r.modifyFrames,Ot=[_e,ht],Pt=[_e,vt];return s&&s.add(_e,Je,Ot,Tt,Pt),r.modifyFrames(_e,vt)},R.deleteFrames=function(_e,we){if(_e=T.getGraphDiv(_e),!T.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e);var Ae,Oe,ze=_e._transitionData._frames,pe=[],be=[];if(!we)for(we=[],Ae=0;Ae<ze.length;Ae++)we.push(Ae);for((we=we.slice()).sort(),Ae=we.length-1;Ae>=0;Ae--)Oe=we[Ae],pe.push({type:"delete",index:Oe}),be.unshift({type:"insert",index:Oe,value:ze[Oe]});var ke=r.modifyFrames,Ie=r.modifyFrames,Ee=[_e,be],Be=[_e,pe];return s&&s.add(_e,ke,Ee,Ie,Be),r.modifyFrames(_e,pe)},R.addTraces=function _e(we,Ae,Oe){we=T.getGraphDiv(we);var ze,pe,be=[],ke=R.deleteTraces,Ie=_e,Ee=[we,be],Be=[we,Ae];for(function(Ve,Ze,rt){var it,dt;if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array.");if(Ze===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ze)||(Ze=[Ze]),it=0;it<Ze.length;it++)if(typeof(dt=Ze[it])!="object"||Array.isArray(dt)||dt===null)throw new Error("all values in traces array must be non-array objects");if(rt===void 0||Array.isArray(rt)||(rt=[rt]),rt!==void 0&&rt.length!==Ze.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(we,Ae,Oe),Array.isArray(Ae)||(Ae=[Ae]),Ae=Ae.map(function(Ve){return T.extendFlat({},Ve)}),y.cleanData(Ae),ze=0;ze<Ae.length;ze++)we.data.push(Ae[ze]);for(ze=0;ze<Ae.length;ze++)be.push(-Ae.length+ze);if(Oe===void 0)return pe=R.redraw(we),s.add(we,ke,Ee,Ie,Be),pe;Array.isArray(Oe)||(Oe=[Oe]);try{U(we,be,Oe)}catch(Ve){throw we.data.splice(we.data.length-Ae.length,Ae.length),Ve}return s.startSequence(we),s.add(we,ke,Ee,Ie,Be),pe=R.moveTraces(we,be,Oe),s.stopSequence(we),pe},R.deleteTraces=function _e(we,Ae){we=T.getGraphDiv(we);var Oe,ze,pe=[],be=R.addTraces,ke=_e,Ie=[we,pe,Ae],Ee=[we,Ae];if(Ae===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ae)||(Ae=[Ae]),D(we,Ae,"indices"),(Ae=P(Ae,we.data.length-1)).sort(T.sorterDes),Oe=0;Oe<Ae.length;Oe+=1)ze=we.data.splice(Ae[Oe],1)[0],pe.push(ze);var Be=R.redraw(we);return s.add(we,be,Ie,ke,Ee),Be},R.extendTraces=function _e(we,Ae,Oe,ze){var pe=I(we=T.getGraphDiv(we),Ae,Oe,ze,function(Ie,Ee,Be){var Ve,Ze;if(T.isTypedArray(Ie))if(Be<0){var rt=new Ie.constructor(0),it=N(Ie,Ee);Be<0?(Ve=it,Ze=rt):(Ve=rt,Ze=it)}else if(Ve=new Ie.constructor(Be),Ze=new Ie.constructor(Ie.length+Ee.length-Be),Be===Ee.length)Ve.set(Ee),Ze.set(Ie);else if(Be<Ee.length){var dt=Ee.length-Be;Ve.set(Ee.subarray(dt)),Ze.set(Ie),Ze.set(Ee.subarray(0,dt),Ie.length)}else{var vt=Be-Ee.length,ht=Ie.length-vt;Ve.set(Ie.subarray(ht)),Ve.set(Ee,vt),Ze.set(Ie.subarray(0,ht))}else Ve=Ie.concat(Ee),Ze=Be>=0&&Be<Ve.length?Ve.splice(0,Ve.length-Be):[];return[Ve,Ze]}),be=R.redraw(we),ke=[we,pe.update,Oe,pe.maxPoints];return s.add(we,R.prependTraces,ke,_e,arguments),be},R.moveTraces=function _e(we,Ae,Oe){var ze,pe=[],be=[],ke=_e,Ie=_e,Ee=[we=T.getGraphDiv(we),Oe,Ae],Be=[we,Ae,Oe];if(U(we,Ae,Oe),Ae=Array.isArray(Ae)?Ae:[Ae],Oe===void 0)for(Oe=[],ze=0;ze<Ae.length;ze++)Oe.push(-Ae.length+ze);for(Oe=Array.isArray(Oe)?Oe:[Oe],Ae=P(Ae,we.data.length-1),Oe=P(Oe,we.data.length-1),ze=0;ze<we.data.length;ze++)Ae.indexOf(ze)===-1&&pe.push(we.data[ze]);for(ze=0;ze<Ae.length;ze++)be.push({newIndex:Oe[ze],trace:we.data[Ae[ze]]});for(be.sort(function(Ze,rt){return Ze.newIndex-rt.newIndex}),ze=0;ze<be.length;ze+=1)pe.splice(be[ze].newIndex,0,be[ze].trace);we.data=pe;var Ve=R.redraw(we);return s.add(we,ke,Ee,Ie,Be),Ve},R.prependTraces=function _e(we,Ae,Oe,ze){var pe=I(we=T.getGraphDiv(we),Ae,Oe,ze,function(Ie,Ee,Be){var Ve,Ze;if(T.isTypedArray(Ie))if(Be<=0){var rt=new Ie.constructor(0),it=N(Ee,Ie);Be<0?(Ve=it,Ze=rt):(Ve=rt,Ze=it)}else if(Ve=new Ie.constructor(Be),Ze=new Ie.constructor(Ie.length+Ee.length-Be),Be===Ee.length)Ve.set(Ee),Ze.set(Ie);else if(Be<Ee.length){var dt=Ee.length-Be;Ve.set(Ee.subarray(0,dt)),Ze.set(Ee.subarray(dt)),Ze.set(Ie,dt)}else{var vt=Be-Ee.length;Ve.set(Ee),Ve.set(Ie.subarray(0,vt),Ee.length),Ze.set(Ie.subarray(vt))}else Ve=Ee.concat(Ie),Ze=Be>=0&&Be<Ve.length?Ve.splice(Be,Ve.length):[];return[Ve,Ze]}),be=R.redraw(we),ke=[we,pe.update,Oe,pe.maxPoints];return s.add(we,R.extendTraces,ke,_e,arguments),be},R.newPlot=function(_e,we,Ae,Oe){return _e=T.getGraphDiv(_e),r.cleanPlot([],{},_e._fullData||[],_e._fullLayout||{}),r.purge(_e),R._doPlot(_e,we,Ae,Oe)},R._doPlot=function(_e,we,Ae,Oe){var ze;if(_e=T.getGraphDiv(_e),p.init(_e),T.isPlainObject(we)){var pe=we;we=pe.data,Ae=pe.layout,Oe=pe.config,ze=pe.frames}if(p.triggerHandler(_e,"plotly_beforeplot",[we,Ae,Oe])===!1)return Promise.reject();we||Ae||T.isPlotDiv(_e)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",_e),C(_e,Oe),Ae||(Ae={}),M.select(_e).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(_e._promises)||(_e._promises=[]);var be=(_e.data||[]).length===0&&Array.isArray(we);Array.isArray(we)&&(y.cleanData(we),be?_e.data=we:_e.data.push.apply(_e.data,we),_e.empty=!1),_e.layout&&!be||(_e.layout=y.cleanLayout(Ae)),r.supplyDefaults(_e);var ke=_e._fullLayout,Ie=ke._has("cartesian");ke._replotting=!0,(be||ke._shouldCreateBgLayer)&&(function(ht){var Qe=M.select(ht),Je=ht._fullLayout;if(Je._calcInverseTransform=Se,Je._calcInverseTransform(ht),Je._container=Qe.selectAll(".plot-container").data([0]),Je._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Je._paperdiv=Je._container.selectAll(".svg-container").data([0]),Je._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Je._glcontainer=Je._paperdiv.selectAll(".gl-container").data([{}]),Je._glcontainer.enter().append("div").classed("gl-container",!0),Je._paperdiv.selectAll(".main-svg").remove(),Je._paperdiv.select(".modebar-container").remove(),Je._paper=Je._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Je._toppaper=Je._paperdiv.append("svg").classed("main-svg",!0),Je._modebardiv=Je._paperdiv.append("div"),delete Je._modeBar,Je._hoverpaper=Je._paperdiv.append("svg").classed("main-svg",!0),!Je._uid){var Tt={};M.selectAll("defs").each(function(){this.id&&(Tt[this.id.split("-")[1]]=1)}),Je._uid=T.randstr(Tt)}Je._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),Je._defs=Je._paper.append("defs").attr("id","defs-"+Je._uid),Je._clips=Je._defs.append("g").classed("clips",!0),Je._topdefs=Je._toppaper.append("defs").attr("id","topdefs-"+Je._uid),Je._topclips=Je._topdefs.append("g").classed("clips",!0),Je._bgLayer=Je._paper.append("g").classed("bglayer",!0),Je._draggers=Je._paper.append("g").classed("draglayer",!0);var Ot=Je._paper.append("g").classed("layer-below",!0);Je._imageLowerLayer=Ot.append("g").classed("imagelayer",!0),Je._shapeLowerLayer=Ot.append("g").classed("shapelayer",!0),Je._cartesianlayer=Je._paper.append("g").classed("cartesianlayer",!0),Je._polarlayer=Je._paper.append("g").classed("polarlayer",!0),Je._smithlayer=Je._paper.append("g").classed("smithlayer",!0),Je._ternarylayer=Je._paper.append("g").classed("ternarylayer",!0),Je._geolayer=Je._paper.append("g").classed("geolayer",!0),Je._funnelarealayer=Je._paper.append("g").classed("funnelarealayer",!0),Je._pielayer=Je._paper.append("g").classed("pielayer",!0),Je._iciclelayer=Je._paper.append("g").classed("iciclelayer",!0),Je._treemaplayer=Je._paper.append("g").classed("treemaplayer",!0),Je._sunburstlayer=Je._paper.append("g").classed("sunburstlayer",!0),Je._indicatorlayer=Je._toppaper.append("g").classed("indicatorlayer",!0),Je._glimages=Je._paper.append("g").classed("glimages",!0);var Pt=Je._toppaper.append("g").classed("layer-above",!0);Je._imageUpperLayer=Pt.append("g").classed("imagelayer",!0),Je._shapeUpperLayer=Pt.append("g").classed("shapelayer",!0),Je._selectionLayer=Je._toppaper.append("g").classed("selectionlayer",!0),Je._infolayer=Je._toppaper.append("g").classed("infolayer",!0),Je._menulayer=Je._toppaper.append("g").classed("menulayer",!0),Je._zoomlayer=Je._toppaper.append("g").classed("zoomlayer",!0),Je._hoverlayer=Je._hoverpaper.append("g").classed("hoverlayer",!0),Je._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ht.emit("plotly_framework")}(_e),ke._shouldCreateBgLayer&&delete ke._shouldCreateBgLayer),u.initGradients(_e),u.initPatterns(_e),be&&n.saveShowSpikeInitial(_e);var Ee=!_e.calcdata||_e.calcdata.length!==(_e._fullData||[]).length;Ee&&r.doCalcdata(_e);for(var Be=0;Be<_e.calcdata.length;Be++)_e.calcdata[Be][0].trace=_e._fullData[Be];_e._context.responsive?_e._responsiveChartHandler||(_e._responsiveChartHandler=function(){T.isHidden(_e)||r.resize(_e)},window.addEventListener("resize",_e._responsiveChartHandler)):T.clearResponsive(_e);var Ve=T.extendFlat({},ke._size),Ze=0;function rt(){if(r.clearAutoMarginIds(_e),m.drawMarginPushers(_e),n.allowAutoMargin(_e),_e._fullLayout.title.text&&_e._fullLayout.title.automargin&&r.allowAutoMargin(_e,"title.automargin"),ke._has("pie"))for(var ht=_e._fullData,Qe=0;Qe<ht.length;Qe++){var Je=ht[Qe];Je.type==="pie"&&Je.automargin&&r.allowAutoMargin(_e,"pie."+Je.uid+".automargin")}return r.doAutoMargin(_e),r.previousPromises(_e)}function it(){_e._transitioning||(m.doAutoRangeAndConstraints(_e),be&&n.saveRangeInitial(_e),t.getComponentMethod("rangeslider","calcAutorange")(_e))}var dt=[r.previousPromises,function(){if(ze)return R.addFrames(_e,ze)},function ht(){for(var Qe=ke._basePlotModules,Je=0;Je<Qe.length;Je++)Qe[Je].drawFramework&&Qe[Je].drawFramework(_e);!ke._glcanvas&&ke._has("gl")&&(ke._glcanvas=ke._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Mt){return Mt.key}),ke._glcanvas.enter().append("canvas").attr("class",function(Mt){return"gl-canvas gl-canvas-"+Mt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Tt=_e._context.plotGlPixelRatio;if(ke._glcanvas){ke._glcanvas.attr("width",ke.width*Tt).attr("height",ke.height*Tt).style("width",ke.width+"px").style("height",ke.height+"px");var Ot=ke._glcanvas.data()[0].regl;if(Ot&&(Math.floor(ke.width*Tt)!==Ot._gl.drawingBufferWidth||Math.floor(ke.height*Tt)!==Ot._gl.drawingBufferHeight)){var Pt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ze)return T.log(Pt+" Clearing graph and plotting again."),r.cleanPlot([],{},_e._fullData,ke),r.supplyDefaults(_e),ke=_e._fullLayout,r.doCalcdata(_e),Ze++,ht();T.error(Pt)}}return ke.modebar.orientation==="h"?ke._modebardiv.style("height",null).style("width","100%"):ke._modebardiv.style("width",null).style("height",ke.height+"px"),r.previousPromises(_e)},rt,function(){if(r.didMarginChange(Ve,ke._size))return T.syncOrAsync([rt,m.layoutStyles],_e)}];Ie&&dt.push(function(){if(Ee)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),it],_e);it()}),dt.push(m.layoutStyles),Ie&&dt.push(function(){return n.draw(_e,be?"":"redraw")},function(ht){var Qe=ht._fullLayout._insideTickLabelsUpdaterange;if(Qe)return ht._fullLayout._insideTickLabelsUpdaterange=void 0,$(ht,Qe).then(function(){n.saveRangeInitial(ht,!0)})}),dt.push(m.drawData,m.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,r.previousPromises);var vt=T.syncOrAsync(dt,_e);return vt&&vt.then||(vt=Promise.resolve()),vt.then(function(){return w(_e),_e})},R.purge=function(_e){var we=(_e=T.getGraphDiv(_e))._fullLayout||{},Ae=_e._fullData||[];return r.cleanPlot([],{},Ae,we),r.purge(_e),p.purge(_e),we._container&&we._container.remove(),delete _e._context,_e},R.react=function(_e,we,Ae,Oe){var ze,pe;_e=T.getGraphDiv(_e),y.clearPromiseQueue(_e);var be=_e._fullData,ke=_e._fullLayout;if(T.isPlotDiv(_e)&&be&&ke){if(T.isPlainObject(we)){var Ie=we;we=Ie.data,Ae=Ie.layout,Oe=Ie.config,ze=Ie.frames}var Ee=!1;if(Oe){var Be=T.extendDeep({},_e._context);_e._context=void 0,C(_e,Oe),Ee=de(Be,_e._context)}_e.data=we||[],y.cleanData(_e.data),_e.layout=Ae||{},y.cleanLayout(_e.layout),function(tt,Re,Fe,nt){var Ge,ct,pt,gt,ut,kt,mt,At,Lt,Ct,zt=nt._preGUI,Gt=[],rn={},Nt={};for(Ge in zt){if(ut=me(Ge,ve)){if(Lt=ut.head,Ct=ut.tail,ct=ut.attr||Lt+".uirevision",(gt=(pt=_(nt,ct).get())&&Me(ct,Re))&&gt===pt){if((kt=zt[Ge])===null&&(kt=void 0),oe(At=(mt=_(Re,Ge)).get(),kt)){At===void 0&&Ct==="autorange"&&Gt.push(Lt),mt.set(F(_(nt,Ge).get()));continue}if(Ct==="autorange"||Ct.substr(0,6)==="range["){var Wt=zt[Lt+".range[0]"],Rt=zt[Lt+".range[1]"],Ln=zt[Lt+".autorange"];if(Ln||Ln===null&&Wt===null&&Rt===null){if(!(Lt in rn)){var bn=_(Re,Lt).get();rn[Lt]=bn&&(bn.autorange||bn.autorange!==!1&&(!bn.range||bn.range.length!==2))}if(rn[Lt]){mt.set(F(_(nt,Ge).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Ge);delete zt[Ge],ut&&ut.tail.substr(0,6)==="range["&&(Nt[ut.head]=1)}for(var hn=0;hn<Gt.length;hn++){var Kt=Gt[hn];if(Nt[Kt]){var on=_(Re,Kt).get();on&&delete on.autorange}}var $t=nt._tracePreGUI;for(var ln in $t){var mn,xn=$t[ln],Mn=null;for(Ge in xn){if(!Mn){var Sn=Pe(ln,Fe);if(Sn<0){delete $t[ln];break}var Tn=ge(ln,tt,(mn=Fe[Sn]._fullInput).index);if(Tn<0){delete $t[ln];break}Mn=tt[Tn]}if(ut=me(Ge,ye)){if(ut.attr?gt=(pt=_(nt,ut.attr).get())&&Me(ut.attr,Re):(pt=mn.uirevision,(gt=Mn.uirevision)===void 0&&(gt=Re.uirevision)),gt&&gt===pt&&((kt=xn[Ge])===null&&(kt=void 0),oe(At=(mt=_(Mn,Ge)).get(),kt))){mt.set(F(_(mn,Ge).get()));continue}}else T.warn("unrecognized GUI edit: "+Ge+" in trace uid "+ln);delete xn[Ge]}}}(_e.data,_e.layout,be,ke),r.supplyDefaults(_e,{skipUpdateCalc:!0});var Ve=_e._fullData,Ze=_e._fullLayout,rt=Ze.datarevision===void 0,it=Ze.transition,dt=function(tt,Re,Fe,nt,Ge){var ct=b.layoutFlags();return ct.arrays={},ct.rangesAltered={},ct.nChanges=0,ct.nChangesAnim=0,ie(Re,Fe,[],{getValObject:function(pt){return i.getLayoutValObject(Fe,pt)},flags:ct,immutable:nt,transition:Ge,gd:tt}),(ct.plot||ct.calc)&&(ct.layoutReplot=!0),Ge&&ct.nChanges&&ct.nChangesAnim&&(ct.anim=ct.nChanges===ct.nChangesAnim?"all":"some"),ct}(_e,ke,Ze,rt,it),vt=dt.newDataRevision,ht=function(tt,Re,Fe,nt,Ge,ct){var pt=Re.length===Fe.length;if(!Ge&&!pt)return{fullReplot:!0,calc:!0};var gt,ut,kt=b.traceFlags();kt.arrays={},kt.nChanges=0,kt.nChangesAnim=0;var mt={getValObject:function(Lt){var Ct=i.getTraceValObject(ut,Lt);return!ut._module.animatable&&Ct.anim&&(Ct.anim=!1),Ct},flags:kt,immutable:nt,transition:Ge,newDataRevision:ct,gd:tt},At={};for(gt=0;gt<Re.length;gt++)if(Fe[gt]){if(ut=Fe[gt]._fullInput,r.hasMakesDataTransform(ut)&&(ut=Fe[gt]),At[ut.uid])continue;At[ut.uid]=1,ie(Re[gt]._fullInput,ut,[],mt)}return(kt.calc||kt.plot)&&(kt.fullReplot=!0),Ge&&kt.nChanges&&kt.nChangesAnim&&(kt.anim=kt.nChanges===kt.nChangesAnim&&pt?"all":"some"),kt}(_e,be,Ve,rt,it,vt);if(ce(_e)&&(dt.layoutReplot=!0),ht.calc||dt.calc){_e.calcdata=void 0;for(var Qe=Object.getOwnPropertyNames(Ze),Je=0;Je<Qe.length;Je++){var Tt=Qe[Je],Ot=Tt.substring(0,5);if(Ot==="xaxis"||Ot==="yaxis"){var Pt=Ze[Tt]._emptyCategories;Pt&&Pt()}}}else r.supplyDefaultsUpdateCalc(_e.calcdata,Ve);var Mt=[];if(ze&&(_e._transitionData={},r.createTransitionData(_e),Mt.push(function(){return R.addFrames(_e,ze)})),Ze.transition&&!Ee&&(ht.anim||dt.anim))dt.ticks&&Mt.push(m.doTicksRelayout),r.doCalcdata(_e),m.doAutoRangeAndConstraints(_e),Mt.push(function(){return r.transitionFromReact(_e,ht,dt,ke)});else if(ht.fullReplot||dt.layoutReplot||Ee)_e._fullLayout._skipDefaults=!0,Mt.push(R._doPlot);else{for(var He in dt.arrays){var Ye=dt.arrays[He];if(Ye.length){var Ne=t.getComponentMethod(He,"drawOne");if(Ne!==T.noop)for(var We=0;We<Ye.length;We++)Ne(_e,Ye[We]);else{var ot=t.getComponentMethod(He,"draw");if(ot===T.noop)throw new Error("cannot draw components: "+He);ot(_e)}}}Mt.push(r.previousPromises),ht.style&&Mt.push(m.doTraceStyle),(ht.colorbars||dt.colorbars)&&Mt.push(m.doColorBars),dt.legend&&Mt.push(m.doLegend),dt.layoutstyle&&Mt.push(m.layoutStyles),dt.axrange&&X(Mt),dt.ticks&&Mt.push(m.doTicksRelayout),dt.modebar&&Mt.push(m.doModeBar),dt.camera&&Mt.push(m.doCamera),Mt.push(w)}Mt.push(r.rehover,r.redrag,r.reselect),(pe=T.syncOrAsync(Mt,_e))&&pe.then||(pe=Promise.resolve(_e))}else pe=R.newPlot(_e,we,Ae,Oe);return pe.then(function(){return _e.emit("plotly_react",{data:we,layout:Ae}),_e})},R.redraw=function(_e){if(_e=T.getGraphDiv(_e),!T.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e);return y.cleanData(_e.data),y.cleanLayout(_e.layout),_e.calcdata=void 0,R._doPlot(_e).then(function(){return _e.emit("plotly_redraw"),_e})},R.relayout=$,R.restyle=W,R.setPlotConfig=function(_e){return T.extendFlat(v,_e)},R.update=fe,R._guiRelayout=he($),R._guiRestyle=he(W),R._guiUpdate=he(fe),R._storeDirectGUIEdit=function(_e,we,Ae){for(var Oe in Ae)H(Oe,_(_e,Oe).get(),Ae[Oe],we)}},20556:function(ee){var R={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function M(k,o){for(var T in k){var _=k[T];_.valType?o[T]=_.dflt:(o[T]||(o[T]={}),M(_,o[T]))}})(R,e),ee.exports={configAttributes:R,dfltConfig:e}},73060:function(ee,R,e){var M=e(24040),k=e(3400),o=e(45464),T=e(64859),_=e(16672),p=e(85656),s=e(20556).configAttributes,t=e(67824),i=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,a=k.nestedProperty,l=k.valObjectMeta,u="_isSubplotObj",h="_isLinkedToArray",c="_deprecated",x=[u,h,"_arrayAttrRegexps",c];function d(f,S,w){if(!f)return!1;if(f._isLinkedToArray){if(v(S[w]))w++;else if(w<S.length)return!1}for(;w<S.length;w++){var E=f[S[w]];if(!r(E)||(f=E,w===S.length-1))break;if(f._isLinkedToArray){if(!v(S[++w]))return!1}else if(f.valType==="info_array"){var O=S[++w];if(!v(O))return!1;var C=f.items;if(Array.isArray(C)){if(O>=C.length)return!1;if(f.dimensions===2){if(w++,S.length===w)return f;var P=S[w];if(!v(P))return!1;f=C[O][P]}else f=C[O]}else f=C}}return f}function v(f){return f===Math.round(f)&&f>=0}function g(){var f,S,w={};for(f in i(w,T),M.subplotsRegistry)if((S=M.subplotsRegistry[f]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)m(w,S,S.attr[E]);else m(w,S,S.attr==="subplot"?S.name:S.attr);for(f in M.componentsRegistry){var O=(S=M.componentsRegistry[f]).schema;if(O&&(O.subplots||O.layout)){var C=O.subplots;if(C&&C.xaxis&&!C.yaxis)for(var P in C.xaxis)delete w.yaxis[P];delete w.xaxis.shift,delete w.xaxis.autoshift}else S.name==="colorscale"?i(w,S.layoutAttributes):S.layoutAttributes&&b(w,S.layoutAttributes,S.name)}return{layoutAttributes:y(w)}}function y(f){return function(S){R.crawl(S,function(w,E,O){R.isValObject(w)?w.arrayOk!==!0&&w.valType!=="data_array"||(O[E+"src"]={valType:"string",editType:"none"}):r(w)&&(w.role="object")})}(f),function(S){R.crawl(S,function(w,E,O){if(w){var C=w[h];C&&(delete w[h],O[E]={items:{}},O[E].items[C]=w,O[E].role="object")}})}(f),function(S){(function w(E){for(var O in E)if(r(E[O]))w(E[O]);else if(Array.isArray(E[O]))for(var C=0;C<E[O].length;C++)w(E[O][C]);else E[O]instanceof RegExp&&(E[O]=E[O].toString())})(S)}(f),f}function m(f,S,w){var E=a(f,w),O=i({},S.layoutAttributes);O[u]=!0,E.set(O)}function b(f,S,w){var E=a(f,w);E.set(i(E.get()||{},S))}R.IS_SUBPLOT_OBJ=u,R.IS_LINKED_TO_ARRAY=h,R.DEPRECATED=c,R.UNDERSCORE_ATTRS=x,R.get=function(){var f={};M.allTypes.forEach(function(E){f[E]=function(O){var C,P;P=(C=M.modules[O]._module).basePlotModule;var D={type:null},U=i({},o),I=i({},C.attributes);R.crawl(I,function(F,j,H,te,Q){a(U,Q).set(void 0),F===void 0&&a(I,Q).set(void 0)}),i(D,U),M.traceIs(O,"noOpacity")&&delete D.opacity,M.traceIs(O,"showLegend")||(delete D.showlegend,delete D.legendgroup),M.traceIs(O,"noHover")&&(delete D.hoverinfo,delete D.hoverlabel),C.selectPoints||delete D.selectedpoints,i(D,I),P.attributes&&i(D,P.attributes),D.type=O;var N={meta:C.meta||{},categories:C.categories||{},animatable:!!C.animatable,type:O,attributes:y(D)};if(C.layoutAttributes){var W={};i(W,C.layoutAttributes),N.layoutAttributes=y(W)}return C.animatable||R.crawl(N,function(F){R.isValObject(F)&&"anim"in F&&delete F.anim}),N}(E)});var S,w={};return Object.keys(M.transformsRegistry).forEach(function(E){w[E]=function(O){var C=M.transformsRegistry[O],P=i({},C.attributes);return Object.keys(M.componentsRegistry).forEach(function(D){var U=M.componentsRegistry[D];U.schema&&U.schema.transforms&&U.schema.transforms[O]&&Object.keys(U.schema.transforms[O]).forEach(function(I){b(P,U.schema.transforms[O][I],I)})}),{attributes:y(P)}}(E)}),{defs:{valObjects:l,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:f,layout:g(),transforms:w,frames:(S={frames:i({},_)},y(S),S.frames),animation:y(p),config:y(s)}},R.crawl=function(f,S,w,E){var O=w||0;E=E||"",Object.keys(f).forEach(function(C){var P=f[C];if(x.indexOf(C)===-1){var D=(E?E+".":"")+C;S(P,C,f,O,D),R.isValObject(P)||r(P)&&C!=="impliedEdits"&&R.crawl(P,S,O+1,D)}})},R.isValObject=function(f){return f&&f.valType!==void 0},R.findArrayAttributes=function(f){var S,w,E=[],O=[],C=[];function P(F,j,H,te){O=O.slice(0,te).concat([j]),C=C.slice(0,te).concat([F&&F._isLinkedToArray]),F&&(F.valType==="data_array"||F.arrayOk===!0)&&(O[te-1]!=="colorbar"||j!=="ticktext"&&j!=="tickvals")&&D(S,0,"")}function D(F,j,H){var te=F[O[j]],Q=H+O[j];if(j===O.length-1)n(te)&&E.push(w+Q);else if(C[j]){if(Array.isArray(te))for(var $=0;$<te.length;$++)r(te[$])&&D(te[$],j+1,Q+"["+$+"].")}else r(te)&&D(te,j+1,Q+".")}S=f,w="",R.crawl(o,P),f._module&&f._module.attributes&&R.crawl(f._module.attributes,P);var U=f.transforms;if(U)for(var I=0;I<U.length;I++){var N=U[I],W=N._module;W&&(w="transforms["+I+"].",S=N,R.crawl(W.attributes,P))}return E},R.getTraceValObject=function(f,S){var w,E,O=S[0],C=1;if(O==="transforms"){if(S.length===1)return o.transforms;var P=f.transforms;if(!Array.isArray(P)||!P.length)return!1;var D=S[1];if(!v(D)||D>=P.length)return!1;E=(w=(M.transformsRegistry[P[D].type]||{}).attributes)&&w[S[2]],C=3}else{var U=f._module;if(U||(U=(M.modules[f.type||o.type.dflt]||{})._module),!U)return!1;if(!(E=(w=U.attributes)&&w[O])){var I=U.basePlotModule;I&&I.attributes&&(E=I.attributes[O])}E||(E=o[O])}return d(E,S,C)},R.getLayoutValObject=function(f,S){var w=function(E,O){var C,P,D,U,I=E._basePlotModules;if(I){var N;for(C=0;C<I.length;C++){if((D=I[C]).attrRegex&&D.attrRegex.test(O)){if(D.layoutAttrOverrides)return D.layoutAttrOverrides;!N&&D.layoutAttributes&&(N=D.layoutAttributes)}var W=D.baseLayoutAttrOverrides;if(W&&O in W)return W[O]}if(N)return N}var F=E._modules;if(F){for(C=0;C<F.length;C++)if((U=F[C].layoutAttributes)&&O in U)return U[O]}for(P in M.componentsRegistry){if((D=M.componentsRegistry[P]).name==="colorscale"&&O.indexOf("coloraxis")===0)return D.layoutAttributes[O];if(!D.schema&&O===D.name)return D.layoutAttributes}return O in T&&T[O]}(f,S[0]);return d(w,S,1)}},31780:function(ee,R,e){var M=e(3400),k=e(45464),o="templateitemname",T={name:{valType:"string",editType:"none"}};function _(s){return s&&typeof s=="string"}function p(s){var t=s.length-1;return s.charAt(t)!=="s"&&M.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}T[o]={valType:"string",editType:"calc"},R.templatedArray=function(s,t){return t._isLinkedToArray=s,t.name=T.name,t[o]=T[o],t},R.traceTemplater=function(s){var t,i,r={};for(t in s)i=s[t],Array.isArray(i)&&i.length&&(r[t]=0);return{newTrace:function(n){var a={type:t=M.coerce(n,{},k,"type"),_template:null};if(t in r){i=s[t];var l=r[t]%i.length;r[t]++,a._template=i[l]}return a}}},R.newContainer=function(s,t,i){var r=s._template,n=r&&(r[t]||i&&r[i]);return M.isPlainObject(n)||(n=null),s[t]={_template:n}},R.arrayTemplater=function(s,t,i){var r=s._template,n=r&&r[p(t)],a=r&&r[t];Array.isArray(a)&&a.length||(a=[]);var l={};return{newItem:function(u){var h={name:u.name,_input:u},c=h[o]=u[o];if(!_(c))return h._template=n,h;for(var x=0;x<a.length;x++){var d=a[x];if(d.name===c)return l[c]=1,h._template=d,h}return h[i]=u[i]||!1,h._template=!1,h},defaultItems:function(){for(var u=[],h=0;h<a.length;h++){var c=a[h],x=c.name;if(_(x)&&!l[x]){var d={_template:c,name:x,_input:{_templateitemname:x}};d[o]=c[o],u.push(d),l[x]=1}}return u}}},R.arrayDefaultKey=p,R.arrayEditor=function(s,t,i){var r=(M.nestedProperty(s,t).get()||[]).length,n=i._index,a=n>=r&&(i._input||{})._templateitemname;a&&(n=r);var l,u=t+"["+n+"]";function h(){l={},a&&(l[u]={},l[u][o]=a)}function c(d,v){a?M.nestedProperty(l[u],d).set(v):l[u+"."+d]=v}function x(){var d=l;return h(),d}return h(),{modifyBase:function(d,v){l[d]=v},modifyItem:c,getUpdateObj:x,applyUpdate:function(d,v){d&&c(d,v);var g=x();for(var y in g)M.nestedProperty(s,y).set(g[y])}}}},39172:function(ee,R,e){var M=e(33428),k=e(24040),o=e(7316),T=e(3400),_=e(72736),p=e(73696),s=e(76308),t=e(43616),i=e(81668),r=e(45460),n=e(54460),a=e(84284),l=e(71888),u=l.enforce,h=l.clean,c=e(19280).doAutoRange,x="start";function d(b,f,S){for(var w=0;w<S.length;w++){var E=S[w][0],O=S[w][1];if(!(E[0]>=b[1]||E[1]<=b[0])&&O[0]<f[1]&&O[1]>f[0])return!0}return!1}function v(b){var f,S,w,E,O,C,P=b._fullLayout,D=P._size,U=D.p,I=n.list(b,"",!0);if(P._paperdiv.style({width:b._context.responsive&&P.autosize&&!b._context._hasZeroWidth&&!b.layout.width?"100%":P.width+"px",height:b._context.responsive&&P.autosize&&!b._context._hasZeroHeight&&!b.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(t.setSize,P.width,P.height),b._context.setBackground(b,P.paper_bgcolor),R.drawMainTitle(b),r.manage(b),!P._has("cartesian"))return o.previousPromises(b);function N(Ee,Be,Ve){var Ze=Ee._lw/2;return Ee._id.charAt(0)==="x"?Be?Ve==="top"?Be._offset-U-Ze:Be._offset+Be._length+U+Ze:D.t+D.h*(1-(Ee.position||0))+Ze%1:Be?Ve==="right"?Be._offset+Be._length+U+Ze:Be._offset-U-Ze:D.l+D.w*(Ee.position||0)+Ze%1}for(f=0;f<I.length;f++){var W=(E=I[f])._anchorAxis;E._linepositions={},E._lw=t.crispRound(b,E.linewidth,1),E._mainLinePosition=N(E,W,E.side),E._mainMirrorPosition=E.mirror&&W?N(E,W,a.OPPOSITE_SIDE[E.side]):null}var F=[],j=[],H=[],te=s.opacity(P.paper_bgcolor)===1&&s.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(S in P._plots)if((w=P._plots[S]).mainplot)w.bg&&w.bg.remove(),w.bg=void 0;else{var Q=w.xaxis.domain,$=w.yaxis.domain,K=w.plotgroup;if(d(Q,$,H)){var X=K.node(),Y=w.bg=T.ensureSingle(K,"rect","bg");X.insertBefore(Y.node(),X.childNodes[0]),j.push(S)}else K.select("rect.bg").remove(),H.push([Q,$]),te||(F.push(S),j.push(S))}var re,se,ae,ce,fe,he,ve,ye,me,Me,Pe,ge,oe,ie=P._bgLayer.selectAll(".bg").data(F);for(ie.enter().append("rect").classed("bg",!0),ie.exit().remove(),ie.each(function(Ee){P._plots[Ee].bg=M.select(this)}),f=0;f<j.length;f++)w=P._plots[j[f]],O=w.xaxis,C=w.yaxis,w.bg&&O._offset!==void 0&&C._offset!==void 0&&w.bg.call(t.setRect,O._offset-U,C._offset-U,O._length+2*U,C._length+2*U).call(s.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(S in P._plots){w=P._plots[S],O=w.xaxis,C=w.yaxis;var de,Se,_e=w.clipId="clip"+P._uid+S+"plot",we=T.ensureSingleById(P._clips,"clipPath",_e,function(Ee){Ee.classed("plotclip",!0).append("rect")});w.clipRect=we.select("rect").attr({width:O._length,height:C._length}),t.setTranslate(w.plot,O._offset,C._offset),w._hasClipOnAxisFalse?(de=null,Se=_e):(de=_e,Se=null),t.setClipUrl(w.plot,de,b),w.layerClipId=Se}function Ae(Ee){return"M"+re+","+Ee+"H"+se}function Oe(Ee){return"M"+O._offset+","+Ee+"h"+O._length}function ze(Ee){return"M"+Ee+","+ye+"V"+ve}function pe(Ee){return C._shift!==void 0&&(Ee+=C._shift),"M"+Ee+","+C._offset+"v"+C._length}function be(Ee,Be,Ve){if(!Ee.showline||S!==Ee._mainSubplot)return"";if(!Ee._anchorAxis)return Ve(Ee._mainLinePosition);var Ze=Be(Ee._mainLinePosition);return Ee.mirror&&(Ze+=Be(Ee._mainMirrorPosition)),Ze}for(S in P._plots){w=P._plots[S],O=w.xaxis,C=w.yaxis;var ke="M0,0";g(O,S)&&(fe=m(O,"left",C,I),re=O._offset-(fe?U+fe:0),he=m(O,"right",C,I),se=O._offset+O._length+(he?U+he:0),ae=N(O,C,"bottom"),ce=N(O,C,"top"),!(oe=!O._anchorAxis||S!==O._mainSubplot)||O.mirror!=="allticks"&&O.mirror!=="all"||(O._linepositions[S]=[ae,ce]),ke=be(O,Ae,Oe),oe&&O.showline&&(O.mirror==="all"||O.mirror==="allticks")&&(ke+=Ae(ae)+Ae(ce)),w.xlines.style("stroke-width",O._lw+"px").call(s.stroke,O.showline?O.linecolor:"rgba(0,0,0,0)")),w.xlines.attr("d",ke);var Ie="M0,0";g(C,S)&&(Pe=m(C,"bottom",O,I),ve=C._offset+C._length+(Pe?U:0),ge=m(C,"top",O,I),ye=C._offset-(ge?U:0),me=N(C,O,"left"),Me=N(C,O,"right"),!(oe=!C._anchorAxis||S!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[S]=[me,Me]),Ie=be(C,ze,pe),oe&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(Ie+=ze(me)+ze(Me)),w.ylines.style("stroke-width",C._lw+"px").call(s.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),w.ylines.attr("d",Ie)}return n.makeClipPaths(b),o.previousPromises(b)}function g(b,f){return(b.ticks||b.showline)&&(f===b._mainSubplot||b.mirror==="all"||b.mirror==="allticks")}function y(b,f,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var w=S._anchorAxis;if(!w)return!1;var E=a.FROM_BL[f];return S.side===f?w.domain[E]===b.domain[E]:S.mirror&&w.domain[1-E]===b.domain[1-E]}function m(b,f,S,w){if(y(b,f,S))return S._lw;for(var E=0;E<w.length;E++){var O=w[E];if(O._mainAxis===S._mainAxis&&y(b,f,O))return O._lw}return 0}R.layoutStyles=function(b){return T.syncOrAsync([o.doAutoMargin,v],b)},R.drawMainTitle=function(b){var f,S=b._fullLayout.title,w=b._fullLayout,E=function(F){var j=F.title,H="middle";return T.isRightAnchor(j)?H="end":T.isLeftAnchor(j)&&(H=x),H}(w),O=function(F){var j=F.title,H="0em";return T.isTopAnchor(j)?H=a.CAP_SHIFT+"em":T.isMiddleAnchor(j)&&(H=a.MID_SHIFT+"em"),H}(w),C=function(F,j){var H=F.title,te=F._size,Q=0;return j!=="0em"&&j?j===a.CAP_SHIFT+"em"&&(Q=H.pad.t):Q=-H.pad.b,H.y==="auto"?te.t/2:H.yref==="paper"?te.t+te.h-te.h*H.y+Q:F.height-F.height*H.y+Q}(w,O),P=function(F,j){var H=F.title,te=F._size,Q=0;return j===x?Q=H.pad.l:j==="end"&&(Q=-H.pad.r),H.xref==="paper"?te.l+te.w*H.x+Q:F.width*H.x+Q}(w,E);if(i.draw(b,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:P,y:C,"text-anchor":E,dy:O}}),S.text&&S.automargin){var D=M.selectAll(".gtitle"),U=t.bBox(D.node()).height,I=function(F,j,H){var te=j.y,Q=j.yanchor,$=te>.5?"t":"b",K=F._fullLayout.margin[$],X=0;return j.yref==="paper"?X=H+j.pad.t+j.pad.b:j.yref==="container"&&(X=function(Y,re,se,ae,ce){var fe=0;return se==="middle"&&(fe+=ce/2),Y==="t"?(se==="top"&&(fe+=ce),fe+=ae-re*ae):(se==="bottom"&&(fe+=ce),fe+=re*ae),fe}($,te,Q,F._fullLayout.height,H)+j.pad.t+j.pad.b),X>K?X:0}(b,S,U);if(I>0){(function(F,j,H,te){var Q="title.automargin",$=F._fullLayout.title,K=$.y>.5?"t":"b",X={x:$.x,y:$.y,t:0,b:0},Y={};$.yref==="paper"&&function(re,se,ae,ce,fe){var he=se.yref==="paper"?re._fullLayout._size.h:re._fullLayout.height,ve=T.isTopAnchor(se)?ce:ce-fe,ye=ae==="b"?he-ve:ve;return!(T.isTopAnchor(se)&&ae==="t"||T.isBottomAnchor(se)&&ae==="b")&&ye<fe}(F,$,K,j,te)?X[K]=H:$.yref==="container"&&(Y[K]=H,F._fullLayout._reservedMargin[Q]=Y),o.allowAutoMargin(F,Q),o.autoMargin(F,Q,X)})(b,C,I,U),D.attr({x:P,y:C,"text-anchor":E,dy:(f=S.yanchor,f==="top"?a.CAP_SHIFT+.3+"em":f==="bottom"?"-0.3em":a.MID_SHIFT+"em")}).call(_.positionText,P,C);var N=(S.text.match(_.BR_TAG_ALL)||[]).length;if(N){var W=a.LINE_SPACING*N+a.MID_SHIFT;S.y===0&&(W=-W),D.selectAll(".line").each(function(){var F=+this.getAttribute("dy").slice(0,-2)-W+"em";this.setAttribute("dy",F)})}}}},R.doTraceStyle=function(b){var f,S=b.calcdata,w=[];for(f=0;f<S.length;f++){var E=S[f],O=E[0]||{},C=O.trace||{},P=C._module||{},D=P.arraysToCalcdata;D&&D(E,C);var U=P.editStyle;U&&w.push({fn:U,cd0:O})}if(w.length){for(f=0;f<w.length;f++){var I=w[f];I.fn(b,I.cd0)}p(b),R.redrawReglTraces(b)}return o.style(b),k.getComponentMethod("legend","draw")(b),o.previousPromises(b)},R.doColorBars=function(b){return k.getComponentMethod("colorbar","draw")(b),o.previousPromises(b)},R.layoutReplot=function(b){var f=b.layout;return b.layout=void 0,k.call("_doPlot",b,"",f)},R.doLegend=function(b){return k.getComponentMethod("legend","draw")(b),o.previousPromises(b)},R.doTicksRelayout=function(b){return n.draw(b,"redraw"),b._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(b),p(b),R.redrawReglTraces(b)),R.drawMainTitle(b),o.previousPromises(b)},R.doModeBar=function(b){var f=b._fullLayout;r.manage(b);for(var S=0;S<f._basePlotModules.length;S++){var w=f._basePlotModules[S].updateFx;w&&w(b)}return o.previousPromises(b)},R.doCamera=function(b){for(var f=b._fullLayout,S=f._subplots.gl3d,w=0;w<S.length;w++){var E=f[S[w]];E._scene.setViewport(E)}},R.drawData=function(b){var f=b._fullLayout;p(b);for(var S=f._basePlotModules,w=0;w<S.length;w++)S[w].plot(b);return R.redrawReglTraces(b),o.style(b),k.getComponentMethod("selections","draw")(b),k.getComponentMethod("shapes","draw")(b),k.getComponentMethod("annotations","draw")(b),k.getComponentMethod("images","draw")(b),f._replotting=!1,o.previousPromises(b)},R.redrawReglTraces=function(b){var f=b._fullLayout;if(f._has("regl")){var S,w,E=b._fullData,O=[],C=[];for(f._hasOnlyLargeSploms&&f._splomGrid.draw(),S=0;S<E.length;S++){var P=E[S];P.visible===!0&&P._length!==0&&(P.type==="splom"?f._splomScenes[P.uid].draw():P.type==="scattergl"?T.pushUnique(O,P.xaxis+P.yaxis):P.type==="scatterpolargl"&&T.pushUnique(C,P.subplot))}for(S=0;S<O.length;S++)(w=f._plots[O[S]])._scene&&w._scene.draw();for(S=0;S<C.length;S++)(w=f[C[S]]._subplot)._scene&&w._scene.draw()}},R.doAutoRangeAndConstraints=function(b){for(var f,S=n.list(b,"",!0),w={},E=0;E<S.length;E++)if(!w[(f=S[E])._id]){w[f._id]=1,h(b,f),c(b,f);var O=f._matchGroup;if(O)for(var C in O){var P=n.getFromId(b,C);c(b,P,f.range),w[C]=1}}u(b)},R.finalDraw=function(b){k.getComponentMethod("rangeslider","draw")(b),k.getComponentMethod("rangeselector","draw")(b)},R.drawMarginPushers=function(b){k.getComponentMethod("legend","draw")(b),k.getComponentMethod("rangeselector","draw")(b),k.getComponentMethod("sliders","draw")(b),k.getComponentMethod("updatemenus","draw")(b),k.getComponentMethod("colorbar","draw")(b)}},94828:function(ee,R,e){var M=e(3400),k=M.isPlainObject,o=e(73060),T=e(7316),_=e(45464),p=e(31780),s=e(20556).dfltConfig;function t(c,x){c=M.extendDeep({},c);var d,v,g=Object.keys(c).sort();function y(w,E,O){if(k(E)&&k(w))t(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var C=p.arrayTemplater({_template:c},O);for(v=0;v<E.length;v++){var P=E[v],D=C.newItem(P)._template;D&&t(D,P)}var U=C.defaultItems();for(v=0;v<U.length;v++)E.push(U[v]._template);for(v=0;v<E.length;v++)delete E[v].templateitemname}}for(d=0;d<g.length;d++){var m=g[d],b=c[m];if(m in x?y(b,x[m],m):x[m]=b,i(m)===m)for(var f in x){var S=i(f);f===S||S!==m||f in c||y(b,x[f],m)}}}function i(c){return c.replace(/[0-9]+$/,"")}function r(c,x,d,v,g){var y=g&&d(g);for(var m in c){var b=c[m],f=l(c,m,v),S=l(c,m,g),w=d(S);if(!w){var E=i(m);E!==m&&(w=d(S=l(c,E,g)))}if(!(y&&y===w||!w||w._noTemplating||w.valType==="data_array"||w.arrayOk&&Array.isArray(b)))if(!w.valType&&k(b))r(b,x,d,f,S);else if(w._isLinkedToArray&&Array.isArray(b))for(var O=!1,C=0,P={},D=0;D<b.length;D++){var U=b[D];if(k(U)){var I=U.name;if(I)P[I]||(r(U,x,d,l(b,C,f),l(b,C,S)),C++,P[I]=1);else if(!O){var N=l(c,p.arrayDefaultKey(m),v),W=l(b,C,f);r(U,x,d,W,l(b,C,S));var F=M.nestedProperty(x,W);M.nestedProperty(x,N).set(F.get()),F.set(null),O=!0}}}else M.nestedProperty(x,f).set(b)}}function n(c,x){return o.getLayoutValObject(c,M.nestedProperty({},x).parts)}function a(c,x){return o.getTraceValObject(c,M.nestedProperty({},x).parts)}function l(c,x,d){return d?Array.isArray(c)?d+"["+x+"]":d+"."+x:x}function u(c){for(var x=0;x<c.length;x++)if(k(c[x]))return!0}function h(c){var x;switch(c.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":x=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=x,c}R.makeTemplate=function(c){c=M.isPlainObject(c)?c:M.getGraphDiv(c),c=M.extendDeep({_context:s},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var x=c.data||[],d=c.layout||{};d._basePlotModules=c._fullLayout._basePlotModules,d._modules=c._fullLayout._modules;var v={data:{},layout:{}};x.forEach(function(C){var P={};r(C,P,a.bind(null,C));var D=M.coerce(C,{},_,"type"),U=v.data[D];U||(U=v.data[D]=[]),U.push(P)}),r(d,v.layout,n.bind(null,d)),delete v.layout.template;var g=d.template;if(k(g)){var y,m,b,f,S,w,E=g.layout;k(E)&&t(E,v.layout);var O=g.data;if(k(O)){for(m in v.data)if(b=O[m],Array.isArray(b)){for(w=(S=v.data[m]).length,f=b.length,y=0;y<w;y++)t(b[y%f],S[y]);for(y=w;y<f;y++)S.push(M.extendDeep({},b[y]))}for(m in O)m in v.data||(v.data[m]=M.extendDeep([],O[m]))}}return v},R.validateTemplate=function(c,x){var d=M.extendDeep({},{_context:s,data:c.data,layout:c.layout}),v=d.layout||{};k(x)||(x=v.template||{});var g=x.layout,y=x.data,m=[];d.layout=v,d.layout.template=x,T.supplyDefaults(d);var b=d._fullLayout,f=d._fullData,S={};if(k(g)?(function U(I,N){for(var W in I)if(W.charAt(0)!=="_"&&k(I[W])){var F,j=i(W),H=[];for(F=0;F<N.length;F++)H.push(l(I,W,N[F])),j!==W&&H.push(l(I,j,N[F]));for(F=0;F<H.length;F++)S[H[F]]=1;U(I[W],H)}}(b,["layout"]),function U(I,N){for(var W in I)if(W.indexOf("defaults")===-1&&k(I[W])){var F=l(I,W,N);S[F]?U(I[W],F):m.push({code:"unused",path:F})}}(g,"layout")):m.push({code:"layout"}),k(y)){for(var w,E={},O=0;O<f.length;O++){var C=f[O];E[w=C.type]=(E[w]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:w})}for(w in y){var P=y[w].length,D=E[w]||0;P>D?m.push({code:"unused",traceType:w,templateCount:P,dataCount:D}):D>P&&m.push({code:"reused",traceType:w,templateCount:P,dataCount:D})}}else m.push({code:"data"});if(function U(I,N){for(var W in I)if(W.charAt(0)!=="_"){var F=I[W],j=l(I,W,N);k(F)?(Array.isArray(I)&&F._template===!1&&F.templateitemname&&m.push({code:"missing",path:j,templateitemname:F.templateitemname}),U(F,j)):Array.isArray(F)&&u(F)&&U(F,j)}}({data:f,layout:b},""),m.length)return m.map(h)}},67024:function(ee,R,e){var M=e(38248),k=e(36424),o=e(7316),T=e(3400),_=e(81792),p=e(37164),s=e(63268),t=e(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ee.exports=function(r,n){var a,l,u,h;function c(D){return!(D in n)||T.validate(n[D],i[D])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],l=r.layout||{},u=r.config||{},h={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),l=T.extendDeep({},r.layout),u=r._context,h=r._fullLayout||{}),!c("width")&&n.width!==null||!c("height")&&n.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+T.join2(i.format.values,", "," or ")+".");var x={};function d(D,U){return T.coerce(n,x,i,D,U)}var v=d("format"),g=d("width"),y=d("height"),m=d("scale"),b=d("setBackground"),f=d("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var w=T.extendFlat({},l);g?w.width=g:n.width===null&&M(h.width)&&(w.width=h.width),y?w.height=y:n.height===null&&M(h.height)&&(w.height=h.height);var E=T.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:b}),O=_.getRedrawFunc(S);function C(){return new Promise(function(D){setTimeout(D,_.getDelay(S._fullLayout))})}function P(){return new Promise(function(D,U){var I=p(S,v,m),N=S._fullLayout.width,W=S._fullLayout.height;function F(){k.purge(S),document.body.removeChild(S)}if(v==="full-json"){var j=o.graphJson(S,!1,"keepdata","object",!0,!0);return j.version=t,j=JSON.stringify(j),F(),D(f?j:_.encodeJSON(j))}if(F(),v==="svg")return D(f?I:_.encodeSVG(I));var H=document.createElement("canvas");H.id=T.randstr(),s({format:v,width:N,height:W,scale:m,canvas:H,svg:I,promise:!0}).then(D).catch(U)})}return new Promise(function(D,U){k.newPlot(S,a,w,E).then(O).then(C).then(P).then(function(I){D(function(N){return f?N.replace(_.IMAGE_URL_PREFIX,""):N}(I))}).catch(function(I){U(I)})})}},21480:function(ee,R,e){var M=e(3400),k=e(7316),o=e(73060),T=e(20556).dfltConfig,_=M.isPlainObject,p=Array.isArray,s=M.isArrayOrTypedArray;function t(c,x,d,v,g,y){y=y||[];for(var m=Object.keys(c),b=0;b<m.length;b++){var f=m[b];if(f!=="transforms"){var S=y.slice();S.push(f);var w=c[f],E=x[f],O=l(d,f),C=(O||{}).valType,P=C==="info_array",D=C==="colorscale",U=(O||{}).items;if(a(d,f))if(_(w)&&_(E)&&C!=="any")t(w,E,O,v,g,S);else if(P&&p(w)){w.length>E.length&&v.push(n("unused",g,S.concat(E.length)));var I,N,W,F,j,H=E.length,te=Array.isArray(U);if(te&&(H=Math.min(H,U.length)),O.dimensions===2)for(N=0;N<H;N++)if(p(w[N])){w[N].length>E[N].length&&v.push(n("unused",g,S.concat(N,E[N].length)));var Q=E[N].length;for(I=0;I<(te?Math.min(Q,U[N].length):Q);I++)W=te?U[N][I]:U,F=w[N][I],j=E[N][I],M.validate(F,W)?j!==F&&j!==+F&&v.push(n("dynamic",g,S.concat(N,I),F,j)):v.push(n("value",g,S.concat(N,I),F))}else v.push(n("array",g,S.concat(N),w[N]));else for(N=0;N<H;N++)W=te?U[N]:U,F=w[N],j=E[N],M.validate(F,W)?j!==F&&j!==+F&&v.push(n("dynamic",g,S.concat(N),F,j)):v.push(n("value",g,S.concat(N),F))}else if(O.items&&!P&&p(w)){var $,K,X=U[Object.keys(U)[0]],Y=[];for($=0;$<E.length;$++){var re=E[$]._index||$;if((K=S.slice()).push(re),_(w[re])&&_(E[$])){Y.push(re);var se=w[re],ae=E[$];_(se)&&se.visible!==!1&&ae.visible===!1?v.push(n("invisible",g,K)):t(se,ae,X,v,g,K)}}for($=0;$<w.length;$++)(K=S.slice()).push($),_(w[$])?Y.indexOf($)===-1&&v.push(n("unused",g,K)):v.push(n("object",g,K,w[$]))}else!_(w)&&_(E)?v.push(n("object",g,S,w)):s(w)||!s(E)||P||D?f in x?M.validate(w,O)?O.valType==="enumerated"&&(O.coerceNumber&&w!==+E||w!==E)&&v.push(n("dynamic",g,S,w,E)):v.push(n("value",g,S,w)):v.push(n("unused",g,S,w)):v.push(n("array",g,S,w));else v.push(n("schema",g,S))}}return v}ee.exports=function(c,x){c===void 0&&(c=[]),x===void 0&&(x={});var d,v,g=o.get(),y=[],m={_context:M.extendFlat({},T)};p(c)?(m.data=M.extendDeep([],c),d=c):(m.data=[],d=[],y.push(n("array","data"))),_(x)?(m.layout=M.extendDeep({},x),v=x):(m.layout={},v={},arguments.length>1&&y.push(n("object","layout"))),k.supplyDefaults(m);for(var b=m._fullData,f=d.length,S=0;S<f;S++){var w=d[S],E=["data",S];if(_(w)){var O=b[S],C=O.type,P=g.traces[C].attributes;P.type={valType:"enumerated",values:[C]},O.visible===!1&&w.visible!==!1&&y.push(n("invisible",E)),t(w,O,P,y,E);var D=w.transforms,U=O.transforms;if(D){p(D)||y.push(n("array",E,["transforms"])),E.push("transforms");for(var I=0;I<D.length;I++){var N=["transforms",I],W=D[I].type;if(_(D[I])){var F=g.transforms[W]?g.transforms[W].attributes:{};F.type={valType:"enumerated",values:Object.keys(g.transforms)},t(D[I],U[I],F,y,E,N)}else y.push(n("object",E,N))}}}else y.push(n("object",E))}var j=m._fullLayout,H=function(te,Q){for(var $=te.layout.layoutAttributes,K=0;K<Q.length;K++){var X=Q[K],Y=te.traces[X.type],re=Y.layoutAttributes;re&&(X.subplot?M.extendFlat($[Y.attributes.subplot.dflt],re):M.extendFlat($,re))}return $}(g,b);return t(v,j,H,y,"layout"),y.length===0?void 0:y};var i={object:function(c,x){return(c==="layout"&&x===""?"The layout argument":c[0]==="data"&&x===""?"Trace "+c[1]+" in the data argument":r(c)+"key "+x)+" must be linked to an object container"},array:function(c,x){return(c==="data"?"The data argument":r(c)+"key "+x)+" must be linked to an array container"},schema:function(c,x){return r(c)+"key "+x+" is not part of the schema"},unused:function(c,x,d){var v=_(d)?"container":"key";return r(c)+v+" "+x+" did not get coerced"},dynamic:function(c,x,d,v){return[r(c)+"key",x,"(set to '"+d+"')","got reset to","'"+v+"'","during defaults."].join(" ")},invisible:function(c,x){return(x?r(c)+"item "+x:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,x,d){return[r(c)+"key "+x,"is set to an invalid value ("+d+")"].join(" ")}};function r(c){return p(c)?"In data trace "+c[1]+", ":"In "+c+", "}function n(c,x,d,v,g){var y,m;d=d||"",p(x)?(y=x[0],m=x[1]):(y=x,m=null);var b=function(S){if(!p(S))return String(S);for(var w="",E=0;E<S.length;E++){var O=S[E];typeof O=="number"?w=w.substr(0,w.length-1)+"["+O+"]":w+=O,E<S.length-1&&(w+=".")}return w}(d),f=i[c](x,b,v,g);return M.log(f),{code:c,container:y,trace:m,path:d,astr:b,msg:f}}function a(c,x){var d=h(x),v=d.keyMinusId,g=d.id;return!!(v in c&&c[v]._isSubplotObj&&g)||x in c}function l(c,x){return x in c?c[x]:c[h(x).keyMinusId]}var u=M.counterRegex("([a-z]+)");function h(c){var x=c.match(u);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85656:function(ee){ee.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(ee,R,e){var M=e(3400),k=e(31780);ee.exports=function(o,T,_){var p,s,t=_.name,i=_.inclusionAttr||"visible",r=T[t],n=M.isArrayOrTypedArray(o[t])?o[t]:[],a=T[t]=[],l=k.arrayTemplater(T,t,i);for(p=0;p<n.length;p++){var u=n[p];M.isPlainObject(u)?s=l.newItem(u):(s=l.newItem({}))[i]=!1,s._index=p,s[i]!==!1&&_.handleItemDefaults(u,s,T,_),a.push(s)}var h=l.defaultItems();for(p=0;p<h.length;p++)(s=h[p])._index=a.length,_.handleItemDefaults({},s,T,_,{}),a.push(s);if(M.isArrayOrTypedArray(r)){var c=Math.min(r.length,a.length);for(p=0;p<c;p++)M.relinkPrivateKeys(a[p],r[p])}return a}},45464:function(ee,R,e){var M=e(25376),k=e(55756);ee.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(ee,R,e){var M=e(38248),k=e(3400),o=k.dateTime2ms,T=k.incrementMonth,_=e(39032).ONEAVGMONTH;ee.exports=function(p,s,t,i){if(s.type!=="date")return{vals:i};var r=p[t+"periodalignment"];if(!r)return{vals:i};var n,a=p[t+"period"];if(M(a)){if((a=+a)<=0)return{vals:i}}else if(typeof a=="string"&&a.charAt(0)==="M"){var l=+a.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:i};n=l}for(var u=s.calendar,h=r==="start",c=r==="end",x=p[t+"period0"],d=o(x,u)||0,v=[],g=[],y=[],m=i.length,b=0;b<m;b++){var f,S,w,E=i[b];if(n){for(f=Math.round((E-d)/(n*_)),w=T(d,n*f,u);w>E;)w=T(w,-n,u);for(;w<=E;)w=T(w,n,u);S=T(w,-n,u)}else{for(w=d+(f=Math.round((E-d)/a))*a;w>E;)w-=a;for(;w<=E;)w+=a;S=w-a}v[b]=h?S:c?w:(S+w)/2,g[b]=S,y[b]=w}return{vals:v,starts:g,ends:y}}},26720:function(ee){ee.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(ee,R,e){var M=e(33428),k=e(38248),o=e(3400),T=e(39032).FP_SAFE,_=e(24040),p=e(43616),s=e(79811),t=s.getFromId,i=s.isLinked;function r(b,f){var S,w,E=[],O=b._fullLayout,C=a(O,f,0),P=a(O,f,1),D=u(b,f),U=D.min,I=D.max;if(U.length===0||I.length===0)return o.simpleMap(f.range,f.r2l);var N=U[0].val,W=I[0].val;for(S=1;S<U.length&&N===W;S++)N=Math.min(N,U[S].val);for(S=1;S<I.length&&N===W;S++)W=Math.max(W,I[S].val);var F=f.autorange,j=F==="reversed"||F==="min reversed"||F==="max reversed";if(!j&&f.range){var H=o.simpleMap(f.range,f.r2l);j=H[1]<H[0]}f.autorange==="reversed"&&(f.autorange=!0);var te,Q,$,K,X,Y,re=f.rangemode,se=re==="tozero",ae=re==="nonnegative",ce=f._length,fe=ce/10,he=0;for(S=0;S<U.length;S++)for(te=U[S],w=0;w<I.length;w++)(Y=(Q=I[w]).val-te.val-n(f,te.val,Q.val))>0&&((X=ce-C(te)-P(Q))>fe?Y/X>he&&($=te,K=Q,he=Y/X):Y/ce>he&&($={val:te.val,nopad:1},K={val:Q.val,nopad:1},he=Y/ce));if(N===W){var ve=N-1,ye=N+1;if(se)if(N===0)E=[0,1];else{var me=(N>0?I:U).reduce(function(Pe,ge){return Math.max(Pe,P(ge))},0),Me=N/(1-Math.min(.5,me/ce));E=N>0?[0,Me]:[Me,0]}else E=ae?[Math.max(0,ve),Math.max(1,ye)]:[ve,ye]}else se?($.val>=0&&($={val:0,nopad:1}),K.val<=0&&(K={val:0,nopad:1})):ae&&($.val-he*C($)<0&&($={val:0,nopad:1}),K.val<=0&&(K={val:1,nopad:1})),he=(K.val-$.val-n(f,te.val,Q.val))/(ce-C($)-P(K)),E=[$.val-he*C($),K.val+he*P(K)];return E=m(E,f),f.limitRange&&f.limitRange(),j&&E.reverse(),o.simpleMap(E,f.l2r||Number)}function n(b,f,S){var w=0;if(b.rangebreaks)for(var E=b.locateBreaks(f,S),O=0;O<E.length;O++){var C=E[O];w+=C.max-C.min}return w}function a(b,f,S){var w=.05*f._length,E=f._anchorAxis||{};if((f.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var O=f.isReversed();if(!O){var C=o.simpleMap(f.range,f.r2l);O=C[1]<C[0]}O&&(S=!S)}var P=0;return i(b,f._id)||(P=function(D,U,I){var N=0,W=U._id.charAt(0)==="x";for(var F in D._plots){var j=D._plots[F];if(U._id===j.xaxis._id||U._id===j.yaxis._id){var H=(W?j.yaxis:j.xaxis)||{};if((H.ticklabelposition||"").indexOf("inside")!==-1&&(!I&&(H.side==="left"||H.side==="bottom")||I&&(H.side==="top"||H.side==="right"))){if(H._vals){var te=o.deg2rad(H._tickAngles[H._id+"tick"]||0),Q=Math.abs(Math.cos(te)),$=Math.abs(Math.sin(te));if(!H._vals[0].bb){var K=H._id+"tick";H._selections[K].each(function(ae){var ce=M.select(this);ce.select(".text-math-group").empty()&&(ae.bb=p.bBox(ce.node()))})}for(var X=0;X<H._vals.length;X++){var Y=H._vals[X].bb;if(Y){var re=2*l+Y.width,se=2*l+Y.height;N=Math.max(N,W?Math.max(re*Q,se*$):Math.max(se*Q,re*$))}}}H.ticks==="inside"&&H.ticklabelposition==="inside"&&(N+=H.ticklen||0)}}}return N}(b,f,S)),w=Math.max(P,w),f.constrain==="domain"&&f._inputDomain&&(w*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(D){return D.nopad?0:D.pad+(D.extrapad?w:P)}}ee.exports={applyAutorangeOptions:m,getAutoRange:r,makePadFn:a,doAutoRange:function(b,f,S){if(f.setScale(),f.autorange){f.range=S?S.slice():r(b,f),f._r=f.range.slice(),f._rl=o.simpleMap(f._r,f.r2l);var w=f._input,E={};E[f._attr+".range"]=f.range,E[f._attr+".autorange"]=f.autorange,_.call("_storeDirectGUIEdit",b.layout,b._fullLayout._preGUI,E),w.range=f.range.slice(),w.autorange=f.autorange}var O=f._anchorAxis;if(O&&O.rangeslider){var C=O.rangeslider[f._name];C&&C.rangemode==="auto"&&(C.range=r(b,f)),O._input.rangeslider[f._name]=o.extendFlat({},C)}},findExtremes:function(b,f,S){S||(S={}),b._m||b.setScale();var w,E,O,C,P,D,U,I,N,W=[],F=[],j=f.length,H=S.padded||!1,te=S.tozero&&(b.type==="linear"||b.type==="-"),Q=b.type==="log",$=!1,K=S.vpadLinearized||!1;function X(ve){if(Array.isArray(ve))return $=!0,function(me){return Math.max(Number(ve[me]||0),0)};var ye=Math.max(Number(ve||0),0);return function(){return ye}}var Y=X((b._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),re=X((b._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),se=X(S.vpadplus||S.vpad),ae=X(S.vpadminus||S.vpad);if(!$){if(I=1/0,N=-1/0,Q)for(w=0;w<j;w++)(E=f[w])<I&&E>0&&(I=E),E>N&&E<T&&(N=E);else for(w=0;w<j;w++)(E=f[w])<I&&E>-T&&(I=E),E>N&&E<T&&(N=E);f=[I,N],j=2}var ce={tozero:te,extrapad:H};function fe(ve){O=f[ve],k(O)&&(D=Y(ve),U=re(ve),K?(C=b.c2l(O)-ae(ve),P=b.c2l(O)+se(ve)):(I=O-ae(ve),N=O+se(ve),Q&&I<N/10&&(I=N/10),C=b.c2l(I),P=b.c2l(N)),te&&(C=Math.min(0,C),P=Math.max(0,P)),d(C)&&h(W,C,U,ce),d(P)&&c(F,P,D,ce))}var he=Math.min(6,j);for(w=0;w<he;w++)fe(w);for(w=j-1;w>=he;w--)fe(w);return{min:W,max:F,opts:S}},concatExtremes:u};var l=3;function u(b,f,S){var w,E,O,C=f._id,P=b._fullData,D=b._fullLayout,U=[],I=[];function N(te,Q){for(w=0;w<Q.length;w++){var $=te[Q[w]],K=($._extremes||{})[C];if($.visible===!0&&K){for(E=0;E<K.min.length;E++)O=K.min[E],h(U,O.val,O.pad,{extrapad:O.extrapad});for(E=0;E<K.max.length;E++)O=K.max[E],c(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(N(P,f._traceIndices),N(D.annotations||[],f._annIndices||[]),N(D.shapes||[],f._shapeIndices||[]),f._matchGroup&&!S){for(var W in f._matchGroup)if(W!==f._id){var F=t(b,W),j=u(b,F,!0),H=f._length/F._length;for(E=0;E<j.min.length;E++)O=j.min[E],h(U,O.val,O.pad*H,{extrapad:O.extrapad});for(E=0;E<j.max.length;E++)O=j.max[E],c(I,O.val,O.pad*H,{extrapad:O.extrapad})}}return{min:U,max:I}}function h(b,f,S,w){x(b,f,S,w,v)}function c(b,f,S,w){x(b,f,S,w,g)}function x(b,f,S,w,E){for(var O=w.tozero,C=w.extrapad,P=!0,D=0;D<b.length&&P;D++){var U=b[D];if(E(U.val,f)&&U.pad>=S&&(U.extrapad||!C)){P=!1;break}E(f,U.val)&&U.pad<=S&&(C||!U.extrapad)&&(b.splice(D,1),D--)}if(P){var I=O&&f===0;b.push({val:f,pad:I?0:S,extrapad:!I&&C})}}function d(b){return k(b)&&Math.abs(b)<T}function v(b,f){return b<=f}function g(b,f){return b>=f}function y(b,f,S){return f===void 0||S===void 0||(f=b.d2l(f))<b.d2l(S)}function m(b,f){if(!f||!f.autorangeoptions)return b;var S=b[0],w=b[1],E=f.autorangeoptions.include;if(E!==void 0){var O=f.d2l(S),C=f.d2l(w);o.isArrayOrTypedArray(E)||(E=[E]);for(var P=0;P<E.length;P++){var D=f.d2l(E[P]);O>=D&&(O=D,S=D),C<=D&&(C=D,w=D)}}return S=function(U,I){var N=I.autorangeoptions;return N&&N.minallowed!==void 0&&y(I,N.minallowed,N.maxallowed)?N.minallowed:N&&N.clipmin!==void 0&&y(I,N.clipmin,N.clipmax)?Math.max(U,I.d2l(N.clipmin)):U}(S,f),w=function(U,I){var N=I.autorangeoptions;return N&&N.maxallowed!==void 0&&y(I,N.minallowed,N.maxallowed)?N.maxallowed:N&&N.clipmax!==void 0&&y(I,N.clipmin,N.clipmax)?Math.min(U,I.d2l(N.clipmax)):U}(w,f),[S,w]}},76808:function(ee){ee.exports=function(R,e,M){var k,o;if(M){var T=e==="reversed"||e==="min reversed"||e==="max reversed";k=M[T?1:0],o=M[T?0:1]}var _=R("autorangeoptions.minallowed",o===null?k:void 0),p=R("autorangeoptions.maxallowed",k===null?o:void 0);_===void 0&&R("autorangeoptions.clipmin"),p===void 0&&R("autorangeoptions.clipmax"),R("autorangeoptions.include")}},54460:function(ee,R,e){var M=e(33428),k=e(38248),o=e(7316),T=e(24040),_=e(3400),p=_.strTranslate,s=e(72736),t=e(81668),i=e(76308),r=e(43616),n=e(94724),a=e(98728),l=e(39032),u=l.ONEMAXYEAR,h=l.ONEAVGYEAR,c=l.ONEMINYEAR,x=l.ONEMAXQUARTER,d=l.ONEAVGQUARTER,v=l.ONEMINQUARTER,g=l.ONEMAXMONTH,y=l.ONEAVGMONTH,m=l.ONEMINMONTH,b=l.ONEWEEK,f=l.ONEDAY,S=f/2,w=l.ONEHOUR,E=l.ONEMIN,O=l.ONESEC,C=l.MINUS_SIGN,P=l.BADNUM,D={K:"zeroline"},U={K:"gridline",L:"path"},I={K:"minor-gridline",L:"path"},N={K:"tick",L:"path"},W={K:"tick",L:"text"},F={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},j=e(84284),H=j.MID_SHIFT,te=j.CAP_SHIFT,Q=j.LINE_SPACING,$=j.OPPOSITE_SIDE,K=ee.exports={};K.setConvert=e(78344);var X=e(52976),Y=e(79811),re=Y.idSort,se=Y.isLinked;K.id2name=Y.id2name,K.name2id=Y.name2id,K.cleanId=Y.cleanId,K.list=Y.list,K.listIds=Y.listIds,K.getFromId=Y.getFromId,K.getFromTrace=Y.getFromTrace;var ae=e(19280);K.getAutoRange=ae.getAutoRange,K.findExtremes=ae.findExtremes;var ce=1e-4;function fe(Re){var Fe=(Re[1]-Re[0])*ce;return[Re[0]-Fe,Re[1]+Fe]}K.coerceRef=function(Re,Fe,nt,Ge,ct,pt){var gt=Ge.charAt(Ge.length-1),ut=nt._fullLayout._subplots[gt+"axis"],kt=Ge+"ref",mt={};return ct||(ct=ut[0]||(typeof pt=="string"?pt:pt[0])),pt||(pt=ct),ut=ut.concat(ut.map(function(At){return At+" domain"})),mt[kt]={valType:"enumerated",values:ut.concat(pt?typeof pt=="string"?[pt]:pt:[]),dflt:ct},_.coerce(Re,Fe,mt,kt)},K.getRefType=function(Re){return Re===void 0?Re:Re==="paper"?"paper":Re==="pixel"?"pixel":/( domain)$/.test(Re)?"domain":"range"},K.coercePosition=function(Re,Fe,nt,Ge,ct,pt){var gt,ut;if(K.getRefType(Ge)!=="range")gt=_.ensureNumber,ut=nt(ct,pt);else{var kt=K.getFromId(Fe,Ge);ut=nt(ct,pt=kt.fraction2r(pt)),gt=kt.cleanPos}Re[ct]=gt(ut)},K.cleanPosition=function(Re,Fe,nt){return(nt==="paper"||nt==="pixel"?_.ensureNumber:K.getFromId(Fe,nt).cleanPos)(Re)},K.redrawComponents=function(Re,Fe){Fe=Fe||K.listIds(Re);var nt=Re._fullLayout;function Ge(ct,pt,gt,ut){for(var kt=T.getComponentMethod(ct,pt),mt={},At=0;At<Fe.length;At++)for(var Lt=nt[K.id2name(Fe[At])][gt],Ct=0;Ct<Lt.length;Ct++){var zt=Lt[Ct];if(!mt[zt]&&(kt(Re,zt),mt[zt]=1,ut))return}}Ge("annotations","drawOne","_annIndices"),Ge("shapes","drawOne","_shapeIndices"),Ge("images","draw","_imgIndices",!0),Ge("selections","drawOne","_selectionIndices")};var he=K.getDataConversions=function(Re,Fe,nt,Ge){var ct,pt=nt==="x"||nt==="y"||nt==="z"?nt:Ge;if(_.isArrayOrTypedArray(pt)){if(ct={type:X(Ge,void 0,{autotypenumbers:Re._fullLayout.autotypenumbers}),_categories:[]},K.setConvert(ct),ct.type==="category")for(var gt=0;gt<Ge.length;gt++)ct.d2c(Ge[gt])}else ct=K.getFromTrace(Re,Fe,pt);return ct?{d2c:ct.d2c,c2d:ct.c2d}:pt==="ids"?{d2c:ye,c2d:ye}:{d2c:ve,c2d:ve}};function ve(Re){return+Re}function ye(Re){return String(Re)}function me(Re,Fe){return Math.abs((Re/Fe+.5)%1-.5)<.001}function Me(Re,Fe){return Math.abs(Re/Fe-1)<.001}function Pe(Re){return+Re.substring(1)}function ge(Re,Fe){return Re.rangebreaks&&(Fe=Fe.filter(function(nt){return Re.maskBreaks(nt.x)!==P})),Fe}function oe(Re){var Fe=Re._mainAxis,nt=[];if(Fe._vals){for(var Ge=0;Ge<Fe._vals.length;Ge++)if(!Fe._vals[Ge].noTick){var ct=Fe.l2p(Fe._vals[Ge].x),pt=Re.p2l(ct),gt=K.tickText(Re,pt);Fe._vals[Ge].minor&&(gt.minor=!0,gt.text=""),nt.push(gt)}}return ge(Re,nt)}function ie(Re,Fe){var nt=fe(_.simpleMap(Re.range,Re.r2l)),Ge=Math.min(nt[0],nt[1]),ct=Math.max(nt[0],nt[1]),pt=Re.type==="category"?Re.d2l_noadd:Re.d2l;Re.type==="log"&&String(Re.dtick).charAt(0)!=="L"&&(Re.dtick="L"+Math.pow(10,Math.floor(Math.min(Re.range[0],Re.range[1]))-1));for(var gt=[],ut=0;ut<=1;ut++)if((Fe===void 0||!(Fe&&ut||Fe===!1&&!ut))&&(!ut||Re.minor)){var kt=ut?Re.minor.tickvals:Re.tickvals,mt=ut?[]:Re.ticktext;if(kt){_.isArrayOrTypedArray(mt)||(mt=[]);for(var At=0;At<kt.length;At++){var Lt=pt(kt[At]);if(Lt>Ge&&Lt<ct){var Ct=K.tickText(Re,Lt,!1,String(mt[At]));ut&&(Ct.minor=!0,Ct.text=""),gt.push(Ct)}}}}return ge(Re,gt)}K.getDataToCoordFunc=function(Re,Fe,nt,Ge){return he(Re,Fe,nt,Ge).d2c},K.counterLetter=function(Re){var Fe=Re.charAt(0);return Fe==="x"?"y":Fe==="y"?"x":void 0},K.minDtick=function(Re,Fe,nt,Ge){["log","category","multicategory"].indexOf(Re.type)===-1&&Ge?Re._minDtick===void 0?(Re._minDtick=Fe,Re._forceTick0=nt):Re._minDtick&&((Re._minDtick/Fe+1e-6)%1<2e-6&&((nt-Re._forceTick0)/Fe%1+1.000001)%1<2e-6?(Re._minDtick=Fe,Re._forceTick0=nt):((Fe/Re._minDtick+1e-6)%1>2e-6||((nt-Re._forceTick0)/Re._minDtick%1+1.000001)%1>2e-6)&&(Re._minDtick=0)):Re._minDtick=0},K.saveRangeInitial=function(Re,Fe){for(var nt=K.list(Re,"",!0),Ge=!1,ct=0;ct<nt.length;ct++){var pt=nt[ct],gt=pt._rangeInitial0===void 0&&pt._rangeInitial1===void 0,ut=gt||pt.range[0]!==pt._rangeInitial0||pt.range[1]!==pt._rangeInitial1,kt=pt.autorange;(gt&&kt!==!0||Fe&&ut)&&(pt._rangeInitial0=kt==="min"||kt==="max reversed"?void 0:pt.range[0],pt._rangeInitial1=kt==="max"||kt==="min reversed"?void 0:pt.range[1],pt._autorangeInitial=kt,Ge=!0)}return Ge},K.saveShowSpikeInitial=function(Re,Fe){for(var nt=K.list(Re,"",!0),Ge=!1,ct="on",pt=0;pt<nt.length;pt++){var gt=nt[pt],ut=gt._showSpikeInitial===void 0,kt=ut||gt.showspikes!==gt._showspikes;(ut||Fe&&kt)&&(gt._showSpikeInitial=gt.showspikes,Ge=!0),ct!=="on"||gt.showspikes||(ct="off")}return Re._fullLayout._cartesianSpikesEnabled=ct,Ge},K.autoBin=function(Re,Fe,nt,Ge,ct,pt){var gt,ut=_.aggNums(Math.min,null,Re),kt=_.aggNums(Math.max,null,Re);if(Fe.type==="category"||Fe.type==="multicategory")return{start:ut-.5,end:kt+.5,size:Math.max(1,Math.round(pt)||1),_dataSpan:kt-ut};if(ct||(ct=Fe.calendar),gt=Fe.type==="log"?{type:"linear",range:[ut,kt]}:{type:Fe.type,range:_.simpleMap([ut,kt],Fe.c2r,0,ct),calendar:ct},K.setConvert(gt),pt=pt&&a.dtick(pt,gt.type))gt.dtick=pt,gt.tick0=a.tick0(void 0,gt.type,ct);else{var mt;if(nt)mt=(kt-ut)/nt;else{var At=_.distinctVals(Re),Lt=Math.pow(10,Math.floor(Math.log(At.minDiff)/Math.LN10)),Ct=Lt*_.roundUp(At.minDiff/Lt,[.9,1.9,4.9,9.9],!0);mt=Math.max(Ct,2*_.stdev(Re)/Math.pow(Re.length,Ge?.25:.4)),k(mt)||(mt=1)}K.autoTicks(gt,mt)}var zt,Gt=gt.dtick,rn=K.tickIncrement(K.tickFirst(gt),Gt,"reverse",ct);if(typeof Gt=="number")rn=function(Nt,Wt,Rt,Ln,bn){var hn=0,Kt=0,on=0,$t=0;function ln(Sn){return(1+100*(Sn-Nt)/Rt.dtick)%100<2}for(var mn=0;mn<Wt.length;mn++)Wt[mn]%1==0?on++:k(Wt[mn])||$t++,ln(Wt[mn])&&hn++,ln(Wt[mn]+Rt.dtick/2)&&Kt++;var xn=Wt.length-$t;if(on===xn&&Rt.type!=="date")Rt.dtick<1?Nt=Ln-.5*Rt.dtick:(Nt-=.5)+Rt.dtick<Ln&&(Nt+=Rt.dtick);else if(Kt<.1*xn&&(hn>.3*xn||ln(Ln)||ln(bn))){var Mn=Rt.dtick/2;Nt+=Nt+Mn<Ln?Mn:-Mn}return Nt}(rn,Re,gt,ut,kt),zt=rn+(1+Math.floor((kt-rn)/Gt))*Gt;else for(gt.dtick.charAt(0)==="M"&&(rn=function(Nt,Wt,Rt,Ln,bn){var hn=_.findExactDates(Wt,bn);if(hn.exactDays>.8){var Kt=Number(Rt.substr(1));hn.exactYears>.8&&Kt%12==0?Nt=K.tickIncrement(Nt,"M6","reverse")+1.5*f:hn.exactMonths>.8?Nt=K.tickIncrement(Nt,"M1","reverse")+15.5*f:Nt-=S;var on=K.tickIncrement(Nt,Rt);if(on<=Ln)return on}return Nt}(rn,Re,Gt,ut,ct)),zt=rn;zt<=kt;)zt=K.tickIncrement(zt,Gt,!1,ct);return{start:Fe.c2r(rn,0,ct),end:Fe.c2r(zt,0,ct),size:Gt,_dataSpan:kt-ut}},K.prepMinorTicks=function(Re,Fe,nt){if(!Fe.minor.dtick){delete Re.dtick;var Ge,ct=Fe.dtick&&k(Fe._tmin);if(ct){var pt=K.tickIncrement(Fe._tmin,Fe.dtick,!0);Ge=[Fe._tmin,.99*pt+.01*Fe._tmin]}else{var gt=_.simpleMap(Fe.range,Fe.r2l);Ge=[gt[0],.8*gt[0]+.2*gt[1]]}if(Re.range=_.simpleMap(Ge,Fe.l2r),Re._isMinor=!0,K.prepTicks(Re,nt),ct){var ut=k(Fe.dtick),kt=k(Re.dtick),mt=ut?Fe.dtick:+Fe.dtick.substring(1),At=kt?Re.dtick:+Re.dtick.substring(1);ut&&kt?me(mt,At)?mt===2*b&&At===2*f&&(Re.dtick=b):mt===2*b&&At===3*f?Re.dtick=b:mt!==b||(Fe._input.minor||{}).nticks?Me(mt/At,2.5)?Re.dtick=mt/2:Re.dtick=mt:Re.dtick=f:String(Fe.dtick).charAt(0)==="M"?kt?Re.dtick="M1":me(mt,At)?mt>=12&&At===2&&(Re.dtick="M3"):Re.dtick=Fe.dtick:String(Re.dtick).charAt(0)==="L"?String(Fe.dtick).charAt(0)==="L"?me(mt,At)||(Re.dtick=Me(mt/At,2.5)?Fe.dtick/2:Fe.dtick):Re.dtick="D1":Re.dtick==="D2"&&+Fe.dtick>1&&(Re.dtick=1)}Re.range=Fe.range}Fe.minor._tick0Init===void 0&&(Re.tick0=Fe.tick0)},K.prepTicks=function(Re,Fe){var nt=_.simpleMap(Re.range,Re.r2l,void 0,void 0,Fe);if(Re.tickmode==="auto"||!Re.dtick){var Ge,ct=Re.nticks;ct||(Re.type==="category"||Re.type==="multicategory"?(Ge=Re.tickfont?_.bigFont(Re.tickfont.size||12):15,ct=Re._length/Ge):(Ge=Re._id.charAt(0)==="y"?40:80,ct=_.constrain(Re._length/Ge,4,9)+1),Re._name==="radialaxis"&&(ct*=2)),Re.minor&&Re.minor.tickmode!=="array"||Re.tickmode==="array"&&(ct*=100),Re._roughDTick=Math.abs(nt[1]-nt[0])/ct,K.autoTicks(Re,Re._roughDTick),Re._minDtick>0&&Re.dtick<2*Re._minDtick&&(Re.dtick=Re._minDtick,Re.tick0=Re.l2r(Re._forceTick0))}Re.ticklabelmode==="period"&&function(pt){var gt;function ut(){return!(k(pt.dtick)||pt.dtick.charAt(0)!=="M")}var kt=ut(),mt=K.getTickFormat(pt);if(mt){var At=pt._dtickInit!==pt.dtick;/%[fLQsSMX]/.test(mt)||(/%[HI]/.test(mt)?(gt=w,At&&!kt&&pt.dtick<w&&(pt.dtick=w)):/%p/.test(mt)?(gt=S,At&&!kt&&pt.dtick<S&&(pt.dtick=S)):/%[Aadejuwx]/.test(mt)?(gt=f,At&&!kt&&pt.dtick<f&&(pt.dtick=f)):/%[UVW]/.test(mt)?(gt=b,At&&!kt&&pt.dtick<b&&(pt.dtick=b)):/%[Bbm]/.test(mt)?(gt=y,At&&(kt?Pe(pt.dtick)<1:pt.dtick<m)&&(pt.dtick="M1")):/%[q]/.test(mt)?(gt=d,At&&(kt?Pe(pt.dtick)<3:pt.dtick<v)&&(pt.dtick="M3")):/%[Yy]/.test(mt)&&(gt=h,At&&(kt?Pe(pt.dtick)<12:pt.dtick<c)&&(pt.dtick="M12")))}(kt=ut())&&pt.tick0===pt._dowTick0&&(pt.tick0=pt._rawTick0),pt._definedDelta=gt}(Re),Re.tick0||(Re.tick0=Re.type==="date"?"2000-01-01":0),Re.type==="date"&&Re.dtick<.1&&(Re.dtick=.1),be(Re)},K.calcTicks=function(Re,Fe){for(var nt,Ge,ct=Re.type,pt=Re.calendar,gt=Re.ticklabelstep,ut=Re.ticklabelmode==="period",kt=_.simpleMap(Re.range,Re.r2l,void 0,void 0,Fe),mt=kt[1]<kt[0],At=Math.min(kt[0],kt[1]),Lt=Math.max(kt[0],kt[1]),Ct=Math.max(1e3,Re._length||0),zt=[],Gt=[],rn=[],Nt=[],Wt=Re.minor&&(Re.minor.ticks||Re.minor.showgrid),Rt=1;Rt>=(Wt?0:1);Rt--){var Ln=!Rt;Rt?(Re._dtickInit=Re.dtick,Re._tick0Init=Re.tick0):(Re.minor._dtickInit=Re.minor.dtick,Re.minor._tick0Init=Re.minor.tick0);var bn=Rt?Re:_.extendFlat({},Re,Re.minor);if(Ln?K.prepMinorTicks(bn,Re,Fe):K.prepTicks(bn,Fe),bn.tickmode!=="array")if(bn.tickmode!=="sync"){var hn=fe(kt),Kt=hn[0],on=hn[1],$t=k(bn.dtick),ln=ct==="log"&&!($t||bn.dtick.charAt(0)==="L"),mn=K.tickFirst(bn,Fe);if(Rt){if(Re._tmin=mn,mn<Kt!==mt)break;ct!=="category"&&ct!=="multicategory"||(on=mt?Math.max(-.5,on):Math.min(Re._categories.length-.5,on))}var xn,Mn,Sn=null,Tn=mn;Rt&&($t?Mn=Re.dtick:ct==="date"?typeof Re.dtick=="string"&&Re.dtick.charAt(0)==="M"&&(Mn=y*Re.dtick.substring(1)):Mn=Re._roughDTick,xn=Math.round((Re.r2l(Tn)-Re.r2l(Re.tick0))/Mn)-1);var Rn=bn.dtick;for(bn.rangebreaks&&bn._tick0Init!==bn.tick0&&(Tn=Ne(Tn,Re),mt||(Tn=K.tickIncrement(Tn,Rn,!mt,pt))),Rt&&ut&&(Tn=K.tickIncrement(Tn,Rn,!mt,pt),xn--);mt?Tn>=on:Tn<=on;Tn=K.tickIncrement(Tn,Rn,mt,pt)){if(Rt&&xn++,bn.rangebreaks&&!mt){if(Tn<Kt)continue;if(bn.maskBreaks(Tn)===P&&Ne(Tn,bn)>=Lt)break}if(rn.length>Ct||Tn===Sn)break;Sn=Tn;var Pn={value:Tn};Rt?(ln&&Tn!==(0|Tn)&&(Pn.simpleLabel=!0),gt>1&&xn%gt&&(Pn.skipLabel=!0),rn.push(Pn)):(Pn.minor=!0,Nt.push(Pn))}}else rn=[],zt=oe(Re);else Rt?(rn=[],zt=ie(Re,!Ln)):(Nt=[],Gt=ie(Re,!Ln))}if(Wt&&!(Re.minor.ticks==="inside"&&Re.ticks==="outside"||Re.minor.ticks==="outside"&&Re.ticks==="inside")){for(var jn=rn.map(function(bt){return bt.value}),Jn=[],$n=0;$n<Nt.length;$n++){var Gn=Nt[$n],lr=Gn.value;if(jn.indexOf(lr)===-1){for(var Jt=!1,Qt=0;!Jt&&Qt<rn.length;Qt++)1e7+rn[Qt].value===1e7+lr&&(Jt=!0);Jt||Jn.push(Gn)}}Nt=Jn}if(ut&&function(bt,Ut,Xt){for(var un=0;un<bt.length;un++){var cn=bt[un].value,vn=un,en=un+1;un<bt.length-1?(vn=un,en=un+1):un>0?(vn=un-1,en=un):(vn=un,en=un);var Vt,Ht=bt[vn].value,tn=bt[en].value,sn=Math.abs(tn-Ht),wn=Xt||sn,An=0;wn>=c?An=sn>=c&&sn<=u?sn:h:Xt===d&&wn>=v?An=sn>=v&&sn<=x?sn:d:wn>=m?An=sn>=m&&sn<=g?sn:y:Xt===b&&wn>=b?An=b:wn>=f?An=f:Xt===S&&wn>=S?An=S:Xt===w&&wn>=w&&(An=w),An>=sn&&(An=sn,Vt=!0);var Dn=cn+An;if(Ut.rangebreaks&&An>0){for(var Bn=0,Xn=0;Xn<84;Xn++){var Un=(Xn+.5)/84;Ut.maskBreaks(cn*(1-Un)+Un*Dn)!==P&&Bn++}(An*=Bn/84)||(bt[un].drop=!0),Vt&&sn>b&&(An=sn)}(An>0||un===0)&&(bt[un].periodX=cn+An/2)}}(rn,Re,Re._definedDelta),Re.rangebreaks){var En=Re._id.charAt(0)==="y",pn=1;Re.tickmode==="auto"&&(pn=Re.tickfont?Re.tickfont.size:12);var Cn=NaN;for(nt=rn.length-1;nt>-1;nt--)if(rn[nt].drop)rn.splice(nt,1);else{rn[nt].value=Ne(rn[nt].value,Re);var Vn=Re.c2p(rn[nt].value);(En?Cn>Vn-pn:Cn<Vn+pn)?rn.splice(mt?nt+1:nt,1):Cn=Vn}}Ye(Re)&&Math.abs(kt[1]-kt[0])===360&&rn.pop(),Re._tmax=(rn[rn.length-1]||{}).value,Re._prevDateHead="",Re._inCalcTicks=!0;var Fn,Yn,fr=function(bt){bt.text="",Re._prevDateHead=Ge};for(rn=rn.concat(Nt),nt=0;nt<rn.length;nt++){var Zt=rn[nt].minor,dn=rn[nt].value;Zt?Gt.push({x:dn,minor:!0}):(Ge=Re._prevDateHead,Fn=K.tickText(Re,dn,!1,rn[nt].simpleLabel),(Yn=rn[nt].periodX)!==void 0&&(Fn.periodX=Yn,(Yn>Lt||Yn<At)&&(Yn>Lt&&(Fn.periodX=Lt),Yn<At&&(Fn.periodX=At),fr(Fn))),rn[nt].skipLabel&&fr(Fn),zt.push(Fn))}return zt=zt.concat(Gt),Re._inCalcTicks=!1,ut&&zt.length&&(zt[0].noTick=!0),zt};var de=[2,5,10],Se=[1,2,3,6,12],_e=[1,2,5,10,15,30],we=[1,2,3,7,14],Ae=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Oe=[-.301,0,.301,.699,1],ze=[15,30,45,90,180];function pe(Re,Fe,nt){return Fe*_.roundUp(Re/Fe,nt)}function be(Re){var Fe=Re.dtick;if(Re._tickexponent=0,k(Fe)||typeof Fe=="string"||(Fe=1),Re.type!=="category"&&Re.type!=="multicategory"||(Re._tickround=null),Re.type==="date"){var nt=Re.r2l(Re.tick0),Ge=Re.l2r(nt).replace(/(^-|i)/g,""),ct=Ge.length;if(String(Fe).charAt(0)==="M")ct>10||Ge.substr(5)!=="01-01"?Re._tickround="d":Re._tickround=+Fe.substr(1)%12==0?"y":"m";else if(Fe>=f&&ct<=10||Fe>=15*f)Re._tickround="d";else if(Fe>=E&&ct<=16||Fe>=w)Re._tickround="M";else if(Fe>=O&&ct<=19||Fe>=E)Re._tickround="S";else{var pt=Re.l2r(nt+Fe).replace(/^-/,"").length;Re._tickround=Math.max(ct,pt)-20,Re._tickround<0&&(Re._tickround=4)}}else if(k(Fe)||Fe.charAt(0)==="L"){var gt=Re.range.map(Re.r2d||Number);k(Fe)||(Fe=Number(Fe.substr(1))),Re._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var ut=Math.max(Math.abs(gt[0]),Math.abs(gt[1])),kt=Math.floor(Math.log(ut)/Math.LN10+.01),mt=Re.minexponent===void 0?3:Re.minexponent;Math.abs(kt)>mt&&(Ee(Re.exponentformat)&&!Be(kt)?Re._tickexponent=3*Math.round((kt-1)/3):Re._tickexponent=kt)}else Re._tickround=null}function ke(Re,Fe,nt){var Ge=Re.tickfont||{};return{x:Fe,dx:0,dy:0,text:nt||"",fontSize:Ge.size,font:Ge.family,fontWeight:Ge.weight,fontStyle:Ge.style,fontVariant:Ge.variant,fontTextcase:Ge.textcase,fontLineposition:Ge.lineposition,fontShadow:Ge.shadow,fontColor:Ge.color}}K.autoTicks=function(Re,Fe,nt){var Ge;function ct(Lt){return Math.pow(Lt,Math.floor(Math.log(Fe)/Math.LN10))}if(Re.type==="date"){Re.tick0=_.dateTick0(Re.calendar,0);var pt=2*Fe;if(pt>h)Fe/=h,Ge=ct(10),Re.dtick="M"+12*pe(Fe,Ge,de);else if(pt>y)Fe/=y,Re.dtick="M"+pe(Fe,1,Se);else if(pt>f){if(Re.dtick=pe(Fe,f,Re._hasDayOfWeekBreaks?[1,2,7,14]:we),!nt){var gt=K.getTickFormat(Re),ut=Re.ticklabelmode==="period";ut&&(Re._rawTick0=Re.tick0),/%[uVW]/.test(gt)?Re.tick0=_.dateTick0(Re.calendar,2):Re.tick0=_.dateTick0(Re.calendar,1),ut&&(Re._dowTick0=Re.tick0)}}else pt>w?Re.dtick=pe(Fe,w,Se):pt>E?Re.dtick=pe(Fe,E,_e):pt>O?Re.dtick=pe(Fe,O,_e):(Ge=ct(10),Re.dtick=pe(Fe,Ge,de))}else if(Re.type==="log"){Re.tick0=0;var kt=_.simpleMap(Re.range,Re.r2l);if(Re._isMinor&&(Fe*=1.5),Fe>.7)Re.dtick=Math.ceil(Fe);else if(Math.abs(kt[1]-kt[0])<1){var mt=1.5*Math.abs((kt[1]-kt[0])/Fe);Fe=Math.abs(Math.pow(10,kt[1])-Math.pow(10,kt[0]))/mt,Ge=ct(10),Re.dtick="L"+pe(Fe,Ge,de)}else Re.dtick=Fe>.3?"D2":"D1"}else Re.type==="category"||Re.type==="multicategory"?(Re.tick0=0,Re.dtick=Math.ceil(Math.max(Fe,1))):Ye(Re)?(Re.tick0=0,Ge=1,Re.dtick=pe(Fe,Ge,ze)):(Re.tick0=0,Ge=ct(10),Re.dtick=pe(Fe,Ge,de));if(Re.dtick===0&&(Re.dtick=1),!k(Re.dtick)&&typeof Re.dtick!="string"){var At=Re.dtick;throw Re.dtick=1,"ax.dtick error: "+String(At)}},K.tickIncrement=function(Re,Fe,nt,Ge){var ct=nt?-1:1;if(k(Fe))return _.increment(Re,ct*Fe);var pt=Fe.charAt(0),gt=ct*Number(Fe.substr(1));if(pt==="M")return _.incrementMonth(Re,gt,Ge);if(pt==="L")return Math.log(Math.pow(10,Re)+gt)/Math.LN10;if(pt==="D"){var ut=Fe==="D2"?Oe:Ae,kt=Re+.01*ct,mt=_.roundUp(_.mod(kt,1),ut,nt);return Math.floor(kt)+Math.log(M.round(Math.pow(10,mt),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},K.tickFirst=function(Re,Fe){var nt=Re.r2l||Number,Ge=_.simpleMap(Re.range,nt,void 0,void 0,Fe),ct=Ge[1]<Ge[0],pt=ct?Math.floor:Math.ceil,gt=fe(Ge)[0],ut=Re.dtick,kt=nt(Re.tick0);if(k(ut)){var mt=pt((gt-kt)/ut)*ut+kt;return Re.type!=="category"&&Re.type!=="multicategory"||(mt=_.constrain(mt,0,Re._categories.length-1)),mt}var At=ut.charAt(0),Lt=Number(ut.substr(1));if(At==="M"){for(var Ct,zt,Gt,rn=0,Nt=kt;rn<10;){if(((Ct=K.tickIncrement(Nt,ut,ct,Re.calendar))-gt)*(Nt-gt)<=0)return ct?Math.min(Nt,Ct):Math.max(Nt,Ct);zt=(gt-(Nt+Ct)/2)/(Ct-Nt),Gt=At+(Math.abs(Math.round(zt))||1)*Lt,Nt=K.tickIncrement(Nt,Gt,zt<0?!ct:ct,Re.calendar),rn++}return _.error("tickFirst did not converge",Re),Nt}if(At==="L")return Math.log(pt((Math.pow(10,gt)-kt)/Lt)*Lt+kt)/Math.LN10;if(At==="D"){var Wt=ut==="D2"?Oe:Ae,Rt=_.roundUp(_.mod(gt,1),Wt,ct);return Math.floor(gt)+Math.log(M.round(Math.pow(10,Rt),1))/Math.LN10}throw"unrecognized dtick "+String(ut)},K.tickText=function(Re,Fe,nt,Ge){var ct,pt=ke(Re,Fe),gt=Re.tickmode==="array",ut=nt||gt,kt=Re.type,mt=kt==="category"?Re.d2l_noadd:Re.d2l,At=function(Nt){var Wt=Re.l2p(Nt);return Wt>=0&&Wt<=Re._length?Nt:null};if(gt&&_.isArrayOrTypedArray(Re.ticktext)){var Lt=_.simpleMap(Re.range,Re.r2l),Ct=(Math.abs(Lt[1]-Lt[0])-(Re._lBreaks||0))/1e4;for(ct=0;ct<Re.ticktext.length&&!(Math.abs(Fe-mt(Re.tickvals[ct]))<Ct);ct++);if(ct<Re.ticktext.length)return pt.text=String(Re.ticktext[ct]),pt.xbnd=[At(pt.x-.5),At(pt.x+Re.dtick-.5)],pt}function zt(Nt){if(Nt===void 0)return!0;if(nt)return Nt==="none";var Wt={first:Re._tmin,last:Re._tmax}[Nt];return Nt!=="all"&&Fe!==Wt}var Gt=nt?"never":Re.exponentformat!=="none"&&zt(Re.showexponent)?"hide":"";if(kt==="date"?function(Nt,Wt,Rt,Ln){var bn=Nt._tickround,hn=Rt&&Nt.hoverformat||K.getTickFormat(Nt);(Ln=!hn&&Ln)&&(bn=k(bn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[bn]);var Kt,on=_.formatDate(Wt.x,hn,bn,Nt._dateFormat,Nt.calendar,Nt._extraFormat),$t=on.indexOf(`
`);if($t!==-1&&(Kt=on.substr($t+1),on=on.substr(0,$t)),Ln&&(Kt===void 0||on!=="00:00:00"&&on!=="00:00"?on.length===8&&(on=on.replace(/:00$/,"")):(on=Kt,Kt="")),Kt)if(Rt)bn==="d"?on+=", "+Kt:on=Kt+(on?", "+on:"");else if(Nt._inCalcTicks&&Nt._prevDateHead===Kt){var ln=We(Nt),mn=Nt._trueSide||Nt.side;(!ln&&mn==="top"||ln&&mn==="bottom")&&(on+="<br> ")}else Nt._prevDateHead=Kt,on+="<br>"+Kt;Wt.text=on}(Re,pt,nt,ut):kt==="log"?function(Nt,Wt,Rt,Ln,bn){var hn=Nt.dtick,Kt=Wt.x,on=Nt.tickformat,$t=typeof hn=="string"&&hn.charAt(0);if(bn==="never"&&(bn=""),Ln&&$t!=="L"&&(hn="L3",$t="L"),on||$t==="L")Wt.text=Ve(Math.pow(10,Kt),Nt,bn,Ln);else if(k(hn)||$t==="D"&&_.mod(Kt+.01,1)<.1){var ln=Math.round(Kt),mn=Math.abs(ln),xn=Nt.exponentformat;xn==="power"||Ee(xn)&&Be(ln)?(Wt.text=ln===0?1:ln===1?"10":"10<sup>"+(ln>1?"":C)+mn+"</sup>",Wt.fontSize*=1.25):(xn==="e"||xn==="E")&&mn>2?Wt.text="1"+xn+(ln>0?"+":C)+mn:(Wt.text=Ve(Math.pow(10,Kt),Nt,"","fakehover"),hn==="D1"&&Nt._id.charAt(0)==="y"&&(Wt.dy-=Wt.fontSize/6))}else{if($t!=="D")throw"unrecognized dtick "+String(hn);Wt.text=String(Math.round(Math.pow(10,_.mod(Kt,1)))),Wt.fontSize*=.75}if(Nt.dtick==="D1"){var Mn=String(Wt.text).charAt(0);Mn!=="0"&&Mn!=="1"||(Nt._id.charAt(0)==="y"?Wt.dx-=Wt.fontSize/4:(Wt.dy+=Wt.fontSize/2,Wt.dx+=(Nt.range[1]>Nt.range[0]?1:-1)*Wt.fontSize*(Kt<0?.5:.25)))}}(Re,pt,0,ut,Gt):kt==="category"?function(Nt,Wt){var Rt=Nt._categories[Math.round(Wt.x)];Rt===void 0&&(Rt=""),Wt.text=String(Rt)}(Re,pt):kt==="multicategory"?function(Nt,Wt,Rt){var Ln=Math.round(Wt.x),bn=Nt._categories[Ln]||[],hn=bn[1]===void 0?"":String(bn[1]),Kt=bn[0]===void 0?"":String(bn[0]);Rt?Wt.text=Kt+" - "+hn:(Wt.text=hn,Wt.text2=Kt)}(Re,pt,nt):Ye(Re)?function(Nt,Wt,Rt,Ln,bn){if(Nt.thetaunit!=="radians"||Rt)Wt.text=Ve(Wt.x,Nt,bn,Ln);else{var hn=Wt.x/180;if(hn===0)Wt.text="0";else{var Kt=function($t){function ln(Sn,Tn){return Math.abs(Sn-Tn)<=1e-6}var mn=function(Sn){for(var Tn=1;!ln(Math.round(Sn*Tn)/Tn,Sn);)Tn*=10;return Tn}($t),xn=$t*mn,Mn=Math.abs(function Sn(Tn,Rn){return ln(Rn,0)?Tn:Sn(Rn,Tn%Rn)}(xn,mn));return[Math.round(xn/Mn),Math.round(mn/Mn)]}(hn);if(Kt[1]>=100)Wt.text=Ve(_.deg2rad(Wt.x),Nt,bn,Ln);else{var on=Wt.x<0;Kt[1]===1?Kt[0]===1?Wt.text="π":Wt.text=Kt[0]+"π":Wt.text=["<sup>",Kt[0],"</sup>","⁄","<sub>",Kt[1],"</sub>","π"].join(""),on&&(Wt.text=C+Wt.text)}}}}(Re,pt,nt,ut,Gt):function(Nt,Wt,Rt,Ln,bn){bn==="never"?bn="":Nt.showexponent==="all"&&Math.abs(Wt.x/Nt.dtick)<1e-6&&(bn="hide"),Wt.text=Ve(Wt.x,Nt,bn,Ln)}(Re,pt,0,ut,Gt),Ge||(Re.tickprefix&&!zt(Re.showtickprefix)&&(pt.text=Re.tickprefix+pt.text),Re.ticksuffix&&!zt(Re.showticksuffix)&&(pt.text+=Re.ticksuffix)),Re.labelalias&&Re.labelalias.hasOwnProperty(pt.text)){var rn=Re.labelalias[pt.text];typeof rn=="string"&&(pt.text=rn)}return(Re.tickson==="boundaries"||Re.showdividers)&&(pt.xbnd=[At(pt.x-.5),At(pt.x+Re.dtick-.5)]),pt},K.hoverLabelText=function(Re,Fe,nt){nt&&(Re=_.extendFlat({},Re,{hoverformat:nt}));var Ge=_.isArrayOrTypedArray(Fe)?Fe[0]:Fe,ct=_.isArrayOrTypedArray(Fe)?Fe[1]:void 0;if(ct!==void 0&&ct!==Ge)return K.hoverLabelText(Re,Ge,nt)+" - "+K.hoverLabelText(Re,ct,nt);var pt=Re.type==="log"&&Ge<=0,gt=K.tickText(Re,Re.c2l(pt?-Ge:Ge),"hover").text;return pt?Ge===0?"0":C+gt:gt};var Ie=["f","p","n","μ","m","","k","M","G","T"];function Ee(Re){return Re==="SI"||Re==="B"}function Be(Re){return Re>14||Re<-15}function Ve(Re,Fe,nt,Ge){var ct=Re<0,pt=Fe._tickround,gt=nt||Fe.exponentformat||"B",ut=Fe._tickexponent,kt=K.getTickFormat(Fe),mt=Fe.separatethousands;if(Ge){var At={exponentformat:gt,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:k(Re)&&Math.abs(Re)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,Re||1]};be(At),pt=(Number(At._tickround)||0)+4,ut=At._tickexponent,Fe.hoverformat&&(kt=Fe.hoverformat)}if(kt)return Fe._numFormat(kt)(Re).replace(/-/g,C);var Lt,Ct=Math.pow(10,-pt)/2;if(gt==="none"&&(ut=0),(Re=Math.abs(Re))<Ct)Re="0",ct=!1;else{if(Re+=Ct,ut&&(Re*=Math.pow(10,-ut),pt+=ut),pt===0)Re=String(Math.floor(Re));else if(pt<0){Re=(Re=String(Math.round(Re))).substr(0,Re.length+pt);for(var zt=pt;zt<0;zt++)Re+="0"}else{var Gt=(Re=String(Re)).indexOf(".")+1;Gt&&(Re=Re.substr(0,Gt+pt).replace(/\.?0+$/,""))}Re=_.numSeparate(Re,Fe._separators,mt)}return ut&&gt!=="hide"&&(Ee(gt)&&Be(ut)&&(gt="power"),Lt=ut<0?C+-ut:gt!=="power"?"+"+ut:String(ut),gt==="e"||gt==="E"?Re+=gt+Lt:gt==="power"?Re+="×10<sup>"+Lt+"</sup>":gt==="B"&&ut===9?Re+="B":Ee(gt)&&(Re+=Ie[ut/3+5])),ct?C+Re:Re}function Ze(Re,Fe){if(Re){var nt=Object.keys(F).reduce(function(Ge,ct){return Fe.indexOf(ct)!==-1&&F[ct].forEach(function(pt){Ge[pt]=1}),Ge},{});Object.keys(Re).forEach(function(Ge){nt[Ge]||(Ge.length===1?Re[Ge]=0:delete Re[Ge])})}}function rt(Re,Fe){for(var nt=[],Ge={},ct=0;ct<Fe.length;ct++){var pt=Fe[ct];Ge[pt.text2]?Ge[pt.text2].push(pt.x):Ge[pt.text2]=[pt.x]}for(var gt in Ge)nt.push(ke(Re,_.interp(Ge[gt],.5),gt));return nt}function it(Re){return Re.periodX!==void 0?Re.periodX:Re.x}function dt(Re){return[Re.text,Re.x,Re.axInfo,Re.font,Re.fontSize,Re.fontColor].join("_")}function vt(Re){var Fe=Re.title.font.size,nt=(Re.title.text.match(s.BR_TAG_ALL)||[]).length;return Re.title.hasOwnProperty("standoff")?Fe*(te+nt*Q):nt?Fe*(nt+1)*Q:Fe}function ht(Re,Fe){var nt=Re.l2p(Fe);return nt>1&&nt<Re._length-1}function Qe(Re){var Fe=M.select(Re),nt=Fe.select(".text-math-group");return nt.empty()?Fe.select("text"):nt}function Je(Re){return Re._id+".automargin"}function Tt(Re){return Je(Re)+".mirror"}function Ot(Re){return Re._id+".rangeslider"}function Pt(Re,Fe){for(var nt=0;nt<Fe.length;nt++)Re.indexOf(Fe[nt])===-1&&Re.push(Fe[nt])}function Mt(Re,Fe,nt){var Ge,ct,pt=[],gt=[],ut=Re.layout;for(Ge=0;Ge<Fe.length;Ge++)pt.push(K.getFromId(Re,Fe[Ge]));for(Ge=0;Ge<nt.length;Ge++)gt.push(K.getFromId(Re,nt[Ge]));var kt=Object.keys(n),mt=["anchor","domain","overlaying","position","side","tickangle","editType"],At=["linear","log"];for(Ge=0;Ge<kt.length;Ge++){var Lt=kt[Ge],Ct=pt[0][Lt],zt=gt[0][Lt],Gt=!0,rn=!1,Nt=!1;if(Lt.charAt(0)!=="_"&&typeof Ct!="function"&&mt.indexOf(Lt)===-1){for(ct=1;ct<pt.length&&Gt;ct++){var Wt=pt[ct][Lt];Lt==="type"&&At.indexOf(Ct)!==-1&&At.indexOf(Wt)!==-1&&Ct!==Wt?rn=!0:Wt!==Ct&&(Gt=!1)}for(ct=1;ct<gt.length&&Gt;ct++){var Rt=gt[ct][Lt];Lt==="type"&&At.indexOf(zt)!==-1&&At.indexOf(Rt)!==-1&&zt!==Rt?Nt=!0:gt[ct][Lt]!==zt&&(Gt=!1)}Gt&&(rn&&(ut[pt[0]._name].type="linear"),Nt&&(ut[gt[0]._name].type="linear"),He(ut,Lt,pt,gt,Re._fullLayout._dfltTitle))}}for(Ge=0;Ge<Re._fullLayout.annotations.length;Ge++){var Ln=Re._fullLayout.annotations[Ge];Fe.indexOf(Ln.xref)!==-1&&nt.indexOf(Ln.yref)!==-1&&_.swapAttrs(ut.annotations[Ge],["?"])}}function He(Re,Fe,nt,Ge,ct){var pt,gt=_.nestedProperty,ut=gt(Re[nt[0]._name],Fe).get(),kt=gt(Re[Ge[0]._name],Fe).get();for(Fe==="title"&&(ut&&ut.text===ct.x&&(ut.text=ct.y),kt&&kt.text===ct.y&&(kt.text=ct.x)),pt=0;pt<nt.length;pt++)gt(Re,nt[pt]._name+"."+Fe).set(kt);for(pt=0;pt<Ge.length;pt++)gt(Re,Ge[pt]._name+"."+Fe).set(ut)}function Ye(Re){return Re._id==="angularaxis"}function Ne(Re,Fe){for(var nt=Fe._rangebreaks.length,Ge=0;Ge<nt;Ge++){var ct=Fe._rangebreaks[Ge];if(Re>=ct.min&&Re<ct.max)return ct.max}return Re}function We(Re){return(Re.ticklabelposition||"").indexOf("inside")!==-1}function ot(Re,Fe){We(Re._anchorAxis||{})&&Re._hideCounterAxisInsideTickLabels&&Re._hideCounterAxisInsideTickLabels(Fe)}function tt(Re,Fe,nt,Ge){var ct,pt=Re.anchor==="free"||Re.overlaying!==void 0&&Re.overlaying!==!1?Re.overlaying:Re._id;ct=Ge?Re.side==="right"?Fe:-Fe:Fe,pt in nt||(nt[pt]={}),Re.side in nt[pt]||(nt[pt][Re.side]=0),nt[pt][Re.side]+=ct}K.getTickFormat=function(Re){var Fe,nt,Ge,ct,pt,gt,ut,kt;function mt(Ct){return typeof Ct!="string"?Ct:Number(Ct.replace("M",""))*y}function At(Ct,zt){var Gt=["L","D"];if(typeof Ct==typeof zt){if(typeof Ct=="number")return Ct-zt;var rn=Gt.indexOf(Ct.charAt(0)),Nt=Gt.indexOf(zt.charAt(0));return rn===Nt?Number(Ct.replace(/(L|D)/g,""))-Number(zt.replace(/(L|D)/g,"")):rn-Nt}return typeof Ct=="number"?1:-1}function Lt(Ct,zt){var Gt=zt[0]===null,rn=zt[1]===null,Nt=At(Ct,zt[0])>=0,Wt=At(Ct,zt[1])<=0;return(Gt||Nt)&&(rn||Wt)}if(Re.tickformatstops&&Re.tickformatstops.length>0)switch(Re.type){case"date":case"linear":for(Fe=0;Fe<Re.tickformatstops.length;Fe++)if((Ge=Re.tickformatstops[Fe]).enabled&&(ct=Re.dtick,pt=Ge.dtickrange,gt=void 0,ut=void 0,kt=void 0,gt=mt||function(Ct){return Ct},ut=pt[0],kt=pt[1],(!ut&&typeof ut!="number"||gt(ut)<=gt(ct))&&(!kt&&typeof kt!="number"||gt(kt)>=gt(ct)))){nt=Ge;break}break;case"log":for(Fe=0;Fe<Re.tickformatstops.length;Fe++)if((Ge=Re.tickformatstops[Fe]).enabled&&Lt(Re.dtick,Ge.dtickrange)){nt=Ge;break}}return nt?nt.value:Re.tickformat},K.getSubplots=function(Re,Fe){var nt=Re._fullLayout._subplots,Ge=nt.cartesian.concat(nt.gl2d||[]),ct=Fe?K.findSubplotsWithAxis(Ge,Fe):Ge;return ct.sort(function(pt,gt){var ut=pt.substr(1).split("y"),kt=gt.substr(1).split("y");return ut[0]===kt[0]?+ut[1]-+kt[1]:+ut[0]-+kt[0]}),ct},K.findSubplotsWithAxis=function(Re,Fe){for(var nt=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),Ge=[],ct=0;ct<Re.length;ct++){var pt=Re[ct];nt.test(pt)&&Ge.push(pt)}return Ge},K.makeClipPaths=function(Re){var Fe=Re._fullLayout;if(!Fe._hasOnlyLargeSploms){var nt,Ge,ct={_offset:0,_length:Fe.width,_id:""},pt={_offset:0,_length:Fe.height,_id:""},gt=K.list(Re,"x",!0),ut=K.list(Re,"y",!0),kt=[];for(nt=0;nt<gt.length;nt++)for(kt.push({x:gt[nt],y:pt}),Ge=0;Ge<ut.length;Ge++)nt===0&&kt.push({x:ct,y:ut[Ge]}),kt.push({x:gt[nt],y:ut[Ge]});var mt=Fe._clips.selectAll(".axesclip").data(kt,function(At){return At.x._id+At.y._id});mt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(At){return"clip"+Fe._uid+At.x._id+At.y._id}).append("rect"),mt.exit().remove(),mt.each(function(At){M.select(this).select("rect").attr({x:At.x._offset||0,y:At.y._offset||0,width:At.x._length||1,height:At.y._length||1})})}},K.draw=function(Re,Fe,nt){var Ge=Re._fullLayout;Fe==="redraw"&&Ge._paper.selectAll("g.subplot").each(function(ut){var kt=ut[0],mt=Ge._plots[kt];if(mt){var At=mt.xaxis,Lt=mt.yaxis;mt.xaxislayer.selectAll("."+At._id+"tick").remove(),mt.yaxislayer.selectAll("."+Lt._id+"tick").remove(),mt.xaxislayer.selectAll("."+At._id+"tick2").remove(),mt.yaxislayer.selectAll("."+Lt._id+"tick2").remove(),mt.xaxislayer.selectAll("."+At._id+"divider").remove(),mt.yaxislayer.selectAll("."+Lt._id+"divider").remove(),mt.minorGridlayer&&mt.minorGridlayer.selectAll("path").remove(),mt.gridlayer&&mt.gridlayer.selectAll("path").remove(),mt.zerolinelayer&&mt.zerolinelayer.selectAll("path").remove(),Ge._infolayer.select(".g-"+At._id+"title").remove(),Ge._infolayer.select(".g-"+Lt._id+"title").remove()}});var ct=Fe&&Fe!=="redraw"?Fe:K.listIds(Re),pt=K.list(Re).filter(function(ut){return ut.autoshift}).map(function(ut){return ut.overlaying});ct.map(function(ut){var kt=K.getFromId(Re,ut);if(kt.tickmode==="sync"&&kt.overlaying){var mt=ct.findIndex(function(At){return At===kt.overlaying});mt>=0&&ct.unshift(ct.splice(mt,1).shift())}});var gt={false:{left:0,right:0}};return _.syncOrAsync(ct.map(function(ut){return function(){if(ut){var kt=K.getFromId(Re,ut);nt||(nt={}),nt.axShifts=gt,nt.overlayingShiftedAx=pt;var mt=K.drawOne(Re,kt,nt);return kt._shiftPusher&&tt(kt,kt._fullDepth||0,gt,!0),kt._r=kt.range.slice(),kt._rl=_.simpleMap(kt._r,kt.r2l),mt}}}))},K.drawOne=function(Re,Fe,nt){var Ge,ct,pt,gt=(nt=nt||{}).axShifts||{},ut=nt.overlayingShiftedAx||[];Fe.setScale();var kt=Re._fullLayout,mt=Fe._id,At=mt.charAt(0),Lt=K.counterLetter(mt),Ct=kt._plots[Fe._mainSubplot];if(Ct){if(Fe._shiftPusher=Fe.autoshift||ut.indexOf(Fe._id)!==-1||ut.indexOf(Fe.overlaying)!==-1,Fe._shiftPusher&Fe.anchor==="free"){var zt=Fe.linewidth/2||0;Fe.ticks==="inside"&&(zt+=Fe.ticklen),tt(Fe,zt,gt,!0),tt(Fe,Fe.shift||0,gt,!1)}nt.skipTitle===!0&&Fe._shift!==void 0||(Fe._shift=function(en,Vt){return en.autoshift?Vt[en.overlaying][en.side]:en.shift||0}(Fe,gt));var Gt=Ct[At+"axislayer"],rn=Fe._mainLinePosition,Nt=rn+=Fe._shift,Wt=Fe._mainMirrorPosition,Rt=Fe._vals=K.calcTicks(Fe),Ln=[Fe.mirror,Nt,Wt].join("_");for(Ge=0;Ge<Rt.length;Ge++)Rt[Ge].axInfo=Ln;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var bn={};if(Fe.visible){var hn,Kt,on=K.makeTransTickFn(Fe),$t=K.makeTransTickLabelFn(Fe),ln=Fe.ticks==="inside",mn=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var xn=function(en,Vt){var Ht,tn=[],sn=function(wn,An){var Dn=wn.xbnd[An];Dn!==null&&tn.push(_.extendFlat({},wn,{x:Dn}))};if(Vt.length){for(Ht=0;Ht<Vt.length;Ht++)sn(Vt[Ht],0);sn(Vt[Ht-1],1)}return tn}(0,Rt);Kt=K.clipEnds(Fe,xn),hn=ln?Kt:xn}else Kt=K.clipEnds(Fe,Rt),hn=ln&&Fe.ticklabelmode!=="period"?Kt:Rt;var Mn,Sn=Fe._gridVals=Kt,Tn=function(en,Vt){var Ht,tn,sn=[],wn=Vt.length&&Vt[Vt.length-1].x<Vt[0].x,An=function(Bn,Xn){var Un=Bn.xbnd[Xn];Un!==null&&sn.push(_.extendFlat({},Bn,{x:Un}))};if(en.showdividers&&Vt.length){for(Ht=0;Ht<Vt.length;Ht++){var Dn=Vt[Ht];Dn.text2!==tn&&An(Dn,wn?1:0),tn=Dn.text2}An(Vt[Ht-1],wn?0:1)}return sn}(Fe,Rt);if(!kt._hasOnlyLargeSploms){var Rn=Fe._subplotsWith,Pn={};for(Ge=0;Ge<Rn.length;Ge++){ct=Rn[Ge];var jn=(pt=kt._plots[ct])[Lt+"axis"],Jn=jn._mainAxis._id;if(!Pn[Jn]){Pn[Jn]=1;var $n=At==="x"?"M0,"+jn._offset+"v"+jn._length:"M"+jn._offset+",0h"+jn._length;K.drawGrid(Re,Fe,{vals:Sn,counterAxis:jn,layer:pt.gridlayer.select("."+mt),minorLayer:pt.minorGridlayer.select("."+mt),path:$n,transFn:on}),K.drawZeroLine(Re,Fe,{counterAxis:jn,layer:pt.zerolinelayer,path:$n,transFn:on})}}}var Gn=K.getTickSigns(Fe),lr=K.getTickSigns(Fe,"minor");if(Fe.ticks||Fe.minor&&Fe.minor.ticks){var Jt,Qt,En,pn,Cn=K.makeTickPath(Fe,Nt,Gn[2]),Vn=K.makeTickPath(Fe,Nt,lr[2],{minor:!0});if(Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(Jt=K.makeTickPath(Fe,Wt,Gn[3]),Qt=K.makeTickPath(Fe,Wt,lr[3],{minor:!0}),En=Cn+Jt,pn=Vn+Qt):(Jt="",Qt="",En=Cn,pn=Vn),Fe.showdividers&&mn&&Fe.tickson==="boundaries"){var Fn={};for(Ge=0;Ge<Tn.length;Ge++)Fn[Tn[Ge].x]=1;Mn=function(en){return Fn[en.x]?Jt:En}}else Mn=function(en){return en.minor?pn:En}}if(K.drawTicks(Re,Fe,{vals:hn,layer:Gt,path:Mn,transFn:on}),Fe.mirror==="allticks"){var Yn=Object.keys(Fe._linepositions||{});for(Ge=0;Ge<Yn.length;Ge++){ct=Yn[Ge],pt=kt._plots[ct];var fr=Fe._linepositions[ct]||[],Zt=fr[0],dn=fr[1],bt=fr[2],Ut=K.makeTickPath(Fe,Zt,bt?Gn[0]:lr[0],{minor:bt})+K.makeTickPath(Fe,dn,bt?Gn[1]:lr[1],{minor:bt});K.drawTicks(Re,Fe,{vals:hn,layer:pt[At+"axislayer"],path:Ut,transFn:on})}}var Xt=[];if(Xt.push(function(){return K.drawLabels(Re,Fe,{vals:Rt,layer:Gt,plotinfo:pt,transFn:$t,labelFns:K.makeLabelFns(Fe,Nt)})}),Fe.type==="multicategory"){var un={x:2,y:10}[At];Xt.push(function(){var en={x:"height",y:"width"}[At],Vt=vn()[en]+un+(Fe._tickAngles[mt+"tick"]?Fe.tickfont.size*Q:0);return K.drawLabels(Re,Fe,{vals:rt(Fe,Rt),layer:Gt,cls:mt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:on,labelFns:K.makeLabelFns(Fe,Nt+Vt*Gn[4])})}),Xt.push(function(){return Fe._depth=Gn[4]*(vn("tick2")[Fe.side]-Nt),function(en,Vt,Ht){var tn=Vt._id+"divider",sn=Ht.vals,wn=Ht.layer.selectAll("path."+tn).data(sn,dt);wn.exit().remove(),wn.enter().insert("path",":first-child").classed(tn,1).classed("crisp",1).call(i.stroke,Vt.dividercolor).style("stroke-width",r.crispRound(en,Vt.dividerwidth,1)+"px"),wn.attr("transform",Ht.transFn).attr("d",Ht.path)}(Re,Fe,{vals:Tn,layer:Gt,path:K.makeTickPath(Fe,Nt,Gn[4],{len:Fe._depth}),transFn:on})})}else Fe.title.hasOwnProperty("standoff")&&Xt.push(function(){Fe._depth=Gn[4]*(vn()[Fe.side]-Nt)});var cn=T.getComponentMethod("rangeslider","isVisible")(Fe);return nt.skipTitle||cn&&Fe.side==="bottom"||Xt.push(function(){return function(en,Vt){var Ht,tn=en._fullLayout,sn=Vt._id,wn=sn.charAt(0),An=Vt.title.font.size,Dn=(Vt.title.text.match(s.BR_TAG_ALL)||[]).length;if(Vt.title.hasOwnProperty("standoff"))Vt.side==="bottom"||Vt.side==="right"?Ht=Vt._depth+Vt.title.standoff+An*te:Vt.side!=="top"&&Vt.side!=="left"||(Ht=Vt._depth+Vt.title.standoff+An*(H+Dn*Q));else{var Bn=We(Vt);if(Vt.type==="multicategory")Ht=Vt._depth;else{var Xn=1.5*An;Bn&&(Xn=.5*An,Vt.ticks==="outside"&&(Xn+=Vt.ticklen)),Ht=10+Xn+(Vt.linewidth?Vt.linewidth-1:0)}Bn||(Ht+=wn==="x"?Vt.side==="top"?An*(Vt.showticklabels?1:0):An*(Vt.showticklabels?1.5:.5):Vt.side==="right"?An*(Vt.showticklabels?1:.5):An*(Vt.showticklabels?.5:0))}var Un,tr,Qn,Zn,ur=K.getPxPosition(en,Vt);if(wn==="x"?(tr=Vt._offset+Vt._length/2,Qn=Vt.side==="top"?ur-Ht:ur+Ht):(Qn=Vt._offset+Vt._length/2,tr=Vt.side==="right"?ur+Ht:ur-Ht,Un={rotate:"-90",offset:0}),Vt.type!=="multicategory"){var mr=Vt._selections[Vt._id+"tick"];if(Zn={selection:mr,side:Vt.side},mr&&mr.node()&&mr.node().parentNode){var hr=r.getTranslate(mr.node().parentNode);Zn.offsetLeft=hr.x,Zn.offsetTop=hr.y}Vt.title.hasOwnProperty("standoff")&&(Zn.pad=0)}return Vt._titleStandoff=Ht,t.draw(en,sn+"title",{propContainer:Vt,propName:Vt._name+".title.text",placeholder:tn._dfltTitle[wn],avoid:Zn,transform:Un,attributes:{x:tr,y:Qn,"text-anchor":"middle"}})}(Re,Fe)}),Xt.push(function(){var en,Vt,Ht,tn,sn=Fe.side.charAt(0),wn=$[Fe.side].charAt(0),An=K.getPxPosition(Re,Fe),Dn=mn?Fe.ticklen:0;(Fe.automargin||cn||Fe._shiftPusher)&&(Fe.type==="multicategory"?en=vn("tick2"):(en=vn(),At==="x"&&sn==="b"&&(Fe._depth=Math.max(en.width>0?en.bottom-An:0,Dn))));var Bn=0,Xn=0;if(Fe._shiftPusher&&(Bn=Math.max(Dn,en.height>0?sn==="l"?An-en.left:en.right-An:0),Fe.title.text!==kt._dfltTitle[At]&&(Xn=(Fe._titleStandoff||0)+(Fe._titleScoot||0),sn==="l"&&(Xn+=vt(Fe))),Fe._fullDepth=Math.max(Bn,Xn)),Fe.automargin){Vt={x:0,y:0,r:0,l:0,t:0,b:0};var Un=[0,1],tr=typeof Fe._shift=="number"?Fe._shift:0;if(At==="x"){if(sn==="b"?Vt[sn]=Fe._depth:(Vt[sn]=Fe._depth=Math.max(en.width>0?An-en.top:0,Dn),Un.reverse()),en.width>0){var Qn=en.right-(Fe._offset+Fe._length);Qn>0&&(Vt.xr=1,Vt.r=Qn);var Zn=Fe._offset-en.left;Zn>0&&(Vt.xl=0,Vt.l=Zn)}}else if(sn==="l"?(Fe._depth=Math.max(en.height>0?An-en.left:0,Dn),Vt[sn]=Fe._depth-tr):(Fe._depth=Math.max(en.height>0?en.right-An:0,Dn),Vt[sn]=Fe._depth+tr,Un.reverse()),en.height>0){var ur=en.bottom-(Fe._offset+Fe._length);ur>0&&(Vt.yb=0,Vt.b=ur);var mr=Fe._offset-en.top;mr>0&&(Vt.yt=1,Vt.t=mr)}Vt[Lt]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[Un[0]],Fe.title.text!==kt._dfltTitle[At]&&(Vt[sn]+=vt(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&((Ht={x:0,y:0,r:0,l:0,t:0,b:0})[wn]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(Ht[wn]+=Dn),Fe.mirror===!0||Fe.mirror==="ticks"?Ht[Lt]=Fe._anchorAxis.domain[Un[1]]:Fe.mirror!=="all"&&Fe.mirror!=="allticks"||(Ht[Lt]=[Fe._counterDomainMin,Fe._counterDomainMax][Un[1]]))}cn&&(tn=T.getComponentMethod("rangeslider","autoMarginOpts")(Re,Fe)),typeof Fe.automargin=="string"&&(Ze(Vt,Fe.automargin),Ze(Ht,Fe.automargin)),o.autoMargin(Re,Je(Fe),Vt),o.autoMargin(Re,Tt(Fe),Ht),o.autoMargin(Re,Ot(Fe),tn)}),_.syncOrAsync(Xt)}}function vn(en){var Vt=mt+(en||"tick");return bn[Vt]||(bn[Vt]=function(Ht,tn,sn){var wn,An,Dn,Bn;if(Ht._selections[tn].size())wn=1/0,An=-1/0,Dn=1/0,Bn=-1/0,Ht._selections[tn].each(function(){var Un=Qe(this),tr=r.bBox(Un.node().parentNode);wn=Math.min(wn,tr.top),An=Math.max(An,tr.bottom),Dn=Math.min(Dn,tr.left),Bn=Math.max(Bn,tr.right)});else{var Xn=K.makeLabelFns(Ht,sn);wn=An=Xn.yFn({dx:0,dy:0,fontSize:0}),Dn=Bn=Xn.xFn({dx:0,dy:0,fontSize:0})}return{top:wn,bottom:An,left:Dn,right:Bn,height:An-wn,width:Bn-Dn}}(Fe,Vt,Nt)),bn[Vt]}},K.getTickSigns=function(Re,Fe){var nt=Re._id.charAt(0),Ge={x:"top",y:"right"}[nt],ct=Re.side===Ge?1:-1,pt=[-1,1,ct,-ct];return(Fe?(Re.minor||{}).ticks:Re.ticks)!=="inside"==(nt==="x")&&(pt=pt.map(function(gt){return-gt})),Re.side&&pt.push({l:-1,t:-1,r:1,b:1}[Re.side.charAt(0)]),pt},K.makeTransTickFn=function(Re){return Re._id.charAt(0)==="x"?function(Fe){return p(Re._offset+Re.l2p(Fe.x),0)}:function(Fe){return p(0,Re._offset+Re.l2p(Fe.x))}},K.makeTransTickLabelFn=function(Re){var Fe=function(ct){var pt=ct.ticklabelposition||"",gt=function(Wt){return pt.indexOf(Wt)!==-1},ut=gt("top"),kt=gt("left"),mt=gt("right"),At=gt("bottom"),Lt=gt("inside"),Ct=At||kt||ut||mt;if(!Ct&&!Lt)return[0,0];var zt=ct.side,Gt=Ct?(ct.tickwidth||0)/2:0,rn=3,Nt=ct.tickfont?ct.tickfont.size:12;return(At||ut)&&(Gt+=Nt*te,rn+=(ct.linewidth||0)/2),(kt||mt)&&(Gt+=(ct.linewidth||0)/2,rn+=3),Lt&&zt==="top"&&(rn-=Nt*(1-te)),(kt||ut)&&(Gt=-Gt),zt!=="bottom"&&zt!=="right"||(rn=-rn),[Ct?Gt:0,Lt?rn:0]}(Re),nt=Fe[0],Ge=Fe[1];return Re._id.charAt(0)==="x"?function(ct){return p(nt+Re._offset+Re.l2p(it(ct)),Ge)}:function(ct){return p(Ge,nt+Re._offset+Re.l2p(it(ct)))}},K.makeTickPath=function(Re,Fe,nt,Ge){Ge||(Ge={});var ct=Ge.minor;if(ct&&!Re.minor)return"";var pt=Ge.len!==void 0?Ge.len:ct?Re.minor.ticklen:Re.ticklen,gt=Re._id.charAt(0),ut=(Re.linewidth||1)/2;return gt==="x"?"M0,"+(Fe+ut*nt)+"v"+pt*nt:"M"+(Fe+ut*nt)+",0h"+pt*nt},K.makeLabelFns=function(Re,Fe,nt){var Ge=Re.ticklabelposition||"",ct=function(xn){return Ge.indexOf(xn)!==-1},pt=ct("top"),gt=ct("left"),ut=ct("right"),kt=ct("bottom")||gt||pt||ut,mt=ct("inside"),At=Ge==="inside"&&Re.ticks==="inside"||!mt&&Re.ticks==="outside"&&Re.tickson!=="boundaries",Lt=0,Ct=0,zt=At?Re.ticklen:0;if(mt?zt*=-1:kt&&(zt=0),At&&(Lt+=zt,nt)){var Gt=_.deg2rad(nt);Lt=zt*Math.cos(Gt)+1,Ct=zt*Math.sin(Gt)}Re.showticklabels&&(At||Re.showline)&&(Lt+=.2*Re.tickfont.size);var rn,Nt,Wt,Rt,Ln,bn={labelStandoff:Lt+=(Re.linewidth||1)/2*(mt?-1:1),labelShift:Ct},hn=0,Kt=Re.side,on=Re._id.charAt(0),$t=Re.tickangle;if(on==="x")Rt=(Ln=!mt&&Kt==="bottom"||mt&&Kt==="top")?1:-1,mt&&(Rt*=-1),rn=Ct*Rt,Nt=Fe+Lt*Rt,Wt=Ln?1:-.2,Math.abs($t)===90&&(mt?Wt+=H:Wt=$t===-90&&Kt==="bottom"?te:$t===90&&Kt==="top"?H:.5,hn=H/2*($t/90)),bn.xFn=function(xn){return xn.dx+rn+hn*xn.fontSize},bn.yFn=function(xn){return xn.dy+Nt+xn.fontSize*Wt},bn.anchorFn=function(xn,Mn){if(kt){if(gt)return"end";if(ut)return"start"}return k(Mn)&&Mn!==0&&Mn!==180?Mn*Rt<0!==mt?"end":"start":"middle"},bn.heightFn=function(xn,Mn,Sn){return Mn<-60||Mn>60?-.5*Sn:Re.side==="top"!==mt?-Sn:0};else if(on==="y"){if(Rt=(Ln=!mt&&Kt==="left"||mt&&Kt==="right")?1:-1,mt&&(Rt*=-1),rn=Lt,Nt=Ct*Rt,Wt=0,mt||Math.abs($t)!==90||(Wt=$t===-90&&Kt==="left"||$t===90&&Kt==="right"?te:.5),mt){var ln=k($t)?+$t:0;if(ln!==0){var mn=_.deg2rad(ln);hn=Math.abs(Math.sin(mn))*te*Rt,Wt=0}}bn.xFn=function(xn){return xn.dx+Fe-(rn+xn.fontSize*Wt)*Rt+hn*xn.fontSize},bn.yFn=function(xn){return xn.dy+Nt+xn.fontSize*H},bn.anchorFn=function(xn,Mn){return k(Mn)&&Math.abs(Mn)===90?"middle":Ln?"end":"start"},bn.heightFn=function(xn,Mn,Sn){return Re.side==="right"&&(Mn*=-1),Mn<-30?-Sn:Mn<30?-.5*Sn:0}}return bn},K.drawTicks=function(Re,Fe,nt){nt=nt||{};var Ge=Fe._id+"tick",ct=[].concat(Fe.minor&&Fe.minor.ticks?nt.vals.filter(function(gt){return gt.minor&&!gt.noTick}):[]).concat(Fe.ticks?nt.vals.filter(function(gt){return!gt.minor&&!gt.noTick}):[]),pt=nt.layer.selectAll("path."+Ge).data(ct,dt);pt.exit().remove(),pt.enter().append("path").classed(Ge,1).classed("ticks",1).classed("crisp",nt.crisp!==!1).each(function(gt){return i.stroke(M.select(this),gt.minor?Fe.minor.tickcolor:Fe.tickcolor)}).style("stroke-width",function(gt){return r.crispRound(Re,gt.minor?Fe.minor.tickwidth:Fe.tickwidth,1)+"px"}).attr("d",nt.path).style("display",null),ot(Fe,[N]),pt.attr("transform",nt.transFn)},K.drawGrid=function(Re,Fe,nt){if(nt=nt||{},Fe.tickmode!=="sync"){var Ge=Fe._id+"grid",ct=Fe.minor&&Fe.minor.showgrid,pt=ct?nt.vals.filter(function(Wt){return Wt.minor}):[],gt=Fe.showgrid?nt.vals.filter(function(Wt){return!Wt.minor}):[],ut=nt.counterAxis;if(ut&&K.shouldShowZeroLine(Re,Fe,ut))for(var kt=Fe.tickmode==="array",mt=0;mt<gt.length;mt++){var At=gt[mt].x;if(kt?!At:Math.abs(At)<Fe.dtick/100){if(gt=gt.slice(0,mt).concat(gt.slice(mt+1)),!kt)break;mt--}}Fe._gw=r.crispRound(Re,Fe.gridwidth,1);for(var Lt=ct?r.crispRound(Re,Fe.minor.gridwidth,1):0,Ct=nt.layer,zt=nt.minorLayer,Gt=1;Gt>=0;Gt--){var rn=Gt?Ct:zt;if(rn){var Nt=rn.selectAll("path."+Ge).data(Gt?gt:pt,dt);Nt.exit().remove(),Nt.enter().append("path").classed(Ge,1).classed("crisp",nt.crisp!==!1),Nt.attr("transform",nt.transFn).attr("d",nt.path).each(function(Wt){return i.stroke(M.select(this),Wt.minor?Fe.minor.gridcolor:Fe.gridcolor||"#ddd")}).style("stroke-dasharray",function(Wt){return r.dashStyle(Wt.minor?Fe.minor.griddash:Fe.griddash,Wt.minor?Fe.minor.gridwidth:Fe.gridwidth)}).style("stroke-width",function(Wt){return(Wt.minor?Lt:Fe._gw)+"px"}).style("display",null),typeof nt.path=="function"&&Nt.attr("d",nt.path)}}ot(Fe,[U,I])}},K.drawZeroLine=function(Re,Fe,nt){nt=nt||nt;var Ge=Fe._id+"zl",ct=K.shouldShowZeroLine(Re,Fe,nt.counterAxis),pt=nt.layer.selectAll("path."+Ge).data(ct?[{x:0,id:Fe._id}]:[]);pt.exit().remove(),pt.enter().append("path").classed(Ge,1).classed("zl",1).classed("crisp",nt.crisp!==!1).each(function(){nt.layer.selectAll("path").sort(function(gt,ut){return re(gt.id,ut.id)})}),pt.attr("transform",nt.transFn).attr("d",nt.path).call(i.stroke,Fe.zerolinecolor||i.defaultLine).style("stroke-width",r.crispRound(Re,Fe.zerolinewidth,Fe._gw||1)+"px").style("display",null),ot(Fe,[D])},K.drawLabels=function(Re,Fe,nt){nt=nt||{};var Ge=Re._fullLayout,ct=Fe._id,pt=nt.cls||ct+"tick",gt=nt.vals.filter(function(Pn){return Pn.text}),ut=nt.labelFns,kt=nt.secondary?0:Fe.tickangle,mt=(Fe._prevTickAngles||{})[pt],At=nt.layer.selectAll("g."+pt).data(Fe.showticklabels?gt:[],dt),Lt=[];function Ct(Pn,jn){Pn.each(function(Jn){var $n=M.select(this),Gn=$n.select(".text-math-group"),lr=ut.anchorFn(Jn,jn),Jt=nt.transFn.call($n.node(),Jn)+(k(jn)&&+jn!=0?" rotate("+jn+","+ut.xFn(Jn)+","+(ut.yFn(Jn)-Jn.fontSize/2)+")":""),Qt=s.lineCount($n),En=Q*Jn.fontSize,pn=ut.heightFn(Jn,k(jn)?+jn:0,(Qt-1)*En);if(pn&&(Jt+=p(0,pn)),Gn.empty()){var Cn=$n.select("text");Cn.attr({transform:Jt,"text-anchor":lr}),Cn.style("opacity",1),Fe._adjustTickLabelsOverflow&&Fe._adjustTickLabelsOverflow()}else{var Vn=r.bBox(Gn.node()).width*{end:-.5,start:.5}[lr];Gn.attr("transform",Jt+p(Vn,0))}})}At.enter().append("g").classed(pt,1).append("text").attr("text-anchor","middle").each(function(Pn){var jn=M.select(this),Jn=Re._promises.length;jn.call(s.positionText,ut.xFn(Pn),ut.yFn(Pn)).call(r.font,{family:Pn.font,size:Pn.fontSize,color:Pn.fontColor,weight:Pn.fontWeight,style:Pn.fontStyle,variant:Pn.fontVariant,textcase:Pn.fontTextcase,lineposition:Pn.fontLineposition,shadow:Pn.fontShadow}).text(Pn.text).call(s.convertToTspans,Re),Re._promises[Jn]?Lt.push(Re._promises.pop().then(function(){Ct(jn,kt)})):Ct(jn,kt)}),ot(Fe,[W]),At.exit().remove(),nt.repositionOnUpdate&&At.each(function(Pn){M.select(this).select("text").call(s.positionText,ut.xFn(Pn),ut.yFn(Pn))}),Fe._adjustTickLabelsOverflow=function(){var Pn=Fe.ticklabeloverflow;if(Pn&&Pn!=="allow"){var jn=Pn.indexOf("hide")!==-1,Jn=Fe._id.charAt(0)==="x",$n=0,Gn=Jn?Re._fullLayout.width:Re._fullLayout.height;if(Pn.indexOf("domain")!==-1){var lr=_.simpleMap(Fe.range,Fe.r2l);$n=Fe.l2p(lr[0])+Fe._offset,Gn=Fe.l2p(lr[1])+Fe._offset}var Jt=Math.min($n,Gn),Qt=Math.max($n,Gn),En=Fe.side,pn=1/0,Cn=-1/0;for(var Vn in At.each(function(fr){var Zt=M.select(this);if(Zt.select(".text-math-group").empty()){var dn=r.bBox(Zt.node()),bt=0;Jn?(dn.right>Qt||dn.left<Jt)&&(bt=1):(dn.bottom>Qt||dn.top+(Fe.tickangle?0:fr.fontSize/4)<Jt)&&(bt=1);var Ut=Zt.select("text");bt?jn&&Ut.style("opacity",0):(Ut.style("opacity",1),pn=En==="bottom"||En==="right"?Math.min(pn,Jn?dn.top:dn.left):-1/0,Cn=En==="top"||En==="left"?Math.max(Cn,Jn?dn.bottom:dn.right):1/0)}}),Ge._plots){var Fn=Ge._plots[Vn];if(Fe._id===Fn.xaxis._id||Fe._id===Fn.yaxis._id){var Yn=Jn?Fn.yaxis:Fn.xaxis;Yn&&(Yn["_visibleLabelMin_"+Fe._id]=pn,Yn["_visibleLabelMax_"+Fe._id]=Cn)}}}},Fe._hideCounterAxisInsideTickLabels=function(Pn){var jn=Fe._id.charAt(0)==="x",Jn=[];for(var $n in Ge._plots){var Gn=Ge._plots[$n];Fe._id!==Gn.xaxis._id&&Fe._id!==Gn.yaxis._id||Jn.push(jn?Gn.yaxis:Gn.xaxis)}Jn.forEach(function(lr,Jt){lr&&We(lr)&&(Pn||[D,I,U,N,W]).forEach(function(Qt){var En=Qt.K==="tick"&&Qt.L==="text"&&Fe.ticklabelmode==="period",pn=Ge._plots[Fe._mainSubplot];(Qt.K===D.K?pn.zerolinelayer.selectAll("."+Fe._id+"zl"):Qt.K===I.K?pn.minorGridlayer.selectAll("."+Fe._id):Qt.K===U.K?pn.gridlayer.selectAll("."+Fe._id):pn[Fe._id.charAt(0)+"axislayer"]).each(function(){var Cn=M.select(this);Qt.L&&(Cn=Cn.selectAll(Qt.L)),Cn.each(function(Vn){var Fn=Fe.l2p(En?it(Vn):Vn.x)+Fe._offset,Yn=M.select(this);Fn<Fe["_visibleLabelMax_"+lr._id]&&Fn>Fe["_visibleLabelMin_"+lr._id]?Yn.style("display","none"):Qt.K!=="tick"||Jt||Yn.style("display",null)})})})})},Ct(At,mt+1?mt:kt);var zt=null;Fe._selections&&(Fe._selections[pt]=At);var Gt=[function(){return Lt.length&&Promise.all(Lt)}];Fe.automargin&&Ge._redrawFromAutoMarginCount&&mt===90?(zt=mt,Gt.push(function(){Ct(At,mt)})):Gt.push(function(){if(Ct(At,kt),gt.length&&Fe.autotickangles&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){zt=Fe.autotickangles[0];var Pn,jn=0,Jn=[],$n=1;At.each(function(vn){jn=Math.max(jn,vn.fontSize);var en=Fe.l2p(vn.x),Vt=Qe(this),Ht=r.bBox(Vt.node());$n=Math.max($n,s.lineCount(Vt)),Jn.push({top:0,bottom:10,height:10,left:en-Ht.width/2,right:en+Ht.width/2+2,width:Ht.width+2})});var Gn=(Fe.tickson==="boundaries"||Fe.showdividers)&&!nt.secondary,lr=gt.length,Jt=Math.abs((gt[lr-1].x-gt[0].x)*Fe._m)/(lr-1),Qt=Gn?Jt/2:Jt,En=Gn?Fe.ticklen:1.25*jn*$n,pn=Qt/Math.sqrt(Math.pow(Qt,2)+Math.pow(En,2)),Cn=Fe.autotickangles.map(function(vn){return vn*Math.PI/180}),Vn=Cn.find(function(vn){return Math.abs(Math.cos(vn))<=pn});Vn===void 0&&(Vn=Cn.reduce(function(vn,en){return Math.abs(Math.cos(vn))<Math.abs(Math.cos(en))?vn:en},Cn[0]));var Fn=Vn*(180/Math.PI);if(Gn){var Yn=2;for(Fe.ticks&&(Yn+=Fe.tickwidth/2),Pn=0;Pn<Jn.length;Pn++){var fr=gt[Pn].xbnd,Zt=Jn[Pn];if(fr[0]!==null&&Zt.left-Fe.l2p(fr[0])<Yn||fr[1]!==null&&Fe.l2p(fr[1])-Zt.right<Yn){zt=Fn;break}}}else{var dn=Fe.ticklabelposition||"",bt=function(vn){return dn.indexOf(vn)!==-1},Ut=bt("top"),Xt=bt("left"),un=bt("right"),cn=bt("bottom")||Xt||Ut||un?(Fe.tickwidth||0)+6:0;for(Pn=0;Pn<Jn.length-1;Pn++)if(_.bBoxIntersect(Jn[Pn],Jn[Pn+1],cn)){zt=Fn;break}}zt&&Ct(At,zt)}}),Fe._tickAngles&&Gt.push(function(){Fe._tickAngles[pt]=zt===null?k(kt)?kt:0:zt});var rn=function(){var Pn=0,jn=0;return At.each(function(Jn,$n){var Gn,lr=Qe(this);lr.select(".text-math-group").empty()&&(Fe._vals[$n]&&(Gn=Fe._vals[$n].bb||r.bBox(lr.node()),Fe._vals[$n].bb=Gn),Pn=Math.max(Pn,Gn.width),jn=Math.max(jn,Gn.height))}),{labelsMaxW:Pn,labelsMaxH:jn}},Nt=Fe._anchorAxis;if(Nt&&(Nt.autorange||Nt.insiderange)&&We(Fe)&&!se(Ge,Fe._id)&&(Ge._insideTickLabelsUpdaterange||(Ge._insideTickLabelsUpdaterange={}),Nt.autorange&&(Ge._insideTickLabelsUpdaterange[Nt._name+".autorange"]=Nt.autorange,Gt.push(rn)),Nt.insiderange)){var Wt=rn(),Rt=Fe._id.charAt(0)==="y"?Wt.labelsMaxW:Wt.labelsMaxH;Rt+=6,Fe.ticklabelposition==="inside"&&(Rt+=Fe.ticklen||0);var Ln=Fe.side==="right"||Fe.side==="top"?1:-1,bn=Ln===1?1:0,hn=Ln===1?0:1,Kt=[];Kt[hn]=Nt.range[hn];var on=Nt.range,$t=Nt.r2p(on[bn]),ln=Nt.r2p(on[hn]),mn=Ge._insideTickLabelsUpdaterange[Nt._name+".range"];if(mn){var xn=Nt.r2p(mn[bn]),Mn=Nt.r2p(mn[hn]),Sn=Ln*(Fe._id.charAt(0)==="y"?1:-1);Sn*$t<Sn*xn&&($t=xn,Kt[bn]=on[bn]=mn[bn]),Sn*ln>Sn*Mn&&(ln=Mn,Kt[hn]=on[hn]=mn[hn])}var Tn=Math.abs(ln-$t);Tn-Rt>0?Rt*=1+Rt/(Tn-=Rt):Rt=0,Fe._id.charAt(0)!=="y"&&(Rt=-Rt),Kt[bn]=Nt.p2r(Nt.r2p(on[bn])+Ln*Rt),Nt.autorange==="min"||Nt.autorange==="max reversed"?(Kt[0]=null,Nt._rangeInitial0=void 0,Nt._rangeInitial1=void 0):Nt.autorange!=="max"&&Nt.autorange!=="min reversed"||(Kt[1]=null,Nt._rangeInitial0=void 0,Nt._rangeInitial1=void 0),Ge._insideTickLabelsUpdaterange[Nt._name+".range"]=Kt}var Rn=_.syncOrAsync(Gt);return Rn&&Rn.then&&Re._promises.push(Rn),Rn},K.getPxPosition=function(Re,Fe){var nt,Ge=Re._fullLayout._size,ct=Fe._id.charAt(0),pt=Fe.side;return Fe.anchor!=="free"?nt=Fe._anchorAxis:ct==="x"?nt={_offset:Ge.t+(1-(Fe.position||0))*Ge.h,_length:0}:ct==="y"&&(nt={_offset:Ge.l+(Fe.position||0)*Ge.w+Fe._shift,_length:0}),pt==="top"||pt==="left"?nt._offset:pt==="bottom"||pt==="right"?nt._offset+nt._length:void 0},K.shouldShowZeroLine=function(Re,Fe,nt){var Ge=_.simpleMap(Fe.range,Fe.r2l);return Ge[0]*Ge[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===P)&&(ht(Fe,0)||!function(ct,pt,gt,ut){var kt=gt._mainAxis;if(kt){var mt=ct._fullLayout,At=pt._id.charAt(0),Lt=K.counterLetter(pt._id),Ct=pt._offset+(Math.abs(ut[0])<Math.abs(ut[1])==(At==="x")?0:pt._length),zt=mt._plots[gt._mainSubplot];if(!(zt.mainplotinfo||zt).overlays.length)return Wt(gt);for(var Gt=K.list(ct,Lt),rn=0;rn<Gt.length;rn++){var Nt=Gt[rn];if(Nt._mainAxis===kt&&Wt(Nt))return!0}}function Wt(Rt){if(!Rt.showline||!Rt.linewidth)return!1;var Ln=Math.max((Rt.linewidth+pt.zerolinewidth)/2,1);function bn(on){return typeof on=="number"&&Math.abs(on-Ct)<Ln}if(bn(Rt._mainLinePosition)||bn(Rt._mainMirrorPosition))return!0;var hn=Rt._linepositions||{};for(var Kt in hn)if(bn(hn[Kt][0])||bn(hn[Kt][1]))return!0}}(Re,Fe,nt,Ge)||function(ct,pt){for(var gt=ct._fullData,ut=pt._mainSubplot,kt=pt._id.charAt(0),mt=0;mt<gt.length;mt++){var At=gt[mt];if(At.visible===!0&&At.xaxis+At.yaxis===ut&&(T.traceIs(At,"bar-like")&&At.orientation==={x:"h",y:"v"}[kt]||At.fill&&At.fill.charAt(At.fill.length-1)===kt))return!0}return!1}(Re,Fe))},K.clipEnds=function(Re,Fe){return Fe.filter(function(nt){return ht(Re,nt.x)})},K.allowAutoMargin=function(Re){for(var Fe=K.list(Re,"",!0),nt=0;nt<Fe.length;nt++){var Ge=Fe[nt];Ge.automargin&&(o.allowAutoMargin(Re,Je(Ge)),Ge.mirror&&o.allowAutoMargin(Re,Tt(Ge))),T.getComponentMethod("rangeslider","isVisible")(Ge)&&o.allowAutoMargin(Re,Ot(Ge))}},K.swap=function(Re,Fe){for(var nt=function(ct,pt){var gt,ut,kt=[];for(gt=0;gt<pt.length;gt++){var mt=[],At=ct._fullData[pt[gt]].xaxis,Lt=ct._fullData[pt[gt]].yaxis;if(At&&Lt){for(ut=0;ut<kt.length;ut++)kt[ut].x.indexOf(At)===-1&&kt[ut].y.indexOf(Lt)===-1||mt.push(ut);if(mt.length){var Ct,zt=kt[mt[0]];if(mt.length>1)for(ut=1;ut<mt.length;ut++)Ct=kt[mt[ut]],Pt(zt.x,Ct.x),Pt(zt.y,Ct.y);Pt(zt.x,[At]),Pt(zt.y,[Lt])}else kt.push({x:[At],y:[Lt]})}}return kt}(Re,Fe),Ge=0;Ge<nt.length;Ge++)Mt(Re,nt[Ge].x,nt[Ge].y)}},52976:function(ee,R,e){var M=e(38248),k=e(3400),o=e(39032).BADNUM,T=k.isArrayOrTypedArray,_=k.isDateTime,p=k.cleanNumber,s=Math.round;function t(r,n){return n?M(r):typeof r=="number"}function i(r){return Math.max(1,(r-1)/1e3)}ee.exports=function(r,n,a){var l=r,u=a.noMultiCategory;if(T(l)&&!l.length)return"-";if(!u&&function(v){return T(v[0])&&T(v[1])}(l))return"multicategory";if(u&&Array.isArray(l[0])){for(var h=[],c=0;c<l.length;c++)if(T(l[c]))for(var x=0;x<l[c].length;x++)h.push(l[c][x]);l=h}if(function(v,g){for(var y=v.length,m=i(y),b=0,f=0,S={},w=0;w<y;w+=m){var E=v[s(w)],O=String(E);S[O]||(S[O]=1,_(E,g)&&b++,M(E)&&f++)}return b>2*f}(l,n))return"date";var d=a.autotypenumbers!=="strict";return function(v,g){for(var y=v.length,m=i(y),b=0,f=0,S={},w=0;w<y;w+=m){var E=v[s(w)],O=String(E);if(!S[O]){S[O]=1;var C=typeof E;C==="boolean"?f++:(g?p(E)!==o:C==="number")?b++:C==="string"&&f++}}return f>2*b}(l,d)?"category":function(v,g){for(var y=v.length,m=0;m<y;m++)if(t(v[m],g))return!0;return!1}(l,d)?"linear":"-"}},28336:function(ee,R,e){var M=e(38248),k=e(24040),o=e(3400),T=e(31780),_=e(51272),p=e(94724),s=e(26332),t=e(25404),i=e(95936),r=e(42568),n=e(22416),a=e(42136),l=e(96312),u=e(78344),h=e(33816).WEEKDAY_PATTERN,c=e(33816).HOUR_PATTERN;function x(g,y,m){function b(D,U){return o.coerce(g,y,p.rangebreaks,D,U)}if(b("enabled")){var f=b("bounds");if(f&&f.length>=2){var S,w,E="";if(f.length===2){for(S=0;S<2;S++)if(w=v(f[S])){E=h;break}}var O=b("pattern",E);if(O===h)for(S=0;S<2;S++)(w=v(f[S]))&&(y.bounds[S]=f[S]=w-1);if(O)for(S=0;S<2;S++)switch(w=f[S],O){case h:if(!M(w)||(w=+w)!==Math.floor(w)||w<0||w>=7)return void(y.enabled=!1);y.bounds[S]=f[S]=w;break;case c:if(!M(w)||(w=+w)<0||w>24)return void(y.enabled=!1);y.bounds[S]=f[S]=w}if(m.autorange===!1){var C=m.range;if(C[0]<C[1]){if(f[0]<C[0]&&f[1]>C[1])return void(y.enabled=!1)}else if(f[0]>C[0]&&f[1]<C[1])return void(y.enabled=!1)}}else{var P=b("values");if(!P||!P.length)return void(y.enabled=!1);b("dvalue")}}}ee.exports=function(g,y,m,b,f){var S,w=b.letter,E=b.font||{},O=b.splomStash||{},C=m("visible",!b.visibleDflt),P=y._template||{},D=y.type||P.type||"-";D==="date"&&(k.getComponentMethod("calendars","handleDefaults")(g,y,"calendar",b.calendar),b.noTicklabelmode||(S=m("ticklabelmode")));var U="";b.noTicklabelposition&&D!=="multicategory"||(U=o.coerce(g,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:w==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),b.noTicklabeloverflow||m("ticklabeloverflow",U.indexOf("inside")!==-1?"hide past domain":D==="category"||D==="multicategory"?"allow":"hide past div"),u(y,f),l(g,y,m,b),n(g,y,m,b),D==="category"||b.noHover||m("hoverformat");var I=m("color"),N=I!==p.color.dflt?I:E.color,W=O.label||f._dfltTitle[w];if(r(g,y,m,D,b),!C)return y;m("title.text",W),o.coerceFont(m,"title.font",E,{overrideDflt:{size:o.bigFont(E.size),color:N}}),s(g,y,m,D);var F=b.hasMinor;if(F&&(T.newContainer(y,"minor"),s(g,y,m,D,{isMinor:!0})),i(g,y,m,D,b),t(g,y,m,b),F){var j=b.isMinor;b.isMinor=!0,t(g,y,m,b),b.isMinor=j}a(g,y,m,{dfltColor:I,bgColor:b.bgColor,showGrid:b.showGrid,hasMinor:F,attributes:p}),!F||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&m("mirror");var H,te=D==="multicategory";if(b.noTickson||D!=="category"&&!te||!y.ticks&&!y.showgrid||(te&&(H="boundaries"),m("tickson",H)==="boundaries"&&delete y.ticklabelposition),te&&m("showdividers")&&(m("dividercolor"),m("dividerwidth")),D==="date")if(_(g,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),y.rangebreaks.length){for(var Q=0;Q<y.rangebreaks.length;Q++)if(y.rangebreaks[Q].pattern===h){y._hasDayOfWeekBreaks=!0;break}if(u(y,f),f._has("scattergl")||f._has("splom"))for(var $=0;$<b.data.length;$++){var K=b.data[$];K.type!=="scattergl"&&K.type!=="splom"||(K.visible=!1,o.warn(K.type+" traces do not work on axes with rangebreaks. Setting trace "+K.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var d={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function v(g){if(typeof g=="string")return d[g.substr(0,3).toLowerCase()]}},29736:function(ee,R,e){var M=e(26880),k=M.FORMAT_LINK,o=M.DATE_FORMAT_LINK;function T(p,s){return["Sets the "+p+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function _(p,s){return T(p,s)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ee.exports={axisHoverFormat:function(p,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:_)("hover text",p)+["By default the values are formatted using "+(s?"generic number format":"`"+p+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:_}},79811:function(ee,R,e){var M=e(24040),k=e(33816);function o(T,_){if(_&&_.length){for(var p=0;p<_.length;p++)if(_[p][T])return!0}return!1}R.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var _=T.split(" ")[0].substr(1);return _==="1"&&(_=""),T.charAt(0)+"axis"+_}},R.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var _=T.substr(5);return _==="1"&&(_=""),T.charAt(0)+_}},R.cleanId=function(T,_,p){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!_||T.charAt(0)===_)&&(!s||p)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&p?" domain":"")}},R.list=function(T,_,p){var s=T._fullLayout;if(!s)return[];var t,i=R.listIds(T,_),r=new Array(i.length);for(t=0;t<i.length;t++){var n=i[t];r[t]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!p){var a=s._subplots.gl3d||[];for(t=0;t<a.length;t++){var l=s[a[t]];_?r.push(l[_+"axis"]):r.push(l.xaxis,l.yaxis,l.zaxis)}}return r},R.listIds=function(T,_){var p=T._fullLayout;if(!p)return[];var s=p._subplots;return _?s[_+"axis"]:s.xaxis.concat(s.yaxis)},R.getFromId=function(T,_,p){var s=T._fullLayout;return _=_===void 0||typeof _!="string"?_:_.replace(" domain",""),p==="x"?_=_.replace(/y[0-9]*/,""):p==="y"&&(_=_.replace(/x[0-9]*/,"")),s[R.id2name(_)]},R.getFromTrace=function(T,_,p){var s=T._fullLayout,t=null;if(M.traceIs(_,"gl3d")){var i=_.scene;i.substr(0,5)==="scene"&&(t=s[i][p+"axis"])}else t=R.getFromId(T,_[p+"axis"]||p);return t},R.idSort=function(T,_){var p=T.charAt(0),s=_.charAt(0);return p!==s?p>s?1:-1:+(T.substr(1)||1)-+(_.substr(1)||1)},R.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},R.isLinked=function(T,_){return o(_,T._axisMatchGroups)||o(_,T._axisConstraintGroups)}},22416:function(ee,R,e){var M=e(38116).isTypedArraySpec;ee.exports=function(k,o,T,_){if(o.type==="category"){var p,s=k.categoryarray,t=Array.isArray(s)&&s.length>0||M(s);t&&(p="array");var i,r=T("categoryorder",p);r==="array"&&(i=T("categoryarray")),t||r!=="array"||(r=o.categoryorder="trace"),r==="trace"?o._initialCategories=[]:r==="array"?o._initialCategories=i.slice():(i=function(n,a){var l,u,h,c=a.dataAttr||n._id.charAt(0),x={};if(a.axData)l=a.axData;else for(l=[],u=0;u<a.data.length;u++){var d=a.data[u];d[c+"axis"]===n._id&&l.push(d)}for(u=0;u<l.length;u++){var v=l[u][c];for(h=0;h<v.length;h++){var g=v[h];g!=null&&(x[g]=1)}}return Object.keys(x)}(o,_).sort(),r==="category ascending"?o._initialCategories=i:r==="category descending"&&(o._initialCategories=i.reverse()))}}},98728:function(ee,R,e){var M=e(38248),k=e(3400),o=e(39032),T=o.ONEDAY,_=o.ONEWEEK;R.dtick=function(p,s){var t=s==="log",i=s==="date",r=s==="category",n=i?T:1;if(!p)return n;if(M(p))return(p=Number(p))<=0?n:r?Math.max(1,Math.round(p)):i?Math.max(.1,p):p;if(typeof p!="string"||!i&&!t)return n;var a=p.charAt(0),l=p.substr(1);return(l=M(l)?Number(l):0)<=0||!(i&&a==="M"&&l===Math.round(l)||t&&a==="L"||t&&a==="D"&&(l===1||l===2))?n:p},R.tick0=function(p,s,t,i){return s==="date"?k.cleanDate(p,k.dateTick0(t,i%_==0?1:0)):i!=="D1"&&i!=="D2"?M(p)?Number(p):0:void 0}},33816:function(ee,R,e){var M=e(53756).counter;ee.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(ee,R,e){var M=e(3400),k=e(19280),o=e(79811).id2name,T=e(94724),_=e(21160),p=e(78344),s=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function i(c,x,d){var v=d.axIds,g=d.layoutOut,y=d.hasImage,m=g._axisConstraintGroups,b=g._axisMatchGroups,f=x._id,S=f.charAt(0),w=((g._splomAxes||{})[S]||{})[f]||{},E=x._id,O=E.charAt(0)==="x";function C(X,Y){return M.coerce(c,x,T,X,Y)}x._matchGroup=null,x._constraintGroup=null,C("constrain",y?"domain":"range"),M.coerce(c,x,{constraintoward:{valType:"enumerated",values:O?["left","center","right"]:["bottom","middle","top"],dflt:O?"center":"middle"}},"constraintoward");var P,D,U=x.type,I=[];for(P=0;P<v.length;P++)(D=v[P])!==E&&g[o(D)].type===U&&I.push(D);var N=n(m,E);if(N){var W=[];for(P=0;P<I.length;P++)N[D=I[P]]||W.push(D);I=W}var F,j,H=I.length;H&&(c.matches||w.matches)&&(F=M.coerce(c,x,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(w.matches)!==-1?w.matches:void 0}},"matches"));var te=y&&!O?x.anchor:void 0;if(H&&!F&&(c.scaleanchor||te)&&(j=M.coerce(c,x,{scaleanchor:{valType:"enumerated",values:I.concat([!1])}},"scaleanchor",te)),F){x._matchGroup=a(b,E,F,1);var Q=g[o(F)],$=r(g,x)/r(g,Q);O!==(F.charAt(0)==="x")&&($=(O?"x":"y")+$),a(m,E,F,$)}else c.matches&&v.indexOf(c.matches)!==-1&&M.warn("ignored "+x._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(j){var K=C("scaleratio");K||(K=x.scaleratio=1),a(m,E,j,K)}else c.scaleanchor&&v.indexOf(c.scaleanchor)!==-1&&M.warn("ignored "+x._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(c,x){var d=x.domain;return d||(d=c[o(x.overlaying)].domain),d[1]-d[0]}function n(c,x){for(var d=0;d<c.length;d++)if(c[d][x])return c[d];return null}function a(c,x,d,v){var g,y,m,b,f,S=n(c,x);S===null?((S={})[x]=1,f=c.length,c.push(S)):f=c.indexOf(S);var w=Object.keys(S);for(g=0;g<c.length;g++)if(m=c[g],g!==f&&m[d]){var E=m[d];for(y=0;y<w.length;y++)m[b=w[y]]=l(E,l(v,S[b]));return void c.splice(f,1)}if(v!==1)for(y=0;y<w.length;y++){var O=w[y];S[O]=l(v,S[O])}S[d]=1}function l(c,x){var d,v,g="",y="";typeof c=="string"&&(d=(g=c.match(/^[xy]*/)[0]).length,c=+c.substr(d)),typeof x=="string"&&(v=(y=x.match(/^[xy]*/)[0]).length,x=+x.substr(v));var m=c*x;return d||v?d&&v&&g.charAt(0)!==y.charAt(0)?d===v?m:(d>v?g.substr(v):y.substr(d))+m:g+y+c*x:m}function u(c,x){for(var d=x._size,v=d.h/d.w,g={},y=Object.keys(c),m=0;m<y.length;m++){var b=y[m],f=c[b];if(typeof f=="string"){var S=f.match(/^[xy]*/)[0],w=S.length;f=+f.substr(w);for(var E=S.charAt(0)==="y"?v:1/v,O=0;O<w;O++)f*=E}g[b]=f}return g}function h(c,x){var d=c._inputDomain,v=t[c.constraintoward],g=d[0]+(d[1]-d[0])*v;c.domain=c._input.domain=[g+(d[0]-g)/x,g+(d[1]-g)/x],c.setScale()}R.handleDefaults=function(c,x,d){var v,g,y,m,b,f,S,w,E=d.axIds,O=d.axHasImage,C=x._axisConstraintGroups=[],P=x._axisMatchGroups=[];for(v=0;v<E.length;v++)i(b=c[m=o(E[v])],f=x[m],{axIds:E,layoutOut:x,hasImage:O[m]});function D(Q,$){for(v=0;v<Q.length;v++)for(y in g=Q[v])x[o(y)][$]=g}for(D(P,"_matchGroup"),v=0;v<C.length;v++)for(y in g=C[v])if((f=x[o(y)]).fixedrange){for(var U in g){var I=o(U);(c[I]||{}).fixedrange===!1&&M.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),x[I].fixedrange=!0}break}for(v=0;v<C.length;){for(y in g=C[v]){(f=x[o(y)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(g).length&&(C.splice(v,1),v--);break}v++}D(C,"_constraintGroup");var N=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],W=!1,F=!1;function j(){w=f[S],S==="rangebreaks"&&(F=f._hasDayOfWeekBreaks)}for(v=0;v<P.length;v++){g=P[v];for(var H=0;H<N.length;H++){var te;for(y in S=N[H],w=null,g)if(b=c[m=o(y)],f=x[m],S in f){if(!f.matches&&(te=f,S in b)){j();break}w===null&&S in b&&j()}if(S==="range"&&w&&b.range&&b.range.length===2&&b.range[0]!==null&&b.range[1]!==null&&(W=!0),S==="autorange"&&w===null&&W&&(w=!1),w===null&&S in te&&(w=te[S]),w!==null)for(y in g)(f=x[o(y)])[S]=S==="range"?w.slice():w,S==="rangebreaks"&&(f._hasDayOfWeekBreaks=F,p(f,x))}}},R.enforce=function(c){var x,d,v,g,y,m,b,f,S=c._fullLayout,w=S._axisConstraintGroups||[];for(x=0;x<w.length;x++){v=u(w[x],S);var E=Object.keys(v),O=1/0,C=0,P=1/0,D={},U={},I=!1;for(d=0;d<E.length;d++)U[g=E[d]]=y=S[o(g)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),D[g]=m=Math.abs(y._m)/v[g],O=Math.min(O,m),y.constrain!=="domain"&&y._constraintShrinkable||(P=Math.min(P,m)),delete y._constraintShrinkable,C=Math.max(C,m),y.constrain==="domain"&&(I=!0);if(!(O>s*C)||I){for(d=0;d<E.length;d++)if(m=D[g=E[d]],b=(y=U[g]).constrain,m!==P||b==="domain")if(f=m/P,b==="range")_(y,f);else{var N=y._inputDomain,W=(y.domain[1]-y.domain[0])/(N[1]-N[0]),F=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if((f/=W)*F<1){y.domain=y._input.domain=N.slice(),_(y,f);continue}if(F<1&&(y.range=y._input.range=y._inputRange.slice(),f*=F),y.autorange){var j=y.r2l(y.range[0]),H=y.r2l(y.range[1]),te=(j+H)/2,Q=te,$=te,K=Math.abs(H-te),X=te-K*f*1.0001,Y=te+K*f*1.0001,re=k.makePadFn(S,y,0),se=k.makePadFn(S,y,1);h(y,f);var ae,ce,fe=Math.abs(y._m),he=k.concatExtremes(c,y),ve=he.min,ye=he.max;for(ce=0;ce<ve.length;ce++)(ae=ve[ce].val-re(ve[ce])/fe)>X&&ae<Q&&(Q=ae);for(ce=0;ce<ye.length;ce++)(ae=ye[ce].val+se(ye[ce])/fe)<Y&&ae>$&&($=ae);f/=($-Q)/(2*K),Q=y.l2r(Q),$=y.l2r($),y.range=y._input.range=j<H?[Q,$]:[$,Q]}h(y,f)}}}},R.getAxisGroup=function(c,x){for(var d=c._axisMatchGroups,v=0;v<d.length;v++)if(d[v][x])return"g"+v;return x},R.clean=function(c,x){if(x._inputDomain){for(var d=!1,v=x._id,g=c._fullLayout._axisConstraintGroups,y=0;y<g.length;y++)if(g[y][v]){d=!0;break}d&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},51184:function(ee,R,e){var M=e(33428),k=e(3400),o=k.numberFormat,T=e(49760),_=e(89184),p=e(24040),s=k.strTranslate,t=e(72736),i=e(76308),r=e(43616),n=e(93024),a=e(54460),l=e(93972),u=e(86476),h=e(72760),c=h.selectingOrDrawing,x=h.freeMode,d=e(84284).FROM_TL,v=e(73696),g=e(39172).redrawReglTraces,y=e(7316),m=e(79811).getFromId,b=e(22676).prepSelect,f=e(22676).clearOutline,S=e(22676).selectOnClick,w=e(21160),E=e(33816),O=E.MINDRAG,C=E.MINZOOM,P=!0;function D(ae,ce,fe,he){var ve=k.ensureSingle(ae.draglayer,ce,fe,function(ye){ye.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return ve.call(l,he),ve.node()}function U(ae,ce,fe,he,ve,ye,me){var Me=D(ae,"rect",ce,fe);return M.select(Me).call(r.setRect,he,ve,ye,me),Me}function I(ae,ce){for(var fe=0;fe<ae.length;fe++)if(!ae[fe].fixedrange)return ce;return""}function N(ae,ce,fe,he,ve){for(var ye=0;ye<ae.length;ye++){var me=ae[ye];if(!me.fixedrange)if(me.rangebreaks){var Me=me._id.charAt(0)==="y",Pe=Me?1-ce:ce,ge=Me?1-fe:fe;he[me._name+".range[0]"]=me.l2r(me.p2l(Pe*me._length)),he[me._name+".range[1]"]=me.l2r(me.p2l(ge*me._length))}else{var oe=me._rl[0],ie=me._rl[1]-oe;he[me._name+".range[0]"]=me.l2r(oe+ie*ce),he[me._name+".range[1]"]=me.l2r(oe+ie*fe)}}if(ve&&ve.length){var de=(ce+(1-fe))/2;N(ve,de,1-de,he,[])}}function W(ae,ce){for(var fe=0;fe<ae.length;fe++){var he=ae[fe];if(!he.fixedrange){if(he.rangebreaks){var ve=he._length,ye=(he.p2l(0+ce)-he.p2l(0)+(he.p2l(ve+ce)-he.p2l(ve)))/2;he.range=[he.l2r(he._rl[0]-ye),he.l2r(he._rl[1]-ye)]}else he.range=[he.l2r(he._rl[0]-ce/he._m),he.l2r(he._rl[1]-ce/he._m)];he.limitRange&&he.limitRange()}}}function F(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function j(ae,ce,fe,he,ve){return ae.append("path").attr("class","zoombox").style({fill:ce>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(fe,he)).attr("d",ve+"Z")}function H(ae,ce,fe){return ae.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(ce,fe)).attr("d","M0,0Z")}function te(ae,ce,fe,he,ve,ye){ae.attr("d",he+"M"+fe.l+","+fe.t+"v"+fe.h+"h"+fe.w+"v-"+fe.h+"h-"+fe.w+"Z"),Q(ae,ce,ve,ye)}function Q(ae,ce,fe,he){fe||(ae.transition().style("fill",he>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200))}function $(ae){M.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function K(ae){P&&ae.data&&ae._context.showTips&&(k.notifier(k._(ae,"Double-click to zoom back out"),"long"),P=!1)}function X(ae){var ce=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,C)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+ce)+"h3v"+-ce+"h"+ce+"v-3h-"+(ce+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+ce)+"h-3v"+-ce+"h"+-ce+"v-3h"+(ce+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-ce)+"h-3v"+ce+"h"+-ce+"v3h"+(ce+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-ce)+"h3v"+ce+"h"+ce+"v3h-"+(ce+3)+"Z"}function Y(ae,ce,fe,he,ve){for(var ye,me,Me,Pe,ge=!1,oe={},ie={},de=(ve||{}).xaHash,Se=(ve||{}).yaHash,_e=0;_e<ce.length;_e++){var we=ce[_e];for(ye in fe)if(we[ye]){for(Me in we)ve&&(de[Me]||Se[Me])||(Me.charAt(0)==="x"?fe:he)[Me]||(oe[Me]=ye);for(me in he)ve&&(de[me]||Se[me])||!we[me]||(ge=!0)}for(me in he)if(we[me])for(Pe in we)ve&&(de[Pe]||Se[Pe])||(Pe.charAt(0)==="x"?fe:he)[Pe]||(ie[Pe]=me)}ge&&(k.extendFlat(oe,ie),ie={});var Ae={},Oe=[];for(Me in oe){var ze=m(ae,Me);Oe.push(ze),Ae[ze._id]=ze}var pe={},be=[];for(Pe in ie){var ke=m(ae,Pe);be.push(ke),pe[ke._id]=ke}return{xaHash:Ae,yaHash:pe,xaxes:Oe,yaxes:be,xLinks:oe,yLinks:ie,isSubplotConstrained:ge}}function re(ae,ce){if(_){var fe=ae.onwheel!==void 0?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(fe,ae._onwheel),ae._onwheel=ce,ae.addEventListener(fe,ce,{passive:!1})}else ae.onwheel!==void 0?ae.onwheel=ce:ae.onmousewheel!==void 0?ae.onmousewheel=ce:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",ce,{passive:!1}))}function se(ae){var ce=[];for(var fe in ae)ce.push(ae[fe]);return ce}ee.exports={makeDragBox:function(ae,ce,fe,he,ve,ye,me,Me){var Pe,ge,oe,ie,de,Se,_e,we,Ae,Oe,ze,pe,be,ke,Ie,Ee,Be,Ve,Ze,rt,it,dt,vt,ht=ae._fullLayout._zoomlayer,Qe=me+Me==="nsew",Je=(me+Me).length===1;function Tt(){if(Pe=ce.xaxis,ge=ce.yaxis,Ae=Pe._length,Oe=ge._length,_e=Pe._offset,we=ge._offset,(oe={})[Pe._id]=Pe,(ie={})[ge._id]=ge,me&&Me)for(var Kt=ce.overlays,on=0;on<Kt.length;on++){var $t=Kt[on].xaxis;oe[$t._id]=$t;var ln=Kt[on].yaxis;ie[ln._id]=ln}de=se(oe),Se=se(ie),be=I(de,Me),ke=I(Se,me),Ie=!ke&&!be,pe=Y(ae,ae._fullLayout._axisMatchGroups,oe,ie);var mn=(ze=Y(ae,ae._fullLayout._axisConstraintGroups,oe,ie,pe)).isSubplotConstrained||pe.isSubplotConstrained;Ee=Me||mn,Be=me||mn;var xn=ae._fullLayout;Ve=xn._has("scattergl"),Ze=xn._has("splom"),rt=xn._has("svg")}fe+=ce.yaxis._shift,Tt();var Ot=function(Kt,on,$t){return Kt?Kt==="nsew"?$t?"":on==="pan"?"move":"crosshair":Kt.toLowerCase()+"-resize":"pointer"}(ke+be,ae._fullLayout.dragmode,Qe),Pt=U(ce,me+Me+"drag",Ot,fe,he,ve,ye);if(Ie&&!Qe)return Pt.onmousedown=null,Pt.style.pointerEvents="none",Pt;var Mt,He,Ye,Ne,We,ot,tt,Re,Fe,nt,Ge={element:Pt,gd:ae,plotinfo:ce};function ct(){Ge.plotinfo.selection=!1,f(ae)}function pt(Kt,on){var $t=Ge.gd;if($t._fullLayout._activeShapeIndex>=0)$t._fullLayout._deactivateShape($t);else{var ln=$t._fullLayout.clickmode;if($($t),Kt!==2||Je||Nt(),Qe)ln.indexOf("select")>-1&&S(on,$t,de,Se,ce.id,Ge),ln.indexOf("event")>-1&&n.click($t,on,ce.id);else if(Kt===1&&Je){var mn=me?ge:Pe,xn=me==="s"||Me==="w"?0:1,Mn=mn._name+".range["+xn+"]",Sn=function(Pn,jn){var Jn,$n=Pn.range[jn],Gn=Math.abs($n-Pn.range[1-jn]);return Pn.type==="date"?$n:Pn.type==="log"?(Jn=Math.ceil(Math.max(0,-Math.log(Gn)/Math.LN10))+3,o("."+Jn+"g")(Math.pow(10,$n))):(Jn=Math.floor(Math.log(Math.abs($n))/Math.LN10)-Math.floor(Math.log(Gn)/Math.LN10)+4,o("."+String(Jn)+"g")($n))}(mn,xn),Tn="left",Rn="middle";if(mn.fixedrange)return;me?(Rn=me==="n"?"top":"bottom",mn.side==="right"&&(Tn="right")):Me==="e"&&(Tn="right"),$t._context.showAxisRangeEntryBoxes&&M.select(Pt).call(t.makeEditable,{gd:$t,immediate:!0,background:$t._fullLayout.paper_bgcolor,text:String(Sn),fill:mn.tickfont?mn.tickfont.color:"#444",horizontalAlign:Tn,verticalAlign:Rn}).on("edit",function(Pn){var jn=mn.d2r(Pn);jn!==void 0&&p.call("_guiRelayout",$t,Mn,jn)})}}}function gt(Kt,on){if(ae._transitioningWithDuration)return!1;var $t=Math.max(0,Math.min(Ae,dt*Kt+Mt)),ln=Math.max(0,Math.min(Oe,vt*on+He)),mn=Math.abs($t-Mt),xn=Math.abs(ln-He);function Mn(){tt="",Ye.r=Ye.l,Ye.t=Ye.b,Fe.attr("d","M0,0Z")}if(Ye.l=Math.min(Mt,$t),Ye.r=Math.max(Mt,$t),Ye.t=Math.min(He,ln),Ye.b=Math.max(He,ln),ze.isSubplotConstrained)mn>C||xn>C?(tt="xy",mn/Ae>xn/Oe?(xn=mn*Oe/Ae,He>ln?Ye.t=He-xn:Ye.b=He+xn):(mn=xn*Ae/Oe,Mt>$t?Ye.l=Mt-mn:Ye.r=Mt+mn),Fe.attr("d",X(Ye))):Mn();else if(pe.isSubplotConstrained)if(mn>C||xn>C){tt="xy";var Sn=Math.min(Ye.l/Ae,(Oe-Ye.b)/Oe),Tn=Math.max(Ye.r/Ae,(Oe-Ye.t)/Oe);Ye.l=Sn*Ae,Ye.r=Tn*Ae,Ye.b=(1-Sn)*Oe,Ye.t=(1-Tn)*Oe,Fe.attr("d",X(Ye))}else Mn();else!ke||xn<Math.min(Math.max(.6*mn,O),C)?mn<O||!be?Mn():(Ye.t=0,Ye.b=Oe,tt="x",Fe.attr("d",function(Rn,Pn){return"M"+(Rn.l-.5)+","+(Pn-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(Rn.r+.5)+","+(Pn-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(Ye,He))):!be||mn<Math.min(.6*xn,C)?(Ye.l=0,Ye.r=Ae,tt="y",Fe.attr("d",function(Rn,Pn){return"M"+(Pn-C-.5)+","+(Rn.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(Pn-C-.5)+","+(Rn.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Ye,Mt))):(tt="xy",Fe.attr("d",X(Ye)));Ye.w=Ye.r-Ye.l,Ye.h=Ye.b-Ye.t,tt&&(nt=!0),ae._dragged=nt,te(Re,Fe,Ye,We,ot,Ne),ut(),ae.emit("plotly_relayouting",it),ot=!0}function ut(){it={},tt!=="xy"&&tt!=="x"||(N(de,Ye.l/Ae,Ye.r/Ae,it,ze.xaxes),Gt("x",it)),tt!=="xy"&&tt!=="y"||(N(Se,(Oe-Ye.b)/Oe,(Oe-Ye.t)/Oe,it,ze.yaxes),Gt("y",it))}function kt(){ut(),$(ae),Wt(),K(ae)}Ge.prepFn=function(Kt,on,$t){var ln=Ge.dragmode,mn=ae._fullLayout.dragmode;mn!==ln&&(Ge.dragmode=mn),Tt(),dt=ae._fullLayout._invScaleX,vt=ae._fullLayout._invScaleY,Ie||(Qe?Kt.shiftKey?mn==="pan"?mn="zoom":c(mn)||(mn="pan"):Kt.ctrlKey&&(mn="pan"):mn="pan"),x(mn)?Ge.minDrag=1:Ge.minDrag=void 0,c(mn)?(Ge.xaxes=de,Ge.yaxes=Se,b(Kt,on,$t,Ge,mn)):(Ge.clickFn=pt,c(ln)&&ct(),Ie||(mn==="zoom"?(Ge.moveFn=gt,Ge.doneFn=kt,Ge.minDrag=1,function(xn,Mn,Sn){var Tn=Pt.getBoundingClientRect();Mt=Mn-Tn.left,He=Sn-Tn.top,ae._fullLayout._calcInverseTransform(ae);var Rn=k.apply3DTransform(ae._fullLayout._invTransform)(Mt,He);Mt=Rn[0],He=Rn[1],Ye={l:Mt,r:Mt,w:0,t:He,b:He,h:0},Ne=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:T(ae._fullLayout.plot_bgcolor).getLuminance(),ot=!1,tt="xy",nt=!1,Re=j(ht,Ne,_e,we,We="M0,0H"+Ae+"V"+Oe+"H0V0"),Fe=H(ht,_e,we)}(0,on,$t)):mn==="pan"&&(Ge.moveFn=zt,Ge.doneFn=Wt))),ae._fullLayout._redrag=function(){var xn=ae._dragdata;if(xn&&xn.element===Pt){var Mn=ae._fullLayout.dragmode;c(Mn)||(Tt(),Rt([0,0,Ae,Oe]),Ge.moveFn(xn.dx,xn.dy))}}},u.init(Ge);var mt=[0,0,Ae,Oe],At=null,Lt=E.REDRAWDELAY,Ct=ce.mainplot?ae._fullLayout._plots[ce.mainplot]:ce;function zt(Kt,on){if(Kt*=dt,on*=vt,!ae._transitioningWithDuration){if(ae._fullLayout._replotting=!0,be==="ew"||ke==="ns"){var $t=be?-Kt:0,ln=ke?-on:0;if(pe.isSubplotConstrained){if(be&&ke){var mn=(Kt/Ae-on/Oe)/2;$t=-(Kt=mn*Ae),ln=-(on=-mn*Oe)}ke?$t=-ln*Ae/Oe:ln=-$t*Oe/Ae}return be&&(W(de,Kt),Gt("x")),ke&&(W(Se,on),Gt("y")),Rt([$t,ln,Ae,Oe]),rn(),void ae.emit("plotly_relayouting",it)}var xn,Mn,Sn=be==="w"==(ke==="n")?1:-1;if(be&&ke&&(ze.isSubplotConstrained||pe.isSubplotConstrained)){var Tn=(Kt/Ae+Sn*on/Oe)/2;Kt=Tn*Ae,on=Sn*Tn*Oe}if(be==="w"?Kt=Jn(de,0,Kt):be==="e"?Kt=Jn(de,1,-Kt):be||(Kt=0),ke==="n"?on=Jn(Se,1,on):ke==="s"?on=Jn(Se,0,-on):ke||(on=0),xn=be==="w"?Kt:0,Mn=ke==="n"?on:0,ze.isSubplotConstrained&&!pe.isSubplotConstrained||pe.isSubplotConstrained&&be&&ke&&Sn>0){var Rn;if(pe.isSubplotConstrained||!be&&ke.length===1){for(Rn=0;Rn<de.length;Rn++)de[Rn].range=de[Rn]._r.slice(),w(de[Rn],1-on/Oe);xn=(Kt=on*Ae/Oe)/2}if(pe.isSubplotConstrained||!ke&&be.length===1){for(Rn=0;Rn<Se.length;Rn++)Se[Rn].range=Se[Rn]._r.slice(),w(Se[Rn],1-Kt/Ae);Mn=(on=Kt*Oe/Ae)/2}}pe.isSubplotConstrained&&ke||Gt("x"),pe.isSubplotConstrained&&be||Gt("y");var Pn=Ae-Kt,jn=Oe-on;!pe.isSubplotConstrained||be&&ke||(be?(Mn=xn?0:Kt*Oe/Ae,jn=Pn*Oe/Ae):(xn=Mn?0:on*Ae/Oe,Pn=jn*Ae/Oe)),Rt([xn,Mn,Pn,jn]),rn(),ae.emit("plotly_relayouting",it)}function Jn($n,Gn,lr){for(var Jt,Qt,En=1-Gn,pn=0;pn<$n.length;pn++){var Cn=$n[pn];if(!Cn.fixedrange){Jt=Cn,Qt=Cn._rl[En]+(Cn._rl[Gn]-Cn._rl[En])/F(lr/Cn._length);var Vn=Cn.l2r(Qt);Vn!==!1&&Vn!==void 0&&(Cn.range[Gn]=Vn)}}return Jt._length*(Jt._rl[Gn]-Qt)/(Jt._rl[Gn]-Jt._rl[En])}}function Gt(Kt,on){for(var $t=pe.isSubplotConstrained?{x:Se,y:de}[Kt]:pe[Kt+"axes"],ln=pe.isSubplotConstrained?{x:de,y:Se}[Kt]:[],mn=0;mn<$t.length;mn++){var xn=$t[mn],Mn=xn._id,Sn=pe.xLinks[Mn]||pe.yLinks[Mn],Tn=ln[0]||oe[Sn]||ie[Sn];Tn&&(on?(on[xn._name+".range[0]"]=on[Tn._name+".range[0]"],on[xn._name+".range[1]"]=on[Tn._name+".range[1]"]):xn.range=Tn.range.slice())}}function rn(){var Kt,on=[];function $t(Mn){for(Kt=0;Kt<Mn.length;Kt++)Mn[Kt].fixedrange||on.push(Mn[Kt]._id)}function ln(Mn,Sn){for(Kt=0;Kt<Mn.length;Kt++){var Tn=Mn[Kt],Rn=Tn[Sn];Tn.fixedrange||Rn.tickmode!=="sync"||on.push(Rn._id)}}for(Ee&&($t(de),$t(ze.xaxes),$t(pe.xaxes),ln(ce.overlays,"xaxis")),Be&&($t(Se),$t(ze.yaxes),$t(pe.yaxes),ln(ce.overlays,"yaxis")),it={},Kt=0;Kt<on.length;Kt++){var mn=on[Kt],xn=m(ae,mn);a.drawOne(ae,xn,{skipTitle:!0}),it[xn._name+".range[0]"]=xn.range[0],it[xn._name+".range[1]"]=xn.range[1]}a.redrawComponents(ae,on)}function Nt(){if(!ae._transitioningWithDuration){var Kt=ae._context.doubleClick,on=[];be&&(on=on.concat(de)),ke&&(on=on.concat(Se)),pe.xaxes&&(on=on.concat(pe.xaxes)),pe.yaxes&&(on=on.concat(pe.yaxes));var $t,ln,mn={};if(Kt==="reset+autosize")for(Kt="autosize",ln=0;ln<on.length;ln++){var xn=($t=on[ln])._rangeInitial0,Mn=$t._rangeInitial1,Sn=xn!==void 0||Mn!==void 0;if(Sn&&(xn!==void 0&&xn!==$t.range[0]||Mn!==void 0&&Mn!==$t.range[1])||!Sn&&$t.autorange!==!0){Kt="reset";break}}if(Kt==="autosize")for(ln=0;ln<on.length;ln++)($t=on[ln]).fixedrange||(mn[$t._name+".autorange"]=!0);else if(Kt==="reset"){for((be||ze.isSubplotConstrained)&&(on=on.concat(ze.xaxes)),ke&&!ze.isSubplotConstrained&&(on=on.concat(ze.yaxes)),ze.isSubplotConstrained&&(be?ke||(on=on.concat(Se)):on=on.concat(de)),ln=0;ln<on.length;ln++)if(!($t=on[ln]).fixedrange){var Tn=$t._name,Rn=$t._autorangeInitial;$t._rangeInitial0===void 0&&$t._rangeInitial1===void 0?mn[Tn+".autorange"]=!0:$t._rangeInitial0===void 0?(mn[Tn+".autorange"]=Rn,mn[Tn+".range"]=[null,$t._rangeInitial1]):$t._rangeInitial1===void 0?(mn[Tn+".range"]=[$t._rangeInitial0,null],mn[Tn+".autorange"]=Rn):mn[Tn+".range"]=[$t._rangeInitial0,$t._rangeInitial1]}}ae.emit("plotly_doubleclick",null),p.call("_guiRelayout",ae,mn)}}function Wt(){Rt([0,0,Ae,Oe]),k.syncOrAsync([y.previousPromises,function(){ae._fullLayout._replotting=!1,p.call("_guiRelayout",ae,it)}],ae)}function Rt(Kt){var on,$t,ln,mn,xn=ae._fullLayout,Mn=xn._plots,Sn=xn._subplots.cartesian;if(Ze&&p.subplotsRegistry.splom.drag(ae),Ve){for(on=0;on<Sn.length;on++)if(ln=($t=Mn[Sn[on]]).xaxis,mn=$t.yaxis,$t._scene){var Tn=k.simpleMap(ln.range,ln.r2l),Rn=k.simpleMap(mn.range,mn.r2l);ln.limitRange&&ln.limitRange(),mn.limitRange&&mn.limitRange(),Tn=ln.range,Rn=mn.range,$t._scene.update({range:[Tn[0],Rn[0],Tn[1],Rn[1]]})}}if((Ze||Ve)&&(v(ae),g(ae)),rt){var Pn=Kt[2]/Pe._length,jn=Kt[3]/ge._length;for(on=0;on<Sn.length;on++){ln=($t=Mn[Sn[on]]).xaxis,mn=$t.yaxis;var Jn,$n,Gn,lr,Jt=(Ee||pe.isSubplotConstrained)&&!ln.fixedrange&&oe[ln._id],Qt=(Be||pe.isSubplotConstrained)&&!mn.fixedrange&&ie[mn._id];if(Jt?(Jn=Pn,Gn=Me||pe.isSubplotConstrained?Kt[0]:hn(ln,Jn)):pe.xaHash[ln._id]?(Jn=Pn,Gn=Kt[0]*ln._length/Pe._length):pe.yaHash[ln._id]?(Jn=jn,Gn=ke==="ns"?-Kt[1]*ln._length/ge._length:hn(ln,Jn,{n:"top",s:"bottom"}[ke])):Gn=bn(ln,Jn=Ln(ln,Pn,jn)),Jn>1&&(ln.maxallowed!==void 0&&Ee===(ln.range[0]<ln.range[1]?"e":"w")||ln.minallowed!==void 0&&Ee===(ln.range[0]<ln.range[1]?"w":"e"))&&(Jn=1,Gn=0),Qt?($n=jn,lr=me||pe.isSubplotConstrained?Kt[1]:hn(mn,$n)):pe.yaHash[mn._id]?($n=jn,lr=Kt[1]*mn._length/ge._length):pe.xaHash[mn._id]?($n=Pn,lr=be==="ew"?-Kt[0]*mn._length/Pe._length:hn(mn,$n,{e:"right",w:"left"}[be])):lr=bn(mn,$n=Ln(mn,Pn,jn)),$n>1&&(mn.maxallowed!==void 0&&Be===(mn.range[0]<mn.range[1]?"n":"s")||mn.minallowed!==void 0&&Be===(mn.range[0]<mn.range[1]?"s":"n"))&&($n=1,lr=0),Jn||$n){Jn||(Jn=1),$n||($n=1);var En=ln._offset-Gn/Jn,pn=mn._offset-lr/$n;$t.clipRect.call(r.setTranslate,Gn,lr).call(r.setScale,Jn,$n),$t.plot.call(r.setTranslate,En,pn).call(r.setScale,1/Jn,1/$n),Jn===$t.xScaleFactor&&$n===$t.yScaleFactor||(r.setPointGroupScale($t.zoomScalePts,Jn,$n),r.setTextPointsScale($t.zoomScaleTxt,Jn,$n)),r.hideOutsideRangePoints($t.clipOnAxisFalseTraces,$t),$t.xScaleFactor=Jn,$t.yScaleFactor=$n}}}}function Ln(Kt,on,$t){return Kt.fixedrange?0:Ee&&ze.xaHash[Kt._id]?on:Be&&(ze.isSubplotConstrained?ze.xaHash:ze.yaHash)[Kt._id]?$t:0}function bn(Kt,on){return on?(Kt.range=Kt._r.slice(),w(Kt,on),hn(Kt,on)):0}function hn(Kt,on,$t){return Kt._length*(1-on)*d[$t||Kt.constraintoward||"middle"]}return me.length*Me.length!=1&&re(Pt,function(Kt){if(ae._context._scrollZoom.cartesian||ae._fullLayout._enablescrollzoom){if(ct(),ae._transitioningWithDuration)return Kt.preventDefault(),void Kt.stopPropagation();Tt(),clearTimeout(At);var on=-Kt.deltaY;if(isFinite(on)||(on=Kt.wheelDelta/10),isFinite(on)){var $t,ln=Math.exp(-Math.min(Math.max(on,-20),20)/200),mn=Ct.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xn=(Kt.clientX-mn.left)/mn.width,Mn=(mn.bottom-Kt.clientY)/mn.height;if(Ee){for(Me||(xn=.5),$t=0;$t<de.length;$t++)Sn(de[$t],xn,ln);Gt("x"),mt[2]*=ln,mt[0]+=mt[2]*xn*(1/ln-1)}if(Be){for(me||(Mn=.5),$t=0;$t<Se.length;$t++)Sn(Se[$t],Mn,ln);Gt("y"),mt[3]*=ln,mt[1]+=mt[3]*(1-Mn)*(1/ln-1)}Rt(mt),rn(),ae.emit("plotly_relayouting",it),At=setTimeout(function(){ae._fullLayout&&(mt=[0,0,Ae,Oe],Wt())},Lt),Kt.preventDefault()}else k.log("Did not find wheel motion attributes: ",Kt)}function Sn(Tn,Rn,Pn){if(!Tn.fixedrange){var jn=k.simpleMap(Tn.range,Tn.r2l),Jn=jn[0]+(jn[1]-jn[0])*Rn;Tn.range=jn.map(function($n){return Tn.l2r(Jn+($n-Jn)*Pn)})}}}),Pt},makeDragger:D,makeRectDragger:U,makeZoombox:j,makeCorners:H,updateZoombox:te,xyCorners:X,transitionZoombox:Q,removeZoombox:$,showDoubleClickNotifier:K,attachWheelEventHandler:re}},42464:function(ee,R,e){var M=e(33428),k=e(93024),o=e(86476),T=e(93972),_=e(51184).makeDragBox,p=e(33816).DRAGGERSIZE;R.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)M.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var a=r.split("y"),l=n.split("y");return a[0]===l[0]?Number(a[1]||1)-Number(l[1]||1):Number(a[0]||1)-Number(l[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],a=n.xaxis,l=n.yaxis;if(!n.mainplot){var u=_(s,n,a._offset,l._offset,a._length,l._length,"ns","ew");u.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&k.hover(s,x,r)},k.hover(s,x,r),s._fullLayout._lasthover=u,s._fullLayout._hoversubplot=r},u.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,o.unhover(s,x))},s._context.showAxisDragHandles&&(_(s,n,a._offset-p,l._offset-p,p,p,"n","w"),_(s,n,a._offset+a._length,l._offset-p,p,p,"n","e"),_(s,n,a._offset-p,l._offset+l._length,p,p,"s","w"),_(s,n,a._offset+a._length,l._offset+l._length,p,p,"s","e"))}if(s._context.showAxisDragHandles){if(r===a._mainSubplot){var h=a._mainLinePosition;a.side==="top"&&(h-=p),_(s,n,a._offset+.1*a._length,h,.8*a._length,p,"","ew"),_(s,n,a._offset,h,.1*a._length,p,"","w"),_(s,n,a._offset+.9*a._length,h,.1*a._length,p,"","e")}if(r===l._mainSubplot){var c=l._mainLinePosition;l.side!=="right"&&(c-=p),_(s,n,c,l._offset+.1*l._length,p,.8*l._length,"ns",""),_(s,n,c,l._offset+.9*l._length,p,.1*l._length,"s",""),_(s,n,c,l._offset,p,.1*l._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(r){r.target=s._fullLayout._lasthover,k.hover(s,r,t._hoversubplot)},i.onclick=function(r){r.target=s._fullLayout._lasthover,k.click(s,r)},i.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},R.updateFx(s)}},R.updateFx=function(s){var t=s._fullLayout,i=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,i)}},36632:function(ee,R,e){var M=e(24040),k=e(3400),o=e(79811);ee.exports=function(T){return function(_,p){var s=_[T];if(Array.isArray(s))for(var t=M.subplotsRegistry.cartesian,i=t.idRegex,r=p._subplots,n=r.xaxis,a=r.yaxis,l=r.cartesian,u=p._has("cartesian")||p._has("gl2d"),h=0;h<s.length;h++){var c=s[h];if(k.isPlainObject(c)){var x=o.cleanId(c.xref,"x",!1),d=o.cleanId(c.yref,"y",!1),v=i.x.test(x),g=i.y.test(d);if(v||g){u||k.pushUnique(p._basePlotModules,t);var y=!1;v&&n.indexOf(x)===-1&&(n.push(x),y=!0),g&&a.indexOf(d)===-1&&(a.push(d),y=!0),y&&v&&g&&l.push(x+d)}}}}}},57952:function(ee,R,e){var M=e(33428),k=e(24040),o=e(3400),T=e(7316),_=e(43616),p=e(84888)._M,s=e(79811),t=e(33816),i=e(9616),r=o.ensureSingle;function n(c,x,d){return o.ensureSingle(c,x,d,function(v){v.datum(d)})}function a(c,x,d,v,g){for(var y,m,b,f=t.traceLayerClasses,S=c._fullLayout,w=S._modules,E={},O=0;O<d.length;O++){var C=d[O][0].trace.zorder||0;E[C]||(E[C]=[]),E[C].push(d[O])}for(var P=[],D=[],U=Object.keys(E).map(Number).sort(o.sorterAsc),I=0;I<U.length;I++)for(var N=U[I],W=0;W<w.length;W++){var F=(y=w[W]).name,j=k.modules[F].categories;if(j.svg){var H=y.layerName||F+"layer",te=H+(I?Number(I)+1:""),Q=y.plot;b=(m=p(d,Q,N))[0],d=m[1],b.length&&P.push({i:f.indexOf(H),zorder:I,className:te,plotMethod:Q,cdModule:b}),j.zoomScale&&D.push("."+te)}}P.sort(function(X,Y){return(X.zorder||0)-(Y.zorder||0)||X.i-Y.i});var $=x.plot.selectAll("g.mlayer").data(P,function(X){return X.className});if($.enter().append("g").attr("class",function(X){return X.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),$.exit().remove(),$.order(),$.each(function(X){var Y=M.select(this),re=X.className;X.plotMethod(c,x,X.cdModule,Y,v,g),t.clipOnAxisFalseQuery.indexOf("."+re)===-1&&_.setClipUrl(Y,x.layerClipId,c)}),S._has("scattergl")&&(y=k.getModule("scattergl"),b=p(d,y)[0],y.plot(c,x,b)),!c._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),D.length)){var K=x.plot.selectAll(D.join(",")).selectAll(".trace");x.zoomScalePts=K.selectAll("path.point"),x.zoomScaleTxt=K.selectAll(".textpoint")}}function l(c,x){var d=x.plotgroup,v=x.id,g=t.layerValue2layerClass[x.xaxis.layer],y=t.layerValue2layerClass[x.yaxis.layer],m=c._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var b=x.mainplotinfo,f=b.plotgroup,S=v+"-x",w=v+"-y";x.minorGridlayer=b.minorGridlayer,x.gridlayer=b.gridlayer,x.zerolinelayer=b.zerolinelayer,r(b.overlinesBelow,"path",S),r(b.overlinesBelow,"path",w),r(b.overaxesBelow,"g",S),r(b.overaxesBelow,"g",w),x.plot=r(b.overplot,"g",v),r(b.overlinesAbove,"path",S),r(b.overlinesAbove,"path",w),r(b.overaxesAbove,"g",S),r(b.overaxesAbove,"g",w),x.xlines=f.select(".overlines-"+g).select("."+S),x.ylines=f.select(".overlines-"+y).select("."+w),x.xaxislayer=f.select(".overaxes-"+g).select("."+S),x.yaxislayer=f.select(".overaxes-"+y).select("."+w)}else if(m)x.xlines=r(d,"path","xlines-above"),x.ylines=r(d,"path","ylines-above"),x.xaxislayer=r(d,"g","xaxislayer-above"),x.yaxislayer=r(d,"g","yaxislayer-above");else{var E=r(d,"g","layer-subplot");x.shapelayer=r(E,"g","shapelayer"),x.imagelayer=r(E,"g","imagelayer"),x.minorGridlayer=r(d,"g","minor-gridlayer"),x.gridlayer=r(d,"g","gridlayer"),x.zerolinelayer=r(d,"g","zerolinelayer");var O=r(d,"g","layer-between");x.shapelayerBetween=r(O,"g","shapelayer"),x.imagelayerBetween=r(O,"g","imagelayer"),r(d,"path","xlines-below"),r(d,"path","ylines-below"),x.overlinesBelow=r(d,"g","overlines-below"),r(d,"g","xaxislayer-below"),r(d,"g","yaxislayer-below"),x.overaxesBelow=r(d,"g","overaxes-below"),x.plot=r(d,"g","plot"),x.overplot=r(d,"g","overplot"),x.xlines=r(d,"path","xlines-above"),x.ylines=r(d,"path","ylines-above"),x.overlinesAbove=r(d,"g","overlines-above"),r(d,"g","xaxislayer-above"),r(d,"g","yaxislayer-above"),x.overaxesAbove=r(d,"g","overaxes-above"),x.xlines=d.select(".xlines-"+g),x.ylines=d.select(".ylines-"+y),x.xaxislayer=d.select(".xaxislayer-"+g),x.yaxislayer=d.select(".yaxislayer-"+y)}m||(n(x.minorGridlayer,"g",x.xaxis._id),n(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(C){return C[0]}).sort(s.idSort),n(x.gridlayer,"g",x.xaxis._id),n(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(C){return C[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function u(c,x){if(c){var d={};for(var v in c.each(function(b){var f=b[0];M.select(this).remove(),h(f,x),d[f]=!0}),x._plots)for(var g=x._plots[v].overlays||[],y=0;y<g.length;y++){var m=g[y];d[m.id]&&m.plot.selectAll(".trace").remove()}}}function h(c,x){x._draggers.selectAll("g."+c).remove(),x._defs.select("#clip"+x._uid+c+"plot").remove()}R.name="cartesian",R.attr=["xaxis","yaxis"],R.idRoot=["x","y"],R.idRegex=t.idRegex,R.attrRegex=t.attrRegex,R.attributes=e(26720),R.layoutAttributes=e(94724),R.supplyLayoutDefaults=e(67352),R.transitionAxes=e(73736),R.finalizeSubplots=function(c,x){var d,v,g,y=x._subplots,m=y.xaxis,b=y.yaxis,f=y.cartesian,S=f.concat(y.gl2d||[]),w={},E={};for(d=0;d<S.length;d++){var O=S[d].split("y");w[O[0]]=1,E["y"+O[1]]=1}for(d=0;d<m.length;d++)w[v=m[d]]||(g=(c[s.id2name(v)]||{}).anchor,t.idRegex.y.test(g)||(g="y"),f.push(v+g),S.push(v+g),E[g]||(E[g]=1,o.pushUnique(b,g)));for(d=0;d<b.length;d++)E[g=b[d]]||(v=(c[s.id2name(g)]||{}).anchor,t.idRegex.x.test(v)||(v="x"),f.push(v+g),S.push(v+g),w[v]||(w[v]=1,o.pushUnique(m,v)));if(!S.length){for(var C in v="",g="",c)t.attrRegex.test(C)&&(C.charAt(0)==="x"?(!v||+C.substr(5)<+v.substr(5))&&(v=C):(!g||+C.substr(5)<+g.substr(5))&&(g=C));v=v?s.name2id(v):"x",g=g?s.name2id(g):"y",m.push(v),b.push(g),f.push(v+g)}},R.plot=function(c,x,d,v){var g,y=c._fullLayout,m=y._subplots.cartesian,b=c.calcdata;if(!Array.isArray(x))for(x=[],g=0;g<b.length;g++)x.push(g);for(g=0;g<m.length;g++){for(var f,S=m[g],w=y._plots[S],E=[],O=0;O<b.length;O++){var C=b[O],P=C[0].trace;P.xaxis+P.yaxis===S&&((x.indexOf(P.index)!==-1||P.carpet)&&(f&&f[0].trace.xaxis+f[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(P.fill)!==-1&&E.indexOf(f)===-1&&E.push(f),E.push(C)),f=C)}a(c,w,E,d,v)}},R.clean=function(c,x,d,v){var g,y,m,b=v._plots||{},f=x._plots||{},S=v._subplots||{};if(v._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(m in b)(g=b[m]).plotgroup&&g.plotgroup.remove();var w=v._has&&v._has("gl"),E=x._has&&x._has("gl");if(w&&!E)for(m in b)(g=b[m])._scene&&g._scene.destroy();if(S.xaxis&&S.yaxis){var O=s.listIds({_fullLayout:v});for(y=0;y<O.length;y++){var C=O[y];x[s.id2name(C)]||v._infolayer.selectAll(".g-"+C+"title").remove()}}var P=v._has&&v._has("cartesian"),D=x._has&&x._has("cartesian");if(P&&!D)u(v._cartesianlayer.selectAll(".subplot"),v),v._defs.selectAll(".axesclip").remove(),delete v._axisConstraintGroups,delete v._axisMatchGroups;else if(S.cartesian)for(y=0;y<S.cartesian.length;y++){var U=S.cartesian[y];if(!f[U]){var I="."+U+",."+U+"-x,."+U+"-y";v._cartesianlayer.selectAll(I).remove(),h(U,v)}}},R.drawFramework=function(c){var x=c._fullLayout,d=function(g){var y,m,b,f,S,w,E=g._fullLayout,O=E._subplots.cartesian,C=O.length,P=[],D=[];for(y=0;y<C;y++){b=O[y],S=(f=E._plots[b]).xaxis,w=f.yaxis;var U=S._mainAxis,I=w._mainAxis,N=U._id+I._id,W=E._plots[N];f.overlays=[],N!==b&&W?(f.mainplot=N,f.mainplotinfo=W,D.push(b)):(f.mainplot=void 0,f.mainplotinfo=void 0,P.push(b))}for(y=0;y<D.length;y++)b=D[y],(f=E._plots[b]).mainplotinfo.overlays.push(f);var F=P.concat(D),j=new Array(C);for(y=0;y<C;y++){b=F[y],S=(f=E._plots[b]).xaxis,w=f.yaxis;var H=[b,S.layer,w.layer,S.overlaying||"",w.overlaying||""];for(m=0;m<f.overlays.length;m++)H.push(f.overlays[m].id);j[y]=H}return j}(c),v=x._cartesianlayer.selectAll(".subplot").data(d,String);v.enter().append("g").attr("class",function(g){return"subplot "+g[0]}),v.order(),v.exit().call(u,x),v.each(function(g){var y=g[0],m=x._plots[y];m.plotgroup=M.select(this),l(c,m),m.draglayer=r(x._draggers,"g",y)})},R.rangePlot=function(c,x,d){l(c,x),a(c,x,d),T.style(c)},R.toSVG=function(c){var x=c._fullLayout._glimages,d=M.select(c).selectAll(".svg-container");d.filter(function(v,g){return g===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var v=this,g=v.toDataURL("image/png");x.append("svg:image").attr({xmlns:i.svg,"xlink:href":g,preserveAspectRatio:"none",x:0,y:0,width:v.style.width,height:v.style.height})})},R.updateFx=e(42464).updateFx},94724:function(ee,R,e){var M=e(25376),k=e(22548),o=e(98192).u,T=e(92880).extendFlat,_=e(31780).templatedArray,p=e(29736).descriptionWithDates,s=e(39032).ONEDAY,t=e(33816),i=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},n,{values:n.values.slice().concat(["sync"])});function l(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function d(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=5),w}function v(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var g={valType:"color",dflt:k.defaultLine,editType:"ticks"},y={valType:"color",dflt:k.lightLine,editType:"ticks"};function m(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var b=T({},o,{editType:"ticks"}),f={valType:"boolean",editType:"ticks"};ee.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:_("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:l(),tick0:u,dtick:h,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:d(),tickwidth:v(),tickcolor:g,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:p("tick label")},tickformatstops:_("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:p("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:f,gridcolor:y,gridwidth:m(),griddash:b,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:l("minor"),tick0:u,dtick:h,tickvals:c,ticks:x,ticklen:d("minor"),tickwidth:v("minor"),tickcolor:g,gridcolor:y,gridwidth:m("minor"),griddash:b,showgrid:f,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},67352:function(ee,R,e){var M=e(3400),k=e(76308),o=e(10624).isUnifiedHover,T=e(41008),_=e(31780),p=e(64859),s=e(94724),t=e(14944),i=e(28336),r=e(71888),n=e(37668),a=e(79811),l=a.id2name,u=a.name2id,h=e(33816).AX_ID_PATTERN,c=e(24040),x=c.traceIs,d=c.getComponentMethod;function v(g,y,m){Array.isArray(g[y])?g[y].push(m):g[y]=[m]}ee.exports=function(g,y,m){var b,f,S=y.autotypenumbers,w={},E={},O={},C={},P={},D={},U={},I={},N={},W={};for(b=0;b<m.length;b++){var F=m[b];if(x(F,"cartesian")||x(F,"gl2d")){var j,H;if(F.xaxis)j=l(F.xaxis),v(w,j,F);else if(F.xaxes)for(f=0;f<F.xaxes.length;f++)v(w,l(F.xaxes[f]),F);if(F.yaxis)H=l(F.yaxis),v(w,H,F);else if(F.yaxes)for(f=0;f<F.yaxes.length;f++)v(w,l(F.yaxes[f]),F);F.type==="funnel"?F.orientation==="h"?(j&&(E[j]=!0),H&&(U[H]=!0)):H&&(O[H]=!0):F.type==="image"?(H&&(I[H]=!0),j&&(I[j]=!0)):(H&&(P[H]=!0,D[H]=!0),x(F,"carpet")&&(F.type!=="carpet"||F._cheater)||j&&(C[j]=!0)),F.type==="carpet"&&F._cheater&&j&&(E[j]=!0),x(F,"2dMap")&&(N[j]=!0,N[H]=!0),x(F,"oriented")&&(W[F.orientation==="h"?H:j]=!0)}}var te=y._subplots,Q=te.xaxis,$=te.yaxis,K=M.simpleMap(Q,l),X=M.simpleMap($,l),Y=K.concat(X),re=k.background;Q.length&&$.length&&(re=M.coerce(g,y,p,"plot_bgcolor"));var se,ae,ce,fe,he,ve=k.combine(re,y.paper_bgcolor);function ye(){var Je=w[se]||[];he._traceIndices=Je.map(function(Tt){return Tt._expandedIndex}),he._annIndices=[],he._shapeIndices=[],he._selectionIndices=[],he._imgIndices=[],he._subplotsWith=[],he._counterAxes=[],he._name=he._attr=se,he._id=ae}function me(Je,Tt){return M.coerce(fe,he,s,Je,Tt)}function Me(Je,Tt){return M.coerce2(fe,he,s,Je,Tt)}function Pe(Je){return Je==="x"?$:Q}function ge(Je,Tt){for(var Ot=Je==="x"?K:X,Pt=[],Mt=0;Mt<Ot.length;Mt++){var He=Ot[Mt];He===Tt||(g[He]||{}).overlaying||Pt.push(u(He))}return Pt}var oe={x:Pe("x"),y:Pe("y")},ie=oe.x.concat(oe.y),de={},Se=[];function _e(){var Je=fe.matches;h.test(Je)&&ie.indexOf(Je)===-1&&(de[Je]=fe.type,Se=Object.keys(de))}var we=T(g,y),Ae=o(we);for(b=0;b<Y.length;b++){se=Y[b],ae=u(se),ce=se.charAt(0),M.isPlainObject(g[se])||(g[se]={}),fe=g[se],he=_.newContainer(y,se,ce+"axis"),ye();var Oe=ce==="x"&&!C[se]&&E[se]||ce==="y"&&!P[se]&&O[se],ze=ce==="y"&&(!D[se]&&U[se]||I[se]),pe={hasMinor:!0,letter:ce,font:y.font,outerTicks:N[se],showGrid:!W[se],data:w[se]||[],bgColor:ve,calendar:y.calendar,automargin:!0,visibleDflt:Oe,reverseDflt:ze,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ce]||{})[ae],noAutotickangles:ce==="y"};me("uirevision",y.uirevision),t(fe,he,me,pe),i(fe,he,me,pe,y);var be=Ae&&ce===we.charAt(0),ke=Me("spikecolor",Ae?he.color:void 0),Ie=Me("spikethickness",Ae?1.5:void 0),Ee=Me("spikedash",Ae?"dot":void 0),Be=Me("spikemode",Ae?"across":void 0),Ve=Me("spikesnap");me("showspikes",!!(be||ke||Ie||Ee||Be||Ve))||(delete he.spikecolor,delete he.spikethickness,delete he.spikedash,delete he.spikemode,delete he.spikesnap);var Ze=l(fe.overlaying),rt=[0,1];if(y[Ze]!==void 0){var it=l(y[Ze].anchor);y[it]!==void 0&&(rt=y[it].domain)}n(fe,he,me,{letter:ce,counterAxes:oe[ce],overlayableAxes:ge(ce,se),grid:y.grid,overlayingDomain:rt}),me("title.standoff"),_e(),he._input=fe}for(b=0;b<Se.length;){ae=Se[b++],ce=(se=l(ae)).charAt(0),M.isPlainObject(g[se])||(g[se]={}),fe=g[se],he=_.newContainer(y,se,ce+"axis"),ye();var dt={letter:ce,font:y.font,outerTicks:N[se],showGrid:!W[se],data:[],bgColor:ve,calendar:y.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ce]||{})[ae]};me("uirevision",y.uirevision),he.type=de[ae]||"linear",i(fe,he,me,dt,y),n(fe,he,me,{letter:ce,counterAxes:oe[ce],overlayableAxes:ge(ce,se),grid:y.grid}),me("fixedrange"),_e(),he._input=fe}var vt=d("rangeslider","handleDefaults"),ht=d("rangeselector","handleDefaults");for(b=0;b<K.length;b++)se=K[b],fe=g[se],he=y[se],vt(g,y,se),he.type==="date"&&ht(fe,he,y,X,he.calendar),me("fixedrange");for(b=0;b<X.length;b++){se=X[b],fe=g[se],he=y[se];var Qe=y[l(he.anchor)];me("fixedrange",d("rangeslider","isVisible")(Qe))}r.handleDefaults(g,y,{axIds:ie.concat(Se).sort(a.idSort),axHasImage:I})}},42136:function(ee,R,e){var M=e(49760).mix,k=e(22548),o=e(3400);ee.exports=function(T,_,p,s){var t=(s=s||{}).dfltColor;function i(g,y){return o.coerce2(T,_,s.attributes,g,y)}var r=i("linecolor",t),n=i("linewidth");p("showline",s.showLine||!!r||!!n)||(delete _.linecolor,delete _.linewidth);var a=i("gridcolor",M(t,s.bgColor,s.blend||k.lightFraction).toRgbString()),l=i("gridwidth"),u=i("griddash");if(p("showgrid",s.showGrid||!!a||!!l||!!u)||(delete _.gridcolor,delete _.gridwidth,delete _.griddash),s.hasMinor){var h=i("minor.gridcolor",M(_.gridcolor,s.bgColor,67).toRgbString()),c=i("minor.gridwidth",_.gridwidth||1),x=i("minor.griddash",_.griddash||"solid");p("minor.showgrid",!!h||!!c||!!x)||(delete _.minor.gridcolor,delete _.minor.gridwidth,delete _.minor.griddash)}if(!s.noZeroLine){var d=i("zerolinecolor",t),v=i("zerolinewidth");p("zeroline",s.showGrid||!!d||!!v)||(delete _.zerolinecolor,delete _.zerolinewidth)}}},37668:function(ee,R,e){var M=e(38248),k=e(3400);ee.exports=function(o,T,_,p){var s,t,i,r,n,a,l=p.counterAxes||[],u=p.overlayableAxes||[],h=p.letter,c=p.grid,x=p.overlayingDomain;c&&(t=c._domains[h][c._axisMap[T._id]],s=c._anchors[T._id],t&&(i=c[h+"side"].split(" ")[0],r=c.domain[h][i==="right"||i==="top"?1:0])),t=t||[0,1],s=s||(M(o.position)?"free":l[0]||"free"),i=i||(h==="x"?"bottom":"left"),r=r||0,n=0,a=!1;var d=k.coerce(o,T,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:s}},"anchor"),v=k.coerce(o,T,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");d==="free"&&(h==="y"&&(_("autoshift")&&(r=v==="left"?x[0]:x[1],a=!T.automargin||T.automargin,n=v==="left"?-3:3),_("shift",n)),_("position",r)),_("automargin",a);var g=!1;if(u.length&&(g=k.coerce(o,T,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!g){var y=_("domain",t);y[0]>y[1]-.000244140625&&(T.domain=t),k.noneOrAll(o.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return _("layer"),T}},42568:function(ee,R,e){var M=e(85024);ee.exports=function(k,o,T,_,p){p||(p={});var s=p.tickSuffixDflt,t=M(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},96312:function(ee,R,e){var M=e(76808);ee.exports=function(k,o,T,_){var p=o._template||{},s=o.type||p.type||"-";T("minallowed"),T("maxallowed");var t,i=T("range");i||_.noInsiderange||s==="log"||(!(t=T("insiderange"))||t[0]!==null&&t[1]!==null||(o.insiderange=!1,t=void 0),t&&(i=T("range",t)));var r,n=o.getAutorangeDflt(i,_),a=T("autorange",n);!i||(i[0]!==null||i[1]!==null)&&(i[0]!==null&&i[1]!==null||a!=="reversed"&&a!==!0)&&(i[0]===null||a!=="min"&&a!=="max reversed")&&(i[1]===null||a!=="max"&&a!=="min reversed")||(i=void 0,delete o.range,o.autorange=!0,r=!0),r||(a=T("autorange",n=o.getAutorangeDflt(i,_))),a&&(M(T,a,i),s!=="linear"&&s!=="-"||T("rangemode")),o.cleanRange()}},21160:function(ee,R,e){var M=e(84284).FROM_BL;ee.exports=function(k,o,T){T===void 0&&(T=M[k.constraintoward||"center"]);var _=[k.r2l(k.range[0]),k.r2l(k.range[1])],p=_[0]+(_[1]-_[0])*T;k.range=k._input.range=[k.l2r(p+(_[0]-p)*o),k.l2r(p+(_[1]-p)*o)],k.setScale()}},78344:function(ee,R,e){var M=e(33428),k=e(94336).E9,o=e(3400),T=o.numberFormat,_=e(38248),p=o.cleanNumber,s=o.ms2DateTime,t=o.dateTime2ms,i=o.ensureNumber,r=o.isArrayOrTypedArray,n=e(39032),a=n.FP_SAFE,l=n.BADNUM,u=n.LOG_CLIP,h=n.ONEWEEK,c=n.ONEDAY,x=n.ONEHOUR,d=n.ONEMIN,v=n.ONESEC,g=e(79811),y=e(33816),m=y.HOUR_PATTERN,b=y.WEEKDAY_PATTERN;function f(w){return Math.pow(10,w)}function S(w){return w!=null}ee.exports=function(w,E){E=E||{};var O=w._id||"x",C=O.charAt(0);function P(Y,re){if(Y>0)return Math.log(Y)/Math.LN10;if(Y<=0&&re&&w.range&&w.range.length===2){var se=w.range[0],ae=w.range[1];return .5*(se+ae-2*u*Math.abs(se-ae))}return l}function D(Y,re,se,ae){if((ae||{}).msUTC&&_(Y))return+Y;var ce=t(Y,se||w.calendar);if(ce===l){if(!_(Y))return l;Y=+Y;var fe=Math.floor(10*o.mod(Y+.05,1)),he=Math.round(Y-fe/10);ce=t(new Date(he))+fe/10}return ce}function U(Y,re,se){return s(Y,re,se||w.calendar)}function I(Y){return w._categories[Math.round(Y)]}function N(Y){if(S(Y)){if(w._categoriesMap===void 0&&(w._categoriesMap={}),w._categoriesMap[Y]!==void 0)return w._categoriesMap[Y];w._categories.push(typeof Y=="number"?String(Y):Y);var re=w._categories.length-1;return w._categoriesMap[Y]=re,re}return l}function W(Y){if(w._categoriesMap)return w._categoriesMap[Y]}function F(Y){var re=W(Y);return re!==void 0?re:_(Y)?+Y:void 0}function j(Y){return _(Y)?+Y:W(Y)}function H(Y,re,se){return M.round(se+re*Y,2)}function te(Y,re,se){return(Y-se)/re}var Q=function(Y){return _(Y)?H(Y,w._m,w._b):l},$=function(Y){return te(Y,w._m,w._b)};if(w.rangebreaks){var K=C==="y";Q=function(Y){if(!_(Y))return l;var re=w._rangebreaks.length;if(!re)return H(Y,w._m,w._b);var se=K;w.range[0]>w.range[1]&&(se=!se);for(var ae=se?-1:1,ce=ae*Y,fe=0,he=0;he<re;he++){var ve=ae*w._rangebreaks[he].min,ye=ae*w._rangebreaks[he].max;if(ce<ve)break;if(!(ce>ye)){fe=ce<(ve+ye)/2?he:he+1;break}fe=he+1}var me=w._B[fe]||0;return isFinite(me)?H(Y,w._m2,me):0},$=function(Y){var re=w._rangebreaks.length;if(!re)return te(Y,w._m,w._b);for(var se=0,ae=0;ae<re&&!(Y<w._rangebreaks[ae].pmin);ae++)Y>w._rangebreaks[ae].pmax&&(se=ae+1);return te(Y,w._m2,w._B[se])}}w.c2l=w.type==="log"?P:i,w.l2c=w.type==="log"?f:i,w.l2p=Q,w.p2l=$,w.c2p=w.type==="log"?function(Y,re){return Q(P(Y,re))}:Q,w.p2c=w.type==="log"?function(Y){return f($(Y))}:$,["linear","-"].indexOf(w.type)!==-1?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=p,w.c2d=w.c2r=w.l2d=w.l2r=i,w.d2p=w.r2p=function(Y){return w.l2p(p(Y))},w.p2d=w.p2r=$,w.cleanPos=i):w.type==="log"?(w.d2r=w.d2l=function(Y,re){return P(p(Y),re)},w.r2d=w.r2c=function(Y){return f(p(Y))},w.d2c=w.r2l=p,w.c2d=w.l2r=i,w.c2r=P,w.l2d=f,w.d2p=function(Y,re){return w.l2p(w.d2r(Y,re))},w.p2d=function(Y){return f($(Y))},w.r2p=function(Y){return w.l2p(p(Y))},w.p2r=$,w.cleanPos=i):w.type==="date"?(w.d2r=w.r2d=o.identity,w.d2c=w.r2c=w.d2l=w.r2l=D,w.c2d=w.c2r=w.l2d=w.l2r=U,w.d2p=w.r2p=function(Y,re,se){return w.l2p(D(Y,0,se))},w.p2d=w.p2r=function(Y,re,se){return U($(Y),re,se)},w.cleanPos=function(Y){return o.cleanDate(Y,l,w.calendar)}):w.type==="category"?(w.d2c=w.d2l=N,w.r2d=w.c2d=w.l2d=I,w.d2r=w.d2l_noadd=F,w.r2c=function(Y){var re=j(Y);return re!==void 0?re:w.fraction2r(.5)},w.l2r=w.c2r=i,w.r2l=j,w.d2p=function(Y){return w.l2p(w.r2c(Y))},w.p2d=function(Y){return I($(Y))},w.r2p=w.d2p,w.p2r=$,w.cleanPos=function(Y){return typeof Y=="string"&&Y!==""?Y:i(Y)}):w.type==="multicategory"&&(w.r2d=w.c2d=w.l2d=I,w.d2r=w.d2l_noadd=F,w.r2c=function(Y){var re=F(Y);return re!==void 0?re:w.fraction2r(.5)},w.r2c_just_indices=W,w.l2r=w.c2r=i,w.r2l=F,w.d2p=function(Y){return w.l2p(w.r2c(Y))},w.p2d=function(Y){return I($(Y))},w.r2p=w.d2p,w.p2r=$,w.cleanPos=function(Y){return Array.isArray(Y)||typeof Y=="string"&&Y!==""?Y:i(Y)},w.setupMultiCategory=function(Y){var re,se,ae=w._traceIndices,ce=w._matchGroup;if(ce&&w._categories.length===0){for(var fe in ce)if(fe!==O){var he=E[g.id2name(fe)];ae=ae.concat(he._traceIndices)}}var ve=[[0,{}],[0,{}]],ye=[];for(re=0;re<ae.length;re++){var me=Y[ae[re]];if(C in me){var Me=me[C],Pe=me._length||o.minRowLength(Me);if(r(Me[0])&&r(Me[1]))for(se=0;se<Pe;se++){var ge=Me[0][se],oe=Me[1][se];S(ge)&&S(oe)&&(ye.push([ge,oe]),ge in ve[0][1]||(ve[0][1][ge]=ve[0][0]++),oe in ve[1][1]||(ve[1][1][oe]=ve[1][0]++))}}}for(ye.sort(function(ie,de){var Se=ve[0][1],_e=Se[ie[0]]-Se[de[0]];if(_e)return _e;var we=ve[1][1];return we[ie[1]]-we[de[1]]}),re=0;re<ye.length;re++)N(ye[re])}),w.fraction2r=function(Y){var re=w.r2l(w.range[0]),se=w.r2l(w.range[1]);return w.l2r(re+Y*(se-re))},w.r2fraction=function(Y){var re=w.r2l(w.range[0]),se=w.r2l(w.range[1]);return(w.r2l(Y)-re)/(se-re)},w.limitRange=function(Y){var re=w.minallowed,se=w.maxallowed;if(re!==void 0||se!==void 0){Y||(Y="range");var ae=o.nestedProperty(w,Y).get(),ce=o.simpleMap(ae,w.r2l),fe=ce[1]<ce[0];fe&&ce.reverse();var he=o.simpleMap([re,se],w.r2l);if(re!==void 0&&ce[0]<he[0]&&(ae[fe?1:0]=re),se!==void 0&&ce[1]>he[1]&&(ae[fe?0:1]=se),ae[0]===ae[1]){var ve=w.l2r(re),ye=w.l2r(se);if(re!==void 0){var me=ve+1;se!==void 0&&(me=Math.min(me,ye)),ae[fe?1:0]=me}if(se!==void 0){var Me=ye+1;re!==void 0&&(Me=Math.max(Me,ve)),ae[fe?0:1]=Me}}}},w.cleanRange=function(Y,re){w._cleanRange(Y,re),w.limitRange(Y)},w._cleanRange=function(Y,re){re||(re={}),Y||(Y="range");var se,ae,ce=o.nestedProperty(w,Y).get();if(ae=(ae=w.type==="date"?o.dfltRange(w.calendar):C==="y"?y.DFLTRANGEY:w._name==="realaxis"?[0,1]:re.dfltRange||y.DFLTRANGEX).slice(),w.rangemode!=="tozero"&&w.rangemode!=="nonnegative"||(ae[0]=0),ce&&ce.length===2){var fe=ce[0]===null,he=ce[1]===null;for(w.type!=="date"||w.autorange||(ce[0]=o.cleanDate(ce[0],l,w.calendar),ce[1]=o.cleanDate(ce[1],l,w.calendar)),se=0;se<2;se++)if(w.type==="date"){if(!o.isDateTime(ce[se],w.calendar)){w[Y]=ae;break}if(w.r2l(ce[0])===w.r2l(ce[1])){var ve=o.constrain(w.r2l(ce[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);ce[0]=w.l2r(ve-1e3),ce[1]=w.l2r(ve+1e3);break}}else{if(!_(ce[se])){if(fe||he||!_(ce[1-se])){w[Y]=ae;break}ce[se]=ce[1-se]*(se?10:.1)}if(ce[se]<-a?ce[se]=-a:ce[se]>a&&(ce[se]=a),ce[0]===ce[1]){var ye=Math.max(1,Math.abs(1e-6*ce[0]));ce[0]-=ye,ce[1]+=ye}}}else o.nestedProperty(w,Y).set(ae)},w.setScale=function(Y){var re=E._size;if(w.overlaying){var se=g.getFromId({_fullLayout:E},w.overlaying);w.domain=se.domain}var ae=Y&&w._r?"_r":"range",ce=w.calendar;w.cleanRange(ae);var fe,he,ve=w.r2l(w[ae][0],ce),ye=w.r2l(w[ae][1],ce),me=C==="y";if(me?(w._offset=re.t+(1-w.domain[1])*re.h,w._length=re.h*(w.domain[1]-w.domain[0]),w._m=w._length/(ve-ye),w._b=-w._m*ye):(w._offset=re.l+w.domain[0]*re.w,w._length=re.w*(w.domain[1]-w.domain[0]),w._m=w._length/(ye-ve),w._b=-w._m*ve),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(ve,ye),Math.max(ve,ye)),w._rangebreaks.length)){for(fe=0;fe<w._rangebreaks.length;fe++)he=w._rangebreaks[fe],w._lBreaks+=Math.abs(he.max-he.min);var Me=me;ve>ye&&(Me=!Me),Me&&w._rangebreaks.reverse();var Pe=Me?-1:1;for(w._m2=Pe*w._length/(Math.abs(ye-ve)-w._lBreaks),w._B.push(-w._m2*(me?ye:ve)),fe=0;fe<w._rangebreaks.length;fe++)he=w._rangebreaks[fe],w._B.push(w._B[w._B.length-1]-Pe*w._m2*(he.max-he.min));for(fe=0;fe<w._rangebreaks.length;fe++)(he=w._rangebreaks[fe]).pmin=Q(he.min),he.pmax=Q(he.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function(Y){var re,se,ae,ce,fe,he=w.rangebreaks||[];he._cachedPatterns||(he._cachedPatterns=he.map(function(ge){return ge.enabled&&ge.bounds?o.simpleMap(ge.bounds,ge.pattern?p:w.d2c):null})),he._cachedValues||(he._cachedValues=he.map(function(ge){return ge.enabled&&ge.values?o.simpleMap(ge.values,w.d2c).sort(o.sorterAsc):null}));for(var ve=0;ve<he.length;ve++){var ye=he[ve];if(ye.enabled){if(ye.bounds){var me=ye.pattern;switch(se=(re=he._cachedPatterns[ve])[0],ae=re[1],me){case b:ce=(fe=new Date(Y)).getUTCDay(),se>ae&&(ae+=7,ce<se&&(ce+=7));break;case m:ce=(fe=new Date(Y)).getUTCHours()+(fe.getUTCMinutes()/60+fe.getUTCSeconds()/3600+fe.getUTCMilliseconds()/36e5),se>ae&&(ae+=24,ce<se&&(ce+=24));break;case"":ce=Y}if(ce>=se&&ce<ae)return l}else for(var Me=he._cachedValues[ve],Pe=0;Pe<Me.length;Pe++)if(ae=(se=Me[Pe])+ye.dvalue,Y>=se&&Y<ae)return l}}return Y},w.locateBreaks=function(Y,re){var se,ae,ce,fe,he=[];if(!w.rangebreaks)return he;var ve=w.rangebreaks.slice().sort(function(we,Ae){return we.pattern===b&&Ae.pattern===m?-1:Ae.pattern===b&&we.pattern===m?1:0}),ye=function(we,Ae){if((we=o.constrain(we,Y,re))!==(Ae=o.constrain(Ae,Y,re))){for(var Oe=!0,ze=0;ze<he.length;ze++){var pe=he[ze];we<pe.max&&Ae>=pe.min&&(we<pe.min&&(pe.min=we),Ae>pe.max&&(pe.max=Ae),Oe=!1)}Oe&&he.push({min:we,max:Ae})}};for(se=0;se<ve.length;se++){var me=ve[se];if(me.enabled)if(me.bounds){var Me=Y,Pe=re;me.pattern&&(Me=Math.floor(Me)),ce=(ae=o.simpleMap(me.bounds,me.pattern?p:w.r2l))[0],fe=ae[1];var ge,oe,ie=new Date(Me);switch(me.pattern){case b:oe=h,ge=(fe-ce+(fe<ce?7:0))*c,Me+=ce*c-(ie.getUTCDay()*c+ie.getUTCHours()*x+ie.getUTCMinutes()*d+ie.getUTCSeconds()*v+ie.getUTCMilliseconds());break;case m:oe=c,ge=(fe-ce+(fe<ce?24:0))*x,Me+=ce*x-(ie.getUTCHours()*x+ie.getUTCMinutes()*d+ie.getUTCSeconds()*v+ie.getUTCMilliseconds());break;default:Me=Math.min(ae[0],ae[1]),ge=oe=(Pe=Math.max(ae[0],ae[1]))-Me}for(var de=Me;de<Pe;de+=oe)ye(de,de+ge)}else for(var Se=o.simpleMap(me.values,w.d2c),_e=0;_e<Se.length;_e++)ye(ce=Se[_e],fe=ce+me.dvalue)}return he.sort(function(we,Ae){return we.min-Ae.min}),he},w.makeCalcdata=function(Y,re,se){var ae,ce,fe,he,ve=w.type,ye=ve==="date"&&Y[re+"calendar"];if(re in Y){if(ae=Y[re],he=Y._length||o.minRowLength(ae),o.isTypedArray(ae)&&(ve==="linear"||ve==="log")){if(he===ae.length)return ae;if(ae.subarray)return ae.subarray(0,he)}if(ve==="multicategory")return function(Pe,ge){for(var oe=new Array(ge),ie=0;ie<ge;ie++){var de=(Pe[0]||[])[ie],Se=(Pe[1]||[])[ie];oe[ie]=W([de,Se])}return oe}(ae,he);for(ce=new Array(he),fe=0;fe<he;fe++)ce[fe]=w.d2c(ae[fe],0,ye,se)}else{var me=re+"0"in Y?w.d2c(Y[re+"0"],0,ye):0,Me=Y["d"+re]?Number(Y["d"+re]):1;for(ae=Y[{x:"y",y:"x"}[re]],he=Y._length||ae.length,ce=new Array(he),fe=0;fe<he;fe++)ce[fe]=me+fe*Me}if(w.rangebreaks)for(fe=0;fe<he;fe++)ce[fe]=w.maskBreaks(ce[fe]);return ce},w.isValidRange=function(Y,re){return Array.isArray(Y)&&Y.length===2&&(re&&Y[0]===null||_(w.r2l(Y[0])))&&(re&&Y[1]===null||_(w.r2l(Y[1])))},w.getAutorangeDflt=function(Y,re){var se=!w.isValidRange(Y,"nullOk");return se&&re&&re.reverseDflt?se="reversed":Y&&(Y[0]===null&&Y[1]===null?se=!0:Y[0]===null&&Y[1]!==null?se="min":Y[0]!==null&&Y[1]===null&&(se="max")),se},w.isReversed=function(){var Y=w.autorange;return Y==="reversed"||Y==="min reversed"||Y==="max reversed"},w.isPtWithinRange=function(Y,re){var se=w.c2l(Y[C],null,re),ae=w.r2l(w.range[0]),ce=w.r2l(w.range[1]);return ae<ce?ae<=se&&se<=ce:ce<=se&&se<=ae},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var Y=w._matchGroup;if(Y){var re=null,se=null;for(var ae in Y){var ce=E[g.id2name(ae)];if(ce._categories){re=ce._categories,se=ce._categoriesMap;break}}re&&se?(w._categories=re,w._categoriesMap=se):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var fe=0;fe<w._initialCategories.length;fe++)N(w._initialCategories[fe])},w.sortByInitialCategories=function(){var Y=[];if(w._emptyCategories(),w._initialCategories)for(var re=0;re<w._initialCategories.length;re++)N(w._initialCategories[re]);Y=Y.concat(w._traceIndices);var se=w._matchGroup;for(var ae in se)if(O!==ae){var ce=E[g.id2name(ae)];ce._categories=w._categories,ce._categoriesMap=w._categoriesMap,Y=Y.concat(ce._traceIndices)}return Y};var X=E._d3locale;w.type==="date"&&(w._dateFormat=X?X.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=X?X.numberFormat:T,delete w._minDtick,delete w._forceTick0}},85024:function(ee){ee.exports=function(R){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return R[M]!==void 0});if(e.every(function(M){return R[M]===R[e[0]]})||e.length===1)return R[e[0]]}},95936:function(ee,R,e){var M=e(3400),k=e(76308).contrast,o=e(94724),T=e(85024),_=e(51272);function p(s,t){function i(r,n){return M.coerce(s,t,o.tickformatstops,r,n)}i("enabled")&&(i("dtickrange"),i("value"))}ee.exports=function(s,t,i,r,n){n||(n={});var a=i("labelalias");M.isPlainObject(a)||delete t.labelalias;var l=T(s);if(i("showticklabels")){var u=n.font||{},h=t.color,c=(t.ticklabelposition||"").indexOf("inside")!==-1?k(n.bgColor):h&&h!==o.color.dflt?h:u.color;if(M.coerceFont(i,"tickfont",u,{overrideDflt:{color:c}}),n.noTicklabelstep||r==="multicategory"||r==="log"||i("ticklabelstep"),!n.noAng){var x=i("tickangle");n.noAutotickangles||x!=="auto"||i("autotickangles")}if(r!=="category"){var d=i("tickformat");_(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||d||r==="date"||(i("showexponent",l),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(ee,R,e){var M=e(3400),k=e(94724);ee.exports=function(o,T,_,p){var s=p.isMinor,t=s?o.minor||{}:o,i=s?T.minor:T,r=s?k.minor:k,n=s?"minor.":"",a=M.coerce2(t,i,r,"ticklen",s?.6*(T.ticklen||5):void 0),l=M.coerce2(t,i,r,"tickwidth",s?T.tickwidth||1:void 0),u=M.coerce2(t,i,r,"tickcolor",(s?T.tickcolor:void 0)||i.color);_(n+"ticks",!s&&p.outerTicks||a||l||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26332:function(ee,R,e){var M=e(98728),k=e(3400).isArrayOrTypedArray,o=e(38116).isTypedArraySpec,T=e(38116).decodeTypedArraySpec;ee.exports=function(_,p,s,t,i){i||(i={});var r=i.isMinor,n=r?_.minor||{}:_,a=r?p.minor:p,l=r?"minor.":"";function u(g){var y=n[g];return o(y)&&(y=T(y)),y!==void 0?y:(a._template||{})[g]}var h=u("tick0"),c=u("dtick"),x=u("tickvals"),d=s(l+"tickmode",k(x)?"array":c?"linear":"auto");if(d==="auto"||d==="sync")s(l+"nticks");else if(d==="linear"){var v=a.dtick=M.dtick(c,t);a.tick0=M.tick0(h,t,p.calendar,v)}else t!=="multicategory"&&(s(l+"tickvals")===void 0?a.tickmode="auto":r||s("ticktext"))}},73736:function(ee,R,e){var M=e(33428),k=e(24040),o=e(3400),T=e(43616),_=e(54460);ee.exports=function(p,s,t,i){var r=p._fullLayout;if(s.length!==0){var n,a,l,u;i&&(n=i());var h=M.ease(t.easing);return p._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var d={},v=0;v<s.length;v++){var g=s[v],y=g.plotinfo.xaxis,m=g.plotinfo.yaxis;g.xr0&&(d[y._name+".range"]=g.xr0.slice()),g.yr0&&(d[m._name+".range"]=g.yr0.slice())}return k.call("relayout",p,d).then(function(){for(var b=0;b<s.length;b++)c(s[b].plotinfo)})}()}),a=Date.now(),u=window.requestAnimationFrame(function d(){l=Date.now();for(var v=Math.min(1,(l-a)/t.duration),g=h(v),y=0;y<s.length;y++)x(s[y],g);l-a>t.duration?(function(){for(var m={},b=0;b<s.length;b++){var f=s[b],S=f.plotinfo.xaxis,w=f.plotinfo.yaxis;f.xr1&&(m[S._name+".range"]=f.xr1.slice()),f.yr1&&(m[w._name+".range"]=f.yr1.slice())}n&&n(),k.call("relayout",p,m).then(function(){for(var E=0;E<s.length;E++)c(s[E].plotinfo)})}(),u=window.cancelAnimationFrame(d)):u=window.requestAnimationFrame(d)}),Promise.resolve()}function c(d){var v=d.xaxis,g=d.yaxis;r._defs.select("#"+d.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),d.plot.call(T.setTranslate,v._offset,g._offset).call(T.setScale,1,1);var y=d.plot.selectAll(".scatterlayer .trace");y.selectAll(".point").call(T.setPointGroupScale,1,1),y.selectAll(".textpoint").call(T.setTextPointsScale,1,1),y.call(T.hideOutsideRangePoints,d)}function x(d,v){var g=d.plotinfo,y=g.xaxis,m=g.yaxis,b=y._length,f=m._length,S=!!d.xr1,w=!!d.yr1,E=[];if(S){var O=o.simpleMap(d.xr0,y.r2l),C=o.simpleMap(d.xr1,y.r2l),P=O[1]-O[0],D=C[1]-C[0];E[0]=(O[0]*(1-v)+v*C[0]-O[0])/(O[1]-O[0])*b,E[2]=b*(1-v+v*D/P),y.range[0]=y.l2r(O[0]*(1-v)+v*C[0]),y.range[1]=y.l2r(O[1]*(1-v)+v*C[1])}else E[0]=0,E[2]=b;if(w){var U=o.simpleMap(d.yr0,m.r2l),I=o.simpleMap(d.yr1,m.r2l),N=U[1]-U[0],W=I[1]-I[0];E[1]=(U[1]*(1-v)+v*I[1]-U[1])/(U[0]-U[1])*f,E[3]=f*(1-v+v*W/N),m.range[0]=y.l2r(U[0]*(1-v)+v*I[0]),m.range[1]=m.l2r(U[1]*(1-v)+v*I[1])}else E[1]=0,E[3]=f;_.drawOne(p,y,{skipTitle:!0}),_.drawOne(p,m,{skipTitle:!0}),_.redrawComponents(p,[y._id,m._id]);var F=S?b/E[2]:1,j=w?f/E[3]:1,H=S?E[0]:0,te=w?E[1]:0,Q=S?E[0]/E[2]*b:0,$=w?E[1]/E[3]*f:0,K=y._offset-Q,X=m._offset-$;g.clipRect.call(T.setTranslate,H,te).call(T.setScale,1/F,1/j),g.plot.call(T.setTranslate,K,X).call(T.setScale,F,j),T.setPointGroupScale(g.zoomScalePts,1/F,1/j),T.setTextPointsScale(g.zoomScaleTxt,1/F,1/j)}_.redrawComponents(p)}},14944:function(ee,R,e){var M=e(24040).traceIs,k=e(52976);function o(_){return{v:"x",h:"y"}[_.orientation||"v"]}function T(_,p){var s=o(_),t=M(_,"box-violin"),i=M(_._fullInput||{},"candlestick");return t&&!i&&p===s&&_[s]===void 0&&_[s+"0"]===void 0}ee.exports=function(_,p,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(i,r){if(i.type==="-"){var n,a=i._id,l=a.charAt(0);a.indexOf("scene")!==-1&&(a=l);var u=function(m,b,f){for(var S=0;S<m.length;S++){var w=m[S];if(w.type==="splom"&&w._length>0&&(w["_"+f+"axes"]||{})[b]||(w[f+"axis"]||f)===b&&(T(w,f)||(w[f]||[]).length||w[f+"0"]))return w}}(r,a,l);if(u)if(u.type!=="histogram"||l!=={v:"y",h:"x"}[u.orientation||"v"]){var h=l+"calendar",c=u[h],x={noMultiCategory:!M(u,"cartesian")||M(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&l==={h:"x",v:"y"}[u.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=i.autotypenumbers,T(u,l)){var d=o(u),v=[];for(n=0;n<r.length;n++){var g=r[n];M(g,"box-violin")&&(g[l+"axis"]||l)===a&&(g[d]!==void 0?v.push(g[d][0]):g.name!==void 0?v.push(g.name):v.push("text"),g[h]!==c&&(c=void 0))}i.type=k(v,c,x)}else if(u.type==="splom"){var y=u.dimensions[u._axesDim[a]];y.visible&&(i.type=k(y.values,c,x))}else i.type=k(u[l]||[u[l+"0"]],c,x)}else i.type="linear"}}(p,t.data),p.type==="-"?p.type="linear":_.type=p.type)}},62460:function(ee,R,e){var M=e(24040),k=e(3400);function o(s,t,i){var r,n,a,l=!1;if(t.type==="data")r=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;r=s._fullLayout}return n=k.nestedProperty(r,t.prop).get(),(a=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==n&&(l=!0),a[t.prop]=n,{changed:l,value:n}}function T(s,t){var i=[],r=t[0],n={};if(typeof r=="string")n[r]=t[1];else{if(!k.isPlainObject(r))return i;n=r}return p(n,function(a,l,u){i.push({type:"layout",prop:a,value:u})},"",0),i}function _(s,t){var i,r,n,a,l=[];if(r=t[0],n=t[1],i=t[2],a={},typeof r=="string")a[r]=n;else{if(!k.isPlainObject(r))return l;a=r,i===void 0&&(i=n)}return i===void 0&&(i=null),p(a,function(u,h,c){var x,d;if(Array.isArray(c)){d=c.slice();var v=Math.min(d.length,s.data.length);i&&(v=Math.min(v,i.length)),x=[];for(var g=0;g<v;g++)x[g]=i?i[g]:g}else d=c,x=i?i.slice():null;if(x===null)Array.isArray(d)&&(d=d[0]);else if(Array.isArray(x)){if(!Array.isArray(d)){var y=d;d=[];for(var m=0;m<x.length;m++)d[m]=y}d.length=Math.min(x.length,d.length)}l.push({type:"data",prop:u,traces:x,value:d})},"",0),l}function p(s,t,i,r){Object.keys(s).forEach(function(n){var a=s[n];if(n[0]!=="_"){var l=i+(r>0?".":"")+n;k.isPlainObject(a)?p(a,t,l,r+1):t(l,n,a)}})}R.manageCommandObserver=function(s,t,i,r){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var l=R.hasSimpleAPICommandBindings(s,i,n.lookupTable);if(t&&t._commandObserver){if(l)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(l){o(s,l,n.cache),n.check=function(){if(a){var c=o(s,l,n.cache);return c.changed&&r&&n.lookupTable[c.value]!==void 0&&(n.disable(),Promise.resolve(r({value:c.value,type:l.type,prop:l.prop,traces:l.traces,index:n.lookupTable[c.value]})).then(n.enable,n.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<u.length;h++)s._internalOn(u[h],n.check);n.remove=function(){for(var c=0;c<u.length;c++)s._removeInternalListener(u[c],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n},R.hasSimpleAPICommandBindings=function(s,t,i){var r,n,a=t.length;for(r=0;r<a;r++){var l,u=t[r],h=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!h)return!1;var x=R.computeAPICommandBindings(s,h,c);if(x.length!==1)return!1;if(n){if((l=x[0]).type!==n.type||l.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var d=0;d<n.traces.length;d++)if(n.traces[d]!==l.traces[d])return!1}else if(l.prop!==n.prop)return!1}else n=x[0],Array.isArray(n.traces)&&n.traces.sort();var v=(l=x[0]).value;if(Array.isArray(v)){if(v.length!==1)return!1;v=v[0]}i&&(i[v]=r)}return n},R.executeAPICommand=function(s,t,i){if(t==="skip")return Promise.resolve();var r=M.apiMethodRegistry[t],n=[s];Array.isArray(i)||(i=[]);for(var a=0;a<i.length;a++)n.push(i[a]);return r.apply(null,n).catch(function(l){return k.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},R.computeAPICommandBindings=function(s,t,i){var r;switch(Array.isArray(i)||(i=[]),t){case"restyle":r=_(s,i);break;case"relayout":r=T(0,i);break;case"update":r=_(s,[i[0],i[2]]).concat(T(0,[i[1]]));break;case"animate":r=function(n,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,i);break;default:r=[]}return r}},86968:function(ee,R,e){var M=e(92880).extendFlat;R.u=function(k,o){o=o||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},_=(k.name&&k.name,k.trace,o.description&&o.description,{x:M({},T,{}),y:M({},T,{}),editType:k.editType});return k.noGridCell||(_.row={valType:"integer",min:0,dflt:0,editType:k.editType},_.column={valType:"integer",min:0,dflt:0,editType:k.editType}),_},R.Q=function(k,o,T,_){var p=_&&_.x||[0,1],s=_&&_.y||[0,1],t=o.grid;if(t){var i=T("domain.column");i!==void 0&&(i<t.columns?p=t._domains.x[i]:delete k.domain.column);var r=T("domain.row");r!==void 0&&(r<t.rows?s=t._domains.y[r]:delete k.domain.row)}var n=T("domain.x",p),a=T("domain.y",s);n[0]<n[1]||(k.domain.x=p.slice()),a[0]<a[1]||(k.domain.y=s.slice())}},25376:function(ee){ee.exports=function(R){var e=R.variantValues,M=R.editType,k=R.colorEditType;k===void 0&&(k=M);var o={editType:M,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};R.noNumericWeightValues&&(o.valType="enumerated",o.values=o.extras,o.extras=void 0,o.min=void 0,o.max=void 0);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:M},size:{valType:"number",min:1,editType:M},color:{valType:"color",editType:k},weight:o,style:{editType:M,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:R.noFontVariant?void 0:{editType:M,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:R.noFontTextcase?void 0:{editType:M,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:R.noFontLineposition?void 0:{editType:M,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:R.noFontShadow?void 0:{editType:M,valType:"string",dflt:R.autoShadowDflt?"auto":"none"},editType:M};return R.autoSize&&(T.size.dflt="auto"),R.autoColor&&(T.color.dflt="auto"),R.arrayOk&&(T.family.arrayOk=!0,T.weight.arrayOk=!0,T.style.arrayOk=!0,R.noFontVariant||(T.variant.arrayOk=!0),R.noFontTextcase||(T.textcase.arrayOk=!0),R.noFontLineposition||(T.lineposition.arrayOk=!0),R.noFontShadow||(T.shadow.arrayOk=!0),T.size.arrayOk=!0,T.color.arrayOk=!0),T}},16672:function(ee){ee.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(ee,R){R.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},R.axesNames=["lonaxis","lataxis"],R.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},R.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},R.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},R.clipPad=.001,R.precision=.1,R.landColor="#F0DC82",R.waterColor="#3399FF",R.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},R.sphereSVG={type:"Sphere"},R.fillLayers={ocean:1,land:1,lakes:1},R.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},R.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],R.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],R.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(ee,R,e){var M=e(33428),k=e(83356),o=k.geoPath,T=k.geoDistance,_=e(87108),p=e(24040),s=e(3400),t=s.strTranslate,i=e(76308),r=e(43616),n=e(93024),a=e(7316),l=e(54460),u=e(19280).getAutoRange,h=e(86476),c=e(22676).prepSelect,x=e(22676).clearOutline,d=e(22676).selectOnClick,v=e(79248),g=e(79552),y=e(27144),m=e(59972),b=e(55712).NO;function f(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=f.prototype;function w(E,O){var C=g.clipPad,P=E[0]+C,D=E[1]-C,U=O[0]+C,I=O[1]-C;P>0&&D<0&&(D+=360);var N=(D-P)/4;return{type:"Polygon",coordinates:[[[P,U],[P,I],[P+N,I],[P+2*N,I],[P+3*N,I],[D,I],[D,U],[D-N,U],[D-2*N,U],[D-3*N,U],[P,U]]]}}ee.exports=function(E){return new f(E)},S.plot=function(E,O,C,P){var D=this;if(P)return D.update(E,O,!0);D._geoCalcData=E,D._fullLayout=O;var U=O[this.id],I=[],N=!1;for(var W in g.layerNameToAdjective)if(W!=="frame"&&U["show"+W]){N=!0;break}for(var F=!1,j=0;j<E.length;j++){var H=E[0][0].trace;H._geo=D,H.locationmode&&(N=!0);var te=H.marker;if(te){var Q=te.angle,$=te.angleref;(Q||$==="north"||$==="previous")&&(F=!0)}}if(this._hasMarkerAngles=F,N){var K=m.getTopojsonName(U);D.topojson!==null&&K===D.topojsonName||(D.topojsonName=K,PlotlyGeoAssets.topojson[D.topojsonName]===void 0&&I.push(D.fetchTopojson()))}I=I.concat(y.fetchTraceGeoData(E)),C.push(new Promise(function(X,Y){Promise.all(I).then(function(){D.topojson=PlotlyGeoAssets.topojson[D.topojsonName],D.update(E,O),X()}).catch(Y)}))},S.fetchTopojson=function(){var E=this,O=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,P){M.json(O,function(D,U){if(D)return D.status===404?P(new Error(["plotly.js could not find topojson file at",O+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",O].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=U,C()})})},S.update=function(E,O,C){var P=O[this.id];this.hasChoropleth=!1;for(var D=0;D<E.length;D++){var U=E[D],I=U[0].trace;I.type==="choropleth"&&(this.hasChoropleth=!0),I.visible===!0&&I._length>0&&I._module.calcGeoJSON(U,O)}if(!C){if(this.updateProjection(E,O))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(O,P),this.updateDims(O,P),this.updateFx(O,P),a.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var W=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=W.selectAll("path"),this._render()},S.updateProjection=function(E,O){var C=this.graphDiv,P=O[this.id],D=O._size,U=P.domain,I=P.projection,N=P.lonaxis,W=P.lataxis,F=N._ax,j=W._ax,H=this.projection=function(ie){var de=ie.projection,Se=de.type,_e=g.projNames[Se];_e="geo"+s.titleCase(_e);for(var we=(k[_e]||_[_e])(),Ae=ie._isSatellite?180*Math.acos(1/de.distance)/Math.PI:ie._isClipped?g.lonaxisSpan[Se]/2:null,Oe=["center","rotate","parallels","clipExtent"],ze=function(ke){return ke?we:[]},pe=0;pe<Oe.length;pe++){var be=Oe[pe];typeof we[be]!="function"&&(we[be]=ze)}return we.isLonLatOverEdges=function(ke){if(we(ke)===null)return!0;if(Ae){var Ie=we.rotate();return T(ke,[-Ie[0],-Ie[1]])>Ae*Math.PI/180}return!1},we.getPath=function(){return o().projection(we)},we.getBounds=function(ke){return we.getPath().bounds(ke)},we.precision(g.precision),ie._isSatellite&&we.tilt(de.tilt).distance(de.distance),Ae&&we.clipAngle(Ae-g.clipPad),we}(P),te=[[D.l+D.w*U.x[0],D.t+D.h*(1-U.y[1])],[D.l+D.w*U.x[1],D.t+D.h*(1-U.y[0])]],Q=P.center||{},$=I.rotation||{},K=N.range||[],X=W.range||[];if(P.fitbounds){F._length=te[1][0]-te[0][0],j._length=te[1][1]-te[0][1],F.range=u(C,F),j.range=u(C,j);var Y=(F.range[0]+F.range[1])/2,re=(j.range[0]+j.range[1])/2;if(P._isScoped)Q={lon:Y,lat:re};else if(P._isClipped){Q={lon:Y,lat:re},$={lon:Y,lat:re,roll:$.roll};var se=I.type,ae=g.lonaxisSpan[se]/2||180,ce=g.lataxisSpan[se]/2||90;K=[Y-ae,Y+ae],X=[re-ce,re+ce]}else Q={lon:Y,lat:re},$={lon:Y,lat:$.lat,roll:$.roll}}H.center([Q.lon-$.lon,Q.lat-$.lat]).rotate([-$.lon,-$.lat,$.roll]).parallels(I.parallels);var fe=w(K,X);H.fitExtent(te,fe);var he=this.bounds=H.getBounds(fe),ve=this.fitScale=H.scale(),ye=H.translate();if(P.fitbounds){var me=H.getBounds(w(F.range,j.range)),Me=Math.min((he[1][0]-he[0][0])/(me[1][0]-me[0][0]),(he[1][1]-he[0][1])/(me[1][1]-me[0][1]));isFinite(Me)?H.scale(Me*ve):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else H.scale(I.scale*ve);var Pe=this.midPt=[(he[0][0]+he[1][0])/2,(he[0][1]+he[1][1])/2];if(H.translate([ye[0]+(Pe[0]-ye[0]),ye[1]+(Pe[1]-ye[1])]).clipExtent(he),P._isAlbersUsa){var ge=H([Q.lon,Q.lat]),oe=H.translate();H.translate([oe[0]-(ge[0]-oe[0]),oe[1]-(ge[1]-oe[1])])}},S.updateBaseLayers=function(E,O){var C=this,P=C.topojson,D=C.layers,U=C.basePaths;function I(H){return H==="lonaxis"||H==="lataxis"}function N(H){return!!g.lineLayers[H]}function W(H){return!!g.fillLayers[H]}var F=(this.hasChoropleth?g.layersForChoropleth:g.layers).filter(function(H){return N(H)||W(H)?O["show"+H]:!I(H)||O[H].showgrid}),j=C.framework.selectAll(".layer").data(F,String);j.exit().each(function(H){delete D[H],delete U[H],M.select(this).remove()}),j.enter().append("g").attr("class",function(H){return"layer "+H}).each(function(H){var te=D[H]=M.select(this);H==="bg"?C.bgRect=te.append("rect").style("pointer-events","all"):I(H)?U[H]=te.append("path").style("fill","none"):H==="backplot"?te.append("g").classed("choroplethlayer",!0):H==="frontplot"?te.append("g").classed("scatterlayer",!0):N(H)?U[H]=te.append("path").style("fill","none").style("stroke-miterlimit",2):W(H)&&(U[H]=te.append("path").style("stroke","none"))}),j.order(),j.each(function(H){var te=U[H],Q=g.layerNameToAdjective[H];H==="frame"?te.datum(g.sphereSVG):N(H)||W(H)?te.datum(b(P,P.objects[H])):I(H)&&te.datum(function($,K,X){var Y,re,se,ae=K[$],ce=g.scopeDefaults[K.scope];$==="lonaxis"?(Y=ce.lonaxisRange,re=ce.lataxisRange,se=function(oe,ie){return[oe,ie]}):$==="lataxis"&&(Y=ce.lataxisRange,re=ce.lonaxisRange,se=function(oe,ie){return[ie,oe]});var fe={type:"linear",range:[Y[0],Y[1]-1e-6],tick0:ae.tick0,dtick:ae.dtick};l.setConvert(fe,X);var he=l.calcTicks(fe);K.isScoped||$!=="lonaxis"||he.pop();for(var ve=he.length,ye=new Array(ve),me=0;me<ve;me++)for(var Me=he[me].x,Pe=ye[me]=[],ge=re[0];ge<re[1]+2.5;ge+=2.5)Pe.push(se(Me,ge));return{type:"MultiLineString",coordinates:ye}}(H,O,E)).call(i.stroke,O[H].gridcolor).call(r.dashLine,O[H].griddash,O[H].gridwidth),N(H)?te.call(i.stroke,O[Q+"color"]).call(r.dashLine,"",O[Q+"width"]):W(H)&&te.call(i.fill,O[Q+"color"])})},S.updateDims=function(E,O){var C=this.bounds,P=(O.framewidth||0)/2,D=C[0][0]-P,U=C[0][1]-P,I=C[1][0]-D+P,N=C[1][1]-U+P;r.setRect(this.clipRect,D,U,I,N),this.bgRect.call(r.setRect,D,U,I,N).call(i.fill,O.bgcolor),this.xaxis._offset=D,this.xaxis._length=I,this.yaxis._offset=U,this.yaxis._length=N},S.updateFx=function(E,O){var C=this,P=C.graphDiv,D=C.bgRect,U=E.dragmode,I=E.clickmode;if(!C.isStatic){var N={element:C.bgRect.node(),gd:P,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(F,j){j.isRect?(F.range={})[C.id]=[W([j.xmin,j.ymin]),W([j.xmax,j.ymax])]:(F.lassoPoints={})[C.id]=j.map(W)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(F){F===2&&x(P)}};U==="pan"?(D.node().onmousedown=null,D.call(v(C,O)),D.on("dblclick.zoom",function(){var F=C.viewInitial,j={};for(var H in F)j[C.id+"."+H]=F[H];p.call("_guiRelayout",P,j),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||D.on("wheel.zoom",null)):U!=="select"&&U!=="lasso"||(D.on(".zoom",null),N.prepFn=function(F,j,H){c(F,j,H,N,U)},h.init(N)),D.on("mousemove",function(){var F=C.projection.invert(s.getPositionFromD3Event());if(!F)return h.unhover(P,M.event);C.xaxis.p2c=function(){return F[0]},C.yaxis.p2c=function(){return F[1]},n.hover(P,M.event,C.id)}),D.on("mouseout",function(){P._dragging||h.unhover(P,M.event)}),D.on("click",function(){U!=="select"&&U!=="lasso"&&(I.indexOf("select")>-1&&d(M.event,P,[C.xaxis],[C.yaxis],C.id,N),I.indexOf("event")>-1&&n.click(P,M.event))})}function W(F){return C.projection.invert([F[0]+C.xaxis._offset,F[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,O=E.graphDiv,C=O._fullLayout,P="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=M.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,P,O),E.project=function(D){var U=E.projection(D);return U?[U[0]-E.xaxis._offset,U[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(D){return E.project(D)[0]}},E.yaxis={_id:"y",c2p:function(D){return E.project(D)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var O,C=E.center||{},P=E.projection,D=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},O=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":D.lon},s.extendFlat(this.viewInitial,O)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,O=this.projection,C=O.getPath();function P(U){var I=O(U.lonlat);return I?t(I[0],I[1]):null}function D(U){return O.isLonLatOverEdges(U.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(U){return C(U.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",D).attr("transform",P)}},10816:function(ee,R,e){var M=e(84888).KY,k=e(3400).counterRegex,o=e(43520),T="geo",_=k(T),p={};p[T]={valType:"subplotid",dflt:T,editType:"calc"},ee.exports={attr:T,name:T,idRoot:T,idRegex:_,attrRegex:_,attributes:p,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(s){for(var t=s._fullLayout,i=s.calcdata,r=t._subplots[T],n=0;n<r.length;n++){var a=r[n],l=M(i,T,a),u=t[a]._subplot;u||(u=o({id:a,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[a]._subplot=u),u.plot(l,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,i=t._subplots[T],r=0;r<i.length;r++){var n=t[i[r]];n._subplot.updateFx(t,n)}},clean:function(s,t,i,r){for(var n=r._subplots[T]||[],a=0;a<n.length;a++){var l=n[a],u=r[l]._subplot;!t[l]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},40384:function(ee,R,e){var M=e(22548),k=e(86968).u,o=e(98192).u,T=e(79552),_=e(67824).overrideAll,p=e(95376),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:o};(ee.exports=_({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:p(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:p(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(ee,R,e){var M=e(3400),k=e(168),o=e(84888).op,T=e(79552),_=e(40384),p=T.axesNames;function s(t,i,r,n){var a=o(n.fullData,"geo",n.id).map(function($){return $._expandedIndex}),l=r("resolution"),u=r("scope"),h=T.scopeDefaults[u],c=r("projection.type",h.projType),x=i._isAlbersUsa=c==="albers usa";x&&(u=i.scope="usa");var d=i._isScoped=u!=="world",v=i._isSatellite=c==="satellite",g=i._isConic=c.indexOf("conic")!==-1||c==="albers",y=i._isClipped=!!T.lonaxisSpan[c];if(t.visible===!1){var m=M.extendDeep({},i._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),i._template=m}for(var b=r("visible"),f=0;f<p.length;f++){var S,w=p[f],E=[30,10][f];if(d)S=h[w+"Range"];else{var O=T[w+"Span"],C=(O[c]||O["*"])/2,P=r("projection.rotation."+w.substr(0,3),h.projRotate[f]);S=[P-C,P+C]}var D=r(w+".range",S);r(w+".tick0"),r(w+".dtick",E),r(w+".showgrid",!!b&&void 0)&&(r(w+".gridcolor"),r(w+".gridwidth"),r(w+".griddash")),i[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:a,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var U=i.lonaxis.range,I=i.lataxis.range,N=U[0],W=U[1];N>0&&W<0&&(W+=360);var F,j,H,te=(N+W)/2;if(!x){var Q=d?h.projRotate:[te,0,0];F=r("projection.rotation.lon",Q[0]),r("projection.rotation.lat",Q[1]),r("projection.rotation.roll",Q[2]),r("showcoastlines",!d&&b)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!b&&void 0)&&r("oceancolor")}x?(j=-96.6,H=38.7):(j=d?te:F,H=(I[0]+I[1])/2),r("center.lon",j),r("center.lat",H),v&&(r("projection.tilt"),r("projection.distance")),g&&r("projection.parallels",h.projParallels||[0,60]),r("projection.scale"),r("showland",!!b&&void 0)&&r("landcolor"),r("showlakes",!!b&&void 0)&&r("lakecolor"),r("showrivers",!!b&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",d&&u!=="usa"&&b)&&(r("countrycolor"),r("countrywidth")),(u==="usa"||u==="north america"&&l===50)&&(r("showsubunits",b),r("subunitcolor"),r("subunitwidth")),d||r("showframe",b)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete i.projection.scale,d?(delete i.center.lon,delete i.center.lat):y?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}ee.exports=function(t,i,r){k(t,i,r,{type:"geo",attributes:_,handleDefaults:s,fullData:r,partition:"y"})}},79248:function(ee,R,e){var M=e(33428),k=e(3400),o=e(24040),T=Math.PI/180,_=180/Math.PI,p={cursor:"pointer"},s={cursor:"auto"};function t(d,v){return M.behavior.zoom().translate(v.translate()).scale(v.scale())}function i(d,v,g){var y=d.id,m=d.graphDiv,b=m.layout,f=b[y],S=m._fullLayout,w=S[y],E={},O={};function C(P,D){E[y+"."+P]=k.nestedProperty(f,P).get(),o.call("_storeDirectGUIEdit",b,S._preGUI,E);var U=k.nestedProperty(w,P);U.get()!==D&&(U.set(D),k.nestedProperty(f,P).set(D),O[y+"."+P]=D)}g(C),C("projection.scale",v.scale()/d.fitScale),C("fitbounds",!1),m.emit("plotly_relayout",O)}function r(d,v){var g=t(0,v);function y(m){var b=v.invert(d.midPt);m("center.lon",b[0]),m("center.lat",b[1])}return g.on("zoomstart",function(){M.select(this).style(p)}).on("zoom",function(){v.scale(M.event.scale).translate(M.event.translate),d.render(!0);var m=v.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":v.scale()/d.fitScale,"geo.center.lon":m[0],"geo.center.lat":m[1]})}).on("zoomend",function(){M.select(this).style(s),i(d,v,y)}),g}function n(d,v){var g,y,m,b,f,S,w,E,O,C=t(0,v);function P(U){return v.invert(U)}function D(U){var I=v.rotate(),N=v.invert(d.midPt);U("projection.rotation.lon",-I[0]),U("center.lon",N[0]),U("center.lat",N[1])}return C.on("zoomstart",function(){M.select(this).style(p),g=M.mouse(this),y=v.rotate(),m=v.translate(),b=y,f=P(g)}).on("zoom",function(){if(S=M.mouse(this),function(N){var W=P(N);if(!W)return!0;var F=v(W);return Math.abs(F[0]-N[0])>2||Math.abs(F[1]-N[1])>2}(g))return C.scale(v.scale()),void C.translate(v.translate());v.scale(M.event.scale),v.translate([m[0],M.event.translate[1]]),f?P(S)&&(E=P(S),w=[b[0]+(E[0]-f[0]),y[1],y[2]],v.rotate(w),b=w):f=P(g=S),O=!0,d.render(!0);var U=v.rotate(),I=v.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":v.scale()/d.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1],"geo.projection.rotation.lon":-U[0]})}).on("zoomend",function(){M.select(this).style(s),O&&i(d,v,D)}),C}function a(d,v){var g;v.rotate(),v.scale();var y=t(0,v),m=function(w){for(var E=0,O=arguments.length,C=[];++E<O;)C.push(arguments[E]);var P=M.dispatch.apply(null,C);return P.of=function(D,U){return function(I){var N;try{N=I.sourceEvent=M.event,I.target=w,M.event=I,P[I.type].apply(D,U)}finally{M.event=N}}},P}(y,"zoomstart","zoom","zoomend"),b=0,f=y.on;function S(w){var E=v.rotate();w("projection.rotation.lon",-E[0]),w("projection.rotation.lat",-E[1])}return y.on("zoomstart",function(){M.select(this).style(p);var w,E,O,C,P,D,U,I,N,W,F,j=M.mouse(this),H=v.rotate(),te=H,Q=v.translate(),$=(E=.5*(w=H)[0]*T,O=.5*w[1]*T,C=.5*w[2]*T,P=Math.sin(E),D=Math.cos(E),U=Math.sin(O),I=Math.cos(O),N=Math.sin(C),[D*I*(W=Math.cos(C))+P*U*N,P*I*W-D*U*N,D*U*W+P*I*N,D*I*N-P*U*W]);g=l(v,j),f.call(y,"zoom",function(){var K,X,Y,re,se,ae,ce,fe,he,ve,ye=M.mouse(this);if(v.scale(M.event.scale),g){if(l(v,ye)){v.rotate(H).translate(Q);var me=l(v,ye),Me=function(oe,ie){if(oe&&ie){var de=function(Ae,Oe){return[Ae[1]*Oe[2]-Ae[2]*Oe[1],Ae[2]*Oe[0]-Ae[0]*Oe[2],Ae[0]*Oe[1]-Ae[1]*Oe[0]]}(oe,ie),Se=Math.sqrt(x(de,de)),_e=.5*Math.acos(Math.max(-1,Math.min(1,x(oe,ie)))),we=Math.sin(_e)/Se;return Se&&[Math.cos(_e),de[2]*we,-de[1]*we,de[0]*we]}}(g,me),Pe=function(oe){return[Math.atan2(2*(oe[0]*oe[1]+oe[2]*oe[3]),1-2*(oe[1]*oe[1]+oe[2]*oe[2]))*_,Math.asin(Math.max(-1,Math.min(1,2*(oe[0]*oe[2]-oe[3]*oe[1]))))*_,Math.atan2(2*(oe[0]*oe[3]+oe[1]*oe[2]),1-2*(oe[2]*oe[2]+oe[3]*oe[3]))*_]}((Y=(K=$)[0],re=K[1],se=K[2],ae=K[3],[Y*(ce=(X=Me)[0])-re*(fe=X[1])-se*(he=X[2])-ae*(ve=X[3]),Y*fe+re*ce+se*ve-ae*he,Y*he-re*ve+se*ce+ae*fe,Y*ve+re*he-se*fe+ae*ce])),ge=function(oe,ie,de){var Se=c(ie,2,oe[0]);Se=c(Se,1,oe[1]),Se=c(Se,0,oe[2]-de[2]);var _e,we,Ae=ie[0],Oe=ie[1],ze=ie[2],pe=Se[0],be=Se[1],ke=Se[2],Ie=Math.atan2(Oe,Ae)*_,Ee=Math.sqrt(Ae*Ae+Oe*Oe);Math.abs(be)>Ee?(we=(be>0?90:-90)-Ie,_e=0):(we=Math.asin(be/Ee)*_-Ie,_e=Math.sqrt(Ee*Ee-be*be));var Be=180-we-2*Ie,Ve=(Math.atan2(ke,pe)-Math.atan2(ze,_e))*_,Ze=(Math.atan2(ke,pe)-Math.atan2(ze,-_e))*_;return u(de[0],de[1],we,Ve)<=u(de[0],de[1],Be,Ze)?[we,Ve,de[2]]:[Be,Ze,de[2]]}(Pe,g,te);isFinite(ge[0])&&isFinite(ge[1])&&isFinite(ge[2])||(ge=te),v.rotate(ge),te=ge}}else g=l(v,j=ye);m.of(this,arguments)({type:"zoom"})}),F=m.of(this,arguments),b++||F({type:"zoomstart"})}).on("zoomend",function(){var w;M.select(this).style(s),f.call(y,"zoom",null),w=m.of(this,arguments),--b||w({type:"zoomend"}),i(d,v,S)}).on("zoom.redraw",function(){d.render(!0);var w=v.rotate();d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":v.scale()/d.fitScale,"geo.projection.rotation.lon":-w[0],"geo.projection.rotation.lat":-w[1]})}),M.rebind(y,m,"on")}function l(d,v){var g=d.invert(v);return g&&isFinite(g[0])&&isFinite(g[1])&&function(y){var m=y[0]*T,b=y[1]*T,f=Math.cos(b);return[f*Math.cos(m),f*Math.sin(m),Math.sin(b)]}(g)}function u(d,v,g,y){var m=h(g-d),b=h(y-v);return Math.sqrt(m*m+b*b)}function h(d){return(d%360+540)%360-180}function c(d,v,g){var y=g*T,m=d.slice(),b=v===0?1:0,f=v===2?1:2,S=Math.cos(y),w=Math.sin(y);return m[b]=d[b]*S-d[f]*w,m[f]=d[f]*S+d[b]*w,m}function x(d,v){for(var g=0,y=0,m=d.length;y<m;++y)g+=d[y]*v[y];return g}ee.exports=function(d,v){var g=d.projection;return(v._isScoped?r:v._isClipped?a:n)(d,g)}},84888:function(ee,R,e){var M=e(24040),k=e(33816).SUBPLOT_PATTERN;R.KY=function(o,T,_){var p=M.subplotsRegistry[T];if(!p)return[];for(var s=p.attr,t=[],i=0;i<o.length;i++){var r=o[i];r[0].trace[s]===_&&t.push(r)}return t},R._M=function(o,T,_){var p,s=[],t=[];if(!(p=typeof T=="string"?M.getModule(T).plot:typeof T=="function"?T:T.plot))return[s,o];for(var i=_,r=0;r<o.length;r++){var n=o[r],a=n[0].trace,l=a.zorder!==void 0;a.visible===!0&&a._length!==0&&(!a._module||a._module.plot!==p||l&&a.zorder!==i?t.push(n):s.push(n))}return[s,t]},R.op=function(o,T,_){if(!M.subplotsRegistry[T])return[];var p,s,t,i=M.subplotsRegistry[T].attr,r=[];if(T==="gl2d"){var n=_.match(k);s="x"+n[1],t="y"+n[2]}for(var a=0;a<o.length;a++)p=o[a],T==="gl2d"&&M.traceIs(p,"gl2d")?p[i[0]]===s&&p[i[1]]===t&&r.push(p):p[i]===_&&r.push(p);return r}},2428:function(ee,R,e){var M=e(62644),k=e(97264),o=e(29128),T=e(33816),_=e(89184);function p(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ee.exports=function(s){var t=s.mouseContainer,i=s.glplot,r=new p(t,i);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(l,u,h){var c,x,d=s.calcDataBox(),v=i.viewBox,g=r.lastPos[0],y=r.lastPos[1],m=T.MINDRAG*i.pixelRatio,b=T.MINZOOM*i.pixelRatio;function f(P,D,U){var I=Math.min(D,U),N=Math.max(D,U);I!==N?(d[P]=I,d[P+2]=N,r.dataBox=d,s.setRanges(d)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(u*=i.pixelRatio,h*=i.pixelRatio,h=v[3]-v[1]-h,s.fullLayout.dragmode){case"zoom":if(l){var S=u/(v[2]-v[0])*(d[2]-d[0])+d[0],w=h/(v[3]-v[1])*(d[3]-d[1])+d[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=w,r.dragStart[0]=u,r.dragStart[1]=h),r.boxEnd[0]=S,r.boxEnd[1]=w,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-u)<b,O=Math.abs(r.dragStart[1]-h)<b;if(!function(){for(var P=s.graphDiv._fullLayout._axisConstraintGroups,D=s.xaxis._id,U=s.yaxis._id,I=0;I<P.length;I++)if(P[I][D]!==-1){if(P[I][U]!==-1)return!0;break}return!1}()||E&&O)E&&(r.boxEnd[0]=r.boxStart[0]),O&&(r.boxEnd[1]=r.boxStart[1]);else{c=r.boxEnd[0]-r.boxStart[0],x=r.boxEnd[1]-r.boxStart[1];var C=(d[3]-d[1])/(d[2]-d[0]);Math.abs(c*C)>Math.abs(x)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(c)*C*(x>=0?1:-1),r.boxEnd[1]<d[1]?(r.boxEnd[1]=d[1],r.boxEnd[0]=r.boxStart[0]+(d[1]-r.boxStart[1])/Math.abs(C)):r.boxEnd[1]>d[3]&&(r.boxEnd[1]=d[3],r.boxEnd[0]=r.boxStart[0]+(d[3]-r.boxStart[1])/Math.abs(C))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(x)/C*(c>=0?1:-1),r.boxEnd[0]<d[0]?(r.boxEnd[0]=d[0],r.boxEnd[1]=r.boxStart[1]+(d[0]-r.boxStart[0])*Math.abs(C)):r.boxEnd[0]>d[2]&&(r.boxEnd[0]=d[2],r.boxEnd[1]=r.boxStart[1]+(d[2]-r.boxStart[0])*Math.abs(C)))}}else r.boxEnabled?(c=r.boxStart[0]!==r.boxEnd[0],x=r.boxStart[1]!==r.boxEnd[1],c||x?(c&&(f(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),x&&(f(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,l?(r.panning||(r.dragStart[0]=u,r.dragStart[1]=h),Math.abs(r.dragStart[0]-u)<m&&(u=r.dragStart[0]),Math.abs(r.dragStart[1]-h)<m&&(h=r.dragStart[1]),c=(g-u)*(d[2]-d[0])/(i.viewBox[2]-i.viewBox[0]),x=(y-h)*(d[3]-d[1])/(i.viewBox[3]-i.viewBox[1]),d[0]+=c,d[2]+=c,d[1]+=x,d[3]+=x,s.setRanges(d),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=u,r.lastPos[1]=h}return r.mouseListener=M(t,a),t.addEventListener("touchstart",function(l){var u=o(l.changedTouches[0],t);a(0,u[0],u[1]),a(1,u[0],u[1]),l.preventDefault()},!!_&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var u=o(l.changedTouches[0],t);a(1,u[0],u[1]),l.preventDefault()},!!_&&{passive:!1}),t.addEventListener("touchend",function(l){a(0,r.lastPos[0],r.lastPos[1]),l.preventDefault()},!!_&&{passive:!1}),r.wheelListener=k(t,function(l,u){if(!s.scrollZoom)return!1;var h=s.calcDataBox(),c=i.viewBox,x=r.lastPos[0],d=r.lastPos[1],v=Math.exp(5*u/(c[3]-c[1])),g=x/(c[2]-c[0])*(h[2]-h[0])+h[0],y=d/(c[3]-c[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-g)*v+g,h[2]=(h[2]-g)*v+g,h[1]=(h[1]-y)*v+y,h[3]=(h[3]-y)*v+y,s.setRanges(h),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},92568:function(ee,R,e){var M=e(54460),k=e(43080);function o(p){this.scene=p,this.gl=p.gl,this.pixelRatio=p.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=o.prototype,_=["xaxis","yaxis"];T.merge=function(p){var s,t,i,r,n,a,l,u,h,c,x;for(this.titleEnable=!1,this.backgroundColor=k(p.plot_bgcolor),c=0;c<2;++c){var d=(s=_[c]).charAt(0);for(i=(t=p[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[d]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[c+x]=!1,this.labels[c+x]=i,this.labelColor[c+x]=k(t.title.font.color),this.labelFont[c+x]=t.title.font.family,this.labelSize[c+x]=t.title.font.size,this.labelPad[c+x]=this.getLabelPad(s,t),this.tickEnable[c+x]=!1,this.tickColor[c+x]=k((t.tickfont||{}).color),this.tickAngle[c+x]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[c+x]=this.getTickPad(t),this.tickMarkLength[c+x]=0,this.tickMarkWidth[c+x]=t.tickwidth||0,this.tickMarkColor[c+x]=k(t.tickcolor),this.borderLineEnable[c+x]=!1,this.borderLineColor[c+x]=k(t.linecolor),this.borderLineWidth[c+x]=t.linewidth||0;l=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(s,t)&&!l,a=this.hasAxisInAltrPos(s,t)&&!l,r=t.mirror||!1,u=l?String(r).indexOf("all")!==-1:!!r,h=l?r==="allticks":String(r).indexOf("ticks")!==-1,n?this.labelEnable[c]=!0:a&&(this.labelEnable[c+2]=!0),n?this.tickEnable[c]=t.showticklabels:a&&(this.tickEnable[c+2]=t.showticklabels),(n||u)&&(this.borderLineEnable[c]=t.showline),(a||u)&&(this.borderLineEnable[c+2]=t.showline),(n||h)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(a||h)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=k(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=k(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},T.hasSharedAxis=function(p){var s=this.scene,t=s.fullLayout._subplots.gl2d;return M.findSubplotsWithAxis(t,p).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(p,s){var t=s.side;return p==="xaxis"?t==="bottom":p==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(p,s){var t=s.side;return p==="xaxis"?t==="top":p==="yaxis"?t==="right":void 0},T.getLabelPad=function(p,s){var t=1.5,i=s.title.font.size,r=s.showticklabels;return p==="xaxis"?s.side==="top"?i*(t+(r?1:0))-10:i*(t+(r?.5:0))-10:p==="yaxis"?s.side==="right"?10+i*(t+(r?1:.5)):10+i*(t+(r?.5:0)):void 0},T.getTickPad=function(p){return p.ticks==="outside"?10+p.ticklen:15},T.getTickMarkLength=function(p){if(!p.ticks)return 0;var s=p.ticklen;return p.ticks==="inside"?-s:s},ee.exports=function(p){return new o(p)}},39952:function(ee,R,e){var M=e(67824).overrideAll,k=e(17188),o=e(64859),T=e(9616),_=e(33816),p=e(57952),s=e(65460),t=e(84888).op;R.name="gl2d",R.attr=["xaxis","yaxis"],R.idRoot=["x","y"],R.idRegex=_.idRegex,R.attrRegex=_.attrRegex,R.attributes=e(26720),R.supplyLayoutDefaults=function(i,r,n){r._has("cartesian")||p.supplyLayoutDefaults(i,r,n)},R.layoutAttrOverrides=M(p.layoutAttributes,"plot","from-root"),R.baseLayoutAttrOverrides=M({plot_bgcolor:o.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),R.plot=function(i){for(var r=i._fullLayout,n=i._fullData,a=r._subplots.gl2d,l=0;l<a.length;l++){var u=a[l],h=r._plots[u],c=t(n,"gl2d",u),x=h._scene2d;x===void 0&&(x=new k({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},r),h._scene2d=x),x.plot(c,i.calcdata,r,i.layout)}},R.clean=function(i,r,n,a){for(var l=a._subplots.gl2d||[],u=0;u<l.length;u++){var h=l[u],c=a._plots[h];c._scene2d&&t(i,"gl2d",h).length===0&&(c._scene2d.destroy(),delete a._plots[h])}p.clean.apply(this,arguments)},R.drawFramework=function(i){i._context.staticPlot||p.drawFramework(i)},R.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var l=r._plots[n[a]]._scene2d,u=l.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},R.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},17188:function(ee,R,e){var M,k,o=e(24040),T=e(54460),_=e(93024),p=e(67792).gl_plot2d,s=e(67792).gl_spikes2d,t=e(67792).gl_select_box,i=e(5408),r=e(92568),n=e(2428),a=e(16576),l=e(71888),u=l.enforce,h=l.clean,c=e(19280).doAutoRange,x=e(72760),d=x.drawMode,v=x.selectMode,g=["xaxis","yaxis"],y=e(33816).SUBPLOT_PATTERN;function m(f,S){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=p(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ee.exports=m;var b=m.prototype;b.makeFramework=function(){if(this.staticPlot){if(!(k||(M=document.createElement("canvas"),k=i({canvas:M,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=M,this.gl=k}else{var f=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=f,this.gl=S}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var O=this.mouseContainer=document.createElement("div");O.style.position="absolute",O.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(O);var P=this;O.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),O.addEventListener("mouseover",function(){P.isMouseOver=!0})},b.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(M),this.updateSize(this.canvas);var S=this.glplot.gl,w=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var O=new Uint8Array(w*E*4);S.readPixels(0,0,w,E,S.RGBA,S.UNSIGNED_BYTE,O);for(var C=0,P=E-1;C<P;++C,--P)for(var D=0;D<w;++D)for(var U=0;U<4;++U){var I=O[4*(w*C+D)+U];O[4*(w*C+D)+U]=O[4*(w*P+D)+U],O[4*(w*P+D)+U]=I}var N=document.createElement("canvas");N.width=w,N.height=E;var W,F=N.getContext("2d",{willReadFrequently:!0}),j=F.createImageData(w,E);switch(j.data.set(O),F.putImageData(j,0,0),f){case"jpeg":W=N.toDataURL("image/jpeg");break;case"webp":W=N.toDataURL("image/webp");break;default:W=N.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(M),W},b.updateSize=function(f){f||(f=this.canvas);var S=this.pixelRatio,w=this.fullLayout,E=w.width,O=w.height,C=0|Math.ceil(S*E),P=0|Math.ceil(S*O);return f.width===C&&f.height===P||(f.width=C,f.height=P),f},b.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var w=0;w<f[S].length;++w)f[S][w].text=f[S][w].text+"";return f},b.updateRefs=function(f){this.fullLayout=f;var S=this.id.match(y),w="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[w],this.yaxis=this.fullLayout[E]},b.relayoutCallback=function(){var f=this.graphDiv,S=this.xaxis,w=this.yaxis,E=f.layout,O={},C=O[S._name+".range"]=S.range.slice(),P=O[w._name+".range"]=w.range.slice();O[S._name+".autorange"]=S.autorange,O[w._name+".autorange"]=w.autorange,o.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,O);var D=E[S._name];D.range=C,D.autorange=S.autorange;var U=E[w._name];U.range=P,U.autorange=w.autorange,O.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",O)},b.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(w,E){for(var O=0;O<2;++O){var C=w[O],P=E[O];if(C.length!==P.length)return!0;for(var D=0;D<C.length;++D)if(C[D].x!==P[D].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},b.handleAnnotations=function(){for(var f=this.graphDiv,S=this.fullLayout.annotations,w=0;w<S.length;w++){var E=S[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&o.getComponentMethod("annotations","drawOne")(f,w)}},b.destroy=function(){if(this.glplot){var f=this.traces;f&&Object.keys(f).map(function(S){f[S].dispose(),delete f[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},b.plot=function(f,S,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,S),this.updateFx(w.dragmode);var O=w.width,C=w.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(w),P.screenBox=[0,0,O,C];var D={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};h(D,this.xaxis),h(D,this.yaxis);var U,I,N=w._size,W=this.xaxis.domain,F=this.yaxis.domain;for(P.viewBox=[N.l+W[0]*N.w,N.b+F[0]*N.h,O-N.r-(1-W[1])*N.w,C-N.t-(1-F[1])*N.h],this.mouseContainer.style.width=N.w*(W[1]-W[0])+"px",this.mouseContainer.style.height=N.h*(F[1]-F[0])+"px",this.mouseContainer.height=N.h*(F[1]-F[0]),this.mouseContainer.style.left=N.l+W[0]*N.w+"px",this.mouseContainer.style.top=N.t+(1-F[1])*N.h+"px",I=0;I<2;++I)(U=this[g[I]])._length=P.viewBox[I+2]-P.viewBox[I],c(this.graphDiv,U),U.setScale();u(D),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(w),E.update(P),this.glplot.draw()},b.calcDataBox=function(){var f=this.xaxis,S=this.yaxis,w=f.range,E=S.range,O=f.r2l,C=S.r2l;return[O(w[0]),C(E[0]),O(w[1]),C(E[1])]},b.setRanges=function(f){var S=this.xaxis,w=this.yaxis,E=S.l2r,O=w.l2r;S.range=[E(f[0]),E(f[2])],w.range=[O(f[1]),O(f[3])]},b.updateTraces=function(f,S){var w,E,O,C=Object.keys(this.traces);this.fullData=f;e:for(w=0;w<C.length;w++){var P=C[w],D=this.traces[P];for(E=0;E<f.length;E++)if((O=f[E]).uid===P&&O.type===D.type)continue e;D.dispose(),delete this.traces[P]}for(w=0;w<f.length;w++){O=f[w];var U=S[w],I=this.traces[O.uid];I?I.update(O,U):(I=O._module.plot(this,O,U),this.traces[O.uid]=I)}this.glplot.objects.sort(function(N,W){return N._trace.index-W._trace.index})},b.updateFx=function(f){v(f)||d(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=f==="pan"?"move":f==="zoom"?"crosshair":null},b.emitPointAction=function(f,S){for(var w,E=f.trace.uid,O=f.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(w=this.fullData[C]);var P={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:w.index,pointNumber:O,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};_.appendArrayPointValue(P,w,O),this.graphDiv.emit(S,{points:[P]})},b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,S=this.camera,w=S.mouseListener,E=this.lastButtonState===1&&w.buttons===0,O=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var C,P=w.x*f.pixelRatio,D=this.canvas.height-f.pixelRatio*w.y;if(S.boxEnabled&&O.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],I=0;I<2;I++)S.boxStart[I]===S.boxEnd[I]&&(U[I]=f.dataBox[I],U[I+2]=f.dataBox[I+2]);f.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var N=O._size,W=this.xaxis.domain,F=this.yaxis.domain,j=(C=f.pick(P/f.pixelRatio+N.l+W[0]*N.w,D/f.pixelRatio-(N.t+(1-F[1])*N.h)))&&C.object._trace.handlePick(C);if(j&&E&&this.emitPointAction(j,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&O.hovermode&&j&&(!this.lastPickResult||this.lastPickResult.traceUid!==j.trace.uid||this.lastPickResult.dataCoord[0]!==j.dataCoord[0]||this.lastPickResult.dataCoord[1]!==j.dataCoord[1])){var H=j;this.lastPickResult={traceUid:j.trace?j.trace.uid:null,dataCoord:j.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),H.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(C.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(C.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(j,"plotly_hover");var te=this.fullData[H.trace.index]||{},Q=H.pointIndex,$=_.castHoverinfo(te,O,Q);if($&&$!=="all"){var K=$.split("+");K.indexOf("x")===-1&&(H.traceCoord[0]=void 0),K.indexOf("y")===-1&&(H.traceCoord[1]=void 0),K.indexOf("z")===-1&&(H.traceCoord[2]=void 0),K.indexOf("text")===-1&&(H.textLabel=void 0),K.indexOf("name")===-1&&(H.name=void 0)}_.loneHover({x:H.screenCoord[0],y:H.screenCoord[1],xLabel:this.hoverFormatter("xaxis",H.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",H.traceCoord[1]),zLabel:H.traceCoord[2],text:H.textLabel,name:H.name,color:_.castHoverOption(te,Q,"bgcolor")||H.color,borderColor:_.castHoverOption(te,Q,"bordercolor"),fontFamily:_.castHoverOption(te,Q,"font.family"),fontSize:_.castHoverOption(te,Q,"font.size"),fontColor:_.castHoverOption(te,Q,"font.color"),nameLength:_.castHoverOption(te,Q,"namelength"),textAlign:_.castHoverOption(te,Q,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),f.draw()}},b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),_.loneUnhover(this.svgContainer))},b.hoverFormatter=function(f,S){if(S!==void 0){var w=this[f];return T.tickText(w,w.c2l(S),"hover").text}}},12536:function(ee,R,e){var M=e(67824).overrideAll,k=e(65460),o=e(98432),T=e(84888).op,_=e(3400),p=e(9616),s="gl3d",t="scene";R.name=s,R.attr=t,R.idRoot=t,R.idRegex=R.attrRegex=_.counterRegex("scene"),R.attributes=e(6636),R.layoutAttributes=e(346),R.baseLayoutAttrOverrides=M({hoverlabel:k.hoverlabel},"plot","nested"),R.supplyLayoutDefaults=e(5208),R.plot=function(i){for(var r=i._fullLayout,n=i._fullData,a=r._subplots[s],l=0;l<a.length;l++){var u=a[l],h=T(n,s,u),c=r[u],x=c.camera,d=c._scene;d||(d=new o({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:x},r),c._scene=d),d.viewInitial||(d.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),d.plot(h,r,i.layout)}},R.clean=function(i,r,n,a){for(var l=a._subplots[s]||[],u=0;u<l.length;u++){var h=l[u];!r[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},R.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots[s],a=r._size,l=0;l<n.length;l++){var u=r[n[l]],h=u.domain,c=u._scene,x=c.toImage("png");r._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":x,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),c.destroy()}},R.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var r=i.substr(5);return r==="1"&&(r=""),t+r}},R.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots[s],a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},6636:function(ee){ee.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(ee,R,e){var M=e(76308),k=e(94724),o=e(92880).extendFlat,T=e(67824).overrideAll;ee.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:o({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:o({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:o({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},64380:function(ee,R,e){var M=e(49760).mix,k=e(3400),o=e(31780),T=e(86140),_=e(14944),p=e(28336),s=["xaxis","yaxis","zaxis"];ee.exports=function(t,i,r){var n,a;function l(c,x){return k.coerce(n,a,T,c,x)}for(var u=0;u<s.length;u++){var h=s[u];n=t[h]||{},(a=o.newContainer(i,h))._id=h[0]+r.scene,a._name=h,_(n,a,l,r),p(n,a,l,{font:r.font,letter:h[0],data:r.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),l("gridcolor",M(a.color,r.bgColor,72.72727272727273).toRgbString()),l("title.text",h[0]),a.setScale=k.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",a.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},44728:function(ee,R,e){var M=e(43080),k=e(3400),o=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(_,p){for(var s=this,t=0;t<3;++t){var i=p[o[t]];i.visible?(s.labels[t]=_._meta?k.templateString(i.title.text,_._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(s.labelColor[t]=M(i.title.font.color)),i.title.font.family&&(s.labelFont[t]=i.title.font.family),i.title.font.size&&(s.labelSize[t]=i.title.font.size),i.title.font.weight&&(s.labelFontWeight[t]=i.title.font.weight),i.title.font.style&&(s.labelFontStyle[t]=i.title.font.style),i.title.font.variant&&(s.labelFontVariant[t]=i.title.font.variant)),"showline"in i&&(s.lineEnable[t]=i.showline),"linecolor"in i&&(s.lineColor[t]=M(i.linecolor)),"linewidth"in i&&(s.lineWidth[t]=i.linewidth),"showgrid"in i&&(s.gridEnable[t]=i.showgrid),"gridcolor"in i&&(s.gridColor[t]=M(i.gridcolor)),"gridwidth"in i&&(s.gridWidth[t]=i.gridwidth),i.type==="log"?s.zeroEnable[t]=!1:"zeroline"in i&&(s.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(s.zeroLineColor[t]=M(i.zerolinecolor)),"zerolinewidth"in i&&(s.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in i&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(s.lineTickColor[t]=M(i.tickcolor)),"tickwidth"in i&&(s.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(s.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(s.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(s.tickColor[t]=M(i.tickfont.color)),i.tickfont.family&&(s.tickFont[t]=i.tickfont.family),i.tickfont.size&&(s.tickSize[t]=i.tickfont.size),i.tickfont.weight&&(s.tickFontWeight[t]=i.tickfont.weight),i.tickfont.style&&(s.tickFontStyle[t]=i.tickfont.style),i.tickfont.variant&&(s.tickFontVariant[t]=i.tickfont.variant)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):i.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=M(i.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},ee.exports=function(_,p){var s=new T;return s.merge(_,p),s}},5208:function(ee,R,e){var M=e(3400),k=e(76308),o=e(24040),T=e(168),_=e(64380),p=e(346),s=e(84888).op,t="gl3d";function i(r,n,a,l){for(var u=a("bgcolor"),h=k.combine(u,l.paper_bgcolor),c=["up","center","eye"],x=0;x<c.length;x++)a("camera."+c[x]+".x"),a("camera."+c[x]+".y"),a("camera."+c[x]+".z");a("camera.projection.type");var d=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),v=a("aspectmode",d?"manual":"auto");d||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},v==="manual"&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var g=s(l.fullData,t,l.id);_(r,n,{font:l.font,scene:l.id,data:g,bgColor:h,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(r,n,l);var y=l.getDfltFromLayout("dragmode");if(y!==!1&&!y)if(y="orbit",r.camera&&r.camera.up){var m=r.camera.up.x,b=r.camera.up.y,f=r.camera.up.z;f!==0&&(m&&b&&f?f/Math.sqrt(m*m+b*b+f*f)>.999&&(y="turntable"):y="turntable")}else y="turntable";a("dragmode",y),a("hovermode",l.getDfltFromLayout("hovermode"))}ee.exports=function(r,n,a){var l=n._basePlotModules.length>1;T(r,n,a,{type:t,attributes:p,handleDefaults:i,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(u){if(!l)return M.validate(r[u],p[u])?r[u]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},346:function(ee,R,e){var M=e(86140),k=e(86968).u,o=e(92880).extendFlat,T=e(3400).counterRegex;function _(p,s,t){return{x:{valType:"number",dflt:p,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}ee.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(_(0,0,1),{}),center:o(_(0,0,0),{}),eye:o(_(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(ee,R,e){var M=e(43080),k=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(T){for(var _=0;_<3;++_){var p=T[k[_]];p.visible?(this.enabled[_]=p.showspikes,this.colors[_]=M(p.spikecolor),this.drawSides[_]=p.spikesides,this.lineWidth[_]=p.spikethickness):(this.enabled[_]=!1,this.drawSides[_]=!1)}},ee.exports=function(T){var _=new o;return _.merge(T),_}},87152:function(ee,R,e){ee.exports=function(_){for(var p=_.axesOptions,s=_.glplot.axesPixels,t=_.fullSceneLayout,i=[[],[],[]],r=0;r<3;++r){var n=t[o[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/_.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))i[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/_.dataScale[r],n.range[1]=s[r].hi/_.dataScale[r],n._m=1/(_.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if(n.tickmode==="auto"){n.tickmode="linear";var l=n.nticks||k.constrain(n._length/40,4,9);M.autoTicks(n,Math.abs(n.range[1]-n.range[0])/l)}for(var u=M.calcTicks(n,{msUTC:!0}),h=0;h<u.length;++h)u[h].x=u[h].x*_.dataScale[r],n.type==="date"&&(u[h].text=u[h].text.replace(/\<br\>/g," "));i[r]=u,n.tickmode=a}}for(p.ticks=i,r=0;r<3;++r)for(T[r]=.5*(_.glplot.bounds[0][r]+_.glplot.bounds[1][r]),h=0;h<2;++h)p.bounds[h][r]=_.glplot.bounds[h][r];_.contourLevels=function(c){for(var x=new Array(3),d=0;d<3;++d){for(var v=c[d],g=new Array(v.length),y=0;y<v.length;++y)g[y]=v[y].x;x[d]=g}return x}(i)};var M=e(54460),k=e(3400),o=["xaxis","yaxis","zaxis"],T=[0,0,0]},94424:function(ee){function R(e,M){var k,o,T=[0,0,0,0];for(k=0;k<4;++k)for(o=0;o<4;++o)T[o]+=e[4*k+o]*M[k];return T}ee.exports=function(e,M){return R(e.projection,R(e.view,R(e.model,[M[0],M[1],M[2],1])))}},98432:function(ee,R,e){var M,k,o=e(67792).gl_plot3d,T=o.createCamera,_=o.createScene,p=e(5408),s=e(89184),t=e(24040),i=e(3400),r=i.preserveDrawingBuffer(),n=e(54460),a=e(93024),l=e(43080),u=e(16576),h=e(94424),c=e(44728),x=e(9020),d=e(87152),v=e(19280).applyAutorangeOptions,g=!1;function y(w,E){var O=document.createElement("div"),C=w.container;this.graphDiv=w.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",O.appendChild(P),this.svgContainer=P,O.id=w.id,O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",C.appendChild(O),this.fullLayout=E,this.id=w.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(E,E[this.id]),this.spikeOptions=x(E[this.id]),this.container=O,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var m=y.prototype;m.prepareOptions=function(){var w=this,E={canvas:w.canvas,gl:w.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:w.container,axes:w.axesOptions,spikes:w.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:w.camera,pixelRatio:w.pixelRatio};if(w.staticMode){if(!(k||(M=document.createElement("canvas"),k=p({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=M}return E};var b=!0;m.tryCreatePlot=function(){var w=this,E=w.prepareOptions(),O=!0;try{w.glplot=_(E)}catch{if(w.staticMode||!b||r)O=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=E.glOptions.preserveDrawingBuffer=!0,w.glplot=_(E)}catch{r=E.glOptions.preserveDrawingBuffer=!1,O=!1}}}return b=!1,O},m.initializeGLCamera=function(){var w=this,E=w.fullSceneLayout.camera,O=E.projection.type==="orthographic";w.camera=T(w.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:O,zoomMin:.01,zoomMax:100,mode:"orbit"})},m.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return u(w);w.traces={},w.make4thDimension();var E=w.graphDiv,O=E.layout,C=function(){var D={};return w.isCameraChanged(O)&&(D[w.id+".camera"]=w.getCamera()),w.isAspectChanged(O)&&(D[w.id+".aspectratio"]=w.glplot.getAspectratio(),O[w.id].aspectmode!=="manual"&&(w.fullSceneLayout.aspectmode=O[w.id].aspectmode=D[w.id+".aspectmode"]="manual")),D},P=function(D){if(D.fullSceneLayout.dragmode!==!1){var U=C();D.saveLayout(O),D.graphDiv.emit("plotly_relayout",U)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){P(w)}),w.glplot.canvas.addEventListener("touchstart",function(){g=!0}),w.glplot.canvas.addEventListener("wheel",function(D){if(E._context._scrollZoom.gl3d){if(w.camera._ortho){var U=D.deltaX>D.deltaY?1.1:.9090909090909091,I=w.glplot.getAspectratio();w.glplot.setAspectratio({x:U*I.x,y:U*I.y,z:U*I.z})}P(w)}},!!s&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(w.fullSceneLayout.dragmode!==!1&&w.camera.mouseListener.buttons!==0){var D=C();w.graphDiv.emit("plotly_relayouting",D)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(D){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:D,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},m.render=function(){var w,E=this,O=E.graphDiv,C=E.svgContainer,P=E.container.getBoundingClientRect();O._fullLayout._calcInverseTransform(O);var D=O._fullLayout._invScaleX,U=O._fullLayout._invScaleY,I=P.width*D,N=P.height*U;C.setAttributeNS(null,"viewBox","0 0 "+I+" "+N),C.setAttributeNS(null,"width",I),C.setAttributeNS(null,"height",N),d(E),E.glplot.axes.update(E.axesOptions);for(var W=Object.keys(E.traces),F=null,j=E.glplot.selection,H=0;H<W.length;++H)(w=E.traces[W[H]]).data.hoverinfo!=="skip"&&w.handlePick(j)&&(F=w),w.setContourLevels&&w.setContourLevels();function te(ye,me,Me){var Pe=E.fullSceneLayout[ye+"axis"];return Pe.type!=="log"&&(me=Pe.d2l(me)),n.hoverLabelText(Pe,me,Me)}if(F!==null){var Q=h(E.glplot.cameraParams,j.dataCoordinate);w=F.data;var $,K=O._fullData[w.index],X=j.index,Y={xLabel:te("x",j.traceCoordinate[0],w.xhoverformat),yLabel:te("y",j.traceCoordinate[1],w.yhoverformat),zLabel:te("z",j.traceCoordinate[2],w.zhoverformat)},re=a.castHoverinfo(K,E.fullLayout,X),se=(re||"").split("+"),ae=re&&re==="all";K.hovertemplate||ae||(se.indexOf("x")===-1&&(Y.xLabel=void 0),se.indexOf("y")===-1&&(Y.yLabel=void 0),se.indexOf("z")===-1&&(Y.zLabel=void 0),se.indexOf("text")===-1&&(j.textLabel=void 0),se.indexOf("name")===-1&&(F.name=void 0));var ce=[];w.type==="cone"||w.type==="streamtube"?(Y.uLabel=te("x",j.traceCoordinate[3],w.uhoverformat),(ae||se.indexOf("u")!==-1)&&ce.push("u: "+Y.uLabel),Y.vLabel=te("y",j.traceCoordinate[4],w.vhoverformat),(ae||se.indexOf("v")!==-1)&&ce.push("v: "+Y.vLabel),Y.wLabel=te("z",j.traceCoordinate[5],w.whoverformat),(ae||se.indexOf("w")!==-1)&&ce.push("w: "+Y.wLabel),Y.normLabel=j.traceCoordinate[6].toPrecision(3),(ae||se.indexOf("norm")!==-1)&&ce.push("norm: "+Y.normLabel),w.type==="streamtube"&&(Y.divergenceLabel=j.traceCoordinate[7].toPrecision(3),(ae||se.indexOf("divergence")!==-1)&&ce.push("divergence: "+Y.divergenceLabel)),j.textLabel&&ce.push(j.textLabel),$=ce.join("<br>")):w.type==="isosurface"||w.type==="volume"?(Y.valueLabel=n.hoverLabelText(E._mockAxis,E._mockAxis.d2l(j.traceCoordinate[3]),w.valuehoverformat),ce.push("value: "+Y.valueLabel),j.textLabel&&ce.push(j.textLabel),$=ce.join("<br>")):$=j.textLabel;var fe={x:j.traceCoordinate[0],y:j.traceCoordinate[1],z:j.traceCoordinate[2],data:K._input,fullData:K,curveNumber:K.index,pointNumber:X};a.appendArrayPointValue(fe,K,X),w._module.eventData&&(fe=K._module.eventData(fe,j,K,{},X));var he={points:[fe]};if(E.fullSceneLayout.hovermode){var ve=[];a.loneHover({trace:K,x:(.5+.5*Q[0]/Q[3])*I,y:(.5-.5*Q[1]/Q[3])*N,xLabel:Y.xLabel,yLabel:Y.yLabel,zLabel:Y.zLabel,text:$,name:F.name,color:a.castHoverOption(K,X,"bgcolor")||F.color,borderColor:a.castHoverOption(K,X,"bordercolor"),fontFamily:a.castHoverOption(K,X,"font.family"),fontSize:a.castHoverOption(K,X,"font.size"),fontColor:a.castHoverOption(K,X,"font.color"),nameLength:a.castHoverOption(K,X,"namelength"),textAlign:a.castHoverOption(K,X,"align"),hovertemplate:i.castOption(K,X,"hovertemplate"),hovertemplateLabels:i.extendFlat({},fe,Y),eventData:[fe]},{container:C,gd:O,inOut_bbox:ve}),fe.bbox=ve[0]}j.distance<5&&(j.buttons||g)?O.emit("plotly_click",he):O.emit("plotly_hover",he),this.oldEventData=he}else a.loneUnhover(C),this.oldEventData&&O.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},m.recoverContext=function(){var w=this;w.glplot.dispose();var E=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(E):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var f=["xaxis","yaxis","zaxis"];function S(w,E,O){for(var C=w.fullSceneLayout,P=0;P<3;P++){var D=f[P],U=D.charAt(0),I=C[D],N=E[U],W=E[U+"calendar"],F=E["_"+U+"length"];if(i.isArrayOrTypedArray(N))for(var j,H=0;H<(F||N.length);H++)if(i.isArrayOrTypedArray(N[H]))for(var te=0;te<N[H].length;++te)j=I.d2l(N[H][te],0,W),!isNaN(j)&&isFinite(j)&&(O[0][P]=Math.min(O[0][P],j),O[1][P]=Math.max(O[1][P],j));else j=I.d2l(N[H],0,W),!isNaN(j)&&isFinite(j)&&(O[0][P]=Math.min(O[0][P],j),O[1][P]=Math.max(O[1][P],j));else O[0][P]=Math.min(O[0][P],0),O[1][P]=Math.max(O[1][P],F-1)}}m.plot=function(w,E,O){var C=this;if(C.plotArgs=[w,E,O],!C.glplot.contextLost){var P,D,U,I,N,W,F=E[C.id],j=O[C.id];C.fullLayout=E,C.fullSceneLayout=F,C.axesOptions.merge(E,F),C.spikeOptions.merge(F),C.setViewport(F),C.updateFx(F.dragmode,F.hovermode),C.camera.enableWheel=C.graphDiv._context._scrollZoom.gl3d,C.glplot.setClearColor(l(F.bgcolor)),C.setConvert(N),w?Array.isArray(w)||(w=[w]):w=[];var H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<w.length;++U)(P=w[U]).visible===!0&&P._length!==0&&S(this,P,H);(function(Ae,Oe){for(var ze=Ae.fullSceneLayout,pe=ze.annotations||[],be=0;be<3;be++)for(var ke=f[be],Ie=ke.charAt(0),Ee=ze[ke],Be=0;Be<pe.length;Be++){var Ve=pe[Be];if(Ve.visible){var Ze=Ee.r2l(Ve[Ie]);!isNaN(Ze)&&isFinite(Ze)&&(Oe[0][be]=Math.min(Oe[0][be],Ze),Oe[1][be]=Math.max(Oe[1][be],Ze))}}})(this,H);var te=[1,1,1];for(I=0;I<3;++I)H[1][I]===H[0][I]?te[I]=1:te[I]=1/(H[1][I]-H[0][I]);for(C.dataScale=te,C.convertAnnotations(this),U=0;U<w.length;++U)(P=w[U]).visible===!0&&P._length!==0&&((D=C.traces[P.uid])?D.data.type===P.type?D.update(P):(D.dispose(),D=P._module.plot(this,P),C.traces[P.uid]=D):(D=P._module.plot(this,P),C.traces[P.uid]=D),D.name=P.name);var Q=Object.keys(C.traces);e:for(U=0;U<Q.length;++U){for(I=0;I<w.length;++I)if(w[I].uid===Q[U]&&w[I].visible===!0&&w[I]._length!==0)continue e;(D=C.traces[Q[U]]).dispose(),delete C.traces[Q[U]]}C.glplot.objects.sort(function(Ae,Oe){return Ae._trace.data.index-Oe._trace.data.index});var $,K=[[0,0,0],[0,0,0]],X=[],Y={};for(U=0;U<3;++U){var re;if((W=(N=F[f[U]]).type)in Y?(Y[W].acc*=te[U],Y[W].count+=1):Y[W]={acc:te[U],count:1},N.autorange){K[0][U]=1/0,K[1][U]=-1/0;var se=C.glplot.objects,ae=C.fullSceneLayout.annotations||[],ce=N._name.charAt(0);for(I=0;I<se.length;I++){var fe=se[I],he=fe.bounds,ve=fe._trace.data._pad||0;fe.constructor.name==="ErrorBars"&&N._lowerLogErrorBound?K[0][U]=Math.min(K[0][U],N._lowerLogErrorBound):K[0][U]=Math.min(K[0][U],he[0][U]/te[U]-ve),K[1][U]=Math.max(K[1][U],he[1][U]/te[U]+ve)}for(I=0;I<ae.length;I++){var ye=ae[I];if(ye.visible){var me=N.r2l(ye[ce]);K[0][U]=Math.min(K[0][U],me),K[1][U]=Math.max(K[1][U],me)}}if("rangemode"in N&&N.rangemode==="tozero"&&(K[0][U]=Math.min(K[0][U],0),K[1][U]=Math.max(K[1][U],0)),K[0][U]>K[1][U])K[0][U]=-1,K[1][U]=1;else{var Me=K[1][U]-K[0][U];K[0][U]-=Me/32,K[1][U]+=Me/32}if(re=[K[0][U],K[1][U]],re=v(re,N),K[0][U]=re[0],K[1][U]=re[1],N.isReversed()){var Pe=K[0][U];K[0][U]=K[1][U],K[1][U]=Pe}}else re=N.range,K[0][U]=N.r2l(re[0]),K[1][U]=N.r2l(re[1]);K[0][U]===K[1][U]&&(K[0][U]-=1,K[1][U]+=1),X[U]=K[1][U]-K[0][U],N.range=[K[0][U],K[1][U]],N.limitRange(),C.glplot.setBounds(U,{min:N.range[0]*te[U],max:N.range[1]*te[U]})}var ge=F.aspectmode;if(ge==="cube")$=[1,1,1];else if(ge==="manual"){var oe=F.aspectratio;$=[oe.x,oe.y,oe.z]}else{if(ge!=="auto"&&ge!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var ie=[1,1,1];for(U=0;U<3;++U){var de=Y[W=(N=F[f[U]]).type];ie[U]=Math.pow(de.acc,1/de.count)/te[U]}$=ge==="data"||Math.max.apply(null,ie)/Math.min.apply(null,ie)<=4?ie:[1,1,1]}F.aspectratio.x=j.aspectratio.x=$[0],F.aspectratio.y=j.aspectratio.y=$[1],F.aspectratio.z=j.aspectratio.z=$[2],C.glplot.setAspectratio(F.aspectratio),C.viewInitial.aspectratio||(C.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),C.viewInitial.aspectmode||(C.viewInitial.aspectmode=F.aspectmode);var Se=F.domain||null,_e=E._size||null;if(Se&&_e){var we=C.container.style;we.position="absolute",we.left=_e.l+Se.x[0]*_e.w+"px",we.top=_e.t+(1-Se.y[1])*_e.h+"px",we.width=_e.w*(Se.x[1]-Se.x[0])+"px",we.height=_e.h*(Se.y[1]-Se.y[0])+"px"}C.glplot.redraw()}},m.destroy=function(){var w=this;w.glplot&&(w.camera.mouseListener.enabled=!1,w.container.removeEventListener("wheel",w.camera.wheelListener),w.camera=null,w.glplot.dispose(),w.container.parentNode.removeChild(w.container),w.glplot=null)},m.getCamera=function(){var w,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(w=E.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:w._ortho===!0?"orthographic":"perspective"}}},m.setViewport=function(w){var E,O=this,C=w.camera;O.camera.lookAt.apply(this,[[(E=C).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),O.glplot.setAspectratio(w.aspectratio),C.projection.type==="orthographic"!==O.camera._ortho&&(O.glplot.redraw(),O.glplot.clearRGBA(),O.glplot.dispose(),O.initializeGLPlot())},m.isCameraChanged=function(w){var E=this.getCamera(),O=i.nestedProperty(w,this.id+".camera").get();function C(I,N,W,F){var j=["up","center","eye"],H=["x","y","z"];return N[j[W]]&&I[j[W]][H[F]]===N[j[W]][H[F]]}var P=!1;if(O===void 0)P=!0;else{for(var D=0;D<3;D++)for(var U=0;U<3;U++)if(!C(E,O,D,U)){P=!0;break}(!O.projection||E.projection&&E.projection.type!==O.projection.type)&&(P=!0)}return P},m.isAspectChanged=function(w){var E=this.glplot.getAspectratio(),O=i.nestedProperty(w,this.id+".aspectratio").get();return O===void 0||O.x!==E.x||O.y!==E.y||O.z!==E.z},m.saveLayout=function(w){var E,O,C,P,D,U,I=this,N=I.fullLayout,W=I.isCameraChanged(w),F=I.isAspectChanged(w),j=W||F;if(j){var H={};W&&(E=I.getCamera(),C=(O=i.nestedProperty(w,I.id+".camera")).get(),H[I.id+".camera"]=C),F&&(P=I.glplot.getAspectratio(),U=(D=i.nestedProperty(w,I.id+".aspectratio")).get(),H[I.id+".aspectratio"]=U),t.call("_storeDirectGUIEdit",w,N._preGUI,H),W&&(O.set(E),i.nestedProperty(N,I.id+".camera").set(E)),F&&(D.set(P),i.nestedProperty(N,I.id+".aspectratio").set(P),I.glplot.redraw())}return j},m.updateFx=function(w,E){var O=this,C=O.camera;if(C)if(w==="orbit")C.mode="orbit",C.keyBindingMode="rotate";else if(w==="turntable"){C.up=[0,0,1],C.mode="turntable",C.keyBindingMode="rotate";var P=O.graphDiv,D=P._fullLayout,U=O.fullSceneLayout.camera,I=U.up.x,N=U.up.y,W=U.up.z;if(W/Math.sqrt(I*I+N*N+W*W)<.999){var F=O.id+".camera.up",j={x:0,y:0,z:1},H={};H[F]=j;var te=P.layout;t.call("_storeDirectGUIEdit",te,D._preGUI,H),U.up=j,i.nestedProperty(te,F).set(j)}}else C.keyBindingMode=w;O.fullSceneLayout.hovermode=E},m.toImage=function(w){var E=this;w||(w="png"),E.staticMode&&E.container.appendChild(M),E.glplot.redraw();var O=E.glplot.gl,C=O.drawingBufferWidth,P=O.drawingBufferHeight;O.bindFramebuffer(O.FRAMEBUFFER,null);var D=new Uint8Array(C*P*4);O.readPixels(0,0,C,P,O.RGBA,O.UNSIGNED_BYTE,D),function(F,j,H){for(var te=0,Q=H-1;te<Q;++te,--Q)for(var $=0;$<j;++$)for(var K=0;K<4;++K){var X=4*(j*te+$)+K,Y=4*(j*Q+$)+K,re=F[X];F[X]=F[Y],F[Y]=re}}(D,C,P),function(F,j,H){for(var te=0;te<H;++te)for(var Q=0;Q<j;++Q){var $=4*(j*te+Q),K=F[$+3];if(K>0)for(var X=255/K,Y=0;Y<3;++Y)F[$+Y]=Math.min(X*F[$+Y],255)}}(D,C,P);var U=document.createElement("canvas");U.width=C,U.height=P;var I,N=U.getContext("2d",{willReadFrequently:!0}),W=N.createImageData(C,P);switch(W.data.set(D),N.putImageData(W,0,0),w){case"jpeg":I=U.toDataURL("image/jpeg");break;case"webp":I=U.toDataURL("image/webp");break;default:I=U.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(M),I},m.setConvert=function(){for(var w=0;w<3;w++){var E=this.fullSceneLayout[f[w]];n.setConvert(E,this.fullLayout),E.setScale=i.noop}},m.make4thDimension=function(){var w=this,E=w.graphDiv._fullLayout;w._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(w._mockAxis,E)},ee.exports=y},52094:function(ee){ee.exports=function(R,e,M,k){k=k||R.length;for(var o=new Array(k),T=0;T<k;T++)o[T]=[R[T],e[T],M[T]];return o}},64859:function(ee,R,e){var M=e(25376),k=e(85656),o=e(22548),T=e(92872),_=e(34200),p=e(66741),s=e(92880).extendFlat,t=M({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=o.defaultLine,ee.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(p({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:_.newselection,activeselection:_.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},47552:function(ee,R,e){var M=e(95376),k="1.13.4",o='© <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['© <a target="_blank" href="https://carto.com/">Carto</a>',o].join(" "),_=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),p={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:o,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:_,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:_,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=M(p);ee.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:p,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(ee,R,e){var M=e(3400);ee.exports=function(k,o){var T=k.split(" "),_=T[0],p=T[1],s=M.isArrayOrTypedArray(o)?M.mean(o):o,t=.5+s/100,i=1.5+s/100,r=["",""],n=[0,0];switch(_){case"top":r[0]="top",n[1]=-i;break;case"bottom":r[0]="bottom",n[1]=i}switch(p){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},33688:function(ee,R,e){var M=e(3480),k=e(3400),o=k.strTranslate,T=k.strScale,_=e(84888).KY,p=e(9616),s=e(33428),t=e(43616),i=e(72736),r=e(14440),n="mapbox",a=R.constants=e(47552);function l(u){return typeof u=="string"&&(a.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0||u.indexOf("stamen")===0)}R.name=n,R.attr="subplot",R.idRoot=n,R.idRegex=R.attrRegex=k.counterRegex(n),R.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},R.layoutAttributes=e(5232),R.supplyLayoutDefaults=e(5976),R.plot=function(u){var h=u._fullLayout,c=u.calcdata,x=h._subplots[n];if(M.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var d=function(f,S){var w=f._fullLayout;if(f._context.mapboxAccessToken==="")return"";for(var E=[],O=[],C=!1,P=!1,D=0;D<S.length;D++){var U=w[S[D]],I=U.accesstoken;l(U.style)&&(I?k.pushUnique(E,I):(l(U._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),P=!0)),I&&k.pushUnique(O,I)}if(P){var N=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(N),new Error(N)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(O.length&&k.log(["Listed mapbox access token(s)",O.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,x);M.accessToken=d;for(var v=0;v<x.length;v++){var g=x[v],y=_(c,n,g),m=h[g],b=m._subplot;b||(b=new r(u,g),h[g]._subplot=b),b.viewInitial||(b.viewInitial={center:k.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),b.plot(y,h,u._promises)}},R.clean=function(u,h,c,x){for(var d=x._subplots[n]||[],v=0;v<d.length;v++){var g=d[v];!h[g]&&x[g]._subplot&&x[g]._subplot.destroy()}},R.toSVG=function(u){for(var h=u._fullLayout,c=h._subplots[n],x=h._size,d=0;d<c.length;d++){var v=h[c[d]],g=v.domain,y=v._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":y,x:x.l+x.w*g.x[0],y:x.t+x.h*(1-g.y[1]),width:x.w*(g.x[1]-g.x[0]),height:x.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"});var m=s.select(v._subplot.div);if(m.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var b=h._glimages.append("g");b.attr("transform",o(x.l+x.w*g.x[0]+10,x.t+x.h*(1-g.y[0])-31)),b.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),b.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),b.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),b.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var f=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=h._glimages.append("g"),w=S.append("text");w.text(f).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":f});var E=t.bBox(w.node()),O=x.w*(g.x[1]-g.x[0]);if(E.width>O/2){var C=f.split("|").join("<br>");w.text(C).attr("data-unformatted",C).call(i.convertToTspans,u),E=t.bBox(w.node())}w.attr("transform",o(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>O&&(P=O/(E.width+6));var D=[x.l+x.w*g.x[1],x.t+x.h*(1-g.y[0])];S.attr("transform",o(D[0],D[1])+T(P))}},R.updateFx=function(u){for(var h=u._fullLayout,c=h._subplots[n],x=0;x<c.length;x++)h[c[x]]._subplot.updateFx(h)}},22360:function(ee,R,e){var M=e(3400),k=e(72736).sanitizeHTML,o=e(89032),T=e(47552);function _(i,r){this.subplot=i,this.uid=i.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var p=_.prototype;function s(i){if(!i.visible)return!1;var r=i.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if(typeof r[n]!="string"||r[n].length===0)return!1;return!0}return M.isPlainObject(r)||typeof r=="string"&&r.length>0}function t(i){var r={},n={};switch(i.type){case"circle":M.extendFlat(n,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":M.extendFlat(n,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":M.extendFlat(n,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var a=i.symbol,l=o(a.textposition,a.iconsize);M.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":a.placement}),M.extendFlat(n,{"icon-color":i.color,"text-color":a.textfont.color,"text-opacity":i.opacity});break;case"raster":M.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:r,paint:n}}p.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=s(i)},p.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},p.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},p.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},p.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},p.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},p.updateSource=function(i){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,s(i)){var n=function(a){var l,u=a.sourcetype,h=a.source,c={type:u};return u==="geojson"?l="data":u==="vector"?l=typeof h=="string"?"url":"tiles":u==="raster"?(l="tiles",c.tileSize=256):u==="image"&&(l="url",c.coordinates=a.coordinates),c[l]=h,a.sourceattribution&&(c.attribution=k(a.sourceattribution)),c}(i);r.addSource(this.idSource,n)}},p.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){i=a;break}}return i},p.updateLayer=function(i){var r=this.subplot,n=t(i),a=this.lookupBelow(),l=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(i)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:n.layout,paint:n.paint},l),this.layerType=i.type,this.below=a},p.updateStyle=function(i){if(s(i)){var r=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},p.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},p.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},ee.exports=function(i,r,n){var a=new _(i,r);return a.update(n),a}},5232:function(ee,R,e){var M=e(3400),k=e(76308).defaultLine,o=e(86968).u,T=e(25376),_=e(52904).textposition,p=e(67824).overrideAll,s=e(31780).templatedArray,t=e(47552),i=T({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ee.exports=p({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:o({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:M.extendFlat({},_,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(ee,R,e){var M=e(3400),k=e(168),o=e(51272),T=e(5232);function _(s,t,i,r){i("accesstoken",r.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var n=i("bounds.west"),a=i("bounds.east"),l=i("bounds.south"),u=i("bounds.north");n!==void 0&&a!==void 0&&l!==void 0&&u!==void 0||delete t.bounds,o(s,t,{name:"layers",handleItemDefaults:p}),t._input=s}function p(s,t){function i(u,h){return M.coerce(s,t,T.layers,u,h)}if(i("visible")){var r,n=i("sourcetype"),a=n==="raster"||n==="image";i("source"),i("sourceattribution"),n==="vector"&&i("sourcelayer"),n==="image"&&i("coordinates"),a&&(r="raster");var l=i("type",r);a&&l!=="raster"&&(l=t.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),l==="circle"&&i("circle.radius"),l==="line"&&(i("line.width"),i("line.dash")),l==="fill"&&i("fill.outlinecolor"),l==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),M.coerceFont(i,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),i("symbol.textposition"),i("symbol.placement"))}}ee.exports=function(s,t,i){k(s,t,i,{type:"mapbox",attributes:T,handleDefaults:_,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(ee,R,e){var M=e(3480),k=e(3400),o=e(27144),T=e(24040),_=e(54460),p=e(86476),s=e(93024),t=e(72760),i=t.drawMode,r=t.selectMode,n=e(22676).prepSelect,a=e(22676).clearOutline,l=e(22676).clearSelectionsCache,u=e(22676).selectOnClick,h=e(47552),c=e(22360);function x(b,f){this.id=f,this.gd=b;var S=b._fullLayout,w=b._context;this.container=S._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var d=x.prototype;d.plot=function(b,f,S){var w,E=this,O=f[E.id];E.map&&O.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=E.map?new Promise(function(C,P){E.updateMap(b,f,C,P)}):new Promise(function(C,P){E.createMap(b,f,C,P)}),S.push(w)},d.createMap=function(b,f,S,w){var E=this,O=f[E.id],C=E.styleObj=g(O.style,f);E.accessToken=O.accesstoken;var P=O.bounds,D=P?[[P.west,P.south],[P.east,P.north]]:null,U=E.map=new M.Map({container:E.div,style:C.style,center:m(O.center),zoom:O.zoom,bearing:O.bearing,pitch:O.pitch,maxBounds:D,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(b,f);var I=[];I.push(new Promise(function(N){U.once("load",N)})),I=I.concat(o.fetchTraceGeoData(b)),Promise.all(I).then(function(){E.fillBelowLookup(b,f),E.updateData(b),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},d.updateMap=function(b,f,S,w){var E=this,O=E.map,C=f[this.id];E.rejectOnError(w);var P=[],D=g(C.style,f);JSON.stringify(E.styleObj)!==JSON.stringify(D)&&(E.styleObj=D,O.setStyle(D.style),E.traceHash={},P.push(new Promise(function(U){O.once("styledata",U)}))),P=P.concat(o.fetchTraceGeoData(b)),Promise.all(P).then(function(){E.fillBelowLookup(b,f),E.updateData(b),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},d.fillBelowLookup=function(b,f){var S,w,E=f[this.id].layers,O=this.belowLookup={},C=!1;for(S=0;S<b.length;S++){var P=b[S][0].trace,D=P._module;typeof P.below=="string"?w=P.below:D.getBelow&&(w=D.getBelow(P,this)),w===""&&(C=!0),O["trace-"+P.uid]=w||""}for(S=0;S<E.length;S++){var U=E[S];w=typeof U.below=="string"?U.below:C?"traces":"",O["layout-"+S]=w}var I,N,W={};for(I in O)W[w=O[I]]?W[w].push(I):W[w]=[I];for(w in W){var F=W[w];if(F.length>1)for(S=0;S<F.length;S++)(I=F[S]).indexOf("trace-")===0?(N=I.split("trace-")[1],this.traceHash[N]&&(this.traceHash[N].below=null)):I.indexOf("layout-")===0&&(N=I.split("layout-")[1],this.layerList[N]&&(this.layerList[N].below=null))}};var v={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function g(b,f){var S={};if(k.isPlainObject(b))S.id=b.id,S.style=b;else if(typeof b=="string")if(S.id=b,h.styleValuesMapbox.indexOf(b)!==-1)S.style=y(b);else if(h.stylesNonMapbox[b]){S.style=h.stylesNonMapbox[b];var w=S.style.sources["plotly-"+b],E=w?w.tiles:void 0;E&&E[0]&&E[0].slice(-9)==="?api_key="&&(E[0]+=f._mapboxAccessToken)}else S.style=b;else S.id=h.styleValueDflt,S.style=y(h.styleValueDflt);return S.transition={duration:0,delay:0},S}function y(b){return h.styleUrlPrefix+b+"-"+h.styleUrlSuffix}function m(b){return[b.lon,b.lat]}d.updateData=function(b){var f,S,w,E,O=this.traceHash,C=b.slice().sort(function(N,W){return v[N[0].trace.type]-v[W[0].trace.type]});for(w=0;w<C.length;w++){var P=C[w],D=!1;(f=O[(S=P[0].trace).uid])&&(f.type===S.type?(f.update(P),D=!0):f.dispose()),!D&&S._module&&(O[S.uid]=S._module.plot(this,P))}var U=Object.keys(O);e:for(w=0;w<U.length;w++){var I=U[w];for(E=0;E<b.length;E++)if(I===(S=b[E][0].trace).uid)continue e;(f=O[I]).dispose(),delete O[I]}},d.updateLayout=function(b){var f=this.map,S=b[this.id];this.dragging||this.wheeling||(f.setCenter(m(S.center)),f.setZoom(S.zoom),f.setBearing(S.bearing),f.setPitch(S.pitch)),this.updateLayers(b),this.updateFramework(b),this.updateFx(b),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},d.resolveOnRender=function(b){var f=this.map;f.on("render",function S(){f.loaded()&&(f.off("render",S),setTimeout(b,10))})},d.rejectOnError=function(b){var f=this.map;function S(){b(new Error(h.mapOnErrorMsg))}f.once("error",S),f.once("style.error",S),f.once("source.error",S),f.once("tile.error",S),f.once("layer.error",S)},d.createFramework=function(b){var f=this,S=f.div=document.createElement("div");S.id=f.uid,S.style.position="absolute",f.container.appendChild(S),f.xaxis={_id:"x",c2p:function(w){return f.project(w).x}},f.yaxis={_id:"y",c2p:function(w){return f.project(w).y}},f.updateFramework(b),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},_.setConvert(f.mockAxis,b)},d.initFx=function(b,f){var S=this,w=S.gd,E=S.map;function O(){s.loneUnhover(f._hoverlayer)}function C(){var P=S.getView();w.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var D=w._fullLayout;if(P.originalEvent||S.wheeling){var U=D[S.id];T.call("_storeDirectGUIEdit",w.layout,D._preGUI,S.getViewEdits(U));var I=S.getView();U._input.center=U.center=I.center,U._input.zoom=U.zoom=I.zoom,U._input.bearing=U.bearing=I.bearing,U._input.pitch=U.pitch=I.pitch,w.emit("plotly_relayout",S.getViewEditsWithDerived(I))}P.originalEvent&&P.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),D._rehover&&D._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var D=S.div.getBoundingClientRect(),U=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return D},S.xaxis.p2c=function(){return E.unproject(U).lng},S.yaxis.p2c=function(){return E.unproject(U).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===S.id&&w._fullLayout[S.id]&&s.hover(w,P,S.id)},s.hover(w,P,S.id),w._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,O()}),E.on("zoomstart",O),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var P=w._fullLayout[S.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S.getViewEdits(P));var D=S.viewInitial;E.setCenter(m(D.center)),E.setZoom(D.zoom),E.setBearing(D.bearing),E.setPitch(D.pitch);var U=S.getView();P._input.center=P.center=U.center,P._input.zoom=P.zoom=U.zoom,P._input.bearing=P.bearing=U.bearing,P._input.pitch=P.pitch=U.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",S.getViewEditsWithDerived(U))}),S.clearOutline=function(){l(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(D){var U=w._fullLayout.clickmode;U.indexOf("select")>-1&&u(D.originalEvent,w,[S.xaxis],[S.yaxis],S.id,P),U.indexOf("event")>-1&&s.click(w,D.originalEvent)}}},d.updateFx=function(b){var f=this,S=f.map,w=f.gd;if(!f.isStatic){var E,O=b.dragmode;E=function(D,U){U.isRect?(D.range={})[f.id]=[P([U.xmin,U.ymin]),P([U.xmax,U.ymax])]:(D.lassoPoints={})[f.id]=U.map(P)};var C=f.dragOptions;f.dragOptions=k.extendDeep(C||{},{dragmode:b.dragmode,element:f.div,gd:w,plotinfo:{id:f.id,domain:b[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:E},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),S.off("click",f.onClickInPanHandler),r(O)||i(O)?(S.dragPan.disable(),S.on("zoomstart",f.clearOutline),f.dragOptions.prepFn=function(D,U,I){n(D,U,I,f.dragOptions,O)},p.init(f.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",f.clearOutline),f.div.onmousedown=null,f.div.ontouchstart=null,f.div.removeEventListener("touchstart",f.div._ontouchstart),f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),S.on("click",f.onClickInPanHandler))}function P(D){var U=f.map.unproject(D);return[U.lng,U.lat]}},d.updateFramework=function(b){var f=b[this.id].domain,S=b._size,w=this.div.style;w.width=S.w*(f.x[1]-f.x[0])+"px",w.height=S.h*(f.y[1]-f.y[0])+"px",w.left=S.l+f.x[0]*S.w+"px",w.top=S.t+(1-f.y[1])*S.h+"px",this.xaxis._offset=S.l+f.x[0]*S.w,this.xaxis._length=S.w*(f.x[1]-f.x[0]),this.yaxis._offset=S.t+(1-f.y[1])*S.h,this.yaxis._length=S.h*(f.y[1]-f.y[0])},d.updateLayers=function(b){var f,S=b[this.id].layers,w=this.layerList;if(S.length!==w.length){for(f=0;f<w.length;f++)w[f].dispose();for(w=this.layerList=[],f=0;f<S.length;f++)w.push(c(this,f,S[f]))}else for(f=0;f<S.length;f++)w[f].update(S[f])},d.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},d.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},d.setOptions=function(b,f,S){for(var w in S)this.map[f](b,w,S[w])},d.getMapLayers=function(){return this.map.getStyle().layers},d.addLayer=function(b,f){var S=this.map;if(typeof f=="string"){if(f==="")return void S.addLayer(b,f);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(f===w[E].id)return void S.addLayer(b,f);k.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(b)},d.project=function(b){return this.map.project(new M.LngLat(b[0],b[1]))},d.getView=function(){var b=this.map,f=b.getCenter(),S={lon:f.lng,lat:f.lat},w=b.getCanvas(),E=parseInt(w.style.width),O=parseInt(w.style.height);return{center:S,zoom:b.getZoom(),bearing:b.getBearing(),pitch:b.getPitch(),_derived:{coordinates:[b.unproject([0,0]).toArray(),b.unproject([E,0]).toArray(),b.unproject([E,O]).toArray(),b.unproject([0,O]).toArray()]}}},d.getViewEdits=function(b){for(var f=this.id,S=["center","zoom","bearing","pitch"],w={},E=0;E<S.length;E++){var O=S[E];w[f+"."+O]=b[O]}return w},d.getViewEditsWithDerived=function(b){var f=this.id,S=this.getViewEdits(b);return S[f+"._derived"]=b._derived,S},ee.exports=x},66741:function(ee){ee.exports=function(R){var e=R.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(ee,R,e){var M=e(33428),k=e(94336).m_,o=e(57624).SO,T=e(38248),_=e(83160),p=e(24040),s=e(73060),t=e(31780),i=e(3400),r=e(76308),n=e(39032).BADNUM,a=e(79811),l=e(1936).clearOutline,u=e(55308),h=e(85656),c=e(16672),x=e(84888)._M,d=i.relinkPrivateKeys,v=i._,g=ee.exports={};i.extendFlat(g,p),g.attributes=e(45464),g.attributes.type.values=g.allTypes,g.fontAttrs=e(25376),g.layoutAttributes=e(64859);var y=g.transformsRegistry,m=e(62460);g.executeAPICommand=m.executeAPICommand,g.computeAPICommandBindings=m.computeAPICommandBindings,g.manageCommandObserver=m.manageCommandObserver,g.hasSimpleAPICommandBindings=m.hasSimpleAPICommandBindings,g.redrawText=function(F){return F=i.getGraphDiv(F),new Promise(function(j){setTimeout(function(){F._fullLayout&&(p.getComponentMethod("annotations","draw")(F),p.getComponentMethod("legend","draw")(F),p.getComponentMethod("colorbar","draw")(F),j(g.previousPromises(F)))},300)})},g.resize=function(F){var j;F=i.getGraphDiv(F);var H=new Promise(function(te,Q){F&&!i.isHidden(F)||Q(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(j=F._resolveResize),F._resolveResize=te,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||i.isHidden(F))te(F);else{delete F.layout.width,delete F.layout.height;var $=F.changed;F.autoplay=!0,p.call("relayout",F,{autosize:!0}).then(function(){F.changed=$,F._resolveResize===te&&(delete F._resolveResize,te(F))})}},100)});return j&&j(H),H},g.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},g.addLinks=function(F){if(F._context.showLink||F._context.showSources){var j=F._fullLayout,H=i.ensureSingle(j._paper,"text","js-plot-link-container",function(Y){Y.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var re=M.select(this);re.append("tspan").classed("js-link-to-tool",!0),re.append("tspan").classed("js-link-spacer",!0),re.append("tspan").classed("js-sourcelinks",!0)})}),te=H.node(),Q={y:j._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=j.width-20?(Q["text-anchor"]="start",Q.x=5):(Q["text-anchor"]="end",Q.x=j._paper.attr("width")-7),H.attr(Q);var $=H.select(".js-link-to-tool"),K=H.select(".js-link-spacer"),X=H.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(Y,re){re.text("");var se=re.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Y._context.linkText+" »");if(Y._context.sendData)se.on("click",function(){g.sendDataToCloud(Y)});else{var ae=window.location.pathname.split("/"),ce=window.location.search;se.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ae[2].split(".")[0]+"/"+ae[1]+ce})}}(F,$),K.text($.text()&&X.text()?" - ":"")}},g.sendDataToCloud=function(F){var j=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(j){F.emit("plotly_beforeexport");var H=M.select(F).append("div").attr("id","hiddenform").style("display","none"),te=H.append("form").attr({action:j+"/external",method:"post",target:"_blank"});return te.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(F,!1,"keepdata"),te.node().submit(),H.remove(),F.emit("plotly_afterexport"),!1}};var b=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],f=["year","month","dayMonth","dayMonthYear"];function S(F,j){var H=F._context.locale;H||(H="en-US");var te=!1,Q={};function $(ae){for(var ce=!0,fe=0;fe<j.length;fe++){var he=j[fe];Q[he]||(ae[he]?Q[he]=ae[he]:ce=!1)}ce&&(te=!0)}for(var K=0;K<2;K++){for(var X=F._context.locales,Y=0;Y<2;Y++){var re=(X[H]||{}).format;if(re&&($(re),te))break;X=p.localeRegistry}var se=H.split("-")[0];if(te||se===H)break;H=se}return te||$(p.localeRegistry.en.format),Q}function w(F,j){var H={_fullLayout:j},te=F._id.charAt(0)==="x",Q=F._mainAxis._anchorAxis,$="",K="",X="";if(Q&&(X=Q._mainAxis._id,$=te?F._id+X:X+F._id),!$||!j._plots[$]){$="";for(var Y=F._counterAxes,re=0;re<Y.length;re++){var se=Y[re],ae=te?F._id+se:se+F._id;K||(K=ae);var ce=a.getFromId(H,se);if(X&&ce.overlaying===X){$=ae;break}}}return $||K}function E(F){var j=F.transforms;if(Array.isArray(j)&&j.length)for(var H=0;H<j.length;H++){var te=j[H],Q=te._module||y[te.type];if(Q&&Q.makesData)return!0}return!1}function O(F,j,H,te){for(var Q=F.transforms,$=[F],K=0;K<Q.length;K++){var X=Q[K],Y=y[X.type];Y&&Y.transform&&($=Y.transform($,{transform:X,fullTrace:F,fullData:j,layout:H,fullLayout:te,transformIndex:K}))}return $}function C(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function P(F){var j=F.margin;if(!F._size){var H=F._size={l:Math.round(j.l),r:Math.round(j.r),t:Math.round(j.t),b:Math.round(j.b),p:Math.round(j.pad)};H.w=Math.round(F.width)-H.l-H.r,H.h=Math.round(F.height)-H.t-H.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={}),F._reservedMargin||(F._reservedMargin={})}g.supplyDefaults=function(F,j){var H=j&&j.skipUpdateCalc,te=F._fullLayout||{};if(te._skipDefaults)delete te._skipDefaults;else{var Q,$=F._fullLayout={},K=F.layout||{},X=F._fullData||[],Y=F._fullData=[],re=F.data||[],se=F.calcdata||[],ae=F._context||{};F._transitionData||g.createTransitionData(F),$._dfltTitle={plot:v(F,"Click to enter Plot title"),x:v(F,"Click to enter X axis title"),y:v(F,"Click to enter Y axis title"),colorbar:v(F,"Click to enter Colorscale title"),annotation:v(F,"new text")},$._traceWord=v(F,"trace");var ce=S(F,b);if($._mapboxAccessToken=ae.mapboxAccessToken,te._initialAutoSizeIsDone){var fe=te.width,he=te.height;g.supplyLayoutGlobalDefaults(K,$,ce),K.width||($.width=fe),K.height||($.height=he),g.sanitizeMargins($)}else{g.supplyLayoutGlobalDefaults(K,$,ce);var ve=!K.width||!K.height,ye=$.autosize,me=ae.autosizable;ve&&(ye||me)?g.plotAutoSize(F,K,$):ve&&g.sanitizeMargins($),!ye&&ve&&(K.width=$.width,K.height=$.height)}$._d3locale=function(Ee,Be){return Ee.decimal=Be.charAt(0),Ee.thousands=Be.charAt(1),{numberFormat:function(Ve){try{Ve=o(Ee).format(i.adjustFormat(Ve))}catch{return i.warnBadFormat(Ve),i.noFormat}return Ve},timeFormat:k(Ee).utcFormat}}(ce,$.separators),$._extraFormat=S(F,f),$._initialAutoSizeIsDone=!0,$._dataLength=re.length,$._modules=[],$._visibleModules=[],$._basePlotModules=[];var Me=$._subplots=function(){var Ee,Be,Ve=p.collectableSubplotTypes,Ze={};if(!Ve){Ve=[];var rt=p.subplotsRegistry;for(var it in rt){var dt=rt[it].attr;if(dt&&(Ve.push(it),Array.isArray(dt)))for(Be=0;Be<dt.length;Be++)i.pushUnique(Ve,dt[Be])}}for(Ee=0;Ee<Ve.length;Ee++)Ze[Ve[Ee]]=[];return Ze}(),Pe=$._splomAxes={x:{},y:{}},ge=$._splomSubplots={};$._splomGridDflt={},$._scatterStackOpts={},$._firstScatter={},$._alignmentOpts={},$._colorAxes={},$._requestRangeslider={},$._traceUids=function(Ee,Be){var Ve,Ze,rt=Be.length,it=[];for(Ve=0;Ve<Ee.length;Ve++){var dt=Ee[Ve]._fullInput;dt!==Ze&&it.push(dt),Ze=dt}var vt=it.length,ht=new Array(rt),Qe={};function Je(Pt,Mt){ht[Mt]=Pt,Qe[Pt]=1}function Tt(Pt,Mt){if(Pt&&typeof Pt=="string"&&!Qe[Pt])return Je(Pt,Mt),!0}for(Ve=0;Ve<rt;Ve++){var Ot=Be[Ve].uid;typeof Ot=="number"&&(Ot=String(Ot)),Tt(Ot,Ve)||Ve<vt&&Tt(it[Ve].uid,Ve)||Je(i.randstr(Qe),Ve)}return ht}(X,re),$._globalTransforms=(F._context||{}).globalTransforms,g.supplyDataDefaults(re,Y,K,$);var oe=Object.keys(Pe.x),ie=Object.keys(Pe.y);if(oe.length>1&&ie.length>1){for(p.getComponentMethod("grid","sizeDefaults")(K,$),Q=0;Q<oe.length;Q++)i.pushUnique(Me.xaxis,oe[Q]);for(Q=0;Q<ie.length;Q++)i.pushUnique(Me.yaxis,ie[Q]);for(var de in ge)i.pushUnique(Me.cartesian,de)}if($._has=g._hasPlotType.bind($),X.length===Y.length)for(Q=0;Q<Y.length;Q++)d(Y[Q],X[Q]);g.supplyLayoutModuleDefaults(K,$,Y,F._transitionData);var Se=$._visibleModules,_e=[];for(Q=0;Q<Se.length;Q++){var we=Se[Q].crossTraceDefaults;we&&i.pushUnique(_e,we)}for(Q=0;Q<_e.length;Q++)_e[Q](Y,$);$._hasOnlyLargeSploms=$._basePlotModules.length===1&&$._basePlotModules[0].name==="splom"&&oe.length>15&&ie.length>15&&$.shapes.length===0&&$.images.length===0,g.linkSubplots(Y,$,X,te),g.cleanPlot(Y,$,X,te);var Ae=!(!te._has||!te._has("gl2d")),Oe=!(!$._has||!$._has("gl2d")),ze=!(!te._has||!te._has("cartesian"))||Ae,pe=!(!$._has||!$._has("cartesian"))||Oe;ze&&!pe?te._bgLayer.remove():pe&&!ze&&($._shouldCreateBgLayer=!0),te._zoomlayer&&!F._dragging&&l({_fullLayout:te}),function(Ee,Be){var Ve,Ze=[];Be.meta&&(Ve=Be._meta={meta:Be.meta,layout:{meta:Be.meta}});for(var rt=0;rt<Ee.length;rt++){var it=Ee[rt];it.meta?Ze[it.index]=it._meta={meta:it.meta}:Be.meta&&(it._meta={meta:Be.meta}),Be.meta&&(it._meta.layout={meta:Be.meta})}Ze.length&&(Ve||(Ve=Be._meta={}),Ve.data=Ze)}(Y,$),d($,te),p.getComponentMethod("colorscale","crossTraceDefaults")(Y,$),$._preGUI||($._preGUI={}),$._tracePreGUI||($._tracePreGUI={});var be,ke=$._tracePreGUI,Ie={};for(be in ke)Ie[be]="old";for(Q=0;Q<Y.length;Q++)Ie[be=Y[Q]._fullInput.uid]||(ke[be]={}),Ie[be]="new";for(be in Ie)Ie[be]==="old"&&delete ke[be];P($),p.getComponentMethod("rangeslider","makeData")($),H||se.length!==Y.length||g.supplyDefaultsUpdateCalc(se,Y)}},g.supplyDefaultsUpdateCalc=function(F,j){for(var H=0;H<j.length;H++){var te=j[H],Q=(F[H]||[])[0];if(Q&&Q.trace){var $=Q.trace;if($._hasCalcTransform){var K,X,Y,re=$._arrayAttrs;for(K=0;K<re.length;K++)X=re[K],Y=i.nestedProperty($,X).get().slice(),i.nestedProperty(te,X).set(Y)}Q.trace=te}}},g.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},g._hasPlotType=function(F){var j,H=this._basePlotModules||[];for(j=0;j<H.length;j++)if(H[j].name===F)return!0;var te=this._modules||[];for(j=0;j<te.length;j++){var Q=te[j].name;if(Q===F)return!0;var $=p.modules[Q];if($&&$.categories[F])return!0}return!1},g.cleanPlot=function(F,j,H,te){var Q,$,K=te._basePlotModules||[];for(Q=0;Q<K.length;Q++){var X=K[Q];X.clean&&X.clean(F,j,H,te)}var Y=te._has&&te._has("gl"),re=j._has&&j._has("gl");Y&&!re&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var se=!!te._infolayer;e:for(Q=0;Q<H.length;Q++){var ae=H[Q].uid;for($=0;$<F.length;$++)if(ae===F[$].uid)continue e;se&&te._infolayer.select(".cb"+ae).remove()}},g.linkSubplots=function(F,j,H,te){var Q,$,K=te._plots||{},X=j._plots={},Y=j._subplots,re={_fullData:F,_fullLayout:j},se=Y.cartesian.concat(Y.gl2d||[]);for(Q=0;Q<se.length;Q++){var ae,ce=se[Q],fe=K[ce],he=a.getFromId(re,ce,"x"),ve=a.getFromId(re,ce,"y");for(fe?ae=X[ce]=fe:(ae=X[ce]={}).id=ce,he._counterAxes.push(ve._id),ve._counterAxes.push(he._id),he._subplotsWith.push(ce),ve._subplotsWith.push(ce),ae.xaxis=he,ae.yaxis=ve,ae._hasClipOnAxisFalse=!1,$=0;$<F.length;$++){var ye=F[$];if(ye.xaxis===ae.xaxis._id&&ye.yaxis===ae.yaxis._id&&ye.cliponaxis===!1){ae._hasClipOnAxisFalse=!0;break}}}var me,Me=a.list(re,null,!0);for(Q=0;Q<Me.length;Q++){var Pe=null;(me=Me[Q]).overlaying&&(Pe=a.getFromId(re,me.overlaying))&&Pe.overlaying&&(me.overlaying=!1,Pe=null),me._mainAxis=Pe||me,Pe&&(me.domain=Pe.domain.slice()),me._anchorAxis=me.anchor==="free"?null:a.getFromId(re,me.anchor)}for(Q=0;Q<Me.length;Q++)if((me=Me[Q])._counterAxes.sort(a.idSort),me._subplotsWith.sort(i.subplotSort),me._mainSubplot=w(me,j),me._counterAxes.length&&(me.spikemode&&me.spikemode.indexOf("across")!==-1||me.automargin&&me.mirror&&me.anchor!=="free"||p.getComponentMethod("rangeslider","isVisible")(me))){var ge=1,oe=0;for($=0;$<me._counterAxes.length;$++){var ie=a.getFromId(re,me._counterAxes[$]);ge=Math.min(ge,ie.domain[0]),oe=Math.max(oe,ie.domain[1])}ge<oe&&(me._counterDomainMin=ge,me._counterDomainMax=oe)}},g.clearExpandedTraceDefaultColors=function(F){var j,H,te;for(H=[],(j=F._module._colorAttrs)||(F._module._colorAttrs=j=[],s.crawl(F._module.attributes,function(Q,$,K,X){H[X]=$,H.length=X+1,Q.valType==="color"&&Q.dflt===void 0&&j.push(H.join("."))})),te=0;te<j.length;te++)i.nestedProperty(F,"_input."+j[te]).get()||i.nestedProperty(F,j[te]).set(null)},g.supplyDataDefaults=function(F,j,H,te){var Q,$,K,X=te._modules,Y=te._visibleModules,re=te._basePlotModules,se=0,ae=0;function ce(de){j.push(de);var Se=de._module;Se&&(i.pushUnique(X,Se),de.visible===!0&&i.pushUnique(Y,Se),i.pushUnique(re,de._module.basePlotModule),se++,de._input.visible!==!1&&ae++)}te._transformModules=[];var fe={},he=[],ve=(H.template||{}).data||{},ye=t.traceTemplater(ve);for(Q=0;Q<F.length;Q++){if(K=F[Q],($=ye.newTrace(K)).uid=te._traceUids[Q],g.supplyTraceDefaults(K,$,ae,te,Q),$.index=Q,$._input=K,$._expandedIndex=se,$.transforms&&$.transforms.length)for(var me=K.visible!==!1&&$.visible===!1,Me=O($,j,H,te),Pe=0;Pe<Me.length;Pe++){var ge=Me[Pe],oe={_template:$._template,type:$.type,uid:$.uid+Pe};me&&ge.visible===!1&&delete ge.visible,g.supplyTraceDefaults(ge,oe,se,te,Q),d(oe,ge),oe.index=Q,oe._input=K,oe._fullInput=$,oe._expandedIndex=se,oe._expandedInput=ge,ce(oe)}else $._fullInput=$,$._expandedInput=$,ce($);p.traceIs($,"carpetAxis")&&(fe[$.carpet]=$),p.traceIs($,"carpetDependent")&&he.push(Q)}for(Q=0;Q<he.length;Q++)if(($=j[he[Q]]).visible){var ie=fe[$.carpet];$._carpet=ie,ie&&ie.visible?($.xaxis=ie.xaxis,$.yaxis=ie.yaxis):$.visible=!1}},g.supplyAnimationDefaults=function(F){var j;F=F||{};var H={};function te(Q,$){return i.coerce(F||{},H,h,Q,$)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray(F.frame))for(H.frame=[],j=0;j<F.frame.length;j++)H.frame[j]=g.supplyAnimationFrameDefaults(F.frame[j]||{});else H.frame=g.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(H.transition=[],j=0;j<F.transition.length;j++)H.transition[j]=g.supplyAnimationTransitionDefaults(F.transition[j]||{});else H.transition=g.supplyAnimationTransitionDefaults(F.transition||{});return H},g.supplyAnimationFrameDefaults=function(F){var j={};function H(te,Q){return i.coerce(F||{},j,h.frame,te,Q)}return H("duration"),H("redraw"),j},g.supplyAnimationTransitionDefaults=function(F){var j={};function H(te,Q){return i.coerce(F||{},j,h.transition,te,Q)}return H("duration"),H("easing"),j},g.supplyFrameDefaults=function(F){var j={};function H(te,Q){return i.coerce(F,j,c,te,Q)}return H("group"),H("name"),H("traces"),H("baseframe"),H("data"),H("layout"),j},g.supplyTraceDefaults=function(F,j,H,te,Q){var $,K=te.colorway||r.defaults,X=K[H%K.length];function Y(Pe,ge){return i.coerce(F,j,g.attributes,Pe,ge)}var re=Y("visible");Y("type"),Y("name",te._traceWord+" "+Q),Y("uirevision",te.uirevision);var se=g.getModule(j);if(j._module=se,se){var ae=se.basePlotModule,ce=ae.attr,fe=ae.attributes;if(ce&&fe){var he=te._subplots,ve="";if(re||ae.name!=="gl2d"){if(Array.isArray(ce))for($=0;$<ce.length;$++){var ye=ce[$],me=i.coerce(F,j,fe,ye);he[ye]&&i.pushUnique(he[ye],me),ve+=me}else ve=i.coerce(F,j,fe,ce);he[ae.name]&&i.pushUnique(he[ae.name],ve)}}}if(re){if(Y("customdata"),Y("ids"),Y("meta"),p.traceIs(j,"showLegend")?(i.coerce(F,j,se.attributes.showlegend?se.attributes:g.attributes,"showlegend"),Y("legend"),Y("legendwidth"),Y("legendgroup"),Y("legendgrouptitle.text"),Y("legendrank"),j._dfltShowLegend=!0):j._dfltShowLegend=!1,se&&se.supplyDefaults(F,j,X,te),p.traceIs(j,"noOpacity")||Y("opacity"),p.traceIs(j,"notLegendIsolatable")&&(j.visible=!!j.visible),p.traceIs(j,"noHover")||(j.hovertemplate||i.coerceHoverinfo(F,j,te),j.type!=="parcats"&&p.getComponentMethod("fx","supplyDefaults")(F,j,X,te)),se&&se.selectPoints){var Me=Y("selectedpoints");i.isTypedArray(Me)&&(j.selectedpoints=Array.from(Me))}g.supplyTransformDefaults(F,j,te)}return j},g.hasMakesDataTransform=E,g.supplyTransformDefaults=function(F,j,H){if(j._length||E(F)){var te=H._globalTransforms||[],Q=H._transformModules||[];if(Array.isArray(F.transforms)||te.length!==0)for(var $=F.transforms||[],K=te.concat($),X=j.transforms=[],Y=0;Y<K.length;Y++){var re,se=K[Y],ae=se.type,ce=y[ae],fe=!(se._module&&se._module===ce),he=ce&&typeof ce.transform=="function";ce||i.warn("Unrecognized transform type "+ae+"."),ce&&ce.supplyDefaults&&(fe||he)?((re=ce.supplyDefaults(se,j,H,F)).type=ae,re._module=ce,i.pushUnique(Q,ce)):re=i.extendFlat({},se),X.push(re)}}},g.supplyLayoutGlobalDefaults=function(F,j,H){function te(se,ae){return i.coerce(F,j,g.layoutAttributes,se,ae)}var Q=F.template;i.isPlainObject(Q)&&(j.template=Q,j._template=Q.layout,j._dataTemplate=Q.data),te("autotypenumbers");var $=i.coerceFont(te,"font"),K=$.size;i.coerceFont(te,"title.font",$,{overrideDflt:{size:Math.round(1.4*K)}}),te("title.text",j._dfltTitle.plot),te("title.xref");var X=te("title.yref");te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var Y=te("title.automargin");te("title.x"),te("title.xanchor"),te("title.y"),te("title.yanchor"),Y&&(X==="paper"&&(j.title.y!==0&&(j.title.y=1),j.title.yanchor==="auto"&&(j.title.yanchor=j.title.y===0?"top":"bottom")),X==="container"&&(j.title.y==="auto"&&(j.title.y=1),j.title.yanchor==="auto"&&(j.title.yanchor=j.title.y<.5?"bottom":"top"))),te("uniformtext.mode")&&te("uniformtext.minsize"),te("autosize",!(F.width&&F.height)),te("width"),te("height"),te("minreducedwidth"),te("minreducedheight"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),F.width&&F.height&&g.sanitizeMargins(j),p.getComponentMethod("grid","sizeDefaults")(F,j),te("paper_bgcolor"),te("separators",H.decimal+H.thousands),te("hidesources"),te("colorway"),te("datarevision");var re=te("uirevision");te("editrevision",re),te("selectionrevision",re),p.getComponentMethod("modebar","supplyLayoutDefaults")(F,j),p.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,j,te),p.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,j,te),te("meta"),i.isPlainObject(F.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),p.getComponentMethod("calendars","handleDefaults")(F,j,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,j,te),i.coerce(F,j,u,"scattermode")},g.plotAutoSize=function(F,j,H){var te,Q,$=F._context||{},K=$.frameMargins,X=i.isPlotDiv(F);if(X&&F.emit("plotly_autosize"),$.fillFrame)te=window.innerWidth,Q=window.innerHeight,document.body.style.overflow="hidden";else{var Y=X?window.getComputedStyle(F):{};if(te=C(Y.width)||C(Y.maxWidth)||H.width,Q=C(Y.height)||C(Y.maxHeight)||H.height,T(K)&&K>0){var re=1-2*K;te=Math.round(re*te),Q=Math.round(re*Q)}}var se=g.layoutAttributes.width.min,ae=g.layoutAttributes.height.min;te<se&&(te=se),Q<ae&&(Q=ae);var ce=!j.width&&Math.abs(H.width-te)>1,fe=!j.height&&Math.abs(H.height-Q)>1;(fe||ce)&&(ce&&(H.width=te),fe&&(H.height=Q)),F._initialAutoSize||(F._initialAutoSize={width:te,height:Q}),g.sanitizeMargins(H)},g.supplyLayoutModuleDefaults=function(F,j,H,te){var Q,$,K,X=p.componentsRegistry,Y=j._basePlotModules,re=p.subplotsRegistry.cartesian;for(Q in X)(K=X[Q]).includeBasePlot&&K.includeBasePlot(F,j);for(var se in Y.length||Y.push(re),j._has("cartesian")&&(p.getComponentMethod("grid","contentDefaults")(F,j),re.finalizeSubplots(F,j)),j._subplots)j._subplots[se].sort(i.subplotSort);for($=0;$<Y.length;$++)(K=Y[$]).supplyLayoutDefaults&&K.supplyLayoutDefaults(F,j,H);var ae=j._modules;for($=0;$<ae.length;$++)(K=ae[$]).supplyLayoutDefaults&&K.supplyLayoutDefaults(F,j,H);var ce=j._transformModules;for($=0;$<ce.length;$++)(K=ce[$]).supplyLayoutDefaults&&K.supplyLayoutDefaults(F,j,H,te);for(Q in X)(K=X[Q]).supplyLayoutDefaults&&K.supplyLayoutDefaults(F,j,H)},g.purge=function(F){var j=F._fullLayout||{};j._glcontainer!==void 0&&(j._glcontainer.selectAll(".gl-canvas").remove(),j._glcontainer.remove(),j._glcanvas=null),j._modeBar&&j._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},g.style=function(F){var j,H=F._fullLayout._visibleModules,te=[];for(j=0;j<H.length;j++){var Q=H[j];Q.style&&i.pushUnique(te,Q.style)}for(j=0;j<te.length;j++)te[j](F)},g.sanitizeMargins=function(F){if(F&&F.margin){var j,H=F.width,te=F.height,Q=F.margin,$=H-(Q.l+Q.r),K=te-(Q.t+Q.b);$<0&&(j=(H-1)/(Q.l+Q.r),Q.l=Math.floor(j*Q.l),Q.r=Math.floor(j*Q.r)),K<0&&(j=(te-1)/(Q.t+Q.b),Q.t=Math.floor(j*Q.t),Q.b=Math.floor(j*Q.b))}},g.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(F,j){F._fullLayout._pushmarginIds[j]=1},g.autoMargin=function(F,j,H){var te=F._fullLayout,Q=te.width,$=te.height,K=te.margin,X=te.minreducedwidth,Y=te.minreducedheight,re=i.constrain(Q-K.l-K.r,2,X),se=i.constrain($-K.t-K.b,2,Y),ae=Math.max(0,Q-re),ce=Math.max(0,$-se),fe=te._pushmargin,he=te._pushmarginIds;if(K.autoexpand!==!1){if(H){var ve=H.pad;if(ve===void 0&&(ve=Math.min(12,K.l,K.r,K.t,K.b)),ae){var ye=(H.l+H.r)/ae;ye>1&&(H.l/=ye,H.r/=ye)}if(ce){var me=(H.t+H.b)/ce;me>1&&(H.t/=me,H.b/=me)}var Me=H.xl!==void 0?H.xl:H.x,Pe=H.xr!==void 0?H.xr:H.x,ge=H.yt!==void 0?H.yt:H.y,oe=H.yb!==void 0?H.yb:H.y;fe[j]={l:{val:Me,size:H.l+ve},r:{val:Pe,size:H.r+ve},b:{val:oe,size:H.b+ve},t:{val:ge,size:H.t+ve}},he[j]=1}else delete fe[j],delete he[j];if(!te._replotting)return g.doAutoMargin(F)}},g.doAutoMargin=function(F){var j=F._fullLayout,H=j.width,te=j.height;j._size||(j._size={}),P(j);var Q=j._size,$=j.margin,K={t:0,b:0,l:0,r:0},X=i.extendFlat({},Q),Y=$.l,re=$.r,se=$.t,ae=$.b,ce=j._pushmargin,fe=j._pushmarginIds,he=j.minreducedwidth,ve=j.minreducedheight;if($.autoexpand!==!1){for(var ye in ce)fe[ye]||delete ce[ye];var me=F._fullLayout._reservedMargin;for(var Me in me)for(var Pe in me[Me]){var ge=me[Me][Pe];K[Pe]=Math.max(K[Pe],ge)}for(var oe in ce.base={l:{val:0,size:Y},r:{val:1,size:re},t:{val:1,size:se},b:{val:0,size:ae}},K){var ie=0;for(var de in ce)de!=="base"&&T(ce[de][oe].size)&&(ie=ce[de][oe].size>ie?ce[de][oe].size:ie);var Se=Math.max(0,$[oe]-ie);K[oe]=Math.max(0,K[oe]-Se)}for(var _e in ce){var we=ce[_e].l||{},Ae=ce[_e].b||{},Oe=we.val,ze=we.size,pe=Ae.val,be=Ae.size,ke=H-K.r-K.l,Ie=te-K.t-K.b;for(var Ee in ce){if(T(ze)&&ce[Ee].r){var Be=ce[Ee].r.val,Ve=ce[Ee].r.size;if(Be>Oe){var Ze=(ze*Be+(Ve-ke)*Oe)/(Be-Oe),rt=(Ve*(1-Oe)+(ze-ke)*(1-Be))/(Be-Oe);Ze+rt>Y+re&&(Y=Ze,re=rt)}}if(T(be)&&ce[Ee].t){var it=ce[Ee].t.val,dt=ce[Ee].t.size;if(it>pe){var vt=(be*it+(dt-Ie)*pe)/(it-pe),ht=(dt*(1-pe)+(be-Ie)*(1-it))/(it-pe);vt+ht>ae+se&&(ae=vt,se=ht)}}}}}var Qe=i.constrain(H-$.l-$.r,2,he),Je=i.constrain(te-$.t-$.b,2,ve),Tt=Math.max(0,H-Qe),Ot=Math.max(0,te-Je);if(Tt){var Pt=(Y+re)/Tt;Pt>1&&(Y/=Pt,re/=Pt)}if(Ot){var Mt=(ae+se)/Ot;Mt>1&&(ae/=Mt,se/=Mt)}if(Q.l=Math.round(Y)+K.l,Q.r=Math.round(re)+K.r,Q.t=Math.round(se)+K.t,Q.b=Math.round(ae)+K.b,Q.p=Math.round($.pad),Q.w=Math.round(H)-Q.l-Q.r,Q.h=Math.round(te)-Q.t-Q.b,!j._replotting&&(g.didMarginChange(X,Q)||function(Ye){if("_redrawFromAutoMarginCount"in Ye._fullLayout)return!1;var Ne=a.list(Ye,"",!0);for(var We in Ne)if(Ne[We].autoshift||Ne[We].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in j?j._redrawFromAutoMarginCount++:j._redrawFromAutoMarginCount=1;var He=3*(1+Object.keys(fe).length);if(j._redrawFromAutoMarginCount<He)return p.call("_doPlot",F);j._size=X,i.warn("Too many auto-margin redraws.")}(function(Ye){var Ne=a.list(Ye,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(We){for(var ot=0;ot<Ne.length;ot++){var tt=Ne[ot][We];tt&&tt()}})})(F)};var D=["l","r","t","b","p","w","h"];function U(F,j,H){var te=!1,Q=[g.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(K){var X=Promise.resolve();if(!K)return X;for(;K.length;)X=X.then(K.shift());return X}(F._transitionData._interruptCallbacks)},H.prepareFn,g.rehover,g.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(K){F._transitioning=!0,j.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){te=!0}),H.redraw&&F._transitionData._interruptCallbacks.push(function(){return p.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var X=0,Y=0;function re(){return X++,function(){var se;Y++,te||Y!==X||(se=K,F._transitionData&&(function(ae){if(ae)for(;ae.length;)ae.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(H.redraw)return p.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(se)))}}H.runFn(re),setTimeout(re())})}],$=i.syncOrAsync(Q,F);return $&&$.then||($=Promise.resolve()),$.then(function(){return F})}g.didMarginChange=function(F,j){for(var H=0;H<D.length;H++){var te=D[H],Q=F[te],$=j[te];if(!T(Q)||Math.abs($-Q)>1)return!0}return!1},g.graphJson=function(F,j,H,te,Q,$){(Q&&j&&!F._fullData||Q&&!j&&!F._fullLayout)&&g.supplyDefaults(F);var K=Q?F._fullData:F.data,X=Q?F._fullLayout:F.layout,Y=(F._transitionData||{})._frames;function re(ce,fe){if(typeof ce=="function")return fe?"_function_":null;if(i.isPlainObject(ce)){var he,ve={};return Object.keys(ce).sort().forEach(function(Pe){if(["_","["].indexOf(Pe.charAt(0))===-1)if(typeof ce[Pe]!="function"){if(H==="keepdata"){if(Pe.substr(Pe.length-3)==="src")return}else if(H==="keepstream"){if(typeof(he=ce[Pe+"src"])=="string"&&he.indexOf(":")>0&&!i.isPlainObject(ce.stream))return}else if(H!=="keepall"&&typeof(he=ce[Pe+"src"])=="string"&&he.indexOf(":")>0)return;ve[Pe]=re(ce[Pe],fe)}else fe&&(ve[Pe]="_function")}),ve}var ye=Array.isArray(ce),me=i.isTypedArray(ce);if((ye||me)&&ce.dtype&&ce.shape){var Me=ce.bdata;return re({dtype:ce.dtype,shape:ce.shape,bdata:i.isArrayBuffer(Me)?_.encode(Me):Me},fe)}return ye?ce.map(function(Pe){return re(Pe,fe)}):me?i.simpleMap(ce,i.identity):i.isJSDate(ce)?i.ms2DateTimeLocal(+ce):ce}var se={data:(K||[]).map(function(ce){var fe=re(ce);return j&&delete fe.fit,fe})};if(!j&&(se.layout=re(X),Q)){var ae=X._size;se.layout.computed={margin:{b:ae.b,l:ae.l,r:ae.r,t:ae.t}}}return Y&&(se.frames=re(Y)),$&&(se.config=re(F._context,!0)),te==="object"?se:JSON.stringify(se)},g.modifyFrames=function(F,j){var H,te,Q,$=F._transitionData._frames,K=F._transitionData._frameHash;for(H=0;H<j.length;H++)switch((te=j[H]).type){case"replace":Q=te.value;var X=($[te.index]||{}).name,Y=Q.name;$[te.index]=K[Y]=Q,Y!==X&&(delete K[X],K[Y]=Q);break;case"insert":K[(Q=te.value).name]=Q,$.splice(te.index,0,Q);break;case"delete":delete K[(Q=$[te.index]).name],$.splice(te.index,1)}return Promise.resolve()},g.computeFrame=function(F,j){var H,te,Q,$,K=F._transitionData._frameHash;if(!j)throw new Error("computeFrame must be given a string frame name");var X=K[j.toString()];if(!X)return!1;for(var Y=[X],re=[X.name];X.baseframe&&(X=K[X.baseframe.toString()])&&re.indexOf(X.name)===-1;)Y.push(X),re.push(X.name);for(var se={};X=Y.pop();)if(X.layout&&(se.layout=g.extendLayout(se.layout,X.layout)),X.data){if(se.data||(se.data=[]),!(te=X.traces))for(te=[],H=0;H<X.data.length;H++)te[H]=H;for(se.traces||(se.traces=[]),H=0;H<X.data.length;H++)(Q=te[H])!=null&&(($=se.traces.indexOf(Q))===-1&&($=se.data.length,se.traces[$]=Q),se.data[$]=g.extendTrace(se.data[$],X.data[H]))}return se},g.recomputeFrameHash=function(F){for(var j=F._transitionData._frameHash={},H=F._transitionData._frames,te=0;te<H.length;te++){var Q=H[te];Q&&Q.name&&(j[Q.name]=Q)}},g.extendObjectWithContainers=function(F,j,H){var te,Q,$,K,X,Y,re,se=i.extendDeepNoArrays({},j||{}),ae=i.expandObjectPaths(se),ce={};if(H&&H.length)for($=0;$<H.length;$++)(Q=(te=i.nestedProperty(ae,H[$])).get())===void 0?i.nestedProperty(ce,H[$]).set(null):(te.set(null),i.nestedProperty(ce,H[$]).set(Q));if(F=i.extendDeepNoArrays(F||{},ae),H&&H.length){for($=0;$<H.length;$++)if(Y=i.nestedProperty(ce,H[$]).get()){for(re=(X=i.nestedProperty(F,H[$])).get(),Array.isArray(re)||(re=[],X.set(re)),K=0;K<Y.length;K++){var fe=Y[K];re[K]=fe===null?null:g.extendObjectWithContainers(re[K],fe)}X.set(re)}}return F},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=p.layoutArrayContainers,g.extendTrace=function(F,j){return g.extendObjectWithContainers(F,j,g.dataArrayContainers)},g.extendLayout=function(F,j){return g.extendObjectWithContainers(F,j,g.layoutArrayContainers)},g.transition=function(F,j,H,te,Q,$){var K={redraw:Q.redraw},X={},Y=[];return K.prepareFn=function(){for(var re=Array.isArray(j)?j.length:0,se=te.slice(0,re),ae=0;ae<se.length;ae++){var ce=se[ae],fe=F._fullData[ce]._module;if(fe){if(fe.animatable){var he=fe.basePlotModule.name;X[he]||(X[he]=[]),X[he].push(ce)}F.data[se[ae]]=g.extendTrace(F.data[se[ae]],j[ae])}}var ve=i.expandObjectPaths(i.extendDeepNoArrays({},H)),ye=/^[xy]axis[0-9]*$/;for(var me in ve)ye.test(me)&&delete ve[me].range;g.extendLayout(F.layout,ve),delete F.calcdata,g.supplyDefaults(F),g.doCalcdata(F);var Me=i.expandObjectPaths(H);if(Me){var Pe=F._fullLayout._plots;for(var ge in Pe){var oe=Pe[ge],ie=oe.xaxis,de=oe.yaxis,Se=ie.range.slice(),_e=de.range.slice(),we=null,Ae=null,Oe=null,ze=null;Array.isArray(Me[ie._name+".range"])?we=Me[ie._name+".range"].slice():Array.isArray((Me[ie._name]||{}).range)&&(we=Me[ie._name].range.slice()),Array.isArray(Me[de._name+".range"])?Ae=Me[de._name+".range"].slice():Array.isArray((Me[de._name]||{}).range)&&(Ae=Me[de._name].range.slice()),Se&&we&&(ie.r2l(Se[0])!==ie.r2l(we[0])||ie.r2l(Se[1])!==ie.r2l(we[1]))&&(Oe={xr0:Se,xr1:we}),_e&&Ae&&(de.r2l(_e[0])!==de.r2l(Ae[0])||de.r2l(_e[1])!==de.r2l(Ae[1]))&&(ze={yr0:_e,yr1:Ae}),(Oe||ze)&&Y.push(i.extendFlat({plotinfo:oe},Oe,ze))}}return Promise.resolve()},K.runFn=function(re){var se,ae,ce=F._fullLayout._basePlotModules,fe=Y.length;if(H)for(ae=0;ae<ce.length;ae++)ce[ae].transitionAxes&&ce[ae].transitionAxes(F,Y,$,re);for(var he in fe?((se=i.extendFlat({},$)).duration=0,delete X.cartesian):se=$,X){var ve=X[he];F._fullData[ve[0]]._module.basePlotModule.plot(F,ve,se,re)}},U(F,$,K)},g.transitionFromReact=function(F,j,H,te){var Q=F._fullLayout,$=Q.transition,K={},X=[];return K.prepareFn=function(){var Y=Q._plots;for(var re in K.redraw=!1,j.anim==="some"&&(K.redraw=!0),H.anim==="some"&&(K.redraw=!0),Y){var se=Y[re],ae=se.xaxis,ce=se.yaxis,fe=te[ae._name].range.slice(),he=te[ce._name].range.slice(),ve=ae.range.slice(),ye=ce.range.slice();ae.setScale(),ce.setScale();var me=null,Me=null;ae.r2l(fe[0])===ae.r2l(ve[0])&&ae.r2l(fe[1])===ae.r2l(ve[1])||(me={xr0:fe,xr1:ve}),ce.r2l(he[0])===ce.r2l(ye[0])&&ce.r2l(he[1])===ce.r2l(ye[1])||(Me={yr0:he,yr1:ye}),(me||Me)&&X.push(i.extendFlat({plotinfo:se},me,Me))}return Promise.resolve()},K.runFn=function(Y){for(var re,se,ae,ce=F._fullData,fe=F._fullLayout._basePlotModules,he=[],ve=0;ve<ce.length;ve++)he.push(ve);function ye(){if(F._fullLayout)for(var Me=0;Me<fe.length;Me++)fe[Me].transitionAxes&&fe[Me].transitionAxes(F,X,re,Y)}function me(){if(F._fullLayout)for(var Me=0;Me<fe.length;Me++)fe[Me].plot(F,ae,se,Y)}X.length&&j.anim?$.ordering==="traces first"?(re=i.extendFlat({},$,{duration:0}),ae=he,se=$,setTimeout(ye,$.duration),me()):(re=$,ae=null,se=i.extendFlat({},$,{duration:0}),setTimeout(me,re.duration),ye()):X.length?(re=$,ye()):j.anim&&(ae=he,se=$,me())},U(F,$,K)},g.doCalcdata=function(F,j){var H,te,Q,$,K=a.list(F),X=F._fullData,Y=F._fullLayout,re=new Array(X.length),se=(F.calcdata||[]).slice();for(F.calcdata=re,Y._numBoxes=0,Y._numViolins=0,Y._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,Y._piecolormap={},Y._sunburstcolormap={},Y._treemapcolormap={},Y._iciclecolormap={},Y._funnelareacolormap={},Q=0;Q<X.length;Q++)Array.isArray(j)&&j.indexOf(Q)===-1&&(re[Q]=se[Q]);for(Q=0;Q<X.length;Q++)(H=X[Q])._arrayAttrs=s.findArrayAttributes(H),H._extremes={};var ae=Y._subplots.polar||[];for(Q=0;Q<ae.length;Q++)K.push(Y[ae[Q]].radialaxis,Y[ae[Q]].angularaxis);for(var ce in Y._colorAxes){var fe=Y[ce];fe.cauto!==!1&&(delete fe.cmin,delete fe.cmax)}var he=!1;function ve(Me){if(H=X[Me],te=H._module,H.visible===!0&&H.transforms){if(te&&te.calc){var Pe=te.calc(F,H);Pe[0]&&Pe[0].t&&Pe[0].t._scene&&delete Pe[0].t._scene.dirty}for($=0;$<H.transforms.length;$++){var ge=H.transforms[$];(te=y[ge.type])&&te.calcTransform&&(H._hasCalcTransform=!0,he=!0,te.calcTransform(F,H,ge))}}}function ye(Me,Pe){if(H=X[Me],!!(te=H._module).isContainer===Pe){var ge=[];if(H.visible===!0&&H._length!==0){delete H._indexToPoints;var oe=H.transforms||[];for($=oe.length-1;$>=0;$--)if(oe[$].enabled){H._indexToPoints=oe[$]._indexToPoints;break}te&&te.calc&&(ge=te.calc(F,H))}Array.isArray(ge)&&ge[0]||(ge=[{x:n,y:n}]),ge[0].t||(ge[0].t={}),ge[0].trace=H,re[Me]=ge}}for(N(K,X,Y),Q=0;Q<X.length;Q++)ye(Q,!0);for(Q=0;Q<X.length;Q++)ve(Q);for(he&&N(K,X,Y),Q=0;Q<X.length;Q++)ye(Q,!0);for(Q=0;Q<X.length;Q++)ye(Q,!1);W(F);var me=function(Me,Pe){var ge,oe,ie,de,Se,_e=[];function we(We,ot,tt){var Re=ot._id.charAt(0);if(We==="histogram2dcontour"){var Fe=ot._counterAxes[0],nt=a.getFromId(Pe,Fe),Ge=Re==="x"||Fe==="x"&&nt.type==="category",ct=Re==="y"||Fe==="y"&&nt.type==="category";return function(pt,gt){return pt===0||gt===0||Ge&&pt===tt[gt].length-1||ct&&gt===tt.length-1?-1:(Re==="y"?gt:pt)-1}}return function(pt,gt){return Re==="y"?gt:pt}}var Ae={min:function(We){return i.aggNums(Math.min,null,We)},max:function(We){return i.aggNums(Math.max,null,We)},sum:function(We){return i.aggNums(function(ot,tt){return ot+tt},null,We)},total:function(We){return i.aggNums(function(ot,tt){return ot+tt},null,We)},mean:function(We){return i.mean(We)},median:function(We){return i.median(We)}};function Oe(We,ot){return We[1]-ot[1]}function ze(We,ot){return ot[1]-We[1]}for(ge=0;ge<Me.length;ge++){var pe=Me[ge];if(pe.type==="category"){var be=pe.categoryorder.match(I);if(be){var ke=be[1],Ie=be[2],Ee=pe._id.charAt(0),Be=Ee==="x",Ve=[];for(oe=0;oe<pe._categories.length;oe++)Ve.push([pe._categories[oe],[]]);for(oe=0;oe<pe._traceIndices.length;oe++){var Ze=pe._traceIndices[oe],rt=Pe._fullData[Ze];if(rt.visible===!0){var it=rt.type;p.traceIs(rt,"histogram")&&(delete rt._xautoBinFinished,delete rt._yautoBinFinished);var dt=it==="splom",vt=it==="scattergl",ht=Pe.calcdata[Ze];for(ie=0;ie<ht.length;ie++){var Qe,Je,Tt=ht[ie];if(dt){var Ot=rt._axesDim[pe._id];if(!Be){var Pt=rt._diag[Ot][0];Pt&&(pe=Pe._fullLayout[a.id2name(Pt)])}var Mt=Tt.trace.dimensions[Ot].values;for(de=0;de<Mt.length;de++)for(Qe=pe._categoriesMap[Mt[de]],Se=0;Se<Tt.trace.dimensions.length;Se++)if(Se!==Ot){var He=Tt.trace.dimensions[Se];Ve[Qe][1].push(He.values[de])}}else if(vt){for(de=0;de<Tt.t.x.length;de++)Be?(Qe=Tt.t.x[de],Je=Tt.t.y[de]):(Qe=Tt.t.y[de],Je=Tt.t.x[de]),Ve[Qe][1].push(Je);Tt.t&&Tt.t._scene&&delete Tt.t._scene.dirty}else if(Tt.hasOwnProperty("z")){Je=Tt.z;var Ye=we(rt.type,pe,Je);for(de=0;de<Je.length;de++)for(Se=0;Se<Je[de].length;Se++)(Qe=Ye(Se,de))+1&&Ve[Qe][1].push(Je[de][Se])}else for((Qe=Tt.p)===void 0&&(Qe=Tt[Ee]),(Je=Tt.s)===void 0&&(Je=Tt.v),Je===void 0&&(Je=Be?Tt.y:Tt.x),Array.isArray(Je)||(Je=Je===void 0?[]:[Je]),de=0;de<Je.length;de++)Ve[Qe][1].push(Je[de])}}}pe._categoriesValue=Ve;var Ne=[];for(oe=0;oe<Ve.length;oe++)Ne.push([Ve[oe][0],Ae[ke](Ve[oe][1])]);Ne.sort(Ie==="descending"?ze:Oe),pe._categoriesAggregatedValue=Ne,pe._initialCategories=Ne.map(function(We){return We[0]}),_e=_e.concat(pe.sortByInitialCategories())}}}return _e}(K,F);if(me.length){for(Y._numBoxes=0,Y._numViolins=0,Q=0;Q<me.length;Q++)ye(me[Q],!0);for(Q=0;Q<me.length;Q++)ye(me[Q],!1);W(F)}p.getComponentMethod("fx","calc")(F),p.getComponentMethod("errorbars","calc")(F)};var I=/(total|sum|min|max|mean|median) (ascending|descending)/;function N(F,j,H){var te={};function Q(Y){Y.clearCalc(),Y.type==="multicategory"&&Y.setupMultiCategory(j),te[Y._id]=1}i.simpleMap(F,Q);for(var $=H._axisMatchGroups||[],K=0;K<$.length;K++)for(var X in $[K])te[X]||Q(H[a.id2name(X)])}function W(F){var j,H,te,Q=F._fullLayout,$=Q._visibleModules,K={};for(H=0;H<$.length;H++){var X=$[H],Y=X.crossTraceCalc;if(Y){var re=X.basePlotModule.name;K[re]?i.pushUnique(K[re],Y):K[re]=[Y]}}for(te in K){var se=K[te],ae=Q._subplots[te];if(Array.isArray(ae))for(j=0;j<ae.length;j++){var ce=ae[j],fe=te==="cartesian"?Q._plots[ce]:Q[ce];for(H=0;H<se.length;H++)se[H](F,fe,ce)}else for(H=0;H<se.length;H++)se[H](F)}}g.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},g.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},g.reselect=function(F){var j=F._fullLayout,H=(F.layout||{}).selections,te=j._previousSelections;j._previousSelections=H;var Q=j._reselect||JSON.stringify(H)!==JSON.stringify(te);p.getComponentMethod("selections","reselect")(F,Q)},g.generalUpdatePerTraceModule=function(F,j,H,te){var Q,$=j.traceHash,K={};for(Q=0;Q<H.length;Q++){var X=H[Q],Y=X[0].trace;Y.visible&&(K[Y.type]=K[Y.type]||[],K[Y.type].push(X))}for(var re in $)if(!K[re]){var se=$[re][0];se[0].trace.visible=!1,K[re]=[se]}for(var ae in K){var ce=K[ae];ce[0][0].trace._module.plot(F,j,i.filterVisible(ce),te)}j.traceHash=K},g.plotBasePlot=function(F,j,H,te,Q){var $=p.getModule(F),K=x(j.calcdata,$)[0];$.plot(j,K,te,Q)},g.cleanBasePlot=function(F,j,H,te,Q){var $=Q._has&&Q._has(F),K=H._has&&H._has(F);$&&!K&&Q["_"+F+"layer"].selectAll("g.trace").remove()}},39360:function(ee){ee.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(ee,R,e){var M=e(3400),k=e(92065).tester,o=M.findIndexOfMin,T=M.isAngleInsideSector,_=M.angleDelta,p=M.angleDist;function s(n,a,l,u){var h,c,x=u[0],d=u[1],v=i(Math.sin(a)-Math.sin(n)),g=i(Math.cos(a)-Math.cos(n)),y=Math.tan(l),m=i(1/y),b=v/g,f=d-b*x;return m?v&&g?c=y*(h=f/(y-b)):g?(h=d*m,c=d):(h=x,c=x*y):v&&g?(h=0,c=f):g?(h=0,c=d):h=c=NaN,[h,c]}function t(n,a,l,u){return M.isFullCircle([a,l])?function(h,c){var x,d=c.length,v=new Array(d+1);for(x=0;x<d;x++){var g=c[x];v[x]=[h*Math.cos(g),h*Math.sin(g)]}return v[x]=v[0].slice(),v}(n,u):function(h,c,x,d){var v,g,y=d.length,m=[];function b(U){return[h*Math.cos(U),h*Math.sin(U)]}function f(U,I,N){return s(U,I,N,b(U))}function S(U){return M.mod(U,y)}function w(U){return T(U,[c,x])}var E=o(d,function(U){return w(U)?p(U,c):1/0}),O=f(d[E],d[S(E-1)],c);for(m.push(O),v=E,g=0;g<y;v++,g++){var C=d[S(v)];if(!w(C))break;m.push(b(C))}var P=o(d,function(U){return w(U)?p(U,x):1/0}),D=f(d[P],d[S(P+1)],x);return m.push(D),m.push([0,0]),m.push(m[0].slice()),m}(n,a,l,u)}function i(n){return Math.abs(n)>1e-10?n:0}function r(n,a,l){a=a||0,l=l||0;for(var u=n.length,h=new Array(u),c=0;c<u;c++){var x=n[c];h[c]=[a+x[0],l-x[1]]}return h}ee.exports={isPtInsidePolygon:function(n,a,l,u,h){if(!T(a,u))return!1;var c,x;l[0]<l[1]?(c=l[0],x=l[1]):(c=l[1],x=l[0]);var d=k(t(c,u[0],u[1],h)),v=k(t(x,u[0],u[1],h)),g=[n*Math.cos(a),n*Math.sin(a)];return v.contains(g)&&!d.contains(g)},findPolygonOffset:function(n,a,l,u){for(var h=1/0,c=1/0,x=t(n,a,l,u),d=0;d<x.length;d++){var v=x[d];h=Math.min(h,v[0]),c=Math.min(c,-v[1])}return[h,c]},findEnclosingVertexAngles:function(n,a){var l=o(a,function(h){var c=_(h,n);return c>0?c:1/0}),u=M.mod(l+1,a.length);return[a[l],a[u]]},findIntersectionXY:s,findXYatLength:function(n,a,l,u){var h=-a*l,c=a*a+1,x=2*(a*h-l),d=h*h+l*l-n*n,v=Math.sqrt(x*x-4*c*d),g=(-x+v)/(2*c),y=(-x-v)/(2*c);return[[g,a*g+h+u],[y,a*y+h+u]]},clampTiny:i,pathPolygon:function(n,a,l,u,h,c){return"M"+r(t(n,a,l,u),h,c).join("L")},pathPolygonAnnulus:function(n,a,l,u,h,c,x){var d,v;n<a?(d=n,v=a):(d=a,v=n);var g=r(t(d,l,u,h),c,x);return"M"+r(t(v,l,u,h),c,x).reverse().join("L")+"M"+g.join("L")}}},40872:function(ee,R,e){var M=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(39360),_=T.attr,p=T.name,s=k(p),t={};t[_]={valType:"subplotid",dflt:p,editType:"calc"},ee.exports={attr:_,name:p,idRoot:p,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,a=r._subplots[p],l=0;l<a.length;l++){var u=a[l],h=M(n,p,u),c=r[u]._subplot;c||(c=o(i,u),r[u]._subplot=c),c.plot(h,r,i._promises)}},clean:function(i,r,n,a){for(var l=a._subplots[p]||[],u=a._has&&a._has("gl"),h=r._has&&r._has("gl"),c=u&&!h,x=0;x<l.length;x++){var d=l[x],v=a[d]._subplot;if(!r[d]&&v)for(var g in v.framework.remove(),v.layers["radial-axis-title"].remove(),v.clipPaths)v.clipPaths[g].remove();c&&v._scene&&(v._scene.destroy(),v._scene=null)}},toSVG:e(57952).toSVG}},95300:function(ee,R,e){var M=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,_=e(67824).overrideAll,p=_({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=_({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},k.minallowed,{editType:"plot"}),maxallowed:T({},k.maxallowed,{editType:"plot"}),range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:k.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,p,s);var i={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(i,p,s),ee.exports={domain:o({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(ee,R,e){var M=e(3400),k=e(76308),o=e(31780),T=e(168),_=e(84888).op,p=e(26332),s=e(25404),t=e(95936),i=e(42568),r=e(22416),n=e(42136),a=e(76808),l=e(52976),u=e(95300),h=e(57696),c=e(39360),x=c.axisNames;function d(g,y,m,b){var f=m("bgcolor");b.bgColor=k.combine(f,b.paper_bgcolor);var S=m("sector");m("hole");var w,E=_(b.fullData,c.name,b.id),O=b.layoutOut;function C(me,Me){return m(w+"."+me,Me)}for(var P=0;P<x.length;P++){w=x[P],M.isPlainObject(g[w])||(g[w]={});var D=g[w],U=o.newContainer(y,w);U._id=U._name=w,U._attr=b.id+"."+w,U._traceIndices=E.map(function(me){return me._expandedIndex});var I=c.axisName2dataArray[w],N=v(D,U,C,E,I,b);r(D,U,C,{axData:E,dataAttr:I});var W=C("visible");switch(h(U,y,O),C("uirevision",y.uirevision),U._m=1,w){case"radialaxis":C("minallowed"),C("maxallowed");var F,j=C("range"),H=U.getAutorangeDflt(j),te=C("autorange",H);!j||(j[0]!==null||j[1]!==null)&&(j[0]!==null&&j[1]!==null||te!=="reversed"&&te!==!0)&&(j[0]===null||te!=="min"&&te!=="max reversed")&&(j[1]===null||te!=="max"&&te!=="min reversed")||(j=void 0,delete U.range,U.autorange=!0,F=!0),F||(te=C("autorange",H=U.getAutorangeDflt(j))),D.autorange=te,te&&(a(C,te,j),N!=="linear"&&N!=="-"||C("rangemode"),U.isReversed()&&(U._m=-1)),U.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(N==="date"){M.log("Polar plots do not support date angular axes yet.");for(var Q=0;Q<E.length;Q++)E[Q].visible=!1;N=D.type=U.type="linear"}C(N==="linear"?"thetaunit":"period");var $=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[$])}if(i(D,U,C,U.type,{tickSuffixDflt:U.thetaunit==="degrees"?"°":void 0}),W){var K,X,Y,re,se,ae,ce,fe,he,ve,ye=b.font||{};X=(K=C("color"))===D.color?K:ye.color,Y=ye.size,re=ye.family,se=ye.weight,ae=ye.style,ce=ye.variant,fe=ye.textcase,he=ye.lineposition,ve=ye.shadow,p(D,U,C,U.type),t(D,U,C,U.type,{font:{weight:se,style:ae,variant:ce,textcase:fe,lineposition:he,shadow:ve,color:X,size:Y,family:re},noAutotickangles:w==="angularaxis"}),s(D,U,C,{outerTicks:!0}),n(D,U,C,{dfltColor:K,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[w]}),C("layer"),w==="radialaxis"&&(C("side"),C("angle",S[0]),C("title.text"),M.coerceFont(C,"title.font",{weight:se,style:ae,variant:ce,textcase:fe,lineposition:he,shadow:ve,color:X,size:M.bigFont(Y),family:re}))}N!=="category"&&C("hoverformat"),U._input=D}y.angularaxis.type==="category"&&m("gridshape")}function v(g,y,m,b,f,S){var w=m("autotypenumbers",S.autotypenumbersDflt);if(m("type")==="-"){for(var E,O=0;O<b.length;O++)if(b[O].visible){E=b[O];break}E&&E[f]&&(y.type=l(E[f],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),y.type==="-"?y.type="linear":g.type=y.type}return y.type}ee.exports=function(g,y,m){T(g,y,m,{type:c.name,attributes:u,handleDefaults:d,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:m,layoutOut:y})}},62400:function(ee,R,e){var M=e(33428),k=e(49760),o=e(24040),T=e(3400),_=T.strRotate,p=T.strTranslate,s=e(76308),t=e(43616),i=e(7316),r=e(54460),n=e(78344),a=e(57696),l=e(19280).doAutoRange,u=e(51184),h=e(86476),c=e(93024),x=e(81668),d=e(22676).prepSelect,v=e(22676).selectOnClick,g=e(22676).clearOutline,y=e(93972),m=e(73696),b=e(39172).redrawReglTraces,f=e(84284).MID_SHIFT,S=e(39360),w=e(57384),E=e(36416),O=E.smith,C=E.reactanceArc,P=E.resistanceArc,D=E.smithTransform,U=T._,I=T.mod,N=T.deg2rad,W=T.rad2deg;function F($,K,X){this.isSmith=X||!1,this.id=K,this.gd=$,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Y=$._fullLayout,re="clip"+Y._uid+K;this.clipIds.forTraces=re+"-for-traces",this.clipPaths.forTraces=Y._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Y["_"+(X?"smith":"polar")+"layer"].append("g").attr("class",K),this.getHole=function(se){return this.isSmith?0:se.hole},this.getSector=function(se){return this.isSmith?[0,360]:se.sector},this.getRadial=function(se){return this.isSmith?se.realaxis:se.radialaxis},this.getAngular=function(se){return this.isSmith?se.imaginaryaxis:se.angularaxis},X||(this.radialTickLayout=null,this.angularTickLayout=null)}var j=F.prototype;function H($){var K=$.ticks+String($.ticklen)+String($.showticklabels);return"side"in $&&(K+=$.side),K}function te($,K){return K[T.findIndexOfMin(K,function(X){return T.angleDist($,X)})]}function Q($,K,X){return K?($.attr("display",null),$.attr(X)):$&&$.attr("display","none"),$}ee.exports=function($,K,X){return new F($,K,X)},j.plot=function($,K){for(var X=this,Y=K[X.id],re=!1,se=0;se<$.length;se++)if($[se][0].trace.cliponaxis===!1){re=!0;break}X._hasClipOnAxisFalse=re,X.updateLayers(K,Y),X.updateLayout(K,Y),i.generalUpdatePerTraceModule(X.gd,X,$,Y),X.updateFx(K,Y),X.isSmith&&(delete Y.realaxis.range,delete Y.imaginaryaxis.range)},j.updateLayers=function($,K){var X=this,Y=X.isSmith,re=X.layers,se=X.getRadial(K),ae=X.getAngular(K),ce=S.layerNames,fe=ce.indexOf("frontplot"),he=ce.slice(0,fe),ve=ae.layer==="below traces",ye=se.layer==="below traces";ve&&he.push("angular-line"),ye&&he.push("radial-line"),ve&&he.push("angular-axis"),ye&&he.push("radial-axis"),he.push("frontplot"),ve||he.push("angular-line"),ye||he.push("radial-line"),ve||he.push("angular-axis"),ye||he.push("radial-axis");var me=(Y?"smith":"polar")+"sublayer",Me=X.framework.selectAll("."+me).data(he,String);Me.enter().append("g").attr("class",function(Pe){return me+" "+Pe}).each(function(Pe){var ge=re[Pe]=M.select(this);switch(Pe){case"frontplot":Y||ge.append("g").classed("barlayer",!0),ge.append("g").classed("scatterlayer",!0);break;case"backplot":ge.append("g").classed("maplayer",!0);break;case"plotbg":re.bg=ge.append("path");break;case"radial-grid":case"angular-grid":ge.style("fill","none");break;case"radial-line":ge.append("line").style("fill","none");break;case"angular-line":ge.append("path").style("fill","none")}}),Me.order()},j.updateLayout=function($,K){var X=this,Y=X.layers,re=$._size,se=X.getRadial(K),ae=X.getAngular(K),ce=K.domain.x,fe=K.domain.y;X.xOffset=re.l+re.w*ce[0],X.yOffset=re.t+re.h*(1-fe[1]);var he=X.xLength=re.w*(ce[1]-ce[0]),ve=X.yLength=re.h*(fe[1]-fe[0]),ye=X.getSector(K);X.sectorInRad=ye.map(N);var me,Me,Pe,ge,oe,ie=X.sectorBBox=function(rt){var it,dt=rt[0],vt=rt[1]-dt,ht=I(dt,360),Qe=ht+vt,Je=Math.cos(N(ht)),Tt=Math.sin(N(ht)),Ot=Math.cos(N(Qe)),Pt=Math.sin(N(Qe));return it=ht<=90&&Qe>=90||ht>90&&Qe>=450?1:Tt<=0&&Pt<=0?0:Math.max(Tt,Pt),[ht<=180&&Qe>=180||ht>180&&Qe>=540?-1:Je>=0&&Ot>=0?0:Math.min(Je,Ot),ht<=270&&Qe>=270||ht>270&&Qe>=630?-1:Tt>=0&&Pt>=0?0:Math.min(Tt,Pt),Qe>=360?1:Je<=0&&Ot<=0?0:Math.max(Je,Ot),it]}(ye),de=ie[2]-ie[0],Se=ie[3]-ie[1],_e=ve/he,we=Math.abs(Se/de);_e>we?(me=he,oe=(ve-(Me=he*we))/re.h/2,Pe=[ce[0],ce[1]],ge=[fe[0]+oe,fe[1]-oe]):(Me=ve,oe=(he-(me=ve/we))/re.w/2,Pe=[ce[0]+oe,ce[1]-oe],ge=[fe[0],fe[1]]),X.xLength2=me,X.yLength2=Me,X.xDomain2=Pe,X.yDomain2=ge;var Ae,Oe=X.xOffset2=re.l+re.w*Pe[0],ze=X.yOffset2=re.t+re.h*(1-ge[1]),pe=X.radius=me/de,be=X.innerRadius=X.getHole(K)*pe,ke=X.cx=Oe-pe*ie[0],Ie=X.cy=ze+pe*ie[3],Ee=X.cxx=ke-Oe,Be=X.cyy=Ie-ze,Ve=se.side;Ve==="counterclockwise"?(Ae=Ve,Ve="top"):Ve==="clockwise"&&(Ae=Ve,Ve="bottom"),X.radialAxis=X.mockAxis($,K,se,{_id:"x",side:Ve,_trueSide:Ae,domain:[be/re.w,pe/re.w]}),X.angularAxis=X.mockAxis($,K,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),X.doAutoRange($,K),X.updateAngularAxis($,K),X.updateRadialAxis($,K),X.updateRadialAxisTitle($,K),X.xaxis=X.mockCartesianAxis($,K,{_id:"x",domain:Pe}),X.yaxis=X.mockCartesianAxis($,K,{_id:"y",domain:ge});var Ze=X.pathSubplot();X.clipPaths.forTraces.select("path").attr("d",Ze).attr("transform",p(Ee,Be)),Y.frontplot.attr("transform",p(Oe,ze)).call(t.setClipUrl,X._hasClipOnAxisFalse?null:X.clipIds.forTraces,X.gd),Y.bg.attr("d",Ze).attr("transform",p(ke,Ie)).call(s.fill,K.bgcolor)},j.mockAxis=function($,K,X,Y){var re=T.extendFlat({},X,Y);return a(re,K,$),re},j.mockCartesianAxis=function($,K,X){var Y=this,re=Y.isSmith,se=X._id,ae=T.extendFlat({type:"linear"},X);n(ae,$);var ce={x:[0,2],y:[1,3]};return ae.setRange=function(){var fe=Y.sectorBBox,he=ce[se],ve=Y.radialAxis._rl,ye=(ve[1]-ve[0])/(1-Y.getHole(K));ae.range=[fe[he[0]]*ye,fe[he[1]]*ye]},ae.isPtWithinRange=se!=="x"||re?function(){return!0}:function(fe){return Y.isPtInside(fe)},ae.setRange(),ae.setScale(),ae},j.doAutoRange=function($,K){var X=this,Y=X.gd,re=X.radialAxis,se=X.getRadial(K);l(Y,re);var ae=re.range;if(se.range=ae.slice(),se._input.range=ae.slice(),re._rl=[re.r2l(ae[0],null,"gregorian"),re.r2l(ae[1],null,"gregorian")],re.minallowed!==void 0){var ce=re.r2l(re.minallowed);re._rl[0]>re._rl[1]?re._rl[1]=Math.max(re._rl[1],ce):re._rl[0]=Math.max(re._rl[0],ce)}if(re.maxallowed!==void 0){var fe=re.r2l(re.maxallowed);re._rl[0]<re._rl[1]?re._rl[1]=Math.min(re._rl[1],fe):re._rl[0]=Math.min(re._rl[0],fe)}},j.updateRadialAxis=function($,K){var X=this,Y=X.gd,re=X.layers,se=X.radius,ae=X.innerRadius,ce=X.cx,fe=X.cy,he=X.getRadial(K),ve=I(X.getSector(K)[0],360),ye=X.radialAxis,me=ae<se,Me=X.isSmith;Me||(X.fillViewInitialKey("radialaxis.angle",he.angle),X.fillViewInitialKey("radialaxis.range",ye.range.slice()),ye.setGeometry()),ye.tickangle==="auto"&&ve>90&&ve<=270&&(ye.tickangle=180);var Pe=Me?function(ze){var pe=D(X,O([ze.x,0]));return p(pe[0]-ce,pe[1]-fe)}:function(ze){return p(ye.l2p(ze.x)+ae,0)},ge=Me?function(ze){return P(X,ze.x,-1/0,1/0)}:function(ze){return X.pathArc(ye.r2p(ze.x)+ae)},oe=H(he);if(X.radialTickLayout!==oe&&(re["radial-axis"].selectAll(".xtick").remove(),X.radialTickLayout=oe),me){ye.setScale();var ie=0,de=Me?(ye.tickvals||[]).filter(function(ze){return ze>=0}).map(function(ze){return r.tickText(ye,ze,!0,!1)}):r.calcTicks(ye),Se=Me?de:r.clipEnds(ye,de),_e=r.getTickSigns(ye)[2];Me&&((ye.ticks==="top"&&ye.side==="bottom"||ye.ticks==="bottom"&&ye.side==="top")&&(_e=-_e),ye.ticks==="top"&&ye.side==="top"&&(ie=-ye.ticklen),ye.ticks==="bottom"&&ye.side==="bottom"&&(ie=ye.ticklen)),r.drawTicks(Y,ye,{vals:de,layer:re["radial-axis"],path:r.makeTickPath(ye,0,_e),transFn:Pe,crisp:!1}),r.drawGrid(Y,ye,{vals:Se,layer:re["radial-grid"],path:ge,transFn:T.noop,crisp:!1}),r.drawLabels(Y,ye,{vals:de,layer:re["radial-axis"],transFn:Pe,labelFns:r.makeLabelFns(ye,ie)})}var we=X.radialAxisAngle=X.vangles?W(te(N(he.angle),X.vangles)):he.angle,Ae=p(ce,fe),Oe=Ae+_(-we);Q(re["radial-axis"],me&&(he.showticklabels||he.ticks),{transform:Oe}),Q(re["radial-grid"],me&&he.showgrid,{transform:Me?"":Ae}),Q(re["radial-line"].select("line"),me&&he.showline,{x1:Me?-se:ae,y1:0,x2:se,y2:0,transform:Oe}).attr("stroke-width",he.linewidth).call(s.stroke,he.linecolor)},j.updateRadialAxisTitle=function($,K,X){if(!this.isSmith){var Y=this,re=Y.gd,se=Y.radius,ae=Y.cx,ce=Y.cy,fe=Y.getRadial(K),he=Y.id+"title",ve=0;if(fe.title){var ye=t.bBox(Y.layers["radial-axis"].node()).height,me=fe.title.font.size,Me=fe.side;ve=Me==="top"?me:Me==="counterclockwise"?-(ye+.4*me):ye+.8*me}var Pe=X!==void 0?X:Y.radialAxisAngle,ge=N(Pe),oe=Math.cos(ge),ie=Math.sin(ge),de=ae+se/2*oe+ve*ie,Se=ce-se/2*ie+ve*oe;Y.layers["radial-axis-title"]=x.draw(re,he,{propContainer:fe,propName:Y.id+".radialaxis.title",placeholder:U(re,"Click to enter radial axis title"),attributes:{x:de,y:Se,"text-anchor":"middle"},transform:{rotate:-Pe}})}},j.updateAngularAxis=function($,K){var X=this,Y=X.gd,re=X.layers,se=X.radius,ae=X.innerRadius,ce=X.cx,fe=X.cy,he=X.getAngular(K),ve=X.angularAxis,ye=X.isSmith;ye||(X.fillViewInitialKey("angularaxis.rotation",he.rotation),ve.setGeometry(),ve.setScale());var me=ye?function(ze){var pe=D(X,O([0,ze.x]));return Math.atan2(pe[0]-ce,pe[1]-fe)-Math.PI/2}:function(ze){return ve.t2g(ze.x)};ve.type==="linear"&&ve.thetaunit==="radians"&&(ve.tick0=W(ve.tick0),ve.dtick=W(ve.dtick));var Me=function(ze){return p(ce+se*Math.cos(ze),fe-se*Math.sin(ze))},Pe=ye?function(ze){var pe=D(X,O([0,ze.x]));return p(pe[0],pe[1])}:function(ze){return Me(me(ze))},ge=ye?function(ze){var pe=D(X,O([0,ze.x])),be=Math.atan2(pe[0]-ce,pe[1]-fe)-Math.PI/2;return p(pe[0],pe[1])+_(-W(be))}:function(ze){var pe=me(ze);return Me(pe)+_(-W(pe))},oe=ye?function(ze){return C(X,ze.x,0,1/0)}:function(ze){var pe=me(ze),be=Math.cos(pe),ke=Math.sin(pe);return"M"+[ce+ae*be,fe-ae*ke]+"L"+[ce+se*be,fe-se*ke]},ie=r.makeLabelFns(ve,0).labelStandoff,de={xFn:function(ze){var pe=me(ze);return Math.cos(pe)*ie},yFn:function(ze){var pe=me(ze),be=Math.sin(pe)>0?.2:1;return-Math.sin(pe)*(ie+ze.fontSize*be)+Math.abs(Math.cos(pe))*(ze.fontSize*f)},anchorFn:function(ze){var pe=me(ze),be=Math.cos(pe);return Math.abs(be)<.1?"middle":be>0?"start":"end"},heightFn:function(ze,pe,be){var ke=me(ze);return-.5*(1+Math.sin(ke))*be}},Se=H(he);X.angularTickLayout!==Se&&(re["angular-axis"].selectAll("."+ve._id+"tick").remove(),X.angularTickLayout=Se);var _e,we=ye?[1/0].concat(ve.tickvals||[]).map(function(ze){return r.tickText(ve,ze,!0,!1)}):r.calcTicks(ve);if(ye&&(we[0].text="∞",we[0].fontSize*=1.75),K.gridshape==="linear"?(_e=we.map(me),T.angleDelta(_e[0],_e[1])<0&&(_e=_e.slice().reverse())):_e=null,X.vangles=_e,ve.type==="category"&&(we=we.filter(function(ze){return T.isAngleInsideSector(me(ze),X.sectorInRad)})),ve.visible){var Ae=ve.ticks==="inside"?-1:1,Oe=(ve.linewidth||1)/2;r.drawTicks(Y,ve,{vals:we,layer:re["angular-axis"],path:"M"+Ae*Oe+",0h"+Ae*ve.ticklen,transFn:ge,crisp:!1}),r.drawGrid(Y,ve,{vals:we,layer:re["angular-grid"],path:oe,transFn:T.noop,crisp:!1}),r.drawLabels(Y,ve,{vals:we,layer:re["angular-axis"],repositionOnUpdate:!0,transFn:Pe,labelFns:de})}Q(re["angular-line"].select("path"),he.showline,{d:X.pathSubplot(),transform:p(ce,fe)}).attr("stroke-width",he.linewidth).call(s.stroke,he.linecolor)},j.updateFx=function($,K){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag($),this.updateRadialDrag($,K,0),this.updateRadialDrag($,K,1)),this.updateHoverAndMainDrag($))},j.updateHoverAndMainDrag=function($){var K,X,Y=this,re=Y.isSmith,se=Y.gd,ae=Y.layers,ce=$._zoomlayer,fe=S.MINZOOM,he=S.OFFEDGE,ve=Y.radius,ye=Y.innerRadius,me=Y.cx,Me=Y.cy,Pe=Y.cxx,ge=Y.cyy,oe=Y.sectorInRad,ie=Y.vangles,de=Y.radialAxis,Se=w.clampTiny,_e=w.findXYatLength,we=w.findEnclosingVertexAngles,Ae=S.cornerHalfWidth,Oe=S.cornerLen/2,ze=u.makeDragger(ae,"path","maindrag",$.dragmode===!1?"none":"crosshair");M.select(ze).attr("d",Y.pathSubplot()).attr("transform",p(me,Me)),ze.onmousemove=function(tt){c.hover(se,tt,Y.id),se._fullLayout._lasthover=ze,se._fullLayout._hoversubplot=Y.id},ze.onmouseout=function(tt){se._dragging||h.unhover(se,tt)};var pe,be,ke,Ie,Ee,Be,Ve,Ze,rt,it={element:ze,gd:se,subplot:Y.id,plotinfo:{id:Y.id,xaxis:Y.xaxis,yaxis:Y.yaxis},xaxes:[Y.xaxis],yaxes:[Y.yaxis]};function dt(tt,Re){return Math.sqrt(tt*tt+Re*Re)}function vt(tt,Re){return dt(tt-Pe,Re-ge)}function ht(tt,Re){return Math.atan2(ge-Re,tt-Pe)}function Qe(tt,Re){return[tt*Math.cos(Re),tt*Math.sin(-Re)]}function Je(tt,Re){if(tt===0)return Y.pathSector(2*Ae);var Fe=Oe/tt,nt=Re-Fe,Ge=Re+Fe,ct=Math.max(0,Math.min(tt,ve)),pt=ct-Ae,gt=ct+Ae;return"M"+Qe(pt,nt)+"A"+[pt,pt]+" 0,0,0 "+Qe(pt,Ge)+"L"+Qe(gt,Ge)+"A"+[gt,gt]+" 0,0,1 "+Qe(gt,nt)+"Z"}function Tt(tt,Re,Fe){if(tt===0)return Y.pathSector(2*Ae);var nt,Ge,ct=Qe(tt,Re),pt=Qe(tt,Fe),gt=Se((ct[0]+pt[0])/2),ut=Se((ct[1]+pt[1])/2);if(gt&&ut){var kt=ut/gt,mt=-1/kt,At=_e(Ae,kt,gt,ut);nt=_e(Oe,mt,At[0][0],At[0][1]),Ge=_e(Oe,mt,At[1][0],At[1][1])}else{var Lt,Ct;ut?(Lt=Oe,Ct=Ae):(Lt=Ae,Ct=Oe),nt=[[gt-Lt,ut-Ct],[gt+Lt,ut-Ct]],Ge=[[gt-Lt,ut+Ct],[gt+Lt,ut+Ct]]}return"M"+nt.join("L")+"L"+Ge.reverse().join("L")+"Z"}function Ot(tt,Re){return Re=Math.max(Math.min(Re,ve),ye),tt<he?tt=0:ve-tt<he?tt=ve:Re<he?Re=0:ve-Re<he&&(Re=ve),Math.abs(Re-tt)>fe?(tt<Re?(ke=tt,Ie=Re):(ke=Re,Ie=tt),!0):(ke=null,Ie=null,!1)}function Pt(tt,Re){tt=tt||Ee,Re=Re||"M0,0Z",Ze.attr("d",tt),rt.attr("d",Re),u.transitionZoombox(Ze,rt,Be,Ve),Be=!0;var Fe={};We(Fe),se.emit("plotly_relayouting",Fe)}function Mt(tt,Re){var Fe,nt,Ge=pe+(tt*=K),ct=be+(Re*=X),pt=vt(pe,be),gt=Math.min(vt(Ge,ct),ve),ut=ht(pe,be);Ot(pt,gt)&&(Fe=Ee+Y.pathSector(Ie),ke&&(Fe+=Y.pathSector(ke)),nt=Je(ke,ut)+Je(Ie,ut)),Pt(Fe,nt)}function He(tt,Re,Fe,nt){var Ge=w.findIntersectionXY(Fe,nt,Fe,[tt-Pe,ge-Re]);return dt(Ge[0],Ge[1])}function Ye(tt,Re){var Fe,nt,Ge=pe+tt,ct=be+Re,pt=ht(pe,be),gt=ht(Ge,ct),ut=we(pt,ie),kt=we(gt,ie);Ot(He(pe,be,ut[0],ut[1]),Math.min(He(Ge,ct,kt[0],kt[1]),ve))&&(Fe=Ee+Y.pathSector(Ie),ke&&(Fe+=Y.pathSector(ke)),nt=[Tt(ke,ut[0],ut[1]),Tt(Ie,ut[0],ut[1])].join(" ")),Pt(Fe,nt)}function Ne(){if(u.removeZoombox(se),ke!==null&&Ie!==null){var tt={};We(tt),u.showDoubleClickNotifier(se),o.call("_guiRelayout",se,tt)}}function We(tt){var Re=de._rl,Fe=(Re[1]-Re[0])/(1-ye/ve)/ve,nt=[Re[0]+(ke-ye)*Fe,Re[0]+(Ie-ye)*Fe];tt[Y.id+".radialaxis.range"]=nt}function ot(tt,Re){var Fe=se._fullLayout.clickmode;if(u.removeZoombox(se),tt===2){var nt={};for(var Ge in Y.viewInitial)nt[Y.id+"."+Ge]=Y.viewInitial[Ge];se.emit("plotly_doubleclick",null),o.call("_guiRelayout",se,nt)}Fe.indexOf("select")>-1&&tt===1&&v(Re,se,[Y.xaxis],[Y.yaxis],Y.id,it),Fe.indexOf("event")>-1&&c.click(se,Re,Y.id)}it.prepFn=function(tt,Re,Fe){var nt=se._fullLayout.dragmode,Ge=ze.getBoundingClientRect();se._fullLayout._calcInverseTransform(se);var ct=se._fullLayout._invTransform;K=se._fullLayout._invScaleX,X=se._fullLayout._invScaleY;var pt=T.apply3DTransform(ct)(Re-Ge.left,Fe-Ge.top);if(pe=pt[0],be=pt[1],ie){var gt=w.findPolygonOffset(ve,oe[0],oe[1],ie);pe+=Pe+gt[0],be+=ge+gt[1]}switch(nt){case"zoom":it.clickFn=ot,re||(it.moveFn=ie?Ye:Mt,it.doneFn=Ne,function(){ke=null,Ie=null,Ee=Y.pathSubplot(),Be=!1;var ut=se._fullLayout[Y.id];Ve=k(ut.bgcolor).getLuminance(),(Ze=u.makeZoombox(ce,Ve,me,Me,Ee)).attr("fill-rule","evenodd"),rt=u.makeCorners(ce,me,Me),g(se)}());break;case"select":case"lasso":d(tt,Re,Fe,it,nt)}},h.init(it)},j.updateRadialDrag=function($,K,X){var Y=this,re=Y.gd,se=Y.layers,ae=Y.radius,ce=Y.innerRadius,fe=Y.cx,he=Y.cy,ve=Y.radialAxis,ye=S.radialDragBoxSize,me=ye/2;if(ve.visible){var Me,Pe,ge,oe=N(Y.radialAxisAngle),ie=ve._rl,de=ie[0],Se=ie[1],_e=ie[X],we=.75*(ie[1]-ie[0])/(1-Y.getHole(K))/ae;X?(Me=fe+(ae+me)*Math.cos(oe),Pe=he-(ae+me)*Math.sin(oe),ge="radialdrag"):(Me=fe+(ce-me)*Math.cos(oe),Pe=he-(ce-me)*Math.sin(oe),ge="radialdrag-inner");var Ae,Oe,ze,pe=u.makeRectDragger(se,ge,"crosshair",-me,-me,ye,ye),be={element:pe,gd:re};$.dragmode===!1&&(be.dragmode=!1),Q(M.select(pe),ve.visible&&ce<ae,{transform:p(Me,Pe)}),be.prepFn=function(){Ae=null,Oe=null,ze=null,be.moveFn=ke,be.doneFn=Ie,g(re)},be.clampFn=function(Ve,Ze){return Math.sqrt(Ve*Ve+Ze*Ze)<S.MINDRAG&&(Ve=0,Ze=0),[Ve,Ze]},h.init(be)}function ke(Ve,Ze){if(Ae)Ae(Ve,Ze);else{var rt=[Ve,-Ze],it=[Math.cos(oe),Math.sin(oe)],dt=Math.abs(T.dot(rt,it)/Math.sqrt(T.dot(rt,rt)));isNaN(dt)||(Ae=dt<.5?Ee:Be)}var vt={};(function(ht){Oe!==null?ht[Y.id+".radialaxis.angle"]=Oe:ze!==null&&(ht[Y.id+".radialaxis.range["+X+"]"]=ze)})(vt),re.emit("plotly_relayouting",vt)}function Ie(){Oe!==null?o.call("_guiRelayout",re,Y.id+".radialaxis.angle",Oe):ze!==null&&o.call("_guiRelayout",re,Y.id+".radialaxis.range["+X+"]",ze)}function Ee(Ve,Ze){if(X!==0){var rt=Me+Ve,it=Pe+Ze;Oe=Math.atan2(he-it,rt-fe),Y.vangles&&(Oe=te(Oe,Y.vangles)),Oe=W(Oe);var dt=p(fe,he)+_(-Oe);se["radial-axis"].attr("transform",dt),se["radial-line"].select("line").attr("transform",dt);var vt=Y.gd._fullLayout,ht=vt[Y.id];Y.updateRadialAxisTitle(vt,ht,Oe)}}function Be(Ve,Ze){var rt=T.dot([Ve,-Ze],[Math.cos(oe),Math.sin(oe)]);if(ze=_e-we*rt,we>0==(X?ze>de:ze<Se)){var it=re._fullLayout,dt=it[Y.id];ve.range[X]=ze,ve._rl[X]=ze,Y.updateRadialAxis(it,dt),Y.xaxis.setRange(),Y.xaxis.setScale(),Y.yaxis.setRange(),Y.yaxis.setScale();var vt=!1;for(var ht in Y.traceHash){var Qe=Y.traceHash[ht],Je=T.filterVisible(Qe);Qe[0][0].trace._module.plot(re,Y,Je,dt),o.traceIs(ht,"gl")&&Je.length&&(vt=!0)}vt&&(m(re),b(re))}else ze=null}},j.updateAngularDrag=function($){var K=this,X=K.gd,Y=K.layers,re=K.radius,se=K.angularAxis,ae=K.cx,ce=K.cy,fe=K.cxx,he=K.cyy,ve=S.angularDragBoxSize,ye=u.makeDragger(Y,"path","angulardrag",$.dragmode===!1?"none":"move"),me={element:ye,gd:X};function Me(be,ke){return Math.atan2(he+ve-ke,be-fe-ve)}$.dragmode===!1?me.dragmode=!1:M.select(ye).attr("d",K.pathAnnulus(re,re+ve)).attr("transform",p(ae,ce)).call(y,"move");var Pe,ge,oe,ie,de,Se,_e=Y.frontplot.select(".scatterlayer").selectAll(".trace"),we=_e.selectAll(".point"),Ae=_e.selectAll(".textpoint");function Oe(be,ke){var Ie=K.gd._fullLayout,Ee=Ie[K.id],Be=Me(Pe+be*$._invScaleX,ge+ke*$._invScaleY),Ve=W(Be-Se);if(ie=oe+Ve,Y.frontplot.attr("transform",p(K.xOffset2,K.yOffset2)+_([-Ve,fe,he])),K.vangles){de=K.radialAxisAngle+Ve;var Ze=p(ae,ce)+_(-Ve),rt=p(ae,ce)+_(-de);Y.bg.attr("transform",Ze),Y["radial-grid"].attr("transform",Ze),Y["radial-axis"].attr("transform",rt),Y["radial-line"].select("line").attr("transform",rt),K.updateRadialAxisTitle(Ie,Ee,de)}else K.clipPaths.forTraces.select("path").attr("transform",p(fe,he)+_(Ve));we.each(function(){var Je=M.select(this),Tt=t.getTranslate(Je);Je.attr("transform",p(Tt.x,Tt.y)+_([Ve]))}),Ae.each(function(){var Je=M.select(this),Tt=Je.select("text"),Ot=t.getTranslate(Je);Je.attr("transform",_([Ve,Tt.attr("x"),Tt.attr("y")])+p(Ot.x,Ot.y))}),se.rotation=T.modHalf(ie,360),K.updateAngularAxis(Ie,Ee),K._hasClipOnAxisFalse&&!T.isFullCircle(K.sectorInRad)&&_e.call(t.hideOutsideRangePoints,K);var it=!1;for(var dt in K.traceHash)if(o.traceIs(dt,"gl")){var vt=K.traceHash[dt],ht=T.filterVisible(vt);vt[0][0].trace._module.plot(X,K,ht,Ee),ht.length&&(it=!0)}it&&(m(X),b(X));var Qe={};ze(Qe),X.emit("plotly_relayouting",Qe)}function ze(be){be[K.id+".angularaxis.rotation"]=ie,K.vangles&&(be[K.id+".radialaxis.angle"]=de)}function pe(){Ae.select("text").attr("transform",null);var be={};ze(be),o.call("_guiRelayout",X,be)}me.prepFn=function(be,ke,Ie){var Ee=$[K.id];oe=Ee.angularaxis.rotation;var Be=ye.getBoundingClientRect();Pe=ke-Be.left,ge=Ie-Be.top,X._fullLayout._calcInverseTransform(X);var Ve=T.apply3DTransform($._invTransform)(Pe,ge);Pe=Ve[0],ge=Ve[1],Se=Me(Pe,ge),me.moveFn=Oe,me.doneFn=pe,g(X)},K.vangles&&!T.isFullCircle(K.sectorInRad)&&(me.prepFn=T.noop,y(M.select(ye),null)),h.init(me)},j.isPtInside=function($){if(this.isSmith)return!0;var K=this.sectorInRad,X=this.vangles,Y=this.angularAxis.c2g($.theta),re=this.radialAxis,se=re.c2l($.r),ae=re._rl;return(X?w.isPtInsidePolygon:T.isPtInsideSector)(se,Y,ae,K,X)},j.pathArc=function($){var K=this.sectorInRad,X=this.vangles;return(X?w.pathPolygon:T.pathArc)($,K[0],K[1],X)},j.pathSector=function($){var K=this.sectorInRad,X=this.vangles;return(X?w.pathPolygon:T.pathSector)($,K[0],K[1],X)},j.pathAnnulus=function($,K){var X=this.sectorInRad,Y=this.vangles;return(Y?w.pathPolygonAnnulus:T.pathAnnulus)($,K,X[0],X[1],Y)},j.pathSubplot=function(){var $=this.innerRadius,K=this.radius;return $?this.pathAnnulus($,K):this.pathSector(K)},j.fillViewInitialKey=function($,K){$ in this.viewInitial||(this.viewInitial[$]=K)}},57696:function(ee,R,e){var M=e(3400),k=e(78344),o=M.deg2rad,T=M.rad2deg;ee.exports=function(_,p,s){switch(k(_,s),_._id){case"x":case"radialaxis":(function(t,i){var r=i._subplot;t.setGeometry=function(){var n=t._rl[0],a=t._rl[1],l=r.innerRadius,u=(r.radius-l)/(a-n),h=l/u,c=n>a?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var d=t.c2l(x)-n;return(c(d)?d:0)+h},t.g2c=function(x){return t.l2c(x+n-h)},t.g2p=function(x){return x*u},t.c2p=function(x){return t.g2p(t.c2g(x))}}})(_,p);break;case"angularaxis":(function(t,i){var r=t.type;if(r==="linear"){var n=t.d2c,a=t.c2d;t.d2c=function(l,u){return function(h,c){return c==="degrees"?o(h):h}(n(l),u)},t.c2d=function(l,u){return a(function(h,c){return c==="degrees"?T(h):h}(l,u))}}t.makeCalcdata=function(l,u){var h,c,x=l[u],d=l._length,v=function(f){return t.d2c(f,l.thetaunit)};if(x)for(h=new Array(d),c=0;c<d;c++)h[c]=v(x[c]);else{var g=u+"0",y="d"+u,m=g in l?v(l[g]):0,b=l[y]?v(l[y]):(t.period||2*Math.PI)/d;for(h=new Array(d),c=0;c<d;c++)h[c]=m+c*b}return h},t.setGeometry=function(){var l,u,h,c,x=i.sector,d=x.map(o),v={clockwise:-1,counterclockwise:1}[t.direction],g=o(t.rotation),y=function(S){return v*S+g},m=function(S){return(S-g)/v};switch(r){case"linear":u=l=M.identity,c=o,h=T,t.range=M.isFullCircle(d)?[x[0],x[0]+360]:d.map(m).map(T);break;case"category":var b=t._categories.length,f=t.period?Math.max(t.period,b):b;f===0&&(f=1),u=c=function(S){return 2*S*Math.PI/f},l=h=function(S){return S*f/Math.PI/2},t.range=[0,f]}t.c2g=function(S){return y(u(S))},t.g2c=function(S){return l(m(S))},t.t2g=function(S){return y(c(S))},t.g2t=function(S){return h(m(S))}}})(_,p)}}},55012:function(ee){ee.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(ee){function R(o){return o<0?-1:o>0?1:0}function e(o){var T=o[0],_=o[1];if(!isFinite(T)||!isFinite(_))return[1,0];var p=(T+1)*(T+1)+_*_;return[(T*T+_*_-1)/p,2*_/p]}function M(o,T){var _=T[0],p=T[1];return[_*o.radius+o.cx,-p*o.radius+o.cy]}function k(o,T){return T*o.radius}ee.exports={smith:e,reactanceArc:function(o,T,_,p){var s=M(o,e([_,T])),t=s[0],i=s[1],r=M(o,e([p,T])),n=r[0],a=r[1];if(T===0)return["M"+t+","+i,"L"+n+","+a].join(" ");var l=k(o,1/Math.abs(T));return["M"+t+","+i,"A"+l+","+l+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(o,T,_,p){var s=k(o,1/(T+1)),t=M(o,e([T,_])),i=t[0],r=t[1],n=M(o,e([T,p])),a=n[0],l=n[1];if(R(_)!==R(p)){var u=M(o,e([T,0]));return["M"+i+","+r,"A"+s+","+s+" 0 0,"+(0<_?0:1)+" "+u[0]+","+u[1],"A"+s+","+s+" 0 0,"+(p<0?0:1)+a+","+l].join(" ")}return["M"+i+","+r,"A"+s+","+s+" 0 0,"+(p<_?0:1)+" "+a+","+l].join(" ")},smithTransform:M}},47788:function(ee,R,e){var M=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(55012),_=T.attr,p=T.name,s=k(p),t={};t[_]={valType:"subplotid",dflt:p,editType:"calc"},ee.exports={attr:_,name:p,idRoot:p,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,a=r._subplots[p],l=0;l<a.length;l++){var u=a[l],h=M(n,p,u),c=r[u]._subplot;c||(c=o(i,u,!0),r[u]._subplot=c),c.plot(h,r,i._promises)}},clean:function(i,r,n,a){for(var l=a._subplots[p]||[],u=0;u<l.length;u++){var h=l[u],c=a[h]._subplot;if(!r[h]&&c)for(var x in c.framework.remove(),c.clipPaths)c.clipPaths[x].remove()}},toSVG:e(57952).toSVG}},6183:function(ee,R,e){var M=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,_=e(67824).overrideAll,p=_({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=_({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},p,s),i=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},p,s);ee.exports={domain:o({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},22836:function(ee,R,e){var M,k,o,T=e(3400),_=e(76308),p=e(31780),s=e(168),t=e(84888).op,i=e(42568),r=e(95936),n=e(42136),a=e(78344),l=e(6183),u=e(55012),h=u.axisNames,c=(M=function(d){return T.isTypedArray(d)&&(d=Array.from(d)),d.slice().reverse().map(function(v){return-v}).concat([0]).concat(d)},k=String,o={},function(d){var v=k?k(d):d;if(v in o)return o[v];var g=M(d);return o[v]=g,g});function x(d,v,g,y){var m=g("bgcolor");y.bgColor=_.combine(m,y.paper_bgcolor);var b,f=t(y.fullData,u.name,y.id),S=y.layoutOut;function w(j,H){return g(b+"."+j,H)}for(var E=0;E<h.length;E++){b=h[E],T.isPlainObject(d[b])||(d[b]={});var O=d[b],C=p.newContainer(v,b);C._id=C._name=b,C._attr=y.id+"."+b,C._traceIndices=f.map(function(j){return j._expandedIndex});var P=w("visible");if(C.type="linear",a(C,S),i(O,C,w,C.type),P){var D,U,I,N,W=b==="realaxis";W&&w("side"),W?w("tickvals"):w("tickvals",c(v.realaxis.tickvals||l.realaxis.tickvals.dflt)),T.isTypedArray(C.tickvals)&&(C.tickvals=Array.from(C.tickvals));var F=y.font||{};P&&(U=(D=w("color"))===O.color?D:F.color,I=F.size,N=F.family),r(O,C,w,C.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!W,noExp:!0,font:{color:U,size:I,family:N}}),T.coerce2(d,v,l,b+".ticklen"),T.coerce2(d,v,l,b+".tickwidth"),T.coerce2(d,v,l,b+".tickcolor",v.color),w("ticks")||(delete v[b].ticklen,delete v[b].tickwidth,delete v[b].tickcolor),n(O,C,w,{dfltColor:D,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[b]}),w("layer")}w("hoverformat"),delete C.type,C._input=O}}ee.exports=function(d,v,g){s(d,v,g,{noUirevision:!0,type:u.name,attributes:l,handleDefaults:x,font:v.font,paper_bgcolor:v.paper_bgcolor,fullData:g,layoutOut:v})}},168:function(ee,R,e){var M=e(3400),k=e(31780),o=e(86968).Q;ee.exports=function(T,_,p,s){var t,i,r=s.type,n=s.attributes,a=s.handleDefaults,l=s.partition||"x",u=_._subplots[r],h=u.length,c=h&&u[0].replace(/\d+$/,"");function x(y,m){return M.coerce(t,i,n,y,m)}for(var d=0;d<h;d++){var v=u[d];t=T[v]?T[v]:T[v]={},i=k.newContainer(_,v,c),s.noUirevision||x("uirevision",_.uirevision);var g={};g[l]=[d/h,(d+1)/h],o(i,_,x,g),s.id=v,a(t,i,x,s)}}},21776:function(ee,R,e){var M=e(26880);function k(o){var T=o.description?" "+o.description:"",_=o.keys||[];if(_.length>0){for(var p=[],s=0;s<_.length;s++)p[s]="`"+_[s]+"`";T+="Finally, the template string has access to ",T=_.length===1?T+"variable "+p[0]:T+"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return T}M.FORMAT_LINK,M.DATE_FORMAT_LINK,R.Ks=function(o,T){o=o||{},k(T=T||{});var _={valType:"string",dflt:"",editType:o.editType||"none"};return o.arrayOk!==!1&&(_.arrayOk=!0),_},R.Gw=function(o,T){o=o||{},k(T=T||{});var _={valType:"string",dflt:"",editType:o.editType||"calc"};return o.arrayOk!==!1&&(_.arrayOk=!0),_},R.ye=function(o,T){return T=T||{},(o=o||{}).newshape,k(T),{valType:"string",dflt:"",editType:o.editType||"arraydraw"}}},19352:function(ee,R,e){var M=e(24696),k=e(84888).KY,o=e(3400).counterRegex,T="ternary";R.name=T;var _=R.attr="subplot";R.idRoot=T,R.idRegex=R.attrRegex=o(T),(R.attributes={})[_]={valType:"subplotid",dflt:"ternary",editType:"calc"},R.layoutAttributes=e(86379),R.supplyLayoutDefaults=e(38536),R.plot=function(p){for(var s=p._fullLayout,t=p.calcdata,i=s._subplots[T],r=0;r<i.length;r++){var n=i[r],a=k(t,T,n),l=s[n]._subplot;l||(l=new M({id:n,graphDiv:p,container:s._ternarylayer.node()},s),s[n]._subplot=l),l.plot(a,s,p._promises)}},R.clean=function(p,s,t,i){for(var r=i._subplots[T]||[],n=0;n<r.length;n++){var a=r[n],l=i[a]._subplot;!s[a]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},86379:function(ee,R,e){var M=e(22548),k=e(86968).u,o=e(94724),T=e(67824).overrideAll,_=e(92880).extendFlat,p={title:{text:o.title.text,font:o.title.font},color:o.color,tickmode:o.minor.tickmode,nticks:_({},o.nticks,{dflt:6,min:1}),tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:_({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:_({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash,layer:o.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},s=ee.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:p,baxis:p,caxis:p},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},38536:function(ee,R,e){var M=e(76308),k=e(31780),o=e(3400),T=e(168),_=e(95936),p=e(42568),s=e(25404),t=e(26332),i=e(42136),r=e(86379),n=["aaxis","baxis","caxis"];function a(u,h,c,x){var d,v,g,y=c("bgcolor"),m=c("sum");x.bgColor=M.combine(y,x.paper_bgcolor);for(var b=0;b<n.length;b++)v=u[d=n[b]]||{},(g=k.newContainer(h,d))._name=d,l(v,g,x,h);var f=h.aaxis,S=h.baxis,w=h.caxis;f.min+S.min+w.min>=m&&(f.min=0,S.min=0,w.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function l(u,h,c,x){var d=r[h._name];function v(S,w){return o.coerce(u,h,d,S,w)}v("uirevision",x.uirevision),h.type="linear";var g=v("color"),y=g!==d.color.dflt?g:c.font.color,m=h._name.charAt(0).toUpperCase(),b="Component "+m,f=v("title.text",b);h._hovertitle=f===b?f:m,o.coerceFont(v,"title.font",c.font,{overrideDflt:{size:o.bigFont(c.font.size),color:y}}),v("min"),t(u,h,v,"linear"),p(u,h,v,"linear"),_(u,h,v,"linear",{noAutotickangles:!0}),s(u,h,v,{outerTicks:!0}),v("showticklabels")&&(o.coerceFont(v,"tickfont",c.font,{overrideDflt:{color:y}}),v("tickangle"),v("tickformat")),i(u,h,v,{dfltColor:g,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d}),v("hoverformat"),v("layer")}ee.exports=function(u,h,c){T(u,h,c,{type:"ternary",attributes:r,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},24696:function(ee,R,e){var M=e(33428),k=e(49760),o=e(24040),T=e(3400),_=T.strTranslate,p=T._,s=e(76308),t=e(43616),i=e(78344),r=e(92880).extendFlat,n=e(7316),a=e(54460),l=e(86476),u=e(93024),h=e(72760),c=h.freeMode,x=h.rectMode,d=e(81668),v=e(22676).prepSelect,g=e(22676).selectOnClick,y=e(22676).clearOutline,m=e(22676).clearSelectionsCache,b=e(33816);function f(I,N){this.id=I.id,this.graphDiv=I.graphDiv,this.init(N),this.makeFramework(N),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ee.exports=f;var S=f.prototype;S.init=function(I){this.container=I._ternarylayer,this.defs=I._defs,this.layoutId=I._uid,this.traceHash={},this.layers={}},S.plot=function(I,N){var W=this,F=N[W.id],j=N._size;W._hasClipOnAxisFalse=!1;for(var H=0;H<I.length;H++)if(I[H][0].trace.cliponaxis===!1){W._hasClipOnAxisFalse=!0;break}W.updateLayers(F),W.adjustLayout(F,j),n.generalUpdatePerTraceModule(W.graphDiv,W,I,F),W.layers.plotbg.select("path").call(s.fill,F.bgcolor)},S.makeFramework=function(I){var N=this,W=N.graphDiv,F=I[N.id],j=N.clipId="clip"+N.layoutId+N.id,H=N.clipIdRelative="clip-relative"+N.layoutId+N.id;N.clipDef=T.ensureSingleById(I._clips,"clipPath",j,function(te){te.append("path").attr("d","M0,0Z")}),N.clipDefRelative=T.ensureSingleById(I._clips,"clipPath",H,function(te){te.append("path").attr("d","M0,0Z")}),N.plotContainer=T.ensureSingle(N.container,"g",N.id),N.updateLayers(F),t.setClipUrl(N.layers.backplot,j,W),t.setClipUrl(N.layers.grids,j,W)},S.updateLayers=function(I){var N=this.layers,W=["draglayer","plotbg","backplot","grids"];I.aaxis.layer==="below traces"&&W.push("aaxis","aline"),I.baxis.layer==="below traces"&&W.push("baxis","bline"),I.caxis.layer==="below traces"&&W.push("caxis","cline"),W.push("frontplot"),I.aaxis.layer==="above traces"&&W.push("aaxis","aline"),I.baxis.layer==="above traces"&&W.push("baxis","bline"),I.caxis.layer==="above traces"&&W.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(W,String),j=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(H){return"toplevel "+H}).each(function(H){var te=M.select(this);N[H]=te,H==="frontplot"?te.append("g").classed("scatterlayer",!0):H==="backplot"?te.append("g").classed("maplayer",!0):H==="plotbg"?te.append("path").attr("d","M0,0Z"):H==="aline"||H==="bline"||H==="cline"?te.append("path"):H==="grids"&&j.forEach(function(Q){N[Q]=te.append("g").classed("grid "+Q,!0)})}),F.order()};var w=Math.sqrt(4/3);S.adjustLayout=function(I,N){var W,F,j,H,te,Q,$=this,K=I.domain,X=(K.x[0]+K.x[1])/2,Y=(K.y[0]+K.y[1])/2,re=K.x[1]-K.x[0],se=K.y[1]-K.y[0],ae=re*N.w,ce=se*N.h,fe=I.sum,he=I.aaxis.min,ve=I.baxis.min,ye=I.caxis.min;ae>w*ce?j=(H=ce)*w:H=(j=ae)/w,te=re*j/ae,Q=se*H/ce,W=N.l+N.w*X-j/2,F=N.t+N.h*(1-Y)-H/2,$.x0=W,$.y0=F,$.w=j,$.h=H,$.sum=fe,$.xaxis={type:"linear",range:[he+2*ye-fe,fe-he-2*ve],domain:[X-te/2,X+te/2],_id:"x"},i($.xaxis,$.graphDiv._fullLayout),$.xaxis.setScale(),$.xaxis.isPtWithinRange=function(Ae){return Ae.a>=$.aaxis.range[0]&&Ae.a<=$.aaxis.range[1]&&Ae.b>=$.baxis.range[1]&&Ae.b<=$.baxis.range[0]&&Ae.c>=$.caxis.range[1]&&Ae.c<=$.caxis.range[0]},$.yaxis={type:"linear",range:[he,fe-ve-ye],domain:[Y-Q/2,Y+Q/2],_id:"y"},i($.yaxis,$.graphDiv._fullLayout),$.yaxis.setScale(),$.yaxis.isPtWithinRange=function(){return!0};var me=$.yaxis.domain[0],Me=$.aaxis=r({},I.aaxis,{range:[he,fe-ve-ye],side:"left",tickangle:(+I.aaxis.tickangle||0)-30,domain:[me,me+Q*w],anchor:"free",position:0,_id:"y",_length:j});i(Me,$.graphDiv._fullLayout),Me.setScale();var Pe=$.baxis=r({},I.baxis,{range:[fe-he-ye,ve],side:"bottom",domain:$.xaxis.domain,anchor:"free",position:0,_id:"x",_length:j});i(Pe,$.graphDiv._fullLayout),Pe.setScale();var ge=$.caxis=r({},I.caxis,{range:[fe-he-ve,ye],side:"right",tickangle:(+I.caxis.tickangle||0)+30,domain:[me,me+Q*w],anchor:"free",position:0,_id:"y",_length:j});i(ge,$.graphDiv._fullLayout),ge.setScale();var oe="M"+W+","+(F+H)+"h"+j+"l-"+j/2+",-"+H+"Z";$.clipDef.select("path").attr("d",oe),$.layers.plotbg.select("path").attr("d",oe);var ie="M0,"+H+"h"+j+"l-"+j/2+",-"+H+"Z";$.clipDefRelative.select("path").attr("d",ie);var de=_(W,F);$.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",de),$.clipDefRelative.select("path").attr("transform",null);var Se=_(W-Pe._offset,F+H);$.layers.baxis.attr("transform",Se),$.layers.bgrid.attr("transform",Se);var _e=_(W+j/2,F)+"rotate(30)"+_(0,-Me._offset);$.layers.aaxis.attr("transform",_e),$.layers.agrid.attr("transform",_e);var we=_(W+j/2,F)+"rotate(-30)"+_(0,-ge._offset);$.layers.caxis.attr("transform",we),$.layers.cgrid.attr("transform",we),$.drawAxes(!0),$.layers.aline.select("path").attr("d",Me.showline?"M"+W+","+(F+H)+"l"+j/2+",-"+H:"M0,0").call(s.stroke,Me.linecolor||"#000").style("stroke-width",(Me.linewidth||0)+"px"),$.layers.bline.select("path").attr("d",Pe.showline?"M"+W+","+(F+H)+"h"+j:"M0,0").call(s.stroke,Pe.linecolor||"#000").style("stroke-width",(Pe.linewidth||0)+"px"),$.layers.cline.select("path").attr("d",ge.showline?"M"+(W+j/2)+","+F+"l"+j/2+","+H:"M0,0").call(s.stroke,ge.linecolor||"#000").style("stroke-width",(ge.linewidth||0)+"px"),$.graphDiv._context.staticPlot||$.initInteractions(),t.setClipUrl($.layers.frontplot,$._hasClipOnAxisFalse?null:$.clipId,$.graphDiv)},S.drawAxes=function(I){var N=this,W=N.graphDiv,F=N.id.substr(7)+"title",j=N.layers,H=N.aaxis,te=N.baxis,Q=N.caxis;if(N.drawAx(H),N.drawAx(te),N.drawAx(Q),I){var $=Math.max(H.showticklabels?H.tickfont.size/2:0,(Q.showticklabels?.75*Q.tickfont.size:0)+(Q.ticks==="outside"?.87*Q.ticklen:0)),K=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;j["a-title"]=d.draw(W,"a"+F,{propContainer:H,propName:N.id+".aaxis.title",placeholder:p(W,"Click to enter Component A title"),attributes:{x:N.x0+N.w/2,y:N.y0-H.title.font.size/3-$,"text-anchor":"middle"}}),j["b-title"]=d.draw(W,"b"+F,{propContainer:te,propName:N.id+".baxis.title",placeholder:p(W,"Click to enter Component B title"),attributes:{x:N.x0-K,y:N.y0+N.h+.83*te.title.font.size+K,"text-anchor":"middle"}}),j["c-title"]=d.draw(W,"c"+F,{propContainer:Q,propName:N.id+".caxis.title",placeholder:p(W,"Click to enter Component C title"),attributes:{x:N.x0+N.w+K,y:N.y0+N.h+.83*Q.title.font.size+K,"text-anchor":"middle"}})}},S.drawAx=function(I){var N,W=this,F=W.graphDiv,j=I._name,H=j.charAt(0),te=I._id,Q=W.layers[j],$=H+"tickLayout",K=(N=I).ticks+String(N.ticklen)+String(N.showticklabels);W[$]!==K&&(Q.selectAll("."+te+"tick").remove(),W[$]=K),I.setScale();var X=a.calcTicks(I),Y=a.clipEnds(I,X),re=a.makeTransTickFn(I),se=a.getTickSigns(I)[2],ae=T.deg2rad(30),ce=se*(I.linewidth||1)/2,fe=se*I.ticklen,he=W.w,ve=W.h,ye=H==="b"?"M0,"+ce+"l"+Math.sin(ae)*fe+","+Math.cos(ae)*fe:"M"+ce+",0l"+Math.cos(ae)*fe+","+-Math.sin(ae)*fe,me={a:"M0,0l"+ve+",-"+he/2,b:"M0,0l-"+he/2+",-"+ve,c:"M0,0l-"+ve+","+he/2}[H];a.drawTicks(F,I,{vals:I.ticks==="inside"?Y:X,layer:Q,path:ye,transFn:re,crisp:!1}),a.drawGrid(F,I,{vals:Y,layer:W.layers[H+"grid"],path:me,transFn:re,crisp:!1}),a.drawLabels(F,I,{vals:X,layer:Q,transFn:re,labelFns:a.makeLabelFns(I,0,30)})};var E=b.MINZOOM/2+.87,O="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",D=!0;function U(I){M.select(I).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){m(this.dragOptions),y(this.dragOptions.gd)},S.initInteractions=function(){var I,N,W,F,j,H,te,Q,$,K,X,Y,re=this,se=re.layers.plotbg.select("path").node(),ae=re.graphDiv,ce=ae._fullLayout._zoomlayer;function fe(ie){var de={};return de[re.id+".aaxis.min"]=ie.a,de[re.id+".baxis.min"]=ie.b,de[re.id+".caxis.min"]=ie.c,de}function he(ie,de){var Se=ae._fullLayout.clickmode;U(ae),ie===2&&(ae.emit("plotly_doubleclick",null),o.call("_guiRelayout",ae,fe({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&ie===1&&g(de,ae,[re.xaxis],[re.yaxis],re.id,re.dragOptions),Se.indexOf("event")>-1&&u.click(ae,de,re.id)}function ve(ie,de){return 1-de/re.h}function ye(ie,de){return 1-(ie+(re.h-de)/Math.sqrt(3))/re.w}function me(ie,de){return(ie-(re.h-de)/Math.sqrt(3))/re.w}function Me(ie,de){var Se=W+ie*I,_e=F+de*N,we=Math.max(0,Math.min(1,ve(0,F),ve(0,_e))),Ae=Math.max(0,Math.min(1,ye(W,F),ye(Se,_e))),Oe=Math.max(0,Math.min(1,me(W,F),me(Se,_e))),ze=(we/2+Oe)*re.w,pe=(1-we/2-Ae)*re.w,be=(ze+pe)/2,ke=pe-ze,Ie=(1-we)*re.h,Ee=Ie-ke/w;ke<b.MINZOOM?(te=j,X.attr("d",$),Y.attr("d","M0,0Z")):(te={a:j.a+we*H,b:j.b+Ae*H,c:j.c+Oe*H},X.attr("d",$+"M"+ze+","+Ie+"H"+pe+"L"+be+","+Ee+"L"+ze+","+Ie+"Z"),Y.attr("d","M"+W+","+F+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+ze+","+Ie+O+"M"+pe+","+Ie+C+"M"+be+","+Ee+P)),K||(X.transition().style("fill",Q>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Y.transition().style("opacity",1).duration(200),K=!0),ae.emit("plotly_relayouting",fe(te))}function Pe(){U(ae),te!==j&&(o.call("_guiRelayout",ae,fe(te)),D&&ae.data&&ae._context.showTips&&(T.notifier(p(ae,"Double-click to zoom back out"),"long"),D=!1))}function ge(ie,de){var Se=ie/re.xaxis._m,_e=de/re.yaxis._m,we=[(te={a:j.a-_e,b:j.b+(Se+_e)/2,c:j.c-(Se-_e)/2}).a,te.b,te.c].sort(T.sorterAsc),Ae=we.indexOf(te.a),Oe=we.indexOf(te.b),ze=we.indexOf(te.c);we[0]<0&&(we[1]+we[0]/2<0?(we[2]+=we[0]+we[1],we[0]=we[1]=0):(we[2]+=we[0]/2,we[1]+=we[0]/2,we[0]=0),te={a:we[Ae],b:we[Oe],c:we[ze]},de=(j.a-te.a)*re.yaxis._m,ie=(j.c-te.c-j.b+te.b)*re.xaxis._m);var pe=_(re.x0+ie,re.y0+de);re.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",pe);var be=_(-ie,-de);re.clipDefRelative.select("path").attr("transform",be),re.aaxis.range=[te.a,re.sum-te.b-te.c],re.baxis.range=[re.sum-te.a-te.c,te.b],re.caxis.range=[re.sum-te.a-te.b,te.c],re.drawAxes(!1),re._hasClipOnAxisFalse&&re.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,re),ae.emit("plotly_relayouting",fe(te))}function oe(){o.call("_guiRelayout",ae,fe(te))}this.dragOptions={element:se,gd:ae,plotinfo:{id:re.id,domain:ae._fullLayout[re.id].domain,xaxis:re.xaxis,yaxis:re.yaxis},subplot:re.id,prepFn:function(ie,de,Se){re.dragOptions.xaxes=[re.xaxis],re.dragOptions.yaxes=[re.yaxis],I=ae._fullLayout._invScaleX,N=ae._fullLayout._invScaleY;var _e=re.dragOptions.dragmode=ae._fullLayout.dragmode;c(_e)?re.dragOptions.minDrag=1:re.dragOptions.minDrag=void 0,_e==="zoom"?(re.dragOptions.moveFn=Me,re.dragOptions.clickFn=he,re.dragOptions.doneFn=Pe,function(we,Ae,Oe){var ze=se.getBoundingClientRect();W=Ae-ze.left,F=Oe-ze.top,ae._fullLayout._calcInverseTransform(ae);var pe=ae._fullLayout._invTransform,be=T.apply3DTransform(pe)(W,F);W=be[0],F=be[1],j={a:re.aaxis.range[0],b:re.baxis.range[1],c:re.caxis.range[1]},te=j,H=re.aaxis.range[1]-j.a,Q=k(re.graphDiv._fullLayout[re.id].bgcolor).getLuminance(),$="M0,"+re.h+"L"+re.w/2+", 0L"+re.w+","+re.h+"Z",K=!1,X=ce.append("path").attr("class","zoombox").attr("transform",_(re.x0,re.y0)).style({fill:Q>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",$),Y=ce.append("path").attr("class","zoombox-corners").attr("transform",_(re.x0,re.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),re.clearOutline(ae)}(0,de,Se)):_e==="pan"?(re.dragOptions.moveFn=ge,re.dragOptions.clickFn=he,re.dragOptions.doneFn=oe,j={a:re.aaxis.range[0],b:re.baxis.range[1],c:re.caxis.range[1]},te=j,re.clearOutline(ae)):(x(_e)||c(_e))&&v(ie,de,Se,re.dragOptions,_e)}},se.onmousemove=function(ie){u.hover(ae,ie,re.id),ae._fullLayout._lasthover=se,ae._fullLayout._hoversubplot=re.id},se.onmouseout=function(ie){ae._dragging||l.unhover(ae,ie)},l.init(this.dragOptions)}},24040:function(ee,R,e){var M=e(24248),k=e(16628),o=e(52416),T=e(63620),_=e(52200).addStyleRule,p=e(92880),s=e(45464),t=e(64859),i=p.extendFlat,r=p.extendDeepAll;function n(g){var y=g.name,m=g.categories,b=g.meta;if(R.modules[y])M.log("Type "+y+" already registered");else{R.subplotsRegistry[g.basePlotModule.name]||function(D){var U=D.name;if(R.subplotsRegistry[U])M.log("Plot type "+U+" already registered.");else for(var I in h(D),R.subplotsRegistry[U]=D,R.componentsRegistry)d(I,D.name)}(g.basePlotModule);for(var f={},S=0;S<m.length;S++)f[m[S]]=!0,R.allCategories[m[S]]=!0;for(var w in R.modules[y]={_module:g,categories:f},b&&Object.keys(b).length&&(R.modules[y].meta=b),R.allTypes.push(y),R.componentsRegistry)c(w,y);g.layoutAttributes&&i(R.traceLayoutAttributes,g.layoutAttributes);var E=g.basePlotModule,O=E.name;if(O==="mapbox"){var C=E.constants.styleRules;for(var P in C)_(".js-plotly-plot .plotly .mapboxgl-"+P,C[P])}O!=="geo"&&O!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(g){if(typeof g.name!="string")throw new Error("Component module *name* must be a string.");var y=g.name;for(var m in R.componentsRegistry[y]=g,g.layoutAttributes&&(g.layoutAttributes._isLinkedToArray&&o(R.layoutArrayContainers,y),h(g)),R.modules)c(y,m);for(var b in R.subplotsRegistry)d(y,b);for(var f in R.transformsRegistry)x(y,f);g.schema&&g.schema.layout&&r(t,g.schema.layout)}function l(g){if(typeof g.name!="string")throw new Error("Transform module *name* must be a string.");var y="Transform module "+g.name,m=typeof g.transform=="function",b=typeof g.calcTransform=="function";if(!m&&!b)throw new Error(y+" is missing a *transform* or *calcTransform* method.");for(var f in m&&b&&M.log([y+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(g.attributes)||M.log(y+" registered without an *attributes* object."),typeof g.supplyDefaults!="function"&&M.log(y+" registered without a *supplyDefaults* method."),R.transformsRegistry[g.name]=g,R.componentsRegistry)x(f,g.name)}function u(g){var y=g.name,m=y.split("-")[0],b=g.dictionary,f=g.format,S=b&&Object.keys(b).length,w=f&&Object.keys(f).length,E=R.localeRegistry,O=E[y];if(O||(E[y]=O={}),m!==y){var C=E[m];C||(E[m]=C={}),S&&C.dictionary===O.dictionary&&(C.dictionary=b),w&&C.format===O.format&&(C.format=f)}S&&(O.dictionary=b),w&&(O.format=f)}function h(g){if(g.layoutAttributes){var y=g.layoutAttributes._arrayAttrRegexps;if(y)for(var m=0;m<y.length;m++)o(R.layoutArrayRegexes,y[m])}}function c(g,y){var m=R.componentsRegistry[g].schema;if(m&&m.traces){var b=m.traces[y];b&&r(R.modules[y]._module.attributes,b)}}function x(g,y){var m=R.componentsRegistry[g].schema;if(m&&m.transforms){var b=m.transforms[y];b&&r(R.transformsRegistry[y].attributes,b)}}function d(g,y){var m=R.componentsRegistry[g].schema;if(m&&m.subplots){var b=R.subplotsRegistry[y],f=b.layoutAttributes,S=b.attr==="subplot"?b.name:b.attr;Array.isArray(S)&&(S=S[0]);var w=m.subplots[S];f&&w&&r(f,w)}}function v(g){return typeof g=="object"&&(g=g.type),g}R.modules={},R.allCategories={},R.allTypes=[],R.subplotsRegistry={},R.transformsRegistry={},R.componentsRegistry={},R.layoutArrayContainers=[],R.layoutArrayRegexes=[],R.traceLayoutAttributes={},R.localeRegistry={},R.apiMethodRegistry={},R.collectableSubplotTypes=null,R.register=function(g){if(R.collectableSubplotTypes=null,!g)throw new Error("No argument passed to Plotly.register.");g&&!Array.isArray(g)&&(g=[g]);for(var y=0;y<g.length;y++){var m=g[y];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":n(m);break;case"transform":l(m);break;case"component":a(m);break;case"locale":u(m);break;case"apiMethod":var b=m.name;R.apiMethodRegistry[b]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},R.getModule=function(g){var y=R.modules[v(g)];return!!y&&y._module},R.traceIs=function(g,y){if((g=v(g))==="various")return!1;var m=R.modules[g];return m||(g&&M.log("Unrecognized trace type "+g+"."),m=R.modules[s.type.dflt]),!!m.categories[y]},R.getTransformIndices=function(g,y){for(var m=[],b=g.transforms||[],f=0;f<b.length;f++)b[f].type===y&&m.push(f);return m},R.hasTransform=function(g,y){for(var m=g.transforms||[],b=0;b<m.length;b++)if(m[b].type===y)return!0;return!1},R.getComponentMethod=function(g,y){var m=R.componentsRegistry[g];return m&&m[y]||k},R.call=function(){var g=arguments[0],y=[].slice.call(arguments,1);return R.apiMethodRegistry[g].apply(null,y)}},91536:function(ee,R,e){var M=e(24040),k=e(3400),o=k.extendFlat,T=k.extendDeep;function _(p){var s;switch(p){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}ee.exports=function(p,s){var t,i,r=p.data,n=p.layout,a=T([],r),l=T({},n,_(s.tileClass)),u=p._context||{};if(s.width&&(l.width=s.width),s.height&&(l.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){l.annotations=[];var h=Object.keys(l);for(t=0;t<h.length;t++)i=h[t],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(l[h[t]].title={text:""});for(t=0;t<a.length;t++){var c=a[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),M.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)l.annotations.push(s.annotations[t]);var x=Object.keys(l).filter(function(m){return m.match(/^scene\d*$/)});if(x.length){var d={};for(s.tileClass==="thumbnail"&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var v=l[x[t]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),o(v.xaxis,d),o(v.yaxis,d),o(v.zaxis,d),v._scene=null}}var g=document.createElement("div");s.tileClass&&(g.className=s.tileClass);var y={gd:g,td:g,layout:l,data:a,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return s.setBackground!=="transparent"&&(y.config.setBackground=s.setBackground||"opaque"),y.gd.defaultLayout=_(s.tileClass),y}},39792:function(ee,R,e){var M=e(3400),k=e(67024),o=e(48616),T=e(81792);ee.exports=function(_,p){var s;return M.isPlainObject(_)||(s=M.getGraphDiv(_)),(p=p||{}).format=p.format||"png",p.width=p.width||null,p.height=p.height||null,p.imageDataOnly=!0,new Promise(function(t,i){s&&s._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),M.isIE()&&p.format!=="svg"&&i(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=k(_,p),n=p.filename||_.fn||"newplot";n+="."+p.format.replace("-","."),r.then(function(a){return s&&(s._snapshotInProgress=!1),o(a,n,p.format)}).then(function(a){t(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),i(a)})})}},48616:function(ee,R,e){var M=e(3400),k=e(81792);ee.exports=function(o,T,_){var p=document.createElement("a"),s="download"in p;return new Promise(function(t,i){var r,n;if(M.isIE())return r=k.createBlob(o,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T);if(s)return r=k.createBlob(o,_),n=k.createObjectURL(r),p.href=n,p.download=T,document.body.appendChild(p),p.click(),document.body.removeChild(p),k.revokeObjectURL(n),r=null,t(T);if(M.isSafari()){var a=_==="svg"?",":";base64,";return k.octetStream(a+encodeURIComponent(o)),t(T)}i(new Error("download error"))})}},81792:function(ee,R,e){var M=e(24040);R.getDelay=function(o){return o._has&&(o._has("gl3d")||o._has("gl2d")||o._has("mapbox"))?500:0},R.getRedrawFunc=function(o){return function(){M.getComponentMethod("colorbar","draw")(o)}},R.encodeSVG=function(o){return"data:image/svg+xml,"+encodeURIComponent(o)},R.encodeJSON=function(o){return"data:application/json,"+encodeURIComponent(o)};var k=window.URL||window.webkitURL;R.createObjectURL=function(o){return k.createObjectURL(o)},R.revokeObjectURL=function(o){return k.revokeObjectURL(o)},R.createBlob=function(o,T){if(T==="svg")return new window.Blob([o],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([o],{type:"application/json;charset=utf-8"});var _=function(p){for(var s=p.length,t=new ArrayBuffer(s),i=new Uint8Array(t),r=0;r<s;r++)i[r]=p.charCodeAt(r);return t}(window.atob(o));return new window.Blob([_],{type:"image/"+T})},R.octetStream=function(o){document.location.href="data:application/octet-stream"+o},R.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,R.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(ee,R,e){var M=e(81792),k={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};ee.exports=k},63268:function(ee,R,e){var M=e(3400),k=e(61252).EventEmitter,o=e(81792);ee.exports=function(T){var _=T.emitter||new k,p=new Promise(function(s,t){var i=window.Image,r=T.svg,n=T.format||"png";if(M.isIE()&&n!=="svg"){var a=new Error(o.MSG_IE_BAD_FORMAT);return t(a),T.promise?p:_.emit("error",a)}var l,u,h=T.canvas,c=T.scale||1,x=T.width||300,d=T.height||150,v=c*x,g=c*d,y=h.getContext("2d",{willReadFrequently:!0}),m=new i;n==="svg"||M.isSafari()?u=o.encodeSVG(r):(l=o.createBlob(r,"svg"),u=o.createObjectURL(l)),h.width=v,h.height=g,m.onload=function(){var b;switch(l=null,o.revokeObjectURL(u),n!=="svg"&&y.drawImage(m,0,0,v,g),n){case"jpeg":b=h.toDataURL("image/jpeg");break;case"png":b=h.toDataURL("image/png");break;case"webp":b=h.toDataURL("image/webp");break;case"svg":b=u;break;default:var f="Image format is not jpeg, png, svg or webp.";if(t(new Error(f)),!T.promise)return _.emit("error",f)}s(b),T.promise||_.emit("success",b)},m.onerror=function(b){if(l=null,o.revokeObjectURL(u),t(b),!T.promise)return _.emit("error",b)},m.src=u});return T.promise?p:_}},61808:function(ee,R,e){var M=e(61252).EventEmitter,k=e(24040),o=e(3400),T=e(81792),_=e(91536),p=e(37164),s=e(63268);ee.exports=function(t,i){var r=new M,n=_(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var l=T.getRedrawFunc(a);return k.call("_doPlot",a,n.data,n.layout,n.config).then(l).then(function(){var u=T.getDelay(a._fullLayout);setTimeout(function(){var h=p(a),c=document.createElement("canvas");c.id=o.randstr(),(r=s({format:i.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:c,emitter:r,svg:h})).clean=function(){a&&document.body.removeChild(a)}},u)}).catch(function(u){r.emit("error",u)}),r}},37164:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616),T=e(76308),_=e(9616),p=/"/g,s="TOBESTRIPPED",t=new RegExp('("'+s+")|("+s+'")',"g");ee.exports=function(i,r,n){var a,l=i._fullLayout,u=l._paper,h=l._toppaper,c=l.width,x=l.height;u.insert("rect",":first-child").call(o.setRect,0,0,c,x).call(T.fill,l.paper_bgcolor);var d=l._basePlotModules||[];for(a=0;a<d.length;a++){var v=d[a];v.toSVG&&v.toSVG(i)}if(h){var g=h.node().childNodes,y=Array.prototype.slice.call(g);for(a=0;a<y.length;a++){var m=y[a];m.childNodes.length&&u.node().appendChild(m)}}l._draggers&&l._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var f=M.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){f.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&f.style("font-family",S.replace(p,s));var w=this.style.fontWeight;!w||w!=="normal"&&w!=="400"||f.style("font-weight",void 0);var E=this.style.fontStyle;E&&E==="normal"&&f.style("font-style",void 0);var O=this.style.fontVariant;O&&O==="normal"&&f.style("font-variant",void 0)}else f.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var f=M.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&f.style("fill",S.replace(p,s));var w=this.style.stroke;w&&w.indexOf("url(")!==-1&&f.style("stroke",w.replace(p,s))}),r!=="pdf"&&r!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(_.xmlns,"xmlns",_.svg),u.node().setAttributeNS(_.xmlns,"xmlns:xlink",_.xlink),r==="svg"&&n&&(u.attr("width",n*c),u.attr("height",n*x),u.attr("viewBox","0 0 "+c+" "+x));var b=new window.XMLSerializer().serializeToString(u.node());return b=(b=(b=function(f){var S=M.select("body").append("div").style({display:"none"}).html(""),w=f.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),w}(b)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(b=(b=(b=b.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),b}},84664:function(ee,R,e){var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.hovertext,k,"htx");var _=o.marker;if(_){M.mergeArray(_.opacity,k,"mo",!0),M.mergeArray(_.color,k,"mc");var p=_.line;p&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"))}}},20832:function(ee,R,e){var M=e(52904),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,_=e(49084),p=e(25376),s=e(78048),t=e(98192).c,i=e(92880).extendFlat,r=p({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=i({},M.marker.line.width,{dflt:0}),a=i({width:n,editType:"calc"},_("marker.line")),l=i({line:a,editType:"calc"},_("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});ee.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:M.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:M.hovertext,hovertemplate:o({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},r,{}),insidetextfont:i({},r,{}),outsidetextfont:i({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},zorder:M.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(ee,R,e){var M=e(54460),k=e(1220),o=e(94288).hasColorscale,T=e(47128),_=e(84664),p=e(4500);ee.exports=function(s,t){var i,r,n,a,l,u,h=M.getFromId(s,t.xaxis||"x"),c=M.getFromId(s,t.yaxis||"y"),x={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(i=h.makeCalcdata(t,"x",x),n=c.makeCalcdata(t,"y"),a=k(t,c,"y",n),l=!!t.yperiodalignment,u="y"):(i=c.makeCalcdata(t,"y",x),n=h.makeCalcdata(t,"x"),a=k(t,h,"x",n),l=!!t.xperiodalignment,u="x"),r=a.vals;for(var d=Math.min(r.length,i.length),v=new Array(d),g=0;g<d;g++)v[g]={p:r[g],s:i[g]},l&&(v[g].orig_p=n[g],v[g][u+"End"]=a.ends[g],v[g][u+"Start"]=a.starts[g]),t.ids&&(v[g].id=String(t.ids[g]));return o(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),_(v,t),p(v,t),v}},78048:function(ee){ee.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(ee,R,e){var M=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(24040),_=e(54460),p=e(71888).getAxisGroup,s=e(72592);function t(d,v,g,y,m){if(y.length){var b,f,S,w;switch(function(E,O){var C,P;for(C=0;C<O.length;C++){var D,U=O[C],I=U[0].trace,N=I.type==="funnel"?I._base:I.base,W=I.orientation==="h"?I.xcalendar:I.ycalendar,F=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(N)){for(P=0;P<Math.min(N.length,U.length);P++)D=F(N[P],0,W),M(D)?(U[P].b=+D,U[P].hasB=1):U[P].b=0;for(;P<U.length;P++)U[P].b=0}else{D=F(N,0,W);var j=M(D);for(D=j?D:0,P=0;P<U.length;P++)U[P].b=D,j&&(U[P].hasB=1)}}}(g,y),m.mode){case"overlay":i(v,g,y,m);break;case"group":for(b=[],f=[],S=0;S<y.length;S++)(w=y[S])[0].trace.offset===void 0?f.push(w):b.push(w);f.length&&function(E,O,C,P,D){var U=new s(P,{posAxis:O,sepNegVal:!1,overlapNoMerge:!D.norm});(function(I,N,W,F){for(var j=I._fullLayout,H=W.positions,te=W.distinctPositions,Q=W.minDiff,$=W.traces,K=$.length,X=H.length!==te.length,Y=Q*(1-F.gap),re=p(j,N._id)+$[0][0].trace.orientation,se=j._alignmentOpts[re]||{},ae=0;ae<K;ae++){var ce,fe,he=$[ae],ve=he[0].trace,ye=se[ve.alignmentgroup]||{},me=Object.keys(ye.offsetGroups||{}).length,Me=(ce=me?Y/me:X?Y/K:Y)*(1-(F.groupgap||0));fe=me?((2*ve._offsetIndex+1-me)*ce-Me)/2:X?((2*ae+1-K)*ce-Me)/2:-Me/2;var Pe=he[0].t;Pe.barwidth=Me,Pe.poffset=fe,Pe.bargroupwidth=Y,Pe.bardelta=Q}W.binWidth=$[0][0].t.barwidth/100,n(W),a(N,W),l(N,W,X)})(E,O,U,D),function(I,N){for(var W=I.traces,F=0;F<W.length;F++){var j=W[F];if(j[0].trace.base===void 0)for(var H=new s([j],{posAxis:N,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<j.length;te++){var Q=j[te];if(Q.p!==o){var $=H.put(Q.p,Q.b+Q.s);$&&(Q.b=$)}}}}(U,O),D.norm?(h(U),c(C,U,D)):u(C,U)}(d,v,g,f,m),b.length&&i(v,g,b,m);break;case"stack":case"relative":for(b=[],f=[],S=0;S<y.length;S++)(w=y[S])[0].trace.base===void 0?f.push(w):b.push(w);(function(E){if(!(E.length<2)){var O,C,P,D,U,I;for(O=0;O<E.length&&(D=(C=E[O][0].trace).marker?C.marker.cornerradius:void 0)===void 0;O++);if(D!==void 0)for(U=M(D)?+D:+D.slice(0,-1),I=M(D)?"px":"%",O=0;O<E.length;O++)(P=E[O][0].t).cornerradiusvalue=U,P.cornerradiusform=I}})(f),f.length&&function(E,O,C,P,D){var U=new s(P,{posAxis:O,sepNegVal:D.mode==="relative",overlapNoMerge:!(D.norm||D.mode==="stack"||D.mode==="relative")});r(O,U,D),function(j,H,te){var Q,$,K,X,Y,re,se=x(j),ae=H.traces;for(X=0;X<ae.length;X++)if(($=(Q=ae[X])[0].trace).type==="funnel")for(Y=0;Y<Q.length;Y++)(re=Q[Y]).s!==o&&H.put(re.p,-.5*re.s);for(X=0;X<ae.length;X++){K=($=(Q=ae[X])[0].trace).type==="funnel";var ce=[];for(Y=0;Y<Q.length;Y++)if((re=Q[Y]).s!==o){var fe;fe=K?re.s:re.s+re.b;var he=H.put(re.p,fe),ve=he+fe;re.b=he,re[se]=ve,te.norm||(ce.push(ve),re.hasB&&ce.push(he))}te.norm||($._extremes[j._id]=_.findExtremes(j,ce,{tozero:!0,padded:!0}))}}(C,U,D);for(var I=0;I<P.length;I++)for(var N=P[I],W=0;W<N.length;W++){var F=N[W];F.s!==o&&F.b+F.s===U.get(F.p,F.s)&&(F._outmost=!0)}D.norm&&c(C,U,D)}(0,v,g,f,m),b.length&&i(v,g,b,m)}(function(E){var O,C,P,D,U,I,N;for(O=0;O<E.length;O++)P=(C=E[O])[0].trace,(D=C[0].t).cornerradiusvalue===void 0&&(U=P.marker?P.marker.cornerradius:void 0)!==void 0&&(I=M(U)?+U:+U.slice(0,-1),N=M(U)?"px":"%",D.cornerradiusvalue=I,D.cornerradiusform=N)})(y),function(E,O){var C,P,D,U=x(O),I={},N=1/0,W=-1/0;for(C=0;C<E.length;C++)for(D=E[C],P=0;P<D.length;P++){var F=D[P].p;M(F)&&(N=Math.min(N,F),W=Math.max(W,F))}var j=1e4/(W-N),H=I.round=function(ve){return String(Math.round(j*(ve-N)))},te={},Q={},$=E.some(function(ve){var ye=ve[0].trace;return"marker"in ye&&ye.marker.cornerradius});for(C=0;C<E.length;C++){(D=E[C])[0].t.extents=I;var K=D[0].t.poffset,X=k(K);for(P=0;P<D.length;P++){var Y=D[P],re=Y[U]-Y.w/2;if(M(re)){var se=Y[U]+Y.w/2,ae=H(Y.p);I[ae]?I[ae]=[Math.min(re,I[ae][0]),Math.max(se,I[ae][1])]:I[ae]=[re,se]}if(Y.p0=Y.p+(X?K[P]:K),Y.p1=Y.p0+Y.w,Y.s0=Y.b,Y.s1=Y.s0+Y.s,$){var ce=Math.min(Y.s0,Y.s1)||0,fe=Math.max(Y.s0,Y.s1)||0,he=Y[U];te[he]=he in te?Math.min(te[he],ce):ce,Q[he]=he in Q?Math.max(Q[he],fe):fe}}}$&&function(ve,ye,me,Me){for(var Pe=x(Me),ge=0;ge<ve.length;ge++)for(var oe=ve[ge],ie=0;ie<oe.length;ie++){var de=oe[ie],Se=de[Pe];de._sMin=ye[Se],de._sMax=me[Se]}}(E,te,Q,O)}(y,v)}}function i(d,v,g,y){for(var m=0;m<g.length;m++){var b=g[m],f=new s([b],{posAxis:d,sepNegVal:!1,overlapNoMerge:!y.norm});r(d,f,y),y.norm?(h(f),c(v,f,y)):u(v,f)}}function r(d,v,g){for(var y=v.minDiff,m=v.traces,b=y*(1-g.gap),f=b*(1-(g.groupgap||0)),S=-f/2,w=0;w<m.length;w++){var E=m[w][0].t;E.barwidth=f,E.poffset=S,E.bargroupwidth=b,E.bardelta=y}v.binWidth=m[0][0].t.barwidth/100,n(v),a(d,v),l(d,v)}function n(d){var v,g,y=d.traces;for(v=0;v<y.length;v++){var m,b=y[v],f=b[0],S=f.trace,w=f.t,E=S._offset||S.offset,O=w.poffset;if(k(E)){for(m=Array.prototype.slice.call(E,0,b.length),g=0;g<m.length;g++)M(m[g])||(m[g]=O);for(g=m.length;g<b.length;g++)m.push(O);w.poffset=m}else E!==void 0&&(w.poffset=E);var C=S._width||S.width,P=w.barwidth;if(k(C)){var D=Array.prototype.slice.call(C,0,b.length);for(g=0;g<D.length;g++)M(D[g])||(D[g]=P);for(g=D.length;g<b.length;g++)D.push(P);if(w.barwidth=D,E===void 0){for(m=[],g=0;g<b.length;g++)m.push(O+(P-D[g])/2);w.poffset=m}}else C!==void 0&&(w.barwidth=C,E===void 0&&(w.poffset=O+(P-C)/2))}}function a(d,v){for(var g=v.traces,y=x(d),m=0;m<g.length;m++)for(var b=g[m],f=b[0].t,S=f.poffset,w=k(S),E=f.barwidth,O=k(E),C=0;C<b.length;C++){var P=b[C],D=P.w=O?E[C]:E;P.p===void 0&&(P.p=P[y],P["orig_"+y]=P[y]);var U=(w?S[C]:S)+D/2;P[y]=P.p+U}}function l(d,v,g){var y=v.traces,m=v.minDiff/2;_.minDtick(d,v.minDiff,v.distinctPositions[0],g);for(var b=0;b<y.length;b++){var f,S,w,E,O=y[b],C=O[0],P=C.trace,D=[];for(E=0;E<O.length;E++)S=(f=O[E]).p-m,w=f.p+m,D.push(S,w);if(P.width||P.offset){var U=C.t,I=U.poffset,N=U.barwidth,W=k(I),F=k(N);for(E=0;E<O.length;E++){f=O[E];var j=W?I[E]:I,H=F?N[E]:N;w=(S=f.p+j)+H,D.push(S,w)}}P._extremes[d._id]=_.findExtremes(d,D,{padded:!1})}}function u(d,v){for(var g=v.traces,y=x(d),m=0;m<g.length;m++){for(var b=g[m],f=b[0].trace,S=f.type==="scatter",w=f.orientation==="v",E=[],O=!1,C=0;C<b.length;C++){var P=b[C],D=S?0:P.b,U=S?w?P.y:P.x:D+P.s;P[y]=U,E.push(U),P.hasB&&E.push(D),P.hasB&&P.b||(O=!0)}f._extremes[d._id]=_.findExtremes(d,E,{tozero:O,padded:!0})}}function h(d){for(var v=d.traces,g=0;g<v.length;g++)for(var y=v[g],m=0;m<y.length;m++){var b=y[m];b.s!==o&&d.put(b.p,b.b+b.s)}}function c(d,v,g){var y=v.traces,m=x(d),b=g.norm==="fraction"?1:100,f=b/1e9,S=d.l2c(d.c2l(0)),w=g.mode==="stack"?b:S;function E(te){return M(d.c2l(te))&&(te<S-f||te>w+f||!M(S))}for(var O=0;O<y.length;O++){for(var C=y[O],P=C[0].trace,D=[],U=!1,I=!1,N=0;N<C.length;N++){var W=C[N];if(W.s!==o){var F=Math.abs(b/v.get(W.p,W.s));W.b*=F,W.s*=F;var j=W.b,H=j+W.s;W[m]=H,D.push(H),I=I||E(H),W.hasB&&(D.push(j),I=I||E(j)),W.hasB&&W.b||(U=!0)}}P._extremes[d._id]=_.findExtremes(d,D,{tozero:U,padded:I})}}function x(d){return d._id.charAt(0)}ee.exports={crossTraceCalc:function(d,v){for(var g=v.xaxis,y=v.yaxis,m=d._fullLayout,b=d._fullData,f=d.calcdata,S=[],w=[],E=0;E<b.length;E++){var O=b[E];if(O.visible===!0&&T.traceIs(O,"bar")&&O.xaxis===g._id&&O.yaxis===y._id&&(O.orientation==="h"?S.push(f[E]):w.push(f[E]),O._computePh))for(var C=d.calcdata[E],P=0;P<C.length;P++)typeof C[P].ph0=="function"&&(C[P].ph0=C[P].ph0()),typeof C[P].ph1=="function"&&(C[P].ph1=C[P].ph1())}var D={xCat:g.type==="category"||g.type==="multicategory",yCat:y.type==="category"||y.type==="multicategory",mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};t(d,g,y,w,D),t(d,y,g,S,D)},setGroupPositions:t}},31508:function(ee,R,e){var M=e(38248),k=e(3400),o=e(76308),T=e(24040),_=e(43980),p=e(31147),s=e(55592),t=e(20011),i=e(20832),r=k.coerceFont;function n(l){if(M(l)){if((l=+l)>=0)return l}else if(typeof l=="string"&&(l=l.trim()).slice(-1)==="%"&&M(l.slice(0,-1))&&(l=+l.slice(0,-1))>=0)return l+"%"}function a(l,u,h,c,x,d){var v=(d=d||{}).moduleHasSelected!==!1,g=d.moduleHasUnselected!==!1,y=d.moduleHasConstrain!==!1,m=d.moduleHasCliponaxis!==!1,b=d.moduleHasTextangle!==!1,f=d.moduleHasInsideanchor!==!1,S=!!d.hasPathbar,w=Array.isArray(x)||x==="auto",E=w||x==="inside",O=w||x==="outside";if(E||O){var C=r(c,"textfont",h.font),P=k.extendFlat({},C),D=!(l.textfont&&l.textfont.color);if(D&&delete P.color,r(c,"insidetextfont",P),S){var U=k.extendFlat({},C);D&&delete U.color,r(c,"pathbar.textfont",U)}O&&r(c,"outsidetextfont",C),v&&c("selected.textfont.color"),g&&c("unselected.textfont.color"),y&&c("constraintext"),m&&c("cliponaxis"),b&&c("textangle"),c("texttemplate")}E&&f&&c("insidetextanchor")}ee.exports={supplyDefaults:function(l,u,h,c){function x(y,m){return k.coerce(l,u,i,y,m)}if(_(l,u,c,x)){p(l,u,c,x),x("xhoverformat"),x("yhoverformat"),x("zorder"),x("orientation",u.x&&!u.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var d=x("textposition");a(l,0,c,x,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(l,u,x,h,c);var v=(u.marker.line||{}).color,g=T.getComponentMethod("errorbars","supplyDefaults");g(l,u,v||o.defaultLine,{axis:"y"}),g(l,u,v||o.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1},crossTraceDefaults:function(l,u){var h,c;function x(g,y){return k.coerce(c._input,c,i,g,y)}for(var d=0;d<l.length;d++)if((c=l[d]).type==="bar"){h=c._input;var v=x("marker.cornerradius",u.barcornerradius);c.marker&&(c.marker.cornerradius=n(v)),u.barmode==="group"&&t(h,c,u,x)}},handleText:a,validateCornerradius:n}},52160:function(ee){ee.exports=function(R,e,M){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),M.orientation==="h"?(R.label=R.y,R.value=R.x):(R.label=R.x,R.value=R.y),R}},60444:function(ee,R,e){var M=e(38248),k=e(49760),o=e(3400).isArrayOrTypedArray;R.coerceString=function(T,_,p){if(typeof _=="string"){if(_||!T.noBlank)return _}else if((typeof _=="number"||_===!0)&&!T.strict)return String(_);return p!==void 0?p:T.dflt},R.coerceNumber=function(T,_,p){if(M(_)){_=+_;var s=T.min,t=T.max;if(!(s!==void 0&&_<s||t!==void 0&&_>t))return _}return p!==void 0?p:T.dflt},R.coerceColor=function(T,_,p){return k(_).isValid()?_:p!==void 0?p:T.dflt},R.coerceEnumerated=function(T,_,p){return T.coerceNumber&&(_=+_),T.values.indexOf(_)!==-1?_:p!==void 0?p:T.dflt},R.getValue=function(T,_){var p;return o(T)?_<T.length&&(p=T[_]):p=T,p},R.getLineWidth=function(T,_){return 0<_.mlw?_.mlw:o(T.marker.line.width)?0:T.marker.line.width}},63400:function(ee,R,e){var M=e(93024),k=e(24040),o=e(76308),T=e(3400).fillText,_=e(60444).getLineWidth,p=e(54460).hoverLabelText,s=e(39032).BADNUM;function t(r,n,a,l,u){var h,c,x,d,v,g,y,m=r.cd,b=m[0].trace,f=m[0].t,S=l==="closest",w=b.type==="waterfall",E=r.maxHoverDistance,O=r.maxSpikeDistance;b.orientation==="h"?(h=a,c=n,x="y",d="x",v=Q,g=H):(h=n,c=a,x="x",d="y",g=Q,v=H);var C=b[x+"period"],P=S||C;function D(ce){return I(ce,-1)}function U(ce){return I(ce,1)}function I(ce,fe){var he=ce.w;return ce[x]+fe*he/2}function N(ce){return ce[x+"End"]-ce[x+"Start"]}var W=S?D:C?function(ce){return ce.p-N(ce)/2}:function(ce){return Math.min(D(ce),ce.p-f.bardelta/2)},F=S?U:C?function(ce){return ce.p+N(ce)/2}:function(ce){return Math.max(U(ce),ce.p+f.bardelta/2)};function j(ce,fe,he){return u.finiteRange&&(he=0),M.inbox(ce-h,fe-h,he+Math.min(1,Math.abs(fe-ce)/y)-1)}function H(ce){return j(W(ce),F(ce),E)}function te(ce){var fe=ce[d];if(w){var he=Math.abs(ce.rawS)||0;c>0?fe+=he:c<0&&(fe-=he)}return fe}function Q(ce){var fe=c,he=ce.b,ve=te(ce);return M.inbox(he-fe,ve-fe,E+(ve-fe)/(ve-he)-1)}var $=r[x+"a"],K=r[d+"a"];y=Math.abs($.r2c($.range[1])-$.r2c($.range[0]));var X=M.getDistanceFunction(l,v,g,function(ce){return(v(ce)+g(ce))/2});if(M.getClosest(m,X,r),r.index!==!1&&m[r.index].p!==s){P||(W=function(ce){return Math.min(D(ce),ce.p-f.bargroupwidth/2)},F=function(ce){return Math.max(U(ce),ce.p+f.bargroupwidth/2)});var Y=m[r.index],re=b.base?Y.b+Y.s:Y.s;r[d+"0"]=r[d+"1"]=K.c2p(Y[d],!0),r[d+"LabelVal"]=re;var se=f.extents[f.extents.round(Y.p)];r[x+"0"]=$.c2p(S?W(Y):se[0],!0),r[x+"1"]=$.c2p(S?F(Y):se[1],!0);var ae=Y.orig_p!==void 0;return r[x+"LabelVal"]=ae?Y.orig_p:Y.p,r.labelLabel=p($,r[x+"LabelVal"],b[x+"hoverformat"]),r.valueLabel=p(K,r[d+"LabelVal"],b[d+"hoverformat"]),r.baseLabel=p(K,Y.b,b[d+"hoverformat"]),r.spikeDistance=(function(ce){var fe=c,he=ce.b,ve=te(ce);return M.inbox(he-fe,ve-fe,O+(ve-fe)/(ve-he)-1)}(Y)+function(ce){return j(D(ce),U(ce),O)}(Y))/2,r[x+"Spike"]=$.c2p(Y.p,!0),T(Y,b,r),r.hovertemplate=b.hovertemplate,r}}function i(r,n){var a=n.mcc||r.marker.color,l=n.mlcc||r.marker.line.color,u=_(r,n);return o.opacity(a)?a:o.opacity(l)&&u?l:void 0}ee.exports={hoverPoints:function(r,n,a,l,u){var h=t(r,n,a,l,u);if(h){var c=h.cd,x=c[0].trace,d=c[h.index];return h.color=i(x,d),k.getComponentMethod("errorbars","hoverInfo")(d,x,h),[h]}},hoverOnBars:t,getTraceColor:i}},51132:function(ee,R,e){ee.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(ee){ee.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(ee,R,e){var M=e(24040),k=e(54460),o=e(3400),T=e(39324),_=e(31508).validateCornerradius;ee.exports=function(p,s,t){function i(v,g){return o.coerce(p,s,T,v,g)}for(var r=!1,n=!1,a=!1,l={},u=i("barmode"),h=0;h<t.length;h++){var c=t[h];if(M.traceIs(c,"bar")&&c.visible){if(r=!0,u==="group"){var x=c.xaxis+c.yaxis;l[x]&&(a=!0),l[x]=!0}c.visible&&c.type==="histogram"&&k.getFromId({_fullLayout:s},c[c.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(n=!0)}}if(r){u!=="overlay"&&i("barnorm"),i("bargap",n&&!a?0:.2),i("bargroupgap");var d=i("barcornerradius");s.barcornerradius=_(d)}else delete s.barmode}},98184:function(ee,R,e){var M=e(33428),k=e(38248),o=e(3400),T=e(72736),_=e(76308),p=e(43616),s=e(24040),t=e(54460).tickText,i=e(82744),r=i.recordMinTextSize,n=i.clearMinTextSize,a=e(60100),l=e(60444),u=e(78048),h=e(20832),c=h.text,x=h.textposition,d=e(10624).appendArrayPointValue,v=u.TEXTPAD;function g(P){return P.id}function y(P){if(P.ids)return g}function m(P){return(P>0)-(P<0)}function b(P,D){return P<D?1:-1}function f(P,D,U,I){var N;return!D.uniformtext.mode&&S(U)?(I&&(N=I()),P.transition().duration(U.duration).ease(U.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()})):P}function S(P){return P&&P.duration>0}function w(P,D,U,I,N){return!(P<0||D<0)&&(U<=P&&I<=D||U<=D&&I<=P||(N?P>=U*(D/I):D>=I*(P/U)))}function E(P){return P==="auto"?0:P}function O(P,D){var U=Math.PI/180*D,I=Math.abs(Math.sin(U)),N=Math.abs(Math.cos(U));return{x:P.width*N+P.height*I,y:P.width*I+P.height*N}}function C(P,D,U,I,N,W){var F=!!W.isHorizontal,j=!!W.constrained,H=W.angle||0,te=W.anchor,Q=te==="end",$=te==="start",K=((W.leftToRight||0)+1)/2,X=1-K,Y=W.hasB,re=W.r,se=W.overhead,ae=N.width,ce=N.height,fe=Math.abs(D-P),he=Math.abs(I-U),ve=fe>2*v&&he>2*v?v:0;fe-=2*ve,he-=2*ve;var ye=E(H);H!=="auto"||ae<=fe&&ce<=he||!(ae>fe||ce>he)||(ae>he||ce>fe)&&ae<ce==fe<he||(ye+=90);var me,Me,Pe=O(N,ye);if(re&&re-se>v){var ge=function(ze,pe,be,ke,Ie,Ee,Be,Ve,Ze){var rt,it,dt,vt,ht=Math.max(0,Math.abs(pe-ze)-2*v),Qe=Math.max(0,Math.abs(ke-be)-2*v),Je=Ee-v,Tt=Be?Je-Math.sqrt(Je*Je-(Je-Be)*(Je-Be)):Je,Ot=Ze?2*Je:Ve?Je-Be:2*Tt,Pt=Ze?2*Je:Ve?2*Tt:Je-Be;return Ie.y/Ie.x>=Qe/(ht-Ot)?vt=Qe/Ie.y:Ie.y/Ie.x<=(Qe-Pt)/ht?vt=ht/Ie.x:!Ze&&Ve?(rt=Ie.x*Ie.x+Ie.y*Ie.y/4,dt=(ht-Je)*(ht-Je)+(Qe/2-Je)*(Qe/2-Je)-Je*Je,vt=(-(it=-2*Ie.x*(ht-Je)-Ie.y*(Qe/2-Je))+Math.sqrt(it*it-4*rt*dt))/(2*rt)):Ze?(rt=(Ie.x*Ie.x+Ie.y*Ie.y)/4,dt=(ht/2-Je)*(ht/2-Je)+(Qe/2-Je)*(Qe/2-Je)-Je*Je,vt=(-(it=-Ie.x*(ht/2-Je)-Ie.y*(Qe/2-Je))+Math.sqrt(it*it-4*rt*dt))/(2*rt)):(rt=Ie.x*Ie.x/4+Ie.y*Ie.y,dt=(ht/2-Je)*(ht/2-Je)+(Qe-Je)*(Qe-Je)-Je*Je,vt=(-(it=-Ie.x*(ht/2-Je)-2*Ie.y*(Qe-Je))+Math.sqrt(it*it-4*rt*dt))/(2*rt)),{scale:vt=Math.min(1,vt),pad:Ve?Math.max(0,Je-Math.sqrt(Math.max(0,Je*Je-(Je-(Qe-Ie.y*vt)/2)*(Je-(Qe-Ie.y*vt)/2)))-Be):Math.max(0,Je-Math.sqrt(Math.max(0,Je*Je-(Je-(ht-Ie.x*vt)/2)*(Je-(ht-Ie.x*vt)/2)))-Be)}}(P,D,U,I,Pe,re,se,F,Y);me=ge.scale,Me=ge.pad}else me=1,j&&(me=Math.min(1,fe/Pe.x,he/Pe.y)),Me=0;var oe=N.left*X+N.right*K,ie=(N.top+N.bottom)/2,de=(P+v)*X+(D-v)*K,Se=(U+I)/2,_e=0,we=0;if($||Q){var Ae=(F?Pe.x:Pe.y)/2;re&&(Q||Y)&&(ve+=Me);var Oe=F?b(P,D):b(U,I);F?$?(de=P+Oe*ve,_e=-Oe*Ae):(de=D-Oe*ve,_e=Oe*Ae):$?(Se=U+Oe*ve,we=-Oe*Ae):(Se=I-Oe*ve,we=Oe*Ae)}return{textX:oe,textY:ie,targetX:de,targetY:Se,anchorX:_e,anchorY:we,scale:me,rotate:ye}}ee.exports={plot:function(P,D,U,I,N,W){var F=D.xaxis,j=D.yaxis,H=P._fullLayout,te=P._context.staticPlot;N||(N={mode:H.barmode,norm:H.barmode,gap:H.bargap,groupgap:H.bargroupgap},n("bar",H));var Q=o.makeTraceGroups(I,U,"trace bars").each(function($){var K=M.select(this),X=$[0].trace,Y=$[0].t,re=X.type==="waterfall",se=X.type==="funnel",ae=X.type==="histogram",ce=X.type==="bar",fe=ce||se,he=0;re&&X.connector.visible&&X.connector.mode==="between"&&(he=X.connector.line.width/2);var ve=X.orientation==="h",ye=S(N),me=o.ensureSingle(K,"g","points"),Me=y(X),Pe=me.selectAll("g.point").data(o.identity,Me);Pe.enter().append("g").classed("point",!0),Pe.exit().remove(),Pe.each(function(oe,ie){var de,Se,_e=M.select(this),we=function(tt,Re,Fe,nt){var Ge=[],ct=[],pt=nt?Re:Fe,gt=nt?Fe:Re;return Ge[0]=pt.c2p(tt.s0,!0),ct[0]=gt.c2p(tt.p0,!0),Ge[1]=pt.c2p(tt.s1,!0),ct[1]=gt.c2p(tt.p1,!0),nt?[Ge,ct]:[ct,Ge]}(oe,F,j,ve),Ae=we[0][0],Oe=we[0][1],ze=we[1][0],pe=we[1][1],be=(ve?Oe-Ae:pe-ze)==0;if(be&&fe&&l.getLineWidth(X,oe)&&(be=!1),be||(be=!(k(Ae)&&k(Oe)&&k(ze)&&k(pe))),oe.isBlank=be,be&&(ve?Oe=Ae:pe=ze),he&&!be&&(ve?(Ae-=b(Ae,Oe)*he,Oe+=b(Ae,Oe)*he):(ze-=b(ze,pe)*he,pe+=b(ze,pe)*he)),X.type==="waterfall"){if(!be){var ke=X[oe.dir].marker;de=ke.line.width,Se=ke.color}}else de=l.getLineWidth(X,oe),Se=oe.mc||X.marker.color;function Ie(tt){var Re=M.round(de/2%1,2);return N.gap===0&&N.groupgap===0?M.round(Math.round(tt)-Re,2):tt}var Ee=_.opacity(Se)<1||de>.01?Ie:function(tt,Re,Fe){return Fe&&tt===Re?tt:Math.abs(tt-Re)>=2?Ie(tt):tt>Re?Math.ceil(tt):Math.floor(tt)};P._context.staticPlot||(Ae=Ee(Ae,Oe,ve),Oe=Ee(Oe,Ae,ve),ze=Ee(ze,pe,!ve),pe=Ee(pe,ze,!ve));var Be,Ve=ve?F.c2p:j.c2p;Be=oe.s0>0?oe._sMax:oe.s0<0?oe._sMin:oe.s1>0?oe._sMax:oe._sMin;var Ze,rt,it=ce||ae?function(tt,Re){if(!tt)return 0;var Fe,nt=Math.abs(ve?pe-ze:Oe-Ae),Ge=Math.abs(ve?Oe-Ae:pe-ze),ct=Ee(Math.abs(Ve(Be,!0)-Ve(0,!0))),pt=oe.hasB?Math.min(nt/2,Ge/2):Math.min(nt/2,ct);return Fe=Re==="%"?nt*(Math.min(50,tt)/100):tt,Ee(Math.max(Math.min(Fe,pt),0))}(Y.cornerradiusvalue,Y.cornerradiusform):0,dt="M"+Ae+","+ze+"V"+pe+"H"+Oe+"V"+ze+"Z",vt=0;if(it&&oe.s){var ht=m(oe.s0)===0||m(oe.s)===m(oe.s0)?oe.s1:oe.s0;if((vt=Ee(oe.hasB?0:Math.abs(Ve(Be,!0)-Ve(ht,!0))))<it){var Qe=b(Ae,Oe),Je=b(ze,pe),Tt=Qe===-Je?1:0;if(ve)if(oe.hasB)Ze="M"+(Ae+it*Qe)+","+ze+"A "+it+","+it+" 0 0 "+Tt+" "+Ae+","+(ze+it*Je)+"V"+(pe-it*Je)+"A "+it+","+it+" 0 0 "+Tt+" "+(Ae+it*Qe)+","+pe+"H"+(Oe-it*Qe)+"A "+it+","+it+" 0 0 "+Tt+" "+Oe+","+(pe-it*Je)+"V"+(ze+it*Je)+"A "+it+","+it+" 0 0 "+Tt+" "+(Oe-it*Qe)+","+ze+"Z";else{var Ot=(rt=Math.abs(Oe-Ae)+vt)<it?it-Math.sqrt(rt*(2*it-rt)):0,Pt=vt>0?Math.sqrt(vt*(2*it-vt)):0,Mt=Qe>0?Math.max:Math.min;Ze="M"+Ae+","+ze+"V"+(pe-Ot*Je)+"H"+Mt(Oe-(it-vt)*Qe,Ae)+"A "+it+","+it+" 0 0 "+Tt+" "+Oe+","+(pe-it*Je-Pt)+"V"+(ze+it*Je+Pt)+"A "+it+","+it+" 0 0 "+Tt+" "+Mt(Oe-(it-vt)*Qe,Ae)+","+(ze+Ot*Je)+"Z"}else if(oe.hasB)Ze="M"+(Ae+it*Qe)+","+ze+"A "+it+","+it+" 0 0 "+Tt+" "+Ae+","+(ze+it*Je)+"V"+(pe-it*Je)+"A "+it+","+it+" 0 0 "+Tt+" "+(Ae+it*Qe)+","+pe+"H"+(Oe-it*Qe)+"A "+it+","+it+" 0 0 "+Tt+" "+Oe+","+(pe-it*Je)+"V"+(ze+it*Je)+"A "+it+","+it+" 0 0 "+Tt+" "+(Oe-it*Qe)+","+ze+"Z";else{var He=(rt=Math.abs(pe-ze)+vt)<it?it-Math.sqrt(rt*(2*it-rt)):0,Ye=vt>0?Math.sqrt(vt*(2*it-vt)):0,Ne=Je>0?Math.max:Math.min;Ze="M"+(Ae+He*Qe)+","+ze+"V"+Ne(pe-(it-vt)*Je,ze)+"A "+it+","+it+" 0 0 "+Tt+" "+(Ae+it*Qe-Ye)+","+pe+"H"+(Oe-it*Qe+Ye)+"A "+it+","+it+" 0 0 "+Tt+" "+(Oe-He*Qe)+","+Ne(pe-(it-vt)*Je,ze)+"V"+ze+"Z"}}else Ze=dt}else Ze=dt;var We=f(o.ensureSingle(_e,"path"),H,N,W);if(We.style("vector-effect",te?"none":"non-scaling-stroke").attr("d",isNaN((Oe-Ae)*(pe-ze))||be&&P._context.staticPlot?"M0,0Z":Ze).call(p.setClipUrl,D.layerClipId,P),!H.uniformtext.mode&&ye){var ot=p.makePointStyleFns(X);p.singlePointStyle(oe,We,X,ot,P)}(function(tt,Re,Fe,nt,Ge,ct,pt,gt,ut,kt,mt,At,Lt){var Ct,zt=Re.xaxis,Gt=Re.yaxis,rn=tt._fullLayout;function Nt(fr,Zt,dn){return o.ensureSingle(fr,"text").text(Zt).attr({class:"bartext bartext-"+Ct,"text-anchor":"middle","data-notex":1}).call(p.font,dn).call(T.convertToTspans,tt)}var Wt=nt[0].trace,Rt=Wt.orientation==="h",Ln=function(fr,Zt,dn,bt,Ut){var Xt,un=Zt[0].trace;return Xt=un.texttemplate?function(cn,vn,en,Vt,Ht){var tn=vn[0].trace,sn=o.castOption(tn,en,"texttemplate");if(!sn)return"";var wn,An,Dn,Bn,Xn=tn.type==="histogram",Un=tn.type==="waterfall",tr=tn.type==="funnel",Qn=tn.orientation==="h";function Zn(Pr){return t(Bn,Bn.c2l(Pr),!0).text}Qn?(wn="y",An=Ht,Dn="x",Bn=Vt):(wn="x",An=Vt,Dn="y",Bn=Ht);var ur,mr=vn[en],hr={};hr.label=mr.p,hr.labelLabel=hr[wn+"Label"]=(ur=mr.p,t(An,An.c2l(ur),!0).text);var rr=o.castOption(tn,mr.i,"text");(rr===0||rr)&&(hr.text=rr),hr.value=mr.s,hr.valueLabel=hr[Dn+"Label"]=Zn(mr.s);var gr={};d(gr,tn,mr.i),(Xn||gr.x===void 0)&&(gr.x=Qn?hr.value:hr.label),(Xn||gr.y===void 0)&&(gr.y=Qn?hr.label:hr.value),(Xn||gr.xLabel===void 0)&&(gr.xLabel=Qn?hr.valueLabel:hr.labelLabel),(Xn||gr.yLabel===void 0)&&(gr.yLabel=Qn?hr.labelLabel:hr.valueLabel),Un&&(hr.delta=+mr.rawS||mr.s,hr.deltaLabel=Zn(hr.delta),hr.final=mr.v,hr.finalLabel=Zn(hr.final),hr.initial=hr.final-hr.delta,hr.initialLabel=Zn(hr.initial)),tr&&(hr.value=mr.s,hr.valueLabel=Zn(hr.value),hr.percentInitial=mr.begR,hr.percentInitialLabel=o.formatPercent(mr.begR),hr.percentPrevious=mr.difR,hr.percentPreviousLabel=o.formatPercent(mr.difR),hr.percentTotal=mr.sumR,hr.percenTotalLabel=o.formatPercent(mr.sumR));var xr=o.castOption(tn,mr.i,"customdata");return xr&&(hr.customdata=xr),o.texttemplateString(sn,hr,cn._d3locale,gr,hr,tn._meta||{})}(fr,Zt,dn,bt,Ut):un.textinfo?function(cn,vn,en,Vt){var Ht=cn[0].trace,tn=Ht.orientation==="h",sn=Ht.type==="waterfall",wn=Ht.type==="funnel";function An(xr){return t(tn?en:Vt,+xr,!0).text}var Dn,Bn,Xn=Ht.textinfo,Un=cn[vn],tr=Xn.split("+"),Qn=[],Zn=function(xr){return tr.indexOf(xr)!==-1};if(Zn("label")&&Qn.push((Bn=cn[vn].p,t(tn?Vt:en,Bn,!0).text)),Zn("text")&&((Dn=o.castOption(Ht,Un.i,"text"))===0||Dn)&&Qn.push(Dn),sn){var ur=+Un.rawS||Un.s,mr=Un.v,hr=mr-ur;Zn("initial")&&Qn.push(An(hr)),Zn("delta")&&Qn.push(An(ur)),Zn("final")&&Qn.push(An(mr))}if(wn){Zn("value")&&Qn.push(An(Un.s));var rr=0;Zn("percent initial")&&rr++,Zn("percent previous")&&rr++,Zn("percent total")&&rr++;var gr=rr>1;Zn("percent initial")&&(Dn=o.formatPercent(Un.begR),gr&&(Dn+=" of initial"),Qn.push(Dn)),Zn("percent previous")&&(Dn=o.formatPercent(Un.difR),gr&&(Dn+=" of previous"),Qn.push(Dn)),Zn("percent total")&&(Dn=o.formatPercent(Un.sumR),gr&&(Dn+=" of total"),Qn.push(Dn))}return Qn.join("<br>")}(Zt,dn,bt,Ut):l.getValue(un.text,dn),l.coerceString(c,Xt)}(rn,nt,Ge,zt,Gt);Ct=function(fr,Zt){var dn=l.getValue(fr.textposition,Zt);return l.coerceEnumerated(x,dn)}(Wt,Ge);var bn=At.mode==="stack"||At.mode==="relative",hn=nt[Ge],Kt=!bn||hn._outmost,on=hn.hasB,$t=kt&&kt-mt>v;if(Ln&&Ct!=="none"&&(!hn.isBlank&&ct!==pt&&gt!==ut||Ct!=="auto"&&Ct!=="inside")){var ln=rn.font,mn=a.getBarColor(nt[Ge],Wt),xn=a.getInsideTextFont(Wt,Ge,ln,mn),Mn=a.getOutsideTextFont(Wt,Ge,ln),Sn=Wt.insidetextanchor||"end",Tn=Fe.datum();Rt?zt.type==="log"&&Tn.s0<=0&&(ct=zt.range[0]<zt.range[1]?0:zt._length):Gt.type==="log"&&Tn.s0<=0&&(gt=Gt.range[0]<Gt.range[1]?Gt._length:0);var Rn,Pn,jn,Jn,$n,Gn=Math.abs(pt-ct),lr=Math.abs(ut-gt),Jt=Gn-2*v,Qt=lr-2*v;if(Ct==="outside"&&(Kt||hn.hasB||(Ct="inside")),Ct==="auto")if(Kt){Ct="inside",Rn=Nt(Fe,Ln,$n=o.ensureUniformFontSize(tt,xn)),jn=(Pn=p.bBox(Rn.node())).width,Jn=Pn.height;var En,pn=jn>0&&Jn>0;En=$t?on?w(Jt-2*kt,Qt,jn,Jn,Rt)||w(Jt,Qt-2*kt,jn,Jn,Rt):Rt?w(Jt-(kt-mt),Qt,jn,Jn,Rt)||w(Jt,Qt-2*(kt-mt),jn,Jn,Rt):w(Jt,Qt-(kt-mt),jn,Jn,Rt)||w(Jt-2*(kt-mt),Qt,jn,Jn,Rt):w(Jt,Qt,jn,Jn,Rt),pn&&En?Ct="inside":(Ct="outside",Rn.remove(),Rn=null)}else Ct="inside";if(!Rn){var Cn=(Rn=Nt(Fe,Ln,$n=o.ensureUniformFontSize(tt,Ct==="outside"?Mn:xn))).attr("transform");if(Rn.attr("transform",""),jn=(Pn=p.bBox(Rn.node())).width,Jn=Pn.height,Rn.attr("transform",Cn),jn<=0||Jn<=0)return void Rn.remove()}var Vn,Fn=Wt.textangle;Vn=Ct==="outside"?function(fr,Zt,dn,bt,Ut,Xt){var un,cn=!!Xt.isHorizontal,vn=!!Xt.constrained,en=Xt.angle||0,Vt=Ut.width,Ht=Ut.height,tn=Math.abs(Zt-fr),sn=Math.abs(bt-dn);un=cn?sn>2*v?v:0:tn>2*v?v:0;var wn=1;vn&&(wn=cn?Math.min(1,sn/Ht):Math.min(1,tn/Vt));var An=E(en),Dn=O(Ut,An),Bn=(cn?Dn.x:Dn.y)/2,Xn=(Ut.left+Ut.right)/2,Un=(Ut.top+Ut.bottom)/2,tr=(fr+Zt)/2,Qn=(dn+bt)/2,Zn=0,ur=0,mr=cn?b(Zt,fr):b(dn,bt);return cn?(tr=Zt-mr*un,Zn=mr*Bn):(Qn=bt+mr*un,ur=-mr*Bn),{textX:Xn,textY:Un,targetX:tr,targetY:Qn,anchorX:Zn,anchorY:ur,scale:wn,rotate:An}}(ct,pt,gt,ut,Pn,{isHorizontal:Rt,constrained:Wt.constraintext==="both"||Wt.constraintext==="outside",angle:Fn}):C(ct,pt,gt,ut,Pn,{isHorizontal:Rt,constrained:Wt.constraintext==="both"||Wt.constraintext==="inside",angle:Fn,anchor:Sn,hasB:on,r:kt,overhead:mt}),Vn.fontSize=$n.size,r(Wt.type==="histogram"?"bar":Wt.type,Vn,rn),hn.transform=Vn;var Yn=f(Rn,rn,At,Lt);o.setTransormAndDisplay(Yn,Vn)}else Fe.select("text").remove()})(P,D,_e,$,ie,Ae,Oe,ze,pe,it,vt,N,W),D.layerClipId&&p.hideOutsideRangePoint(oe,_e.select("text"),F,j,X.xcalendar,X.ycalendar)});var ge=X.cliponaxis===!1;p.setClipUrl(K,ge?null:D.layerClipId,P)});s.getComponentMethod("errorbars","plot")(P,Q,D,N)},toMoveInsideBar:C}},45784:function(ee){function R(e,M,k,o,T){var _=M.c2p(o?e.s0:e.p0,!0),p=M.c2p(o?e.s1:e.p1,!0),s=k.c2p(o?e.p0:e.s0,!0),t=k.c2p(o?e.p1:e.s1,!0);return T?[(_+p)/2,(s+t)/2]:o?[p,(s+t)/2]:[(_+p)/2,t]}ee.exports=function(e,M){var k,o=e.cd,T=e.xaxis,_=e.yaxis,p=o[0].trace,s=p.type==="funnel",t=p.orientation==="h",i=[];if(M===!1)for(k=0;k<o.length;k++)o[k].selected=0;else for(k=0;k<o.length;k++){var r=o[k],n="ct"in r?r.ct:R(r,T,_,t,s);M.contains(n,!1,k,e)?(i.push({pointNumber:k,x:T.c2d(r.x),y:_.c2d(r.y)}),r.selected=1):r.selected=0}return i}},72592:function(ee,R,e){ee.exports=k;var M=e(3400).distinctVals;function k(o,T){this.traces=o,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var _=1/0,p=T.posAxis._id.charAt(0),s=[],t=0;t<o.length;t++){for(var i=o[t],r=0;r<i.length;r++){var n=i[r],a=n.p;a===void 0&&(a=n[p]),a!==void 0&&s.push(a)}i[0]&&i[0].width1&&(_=Math.min(i[0].width1,_))}this.positions=s;var l=M(s);this.distinctPositions=l.vals,l.vals.length===1&&_!==1/0?this.minDiff=_:this.minDiff=Math.min(l.minDiff,_);var u=(T.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(o,T){var _=this.getLabel(o,T),p=this.bins[_]||0;return this.bins[_]=p+T,p},k.prototype.get=function(o,T){var _=this.getLabel(o,T);return this.bins[_]||0},k.prototype.getLabel=function(o,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?o:Math.round(o/this.binWidth))}},60100:function(ee,R,e){var M=e(33428),k=e(76308),o=e(43616),T=e(3400),_=e(24040),p=e(82744).resizeText,s=e(20832),t=s.textfont,i=s.insidetextfont,r=s.outsidetextfont,n=e(60444);function a(g,y,m){o.pointStyle(g.selectAll("path"),y,m),l(g,y,m)}function l(g,y,m){g.selectAll("text").each(function(b){var f=M.select(this),S=T.ensureUniformFontSize(m,u(f,b,y,m));o.font(f,S)})}function u(g,y,m,b){var f=b._fullLayout.font,S=m.textfont;if(g.classed("bartext-inside")){var w=v(y,m);S=c(m,y.i,f,w)}else g.classed("bartext-outside")&&(S=x(m,y.i,f));return S}function h(g,y,m){return d(t,g.textfont,y,m)}function c(g,y,m,b){var f=h(g,y,m);return(g._input.textfont===void 0||g._input.textfont.color===void 0||Array.isArray(g.textfont.color)&&g.textfont.color[y]===void 0)&&(f={color:k.contrast(b),family:f.family,size:f.size,weight:f.weight,style:f.style,variant:f.variant,textcase:f.textcase,lineposition:f.lineposition,shadow:f.shadow}),d(i,g.insidetextfont,y,f)}function x(g,y,m){var b=h(g,y,m);return d(r,g.outsidetextfont,y,b)}function d(g,y,m,b){y=y||{};var f=n.getValue(y.family,m),S=n.getValue(y.size,m),w=n.getValue(y.color,m),E=n.getValue(y.weight,m),O=n.getValue(y.style,m),C=n.getValue(y.variant,m),P=n.getValue(y.textcase,m),D=n.getValue(y.lineposition,m),U=n.getValue(y.shadow,m);return{family:n.coerceString(g.family,f,b.family),size:n.coerceNumber(g.size,S,b.size),color:n.coerceColor(g.color,w,b.color),weight:n.coerceString(g.weight,E,b.weight),style:n.coerceString(g.style,O,b.style),variant:n.coerceString(g.variant,C,b.variant),textcase:n.coerceString(g.variant,P,b.textcase),lineposition:n.coerceString(g.variant,D,b.lineposition),shadow:n.coerceString(g.variant,U,b.shadow)}}function v(g,y){return y.type==="waterfall"?y[g.dir].marker.color:g.mcc||g.mc||y.marker.color}ee.exports={style:function(g){var y=M.select(g).selectAll('g[class^="barlayer"]').selectAll("g.trace");p(g,y,"bar");var m=y.size(),b=g._fullLayout;y.style("opacity",function(f){return f[0].trace.opacity}).each(function(f){(b.barmode==="stack"&&m>1||b.bargap===0&&b.bargroupgap===0&&!f[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),y.selectAll("g.points").each(function(f){a(M.select(this),f[0].trace,g)}),_.getComponentMethod("errorbars","style")(y)},styleTextPoints:l,styleOnSelect:function(g,y,m){var b=y[0].trace;b.selectedpoints?function(f,S,w){o.selectedPointStyle(f.selectAll("path"),S),function(E,O,C){E.each(function(P){var D,U=M.select(this);if(P.selected){D=T.ensureUniformFontSize(C,u(U,P,O,C));var I=O.selected.textfont&&O.selected.textfont.color;I&&(D.color=I),o.font(U,D)}else o.selectedTextStyle(U,O)})}(f.selectAll("text"),S,w)}(m,b,g):(a(m,b,g),_.getComponentMethod("errorbars","style")(m))},getInsideTextFont:c,getOutsideTextFont:x,getBarColor:v,resizeText:p}},55592:function(ee,R,e){var M=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(3400).coercePattern;ee.exports=function(_,p,s,t,i){var r=s("marker.color",t),n=k(_,"marker");n&&o(_,p,i,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",M.defaultLine),k(_,"marker.line")&&o(_,p,i,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},82744:function(ee,R,e){var M=e(33428),k=e(3400);function o(T){return"_"+T+"Text_minsize"}ee.exports={recordMinTextSize:function(T,_,p){if(p.uniformtext.mode){var s=o(T),t=p.uniformtext.minsize,i=_.scale*_.fontSize;_.hide=i<t,p[s]=p[s]||1/0,_.hide||(p[s]=Math.min(p[s],Math.max(i,t)))}},clearMinTextSize:function(T,_){_[o(T)]=void 0},resizeText:function(T,_,p){var s=T._fullLayout,t=s["_"+p+"Text_minsize"];if(t){var i,r=s.uniformtext.mode==="hide";switch(p){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}_.selectAll(i).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:t/a.fontSize;var l=M.select(this).select("text");k.setTransormAndDisplay(l,a)}})}}}},78100:function(ee,R,e){var M,k=e(21776).Ks,o=e(92880).extendFlat,T=e(8319),_=e(20832);ee.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:o({},_.base,{}),offset:o({},_.offset,{}),width:o({},_.width,{}),text:o({},_.text,{}),hovertext:o({},_.hovertext,{}),marker:(M=o({},_.marker),delete M.cornerradius,M),hoverinfo:T.hoverinfo,hovertemplate:k(),selected:_.selected,unselected:_.unselected}},47056:function(ee,R,e){var M=e(94288).hasColorscale,k=e(47128),o=e(3400).isArrayOrTypedArray,T=e(84664),_=e(96376).setGroupPositions,p=e(4500),s=e(24040).traceIs,t=e(3400).extendFlat;ee.exports={calc:function(i,r){for(var n=i._fullLayout,a=r.subplot,l=n[a].radialaxis,u=n[a].angularaxis,h=l.makeCalcdata(r,"r"),c=u.makeCalcdata(r,"theta"),x=r._length,d=new Array(x),v=h,g=c,y=0;y<x;y++)d[y]={p:g[y],s:v[y]};function m(b){var f=r[b];f!==void 0&&(r["_"+b]=o(f)?u.makeCalcdata(r,b):u.d2c(f,r.thetaunit))}return u.type==="linear"&&(m("width"),m("offset")),M(r,"marker")&&k(i,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),M(r,"marker.line")&&k(i,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(d,r),p(d,r),d},crossTraceCalc:function(i,r,n){for(var a=i.calcdata,l=[],u=0;u<a.length;u++){var h=a[u],c=h[0].trace;c.visible===!0&&s(c,"bar")&&c.subplot===n&&l.push(h)}var x=t({},r.radialaxis,{_id:"x"}),d=r.angularaxis;_(i,d,x,l,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},70384:function(ee,R,e){var M=e(3400),k=e(85968).handleRThetaDefaults,o=e(55592),T=e(78100);ee.exports=function(_,p,s,t){function i(r,n){return M.coerce(_,p,T,r,n)}k(_,p,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),o(_,p,i,s,t),M.coerceSelectionMarkerOpacity(p,i)):p.visible=!1}},68896:function(ee,R,e){var M=e(93024),k=e(3400),o=e(63400).getTraceColor,T=k.fillText,_=e(8504).makeHoverPointText,p=e(57384).isPtInsidePolygon;ee.exports=function(s,t,i){var r=s.cd,n=r[0].trace,a=s.subplot,l=a.radialAxis,u=a.angularAxis,h=a.vangles,c=h?p:k.isPtInsideSector,x=s.maxHoverDistance,d=u._period||2*Math.PI,v=Math.abs(l.g2p(Math.sqrt(t*t+i*i))),g=Math.atan2(i,t);if(l.range[0]>l.range[1]&&(g+=Math.PI),M.getClosest(r,function(b){return c(v,g,[b.rp0,b.rp1],[b.thetag0,b.thetag1],h)?x+Math.min(1,Math.abs(b.thetag1-b.thetag0)/d)-1+(b.rp1-v)/(b.rp1-b.rp0)-1:1/0},s),s.index!==!1){var y=r[s.index];s.x0=s.x1=y.ct[0],s.y0=s.y1=y.ct[1];var m=k.extendFlat({},y,{r:y.s,theta:y.p});return T(y,n,s),_(m,n,a,s),s.hovertemplate=n.hovertemplate,s.color=o(n,y),s.xLabelVal=s.yLabelVal=void 0,y.s<0&&(s.idealAlign="left"),[s]}}},94456:function(ee,R,e){ee.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(ee){ee.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(ee,R,e){var M=e(3400),k=e(9320);ee.exports=function(o,T,_){var p,s={};function t(n,a){return M.coerce(o[p]||{},T[p],k,n,a)}for(var i=0;i<_.length;i++){var r=_[i];r.type==="barpolar"&&r.visible===!0&&(s[p=r.subplot]||(t("barmode"),t("bargap"),s[p]=1))}}},42040:function(ee,R,e){var M=e(33428),k=e(38248),o=e(3400),T=e(43616),_=e(57384);ee.exports=function(p,s,t){var i=p._context.staticPlot,r=s.xaxis,n=s.yaxis,a=s.radialAxis,l=s.angularAxis,u=function(c){var x=c.cxx,d=c.cyy;return c.vangles?function(v,g,y,m){var b,f;o.angleDelta(y,m)>0?(b=y,f=m):(b=m,f=y);var S=[_.findEnclosingVertexAngles(b,c.vangles)[0],(b+f)/2,_.findEnclosingVertexAngles(f,c.vangles)[1]];return _.pathPolygonAnnulus(v,g,b,f,S,x,d)}:function(v,g,y,m){return o.pathAnnulus(v,g,y,m,x,d)}}(s),h=s.layers.frontplot.select("g.barlayer");o.makeTraceGroups(h,t,"trace bars").each(function(){var c=M.select(this),x=o.ensureSingle(c,"g","points").selectAll("g.point").data(o.identity);x.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(d){var v,g=M.select(this),y=d.rp0=a.c2p(d.s0),m=d.rp1=a.c2p(d.s1),b=d.thetag0=l.c2g(d.p0),f=d.thetag1=l.c2g(d.p1);if(k(y)&&k(m)&&k(b)&&k(f)&&y!==m&&b!==f){var S=a.c2g(d.s1),w=(b+f)/2;d.ct=[r.c2p(S*Math.cos(w)),n.c2p(S*Math.sin(w))],v=u(y,m,b,f)}else v="M0,0Z";o.ensureSingle(g,"path").attr("d",v)}),T.setClipUrl(c,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,p)})}},63188:function(ee,R,e){var M=e(98304),k=e(52904),o=e(20832),T=e(22548),_=e(29736).axisHoverFormat,p=e(21776).Ks,s=e(92880).extendFlat,t=k.marker,i=t.line;ee.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:s({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:s({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:s({},t.angle,{arrayOk:!1,editType:"calc"}),size:s({},t.size,{arrayOk:!1,editType:"calc"}),color:s({},t.color,{arrayOk:!1,editType:"style"}),line:{color:s({},i.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:s({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:s({},k.text,{}),hovertext:s({},k.hovertext,{}),hovertemplate:p({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:k.zorder}},62555:function(ee,R,e){var M=e(38248),k=e(54460),o=e(1220),T=e(3400),_=e(39032).BADNUM,p=T._;ee.exports=function(c,x){var d,v,g,y,m,b,f,S=c._fullLayout,w=k.getFromId(c,x.xaxis||"x"),E=k.getFromId(c,x.yaxis||"y"),O=[],C=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(g=w,y="x",m=E,b="y",f=!!x.yperiodalignment):(g=E,y="y",m=w,b="x",f=!!x.xperiodalignment);var P,D,U,I,N,W,F=function(Ie,Ee,Be,Ve){var Ze,rt=Ee+"0"in Ie;if(Ee in Ie||rt&&"d"+Ee in Ie){var it=Be.makeCalcdata(Ie,Ee);return[o(Ie,Be,Ee,it).vals,it]}Ze=rt?Ie[Ee+"0"]:"name"in Ie&&(Be.type==="category"||M(Ie.name)&&["linear","log"].indexOf(Be.type)!==-1||T.isDateTime(Ie.name)&&Be.type==="date")?Ie.name:Ve;for(var dt=Be.type==="multicategory"?Be.r2c_just_indices(Ze):Be.d2c(Ze,0,Ie[Ee+"calendar"]),vt=Ie._length,ht=new Array(vt),Qe=0;Qe<vt;Qe++)ht[Qe]=dt;return[ht]}(x,b,m,S[C]),j=F[0],H=F[1],te=T.distinctVals(j,m),Q=te.vals,$=te.minDiff/2,K=(x.boxpoints||x.points)==="all"?T.identity:function(Ie){return Ie.v<P.lf||Ie.v>P.uf};if(x._hasPreCompStats){var X=x[y],Y=function(Ie){return g.d2c((x[Ie]||[])[d])},re=1/0,se=-1/0;for(d=0;d<x._length;d++){var ae=j[d];if(M(ae)){if((P={}).pos=P[b]=ae,f&&H&&(P.orig_p=H[d]),P.q1=Y("q1"),P.med=Y("median"),P.q3=Y("q3"),D=[],X&&T.isArrayOrTypedArray(X[d]))for(v=0;v<X[d].length;v++)(W=g.d2c(X[d][v]))!==_&&(t(N={v:W,i:[d,v]},x,[d,v]),D.push(N));if(P.pts=D.sort(i),I=(U=P[y]=D.map(r)).length,P.med!==_&&P.q1!==_&&P.q3!==_&&P.med>=P.q1&&P.q3>=P.med){var ce=Y("lowerfence");P.lf=ce!==_&&ce<=P.q1?ce:n(P,U,I);var fe=Y("upperfence");P.uf=fe!==_&&fe>=P.q3?fe:a(P,U,I);var he=Y("mean");P.mean=he!==_?he:I?T.mean(U,I):(P.q1+P.q3)/2;var ve=Y("sd");P.sd=he!==_&&ve>=0?ve:I?T.stdev(U,I,P.mean):P.q3-P.q1,P.lo=l(P),P.uo=u(P);var ye=Y("notchspan");ye=ye!==_&&ye>0?ye:h(P,I),P.ln=P.med-ye,P.un=P.med+ye;var me=P.lf,Me=P.uf;x.boxpoints&&U.length&&(me=Math.min(me,U[0]),Me=Math.max(Me,U[I-1])),x.notched&&(me=Math.min(me,P.ln),Me=Math.max(Me,P.un)),P.min=me,P.max=Me}else{var Pe;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join(`
`)),Pe=P.med!==_?P.med:P.q1!==_?P.q3!==_?(P.q1+P.q3)/2:P.q1:P.q3!==_?P.q3:0,P.med=Pe,P.q1=P.q3=Pe,P.lf=P.uf=Pe,P.mean=P.sd=Pe,P.ln=P.un=Pe,P.min=P.max=Pe}re=Math.min(re,P.min),se=Math.max(se,P.max),P.pts2=D.filter(K),O.push(P)}}x._extremes[g._id]=k.findExtremes(g,[re,se],{padded:!0})}else{var ge=g.makeCalcdata(x,y),oe=function(Ie,Ee){for(var Be=Ie.length,Ve=new Array(Be+1),Ze=0;Ze<Be;Ze++)Ve[Ze]=Ie[Ze]-Ee;return Ve[Be]=Ie[Be-1]+Ee,Ve}(Q,$),ie=Q.length,de=function(Ie){for(var Ee=new Array(Ie),Be=0;Be<Ie;Be++)Ee[Be]=[];return Ee}(ie);for(d=0;d<x._length;d++)if(W=ge[d],M(W)){var Se=T.findBin(j[d],oe);Se>=0&&Se<ie&&(t(N={v:W,i:d},x,d),de[Se].push(N))}var _e=1/0,we=-1/0,Ae=x.quartilemethod,Oe=Ae==="exclusive",ze=Ae==="inclusive";for(d=0;d<ie;d++)if(de[d].length>0){var pe,be;(P={}).pos=P[b]=Q[d],D=P.pts=de[d].sort(i),I=(U=P[y]=D.map(r)).length,P.min=U[0],P.max=U[I-1],P.mean=T.mean(U,I),P.sd=T.stdev(U,I,P.mean)*x.sdmultiple,P.med=T.interp(U,.5),I%2&&(Oe||ze)?(Oe?(pe=U.slice(0,I/2),be=U.slice(I/2+1)):ze&&(pe=U.slice(0,I/2+1),be=U.slice(I/2)),P.q1=T.interp(pe,.5),P.q3=T.interp(be,.5)):(P.q1=T.interp(U,.25),P.q3=T.interp(U,.75)),P.lf=n(P,U,I),P.uf=a(P,U,I),P.lo=l(P),P.uo=u(P);var ke=h(P,I);P.ln=P.med-ke,P.un=P.med+ke,_e=Math.min(_e,P.ln),we=Math.max(we,P.un),P.pts2=D.filter(K),O.push(P)}x.notched&&T.isTypedArray(ge)&&(ge=Array.from(ge)),x._extremes[g._id]=k.findExtremes(g,x.notched?ge.concat([_e,we]):ge,{padded:!0})}return function(Ie,Ee){if(T.isArrayOrTypedArray(Ee.selectedpoints))for(var Be=0;Be<Ie.length;Be++){for(var Ve=Ie[Be].pts||[],Ze={},rt=0;rt<Ve.length;rt++)Ze[Ve[rt].i]=rt;T.tagSelected(Ve,Ee,Ze)}}(O,x),O.length>0?(O[0].t={num:S[C],dPos:$,posLetter:b,valLetter:y,labels:{med:p(c,"median:"),min:p(c,"min:"),q1:p(c,"q1:"),q3:p(c,"q3:"),max:p(c,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?p(c,"mean ± σ:").replace("σ",x.sdmultiple===1?"σ":x.sdmultiple+"σ"):p(c,"mean:"),lf:p(c,"lower fence:"),uf:p(c,"upper fence:")}},S[C]++,O):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(c,x,d){for(var v in s)T.isArrayOrTypedArray(x[v])&&(Array.isArray(d)?T.isArrayOrTypedArray(x[v][d[0]])&&(c[s[v]]=x[v][d[0]][d[1]]):c[s[v]]=x[v][d])}function i(c,x){return c.v-x.v}function r(c){return c.v}function n(c,x,d){return d===0?c.q1:Math.min(c.q1,x[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,x,!0)+1,d-1)])}function a(c,x,d){return d===0?c.q3:Math.max(c.q3,x[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,x),0)])}function l(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function h(c,x){return x===0?0:1.57*(c.q3-c.q1)/Math.sqrt(x)}},96404:function(ee,R,e){var M=e(54460),k=e(3400),o=e(71888).getAxisGroup,T=["v","h"];function _(p,s,t,i){var r,n,a,l=s.calcdata,u=s._fullLayout,h=i._id,c=h.charAt(0),x=[],d=0;for(r=0;r<t.length;r++)for(a=l[t[r]],n=0;n<a.length;n++)x.push(i.c2l(a[n].pos,!0)),d+=(a[n].pts2||[]).length;if(x.length){var v=k.distinctVals(x);i.type!=="category"&&i.type!=="multicategory"||(v.minDiff=1);var g=v.minDiff/2;M.minDtick(i,v.minDiff,v.vals[0],!0);var y=u[p==="violin"?"_numViolins":"_numBoxes"],m=u[p+"mode"]==="group"&&y>1,b=1-u[p+"gap"],f=1-u[p+"groupgap"];for(r=0;r<t.length;r++){var S,w,E,O,C,P,D=(a=l[t[r]])[0].trace,U=a[0].t,I=D.width,N=D.side;if(I)S=w=O=I/2,E=0;else if(S=g,m){var W=o(u,i._id)+D.orientation,F=(u._alignmentOpts[W]||{})[D.alignmentgroup]||{},j=Object.keys(F.offsetGroups||{}).length,H=j||y;w=S*b*f/H,E=2*S*(((j?D._offsetIndex:U.num)+.5)/H-.5)*b,O=S*b/H}else w=S*b*f,E=0,O=S;U.dPos=S,U.bPos=E,U.bdPos=w,U.wHover=O;var te,Q,$,K,X,Y,re=E+w,se=!!I;if(N==="positive"?(C=S*(I?1:.5),te=re,P=te=E):N==="negative"?(C=te=E,P=S*(I?1:.5),Q=re):(C=P=S,te=Q=re),(D.boxpoints||D.points)&&d>0){var ae=D.pointpos,ce=D.jitter,fe=D.marker.size/2,he=0;ae+ce>=0&&((he=re*(ae+ce))>C?(se=!0,X=fe,$=he):he>te&&(X=fe,$=C)),he<=C&&($=C);var ve=0;ae-ce<=0&&((ve=-re*(ae-ce))>P?(se=!0,Y=fe,K=ve):ve>Q&&(Y=fe,K=P)),ve<=P&&(K=P)}else $=C,K=P;var ye=new Array(a.length);for(n=0;n<a.length;n++)ye[n]=a[n].pos;D._extremes[h]=M.findExtremes(i,ye,{padded:se,vpadminus:K,vpadplus:$,vpadLinearized:!0,ppadminus:{x:Y,y:X}[c],ppadplus:{x:X,y:Y}[c]})}}}ee.exports={crossTraceCalc:function(p,s){for(var t=p.calcdata,i=s.xaxis,r=s.yaxis,n=0;n<T.length;n++){for(var a=T[n],l=a==="h"?r:i,u=[],h=0;h<t.length;h++){var c=t[h],x=c[0].t,d=c[0].trace;d.visible!==!0||d.type!=="box"&&d.type!=="candlestick"||x.empty||(d.orientation||"v")!==a||d.xaxis!==i._id||d.yaxis!==r._id||u.push(h)}_("box",p,u,l)}},setPositionOffset:_}},90624:function(ee,R,e){var M=e(3400),k=e(24040),o=e(76308),T=e(31147),_=e(20011),p=e(52976),s=e(63188);function t(r,n,a,l){function u(N){var W=0;return N&&N.length&&(W+=1,M.isArrayOrTypedArray(N[0])&&N[0].length&&(W+=1)),W}function h(N){return M.validate(r[N],s[N])}var c,x=a("y"),d=a("x");if(n.type==="box"){var v=a("q1"),g=a("median"),y=a("q3");n._hasPreCompStats=v&&v.length&&g&&g.length&&y&&y.length,c=Math.min(M.minRowLength(v),M.minRowLength(g),M.minRowLength(y))}var m,b,f=u(x),S=u(d),w=f&&M.minRowLength(x),E=S&&M.minRowLength(d),O=l.calendar,C={autotypenumbers:l.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(f)){case"00":var P=h("x0")||h("dx");m=!h("y0")&&!h("dy")||P?"v":"h",b=c;break;case"10":m="v",b=Math.min(c,E);break;case"20":m="h",b=Math.min(c,d.length);break;case"01":m="h",b=Math.min(c,w);break;case"02":m="v",b=Math.min(c,x.length);break;case"12":m="v",b=Math.min(c,E,x.length);break;case"21":m="h",b=Math.min(c,d.length,w);break;case"11":b=0;break;case"22":var D,U=!1;for(D=0;D<d.length;D++)if(p(d[D],O,C)==="category"){U=!0;break}if(U)m="v",b=Math.min(c,E,x.length);else{for(D=0;D<x.length;D++)if(p(x[D],O,C)==="category"){U=!0;break}U?(m="h",b=Math.min(c,d.length,w)):(m="v",b=Math.min(c,E,x.length))}}else f>0?(m="v",b=S>0?Math.min(E,w):Math.min(w)):S>0?(m="h",b=Math.min(E)):b=0;if(b){n._length=b;var I=a("orientation",m);n._hasPreCompStats?I==="v"&&S===0?(a("x0",0),a("dx",1)):I==="h"&&f===0&&(a("y0",0),a("dy",1)):I==="v"&&S===0?a("x0"):I==="h"&&f===0&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],l)}else n.visible=!1}function i(r,n,a,l){var u=l.prefix,h=M.coerce2(r,n,s,"marker.outliercolor"),c=a("marker.line.outliercolor"),x="outliers";n._hasPreCompStats?x="all":(h||c)&&(x="suspectedoutliers");var d=a(u+"points",x);d?(a("jitter",d==="all"?.3:0),a("pointpos",d==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),d==="suspectedoutliers"&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var v=a("hoveron");v!=="all"&&v.indexOf("points")===-1||a("hovertemplate"),M.coerceSelectionMarkerOpacity(n,a)}ee.exports={supplyDefaults:function(r,n,a,l){function u(b,f){return M.coerce(r,n,s,b,f)}if(t(r,n,u,l),n.visible!==!1){T(r,n,l,u),u("xhoverformat"),u("yhoverformat");var h=n._hasPreCompStats;h&&(u("lowerfence"),u("upperfence")),u("line.color",(r.marker||{}).color||a),u("line.width"),u("fillcolor",o.addOpacity(n.line.color,.5));var c=!1;if(h){var x=u("mean"),d=u("sd");x&&x.length&&(c=!0,d&&d.length&&(c="sd"))}u("whiskerwidth");var v,g=u("sizemode");g==="quartiles"&&(v=u("boxmean",c)),u("showwhiskers",g==="quartiles"),g!=="sd"&&v!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var y=!1;if(h){var m=u("notchspan");m&&m.length&&(y=!0)}else M.validate(r.notchwidth,s.notchwidth)&&(y=!0);u("notched",y)&&u("notchwidth"),i(r,n,u,{prefix:"box"}),u("zorder")}},crossTraceDefaults:function(r,n){var a,l;function u(x){return M.coerce(l._input,l,s,x)}for(var h=0;h<r.length;h++){var c=(l=r[h]).type;c!=="box"&&c!=="violin"||(a=l._input,n[c+"mode"]==="group"&&_(a,l,n,u))}},handleSampleDefaults:t,handlePointsDefaults:i}},10392:function(ee){ee.exports=function(R,e){return e.hoverOnBox&&(R.hoverOnBox=e.hoverOnBox),"xVal"in e&&(R.x=e.xVal),"yVal"in e&&(R.y=e.yVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},27576:function(ee,R,e){var M=e(54460),k=e(3400),o=e(93024),T=e(76308),_=k.fillText;function p(t,i,r,n){var a,l,u,h,c,x,d,v,g,y,m,b,f,S,w=t.cd,E=t.xa,O=t.ya,C=w[0].trace,P=w[0].t,D=C.type==="violin",U=P.bdPos,I=P.wHover,N=function(Pe){return u.c2l(Pe.pos)+P.bPos-u.c2l(x)};D&&C.side!=="both"?(C.side==="positive"&&(g=function(Pe){var ge=N(Pe);return o.inbox(ge,ge+I,y)},b=U,f=0),C.side==="negative"&&(g=function(Pe){var ge=N(Pe);return o.inbox(ge-I,ge,y)},b=0,f=U)):(g=function(Pe){var ge=N(Pe);return o.inbox(ge-I,ge+I,y)},b=f=U),S=D?function(Pe){return o.inbox(Pe.span[0]-c,Pe.span[1]-c,y)}:function(Pe){return o.inbox(Pe.min-c,Pe.max-c,y)},C.orientation==="h"?(c=i,x=r,d=S,v=g,a="y",u=O,l="x",h=E):(c=r,x=i,d=g,v=S,a="x",u=E,l="y",h=O);var W=Math.min(1,U/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(Pe){return(d(Pe)+v(Pe))/2}y=t.maxHoverDistance-W,m=t.maxSpikeDistance-W;var j=o.getDistanceFunction(n,d,v,F);if(o.getClosest(w,j,t),t.index===!1)return[];var H=w[t.index],te=C.line.color,Q=(C.marker||{}).color;T.opacity(te)&&C.line.width?t.color=te:T.opacity(Q)&&C.boxpoints?t.color=Q:t.color=C.fillcolor,t[a+"0"]=u.c2p(H.pos+P.bPos-f,!0),t[a+"1"]=u.c2p(H.pos+P.bPos+b,!0),t[a+"LabelVal"]=H.orig_p!==void 0?H.orig_p:H.pos;var $=a+"Spike";t.spikeDistance=F(H)*m/y,t[$]=u.c2p(H.pos,!0);var K=C.boxmean||C.sizemode==="sd"||(C.meanline||{}).visible,X=C.boxpoints||C.points,Y=X&&K?["max","uf","q3","med","mean","q1","lf","min"]:X&&!K?["max","uf","q3","med","q1","lf","min"]:!X&&K?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],re=h.range[1]<h.range[0];C.orientation===(re?"v":"h")&&Y.reverse();for(var se=t.spikeDistance,ae=t[$],ce=[],fe=0;fe<Y.length;fe++){var he=Y[fe];if(he in H){var ve=H[he],ye=h.c2p(ve,!0),me=k.extendFlat({},t);me.attr=he,me[l+"0"]=me[l+"1"]=ye,me[l+"LabelVal"]=ve,me[l+"Label"]=(P.labels?P.labels[he]+" ":"")+M.hoverLabelText(h,ve,C[l+"hoverformat"]),me.hoverOnBox=!0,he!=="mean"||!("sd"in H)||C.boxmean!=="sd"&&C.sizemode!=="sd"||(me[l+"err"]=H.sd),me.hovertemplate=!1,ce.push(me)}}t.name="",t.spikeDistance=void 0,t[$]=void 0;for(var Me=0;Me<ce.length;Me++)ce[Me].attr!=="med"?(ce[Me].name="",ce[Me].spikeDistance=void 0,ce[Me][$]=void 0):(ce[Me].spikeDistance=se,ce[Me][$]=ae);return ce}function s(t,i,r){for(var n,a,l,u=t.cd,h=t.xa,c=t.ya,x=u[0].trace,d=h.c2p(i),v=c.c2p(r),g=o.quadrature(function(D){var U=Math.max(3,D.mrc||0);return Math.max(Math.abs(h.c2p(D.x)-d)-U,1-3/U)},function(D){var U=Math.max(3,D.mrc||0);return Math.max(Math.abs(c.c2p(D.y)-v)-U,1-3/U)}),y=!1,m=0;m<u.length;m++){a=u[m];for(var b=0;b<(a.pts||[]).length;b++){var f=g(l=a.pts[b]);f<=t.distance&&(t.distance=f,y=[m,b])}}if(!y)return!1;l=(a=u[y[0]]).pts[y[1]];var S=h.c2p(l.x,!0),w=c.c2p(l.y,!0),E=l.mrc||1;n=k.extendFlat({},t,{index:l.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:w-E,y1:w+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var O,C=a.orig_p,P=C!==void 0?C:a.pos;return x.orientation==="h"?(O=c,n.xLabelVal=l.x,n.yLabelVal=P):(O=h,n.xLabelVal=P,n.yLabelVal=l.y),n[O._id.charAt(0)+"Spike"]=O.c2p(a.pos,!0),_(l,x,n),n}ee.exports={hoverPoints:function(t,i,r,n){var a,l=t.cd[0].trace.hoveron,u=[];return l.indexOf("boxes")!==-1&&(u=u.concat(p(t,i,r,n))),l.indexOf("points")!==-1&&(a=s(t,i,r)),n==="closest"?a?[a]:u:(a&&u.push(a),u)},hoverOnBoxes:p,hoverOnPoints:s}},67244:function(ee,R,e){ee.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(ee){ee.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(ee,R,e){var M=e(24040),k=e(3400),o=e(16560);function T(_,p,s,t,i){for(var r=i+"Layout",n=!1,a=0;a<s.length;a++){var l=s[a];if(M.traceIs(l,r)){n=!0;break}}n&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}ee.exports={supplyLayoutDefaults:function(_,p,s){T(0,0,s,function(t,i){return k.coerce(_,p,o,t,i)},"box")},_supply:T}},18728:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616);function T(s,t,i,r,n){var a,l,u=i.orientation==="h",h=t.val,c=t.pos,x=!!c.rangebreaks,d=r.bPos,v=r.wdPos||0,g=r.bPosPxOffset||0,y=i.whiskerwidth||0,m=i.showwhiskers!==!1,b=i.notched||!1,f=b?1-2*i.notchwidth:1;Array.isArray(r.bdPos)?(a=r.bdPos[0],l=r.bdPos[1]):(a=r.bdPos,l=r.bdPos);var S=s.selectAll("path.box").data(i.type!=="violin"||i.box.visible?k.identity:[]);S.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(w){if(w.empty)return M.select(this).attr("d","M0,0Z");var E=c.c2l(w.pos+d,!0),O=c.l2p(E-a)+g,C=c.l2p(E+l)+g,P=x?(O+C)/2:c.l2p(E)+g,D=i.whiskerwidth,U=x?O*D+(1-D)*P:c.l2p(E-v)+g,I=x?C*D+(1-D)*P:c.l2p(E+v)+g,N=c.l2p(E-a*f)+g,W=c.l2p(E+l*f)+g,F=i.sizemode==="sd",j=h.c2p(F?w.mean-w.sd:w.q1,!0),H=F?h.c2p(w.mean+w.sd,!0):h.c2p(w.q3,!0),te=k.constrain(F?h.c2p(w.mean,!0):h.c2p(w.med,!0),Math.min(j,H)+1,Math.max(j,H)-1),Q=w.lf===void 0||i.boxpoints===!1||F,$=h.c2p(Q?w.min:w.lf,!0),K=h.c2p(Q?w.max:w.uf,!0),X=h.c2p(w.ln,!0),Y=h.c2p(w.un,!0);u?M.select(this).attr("d","M"+te+","+N+"V"+W+"M"+j+","+O+"V"+C+(b?"H"+X+"L"+te+","+W+"L"+Y+","+C:"")+"H"+H+"V"+O+(b?"H"+Y+"L"+te+","+N+"L"+X+","+O:"")+"Z"+(m?"M"+j+","+P+"H"+$+"M"+H+","+P+"H"+K+(y===0?"":"M"+$+","+U+"V"+I+"M"+K+","+U+"V"+I):"")):M.select(this).attr("d","M"+N+","+te+"H"+W+"M"+O+","+j+"H"+C+(b?"V"+X+"L"+W+","+te+"L"+C+","+Y:"")+"V"+H+"H"+O+(b?"V"+Y+"L"+N+","+te+"L"+O+","+X:"")+"Z"+(m?"M"+P+","+j+"V"+$+"M"+P+","+H+"V"+K+(y===0?"":"M"+U+","+$+"H"+I+"M"+U+","+K+"H"+I):""))})}function _(s,t,i,r){var n=t.x,a=t.y,l=r.bdPos,u=r.bPos,h=i.boxpoints||i.points;k.seedPseudoRandom();var c=s.selectAll("g.points").data(h?function(d){return d.forEach(function(v){v.t=r,v.trace=i}),d}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var x=c.selectAll("path").data(function(d){var v,g,y=d.pts2,m=Math.max((d.max-d.min)/10,d.q3-d.q1),b=1e-9*m,f=.01*m,S=[],w=0;if(i.jitter){if(m===0)for(w=1,S=new Array(y.length),v=0;v<y.length;v++)S[v]=1;else for(v=0;v<y.length;v++){var E=Math.max(0,v-5),O=y[E].v,C=Math.min(y.length-1,v+5),P=y[C].v;h!=="all"&&(y[v].v<d.lf?P=Math.min(P,d.lf):O=Math.max(O,d.uf));var D=Math.sqrt(f*(C-E)/(P-O+b))||0;D=k.constrain(Math.abs(D),0,1),S.push(D),w=Math.max(D,w)}g=2*i.jitter/(w||1)}for(v=0;v<y.length;v++){var U=y[v],I=U.v,N=i.jitter?g*S[v]*(k.pseudoRandom()-.5):0,W=d.pos+u+l*(i.pointpos+N);i.orientation==="h"?(U.y=W,U.x=I):(U.x=W,U.y=I),h==="suspectedoutliers"&&I<d.uo&&I>d.lo&&(U.so=!0)}return y});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(o.translatePoints,n,a)}function p(s,t,i,r){var n,a,l=t.val,u=t.pos,h=!!u.rangebreaks,c=r.bPos,x=r.bPosPxOffset||0,d=i.boxmean||(i.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var v=s.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?k.identity:[]);v.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),v.exit().remove(),v.each(function(g){var y=u.c2l(g.pos+c,!0),m=u.l2p(y-n)+x,b=u.l2p(y+a)+x,f=h?(m+b)/2:u.l2p(y)+x,S=l.c2p(g.mean,!0),w=l.c2p(g.mean-g.sd,!0),E=l.c2p(g.mean+g.sd,!0);i.orientation==="h"?M.select(this).attr("d","M"+S+","+m+"V"+b+(d==="sd"?"m0,0L"+w+","+f+"L"+S+","+m+"L"+E+","+f+"Z":"")):M.select(this).attr("d","M"+m+","+S+"H"+b+(d==="sd"?"m0,0L"+f+","+w+"L"+m+","+S+"L"+f+","+E+"Z":""))})}ee.exports={plot:function(s,t,i,r){var n=s._context.staticPlot,a=t.xaxis,l=t.yaxis;k.makeTraceGroups(r,i,"trace boxes").each(function(u){var h,c,x=M.select(this),d=u[0],v=d.t,g=d.trace;v.wdPos=v.bdPos*g.whiskerwidth,g.visible!==!0||v.empty?x.remove():(g.orientation==="h"?(h=l,c=a):(h=a,c=l),T(x,{pos:h,val:c},g,v,n),_(x,{x:a,y:l},g,v),p(x,{pos:h,val:c},g,v))})},plotBoxAndWhiskers:T,plotPoints:_,plotBoxMean:p}},8264:function(ee){ee.exports=function(R,e){var M,k,o=R.cd,T=R.xaxis,_=R.yaxis,p=[];if(e===!1)for(M=0;M<o.length;M++)for(k=0;k<(o[M].pts||[]).length;k++)o[M].pts[k].selected=0;else for(M=0;M<o.length;M++)for(k=0;k<(o[M].pts||[]).length;k++){var s=o[M].pts[k],t=T.c2p(s.x),i=_.c2p(s.y);e.contains([t,i],null,s.i,R)?(p.push({pointNumber:s.i,x:T.c2d(s.x),y:_.c2d(s.y)}),s.selected=1):s.selected=0}return p}},25776:function(ee,R,e){var M=e(33428),k=e(76308),o=e(43616);ee.exports={style:function(T,_,p){var s=p||M.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=M.select(this),r=t[0].trace,n=r.line.width;function a(h,c,x,d){h.style("stroke-width",c+"px").call(k.stroke,x).call(k.fill,d)}var l=i.selectAll("path.box");if(r.type==="candlestick")l.each(function(h){if(!h.empty){var c=M.select(this),x=r[h.dir];a(c,x.line.width,x.line.color,x.fillcolor),c.style("opacity",r.selectedpoints&&!h.selected?.3:1)}});else{a(l,n,r.line.color,r.fillcolor),i.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var u=i.selectAll("path.point");o.pointStyle(u,r,T)}})},styleOnSelect:function(T,_,p){var s=_[0].trace,t=p.selectAll("path.point");s.selectedpoints?o.selectedPointStyle(t,s):o.pointStyle(t,s,T)}}},64216:function(ee,R,e){var M=e(3400).extendFlat,k=e(29736).axisHoverFormat,o=e(20279),T=e(63188);function _(p){return{line:{color:M({},T.line.color,{dflt:p}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}ee.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:M({},T.line.width,{}),editType:"style"},increasing:_(o.increasing.line.color.dflt),decreasing:_(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:M({},T.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel,zorder:T.zorder}},46283:function(ee,R,e){var M=e(3400),k=e(54460),o=e(1220),T=e(42812).calcCommon;function _(p,s,t,i){return{min:t,q1:Math.min(p,i),med:i,q3:Math.max(p,i),max:s}}ee.exports=function(p,s){var t=p._fullLayout,i=k.getFromId(p,s.xaxis),r=k.getFromId(p,s.yaxis),n=i.makeCalcdata(s,"x"),a=o(s,i,"x",n).vals,l=T(p,s,n,a,r,_);return l.length?(M.extendFlat(l[0].t,{num:t._numBoxes,dPos:M.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},64588:function(ee,R,e){var M=e(3400),k=e(76308),o=e(52744),T=e(31147),_=e(64216);function p(s,t,i,r){var n=i(r+".line.color");i(r+".line.width",t.line.width),i(r+".fillcolor",k.addOpacity(n,.5))}ee.exports=function(s,t,i,r){function n(a,l){return M.coerce(s,t,_,a,l)}o(s,t,n,r)?(T(s,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),p(0,t,n,"increasing"),p(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0,n("zorder")):t.visible=!1}},61712:function(ee,R,e){ee.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(ee,R,e){var M=e(63856),k=e(31780);ee.exports=function(o,T,_,p,s){p("a")||(p("da"),p("a0")),p("b")||(p("db"),p("b0")),function(t,i,r,n){["aaxis","baxis"].forEach(function(a){var l=a.charAt(0),u=t[a]||{},h=k.newContainer(i,a),c={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:i.font,name:a,data:t[l],calendar:i.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};M(u,h,c),h._categories=h._categories||[],t[a]||u.type==="-"||(t[a]={type:u.type})})}(o,T,_,s)}},51676:function(ee,R,e){var M=e(3400).isArrayOrTypedArray;function k(o,T){if(!M(o)||T>=10)return null;for(var _=1/0,p=-1/0,s=o.length,t=0;t<s;t++){var i=o[t];if(M(i)){var r=k(i,T+1);r&&(_=Math.min(r[0],_),p=Math.max(r[1],p))}else _=Math.min(i,_),p=Math.max(i,p)}return[_,p]}ee.exports=function(o){return k(o,0)}},85720:function(ee,R,e){var M=e(25376),k=e(98692),o=e(22548),T=M({editType:"calc"}),_=e(52904).zorder;T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=o.defaultLine,ee.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:o.defaultLine,editType:"plot"},transforms:void 0,zorder:_}},77712:function(ee,R,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T,_){var p,s,t,i,r,n,a,l,u,h,c,x,d,v=M(T)?"a":"b",g=(v==="a"?k.aaxis:k.baxis).smoothing,y=v==="a"?k.a2i:k.b2j,m=v==="a"?T:_,b=v==="a"?_:T,f=v==="a"?o.a.length:o.b.length,S=v==="a"?o.b.length:o.a.length,w=Math.floor(v==="a"?k.b2j(b):k.a2i(b)),E=v==="a"?function(te){return k.evalxy([],te,w)}:function(te){return k.evalxy([],w,te)};g&&(t=Math.max(0,Math.min(S-2,w)),i=w-t,s=v==="a"?function(te,Q){return k.dxydi([],te,t,Q,i)}:function(te,Q){return k.dxydj([],t,te,i,Q)});var O=y(m[0]),C=y(m[1]),P=O<C?1:-1,D=1e-8*(C-O),U=P>0?Math.floor:Math.ceil,I=P>0?Math.ceil:Math.floor,N=P>0?Math.min:Math.max,W=P>0?Math.max:Math.min,F=U(O+D),j=I(C-D),H=[[a=E(O)]];for(p=F;p*P<j*P;p+=P)r=[],c=W(O,p),d=(x=N(C,p+P))-c,n=Math.max(0,Math.min(f-2,Math.floor(.5*(c+x)))),l=E(x),g&&(u=s(n,c-n),h=s(n,x-n),r.push([a[0]+u[0]/3*d,a[1]+u[1]/3*d]),r.push([l[0]-h[0]/3*d,l[1]-h[1]/3*d])),r.push(l),H.push(r),a=l;return H}},98692:function(ee,R,e){var M=e(25376),k=e(22548),o=e(94724),T=e(29736).descriptionWithDates,_=e(67824).overrideAll,p=e(98192).u,s=e(92880).extendFlat;ee.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},o.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:_(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},p,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},p,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(ee,R,e){var M=e(85720),k=e(76308).addOpacity,o=e(24040),T=e(3400),_=e(26332),p=e(95936),s=e(42568),t=e(22416),i=e(78344),r=e(52976);ee.exports=function(n,a,l){var u=l.letter,h=l.font||{},c=M[u+"axis"];function x(P,D){return T.coerce(n,a,c,P,D)}function d(P,D){return T.coerce2(n,a,c,P,D)}l.name&&(a._name=l.name,a._id=l.name),x("autotypenumbers",l.autotypenumbersDflt);var v=x("type");v==="-"&&(l.data&&function(P,D){if(P.type==="-"){var U=P._id.charAt(0),I=P[U+"calendar"];P.type=r(D,I,{autotypenumbers:P.autotypenumbers})}}(a,l.data),a.type==="-"?a.type="linear":v=n.type=a.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",u+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),a.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),a._hovertitle=u,v==="date"&&o.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",l.calendar),i(a,l.fullLayout),a.c2p=T.identity;var g=x("color",l.dfltColor),y=g===n.color?g:h.color;x("title.text")&&(T.coerceFont(x,"title.font",h,{overrideDflt:{size:T.bigFont(h.size),color:y}}),x("title.offset")),x("tickangle"),x("autorange",!a.isValidRange(n.range))&&x("rangemode"),x("range"),a.cleanRange(),x("fixedrange"),_(n,a,x,v),s(n,a,x,v,l),p(n,a,x,v,l),t(n,a,x,{data:l.data,dataAttr:u});var m=d("gridcolor",k(g,.3)),b=d("gridwidth"),f=d("griddash"),S=x("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var w=d("startlinecolor",g),E=d("startlinewidth",b);x("startline",a.showgrid||!!w||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var O=d("endlinecolor",g),C=d("endlinewidth",b);return x("endline",a.showgrid||!!O||!!C)||(delete a.endlinecolor,delete a.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",b),x("minorgriddash",f),x("minorgridcolor",k(m,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,x("tickmode"),a}},58744:function(ee,R,e){var M=e(54460),k=e(3400).isArray1D,o=e(60776),T=e(51676),_=e(19216),p=e(14724),s=e(24944),t=e(26136),i=e(51512),r=e(2872),n=e(81e3);ee.exports=function(a,l){var u=M.getFromId(a,l.xaxis),h=M.getFromId(a,l.yaxis),c=l.aaxis,x=l.baxis,d=l.x,v=l.y,g=[];d&&k(d)&&g.push("x"),v&&k(v)&&g.push("y"),g.length&&r(l,c,x,"a","b",g);var y=l._a=l._a||l.a,m=l._b=l._b||l.b;d=l._x||l.x,v=l._y||l.y;var b={};if(l._cheater){var f=c.cheatertype==="index"?y.length:y,S=x.cheatertype==="index"?m.length:m;d=o(f,S,l.cheaterslope)}l._x=d=t(d),l._y=v=t(v),i(d,y,m),i(v,y,m),n(l),l.setScale();var w=T(d),E=T(v),O=.5*(w[1]-w[0]),C=.5*(w[1]+w[0]),P=.5*(E[1]-E[0]),D=.5*(E[1]+E[0]),U=1.3;return w=[C-O*U,C+O*U],E=[D-P*U,D+P*U],l._extremes[u._id]=M.findExtremes(u,w,{padded:!0}),l._extremes[h._id]=M.findExtremes(h,E,{padded:!0}),_(l,"a","b"),_(l,"b","a"),p(l,c),p(l,x),b.clipsegments=s(l._xctrl,l._yctrl,c,x),b.x=d,b.y=v,b.a=y,b.b=m,[b]}},24944:function(ee){ee.exports=function(R,e,M,k){var o,T,_,p=[],s=!!M.smoothing,t=!!k.smoothing,i=R[0].length-1,r=R.length-1;for(o=0,T=[],_=[];o<=i;o++)T[o]=R[0][o],_[o]=e[0][o];for(p.push({x:T,y:_,bicubic:s}),o=0,T=[],_=[];o<=r;o++)T[o]=R[o][i],_[o]=e[o][i];for(p.push({x:T,y:_,bicubic:t}),o=i,T=[],_=[];o>=0;o--)T[i-o]=R[r][o],_[i-o]=e[r][o];for(p.push({x:T,y:_,bicubic:s}),o=r,T=[],_=[];o>=0;o--)T[r-o]=R[o][0],_[r-o]=e[o][0];return p.push({x:T,y:_,bicubic:t}),p}},19216:function(ee,R,e){var M=e(54460),k=e(92880).extendFlat;ee.exports=function(o,T,_){var p,s,t,i,r,n,a,l,u,h,c,x,d,v,g=o["_"+T],y=o[T+"axis"],m=y._gridlines=[],b=y._minorgridlines=[],f=y._boundarylines=[],S=o["_"+_],w=o[_+"axis"];y.tickmode==="array"&&(y.tickvals=g.slice());var E=o._xctrl,O=o._yctrl,C=E[0].length,P=E.length,D=o._a.length,U=o._b.length;M.prepTicks(y),y.tickmode==="array"&&delete y.tickvals;var I=y.smoothing?3:1;function N(F){var j,H,te,Q,$,K,X,Y,re,se,ae,ce,fe=[],he=[],ve={};if(T==="b")for(H=o.b2j(F),te=Math.floor(Math.max(0,Math.min(U-2,H))),Q=H-te,ve.length=U,ve.crossLength=D,ve.xy=function(ye){return o.evalxy([],ye,H)},ve.dxy=function(ye,me){return o.dxydi([],ye,te,me,Q)},j=0;j<D;j++)K=Math.min(D-2,j),X=j-K,Y=o.evalxy([],j,H),w.smoothing&&j>0&&(re=o.dxydi([],j-1,te,0,Q),fe.push($[0]+re[0]/3),he.push($[1]+re[1]/3),se=o.dxydi([],j-1,te,1,Q),fe.push(Y[0]-se[0]/3),he.push(Y[1]-se[1]/3)),fe.push(Y[0]),he.push(Y[1]),$=Y;else for(j=o.a2i(F),K=Math.floor(Math.max(0,Math.min(D-2,j))),X=j-K,ve.length=D,ve.crossLength=U,ve.xy=function(ye){return o.evalxy([],j,ye)},ve.dxy=function(ye,me){return o.dxydj([],K,ye,X,me)},H=0;H<U;H++)te=Math.min(U-2,H),Q=H-te,Y=o.evalxy([],j,H),w.smoothing&&H>0&&(ae=o.dxydj([],K,H-1,X,0),fe.push($[0]+ae[0]/3),he.push($[1]+ae[1]/3),ce=o.dxydj([],K,H-1,X,1),fe.push(Y[0]-ce[0]/3),he.push(Y[1]-ce[1]/3)),fe.push(Y[0]),he.push(Y[1]),$=Y;return ve.axisLetter=T,ve.axis=y,ve.crossAxis=w,ve.value=F,ve.constvar=_,ve.index=l,ve.x=fe,ve.y=he,ve.smoothing=w.smoothing,ve}function W(F){var j,H,te,Q,$,K=[],X=[],Y={};if(Y.length=g.length,Y.crossLength=S.length,T==="b")for(te=Math.max(0,Math.min(U-2,F)),$=Math.min(1,Math.max(0,F-te)),Y.xy=function(re){return o.evalxy([],re,F)},Y.dxy=function(re,se){return o.dxydi([],re,te,se,$)},j=0;j<C;j++)K[j]=E[F*I][j],X[j]=O[F*I][j];else for(H=Math.max(0,Math.min(D-2,F)),Q=Math.min(1,Math.max(0,F-H)),Y.xy=function(re){return o.evalxy([],F,re)},Y.dxy=function(re,se){return o.dxydj([],H,re,Q,se)},j=0;j<P;j++)K[j]=E[j][F*I],X[j]=O[j][F*I];return Y.axisLetter=T,Y.axis=y,Y.crossAxis=w,Y.value=g[F],Y.constvar=_,Y.index=F,Y.x=K,Y.y=X,Y.smoothing=w.smoothing,Y}if(y.tickmode==="array"){for(i=5e-15,n=(r=[Math.floor((g.length-1-y.arraytick0)/y.arraydtick*(1+i)),Math.ceil(-y.arraytick0/y.arraydtick/(1+i))].sort(function(F,j){return F-j}))[0]-1,a=r[1]+1,l=n;l<a;l++)(s=y.arraytick0+y.arraydtick*l)<0||s>g.length-1||m.push(k(W(s),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=n;l<a;l++)if(t=y.arraytick0+y.arraydtick*l,c=Math.min(t+y.arraydtick,g.length-1),!(t<0||t>g.length-1||c<0||c>g.length-1))for(x=g[t],d=g[c],p=0;p<y.minorgridcount;p++)(v=c-t)<=0||(h=x+(d-x)*(p+1)/(y.minorgridcount+1)*(y.arraydtick/v))<g[0]||h>g[g.length-1]||b.push(k(N(h),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&f.push(k(W(0),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&f.push(k(W(g.length-1),{color:y.endlinecolor,width:y.endlinewidth}))}else{for(i=5e-15,n=(r=[Math.floor((g[g.length-1]-y.tick0)/y.dtick*(1+i)),Math.ceil((g[0]-y.tick0)/y.dtick/(1+i))].sort(function(F,j){return F-j}))[0],a=r[1],l=n;l<=a;l++)u=y.tick0+y.dtick*l,m.push(k(N(u),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=n-1;l<a+1;l++)for(u=y.tick0+y.dtick*l,p=0;p<y.minorgridcount;p++)(h=u+y.dtick*(p+1)/(y.minorgridcount+1))<g[0]||h>g[g.length-1]||b.push(k(N(h),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&f.push(k(N(g[0]),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&f.push(k(N(g[g.length-1]),{color:y.endlinecolor,width:y.endlinewidth}))}}},14724:function(ee,R,e){var M=e(54460),k=e(92880).extendFlat;ee.exports=function(o,T){var _,p,s,t=T._labels=[],i=T._gridlines;for(_=0;_<i.length;_++)s=i[_],["start","both"].indexOf(T.showticklabels)!==-1&&(p=M.tickText(T,s.value),k(p,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:_===0,isLast:_===i.length-1}),t.push(p)),["end","both"].indexOf(T.showticklabels)!==-1&&(p=M.tickText(T,s.value),k(p,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:_===0,isLast:_===i.length-1}),t.push(p))}},62284:function(ee){ee.exports=function(R,e,M,k){var o=R[0]-e[0],T=R[1]-e[1],_=M[0]-e[0],p=M[1]-e[1],s=Math.pow(o*o+T*T,.25),t=Math.pow(_*_+p*p,.25),i=(t*t*o-s*s*_)*k,r=(t*t*T-s*s*p)*k,n=t*(s+t)*3,a=s*(s+t)*3;return[[e[0]+(n&&i/n),e[1]+(n&&r/n)],[e[0]-(a&&i/a),e[1]-(a&&r/a)]]}},60776:function(ee,R,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T){var _,p,s,t,i,r,n=[],a=M(k)?k.length:k,l=M(o)?o.length:o,u=M(k)?k:null,h=M(o)?o:null;u&&(s=(u.length-1)/(u[u.length-1]-u[0])/(a-1)),h&&(t=(h.length-1)/(h[h.length-1]-h[0])/(l-1));var c=1/0,x=-1/0;for(p=0;p<l;p++)for(n[p]=[],i=h?(h[p]-h[0])*t:p/(l-1),_=0;_<a;_++)r=(u?(u[_]-u[0])*s:_/(a-1))-i*T,c=Math.min(r,c),x=Math.max(r,x),n[p][_]=r;var d=1/(x-c),v=-c*d;for(p=0;p<l;p++)for(_=0;_<a;_++)n[p][_]=d*n[p][_]+v;return n}},30180:function(ee,R,e){var M=e(62284),k=e(3400).ensureArray;function o(T,_,p){var s=-.5*p[0]+1.5*_[0],t=-.5*p[1]+1.5*_[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}ee.exports=function(T,_,p,s,t,i){var r,n,a,l,u,h,c,x,d,v,g=p[0].length,y=p.length,m=t?3*g-2:g,b=i?3*y-2:y;for(T=k(T,b),_=k(_,b),a=0;a<b;a++)T[a]=k(T[a],m),_[a]=k(_[a],m);for(n=0,l=0;n<y;n++,l+=i?3:1)for(u=T[l],h=_[l],c=p[n],x=s[n],r=0,a=0;r<g;r++,a+=t?3:1)u[a]=c[r],h[a]=x[r];if(t)for(n=0,l=0;n<y;n++,l+=i?3:1){for(r=1,a=3;r<g-1;r++,a+=3)d=M([p[n][r-1],s[n][r-1]],[p[n][r],s[n][r]],[p[n][r+1],s[n][r+1]],t),T[l][a-1]=d[0][0],_[l][a-1]=d[0][1],T[l][a+1]=d[1][0],_[l][a+1]=d[1][1];v=o([T[l][0],_[l][0]],[T[l][2],_[l][2]],[T[l][3],_[l][3]]),T[l][1]=v[0],_[l][1]=v[1],v=o([T[l][m-1],_[l][m-1]],[T[l][m-3],_[l][m-3]],[T[l][m-4],_[l][m-4]]),T[l][m-2]=v[0],_[l][m-2]=v[1]}if(i)for(a=0;a<m;a++){for(l=3;l<b-3;l+=3)d=M([T[l-3][a],_[l-3][a]],[T[l][a],_[l][a]],[T[l+3][a],_[l+3][a]],i),T[l-1][a]=d[0][0],_[l-1][a]=d[0][1],T[l+1][a]=d[1][0],_[l+1][a]=d[1][1];v=o([T[0][a],_[0][a]],[T[2][a],_[2][a]],[T[3][a],_[3][a]]),T[1][a]=v[0],_[1][a]=v[1],v=o([T[b-1][a],_[b-1][a]],[T[b-3][a],_[b-3][a]],[T[b-4][a],_[b-4][a]]),T[b-2][a]=v[0],_[b-2][a]=v[1]}if(t&&i)for(l=1;l<b;l+=(l+1)%3==0?2:1){for(a=3;a<m-3;a+=3)d=M([T[l][a-3],_[l][a-3]],[T[l][a],_[l][a]],[T[l][a+3],_[l][a+3]],t),T[l][a-1]=.5*(T[l][a-1]+d[0][0]),_[l][a-1]=.5*(_[l][a-1]+d[0][1]),T[l][a+1]=.5*(T[l][a+1]+d[1][0]),_[l][a+1]=.5*(_[l][a+1]+d[1][1]);v=o([T[l][0],_[l][0]],[T[l][2],_[l][2]],[T[l][3],_[l][3]]),T[l][1]=.5*(T[l][1]+v[0]),_[l][1]=.5*(_[l][1]+v[1]),v=o([T[l][m-1],_[l][m-1]],[T[l][m-3],_[l][m-3]],[T[l][m-4],_[l][m-4]]),T[l][m-2]=.5*(T[l][m-2]+v[0]),_[l][m-2]=.5*(_[l][m-2]+v[1])}return[T,_]}},24588:function(ee){ee.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(ee){ee.exports=function(R,e,M){return e&&M?function(k,o,T,_,p){var s,t,i,r,n,a;k||(k=[]),o*=3,T*=3;var l=_*_,u=1-_,h=u*u,c=u*_*2,x=-3*h,d=3*(h-c),v=3*(c-l),g=3*l,y=p*p,m=y*p,b=1-p,f=b*b,S=f*b;for(a=0;a<R.length;a++)s=x*(n=R[a])[T][o]+d*n[T][o+1]+v*n[T][o+2]+g*n[T][o+3],t=x*n[T+1][o]+d*n[T+1][o+1]+v*n[T+1][o+2]+g*n[T+1][o+3],i=x*n[T+2][o]+d*n[T+2][o+1]+v*n[T+2][o+2]+g*n[T+2][o+3],r=x*n[T+3][o]+d*n[T+3][o+1]+v*n[T+3][o+2]+g*n[T+3][o+3],k[a]=S*s+3*(f*p*t+b*y*i)+m*r;return k}:e?function(k,o,T,_,p){var s,t,i,r;k||(k=[]),o*=3;var n=_*_,a=1-_,l=a*a,u=a*_*2,h=-3*l,c=3*(l-u),x=3*(u-n),d=3*n,v=1-p;for(i=0;i<R.length;i++)s=h*(r=R[i])[T][o]+c*r[T][o+1]+x*r[T][o+2]+d*r[T][o+3],t=h*r[T+1][o]+c*r[T+1][o+1]+x*r[T+1][o+2]+d*r[T+1][o+3],k[i]=v*s+p*t;return k}:M?function(k,o,T,_,p){var s,t,i,r,n,a;k||(k=[]),T*=3;var l=p*p,u=l*p,h=1-p,c=h*h,x=c*h;for(n=0;n<R.length;n++)s=(a=R[n])[T][o+1]-a[T][o],t=a[T+1][o+1]-a[T+1][o],i=a[T+2][o+1]-a[T+2][o],r=a[T+3][o+1]-a[T+3][o],k[n]=x*s+3*(c*p*t+h*l*i)+u*r;return k}:function(k,o,T,_,p){var s,t,i,r;k||(k=[]);var n=1-p;for(i=0;i<R.length;i++)s=(r=R[i])[T][o+1]-r[T][o],t=r[T+1][o+1]-r[T+1][o],k[i]=n*s+p*t;return k}}},24464:function(ee){ee.exports=function(R,e,M){return e&&M?function(k,o,T,_,p){var s,t,i,r,n,a;k||(k=[]),o*=3,T*=3;var l=_*_,u=l*_,h=1-_,c=h*h,x=c*h,d=p*p,v=1-p,g=v*v,y=v*p*2,m=-3*g,b=3*(g-y),f=3*(y-d),S=3*d;for(a=0;a<R.length;a++)s=m*(n=R[a])[T][o]+b*n[T+1][o]+f*n[T+2][o]+S*n[T+3][o],t=m*n[T][o+1]+b*n[T+1][o+1]+f*n[T+2][o+1]+S*n[T+3][o+1],i=m*n[T][o+2]+b*n[T+1][o+2]+f*n[T+2][o+2]+S*n[T+3][o+2],r=m*n[T][o+3]+b*n[T+1][o+3]+f*n[T+2][o+3]+S*n[T+3][o+3],k[a]=x*s+3*(c*_*t+h*l*i)+u*r;return k}:e?function(k,o,T,_,p){var s,t,i,r,n,a;k||(k=[]),o*=3;var l=p*p,u=l*p,h=1-p,c=h*h,x=c*h;for(n=0;n<R.length;n++)s=(a=R[n])[T+1][o]-a[T][o],t=a[T+1][o+1]-a[T][o+1],i=a[T+1][o+2]-a[T][o+2],r=a[T+1][o+3]-a[T][o+3],k[n]=x*s+3*(c*p*t+h*l*i)+u*r;return k}:M?function(k,o,T,_,p){var s,t,i,r;k||(k=[]),T*=3;var n=1-_,a=p*p,l=1-p,u=l*l,h=l*p*2,c=-3*u,x=3*(u-h),d=3*(h-a),v=3*a;for(i=0;i<R.length;i++)s=c*(r=R[i])[T][o]+x*r[T+1][o]+d*r[T+2][o]+v*r[T+3][o],t=c*r[T][o+1]+x*r[T+1][o+1]+d*r[T+2][o+1]+v*r[T+3][o+1],k[i]=n*s+_*t;return k}:function(k,o,T,_,p){var s,t,i,r;k||(k=[]);var n=1-_;for(i=0;i<R.length;i++)s=(r=R[i])[T+1][o]-r[T][o],t=r[T+1][o+1]-r[T][o+1],k[i]=n*s+_*t;return k}}},29056:function(ee){ee.exports=function(R,e,M,k,o){var T=e-2,_=M-2;return k&&o?function(p,s,t){var i,r,n,a,l,u;p||(p=[]);var h=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),_)),x=Math.max(0,Math.min(1,s-h)),d=Math.max(0,Math.min(1,t-c));h*=3,c*=3;var v=x*x,g=v*x,y=1-x,m=y*y,b=m*y,f=d*d,S=f*d,w=1-d,E=w*w,O=E*w;for(u=0;u<R.length;u++)i=b*(l=R[u])[c][h]+3*(m*x*l[c][h+1]+y*v*l[c][h+2])+g*l[c][h+3],r=b*l[c+1][h]+3*(m*x*l[c+1][h+1]+y*v*l[c+1][h+2])+g*l[c+1][h+3],n=b*l[c+2][h]+3*(m*x*l[c+2][h+1]+y*v*l[c+2][h+2])+g*l[c+2][h+3],a=b*l[c+3][h]+3*(m*x*l[c+3][h+1]+y*v*l[c+3][h+2])+g*l[c+3][h+3],p[u]=O*i+3*(E*d*r+w*f*n)+S*a;return p}:k?function(p,s,t){p||(p=[]);var i,r,n,a,l,u,h=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),_)),x=Math.max(0,Math.min(1,s-h)),d=Math.max(0,Math.min(1,t-c));h*=3;var v=x*x,g=v*x,y=1-x,m=y*y,b=m*y,f=1-d;for(l=0;l<R.length;l++)i=f*(u=R[l])[c][h]+d*u[c+1][h],r=f*u[c][h+1]+d*u[c+1][h+1],n=f*u[c][h+2]+d*u[c+1][h+1],a=f*u[c][h+3]+d*u[c+1][h+1],p[l]=b*i+3*(m*x*r+y*v*n)+g*a;return p}:o?function(p,s,t){p||(p=[]);var i,r,n,a,l,u,h=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),_)),x=Math.max(0,Math.min(1,s-h)),d=Math.max(0,Math.min(1,t-c));c*=3;var v=d*d,g=v*d,y=1-d,m=y*y,b=m*y,f=1-x;for(l=0;l<R.length;l++)i=f*(u=R[l])[c][h]+x*u[c][h+1],r=f*u[c+1][h]+x*u[c+1][h+1],n=f*u[c+2][h]+x*u[c+2][h+1],a=f*u[c+3][h]+x*u[c+3][h+1],p[l]=b*i+3*(m*d*r+y*v*n)+g*a;return p}:function(p,s,t){p||(p=[]);var i,r,n,a,l=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(t),_)),h=Math.max(0,Math.min(1,s-l)),c=Math.max(0,Math.min(1,t-u)),x=1-c,d=1-h;for(n=0;n<R.length;n++)i=d*(a=R[n])[u][l]+h*a[u][l+1],r=d*a[u+1][l]+h*a[u+1][l+1],p[n]=x*i+c*r;return p}}},38356:function(ee,R,e){var M=e(3400),k=e(86411),o=e(93504),T=e(85720),_=e(22548);ee.exports=function(p,s,t,i){function r(a,l){return M.coerce(p,s,T,a,l)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",_.defaultLine);M.coerceFont(r,"font",i.font),r("carpet"),o(p,s,i,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(p,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope"),r("zorder")):s.visible=!1}},95856:function(ee,R,e){ee.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(ee){ee.exports=function(R,e){for(var M,k=R._fullData.length,o=0;o<k;o++){var T=R._fullData[o];if(T.index!==e.index&&T.type==="carpet"&&(M||(M=T),T.carpet===e.carpet))return T}return M}},53416:function(ee){ee.exports=function(R,e,M){if(R.length===0)return"";var k,o=[],T=M?3:1;for(k=0;k<R.length;k+=T)o.push(R[k]+","+e[k]),M&&k<R.length-T&&(o.push("C"),o.push([R[k+1]+","+e[k+1],R[k+2]+","+e[k+2]+" "].join(" ")));return o.join(M?"":"L")}},87072:function(ee,R,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T){var _;for(M(k)?k.length>o.length&&(k=k.slice(0,o.length)):k=[],_=0;_<o.length;_++)k[_]=T(o[_]);return k}},15584:function(ee){ee.exports=function(R,e,M,k,o,T){var _=o[0]*R.dpdx(e),p=o[1]*R.dpdy(M),s=1,t=1;if(T){var i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]),n=(o[0]*T[0]+o[1]*T[1])/i/r;t=Math.max(0,n)}var a=180*Math.atan2(p,_)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:R.c2p(k,e,M),offsetMultplier:t}}},164:function(ee,R,e){var M=e(33428),k=e(43616),o=e(87072),T=e(53416),_=e(15584),p=e(72736),s=e(3400),t=s.strRotate,i=s.strTranslate,r=e(84284);function n(c,x,d,v,g,y,m){var b="const-"+g+"-lines",f=d.selectAll("."+b).data(y);f.enter().append("path").classed(b,!0).style("vector-effect",m?"none":"non-scaling-stroke"),f.each(function(S){var w=S,E=w.x,O=w.y,C=o([],E,c.c2p),P=o([],O,x.c2p),D="M"+T(C,P,w.smoothing);M.select(this).attr("d",D).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),f.exit().remove()}function a(c,x,d,v,g,y,m,b){var f=y.selectAll("text."+b).data(m);f.enter().append("text").classed(b,!0);var S=0,w={};return f.each(function(E,O){var C;if(E.axis.tickangle==="auto")C=_(v,x,d,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;C=_(v,x,d,E.xy,[Math.cos(P),Math.sin(P)])}O||(w={angle:C.angle,flip:C.flip});var D=(E.endAnchor?-1:1)*C.flip,U=M.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(p.convertToTspans,c),I=k.bBox(this);U.attr("transform",i(C.p[0],C.p[1])+t(C.angle)+i(E.axis.labelpadding*D,.3*I.height)),S=Math.max(S,I.width+E.axis.labelpadding)}),f.exit().remove(),w.maxExtent=S,w}ee.exports=function(c,x,d,v){var g=c._context.staticPlot,y=x.xaxis,m=x.yaxis,b=c._fullLayout._clips;s.makeTraceGroups(v,d,"trace").each(function(f){var S=M.select(this),w=f[0],E=w.trace,O=E.aaxis,C=E.baxis,P=s.ensureSingle(S,"g","minorlayer"),D=s.ensureSingle(S,"g","majorlayer"),U=s.ensureSingle(S,"g","boundarylayer"),I=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),n(y,m,D,0,"a",O._gridlines,!0),n(y,m,D,0,"b",C._gridlines,!0),n(y,m,P,0,"a",O._minorgridlines,!0),n(y,m,P,0,"b",C._minorgridlines,!0),n(y,m,U,0,"a-boundary",O._boundarylines,g),n(y,m,U,0,"b-boundary",C._boundarylines,g);var N=a(c,y,m,E,0,I,O._labels,"a-label"),W=a(c,y,m,E,0,I,C._labels,"b-label");(function(F,j,H,te,Q,$,K,X){var Y,re,se,ae,ce=s.aggNums(Math.min,null,H.a),fe=s.aggNums(Math.max,null,H.a),he=s.aggNums(Math.min,null,H.b),ve=s.aggNums(Math.max,null,H.b);Y=.5*(ce+fe),re=he,se=H.ab2xy(Y,re,!0),ae=H.dxyda_rough(Y,re),K.angle===void 0&&s.extendFlat(K,_(H,Q,$,se,H.dxydb_rough(Y,re))),h(F,j,H,0,se,ae,H.aaxis,Q,$,K,"a-title"),Y=ce,re=.5*(he+ve),se=H.ab2xy(Y,re,!0),ae=H.dxydb_rough(Y,re),X.angle===void 0&&s.extendFlat(X,_(H,Q,$,se,H.dxyda_rough(Y,re))),h(F,j,H,0,se,ae,H.baxis,Q,$,X,"b-title")})(c,I,E,0,y,m,N,W),function(F,j,H,te,Q){var $,K,X,Y,re=H.select("#"+F._clipPathId);re.size()||(re=H.append("clipPath").classed("carpetclip",!0));var se=s.ensureSingle(re,"path","carpetboundary"),ae=j.clipsegments,ce=[];for(Y=0;Y<ae.length;Y++)$=ae[Y],K=o([],$.x,te.c2p),X=o([],$.y,Q.c2p),ce.push(T(K,X,$.bicubic));var fe="M"+ce.join("L")+"Z";re.attr("id",F._clipPathId),se.attr("d",fe)}(E,w,b,y,m)})};var l=r.LINE_SPACING,u=(1-r.MID_SHIFT)/l+1;function h(c,x,d,v,g,y,m,b,f,S,w){var E=[];m.title.text&&E.push(m.title.text);var O=x.selectAll("text."+w).data(E),C=S.maxExtent;O.enter().append("text").classed(w,!0),O.each(function(){var P=_(d,b,f,g,y);["start","both"].indexOf(m.showticklabels)===-1&&(C=0);var D=m.title.font.size;C+=D+m.title.offset;var U=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,I=U>90&&U<270,N=M.select(this);N.text(m.title.text).call(p.convertToTspans,c),I&&(C=(-p.lineCount(N)+u)*l*D-C),N.attr("transform",i(P.p[0],P.p[1])+t(P.angle)+i(0,C)).attr("text-anchor","middle").call(k.font,m.title.font)}),O.exit().remove()}},81e3:function(ee,R,e){var M=e(24588),k=e(14952).findBin,o=e(30180),T=e(29056),_=e(26435),p=e(24464);ee.exports=function(s){var t=s._a,i=s._b,r=t.length,n=i.length,a=s.aaxis,l=s.baxis,u=t[0],h=t[r-1],c=i[0],x=i[n-1],d=t[t.length-1]-t[0],v=i[i.length-1]-i[0],g=d*M.RELATIVE_CULL_TOLERANCE,y=v*M.RELATIVE_CULL_TOLERANCE;u-=g,h+=g,c-=y,x+=y,s.isVisible=function(m,b){return m>u&&m<h&&b>c&&b<x},s.isOccluded=function(m,b){return m<u||m>h||b<c||b>x},s.setScale=function(){var m=s._x,b=s._y,f=o(s._xctrl,s._yctrl,m,b,a.smoothing,l.smoothing);s._xctrl=f[0],s._yctrl=f[1],s.evalxy=T([s._xctrl,s._yctrl],r,n,a.smoothing,l.smoothing),s.dxydi=_([s._xctrl,s._yctrl],a.smoothing,l.smoothing),s.dxydj=p([s._xctrl,s._yctrl],a.smoothing,l.smoothing)},s.i2a=function(m){var b=Math.max(0,Math.floor(m[0]),r-2),f=m[0]-b;return(1-f)*t[b]+f*t[b+1]},s.j2b=function(m){var b=Math.max(0,Math.floor(m[1]),r-2),f=m[1]-b;return(1-f)*i[b]+f*i[b+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var b=Math.max(0,Math.min(k(m,t),r-2)),f=t[b],S=t[b+1];return Math.max(0,Math.min(r-1,b+(m-f)/(S-f)))},s.b2j=function(m){var b=Math.max(0,Math.min(k(m,i),n-2)),f=i[b],S=i[b+1];return Math.max(0,Math.min(n-1,b+(m-f)/(S-f)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,b){return s.evalxy([],m,b)},s.ab2xy=function(m,b,f){if(!f&&(m<t[0]||m>t[r-1]|b<i[0]||b>i[n-1]))return[!1,!1];var S=s.a2i(m),w=s.b2j(b),E=s.evalxy([],S,w);if(f){var O,C,P,D,U=0,I=0,N=[];m<t[0]?(O=0,C=0,U=(m-t[0])/(t[1]-t[0])):m>t[r-1]?(O=r-2,C=1,U=(m-t[r-1])/(t[r-1]-t[r-2])):C=S-(O=Math.max(0,Math.min(r-2,Math.floor(S)))),b<i[0]?(P=0,D=0,I=(b-i[0])/(i[1]-i[0])):b>i[n-1]?(P=n-2,D=1,I=(b-i[n-1])/(i[n-1]-i[n-2])):D=w-(P=Math.max(0,Math.min(n-2,Math.floor(w)))),U&&(s.dxydi(N,O,P,C,D),E[0]+=N[0]*U,E[1]+=N[1]*U),I&&(s.dxydj(N,O,P,C,D),E[0]+=N[0]*I,E[1]+=N[1]*I)}return E},s.c2p=function(m,b,f){return[b.c2p(m[0]),f.c2p(m[1])]},s.p2x=function(m,b,f){return[b.p2c(m[0]),f.p2c(m[1])]},s.dadi=function(m){var b=Math.max(0,Math.min(t.length-2,m));return t[b+1]-t[b]},s.dbdj=function(m){var b=Math.max(0,Math.min(i.length-2,m));return i[b+1]-i[b]},s.dxyda=function(m,b,f,S){var w=s.dxydi(null,m,b,f,S),E=s.dadi(m,f);return[w[0]/E,w[1]/E]},s.dxydb=function(m,b,f,S){var w=s.dxydj(null,m,b,f,S),E=s.dbdj(b,S);return[w[0]/E,w[1]/E]},s.dxyda_rough=function(m,b,f){var S=d*(f||.1),w=s.ab2xy(m+S,b,!0),E=s.ab2xy(m-S,b,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dxydb_rough=function(m,b,f){var S=v*(f||.1),w=s.ab2xy(m,b+S,!0),E=s.ab2xy(m,b-S,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},51512:function(ee,R,e){var M=e(3400);ee.exports=function(k,o,T){var _,p,s,t=[],i=[],r=k[0].length,n=k.length;function a(F,j){var H,te=0,Q=0;return F>0&&(H=k[j][F-1])!==void 0&&(Q++,te+=H),F<r-1&&(H=k[j][F+1])!==void 0&&(Q++,te+=H),j>0&&(H=k[j-1][F])!==void 0&&(Q++,te+=H),j<n-1&&(H=k[j+1][F])!==void 0&&(Q++,te+=H),te/Math.max(1,Q)}var l,u,h,c,x,d,v,g,y,m,b,f=0;for(_=0;_<r;_++)for(p=0;p<n;p++)k[p][_]===void 0&&(t.push(_),i.push(p),k[p][_]=a(_,p)),f=Math.max(f,Math.abs(k[p][_]));if(!t.length)return k;var S=0,w=0,E=t.length;do{for(S=0,s=0;s<E;s++){_=t[s],p=i[s];var O,C,P,D,U,I,N=0,W=0;_===0?(P=o[U=Math.min(r-1,2)],D=o[1],O=k[p][U],W+=(C=k[p][1])+(C-O)*(o[0]-D)/(D-P),N++):_===r-1&&(P=o[U=Math.max(0,r-3)],D=o[r-2],O=k[p][U],W+=(C=k[p][r-2])+(C-O)*(o[r-1]-D)/(D-P),N++),(_===0||_===r-1)&&p>0&&p<n-1&&(l=T[p+1]-T[p],W+=((u=T[p]-T[p-1])*k[p+1][_]+l*k[p-1][_])/(u+l),N++),p===0?(P=T[I=Math.min(n-1,2)],D=T[1],O=k[I][_],W+=(C=k[1][_])+(C-O)*(T[0]-D)/(D-P),N++):p===n-1&&(P=T[I=Math.max(0,n-3)],D=T[n-2],O=k[I][_],W+=(C=k[n-2][_])+(C-O)*(T[n-1]-D)/(D-P),N++),(p===0||p===n-1)&&_>0&&_<r-1&&(l=o[_+1]-o[_],W+=((u=o[_]-o[_-1])*k[p][_+1]+l*k[p][_-1])/(u+l),N++),N?W/=N:(h=o[_+1]-o[_],c=o[_]-o[_-1],g=(x=T[p+1]-T[p])*(d=T[p]-T[p-1])*(x+d),W=((v=h*c*(h+c))*(d*k[p+1][_]+x*k[p-1][_])+g*(c*k[p][_+1]+h*k[p][_-1]))/(g*(c+h)+v*(d+x))),S+=(m=(y=W-k[p][_])/f)*m,b=N?0:.85,k[p][_]+=y*(1+b)}S=Math.sqrt(S)}while(w++<100&&S>1e-5);return M.log("Smoother converged to",S,"after",w,"iterations"),k}},86411:function(ee,R,e){var M=e(3400).isArray1D;ee.exports=function(k,o,T){var _=T("x"),p=_&&_.length,s=T("y"),t=s&&s.length;if(!p&&!t)return!1;if(o._cheater=!_,p&&!M(_)||t&&!M(s))o._length=null;else{var i=p?_.length:1/0;t&&(i=Math.min(i,s.length)),o.a&&o.a.length&&(i=Math.min(i,o.a.length)),o.b&&o.b.length&&(i=Math.min(i,o.b.length)),o._length=i}return!0}},83372:function(ee,R,e){var M=e(21776).Ks,k=e(6096),o=e(49084),T=e(45464),_=e(22548).defaultLine,p=e(92880).extendFlat,s=k.marker.line;ee.exports=p({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:p({},k.geojson,{}),featureidkey:k.featureidkey,text:p({},k.text,{}),hovertext:p({},k.hovertext,{}),marker:{line:{color:p({},s.color,{dflt:_}),width:p({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:p({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:p({},T.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,o=e(47128),T=e(20148),_=e(4500);function p(s){return s&&typeof s=="string"}ee.exports=function(s,t){var i,r=t._length,n=new Array(r);i=t.geojson?function(c){return p(c)||M(c)}:p;for(var a=0;a<r;a++){var l=n[a]={},u=t.locations[a],h=t.z[a];i(u)&&M(h)?(l.loc=u,l.z=h):(l.loc=null,l.z=k),l.index=a}return T(n,t),o(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),_(n,t),n}},30972:function(ee,R,e){var M=e(3400),k=e(27260),o=e(83372);ee.exports=function(T,_,p,s){function t(l,u){return M.coerce(T,_,o,l,u)}var i=t("locations"),r=t("z");if(i&&i.length&&M.isArrayOrTypedArray(r)&&r.length){_._length=Math.min(i.length,r.length);var n,a=t("geojson");(typeof a=="string"&&a!==""||M.isPlainObject(a))&&(n="geojson-id"),t("locationmode",n)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,_,s,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(_,t)}else _.visible=!1}},52428:function(ee){ee.exports=function(R,e,M,k,o){R.location=e.location,R.z=e.z;var T=k[o];return T.fIn&&T.fIn.properties&&(R.properties=T.fIn.properties),R.ct=T.ct,R}},69224:function(ee,R,e){var M=e(54460),k=e(83372),o=e(3400).fillText;ee.exports=function(T,_,p){var s,t,i,r,n=T.cd,a=n[0].trace,l=T.subplot,u=[_,p],h=[_+360,p];for(t=0;t<n.length;t++)if(r=!1,(s=n[t])._polygons){for(i=0;i<s._polygons.length;i++)s._polygons[i].contains(u)&&(r=!r),s._polygons[i].contains(h)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=M.tickText(l.mockAxis,l.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(c,x,d){if(!x.hovertemplate){var v=d.hi||x.hoverinfo,g=String(d.loc),y=v==="all"?k.hoverinfo.flags:v.split("+"),m=y.indexOf("name")!==-1,b=y.indexOf("location")!==-1,f=y.indexOf("z")!==-1,S=y.indexOf("text")!==-1,w=[];!m&&b?c.nameOverride=g:(m&&(c.nameOverride=x.name),b&&w.push(g)),f&&w.push(c.zLabel),S&&o(d,x,w),c.extraText=w.join("<br>")}}(T,a,s),[T]}},54272:function(ee,R,e){ee.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(ee,R,e){var M=e(33428),k=e(3400),o=e(27144),T=e(59972).getTopojsonFeatures,_=e(19280).findExtremes,p=e(7947).style;ee.exports={calcGeoJSON:function(s,t){for(var i=s[0].trace,r=t[i.geo],n=r._subplot,a=i.locationmode,l=i._length,u=a==="geojson-id"?o.extractTraceFeature(s):T(i,n.topojson),h=[],c=[],x=0;x<l;x++){var d=s[x],v=a==="geojson-id"?d.fOut:o.locationToFeature(a,d.loc,u);if(v){d.geojson=v,d.ct=v.properties.ct,d._polygons=o.feature2polygons(v);var g=o.computeBbox(v);h.push(g[0],g[2]),c.push(g[1],g[3])}else d.geojson=null}if(r.fitbounds==="geojson"&&a==="geojson-id"){var y=o.computeBbox(o.getTraceGeojson(i));h=[y[0],y[2]],c=[y[1],y[3]]}var m={padded:!0};i._extremes.lon=_(r.lonaxis._ax,h,m),i._extremes.lat=_(r.lataxis._ax,c,m)},plot:function(s,t,i){var r=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,i,"trace choropleth").each(function(n){var a=M.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),p(s,n)})}}},17328:function(ee){ee.exports=function(R,e){var M,k,o,T,_,p=R.cd,s=R.xaxis,t=R.yaxis,i=[];if(e===!1)for(M=0;M<p.length;M++)p[M].selected=0;else for(M=0;M<p.length;M++)(o=(k=p[M]).ct)&&(T=s.c2p(o),_=t.c2p(o),e.contains([T,_],null,M,R)?(i.push({pointNumber:M,lon:o[0],lat:o[1]}),k.selected=1):k.selected=0);return i}},7947:function(ee,R,e){var M=e(33428),k=e(76308),o=e(43616),T=e(8932);function _(p,s){var t=s[0].trace,i=s[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(t);i.each(function(l){M.select(this).attr("fill",a(l.z)).call(k.stroke,l.mlc||n.color).call(o.dashLine,"",l.mlw||n.width||0).style("opacity",r.opacity)}),o.selectedPointStyle(i,t)}ee.exports={style:function(p,s){s&&_(0,s)},styleOnSelect:function(p,s){var t=s[0].node3,i=s[0].trace;i.selectedpoints?o.selectedPointStyle(t.selectAll(".choroplethlocation"),i):_(0,s)}}},45608:function(ee,R,e){var M=e(83372),k=e(49084),o=e(21776).Ks,T=e(45464),_=e(92880).extendFlat;ee.exports=_({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:_({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:_({},M.marker.line.color,{editType:"plot"}),width:_({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:_({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:_({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:_({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:o({},{keys:["properties"]}),showlegend:_({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(ee,R,e){var M=e(38248),k=e(3400),o=e(8932),T=e(43616),_=e(44808).makeBlank,p=e(27144);function s(t){var i,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),l=0;l<t.length;l++){var u=t[l];u.fOut&&(u.fOut.properties.mo2=a.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":i}),k.extendFlat(n.line.paint,{"line-opacity":i}),n}ee.exports={convert:function(t){var i=t[0].trace,r=i.visible===!0&&i._length!==0,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},l=i._opts={fill:n,line:a,geojson:_()};if(!r)return l;var u=p.extractTraceFeature(t);if(!u)return l;var h,c,x,d=o.makeColorScaleFuncFromTrace(i),v=i.marker,g=v.line||{};k.isArrayOrTypedArray(v.opacity)&&(h=function(w){var E=w.mo;return M(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(g.color)&&(c=function(w){return w.mlc}),k.isArrayOrTypedArray(g.width)&&(x=function(w){return w.mlw});for(var y=0;y<t.length;y++){var m=t[y],b=m.fOut;if(b){var f=b.properties;f.fc=d(m.z),h&&(f.mo=h(m)),c&&(f.mlc=c(m)),x&&(f.mlw=x(m)),m.ct=f.ct,m._polygons=p.feature2polygons(b)}}var S=h?{type:"identity",property:"mo"}:v.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(a.paint,{"line-color":c?{type:"identity",property:"mlc"}:g.color,"line-width":x?{type:"identity",property:"mlw"}:g.width,"line-opacity":S}),n.layout.visibility="visible",a.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:u},s(t),l},convertOnSelect:s}},9352:function(ee,R,e){var M=e(3400),k=e(27260),o=e(45608);ee.exports=function(T,_,p,s){function t(a,l){return M.coerce(T,_,o,a,l)}var i=t("locations"),r=t("z"),n=t("geojson");M.isArrayOrTypedArray(i)&&i.length&&M.isArrayOrTypedArray(r)&&r.length&&(typeof n=="string"&&n!==""||M.isPlainObject(n))?(t("featureidkey"),_._length=Math.min(i.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,_,s,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(_,t)):_.visible=!1}},85404:function(ee,R,e){ee.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(M,k){for(var o=k.getMapLayers(),T=o.length-2;T>=0;T--){var _=o[T].id;if(typeof _=="string"&&_.indexOf("water")===0){for(var p=T+1;p<o.length;p++)if(typeof(_=o[p].id)=="string"&&_.indexOf("plotly-")===-1)return _}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(ee,R,e){var M=e(13504).convert,k=e(13504).convertOnSelect,o=e(47552).traceLayerPrefix;function T(p,s){this.type="choroplethmapbox",this.subplot=p,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",o+s+"-fill"],["line",o+s+"-line"]],this.below=null}var _=T.prototype;_.update=function(p){this._update(M(p)),p[0].trace._glTrace=this},_.updateOnSelect=function(p){this._update(k(p))},_._update=function(p){var s=this.subplot,t=this.layerList,i=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(p.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(p,i),this.below=i);for(var r=0;r<t.length;r++){var n=t[r],a=n[0],l=n[1],u=p[a];s.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&s.setOptions(l,"setPaintProperty",u.paint)}},_._addLayers=function(p,s){for(var t=this.subplot,i=this.layerList,r=this.sourceId,n=0;n<i.length;n++){var a=i[n],l=a[0],u=p[l];t.addLayer({type:l,id:a[1],source:r,layout:u.layout,paint:u.paint},s)}},_._removeLayers=function(){for(var p=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)p.removeLayer(s[t][1])},_.dispose=function(){var p=this.subplot.map;this._removeLayers(),p.removeSource(this.sourceId)},ee.exports=function(p,s){var t=s[0].trace,i=new T(p,t.uid),r=i.sourceId,n=M(s),a=i.below=p.belowLookup["trace-"+t.uid];return p.map.addSource(r,{type:"geojson",data:n.geojson}),i._addLayers(n,a),s[0].trace._glTrace=i,i}},86040:function(ee,R,e){var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),_=e(45464),p=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},_.showlegend,{dflt:!1})};p(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=p({},_.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,ee.exports=s},83344:function(ee,R,e){var M=e(47128);ee.exports=function(k,o){for(var T=o.u,_=o.v,p=o.w,s=Math.min(o.x.length,o.y.length,o.z.length,T.length,_.length,p.length),t=-1/0,i=1/0,r=0;r<s;r++){var n=T[r],a=_[r],l=p[r],u=Math.sqrt(n*n+a*a+l*l);t=Math.max(t,u),i=Math.min(i,u)}o._len=s,o._normMax=t,M(k,o,{vals:[i,t],containerStr:"",cLetter:"c"})}},6648:function(ee,R,e){var M=e(67792).gl_cone3d,k=e(67792).gl_cone3d.createConeMesh,o=e(3400).simpleMap,T=e(33040).parseColorScale,_=e(8932).extractOpts,p=e(3400).isArrayOrTypedArray,s=e(52094);function t(u,h){this.scene=u,this.uid=h,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(u){if(u.object===this.mesh){var h=u.index=u.data.index,c=this.data.x[h],x=this.data.y[h],d=this.data.z[h],v=this.data.u[h],g=this.data.v[h],y=this.data.w[h];u.traceCoordinate=[c,x,d,v,g,y,Math.sqrt(v*v+g*g+y*y)];var m=this.data.hovertext||this.data.text;return p(m)&&m[h]!==void 0?u.textLabel=m[h]:m&&(u.textLabel=m),!0}};var r={xaxis:0,yaxis:1,zaxis:2},n={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function l(u,h){var c=u.fullSceneLayout,x=u.dataScale,d={};function v(f,S){var w=c[S],E=x[r[S]];return o(f,function(O){return w.d2l(O)*E})}d.vectors=s(v(h.u,"xaxis"),v(h.v,"yaxis"),v(h.w,"zaxis"),h._len),d.positions=s(v(h.x,"xaxis"),v(h.y,"yaxis"),v(h.z,"zaxis"),h._len);var g=_(h);d.colormap=T(h),d.vertexIntensityBounds=[g.min/h._normMax,g.max/h._normMax],d.coneOffset=n[h.anchor];var y=h.sizemode;y==="scaled"?d.coneSize=h.sizeref||.5:y==="absolute"?d.coneSize=h.sizeref&&h._normMax?h.sizeref/h._normMax:.5:y==="raw"&&(d.coneSize=h.sizeref),d.coneSizemode=y;var m=M(d),b=h.lightposition;return m.lightPosition=[b.x,b.y,b.z],m.ambient=h.lighting.ambient,m.diffuse=h.lighting.diffuse,m.specular=h.lighting.specular,m.roughness=h.lighting.roughness,m.fresnel=h.lighting.fresnel,m.opacity=h.opacity,h._pad=a[h.anchor]*m.vectorScale*m.coneScale*h._normMax,m}i.update=function(u){this.data=u;var h=l(this.scene,u);this.mesh.update(h)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(u,h){var c=u.glplot.gl,x=l(u,h),d=k(c,x),v=new t(u,h.uid);return v.mesh=d,v.data=h,d._trace=v,u.glplot.add(d),v}},86096:function(ee,R,e){var M=e(3400),k=e(27260),o=e(86040);ee.exports=function(T,_,p,s){function t(c,x){return M.coerce(T,_,o,c,x)}var i=t("u"),r=t("v"),n=t("w"),a=t("x"),l=t("y"),u=t("z");if(i&&i.length&&r&&r.length&&n&&n.length&&a&&a.length&&l&&l.length&&u&&u.length){var h=t("sizemode");t("sizeref",h==="raw"?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,_,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),_._length=null}else _.visible=!1}},26048:function(ee,R,e){ee.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(M,k){return M.norm=k.traceCoordinate[6],M},meta:{}}},67104:function(ee,R,e){var M=e(83328),k=e(52904),o=e(29736),T=o.axisHoverFormat,_=o.descriptionOnlyNumbers,p=e(49084),s=e(98192).u,t=e(25376),i=e(92880).extendFlat,r=e(69104),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,l=k.line;ee.exports=i({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:i({},M.texttemplate,{}),textfont:i({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:i({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:_("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:i({},l.smoothing,{}),editType:"plot"},zorder:k.zorder},p("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(ee,R,e){var M=e(8932),k=e(19512),o=e(54444),T=e(46960);ee.exports=function(_,p){var s=k(_,p),t=s[0].z;o(p,t);var i,r=p.contours,n=M.extractOpts(p);if(r.coloring==="heatmap"&&n.auto&&p.autocontour===!1){var a=r.start,l=T(r),u=r.size||1,h=Math.floor((l-a)/u)+1;isFinite(u)||(u=1,h=1);var c=a-u/2;i=[c,c+h*u]}else i=t;return M.calc(_,p,{vals:i,cLetter:"z"}),s}},56008:function(ee){ee.exports=function(R,e){var M,k=R[0],o=k.z;switch(e.type){case"levels":var T=Math.min(o[0][0],o[0][1]);for(M=0;M<R.length;M++){var _=R[M];_.prefixBoundary=!_.edgepaths.length&&(T>_.level||_.starts.length&&T===_.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var p=k.x.length,s=k.y.length,t=-1/0,i=1/0;for(M=0;M<s;M++)i=Math.min(i,o[M][0]),i=Math.min(i,o[M][p-1]),t=Math.max(t,o[M][0]),t=Math.max(t,o[M][p-1]);for(M=1;M<p-1;M++)i=Math.min(i,o[0][M]),i=Math.min(i,o[s-1][M]),t=Math.max(t,o[0][M]),t=Math.max(t,o[s-1][M]);var r,n,a=e.value;switch(e._operation){case">":a>t&&(k.prefixBoundary=!0);break;case"<":(a<i||k.starts.length&&a===i)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<i||r>t||k.starts.length&&n===i)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<i&&n>t&&(k.prefixBoundary=!0)}}}},55296:function(ee,R,e){var M=e(8932),k=e(41076),o=e(46960);ee.exports={min:"zmin",max:"zmax",calc:function(T,_,p){var s=_.contours,t=_.line,i=s.size||1,r=s.coloring,n=k(_,{isColorbar:!0});if(r==="heatmap"){var a=M.extractOpts(_);p._fillgradient=a.reversescale?M.flipScale(a.colorscale):a.colorscale,p._zrange=[a.min,a.max]}else r==="fill"&&(p._fillcolor=n);p._line={color:r==="lines"?n:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},p._levels={start:s.start,end:o(s),size:i}}}},93252:function(ee){ee.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(ee,R,e){var M=e(38248),k=e(17428),o=e(76308),T=o.addOpacity,_=o.opacity,p=e(69104),s=e(3400).isArrayOrTypedArray,t=p.CONSTRAINT_REDUCTION,i=p.COMPARISON_OPS2;ee.exports=function(r,n,a,l,u,h){var c,x,d,v=n.contours,g=a("contours.operation");v._operation=t[g],function(y,m){var b;i.indexOf(m.operation)===-1?(y("contours.value",[0,1]),s(m.value)?m.value.length>2?m.value=m.value.slice(2):m.length===0?m.value=[0,1]:m.length<2?(b=parseFloat(m.value[0]),m.value=[b,b+1]):m.value=[parseFloat(m.value[0]),parseFloat(m.value[1])]:M(m.value)&&(b=parseFloat(m.value),m.value=[b,b+1])):(y("contours.value",0),M(m.value)||(s(m.value)?m.value=parseFloat(m.value[0]):m.value=0))}(a,v),g==="="?c=v.showlines=!0:(c=a("contours.showlines"),d=a("fillcolor",T((r.line||{}).color||u,.5))),c&&(x=a("line.color",d&&_(d)?T(n.fillcolor,1):u),a("line.width",2),a("line.dash")),a("line.smoothing"),k(a,l,x,h)}},3212:function(ee,R,e){var M=e(69104),k=e(38248);function o(p,s){var t,i=Array.isArray(s);function r(n){return k(n)?+n:null}return M.COMPARISON_OPS2.indexOf(p)!==-1?t=r(i?s[0]:s):M.INTERVAL_OPS.indexOf(p)!==-1?t=i?[r(s[0]),r(s[1])]:[r(s),r(s)]:M.SET_OPS.indexOf(p)!==-1&&(t=i?s.map(r):[r(s)]),t}function T(p){return function(s){s=o(p,s);var t=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return{start:t,end:i,size:i-t}}}function _(p){return function(s){return{start:s=o(p,s),end:1/0,size:1/0}}}ee.exports={"[]":T("[]"),"][":T("]["),">":_(">"),"<":_("<"),"=":_("=")}},84952:function(ee){ee.exports=function(R,e,M,k){var o=k("contours.start"),T=k("contours.end"),_=o===!1||T===!1,p=M("contours.size");!(_?e.autocontour=!0:M("autocontour",!1))&&p||M("ncontours")}},82172:function(ee,R,e){var M=e(3400);function k(o){return M.extendFlat({},o,{edgepaths:M.extendDeep([],o.edgepaths),paths:M.extendDeep([],o.paths),starts:M.extendDeep([],o.starts)})}ee.exports=function(o,T){var _,p,s,t=function(n){return n.reverse()},i=function(n){return n};switch(T){case"=":case"<":return o;case">":for(o.length!==1&&M.warn("Contour data invalid for the specified inequality operation."),p=o[0],_=0;_<p.edgepaths.length;_++)p.edgepaths[_]=t(p.edgepaths[_]);for(_=0;_<p.paths.length;_++)p.paths[_]=t(p.paths[_]);for(_=0;_<p.starts.length;_++)p.starts[_]=t(p.starts[_]);return o;case"][":var r=t;t=i,i=r;case"[]":for(o.length!==2&&M.warn("Contour data invalid for the specified inequality range operation."),p=k(o[0]),s=k(o[1]),_=0;_<p.edgepaths.length;_++)p.edgepaths[_]=t(p.edgepaths[_]);for(_=0;_<p.paths.length;_++)p.paths[_]=t(p.paths[_]);for(_=0;_<p.starts.length;_++)p.starts[_]=t(p.starts[_]);for(;s.edgepaths.length;)p.edgepaths.push(i(s.edgepaths.shift()));for(;s.paths.length;)p.paths.push(i(s.paths.shift()));for(;s.starts.length;)p.starts.push(i(s.starts.shift()));return[p]}}},57004:function(ee,R,e){var M=e(3400),k=e(51264),o=e(31147),T=e(95536),_=e(84952),p=e(97680),s=e(39096),t=e(67104);ee.exports=function(i,r,n,a){function l(h,c){return M.coerce(i,r,t,h,c)}if(k(i,r,l,a)){o(i,r,a,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var u=l("contours.type")==="constraint";l("connectgaps",M.isArray1D(r.z)),u?T(i,r,l,a,n):(_(i,r,l,function(h){return M.coerce2(i,r,t,h)}),p(i,r,l,a)),r.contours&&r.contours.coloring==="heatmap"&&s(l,a),l("zorder")}else r.visible=!1}},61512:function(ee,R,e){var M=e(3400),k=e(3212),o=e(46960);ee.exports=function(T,_,p){for(var s=T.type==="constraint"?k[T._operation](T.value):T,t=s.size,i=[],r=o(s),n=p.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:p.a,y:p.b}:{xaxis:_.xaxis,yaxis:_.yaxis,x:p.x,y:p.y},l=s.start;l<r;l+=t)if(i.push(M.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:p.z,smoothing:p.trace.line.smoothing},a)),i.length>1e3){M.warn("Too many contours, clipping at 1000",T);break}return i}},46960:function(ee){ee.exports=function(R){return R.end+R.size/1e6}},88748:function(ee,R,e){var M=e(3400),k=e(93252);function o(p,s,t,i){return Math.abs(p[0]-s[0])<t&&Math.abs(p[1]-s[1])<i}function T(p,s,t,i,r){var n,a=s.join(","),l=p.crossings[a],u=function(re,se,ae){var ce=0,fe=0;return re>20&&se?re===208||re===1114?ce=ae[0]===0?1:-1:fe=ae[1]===0?1:-1:k.BOTTOMSTART.indexOf(re)!==-1?fe=1:k.LEFTSTART.indexOf(re)!==-1?ce=1:k.TOPSTART.indexOf(re)!==-1?fe=-1:ce=-1,[ce,fe]}(l,t,s),h=[_(p,s,[-u[0],-u[1]])],c=p.z.length,x=p.z[0].length,d=s.slice(),v=u.slice();for(n=0;n<1e4;n++){if(l>20?(l=k.CHOOSESADDLE[l][(u[0]||u[1])<0?0:1],p.crossings[a]=k.SADDLEREMAINDER[l]):delete p.crossings[a],!(u=k.NEWDELTA[l])){M.log("Found bad marching index:",l,s,p.level);break}h.push(_(p,s,u)),s[0]+=u[0],s[1]+=u[1],a=s.join(","),o(h[h.length-1],h[h.length-2],i,r)&&h.pop();var g=u[0]&&(s[0]<0||s[0]>x-2)||u[1]&&(s[1]<0||s[1]>c-2);if(s[0]===d[0]&&s[1]===d[1]&&u[0]===v[0]&&u[1]===v[1]||t&&g)break;l=p.crossings[a]}n===1e4&&M.log("Infinite loop in contour?");var y,m,b,f,S,w,E,O,C,P,D,U,I,N,W,F=o(h[0],h[h.length-1],i,r),j=0,H=.2*p.smoothing,te=[],Q=0;for(n=1;n<h.length;n++)U=h[n],I=h[n-1],N=U[2]-I[2],W=U[3]-I[3],j+=E=Math.sqrt(N*N+W*W),te.push(E);var $=j/te.length*H;function K(re){return h[re%h.length]}for(n=h.length-2;n>=Q;n--)if((y=te[n])<$){for(b=0,m=n-1;m>=Q&&y+te[m]<$;m--)y+=te[m];if(F&&n===h.length-2)for(b=0;b<m&&y+te[b]<$;b++)y+=te[b];S=n-m+b+1,w=Math.floor((n+m+b+2)/2),f=F||n!==h.length-2?F||m!==-1?S%2?K(w):[(K(w)[0]+K(w+1)[0])/2,(K(w)[1]+K(w+1)[1])/2]:h[0]:h[h.length-1],h.splice(m+1,n-m+1,f),n=m+1,b&&(Q=b),F&&(n===h.length-2?h[b]=h[h.length-1]:n===0&&(h[h.length-1]=h[0]))}for(h.splice(0,Q),n=0;n<h.length;n++)h[n].length=2;if(!(h.length<2))if(F)h.pop(),p.paths.push(h);else{t||M.log("Unclosed interior contour?",p.level,d.join(","),h.join("L"));var X=!1;for(O=0;O<p.edgepaths.length;O++)if(P=p.edgepaths[O],!X&&o(P[0],h[h.length-1],i,r)){h.pop(),X=!0;var Y=!1;for(C=0;C<p.edgepaths.length;C++)if(o((D=p.edgepaths[C])[D.length-1],h[0],i,r)){Y=!0,h.shift(),p.edgepaths.splice(O,1),C===O?p.paths.push(h.concat(D)):(C>O&&C--,p.edgepaths[C]=D.concat(h,P));break}Y||(p.edgepaths[O]=h.concat(P))}for(O=0;O<p.edgepaths.length&&!X;O++)o((P=p.edgepaths[O])[P.length-1],h[0],i,r)&&(h.shift(),p.edgepaths[O]=P.concat(h),X=!0);X||p.edgepaths.push(h)}}function _(p,s,t){var i=s[0]+Math.max(t[0],0),r=s[1]+Math.max(t[1],0),n=p.z[r][i],a=p.xaxis,l=p.yaxis;if(t[1]){var u=(p.level-n)/(p.z[r][i+1]-n),h=(u!==1?(1-u)*a.c2l(p.x[i]):0)+(u!==0?u*a.c2l(p.x[i+1]):0);return[a.c2p(a.l2c(h),!0),l.c2p(p.y[r],!0),i+u,r]}var c=(p.level-n)/(p.z[r+1][i]-n),x=(c!==1?(1-c)*l.c2l(p.y[r]):0)+(c!==0?c*l.c2l(p.y[r+1]):0);return[a.c2p(p.x[i],!0),l.c2p(l.l2c(x),!0),i,r+c]}ee.exports=function(p,s,t){var i,r,n,a;for(s=s||.01,t=t||.01,r=0;r<p.length;r++){for(n=p[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",s,t);for(i=0;Object.keys(n.crossings).length&&i<1e4;)i++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,t);i===1e4&&M.log("Infinite loop in contour?")}}},38200:function(ee,R,e){var M=e(76308),k=e(55512);ee.exports=function(o,T,_,p,s){s||(s={}),s.isContour=!0;var t=k(o,T,_,p,s);return t&&t.forEach(function(i){var r=i.trace;r.contours.type==="constraint"&&(r.fillcolor&&M.opacity(r.fillcolor)?i.color=M.addOpacity(r.fillcolor,1):r.contours.showlines&&M.opacity(r.line.color)&&(i.color=M.addOpacity(r.line.color,1)))}),t}},66240:function(ee,R,e){ee.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(ee,R,e){var M=e(3400);ee.exports=function(k,o,T,_){if(_||(_={}),k("contours.showlabels")){var p=o.font;M.coerceFont(k,"contours.labelfont",p,{overrideDflt:{color:T}}),k("contours.labelformat")}_.hasHover!==!1&&k("zhoverformat")}},41076:function(ee,R,e){var M=e(33428),k=e(8932),o=e(46960);ee.exports=function(T){var _=T.contours,p=_.start,s=o(_),t=_.size||1,i=Math.floor((s-p)/t)+1,r=_.coloring==="lines"?0:1,n=k.extractOpts(T);isFinite(t)||(t=1,i=1);var a,l,u=n.reversescale?k.flipScale(n.colorscale):n.colorscale,h=u.length,c=new Array(h),x=new Array(h),d=n.min,v=n.max;if(_.coloring==="heatmap"){for(l=0;l<h;l++)a=u[l],c[l]=a[0]*(v-d)+d,x[l]=a[1];var g=M.extent([d,v,_.start,_.start+t*(i-1)]),y=g[d<v?0:1],m=g[d<v?1:0];y!==d&&(c.splice(0,0,y),x.splice(0,0,x[0])),m!==v&&(c.push(m),x.push(x[x.length-1]))}else{var b=T._input&&typeof T._input.zmin=="number"&&typeof T._input.zmax=="number";for(b&&(p<=d||s>=v)&&(p<=d&&(p=d),s>=v&&(s=v),i=Math.floor((s-p)/t)+1,r=0),l=0;l<h;l++)a=u[l],c[l]=(a[0]*(i+r-1)-r/2)*t+p,x[l]=a[1];(b||T.autocontour)&&(c[0]>d&&(c.unshift(d),x.unshift(x[0])),c[c.length-1]<v&&(c.push(v),x.push(x[x.length-1])))}return k.makeColorScaleFunc({domain:c,range:x},{noNumericCheck:!0})}},72424:function(ee,R,e){var M=e(93252);function k(o,T){var _=(T[0][0]>o?0:1)+(T[0][1]>o?0:2)+(T[1][1]>o?0:4)+(T[1][0]>o?0:8);return _===5||_===10?o>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?_===5?713:1114:_===5?104:208:_===15?0:_}ee.exports=function(o){var T,_,p,s,t,i,r,n,a,l=o[0].z,u=l.length,h=l[0].length,c=u===2||h===2;for(_=0;_<u-1;_++)for(s=[],_===0&&(s=s.concat(M.BOTTOMSTART)),_===u-2&&(s=s.concat(M.TOPSTART)),T=0;T<h-1;T++)for(p=s.slice(),T===0&&(p=p.concat(M.LEFTSTART)),T===h-2&&(p=p.concat(M.RIGHTSTART)),t=T+","+_,i=[[l[_][T],l[_][T+1]],[l[_+1][T],l[_+1][T+1]]],a=0;a<o.length;a++)(r=k((n=o[a]).level,i))&&(n.crossings[t]=r,p.indexOf(r)!==-1&&(n.starts.push([T,_]),c&&p.indexOf(r,p.indexOf(r)+1)!==-1&&n.starts.push([T,_])))}},23676:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616),T=e(8932),_=e(72736),p=e(54460),s=e(78344),t=e(41420),i=e(72424),r=e(88748),n=e(61512),a=e(82172),l=e(56008),u=e(93252),h=u.LABELOPTIMIZER;function c(v,g){var y,m,b,f,S,w,E,O="",C=0,P=v.edgepaths.map(function(F,j){return j}),D=!0;function U(F){return Math.abs(F[1]-g[2][1])<.01}function I(F){return Math.abs(F[0]-g[0][0])<.01}function N(F){return Math.abs(F[0]-g[2][0])<.01}for(;P.length;){for(w=o.smoothopen(v.edgepaths[C],v.smoothing),O+=D?w:w.replace(/^M/,"L"),P.splice(P.indexOf(C),1),y=v.edgepaths[C][v.edgepaths[C].length-1],f=-1,b=0;b<4;b++){if(!y){k.log("Missing end?",C,v);break}for(E=y,Math.abs(E[1]-g[0][1])<.01&&!N(y)?m=g[1]:I(y)?m=g[0]:U(y)?m=g[3]:N(y)&&(m=g[2]),S=0;S<v.edgepaths.length;S++){var W=v.edgepaths[S][0];Math.abs(y[0]-m[0])<.01?Math.abs(y[0]-W[0])<.01&&(W[1]-y[1])*(m[1]-W[1])>=0&&(m=W,f=S):Math.abs(y[1]-m[1])<.01?Math.abs(y[1]-W[1])<.01&&(W[0]-y[0])*(m[0]-W[0])>=0&&(m=W,f=S):k.log("endpt to newendpt is not vert. or horz.",y,m,W)}if(y=m,f>=0)break;O+="L"+m}if(f===v.edgepaths.length){k.log("unclosed perimeter path");break}C=f,(D=P.indexOf(C)===-1)&&(C=P[0],O+="Z")}for(C=0;C<v.paths.length;C++)O+=o.smoothclosed(v.paths[C],v.smoothing);return O}function x(v,g,y,m){var b=g.width/2,f=g.height/2,S=v.x,w=v.y,E=v.theta,O=Math.cos(E)*b,C=Math.sin(E)*b,P=(S>m.center?m.right-S:S-m.left)/(O+Math.abs(Math.sin(E)*f)),D=(w>m.middle?m.bottom-w:w-m.top)/(Math.abs(C)+Math.cos(E)*f);if(P<1||D<1)return 1/0;var U=h.EDGECOST*(1/(P-1)+1/(D-1));U+=h.ANGLECOST*E*E;for(var I=S-O,N=w-C,W=S+O,F=w+C,j=0;j<y.length;j++){var H=y[j],te=Math.cos(H.theta)*H.width/2,Q=Math.sin(H.theta)*H.width/2,$=2*k.segmentDistance(I,N,W,F,H.x-te,H.y-Q,H.x+te,H.y+Q)/(g.height+H.height),K=H.level===g.level,X=K?h.SAMELEVELDISTANCE:1;if($<=X)return 1/0;U+=h.NEIGHBORCOST*(K?h.SAMELEVELFACTOR:1)/($-X)}return U}function d(v){var g,y,m=v.trace._emptypoints,b=[],f=v.z.length,S=v.z[0].length,w=[];for(g=0;g<S;g++)w.push(1);for(g=0;g<f;g++)b.push(w.slice());for(g=0;g<m.length;g++)b[(y=m[g])[0]][y[1]]=0;return v.zmask=b,b}R.plot=function(v,g,y,m){var b=g.xaxis,f=g.yaxis;k.makeTraceGroups(m,y,"contour").each(function(S){var w=M.select(this),E=S[0],O=E.trace,C=E.x,P=E.y,D=O.contours,U=n(D,g,E),I=k.ensureSingle(w,"g","heatmapcoloring"),N=[];D.coloring==="heatmap"&&(N=[S]),t(v,g,N,I),i(U),r(U);var W=b.c2p(C[0],!0),F=b.c2p(C[C.length-1],!0),j=f.c2p(P[0],!0),H=f.c2p(P[P.length-1],!0),te=[[W,H],[F,H],[F,j],[W,j]],Q=U;D.type==="constraint"&&(Q=a(U,D._operation)),function($,K,X){var Y=k.ensureSingle($,"g","contourbg").selectAll("path").data(X.coloring==="fill"?[0]:[]);Y.enter().append("path"),Y.exit().remove(),Y.attr("d","M"+K.join("L")+"Z").style("stroke","none")}(w,te,D),function($,K,X,Y){var re=Y.coloring==="fill"||Y.type==="constraint"&&Y._operation!=="=",se="M"+X.join("L")+"Z";re&&l(K,Y);var ae=k.ensureSingle($,"g","contourfill").selectAll("path").data(re?K:[]);ae.enter().append("path"),ae.exit().remove(),ae.each(function(ce){var fe=(ce.prefixBoundary?se:"")+c(ce,X);fe?M.select(this).attr("d",fe).style("stroke","none"):M.select(this).remove()})}(w,Q,te,D),function($,K,X,Y,re){var se=X._context.staticPlot,ae=k.ensureSingle($,"g","contourlines"),ce=re.showlines!==!1,fe=re.showlabels,he=ce&&fe,ve=R.createLines(ae,ce||fe,K,se),ye=R.createLineClip(ae,he,X,Y.trace.uid),me=$.selectAll("g.contourlabels").data(fe?[0]:[]);if(me.exit().remove(),me.enter().append("g").classed("contourlabels",!0),fe){var Me=[],Pe=[];k.clearLocationCache();var ge=R.labelFormatter(X,Y),oe=o.tester.append("text").attr("data-notex",1).call(o.font,re.labelfont),ie=K[0].xaxis,de=K[0].yaxis,Se=ie._length,_e=de._length,we=ie.range,Ae=de.range,Oe=k.aggNums(Math.min,null,Y.x),ze=k.aggNums(Math.max,null,Y.x),pe=k.aggNums(Math.min,null,Y.y),be=k.aggNums(Math.max,null,Y.y),ke=Math.max(ie.c2p(Oe,!0),0),Ie=Math.min(ie.c2p(ze,!0),Se),Ee=Math.max(de.c2p(be,!0),0),Be=Math.min(de.c2p(pe,!0),_e),Ve={};we[0]<we[1]?(Ve.left=ke,Ve.right=Ie):(Ve.left=Ie,Ve.right=ke),Ae[0]<Ae[1]?(Ve.top=Ee,Ve.bottom=Be):(Ve.top=Be,Ve.bottom=Ee),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,Me.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var Ze=Math.sqrt(Se*Se+_e*_e),rt=u.LABELDISTANCE*Ze/Math.max(1,K.length/u.LABELINCREASE);ve.each(function(it){var dt=R.calcTextOpts(it.level,ge,oe,X);M.select(this).selectAll("path").each(function(){var vt=k.getVisibleSegment(this,Ve,dt.height/2);if(vt&&!(vt.len<(dt.width+dt.height)*u.LABELMIN))for(var ht=Math.min(Math.ceil(vt.len/rt),u.LABELMAX),Qe=0;Qe<ht;Qe++){var Je=R.findBestTextLocation(this,vt,dt,Pe,Ve);if(!Je)break;R.addLabelData(Je,dt,Pe,Me)}})}),oe.remove(),R.drawLabels(me,Pe,X,ye,he?Me:null)}fe&&!ce&&ve.remove()}(w,U,v,E,D),function($,K,X,Y,re){var se=Y.trace,ae=X._fullLayout._clips,ce="clip"+se.uid,fe=ae.selectAll("#"+ce).data(se.connectgaps?[]:[0]);if(fe.enter().append("clipPath").classed("contourclip",!0).attr("id",ce),fe.exit().remove(),se.connectgaps===!1){var he={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:K.xaxis,yaxis:K.yaxis,x:Y.x,y:Y.y,z:d(Y),smoothing:0};i([he]),r([he]),l([he],{type:"levels"}),k.ensureSingle(fe,"path","").attr("d",(he.prefixBoundary?"M"+re.join("L")+"Z":"")+c(he,re))}else ce=null;o.setClipUrl($,ce,X)}(w,g,v,E,te)})},R.createLines=function(v,g,y,m){var b=y[0].smoothing,f=v.selectAll("g.contourlevel").data(g?y:[]);if(f.exit().remove(),f.enter().append("g").classed("contourlevel",!0),g){var S=f.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return o.smoothopen(E,b)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke");var w=f.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return o.smoothclosed(E,b)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke")}return f},R.createLineClip=function(v,g,y,m){var b=g?"clipline"+m:null,f=y._fullLayout._clips.selectAll("#"+b).data(g?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",b),o.setClipUrl(v,b,y),f},R.labelFormatter=function(v,g){var y=v._fullLayout,m=g.trace,b=m.contours,f={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(b.labelformat)f.tickformat=b.labelformat,s(f,y);else{var S=T.extractOpts(m);if(S&&S.colorbar&&S.colorbar._axis)f=S.colorbar._axis;else{if(b.type==="constraint"){var w=b.value;k.isArrayOrTypedArray(w)?f.range=[w[0],w[w.length-1]]:f.range=[w,w]}else f.range=[b.start,b.end],f.nticks=(b.end-b.start)/b.size;f.range[0]===f.range[1]&&(f.range[1]+=f.range[0]||1),f.nticks||(f.nticks=1e3),s(f,y),p.prepTicks(f),f._tmin=null,f._tmax=null}}return function(E){return p.tickText(f,E).text}},R.calcTextOpts=function(v,g,y,m){var b=g(v);y.text(b).call(_.convertToTspans,m);var f=y.node(),S=o.bBox(f,!0);return{text:b,width:S.width,height:S.height,fontSize:+f.style["font-size"].replace("px",""),level:v,dy:(S.top+S.bottom)/2}},R.findBestTextLocation=function(v,g,y,m,b){var f,S,w,E,O,C=y.width;g.isClosed?(S=g.len/h.INITIALSEARCHPOINTS,f=g.min+S/2,w=g.max):(S=(g.len-C)/(h.INITIALSEARCHPOINTS+1),f=g.min+S+C/2,w=g.max-(S+C)/2);for(var P=1/0,D=0;D<h.ITERATIONS;D++){for(var U=f;U<w;U+=S){var I=k.getTextLocation(v,g.total,U,C),N=x(I,y,m,b);N<P&&(P=N,O=I,E=U)}if(P>2*h.MAXCOST)break;D&&(S/=2),w=(f=E-S/2)+1.5*S}if(P<=h.MAXCOST)return O},R.addLabelData=function(v,g,y,m){var b=g.fontSize,f=g.width+b/3,S=Math.max(0,g.height-b/3),w=v.x,E=v.y,O=v.theta,C=Math.sin(O),P=Math.cos(O),D=function(I,N){return[w+I*P-N*C,E+I*C+N*P]},U=[D(-f/2,-S/2),D(-f/2,S/2),D(f/2,S/2),D(f/2,-S/2)];y.push({text:g.text,x:w,y:E,dy:g.dy,theta:O,level:g.level,width:f,height:S}),m.push(U)},R.drawLabels=function(v,g,y,m,b){var f=v.selectAll("text").data(g,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var O=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;M.select(this).text(E.text).attr({x:O,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+O+" "+C+")"}).call(_.convertToTspans,y)}),b){for(var S="",w=0;w<b.length;w++)S+="M"+b[w].join("L")+"Z";k.ensureSingle(m,"path","").attr("d",S)}}},54444:function(ee,R,e){var M=e(54460),k=e(3400);function o(T,_,p){var s={type:"linear",range:[T,_]};return M.autoTicks(s,(_-T)/(p||15)),s}ee.exports=function(T,_){var p=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,_)),(T.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,_));var i=o(s,t,T.ncontours);p.size=i.dtick,p.start=M.tickFirst(i),i.range.reverse(),p.end=M.tickFirst(i),p.start===s&&(p.start+=p.size),p.end===t&&(p.end-=p.size),p.start>p.end&&(p.start=p.end=(p.start+p.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:p.start,end:p.end,size:p.size}),T._input.autocontour=!0}else if(p.type!=="constraint"){var r,n=p.start,a=p.end,l=T._input.contours;n>a&&(p.start=l.start=a,a=p.end=l.end=n,n=p.start),p.size>0||(r=n===a?1:o(n,a,T.ncontours).dtick,l.size=p.size=r)}}},52440:function(ee,R,e){var M=e(33428),k=e(43616),o=e(41648),T=e(41076);ee.exports=function(_){var p=M.select(_).selectAll("g.contour");p.style("opacity",function(s){return s[0].trace.opacity}),p.each(function(s){var t=M.select(this),i=s[0].trace,r=i.contours,n=i.line,a=r.size||1,l=r.start,u=r.type==="constraint",h=!u&&r.coloring==="lines",c=!u&&r.coloring==="fill",x=h||c?T(i):null;t.selectAll("g.contourlevel").each(function(g){M.select(this).selectAll("path").call(k.lineGroupStyle,n.width,h?x(g.level):n.color,n.dash)});var d=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(g){k.font(M.select(this),{weight:d.weight,style:d.style,variant:d.variant,textcase:d.textcase,lineposition:d.lineposition,shadow:d.shadow,family:d.family,size:d.size,color:d.color||(h?x(g.level):n.color)})}),u)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(c){var v;t.selectAll("g.contourfill path").style("fill",function(g){return v===void 0&&(v=g.level),x(g.level+.5*a)}),v===void 0&&(v=l),t.selectAll("g.contourbg path").style("fill",x(v-.5*a))}}),o(_)}},97680:function(ee,R,e){var M=e(27260),k=e(17428);ee.exports=function(o,T,_,p,s){var t,i=_("contours.coloring"),r="";i==="fill"&&(t=_("contours.showlines")),t!==!1&&(i!=="lines"&&(r=_("line.color","#000")),_("line.width",.5),_("line.dash")),i!=="none"&&(o.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,M(o,T,p,_,{prefix:"",cLetter:"z"})),_("line.smoothing"),k(_,p,r,s)}},37960:function(ee,R,e){var M=e(83328),k=e(67104),o=e(49084),T=e(92880).extendFlat,_=k.contours;ee.exports=T({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:_.type,start:_.start,end:_.end,size:_.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:_.showlines,showlabels:_.showlabels,labelfont:_.labelfont,labelformat:_.labelformat,operation:_.operation,value:_.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},zorder:k.zorder,transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},30572:function(ee,R,e){var M=e(47128),k=e(3400),o=e(2872),T=e(26136),_=e(70448),p=e(11240),s=e(35744),t=e(3252),i=e(50948),r=e(54444);ee.exports=function(n,a){var l=a._carpetTrace=i(n,a);if(l&&l.visible&&l.visible!=="legendonly"){if(!a.a||!a.b){var u=n.data[l.index],h=n.data[a.index];h.a||(h.a=u.a),h.b||(h.b=u.b),t(h,a,a._defaultColor,n._fullLayout)}var c=function(x,d){var v,g,y,m,b,f,S,w=d._carpetTrace,E=w.aaxis,O=w.baxis;E._minDtick=0,O._minDtick=0,k.isArray1D(d.z)&&o(d,E,O,"a","b",["z"]),v=d._a=d._a||d.a,m=d._b=d._b||d.b,v=v?E.makeCalcdata(d,"_a"):[],m=m?O.makeCalcdata(d,"_b"):[],g=d.a0||0,y=d.da||1,b=d.b0||0,f=d.db||1,S=d._z=T(d._z||d.z,d.transpose),d._emptypoints=p(S),_(S,d._emptypoints);var C=k.maxRowLength(S),P=d.xtype==="scaled"?"":v,D=s(d,P,g,y,C,E),U=d.ytype==="scaled"?"":m,I={a:D,b:s(d,U,b,f,S.length,O),z:S};return d.contours.type==="levels"&&d.contours.coloring!=="none"&&M(x,d,{vals:S,containerStr:"",cLetter:"z"}),[I]}(n,a);return r(a,a._z),c}}},3252:function(ee,R,e){var M=e(3400),k=e(51264),o=e(37960),T=e(95536),_=e(84952),p=e(97680);ee.exports=function(s,t,i,r){function n(a,l){return M.coerce(s,t,o,a,l)}if(n("carpet"),s.a&&s.b){if(!k(s,t,n,r,"a","b"))return void(t.visible=!1);n("text"),n("contours.type")==="constraint"?T(s,t,n,r,i,{hasHover:!1}):(_(s,t,n,function(a){return M.coerce2(s,t,o,a)}),p(s,t,n,r,{hasHover:!1}))}else t._defaultColor=i,t._length=null;n("zorder")}},40448:function(ee,R,e){ee.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(ee,R,e){var M=e(33428),k=e(87072),o=e(53416),T=e(43616),_=e(3400),p=e(72424),s=e(88748),t=e(23676),i=e(93252),r=e(82172),n=e(61512),a=e(56008),l=e(50948),u=e(77712);function h(d,v,g){var y=d.getPointAtLength(v),m=d.getPointAtLength(g),b=m.x-y.x,f=m.y-y.y,S=Math.sqrt(b*b+f*f);return[b/S,f/S]}function c(d){var v=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return[d[0]/v,d[1]/v]}function x(d,v){var g=Math.abs(d[0]*v[0]+d[1]*v[1]);return Math.sqrt(1-g*g)/g}ee.exports=function(d,v,g,y){var m=v.xaxis,b=v.yaxis;_.makeTraceGroups(y,g,"contour").each(function(f){var S=M.select(this),w=f[0],E=w.trace,O=E._carpetTrace=l(d,E),C=d.calcdata[O.index][0];if(O.visible&&O.visible!=="legendonly"){var P=w.a,D=w.b,U=E.contours,I=n(U,v,w),N=U.type==="constraint",W=U._operation,F=N?W==="="?"lines":"fill":U.coloring,j=[[P[0],D[D.length-1]],[P[P.length-1],D[D.length-1]],[P[P.length-1],D[0]],[P[0],D[0]]];p(I);var H=1e-8*(P[P.length-1]-P[0]),te=1e-8*(D[D.length-1]-D[0]);s(I,H,te);var Q,$,K,X,Y=I;U.type==="constraint"&&(Y=r(I,W)),function(ce,fe){var he,ve,ye,me,Me,Pe,ge,oe,ie;for(he=0;he<ce.length;he++){for(Me=(me=ce[he]).pedgepaths=[],Pe=me.ppaths=[],ve=0;ve<me.edgepaths.length;ve++){for(ie=me.edgepaths[ve],ge=[],ye=0;ye<ie.length;ye++)ge[ye]=fe(ie[ye]);Me.push(ge)}for(ve=0;ve<me.paths.length;ve++){for(ie=me.paths[ve],oe=[],ye=0;ye<ie.length;ye++)oe[ye]=fe(ie[ye]);Pe.push(oe)}}}(I,ae);var re=[];for(X=C.clipsegments.length-1;X>=0;X--)Q=C.clipsegments[X],$=k([],Q.x,m.c2p),K=k([],Q.y,b.c2p),$.reverse(),K.reverse(),re.push(o($,K,Q.bicubic));var se="M"+re.join("L")+"Z";(function(ce,fe,he,ve,ye,me){var Me,Pe,ge,oe,ie=_.ensureSingle(ce,"g","contourbg").selectAll("path").data(me!=="fill"||ye?[]:[0]);ie.enter().append("path"),ie.exit().remove();var de=[];for(oe=0;oe<fe.length;oe++)Me=fe[oe],Pe=k([],Me.x,he.c2p),ge=k([],Me.y,ve.c2p),de.push(o(Pe,ge,Me.bicubic));ie.attr("d","M"+de.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,m,b,N,F),function(ce,fe,he,ve,ye,me,Me,Pe,ge,oe,ie){var de=oe==="fill";de&&a(ye,ce.contours);var Se=_.ensureSingle(fe,"g","contourfill").selectAll("path").data(de?ye:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(_e){var we=(_e.prefixBoundary?ie:"")+function(Ae,Oe,ze,pe,be,ke,Ie,Ee){var Be,Ve,Ze,rt,it,dt,vt,ht="",Qe=Oe.edgepaths.map(function(tt,Re){return Re}),Je=!0,Tt=1e-4*Math.abs(ze[0][0]-ze[2][0]),Ot=1e-4*Math.abs(ze[0][1]-ze[2][1]);function Pt(tt){return Math.abs(tt[1]-ze[0][1])<Ot}function Mt(tt){return Math.abs(tt[1]-ze[2][1])<Ot}function He(tt){return Math.abs(tt[0]-ze[0][0])<Tt}function Ye(tt){return Math.abs(tt[0]-ze[2][0])<Tt}function Ne(tt,Re){var Fe,nt,Ge,ct,pt="";for(Pt(tt)&&!Ye(tt)||Mt(tt)&&!He(tt)?(ct=be.aaxis,Ge=u(be,ke,[tt[0],Re[0]],.5*(tt[1]+Re[1]))):(ct=be.baxis,Ge=u(be,ke,.5*(tt[0]+Re[0]),[tt[1],Re[1]])),Fe=1;Fe<Ge.length;Fe++)for(pt+=ct.smoothing?"C":"L",nt=0;nt<Ge[Fe].length;nt++){var gt=Ge[Fe][nt];pt+=[Ie.c2p(gt[0]),Ee.c2p(gt[1])]+" "}return pt}for(Be=0,Ve=null;Qe.length;){var We=Oe.edgepaths[Be][0];for(Ve&&(ht+=Ne(Ve,We)),vt=T.smoothopen(Oe.edgepaths[Be].map(pe),Oe.smoothing),ht+=Je?vt:vt.replace(/^M/,"L"),Qe.splice(Qe.indexOf(Be),1),Ve=Oe.edgepaths[Be][Oe.edgepaths[Be].length-1],it=-1,rt=0;rt<4;rt++){if(!Ve){_.log("Missing end?",Be,Oe);break}for(Pt(Ve)&&!Ye(Ve)?Ze=ze[1]:He(Ve)?Ze=ze[0]:Mt(Ve)?Ze=ze[3]:Ye(Ve)&&(Ze=ze[2]),dt=0;dt<Oe.edgepaths.length;dt++){var ot=Oe.edgepaths[dt][0];Math.abs(Ve[0]-Ze[0])<Tt?Math.abs(Ve[0]-ot[0])<Tt&&(ot[1]-Ve[1])*(Ze[1]-ot[1])>=0&&(Ze=ot,it=dt):Math.abs(Ve[1]-Ze[1])<Ot?Math.abs(Ve[1]-ot[1])<Ot&&(ot[0]-Ve[0])*(Ze[0]-ot[0])>=0&&(Ze=ot,it=dt):_.log("endpt to newendpt is not vert. or horz.",Ve,Ze,ot)}if(it>=0)break;ht+=Ne(Ve,Ze),Ve=Ze}if(it===Oe.edgepaths.length){_.log("unclosed perimeter path");break}Be=it,(Je=Qe.indexOf(Be)===-1)&&(Be=Qe[0],ht+=Ne(Ve,Ze)+"Z",Ve=null)}for(Be=0;Be<Oe.paths.length;Be++)ht+=T.smoothclosed(Oe.paths[Be].map(pe),Oe.smoothing);return ht}(0,_e,me,Me,Pe,ge,he,ve);we?M.select(this).attr("d",we).style("stroke","none"):M.select(this).remove()})}(E,S,m,b,Y,j,ae,O,C,F,se),function(ce,fe,he,ve,ye,me,Me){var Pe=he._context.staticPlot,ge=_.ensureSingle(ce,"g","contourlines"),oe=ye.showlines!==!1,ie=ye.showlabels,de=oe&&ie,Se=t.createLines(ge,oe||ie,fe,Pe),_e=t.createLineClip(ge,de,he,ve.trace.uid),we=ce.selectAll("g.contourlabels").data(ie?[0]:[]);if(we.exit().remove(),we.enter().append("g").classed("contourlabels",!0),ie){var Ae=me.xaxis,Oe=me.yaxis,ze=Ae._length,pe=Oe._length,be=[[[0,0],[ze,0],[ze,pe],[0,pe]]],ke=[];_.clearLocationCache();var Ie=t.labelFormatter(he,ve),Ee=T.tester.append("text").attr("data-notex",1).call(T.font,ye.labelfont),Be={left:0,right:ze,center:ze/2,top:0,bottom:pe,middle:pe/2},Ve=Math.sqrt(ze*ze+pe*pe),Ze=i.LABELDISTANCE*Ve/Math.max(1,fe.length/i.LABELINCREASE);Se.each(function(rt){var it=t.calcTextOpts(rt.level,Ie,Ee,he);M.select(this).selectAll("path").each(function(dt){var vt=this,ht=_.getVisibleSegment(vt,Be,it.height/2);if(ht&&(function(Ot,Pt,Mt,He,Ye,Ne){for(var We,ot=0;ot<Mt.pedgepaths.length;ot++)Pt===Mt.pedgepaths[ot]&&(We=Mt.edgepaths[ot]);if(We){var tt=Ye.a[0],Re=Ye.a[Ye.a.length-1],Fe=Ye.b[0],nt=Ye.b[Ye.b.length-1],Ge=h(Ot,0,1),ct=h(Ot,He.total,He.total-1),pt=ut(We[0],Ge),gt=He.total-ut(We[We.length-1],ct);He.min<pt&&(He.min=pt),He.max>gt&&(He.max=gt),He.len=He.max-He.min}function ut(kt,mt){var At,Lt=0,Ct=.1;return(Math.abs(kt[0]-tt)<Ct||Math.abs(kt[0]-Re)<Ct)&&(At=c(Ye.dxydb_rough(kt[0],kt[1],Ct)),Lt=Math.max(Lt,Ne*x(mt,At)/2)),(Math.abs(kt[1]-Fe)<Ct||Math.abs(kt[1]-nt)<Ct)&&(At=c(Ye.dxyda_rough(kt[0],kt[1],Ct)),Lt=Math.max(Lt,Ne*x(mt,At)/2)),Lt}}(vt,dt,rt,ht,Me,it.height),!(ht.len<(it.width+it.height)*i.LABELMIN)))for(var Qe=Math.min(Math.ceil(ht.len/Ze),i.LABELMAX),Je=0;Je<Qe;Je++){var Tt=t.findBestTextLocation(vt,ht,it,ke,Be);if(!Tt)break;t.addLabelData(Tt,it,ke,be)}})}),Ee.remove(),t.drawLabels(we,ke,he,_e,de?be:null)}ie&&!oe&&Se.remove()}(S,I,d,w,U,v,O),T.setClipUrl(S,O._clipPathId,d)}function ae(ce){var fe=O.ab2xy(ce[0],ce[1],!0);return[m.c2p(fe[0]),b.c2p(fe[1])]}})}},33928:function(ee,R,e){var M=e(49084),k=e(21776).Ks,o=e(45464),T=e(31512),_=e(92880).extendFlat;ee.exports=_({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:_({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:_({},o.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(ee,R,e){var M=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(47128),_=e(3400)._;ee.exports=function(p,s){for(var t=s._length,i=new Array(t),r=s.z,n=k(r)&&r.length,a=0;a<t;a++){var l=i[a]={},u=s.lon[a],h=s.lat[a];if(l.lonlat=M(u)&&M(h)?[+u,+h]:[o,o],n){var c=r[a];l.z=M(c)?c:o}}return T(p,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:_(p,"lat:")+" ",lon:_(p,"lon:")+" "}}),i}},4629:function(ee,R,e){var M=e(38248),k=e(3400),o=e(76308),T=e(8932),_=e(39032).BADNUM,p=e(44808).makeBlank;ee.exports=function(s){var t=s[0].trace,i=t.visible===!0&&t._length!==0,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:p()};if(!i)return r;var n,a=[],l=t.z,u=t.radius,h=k.isArrayOrTypedArray(l)&&l.length,c=k.isArrayOrTypedArray(u);for(n=0;n<s.length;n++){var x=s[n],d=x.lonlat;if(d[0]!==_){var v={};if(h){var g=x.z;v.z=g!==_?g:0}c&&(v.r=M(u[n])&&u[n]>0?+u[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:v})}}var y=T.extractOpts(t),m=y.reversescale?T.flipScale(y.colorscale):y.colorscale,b=m[0][1],f=["interpolate",["linear"],["heatmap-density"],0,o.opacity(b)<1?b:o.addOpacity(b,0)];for(n=1;n<m.length;n++)f.push(m[n][0],m[n][1]);var S=["interpolate",["linear"],["get","z"],y.min,0,y.max,1];return k.extendFlat(r.heatmap.paint,{"heatmap-weight":h?S:1/(y.max-y.min),"heatmap-color":f,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},97664:function(ee,R,e){var M=e(3400),k=e(27260),o=e(33928);ee.exports=function(T,_,p,s){function t(a,l){return M.coerce(T,_,o,a,l)}var i=t("lon")||[],r=t("lat")||[],n=Math.min(i.length,r.length);n?(_._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,_,s,t,{prefix:"",cLetter:"z"})):_.visible=!1}},96176:function(ee){ee.exports=function(R,e){return R.lon=e.lon,R.lat=e.lat,R.z=e.z,R}},25336:function(ee,R,e){var M=e(54460),k=e(63312).hoverPoints,o=e(63312).getExtraText;ee.exports=function(T,_,p){var s=k(T,_,p);if(s){var t=s[0],i=t.cd,r=i[0].trace,n=i[t.index];if(delete t.color,"z"in n){var a=t.subplot.mockAxis;t.z=n.z,t.zLabel=M.tickText(a,a.c2l(n.z),"hover").text}return t.extraText=o(r,n,i[0].t.labels),[t]}}},15088:function(ee,R,e){ee.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(M,k){for(var o=k.getMapLayers(),T=0;T<o.length;T++){var _=o[T],p=_.id;if(_.type==="symbol"&&typeof p=="string"&&p.indexOf("plotly-")===-1)return p}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(ee,R,e){var M=e(4629),k=e(47552).traceLayerPrefix;function o(_,p){this.type="densitymapbox",this.subplot=_,this.uid=p,this.sourceId="source-"+p,this.layerList=[["heatmap",k+p+"-heatmap"]],this.below=null}var T=o.prototype;T.update=function(_){var p=this.subplot,s=this.layerList,t=M(_),i=p.belowLookup["trace-"+this.uid];p.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var r=0;r<s.length;r++){var n=s[r],a=n[0],l=n[1],u=t[a];p.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&p.setOptions(l,"setPaintProperty",u.paint)}},T._addLayers=function(_,p){for(var s=this.subplot,t=this.layerList,i=this.sourceId,r=0;r<t.length;r++){var n=t[r],a=n[0],l=_[a];s.addLayer({type:a,id:n[1],source:i,layout:l.layout,paint:l.paint},p)}},T._removeLayers=function(){for(var _=this.subplot.map,p=this.layerList,s=p.length-1;s>=0;s--)_.removeLayer(p[s][1])},T.dispose=function(){var _=this.subplot.map;this._removeLayers(),_.removeSource(this.sourceId)},ee.exports=function(_,p){var s=p[0].trace,t=new o(_,s.uid),i=t.sourceId,r=M(p),n=t.below=_.belowLookup["trace-"+s.uid];return _.map.addSource(i,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},74248:function(ee,R,e){var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.hovertext,k,"htx");var _=o.marker;if(_){M.mergeArray(_.opacity,k,"mo"),M.mergeArray(_.color,k,"mc");var p=_.line;p&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"))}}},20088:function(ee,R,e){var M,k=e(20832),o=e(52904).line,T=e(45464),_=e(29736).axisHoverFormat,p=e(21776).Ks,s=e(21776).Gw,t=e(74732),i=e(92880).extendFlat,r=e(76308);ee.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),hovertext:k.hovertext,hovertemplate:p({},{keys:t.eventDataKeys}),hoverinfo:i({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(M=i({},k.marker),delete M.pattern,delete M.cornerradius,M),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},o.color,{dflt:r.defaultLine}),width:i({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,zorder:k.zorder}},23096:function(ee,R,e){var M=e(54460),k=e(1220),o=e(74248),T=e(4500),_=e(39032).BADNUM;function p(s){return s===_?0:s}ee.exports=function(s,t){var i,r,n,a,l,u,h,c,x=M.getFromId(s,t.xaxis||"x"),d=M.getFromId(s,t.yaxis||"y");t.orientation==="h"?(i=x.makeCalcdata(t,"x"),n=d.makeCalcdata(t,"y"),a=k(t,d,"y",n),l=!!t.yperiodalignment,u="y"):(i=d.makeCalcdata(t,"y"),n=x.makeCalcdata(t,"x"),a=k(t,x,"x",n),l=!!t.xperiodalignment,u="x"),r=a.vals;var v,g=Math.min(r.length,i.length),y=new Array(g);for(t._base=[],h=0;h<g;h++){i[h]<0&&(i[h]=_);var m=!1;i[h]!==_&&h+1<g&&i[h+1]!==_&&(m=!0),c=y[h]={p:r[h],s:i[h],cNext:m},t._base[h]=-.5*c.s,l&&(y[h].orig_p=n[h],y[h][u+"End"]=a.ends[h],y[h][u+"Start"]=a.starts[h]),t.ids&&(c.id=String(t.ids[h])),h===0&&(y[0].vTotal=0),y[0].vTotal+=p(c.s),c.begR=p(c.s)/p(y[0].s)}for(h=0;h<g;h++)(c=y[h]).s!==_&&(c.sumR=c.s/y[0].vTotal,c.difR=v!==void 0?c.s/v:1,v=c.s);return o(y,t),T(y,t),y}},74732:function(ee){ee.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(ee,R,e){var M=e(96376).setGroupPositions;ee.exports=function(k,o){var T,_,p=k._fullLayout,s=k._fullData,t=k.calcdata,i=o.xaxis,r=o.yaxis,n=[],a=[],l=[];for(_=0;_<s.length;_++){var u=s[_],h=u.orientation==="h";u.visible===!0&&u.xaxis===i._id&&u.yaxis===r._id&&u.type==="funnel"&&(T=t[_],h?l.push(T):a.push(T),n.push(T))}var c={mode:p.funnelmode,norm:p.funnelnorm,gap:p.funnelgap,groupgap:p.funnelgroupgap};for(M(k,i,r,a,c),M(k,r,i,l,c),_=0;_<n.length;_++){T=n[_];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},45432:function(ee,R,e){var M=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),_=e(31147),p=e(20088),s=e(76308);ee.exports={supplyDefaults:function(t,i,r,n){function a(c,x){return M.coerce(t,i,p,c,x)}if(T(t,i,n,a)){_(t,i,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",i.y&&!i.x?"v":"h"),a("offset"),a("width");var l=a("text");a("hovertext"),a("hovertemplate");var u=a("textposition");o(t,i,n,a,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||a("textinfo",M.isArrayOrTypedArray(l)?"text+value":"value");var h=a("marker.color",r);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(c){var x=M.isArrayOrTypedArray(c)?"#000":c;return s.addOpacity(x,.5*s.opacity(x))}(h)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash"))),a("zorder")}else i.visible=!1},crossTraceDefaults:function(t,i){var r,n;function a(u){return M.coerce(n._input,n,p,u)}if(i.funnelmode==="group")for(var l=0;l<t.length;l++)r=(n=t[l])._input,k(r,n,i,a)}}},34580:function(ee){ee.exports=function(R,e){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(R.percentInitial=e.percentInitial),"percentPrevious"in e&&(R.percentPrevious=e.percentPrevious),"percentTotal"in e&&(R.percentTotal=e.percentTotal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},31488:function(ee,R,e){var M=e(76308).opacity,k=e(63400).hoverOnBars,o=e(3400).formatPercent;ee.exports=function(T,_,p,s,t){var i=k(T,_,p,s,t);if(i){var r=i.cd,n=r[0].trace,a=n.orientation==="h",l=r[i.index];i[(a?"x":"y")+"LabelVal"]=l.s,i.percentInitial=l.begR,i.percentInitialLabel=o(l.begR,1),i.percentPrevious=l.difR,i.percentPreviousLabel=o(l.difR,1),i.percentTotal=l.sumR,i.percentTotalLabel=o(l.sumR,1);var u=l.hi||n.hoverinfo,h=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",x=u.split("+"),d=function(v){return c||x.indexOf(v)!==-1};d("percent initial")&&h.push(i.percentInitialLabel+" of initial"),d("percent previous")&&h.push(i.percentPreviousLabel+" of previous"),d("percent total")&&h.push(i.percentTotalLabel+" of total")}return i.extraText=h.join("<br>"),i.color=function(v,g){var y=v.marker,m=g.mc||y.color,b=g.mlc||y.line.color,f=g.mlw||y.line.width;return M(m)?m:M(b)&&f?b:void 0}(n,l),[i]}}},94704:function(ee,R,e){ee.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(ee){ee.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(ee,R,e){var M=e(3400),k=e(7076);ee.exports=function(o,T,_){var p=!1;function s(r,n){return M.coerce(o,T,k,r,n)}for(var t=0;t<_.length;t++){var i=_[t];if(i.visible&&i.type==="funnel"){p=!0;break}}p&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},42200:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,_=e(98184),p=e(82744).clearMinTextSize;function s(t,i,r,n){var a=[],l=[],u=n?i:r,h=n?r:i;return a[0]=u.c2p(t.s0,!0),l[0]=h.c2p(t.p0,!0),a[1]=u.c2p(t.s1,!0),l[1]=h.c2p(t.p1,!0),a[2]=u.c2p(t.nextS0,!0),l[2]=h.c2p(t.nextP0,!0),a[3]=u.c2p(t.nextS1,!0),l[3]=h.c2p(t.nextP1,!0),n?[a,l]:[l,a]}ee.exports=function(t,i,r,n){var a=t._fullLayout;p("funnel",a),function(l,u,h,c){var x=u.xaxis,d=u.yaxis;k.makeTraceGroups(c,h,"trace bars").each(function(v){var g=M.select(this),y=v[0].trace,m=k.ensureSingle(g,"g","regions");if(y.connector&&y.connector.visible){var b=y.orientation==="h",f=m.selectAll("g.region").data(k.identity);f.enter().append("g").classed("region",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var O=s(w,x,d,b),C=O[0],P=O[1],D="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&C[2]!==T&&P[2]!==T&&C[3]!==T&&P[3]!==T&&(D+=b?"M"+C[0]+","+P[1]+"L"+C[2]+","+P[2]+"H"+C[3]+"L"+C[1]+","+P[1]+"Z":"M"+C[1]+","+P[1]+"L"+C[2]+","+P[3]+"V"+P[2]+"L"+C[1]+","+P[0]+"Z"),D===""&&(D="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",D).call(o.setClipUrl,u.layerClipId,l)}})}else m.remove()})}(t,i,r,n),function(l,u,h,c){var x=u.xaxis,d=u.yaxis;k.makeTraceGroups(c,h,"trace bars").each(function(v){var g=M.select(this),y=v[0].trace,m=k.ensureSingle(g,"g","lines");if(y.connector&&y.connector.visible&&y.connector.line.width){var b=y.orientation==="h",f=m.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var O=s(w,x,d,b),C=O[0],P=O[1],D="";C[3]!==void 0&&P[3]!==void 0&&(b?(D+="M"+C[0]+","+P[1]+"L"+C[2]+","+P[2],D+="M"+C[1]+","+P[1]+"L"+C[3]+","+P[2]):(D+="M"+C[1]+","+P[1]+"L"+C[2]+","+P[3],D+="M"+C[1]+","+P[0]+"L"+C[2]+","+P[2])),D===""&&(D="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",D).call(o.setClipUrl,u.layerClipId,l)}})}else m.remove()})}(t,i,r,n),_.plot(t,i,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},44544:function(ee,R,e){var M=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,_=e(60100),p=e(82744).resizeText,s=_.styleTextPoints;ee.exports={style:function(t,i,r){var n=r||M.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");p(t,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var l=M.select(this),u=a[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var c=u.marker;M.select(this).call(o.fill,h.mc||c.color).call(o.stroke,h.mlc||c.line.color).call(k.dashLine,c.line.dash,h.mlw||c.line.width).style("opacity",u.selectedpoints&&!h.selected?T:1)}}),s(l,u,t),l.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(o.fill,u.connector.fillcolor)}),l.selectAll(".lines").each(function(){var h=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},22332:function(ee,R,e){var M=e(74996),k=e(45464),o=e(86968).u,T=e(21776).Ks,_=e(21776).Gw,p=e(92880).extendFlat;ee.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:p({},M.marker.line.color,{dflt:null}),width:p({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:p({},M.scalegroup,{}),textinfo:p({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:_({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:p({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:p({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:p({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(ee,R,e){var M=e(7316);R.name="funnelarea",R.plot=function(k,o,T,_){M.plotBasePlot(R.name,k,o,T,_)},R.clean=function(k,o,T,_){M.cleanBasePlot(R.name,k,o,T,_)}},54e3:function(ee,R,e){var M=e(45768);ee.exports={calc:function(k,o){return M.calc(k,o)},crossTraceCalc:function(k){M.crossTraceCalc(k,{type:"funnelarea"})}}},92688:function(ee,R,e){var M=e(3400),k=e(22332),o=e(86968).Q,T=e(31508).handleText,_=e(74174).handleLabelsAndValues,p=e(74174).handleMarkerDefaults;ee.exports=function(s,t,i,r){function n(g,y){return M.coerce(s,t,k,g,y)}var a=n("labels"),l=n("values"),u=_(a,l),h=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),h){t._length=h,p(s,t,r,n),n("scalegroup");var c,x=n("text"),d=n("texttemplate");if(d||(c=n("textinfo",Array.isArray(x)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),d||c&&c!=="none"){var v=n("textposition");T(s,t,r,n,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else c==="none"&&n("textposition","none");o(t,r,n),n("title.text")&&(n("title.position"),M.coerceFont(n,"title.font",r.font)),n("aspectratio"),n("baseratio")}else t.visible=!1}},62396:function(ee,R,e){ee.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(ee,R,e){var M=e(85204).hiddenlabels;ee.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(ee,R,e){var M=e(3400),k=e(61280);ee.exports=function(o,T){function _(p,s){return M.coerce(o,T,k,p,s)}_("hiddenlabels"),_("funnelareacolorway",T.colorway),_("extendfunnelareacolors")}},39472:function(ee,R,e){var M=e(33428),k=e(43616),o=e(3400),T=o.strScale,_=o.strTranslate,p=e(72736),s=e(98184).toMoveInsideBar,t=e(82744),i=t.recordMinTextSize,r=t.clearMinTextSize,n=e(69656),a=e(37820),l=a.attachFxHandlers,u=a.determineInsideTextFont,h=a.layoutAreas,c=a.prerenderTitles,x=a.positionTitleOutside,d=a.formatSliceLabel;function v(g,y){return"l"+(y[0]-g[0])+","+(y[1]-g[1])}ee.exports=function(g,y){var m=g._context.staticPlot,b=g._fullLayout;r("funnelarea",b),c(y,g),h(y,b._size),o.makeTraceGroups(b._funnelarealayer,y,"trace").each(function(f){var S=M.select(this),w=f[0],E=w.trace;(function(O){if(O.length){var C=O[0],P=C.trace,D=P.aspectratio,U=P.baseratio;U>.999&&(U=.999);var I,N,W,F=Math.pow(U,2),j=C.vTotal,H=j,te=j*F/(1-F)/j,Q=[];for(Q.push(ge()),N=O.length-1;N>-1;N--)if(!(W=O[N]).hidden){var $=W.v/H;te+=$,Q.push(ge())}var K=1/0,X=-1/0;for(N=0;N<Q.length;N++)I=Q[N],K=Math.min(K,I[1]),X=Math.max(X,I[1]);for(N=0;N<Q.length;N++)Q[N][1]-=(X+K)/2;var Y=Q[Q.length-1][0],re=C.r,se=(X-K)/2,ae=re/Y,ce=re/se*D;for(C.r=ce*se,N=0;N<Q.length;N++)Q[N][0]*=ae,Q[N][1]*=ce;var fe,he,ve=[-(I=Q[0])[0],I[1]],ye=[I[0],I[1]],me=0;for(N=O.length-1;N>-1;N--)if(!(W=O[N]).hidden){var Me=Q[me+=1][0],Pe=Q[me][1];W.TL=[-Me,Pe],W.TR=[Me,Pe],W.BL=ve,W.BR=ye,W.pxmid=(fe=W.TR,he=W.BR,[.5*(fe[0]+he[0]),.5*(fe[1]+he[1])]),ve=W.TL,ye=W.TR}}function ge(){var oe,ie={x:oe=Math.sqrt(te),y:-oe};return[ie.x,ie.y]}})(f),S.each(function(){var O=M.select(this).selectAll("g.slice").data(f);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(P,D){if(P.hidden)M.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var U=w.cx,I=w.cy,N=M.select(this),W=N.selectAll("path.surface").data([P]);W.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),N.call(l,g,f);var F="M"+(U+P.TR[0])+","+(I+P.TR[1])+v(P.TR,P.BR)+v(P.BR,P.BL)+v(P.BL,P.TL)+"Z";W.attr("d",F),d(g,P,w);var j=n.castOption(E.textposition,P.pts),H=N.selectAll("g.slicetext").data(P.text&&j!=="none"?[0]:[]);H.enter().append("g").classed("slicetext",!0),H.exit().remove(),H.each(function(){var te=o.ensureSingle(M.select(this),"text","",function(ae){ae.attr("data-notex",1)}),Q=o.ensureUniformFontSize(g,u(E,P,b.font));te.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,Q).call(p.convertToTspans,g);var $,K,X,Y=k.bBox(te.node()),re=Math.min(P.BL[1],P.BR[1])+I,se=Math.max(P.TL[1],P.TR[1])+I;K=Math.max(P.TL[0],P.BL[0])+U,X=Math.min(P.TR[0],P.BR[0])+U,($=s(K,X,re,se,Y,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=Q.size,i(E.type,$,b),f[D].transform=$,o.setTransormAndDisplay(te,$)})}});var C=M.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var P=o.ensureSingle(M.select(this),"text","",function(I){I.attr("data-notex",1)}),D=E.title.text;E._meta&&(D=o.templateString(D,E._meta)),P.text(D).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(p.convertToTspans,g);var U=x(w,b._size);P.attr("transform",_(U.x,U.y)+T(Math.min(1,U.scale))+_(U.tx,U.ty))})})})}},62096:function(ee,R,e){var M=e(33428),k=e(10528),o=e(82744).resizeText;ee.exports=function(T){var _=T._fullLayout._funnelarealayer.selectAll(".trace");o(T,_,"funnelarea"),_.each(function(p){var s=p[0].trace,t=M.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,s,T)})})}},83328:function(ee,R,e){var M=e(52904),k=e(45464),o=e(25376),T=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(21776).Gw,s=e(49084),t=e(92880).extendFlat;ee.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},M.x,{impliedEdits:{xtype:"array"}}),x0:t({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},M.y,{impliedEdits:{ytype:"array"}}),y0:t({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:_(),texttemplate:p({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:o({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1}),zorder:M.zorder},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},19512:function(ee,R,e){var M=e(24040),k=e(3400),o=e(54460),T=e(1220),_=e(55480),p=e(47128),s=e(2872),t=e(26136),i=e(70448),r=e(11240),n=e(35744),a=e(39032).BADNUM;function l(u){for(var h=[],c=u.length,x=0;x<c;x++){var d=u[x];d!==a&&h.push(d)}return h}ee.exports=function(u,h){var c,x,d,v,g,y,m,b,f,S,w,E=o.getFromId(u,h.xaxis||"x"),O=o.getFromId(u,h.yaxis||"y"),C=M.traceIs(h,"contour"),P=M.traceIs(h,"histogram"),D=M.traceIs(h,"gl2d"),U=C?"best":h.zsmooth;if(E._minDtick=0,O._minDtick=0,P)v=(w=_(u,h)).orig_x,c=w.x,x=w.x0,d=w.dx,b=w.orig_y,g=w.y,y=w.y0,m=w.dy,f=w.z;else{var I=h.z;k.isArray1D(I)?(s(h,E,O,"x","y",["z"]),c=h._x,g=h._y,I=h._z):(v=h.x?E.makeCalcdata(h,"x"):[],b=h.y?O.makeCalcdata(h,"y"):[],c=T(h,E,"x",v).vals,g=T(h,O,"y",b).vals,h._x=c,h._y=g),x=h.x0,d=h.dx,y=h.y0,m=h.dy,f=t(I,h,E,O)}function N(X){U=h._input.zsmooth=h.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+X)}function W(X){if(X.length>1){var Y=(X[X.length-1]-X[0])/(X.length-1),re=Math.abs(Y/100);for(S=0;S<X.length-1;S++)if(Math.abs(X[S+1]-X[S]-Y)>re)return!1}return!0}(E.rangebreaks||O.rangebreaks)&&(f=function(X,Y,re){for(var se=[],ae=-1,ce=0;ce<re.length;ce++)if(Y[ce]!==a){se[++ae]=[];for(var fe=0;fe<re[ce].length;fe++)X[fe]!==a&&se[ae].push(re[ce][fe])}return se}(c,g,f),P||(c=l(c),g=l(g),h._x=c,h._y=g)),P||!C&&!h.connectgaps||(h._emptypoints=r(f),i(f,h._emptypoints)),h._islinear=!1,E.type==="log"||O.type==="log"?U==="fast"&&N("log axis found"):W(c)?W(g)?h._islinear=!0:U==="fast"&&N("y scale is not linear"):U==="fast"&&N("x scale is not linear");var F=k.maxRowLength(f),j=h.xtype==="scaled"?"":c,H=n(h,j,x,d,F,E),te=h.ytype==="scaled"?"":g,Q=n(h,te,y,m,f.length,O);D||(h._extremes[E._id]=o.findExtremes(E,H),h._extremes[O._id]=o.findExtremes(O,Q));var $={x:H,y:Q,z:f,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&v&&($.orig_x=v),h.yperiodalignment&&b&&($.orig_y=b),j&&j.length===H.length-1&&($.xCenter=j),te&&te.length===Q.length-1&&($.yCenter=te),P&&($.xRanges=w.xRanges,$.yRanges=w.yRanges,$.pts=w.pts),C||p(u,h,{vals:f,cLetter:"z"}),C&&h.contours&&h.contours.coloring==="heatmap"){var K={type:h.type==="contour"?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};$.xfill=n(K,j,x,d,F,E),$.yfill=n(K,te,y,m,f.length,O)}return[$]}},26136:function(ee,R,e){var M=e(38248),k=e(3400),o=e(39032).BADNUM;ee.exports=function(T,_,p,s){var t,i,r,n,a,l;function u(g){if(M(g))return+g}if(_&&_.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(t===0)return!1;r=function(g){return g.length},n=function(g,y,m){return(g[m]||[])[y]}}else t=T.length,r=function(g,y){return g[y].length},n=function(g,y,m){return(g[y]||[])[m]};var h=function(g,y,m){return y===o||m===o?o:n(g,y,m)};function c(g){if(_&&_.type!=="carpet"&&_.type!=="contourcarpet"&&g&&g.type==="category"&&_["_"+g._id.charAt(0)].length){var y=g._id.charAt(0),m={},b=_["_"+y+"CategoryMap"]||_[y];for(a=0;a<b.length;a++)m[b[a]]=a;return function(f){var S=m[g._categories[f]];return S+1?S:o}}return k.identity}var x=c(p),d=c(s);s&&s.type==="category"&&(t=s._categories.length);var v=new Array(t);for(a=0;a<t;a++)for(i=p&&p.type==="category"?p._categories.length:r(T,a),v[a]=new Array(i),l=0;l<i;l++)v[a][l]=u(h(T,d(a),x(l)));return v}},96288:function(ee){ee.exports={min:"zmin",max:"zmax"}},2872:function(ee,R,e){var M=e(3400),k=e(39032).BADNUM,o=e(1220);ee.exports=function(T,_,p,s,t,i){var r=T._length,n=_.makeCalcdata(T,s),a=p.makeCalcdata(T,t);n=o(T,_,s,n).vals,a=o(T,p,t,a).vals;var l,u,h,c,x=T.text,d=x!==void 0&&M.isArray1D(x),v=T.hovertext,g=v!==void 0&&M.isArray1D(v),y=M.distinctVals(n),m=y.vals,b=M.distinctVals(a),f=b.vals,S=[],w=f.length,E=m.length;for(l=0;l<i.length;l++)S[l]=M.init2dArray(w,E);d&&(h=M.init2dArray(w,E)),g&&(c=M.init2dArray(w,E));var O=M.init2dArray(w,E);for(l=0;l<r;l++)if(n[l]!==k&&a[l]!==k){var C=M.findBin(n[l]+y.minDiff/2,m),P=M.findBin(a[l]+b.minDiff/2,f);for(u=0;u<i.length;u++){var D=T[i[u]];S[u][P][C]=D[l],O[P][C]=l}d&&(h[P][C]=x[l]),g&&(c[P][C]=v[l])}for(T["_"+s]=m,T["_"+t]=f,u=0;u<i.length;u++)T["_"+i[u]]=S[u];d&&(T._text=h),g&&(T._hovertext=c),_&&_.type==="category"&&(T["_"+s+"CategoryMap"]=m.map(function(U){return _._categories[U]})),p&&p.type==="category"&&(T["_"+t+"CategoryMap"]=f.map(function(U){return p._categories[U]})),T._after2before=O}},24480:function(ee,R,e){var M=e(3400),k=e(51264),o=e(39096),T=e(31147),_=e(82748),p=e(27260),s=e(83328);ee.exports=function(t,i,r,n){function a(l,u){return M.coerce(t,i,s,l,u)}k(t,i,a,n)?(T(t,i,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),o(a,n),_(t,i,a,n),a("hoverongaps"),a("connectgaps",M.isArray1D(i.z)&&i.zsmooth!==!1),p(t,i,n,a,{prefix:"",cLetter:"z"}),a("zorder")):i.visible=!1}},11240:function(ee,R,e){var M=e(3400).maxRowLength;ee.exports=function(k){var o,T,_,p,s,t,i,r,n=[],a={},l=[],u=k[0],h=[],c=[0,0,0],x=M(k);for(T=0;T<k.length;T++)for(o=h,h=u,u=k[T+1]||[],_=0;_<x;_++)h[_]===void 0&&((t=(h[_-1]!==void 0?1:0)+(h[_+1]!==void 0?1:0)+(o[_]!==void 0?1:0)+(u[_]!==void 0?1:0))?(T===0&&t++,_===0&&t++,T===k.length-1&&t++,_===h.length-1&&t++,t<4&&(a[[T,_]]=[T,_,t]),n.push([T,_,t])):l.push([T,_]));for(;l.length;){for(i={},r=!1,s=l.length-1;s>=0;s--)(t=((a[[(T=(p=l[s])[0])-1,_=p[1]]]||c)[2]+(a[[T+1,_]]||c)[2]+(a[[T,_-1]]||c)[2]+(a[[T,_+1]]||c)[2])/20)&&(i[p]=[T,_,t],l.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(p in i)a[p]=i[p],n.push(i[p])}return n.sort(function(d,v){return v[2]-d[2]})}},55512:function(ee,R,e){var M=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(54460),_=e(8932).extractOpts;ee.exports=function(p,s,t,i,r){r||(r={});var n,a,l,u,h=r.isContour,c=p.cd[0],x=c.trace,d=p.xa,v=p.ya,g=c.x,y=c.y,m=c.z,b=c.xCenter,f=c.yCenter,S=c.zmask,w=x.zhoverformat,E=g,O=y;if(p.index!==!1){try{l=Math.round(p.index[1]),u=Math.round(p.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",p.index)}if(l<0||l>=m[0].length||u<0||u>m.length)return}else{if(M.inbox(s-g[0],s-g[g.length-1],0)>0||M.inbox(t-y[0],t-y[y.length-1],0)>0)return;if(h){var C;for(E=[2*g[0]-g[1]],C=1;C<g.length;C++)E.push((g[C]+g[C-1])/2);for(E.push([2*g[g.length-1]-g[g.length-2]]),O=[2*y[0]-y[1]],C=1;C<y.length;C++)O.push((y[C]+y[C-1])/2);O.push([2*y[y.length-1]-y[y.length-2]])}l=Math.max(0,Math.min(E.length-2,k.findBin(s,E))),u=Math.max(0,Math.min(O.length-2,k.findBin(t,O)))}var P,D,U=d.c2p(g[l]),I=d.c2p(g[l+1]),N=v.c2p(y[u]),W=v.c2p(y[u+1]);h?(P=c.orig_x||g,D=c.orig_y||y,I=U,n=P[l],W=N,a=D[u]):(P=c.orig_x||b||g,D=c.orig_y||f||y,n=b?P[l]:(P[l]+P[l+1])/2,a=f?D[u]:(D[u]+D[u+1])/2,d&&d.type==="category"&&(n=g[l]),v&&v.type==="category"&&(a=y[u]),x.zsmooth&&(U=I=d.c2p(n),N=W=v.c2p(a)));var F=m[u][l];if(S&&!S[u][l]&&(F=void 0),F!==void 0||x.hoverongaps){var j;o(c.hovertext)&&o(c.hovertext[u])?j=c.hovertext[u][l]:o(c.text)&&o(c.text[u])&&(j=c.text[u][l]);var H=_(x),te={type:"linear",range:[H.min,H.max],hoverformat:w,_separators:d._separators,_numFormat:d._numFormat},Q=T.tickText(te,F,"hover").text;return[k.extendFlat(p,{index:x._after2before?x._after2before[u][l]:[u,l],distance:p.maxHoverDistance,spikeDistance:p.maxSpikeDistance,x0:U,x1:I,y0:N,y1:W,xLabelVal:n,yLabelVal:a,zLabelVal:F,zLabel:Q,text:j})]}}},81932:function(ee,R,e){ee.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(ee,R,e){var M=e(3400),k=[[-1,0],[1,0],[0,-1],[0,1]];function o(_){return .5-.25*Math.min(1,.5*_)}function T(_,p,s){var t,i,r,n,a,l,u,h,c,x,d,v,g,y=0;for(n=0;n<p.length;n++){for(i=(t=p[n])[0],r=t[1],d=_[i][r],x=0,c=0,a=0;a<4;a++)(u=_[i+(l=k[a])[0]])&&(h=u[r+l[1]])!==void 0&&(x===0?v=g=h:(v=Math.min(v,h),g=Math.max(g,h)),c++,x+=h);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";_[i][r]=x/c,d===void 0?c<4&&(y=1):(_[i][r]=(1+s)*_[i][r]-s*d,g>v&&(y=Math.max(y,Math.abs(_[i][r]-d)/(g-v))))}return y}ee.exports=function(_,p){var s,t=1;for(T(_,p),s=0;s<p.length&&!(p[s][2]<4);s++);for(p=p.slice(s),s=0;s<100&&t>.01;s++)t=T(_,p,o(t));return t>.01&&M.log("interp2d didn't converge quickly",t),_}},39096:function(ee,R,e){var M=e(3400);ee.exports=function(k,o){k("texttemplate");var T=M.extendFlat({},o.font,{color:"auto",size:"auto"});M.coerceFont(k,"textfont",T)}},35744:function(ee,R,e){var M=e(24040),k=e(3400).isArrayOrTypedArray;ee.exports=function(o,T,_,p,s,t){var i,r,n,a=[],l=M.traceIs(o,"contour"),u=M.traceIs(o,"histogram"),h=M.traceIs(o,"gl2d");if(k(T)&&T.length>1&&!u&&t.type!=="category"){var c=T.length;if(!(c<=s))return l?T.slice(0,s):T.slice(0,s+1);if(l||h)a=Array.from(T).slice(0,s);else if(s===1)a=t.type==="log"?[.5*T[0],2*T[0]]:[T[0]-.5,T[0]+.5];else if(t.type==="log"){for(a=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],n=1;n<c;n++)a.push(Math.sqrt(T[n-1]*T[n]));a.push(Math.pow(T[c-1],1.5)/Math.pow(T[c-2],.5))}else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<c;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[c-1]-.5*T[c-2])}if(c<s){var x,d=a[a.length-1];if(t.type==="log")for(x=d/a[a.length-2],n=c;n<s;n++)d*=x,a.push(d);else for(x=d-a[a.length-2],n=c;n<s;n++)d+=x,a.push(d)}}else{var v=o[t._id.charAt(0)+"calendar"];for(i=u?t.r2c(_,0,v):k(T)&&T.length===1?T[0]:_===void 0?0:(t.type==="log"?t.d2c:t.r2c)(_,0,v),r=p||1,n=l||h?0:-.5;n<s;n++)a.push(i+r*n)}return a}},41420:function(ee,R,e){var M=e(33428),k=e(49760),o=e(24040),T=e(43616),_=e(54460),p=e(3400),s=e(72736),t=e(76688),i=e(76308),r=e(8932).extractOpts,n=e(8932).makeColorScaleFuncFromTrace,a=e(9616),l=e(84284).LINE_SPACING,u=e(9188),h=e(2264).STYLE,c="heatmap-label";function x(m){return m.selectAll("g."+c)}function d(m){x(m).remove()}function v(m,b){var f=b.length-2,S=p.constrain(p.findBin(m,b),0,f),w=b[S],E=b[S+1],O=p.constrain(S+(m-w)/(E-w)-.5,0,f),C=Math.round(O),P=Math.abs(O-C);return O&&O!==f&&P?{bin0:C,frac:P,bin1:Math.round(C+P/(O-C))}:{bin0:C,bin1:C,frac:0}}function g(m,b){var f=b.length-1,S=p.constrain(p.findBin(m,b),0,f),w=b[S],E=(m-w)/(b[S+1]-w)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function y(m,b,f){m[b]=f[0],m[b+1]=f[1],m[b+2]=f[2],m[b+3]=Math.round(255*f[3])}ee.exports=function(m,b,f,S){var w=b.xaxis,E=b.yaxis;p.makeTraceGroups(S,f,"hm").each(function(O){var C,P,D,U,I,N,W,F,j=M.select(this),H=O[0],te=H.trace,Q=te.xgap||0,$=te.ygap||0,K=H.z,X=H.x,Y=H.y,re=H.xCenter,se=H.yCenter,ae=o.traceIs(te,"contour"),ce=ae?"best":te.zsmooth,fe=K.length,he=p.maxRowLength(K),ve=!1,ye=!1;for(N=0;C===void 0&&N<X.length-1;)C=w.c2p(X[N]),N++;for(N=X.length-1;P===void 0&&N>0;)P=w.c2p(X[N]),N--;for(P<C&&(D=P,P=C,C=D,ve=!0),N=0;U===void 0&&N<Y.length-1;)U=E.c2p(Y[N]),N++;for(N=Y.length-1;I===void 0&&N>0;)I=E.c2p(Y[N]),N--;I<U&&(D=U,U=I,I=D,ye=!0),ae&&(re=X,se=Y,X=H.xfill,Y=H.yfill);var me="default";if(ce?me=ce==="best"?"smooth":"fast":te._islinear&&Q===0&&$===0&&u()&&(me="fast"),me!=="fast"){var Me=ce==="best"?0:.5;C=Math.max(-Me*w._length,C),P=Math.min((1+Me)*w._length,P),U=Math.max(-Me*E._length,U),I=Math.min((1+Me)*E._length,I)}var Pe,ge,oe=Math.round(P-C),ie=Math.round(I-U);if(C>=w._length||P<=0||U>=E._length||I<=0)return j.selectAll("image").data([]).exit().remove(),void d(j);me==="fast"?(Pe=he,ge=fe):(Pe=oe,ge=ie);var de=document.createElement("canvas");de.width=Pe,de.height=ge;var Se,_e,we=de.getContext("2d",{willReadFrequently:!0}),Ae=n(te,{noNumericCheck:!0,returnArray:!0});me==="fast"?(Se=ve?function(lr){return he-1-lr}:p.identity,_e=ye?function(lr){return fe-1-lr}:p.identity):(Se=function(lr){return p.constrain(Math.round(w.c2p(X[lr])-C),0,oe)},_e=function(lr){return p.constrain(Math.round(E.c2p(Y[lr])-U),0,ie)});var Oe,ze,pe,be,ke=_e(0),Ie=[ke,ke],Ee=ve?0:1,Be=ye?0:1,Ve=0,Ze=0,rt=0,it=0;function dt(lr,Jt){if(lr!==void 0){var Qt=Ae(lr);return Qt[0]=Math.round(Qt[0]),Qt[1]=Math.round(Qt[1]),Qt[2]=Math.round(Qt[2]),Ve+=Jt,Ze+=Qt[0]*Jt,rt+=Qt[1]*Jt,it+=Qt[2]*Jt,Qt}return[0,0,0,0]}function vt(lr,Jt,Qt,En){var pn=lr[Qt.bin0];if(pn===void 0)return dt(void 0,1);var Cn,Vn=lr[Qt.bin1],Fn=Jt[Qt.bin0],Yn=Jt[Qt.bin1],fr=Vn-pn||0,Zt=Fn-pn||0;return Cn=Vn===void 0?Yn===void 0?0:Fn===void 0?2*(Yn-pn):2*(2*Yn-Fn-pn)/3:Yn===void 0?Fn===void 0?0:2*(2*pn-Vn-Fn)/3:Fn===void 0?2*(2*Yn-Vn-pn)/3:Yn+pn-Vn-Fn,dt(pn+Qt.frac*fr+En.frac*(Zt+Qt.frac*Cn))}if(me!=="default"){var ht,Qe=0;try{ht=new Uint8Array(Pe*ge*4)}catch{ht=new Array(Pe*ge*4)}if(me==="smooth"){var Je,Tt,Ot,Pt=re||X,Mt=se||Y,He=new Array(Pt.length),Ye=new Array(Mt.length),Ne=new Array(oe),We=re?g:v,ot=se?g:v;for(N=0;N<Pt.length;N++)He[N]=Math.round(w.c2p(Pt[N])-C);for(N=0;N<Mt.length;N++)Ye[N]=Math.round(E.c2p(Mt[N])-U);for(N=0;N<oe;N++)Ne[N]=We(N,He);for(W=0;W<ie;W++)for(Tt=K[(Je=ot(W,Ye)).bin0],Ot=K[Je.bin1],N=0;N<oe;N++,Qe+=4)y(ht,Qe,be=vt(Tt,Ot,Ne[N],Je))}else for(W=0;W<fe;W++)for(pe=K[W],Ie=_e(W),N=0;N<he;N++)be=dt(pe[N],1),y(ht,Qe=4*(Ie*he+Se(N)),be);var tt=we.createImageData(Pe,ge);try{tt.data.set(ht)}catch{var Re=tt.data,Fe=Re.length;for(W=0;W<Fe;W++)Re[W]=ht[W]}we.putImageData(tt,0,0)}else{var nt=Math.floor(Q/2),Ge=Math.floor($/2);for(W=0;W<fe;W++)if(pe=K[W],Ie.reverse(),Ie[Be]=_e(W+1),Ie[0]!==Ie[1]&&Ie[0]!==void 0&&Ie[1]!==void 0)for(Oe=[ze=Se(0),ze],N=0;N<he;N++)Oe.reverse(),Oe[Ee]=Se(N+1),Oe[0]!==Oe[1]&&Oe[0]!==void 0&&Oe[1]!==void 0&&(be=dt(pe[N],(Oe[1]-Oe[0])*(Ie[1]-Ie[0])),we.fillStyle="rgba("+be.join(",")+")",we.fillRect(Oe[0]+nt,Ie[0]+Ge,Oe[1]-Oe[0]-Q,Ie[1]-Ie[0]-$))}Ze=Math.round(Ze/Ve),rt=Math.round(rt/Ve),it=Math.round(it/Ve);var ct=k("rgb("+Ze+","+rt+","+it+")");m._hmpixcount=(m._hmpixcount||0)+Ve,m._hmlumcount=(m._hmlumcount||0)+Ve*ct.getLuminance();var pt=j.selectAll("image").data(O);pt.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),pt.attr({height:ie,width:oe,x:C,y:U,"xlink:href":de.toDataURL("image/png")}),me!=="fast"||ce||pt.attr("style",h),d(j);var gt=te.texttemplate;if(gt){var ut=r(te),kt={type:"linear",range:[ut.min,ut.max],_separators:w._separators,_numFormat:w._numFormat},mt=te.type==="histogram2dcontour",At=te.type==="contour",Lt=At?fe-1:fe,Ct=At?1:0,zt=At?he-1:he,Gt=[];for(N=At?1:0;N<Lt;N++){var rn;if(At)rn=H.y[N];else if(mt){if(N===0||N===fe-1)continue;rn=H.y[N]}else if(H.yCenter)rn=H.yCenter[N];else{if(N+1===fe&&H.y[N+1]===void 0)continue;rn=(H.y[N]+H.y[N+1])/2}var Nt=Math.round(E.c2p(rn));if(!(0>Nt||Nt>E._length))for(W=Ct;W<zt;W++){var Wt;if(At)Wt=H.x[W];else if(mt){if(W===0||W===he-1)continue;Wt=H.x[W]}else if(H.xCenter)Wt=H.xCenter[W];else{if(W+1===he&&H.x[W+1]===void 0)continue;Wt=(H.x[W]+H.x[W+1])/2}var Rt=Math.round(w.c2p(Wt));if(!(0>Rt||Rt>w._length)){var Ln=t({x:Wt,y:rn},te,m._fullLayout);Ln.x=Wt,Ln.y=rn;var bn=H.z[N][W];bn===void 0?(Ln.z="",Ln.zLabel=""):(Ln.z=bn,Ln.zLabel=_.tickText(kt,bn,"hover").text);var hn=H.text&&H.text[N]&&H.text[N][W];hn!==void 0&&hn!==!1||(hn=""),Ln.text=hn;var Kt=p.texttemplateString(gt,Ln,m._fullLayout._d3locale,Ln,te._meta||{});if(Kt){var on=Kt.split("<br>"),$t=on.length,ln=0;for(F=0;F<$t;F++)ln=Math.max(ln,on[F].length);Gt.push({l:$t,c:ln,t:Kt,x:Rt,y:Nt,z:bn})}}}}var mn=te.textfont,xn=mn.size,Mn=m._fullLayout.font.size;if(!xn||xn==="auto"){var Sn=1/0,Tn=1/0,Rn=0,Pn=0;for(F=0;F<Gt.length;F++){var jn=Gt[F];if(Rn=Math.max(Rn,jn.l),Pn=Math.max(Pn,jn.c),F<Gt.length-1){var Jn=Gt[F+1],$n=Math.abs(Jn.x-jn.x),Gn=Math.abs(Jn.y-jn.y);$n&&(Sn=Math.min(Sn,$n)),Gn&&(Tn=Math.min(Tn,Gn))}}isFinite(Sn)&&isFinite(Tn)?(Sn-=Q,Tn-=$,Sn/=Pn,Tn/=Rn,Sn/=l/2,Tn/=l,xn=Math.min(Math.floor(Sn),Math.floor(Tn),Mn)):xn=Mn}if(xn<=0||!isFinite(xn))return;x(j).data(Gt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(lr){var Jt=M.select(this),Qt=mn.color;Qt&&Qt!=="auto"||(Qt=i.contrast(lr.z===void 0?m._fullLayout.plot_bgcolor:"rgba("+Ae(lr.z).join()+")")),Jt.attr("data-notex",1).call(s.positionText,function(En){return En.x}(lr),function(En){return En.y-xn*(En.l*l/2-1)}(lr)).call(T.font,{family:mn.family,size:xn,color:Qt,weight:mn.weight,style:mn.style,variant:mn.variant,textcase:mn.textcase,lineposition:mn.lineposition,shadow:mn.shadow}).text(lr.t).call(s.convertToTspans,m)})}})}},41648:function(ee,R,e){var M=e(33428);ee.exports=function(k){M.select(k).selectAll(".hm image").style("opacity",function(o){return o.trace.opacity})}},82748:function(ee){ee.exports=function(R,e,M){M("zsmooth")===!1&&(M("xgap"),M("ygap")),M("zhoverformat")}},51264:function(ee,R,e){var M=e(38248),k=e(3400),o=e(24040);function T(_,p){var s=p(_);return(s?p(_+"type","array"):"scaled")==="scaled"&&(p(_+"0"),p("d"+_)),s}ee.exports=function(_,p,s,t,i,r){var n,a,l=s("z");if(i=i||"x",r=r||"y",l===void 0||!l.length)return 0;if(k.isArray1D(l)){n=s(i),a=s(r);var u=k.minRowLength(n),h=k.minRowLength(a);if(u===0||h===0)return 0;p._length=Math.min(u,h,l.length)}else{if(n=T(i,s),a=T(r,s),!function(c){for(var x,d=!0,v=!1,g=!1,y=0;y<c.length;y++){if(x=c[y],!k.isArrayOrTypedArray(x)){d=!1;break}x.length>0&&(v=!0);for(var m=0;m<x.length;m++)if(M(x[m])){g=!0;break}}return d&&v&&g}(l))return 0;s("transpose"),p._length=null}return _.type==="heatmapgl"||o.getComponentMethod("calendars","handleTraceDefaults")(_,p,[i,r],t),!0}},74512:function(ee,R,e){for(var M=e(83328),k=e(49084),o=e(92880).extendFlat,T=e(67824).overrideAll,_=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],p={},s=0;s<_.length;s++){var t=_[s];p[t]=M[t]}p.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},o(p,k("",{cLetter:"z",autoColorDflt:!1})),ee.exports=T(p,"calc","nested")},84656:function(ee,R,e){var M=e(67792).gl_heatmap2d,k=e(54460),o=e(43080);function T(p,s){this.scene=p,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(p.glplot,this.options),this.heatmap._trace=this}var _=T.prototype;_.handlePick=function(p){var s=this.options,t=s.shape,i=p.pointId,r=i%t[0],n=Math.floor(i/t[0]),a=i;return{trace:this,dataCoord:p.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[a]],textLabel:this.textLabels[i],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},_.update=function(p,s){var t=s[0];this.index=p.index,this.name=p.name,this.hoverinfo=p.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i);var r=i[0].length,n=i.length;this.options.shape=[r,n],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=p.zsmooth;var a=function(x){for(var d=x.colorscale,v=x.zmin,g=x.zmax,y=d.length,m=new Array(y),b=new Array(4*y),f=0;f<y;f++){var S=d[f],w=o(S[1]);m[f]=v+S[0]*(g-v);for(var E=0;E<4;E++)b[4*f+E]=w[E]}return{colorLevels:m,colorValues:b}}(p);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],p.text),this.heatmap.update(this.options);var l,u,h=this.scene.xaxis,c=this.scene.yaxis;p.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),p._extremes[h._id]=k.findExtremes(h,t.x,l),p._extremes[c._id]=k.findExtremes(c,t.y,u)},_.dispose=function(){this.heatmap.dispose()},ee.exports=function(p,s,t){var i=new T(p,s.uid);return i.update(s,t),i}},86464:function(ee,R,e){var M=e(3400),k=e(51264),o=e(27260),T=e(74512);ee.exports=function(_,p,s,t){function i(r,n){return M.coerce(_,p,T,r,n)}k(_,p,i,t)?(i("text"),i("zsmooth"),o(_,p,t,i,{prefix:"",cLetter:"z"})):p.visible=!1}},45536:function(ee,R,e){ee.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(ee,R,e){var M=e(20832),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,_=e(25376),p=e(11120),s=e(73316),t=e(92880).extendFlat;ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},M.text,{}),hovertext:t({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:p("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:p("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},M.textposition,{arrayOk:!1}),textfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:_({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir},zorder:M.zorder}},2e3:function(ee){ee.exports=function(R,e){for(var M=R.length,k=0,o=0;o<M;o++)e[o]?(R[o]/=e[o],k+=R[o]):R[o]=null;return k}},11120:function(ee){ee.exports=function(R,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(ee,R,e){var M=e(38248);ee.exports={count:function(k,o,T){return T[k]++,1},sum:function(k,o,T,_){var p=_[o];return M(p)?(p=Number(p),T[k]+=p,p):0},avg:function(k,o,T,_,p){var s=_[o];return M(s)&&(s=Number(s),T[k]+=s,p[k]++),0},min:function(k,o,T,_){var p=_[o];if(M(p)){if(p=Number(p),!M(T[k]))return T[k]=p,p;if(T[k]>p){var s=p-T[k];return T[k]=p,s}}return 0},max:function(k,o,T,_){var p=_[o];if(M(p)){if(p=Number(p),!M(T[k]))return T[k]=p,p;if(T[k]<p){var s=p-T[k];return T[k]=p,s}}return 0}}},67712:function(ee,R,e){var M=e(39032),k=M.ONEAVGYEAR,o=M.ONEAVGMONTH,T=M.ONEDAY,_=M.ONEHOUR,p=M.ONEMIN,s=M.ONESEC,t=e(54460).tickIncrement;function i(l,u,h,c){if(l*u<=0)return 1/0;for(var x=Math.abs(u-l),d=h.type==="date",v=r(x,d),g=0;g<10;g++){var y=r(80*v,d);if(v===y||!n(y,l,u,d,h,c))break;v=y}return v}function r(l,u){return u&&l>s?l>T?l>1.1*k?k:l>1.1*o?o:T:l>_?_:l>p?p:s:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function n(l,u,h,c,x,d){if(c&&l>T){var v=a(u,x,d),g=a(h,x,d),y=l===k?0:1;return v[y]!==g[y]}return Math.floor(h/l)-Math.floor(u/l)>.1}function a(l,u,h){var c=u.c2d(l,k,h).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}ee.exports=function(l,u,h,c,x){var d,v,g=-1.1*u,y=-.1*u,m=l-y,b=h[0],f=h[1],S=Math.min(i(b+y,b+m,c,x),i(f+y,f+m,c,x)),w=Math.min(i(b+g,b+y,c,x),i(f+g,f+y,c,x));if(S>w&&w<Math.abs(f-b)/4e3?(d=S,v=!1):(d=Math.min(S,w),v=!0),c.type==="date"&&d>T){var E=d===k?1:6,O=d===k?"M12":"M1";return function(C,P){var D=c.c2d(C,k,x),U=D.indexOf("-",E);U>0&&(D=D.substr(0,U));var I=c.d2c(D,0,x);if(I<C){var N=t(I,O,!1,x);(I+N)/2<C+l&&(I=N)}return P&&v?t(I,O,!0,x):I}}return function(C,P){var D=d*Math.round(C/d);return D+d/10<C&&D+.9*d<C+l&&(D+=d),P&&v&&(D-=d),D}}},35852:function(ee,R,e){var M=e(38248),k=e(3400),o=e(24040),T=e(54460),_=e(84664),p=e(16964),s=e(10648),t=e(2e3),i=e(67712);function r(n,a,l,u,h){var c,x,d,v,g,y,m,b=u+"bins",f=n._fullLayout,S=a["_"+u+"bingroup"],w=f._histogramBinOpts[S],E=f.barmode==="overlay",O=function(ye){return l.r2c(ye,0,v)},C=function(ye){return l.c2r(ye,0,v)},P=l.type==="date"?function(ye){return ye||ye===0?k.cleanDate(ye,null,v):null}:function(ye){return M(ye)?Number(ye):null};function D(ye,me,Me){me[ye+"Found"]?(me[ye]=P(me[ye]),me[ye]===null&&(me[ye]=Me[ye])):(y[ye]=me[ye]=Me[ye],k.nestedProperty(x[0],b+"."+ye).set(Me[ye]))}if(a["_"+u+"autoBinFinished"])delete a["_"+u+"autoBinFinished"];else{x=w.traces;var U=[],I=!0,N=!1,W=!1;for(c=0;c<x.length;c++)if((d=x[c]).visible){var F=w.dirs[c];g=d["_"+F+"pos0"]=l.makeCalcdata(d,F),U=k.concat(U,g),delete d["_"+u+"autoBinFinished"],a.visible===!0&&(I?I=!1:(delete d._autoBin,d["_"+u+"autoBinFinished"]=1),o.traceIs(d,"2dMap")&&(N=!0),d.type==="histogram2dcontour"&&(W=!0))}v=x[0][u+"calendar"];var j=T.autoBin(U,l,w.nbins,N,v,w.sizeFound&&w.size),H=x[0]._autoBin={};if(y=H[w.dirs[0]]={},W&&(w.size||(j.start=C(T.tickIncrement(O(j.start),j.size,!0,v))),w.end===void 0&&(j.end=C(T.tickIncrement(O(j.end),j.size,!1,v)))),E&&!o.traceIs(a,"2dMap")&&j._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"&&a.bingroup===""&&a.xbins===void 0){if(h)return[j,g,!0];j=function(ye,me,Me,Pe,ge){var oe,ie,de,Se=ye._fullLayout,_e=function(Ze,rt){for(var it=rt.xaxis,dt=rt.yaxis,vt=rt.orientation,ht=[],Qe=Ze._fullData,Je=0;Je<Qe.length;Je++){var Tt=Qe[Je];Tt.type==="histogram"&&Tt.visible===!0&&Tt.orientation===vt&&Tt.xaxis===it&&Tt.yaxis===dt&&ht.push(Tt)}return ht}(ye,me),we=!1,Ae=1/0,Oe=[me];for(oe=0;oe<_e.length;oe++)if((ie=_e[oe])===me)we=!0;else if(we){var ze=r(ye,ie,Me,Pe,!0),pe=ze[0],be=ze[2];ie["_"+Pe+"autoBinFinished"]=1,ie["_"+Pe+"pos0"]=ze[1],be?Oe.push(ie):Ae=Math.min(Ae,pe.size)}else de=Se._histogramBinOpts[ie["_"+Pe+"bingroup"]],Ae=Math.min(Ae,de.size||ie[ge].size);var ke=new Array(Oe.length);for(oe=0;oe<Oe.length;oe++)for(var Ie=Oe[oe]["_"+Pe+"pos0"],Ee=0;Ee<Ie.length;Ee++)if(Ie[Ee]!==void 0){ke[oe]=Ie[Ee];break}for(isFinite(Ae)||(Ae=k.distinctVals(ke).minDiff),oe=0;oe<Oe.length;oe++){var Be=(ie=Oe[oe])[Pe+"calendar"],Ve={start:Me.c2r(ke[oe]-Ae/2,0,Be),end:Me.c2r(ke[oe]+Ae/2,0,Be),size:Ae};ie._input[ge]=ie[ge]=Ve,(de=Se._histogramBinOpts[ie["_"+Pe+"bingroup"]])&&k.extendFlat(de,Ve)}return me[ge]}(n,a,l,u,b)}(m=d.cumulative||{}).enabled&&m.currentbin!=="include"&&(m.direction==="decreasing"?j.start=C(T.tickIncrement(O(j.start),j.size,!0,v)):j.end=C(T.tickIncrement(O(j.end),j.size,!1,v))),w.size=j.size,w.sizeFound||(y.size=j.size,k.nestedProperty(x[0],b+".size").set(j.size)),D("start",w,j),D("end",w,j)}g=a["_"+u+"pos0"],delete a["_"+u+"pos0"];var te=a._input[b]||{},Q=k.extendFlat({},w),$=w.start,K=l.r2l(te.start),X=K!==void 0;if((w.startFound||X)&&K!==l.r2l($)){var Y=X?K:k.aggNums(Math.min,null,g),re={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:w.size,tick0:$,calendar:v,range:[Y,T.tickIncrement(Y,w.size,!1,v)].map(l.l2r)},se=T.tickFirst(re);se>l.r2l(Y)&&(se=T.tickIncrement(se,w.size,!0,v)),Q.start=l.l2r(se),X||k.nestedProperty(a,b+".start").set(Q.start)}var ae=w.end,ce=l.r2l(te.end),fe=ce!==void 0;if((w.endFound||fe)&&ce!==l.r2l(ae)){var he=fe?ce:k.aggNums(Math.max,null,g);Q.end=l.l2r(he),fe||k.nestedProperty(a,b+".start").set(Q.end)}var ve="autobin"+u;return a._input[ve]===!1&&(a._input[b]=k.extendFlat({},a[b]||{}),delete a._input[ve],delete a[ve]),[Q,g]}ee.exports={calc:function(n,a){var l,u,h,c,x=[],d=[],v=a.orientation==="h",g=T.getFromId(n,v?a.yaxis:a.xaxis),y=v?"y":"x",m={x:"y",y:"x"}[y],b=a[y+"calendar"],f=a.cumulative,S=r(n,a,g,y),w=S[0],E=S[1],O=typeof w.size=="string",C=[],P=O?C:w,D=[],U=[],I=[],N=0,W=a.histnorm,F=a.histfunc,j=W.indexOf("density")!==-1;f.enabled&&j&&(W=W.replace(/ ?density$/,""),j=!1);var H,te=F==="max"||F==="min"?null:0,Q=p.count,$=s[W],K=!1,X=function(ie){return g.r2c(ie,0,b)};for(k.isArrayOrTypedArray(a[m])&&F!=="count"&&(H=a[m],K=F==="avg",Q=p[F]),l=X(w.start),h=X(w.end)+(l-T.tickIncrement(l,w.size,!1,b))/1e6;l<h&&x.length<1e6&&(u=T.tickIncrement(l,w.size,!1,b),x.push((l+u)/2),d.push(te),I.push([]),C.push(l),j&&D.push(1/(u-l)),K&&U.push(0),!(u<=l));)l=u;C.push(l),O||g.type!=="date"||(P={start:X(P.start),end:X(P.end),size:P.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var Y=a["_"+y+"bingroup"],re={leftGap:1/0,rightGap:1/0};Y&&(n._fullLayout._roundFnOpts[Y]||(n._fullLayout._roundFnOpts[Y]=re),re=n._fullLayout._roundFnOpts[Y]);var se,ae=d.length,ce=!0,fe=re.leftGap,he=re.rightGap,ve={};for(l=0;l<E.length;l++){var ye=E[l];(c=k.findBin(ye,P))>=0&&c<ae&&(N+=Q(c,l,d,H,U),ce&&I[c].length&&ye!==E[I[c][0]]&&(ce=!1),I[c].push(l),ve[l]=c,fe=Math.min(fe,ye-C[c]),he=Math.min(he,C[c+1]-ye))}re.leftGap=fe,re.rightGap=he,ce||(se=function(ie,de){return function(){var Se=n._fullLayout._roundFnOpts[Y];return i(Se.leftGap,Se.rightGap,C,g,b)(ie,de)}}),K&&(N=t(d,U)),$&&$(d,N,D),f.enabled&&function(ie,de,Se){var _e,we,Ae;function Oe(pe){Ae=ie[pe],ie[pe]/=2}function ze(pe){we=ie[pe],ie[pe]=Ae+we/2,Ae+=we}if(Se==="half")if(de==="increasing")for(Oe(0),_e=1;_e<ie.length;_e++)ze(_e);else for(Oe(ie.length-1),_e=ie.length-2;_e>=0;_e--)ze(_e);else if(de==="increasing"){for(_e=1;_e<ie.length;_e++)ie[_e]+=ie[_e-1];Se==="exclude"&&(ie.unshift(0),ie.pop())}else{for(_e=ie.length-2;_e>=0;_e--)ie[_e]+=ie[_e+1];Se==="exclude"&&(ie.push(0),ie.shift())}}(d,f.direction,f.currentbin);var me=Math.min(x.length,d.length),Me=[],Pe=0,ge=me-1;for(l=0;l<me;l++)if(d[l]){Pe=l;break}for(l=me-1;l>=Pe;l--)if(d[l]){ge=l;break}for(l=Pe;l<=ge;l++)if(M(x[l])&&M(d[l])){var oe={p:x[l],s:d[l],b:0};f.enabled||(oe.pts=I[l],ce?oe.ph0=oe.ph1=I[l].length?E[I[l][0]]:x[l]:(a._computePh=!0,oe.ph0=se(C[l]),oe.ph1=se(C[l+1],!0))),Me.push(oe)}return Me.length===1&&(Me[0].width1=T.tickIncrement(Me[0].p,w.size,!1,b)-Me[0].p),_(Me,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(Me,a,ve),Me},calcAllAutoBins:r}},73316:function(ee){ee.exports={eventDataKeys:["binNumber"]}},80536:function(ee,R,e){var M=e(3400),k=e(79811),o=e(24040).traceIs,T=e(20011),_=e(31508).validateCornerradius,p=M.nestedProperty,s=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];ee.exports=function(r,n){var a,l,u,h,c,x,d,v=n._histogramBinOpts={},g=[],y={},m=[];function b(te,Q){return M.coerce(a._input,a,a._module.attributes,te,Q)}function f(te){return te.orientation==="v"?"x":"y"}function S(te,Q,$){var K=te.uid+"__"+$;Q||(Q=K);var X=function(ae,ce){return k.getFromTrace({_fullLayout:n},ae,ce).type}(te,$),Y=te[$+"calendar"]||"",re=v[Q],se=!0;re&&(X===re.axType&&Y===re.calendar?(se=!1,re.traces.push(te),re.dirs.push($)):(Q=K,X!==re.axType&&M.warn(["Attempted to group the bins of trace",te.index,"set on a","type:"+X,"axis","with bins on","type:"+re.axType,"axis."].join(" ")),Y!==re.calendar&&M.warn(["Attempted to group the bins of trace",te.index,"set with a",Y,"calendar","with bins",re.calendar?"on a "+re.calendar+" calendar":"w/o a set calendar"].join(" ")))),se&&(v[Q]={traces:[te],dirs:[$],axType:X,calendar:te[$+"calendar"]||""}),te["_"+$+"bingroup"]=Q}for(c=0;c<r.length;c++)if(a=r[c],o(a,"histogram")){if(g.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,a.type==="histogram"){var w=b("marker.cornerradius",n.barcornerradius);a.marker&&(a.marker.cornerradius=_(w))}o(a,"2dMap")||T(a._input,a,n,b)}var E=n._alignmentOpts||{};for(c=0;c<g.length;c++){if(a=g[c],u="",!o(a,"2dMap")){if(h=f(a),n.barmode==="group"&&a.alignmentgroup){var O=a[h+"axis"],C=s(n,O)+a.orientation;(E[C]||{})[a.alignmentgroup]&&(u=C)}u||n.barmode==="overlay"||(u=s(n,a.xaxis)+s(n,a.yaxis)+f(a))}u?(y[u]||(y[u]=[]),y[u].push(a)):m.push(a)}for(u in y)if((l=y[u]).length!==1){var P=!1;for(l.length&&(a=l[0],P=b("bingroup")),u=P||u,c=0;c<l.length;c++){var D=(a=l[c])._input.bingroup;D&&D!==u&&M.warn(["Trace",a.index,"must match","within bingroup",u+".","Ignoring its bingroup:",D,"setting."].join(" ")),a.bingroup=u,S(a,u,f(a))}}else m.push(l[0]);for(c=0;c<m.length;c++){a=m[c];var U=b("bingroup");if(o(a,"2dMap"))for(d=0;d<2;d++){var I=b((h=i[d])+"bingroup",U?U+"__"+h:null);S(a,I,h)}else S(a,U,f(a))}for(u in v){var N=v[u];for(l=N.traces,x=0;x<t.length;x++){var W,F,j=t[x],H=j.name;if(H!=="nbins"||!N.sizeFound){for(c=0;c<l.length;c++){if(a=l[c],h=N.dirs[c],W=j.aStr[h],p(a._input,W).get()!==void 0){N[H]=b(W),N[H+"Found"]=!0;break}(F=(a._autoBin||{})[h]||{})[H]&&p(a,W).set(F[H])}if(H==="start"||H==="end")for(;c<l.length;c++)(a=l[c])["_"+h+"bingroup"]&&b(W,(F=(a._autoBin||{})[h]||{})[H]);H!=="nbins"||N.sizeFound||N.nbinsFound||(a=l[0],N[H]=b(W))}}}}},6616:function(ee,R,e){var M=e(24040),k=e(3400),o=e(76308),T=e(31508).handleText,_=e(55592),p=e(40196);ee.exports=function(s,t,i,r){function n(y,m){return k.coerce(s,t,p,y,m)}var a=n("x"),l=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var u=n("textposition");T(s,t,r,n,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var h=n("orientation",l&&!a?"h":"v"),c=h==="v"?"x":"y",x=h==="v"?"y":"x",d=a&&l?Math.min(k.minRowLength(a)&&k.minRowLength(l)):k.minRowLength(t[c]||[]);if(d){t._length=d,M.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],r),t[x]&&n("histfunc"),n("histnorm"),n("autobin"+c),_(s,t,n,i,r),k.coerceSelectionMarkerOpacity(t,n);var v=(t.marker.line||{}).color,g=M.getComponentMethod("errorbars","supplyDefaults");g(s,t,v||o.defaultLine,{axis:"y"}),g(s,t,v||o.defaultLine,{axis:"x",inherit:"y"}),n("zorder")}else t.visible=!1}},84980:function(ee){ee.exports=function(R,e,M,k,o){if(R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(R.z=e.zLabelVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),!(M.cumulative||{}).enabled){var T,_=Array.isArray(o)?k[0].pts[o[0]][o[1]]:k[o].pts;if(R.pointNumbers=_,R.binNumber=R.pointNumber,delete R.pointNumber,delete R.pointIndex,M._indexToPoints){T=[];for(var p=0;p<_.length;p++)T=T.concat(M._indexToPoints[_[p]])}else T=_;R.pointIndices=T}return R}},43339:function(ee,R,e){var M=e(63400).hoverPoints,k=e(54460).hoverLabelText;ee.exports=function(o,T,_,p,s){var t=M(o,T,_,p,s);if(t){var i=(o=t[0]).cd[o.index],r=o.cd[0].trace;if(!r.cumulative.enabled){var n=r.orientation==="h"?"y":"x";o[n+"Label"]=k(o[n+"a"],[i.ph0,i.ph1],r[n+"hoverformat"])}return t}}},42600:function(ee,R,e){ee.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(ee){ee.exports={percent:function(R,e){for(var M=R.length,k=100/e,o=0;o<M;o++)R[o]*=k},probability:function(R,e){for(var M=R.length,k=0;k<M;k++)R[k]/=e},density:function(R,e,M,k){var o=R.length;k=k||1;for(var T=0;T<o;T++)R[T]*=M[T]*k},"probability density":function(R,e,M,k){var o=R.length;k&&(e/=k);for(var T=0;T<o;T++)R[T]*=M[T]/e}}},37008:function(ee,R,e){var M=e(40196),k=e(11120),o=e(83328),T=e(45464),_=e(29736).axisHoverFormat,p=e(21776).Ks,s=e(21776).Gw,t=e(49084),i=e(92880).extendFlat;ee.exports=i({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:k("x"),nbinsy:M.nbinsy,ybins:k("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:i({},M.bingroup,{}),xbingroup:i({},M.bingroup,{}),ybingroup:i({},M.bingroup,{}),xgap:o.xgap,ygap:o.ygap,zsmooth:o.zsmooth,xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:p({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:o.textfont,showlegend:i({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(ee,R,e){var M=e(3400),k=e(54460),o=e(16964),T=e(10648),_=e(2e3),p=e(67712),s=e(35852).calcAllAutoBins;function t(n,a,l,u){var h,c=new Array(n);if(u)for(h=0;h<n;h++)c[h]=1/(a[h+1]-a[h]);else{var x=1/l;for(h=0;h<n;h++)c[h]=x}return c}function i(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,l,u,h,c){var x,d=n.length-1,v=new Array(d),g=p(l,u,n,h,c);for(x=0;x<d;x++){var y=(a||[])[x];v[x]=y===void 0?[g(n[x]),g(n[x+1],!0)]:[y,y]}return v}ee.exports=function(n,a){var l,u,h,c,x=k.getFromId(n,a.xaxis),d=k.getFromId(n,a.yaxis),v=a.xcalendar,g=a.ycalendar,y=function(dt){return x.r2c(dt,0,v)},m=function(dt){return d.r2c(dt,0,g)},b=s(n,a,x,"x"),f=b[0],S=b[1],w=s(n,a,d,"y"),E=w[0],O=w[1],C=a._length;S.length>C&&S.splice(C,S.length-C),O.length>C&&O.splice(C,O.length-C);var P=[],D=[],U=[],I=typeof f.size=="string",N=typeof E.size=="string",W=[],F=[],j=I?W:f,H=N?F:E,te=0,Q=[],$=[],K=a.histnorm,X=a.histfunc,Y=K.indexOf("density")!==-1,re=X==="max"||X==="min"?null:0,se=o.count,ae=T[K],ce=!1,fe=[],he=[],ve="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";ve&&X!=="count"&&(ce=X==="avg",se=o[X]);var ye=f.size,me=y(f.start),Me=y(f.end)+(me-k.tickIncrement(me,ye,!1,v))/1e6;for(l=me;l<Me;l=k.tickIncrement(l,ye,!1,v))D.push(re),W.push(l),ce&&U.push(0);W.push(l);var Pe,ge=D.length,oe=(l-me)/ge,ie=(Pe=me+oe/2,x.c2r(Pe,0,v)),de=E.size,Se=m(E.start),_e=m(E.end)+(Se-k.tickIncrement(Se,de,!1,g))/1e6;for(l=Se;l<_e;l=k.tickIncrement(l,de,!1,g)){P.push(D.slice()),F.push(l);var we=new Array(ge);for(u=0;u<ge;u++)we[u]=[];$.push(we),ce&&Q.push(U.slice())}F.push(l);var Ae=P.length,Oe=(l-Se)/Ae,ze=function(dt){return d.c2r(dt,0,g)}(Se+Oe/2);Y&&(fe=t(D.length,j,oe,I),he=t(P.length,H,Oe,N)),I||x.type!=="date"||(j=i(y,j)),N||d.type!=="date"||(H=i(m,H));var pe=!0,be=!0,ke=new Array(ge),Ie=new Array(Ae),Ee=1/0,Be=1/0,Ve=1/0,Ze=1/0;for(l=0;l<C;l++){var rt=S[l],it=O[l];h=M.findBin(rt,j),c=M.findBin(it,H),h>=0&&h<ge&&c>=0&&c<Ae&&(te+=se(h,l,P[c],ve,Q[c]),$[c][h].push(l),pe&&(ke[h]===void 0?ke[h]=rt:ke[h]!==rt&&(pe=!1)),be&&(Ie[c]===void 0?Ie[c]=it:Ie[c]!==it&&(be=!1)),Ee=Math.min(Ee,rt-W[h]),Be=Math.min(Be,W[h+1]-rt),Ve=Math.min(Ve,it-F[c]),Ze=Math.min(Ze,F[c+1]-it))}if(ce)for(c=0;c<Ae;c++)te+=_(P[c],Q[c]);if(ae)for(c=0;c<Ae;c++)ae(P[c],te,fe,he[c]);return{x:S,xRanges:r(W,pe&&ke,Ee,Be,x,v),x0:ie,dx:oe,y:O,yRanges:r(F,be&&Ie,Ve,Ze,d,g),y0:ze,dy:Oe,z:P,pts:$}}},99784:function(ee,R,e){var M=e(3400),k=e(56408),o=e(82748),T=e(27260),_=e(39096),p=e(37008);ee.exports=function(s,t,i,r){function n(a,l){return M.coerce(s,t,p,a,l)}k(s,t,n,r),t.visible!==!1&&(o(s,t,n,r),T(s,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),_(n,r),n("xhoverformat"),n("yhoverformat"))}},59576:function(ee,R,e){var M=e(55512),k=e(54460).hoverLabelText;ee.exports=function(o,T,_,p,s){var t=M(o,T,_,p,s);if(t){var i=(o=t[0]).index,r=i[0],n=i[1],a=o.cd[0],l=a.trace,u=a.xRanges[n],h=a.yRanges[r];return o.xLabel=k(o.xa,[u[0],u[1]],l.xhoverformat),o.yLabel=k(o.ya,[h[0],h[1]],l.yhoverformat),t}}},21536:function(ee,R,e){ee.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(ee,R,e){var M=e(24040),k=e(3400);ee.exports=function(o,T,_,p){var s=_("x"),t=_("y"),i=k.minRowLength(s),r=k.minRowLength(t);i&&r?(T._length=Math.min(i,r),M.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],p),(_("z")||_("marker.color"))&&_("histfunc"),_("histnorm"),_("autobinx"),_("autobiny")):T.visible=!1}},81220:function(ee,R,e){var M=e(37008),k=e(67104),o=e(49084),T=e(29736).axisHoverFormat,_=e(92880).extendFlat;ee.exports=_({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:_({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},o("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(ee,R,e){var M=e(3400),k=e(56408),o=e(84952),T=e(97680),_=e(39096),p=e(81220);ee.exports=function(s,t,i,r){function n(a,l){return M.coerce(s,t,p,a,l)}k(s,t,n,r),t.visible!==!1&&(o(s,t,n,function(a){return M.coerce2(s,t,p,a)}),T(s,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&_(n,r))}},65664:function(ee,R,e){ee.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,_=e(74996),p=e(424),s=e(40516),t=e(32984),i=e(92880).extendFlat,r=e(98192).c;ee.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:p.marker.colors,line:p.marker.line,pattern:r,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:p.leaf,pathbar:s.pathbar,text:_.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:_.hovertext,hoverinfo:p.hoverinfo,hovertemplate:M({},{keys:t.eventDataKeys}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:_.sort,root:p.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},59564:function(ee,R,e){var M=e(7316);R.name="icicle",R.plot=function(k,o,T,_){M.plotBasePlot(R.name,k,o,T,_)},R.clean=function(k,o,T,_){M.cleanBasePlot(R.name,k,o,T,_)}},73876:function(ee,R,e){var M=e(3776);R.r=function(k,o){return M.calc(k,o)},R.q=function(k){return M._runCrossTraceCalc("icicle",k)}},7045:function(ee,R,e){var M=e(3400),k=e(97376),o=e(76308),T=e(86968).Q,_=e(31508).handleText,p=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,r=t.handleDefaults;ee.exports=function(n,a,l,u){function h(m,b){return M.coerce(n,a,k,m,b)}var c=h("labels"),x=h("parents");if(c&&c.length&&x&&x.length){var d=h("values");d&&d.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var v=h("text");h("texttemplate"),a.texttemplate||h("textinfo",M.isArrayOrTypedArray(v)?"text+label":"label"),h("hovertext"),h("hovertemplate");var g=h("pathbar.visible");_(n,a,u,h,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),s(n,a,u,h);var y=a._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis;y&&r(n,a,u,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",y?1:.7),a._hovered={marker:{line:{width:2,color:o.contrast(u.paper_bgcolor)}}},g&&(h("pathbar.thickness",a.pathbar.textfont.size+2*p),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),T(a,u,h),a._length=null}else a.visible=!1}},67880:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616),T=e(72736),_=e(25132),p=e(47192).styleOne,s=e(32984),t=e(78176),i=e(45716),r=e(96488).formatSliceLabel,n=!1;ee.exports=function(a,l,u,h,c){var x=c.width,d=c.height,v=c.viewX,g=c.viewY,y=c.pathSlice,m=c.toMoveInsideSlice,b=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,O=c.prevEntry,C=a._context.staticPlot,P=a._fullLayout,D=l[0].trace,U=D.textposition.indexOf("left")!==-1,I=D.textposition.indexOf("right")!==-1,N=D.textposition.indexOf("bottom")!==-1,W=_(u,[x,d],{flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,orientation:D.tiling.orientation,pad:{inner:D.tiling.pad},maxDepth:D._maxDepth}).descendants(),F=1/0,j=-1/0;W.forEach(function(K){var X=K.depth;X>=D._maxDepth?(K.x0=K.x1=(K.x0+K.x1)/2,K.y0=K.y1=(K.y0+K.y1)/2):(F=Math.min(F,X),j=Math.max(j,X))}),h=h.data(W,t.getPtId),D._maxVisibleLayers=isFinite(j)?j-F+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[x,d],y),h.order();var H=null;if(f&&O){var te=t.getPtId(O);h.each(function(K){H===null&&t.getPtId(K)===te&&(H={x0:K.x0,x1:K.x1,y0:K.y0,y1:K.y1})})}var Q=function(){return H||{x0:0,x1:x,y0:0,y1:d}},$=h;return f&&($=$.transition().each("end",function(){var K=M.select(this);t.setSliceCursor(K,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),$.each(function(K){K._x0=v(K.x0),K._x1=v(K.x1),K._y0=g(K.y0),K._y1=g(K.y1),K._hoverX=v(K.x1-D.tiling.pad),K._hoverY=g(N?K.y1-D.tiling.pad/2:K.y0+D.tiling.pad/2);var X=M.select(this),Y=k.ensureSingle(X,"path","surface",function(ce){ce.style("pointer-events",C?"none":"all")});f?Y.transition().attrTween("d",function(ce){var fe=w(ce,n,Q(),[x,d],{orientation:D.tiling.orientation,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1});return function(he){return y(fe(he))}}):Y.attr("d",y),X.call(i,u,a,l,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),Y.call(p,K,D,a,{hovered:!1}),K.x0===K.x1||K.y0===K.y1?K._text="":K._text=r(K,u,D,l,P)||"";var re=k.ensureSingle(X,"g","slicetext"),se=k.ensureSingle(re,"text","",function(ce){ce.attr("data-notex",1)}),ae=k.ensureUniformFontSize(a,t.determineTextFont(D,K,P.font));se.text(K._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":U?"start":"middle").call(o.font,ae).call(T.convertToTspans,a),K.textBB=o.bBox(se.node()),K.transform=m(K,{fontSize:ae.size}),K.transform.fontSize=ae.size,f?se.transition().attrTween("transform",function(ce){var fe=E(ce,n,Q(),[x,d]);return function(he){return b(fe(he))}}):se.attr("transform",b(K))}),H}},29044:function(ee,R,e){ee.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(ee){ee.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(ee,R,e){var M=e(3400),k=e(90676);ee.exports=function(o,T){function _(p,s){return M.coerce(o,T,k,p,s)}_("iciclecolorway",T.colorway),_("extendiciclecolors")}},25132:function(ee,R,e){var M=e(74148),k=e(83024);ee.exports=function(o,T,_){var p=_.flipX,s=_.flipY,t=_.orientation==="h",i=_.maxDepth,r=T[0],n=T[1];i&&(r=(o.height+1)*T[0]/Math.min(o.height+1,i),n=(o.height+1)*T[1]/Math.min(o.height+1,i));var a=M.partition().padding(_.pad.inner).size(t?[T[1],r]:[T[0],n])(o);return(t||p||s)&&k(a,T,{swapXY:t,flipX:p,flipY:s}),a}},38364:function(ee,R,e){var M=e(95808),k=e(67880);ee.exports=function(o,T,_,p){return M(o,T,_,p,{type:"icicle",drawDescendants:k})}},47192:function(ee,R,e){var M=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,_=e(60404);function p(s,t,i,r){var n=t.data.data,a=!t.children,l=n.i,u=o.castOption(i,l,"marker.line.color")||k.defaultLine,h=o.castOption(i,l,"marker.line.width")||0;s.call(_,t,i,r).style("stroke-width",h).call(k.stroke,u).style("opacity",a?i.leaf.opacity:null)}ee.exports={style:function(s){var t=s._fullLayout._iciclelayer.selectAll(".trace");T(s,t,"icicle"),t.each(function(i){var r=M.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){M.select(this).call(p,a,n,s)})})},styleOne:p}},95188:function(ee,R,e){for(var M=e(45464),k=e(52904).zorder,o=e(21776).Ks,T=e(92880).extendFlat,_=e(47797).colormodel,p=["rgb","rgba","rgba256","hsl","hsla"],s=[],t=[],i=0;i<p.length;i++){var r=_[p[i]];s.push("For the `"+p[i]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),t.push("For the `"+p[i]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}ee.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:p,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),zorder:k,transforms:void 0})},93336:function(ee,R,e){var M=e(3400),k=e(47797),o=e(38248),T=e(54460),_=e(3400).maxRowLength,p=e(18712).i;function s(i,r,n,a){return function(l){return M.constrain((l-i)*r,n,a)}}function t(i,r){return function(n){return M.constrain(n,i,r)}}ee.exports=function(i,r){var n,a;if(r._hasZ)n=r.z.length,a=_(r.z);else if(r._hasSource){var l=p(r.source);n=l.height,a=l.width}var u,h=T.getFromId(i,r.xaxis||"x"),c=T.getFromId(i,r.yaxis||"y"),x=h.d2c(r.x0)-r.dx/2,d=c.d2c(r.y0)-r.dy/2,v=[x,x+a*r.dx],g=[d,d+n*r.dy];if(h&&h.type==="log")for(u=0;u<a;u++)v.push(x+u*r.dx);if(c&&c.type==="log")for(u=0;u<n;u++)g.push(d+u*r.dy);return r._extremes[h._id]=T.findExtremes(h,v),r._extremes[c._id]=T.findExtremes(c,g),r._scaler=function(y){var m=k.colormodel[y.colormodel],b=(m.colormodel||y.colormodel).length;y._sArray=[];for(var f=0;f<b;f++)m.min[f]!==y.zmin[f]||m.max[f]!==y.zmax[f]?y._sArray.push(s(y.zmin[f],(m.max[f]-m.min[f])/(y.zmax[f]-y.zmin[f]),m.min[f],m.max[f])):y._sArray.push(t(m.min[f],m.max[f]));return function(S){for(var w=S.slice(0,b),E=0;E<b;E++){var O=w[E];if(!o(O))return!1;w[E]=y._sArray[E](O)}return w}}(r),[{x0:x,y0:d,z:r.z,w:a,h:n}]}},47797:function(ee){ee.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(R){return R.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(R){return R.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(R){return R.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(R){var e=R.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(R){var e=R.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["°","%","%",""]}}}},13188:function(ee,R,e){var M=e(3400),k=e(95188),o=e(47797),T=e(81792).IMAGE_URL_PREFIX;ee.exports=function(_,p){function s(r,n){return M.coerce(_,p,k,r,n)}s("source"),p.source&&!p.source.match(T)&&delete p.source,p._hasSource=!!p.source;var t,i=s("z");p._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),p._hasZ||p._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),p._hasZ?(s("colormodel","rgb"),s("zmin",(t=o.colormodel[p.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):p._hasSource&&(p.colormodel="rgba256",t=o.colormodel[p.colormodel],p.zmin=t.zminDflt,p.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),p._length=null,s("zorder")):p.visible=!1}},79972:function(ee){ee.exports=function(R,e){return"xVal"in e&&(R.x=e.xVal),"yVal"in e&&(R.y=e.yVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R.color=e.color,R.colormodel=e.trace.colormodel,R.z||(R.z=e.color),R}},18712:function(ee,R,e){var M=e(19480),k=e(81792).IMAGE_URL_PREFIX,o=e(33576).Buffer;R.i=function(T){var _=T.replace(k,""),p=new o(_,"base64");return M(p)}},24892:function(ee,R,e){var M=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(47797);ee.exports=function(_,p,s){var t=_.cd[0],i=t.trace,r=_.xa,n=_.ya;if(!(M.inbox(p-t.x0,p-(t.x0+t.w*i.dx),0)>0||M.inbox(s-t.y0,s-(t.y0+t.h*i.dy),0)>0)){var a,l=Math.floor((p-t.x0)/i.dx),u=Math.floor(Math.abs(s-t.y0)/i.dy);if(i._hasZ?a=t.z[u][l]:i._hasSource&&(a=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),a){var h,c=t.hi||i.hoverinfo;if(c){var x=c.split("+");x.indexOf("all")!==-1&&(x=["color"]),x.indexOf("color")!==-1&&(h=!0)}var d,v=T.colormodel[i.colormodel],g=v.colormodel||i.colormodel,y=g.length,m=i._scaler(a),b=v.suffix,f=[];(i.hovertemplate||h)&&(f.push("["+[m[0]+b[0],m[1]+b[1],m[2]+b[2]].join(", ")),y===4&&f.push(", "+m[3]+b[3]),f.push("]"),f=f.join(""),_.extraText=g.toUpperCase()+": "+f),o(i.hovertext)&&o(i.hovertext[u])?d=i.hovertext[u][l]:o(i.text)&&o(i.text[u])&&(d=i.text[u][l]);var S=n.c2p(t.y0+(u+.5)*i.dy),w=t.x0+(l+.5)*i.dx,E=t.y0+(u+.5)*i.dy,O="["+a.slice(0,i.colormodel.length).join(", ")+"]";return[k.extendFlat(_,{index:[u,l],x0:r.c2p(t.x0+l*i.dx),x1:r.c2p(t.x0+(l+1)*i.dx),y0:S,y1:S,color:m,xVal:w,xLabelVal:w,yVal:E,yLabelVal:E,zLabelVal:O,text:d,hovertemplateLabels:{zLabel:O,colorLabel:f,"color[0]Label":m[0]+b[0],"color[1]Label":m[1]+b[1],"color[2]Label":m[2]+b[2],"color[3]Label":m[3]+b[3]}})]}}}},48928:function(ee,R,e){ee.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(ee,R,e){var M=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),_=e(47797),p=e(9188),s=e(2264).STYLE;ee.exports=function(t,i,r,n){var a=i.xaxis,l=i.yaxis,u=!t._context._exportedPlot&&p();k.makeTraceGroups(n,r,"im").each(function(h){var c=M.select(this),x=h[0],d=x.trace,v=(d.zsmooth==="fast"||d.zsmooth===!1&&u)&&!d._hasZ&&d._hasSource&&a.type==="linear"&&l.type==="linear";d._realImage=v;var g,y,m,b,f,S,w=x.z,E=x.x0,O=x.y0,C=x.w,P=x.h,D=d.dx,U=d.dy;for(S=0;g===void 0&&S<C;)g=a.c2p(E+S*D),S++;for(S=C;y===void 0&&S>0;)y=a.c2p(E+S*D),S--;for(S=0;b===void 0&&S<P;)b=l.c2p(O+S*U),S++;for(S=P;f===void 0&&S>0;)f=l.c2p(O+S*U),S--;y<g&&(m=y,y=g,g=m),f<b&&(m=b,b=f,f=m),v||(g=Math.max(-.5*a._length,g),y=Math.min(1.5*a._length,y),b=Math.max(-.5*l._length,b),f=Math.min(1.5*l._length,f));var I=Math.round(y-g),N=Math.round(f-b);if(I<=0||N<=0)c.selectAll("image").data([]).exit().remove();else{var W=c.selectAll("image").data([h]);W.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),W.exit().remove();var F=d.zsmooth===!1?s:"";if(v){var j=k.simpleMap(a.range,a.r2l),H=k.simpleMap(l.range,l.r2l),te=j[1]<j[0],Q=H[1]>H[0];if(te||Q){var $=g+I/2,K=b+N/2;F+="transform:"+o($+"px",K+"px")+"scale("+(te?-1:1)+","+(Q?-1:1)+")"+o(-$+"px",-K+"px")+";"}}W.attr("style",F);var X=new Promise(function(re){if(d._hasZ)re();else if(d._hasSource)if(d._canvas&&d._canvas.el.width===C&&d._canvas.el.height===P&&d._canvas.source===d.source)re();else{var se=document.createElement("canvas");se.width=C,se.height=P;var ae=se.getContext("2d",{willReadFrequently:!0});d._image=d._image||new Image;var ce=d._image;ce.onload=function(){ae.drawImage(ce,0,0),d._canvas={el:se,source:d.source},re()},ce.setAttribute("src",d.source)}}).then(function(){var re,se;if(d._hasZ)se=Y(function(ce,fe){var he=w[fe][ce];return k.isTypedArray(he)&&(he=Array.from(he)),he}),re=se.toDataURL("image/png");else if(d._hasSource)if(v)re=d.source;else{var ae=d._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,C,P).data;se=Y(function(ce,fe){var he=4*(fe*C+ce);return[ae[he],ae[he+1],ae[he+2],ae[he+3]]}),re=se.toDataURL("image/png")}W.attr({"xlink:href":re,height:N,width:I,x:g,y:b})});t._promises.push(X)}function Y(re){var se=document.createElement("canvas");se.width=I,se.height=N;var ae,ce=se.getContext("2d",{willReadFrequently:!0}),fe=function(de){return k.constrain(Math.round(a.c2p(E+de*D)-g),0,I)},he=function(de){return k.constrain(Math.round(l.c2p(O+de*U)-b),0,N)},ve=_.colormodel[d.colormodel],ye=ve.colormodel||d.colormodel,me=ve.fmt;for(S=0;S<x.w;S++){var Me=fe(S),Pe=fe(S+1);if(Pe!==Me&&!isNaN(Pe)&&!isNaN(Me))for(var ge=0;ge<x.h;ge++){var oe=he(ge),ie=he(ge+1);ie===oe||isNaN(ie)||isNaN(oe)||!re(S,ge)||(ae=d._scaler(re(S,ge)),ce.fillStyle=ae?ye+"("+me(ae).join(",")+")":"rgba(0,0,0,0)",ce.fillRect(Me,oe,Pe-Me,ie-oe))}}return se}})}},28576:function(ee,R,e){var M=e(33428);ee.exports=function(k){M.select(k).selectAll(".im image").style("opacity",function(o){return o[0].trace.opacity})}},89864:function(ee,R,e){var M=e(92880).extendFlat,k=e(92880).extendDeep,o=e(67824).overrideAll,T=e(25376),_=e(22548),p=e(86968).u,s=e(94724),t=e(31780).templatedArray,i=e(48164),r=e(29736).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:_.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",k({},a,{range:l}));ee.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:p({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:o({range:l,visible:M({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:M({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:M({},a.line.color,{}),width:M({},a.line.width,{dflt:1}),editType:"plot"},thickness:M({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(ee,R,e){var M=e(7316);R.name="indicator",R.plot=function(k,o,T,_){M.plotBasePlot(R.name,k,o,T,_)},R.clean=function(k,o,T,_){M.cleanBasePlot(R.name,k,o,T,_)}},79136:function(ee){ee.exports={calc:function(R,e){var M=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var o=e._lastValue,T=o;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),M[0]={y:k,lastY:o,delta:k-T,relativeDelta:(k-T)/T},M}}},12096:function(ee){ee.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(ee,R,e){var M=e(3400),k=e(89864),o=e(86968).Q,T=e(31780),_=e(51272),p=e(12096),s=e(26332),t=e(25404),i=e(95936),r=e(42568);function n(a,l){function u(h,c){return M.coerce(a,l,k.gauge.steps,h,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}ee.exports={supplyDefaults:function(a,l,u,h){function c(D,U){return M.coerce(a,l,k,D,U)}o(l,h,c),c("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var x=c("value");l._range=[0,typeof x=="number"?1.5*x:1];var d,v,g=new Array(2);if(l._hasNumber){c("number.valueformat");var y=M.extendFlat({},h.font);y.size=void 0,M.coerceFont(c,"number.font",y),l.number.font.size===void 0&&(l.number.font.size=p.defaultNumberFontSize,g[0]=!0),c("number.prefix"),c("number.suffix"),d=l.number.font.size}if(l._hasDelta){var m=M.extendFlat({},h.font);m.size=void 0,M.coerceFont(c,"delta.font",m),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(d||p.defaultNumberFontSize),g[1]=!0),c("delta.reference",l.value),c("delta.relative"),c("delta.valueformat",l.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),v=l.delta.font.size}l._scaleNumbers=(!l._hasNumber||g[0])&&(!l._hasDelta||g[1])||!1;var b,f,S,w,E=M.extendFlat({},h.font);function O(D,U){return M.coerce(b,f,k.gauge,D,U)}function C(D,U){return M.coerce(S,w,k.gauge.axis,D,U)}if(E.size=.25*(d||v||p.defaultNumberFontSize),M.coerceFont(c,"title.font",E),c("title.text"),l._hasGauge){(b=a.gauge)||(b={}),f=T.newContainer(l,"gauge"),O("shape"),(l._isBullet=l.gauge.shape==="bullet")||c("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||c("align","center"),O("bgcolor",h.paper_bgcolor),O("borderwidth"),O("bordercolor"),O("bar.color"),O("bar.line.color"),O("bar.line.width"),O("bar.thickness",p.valueThickness*(l.gauge.shape==="bullet"?.5:1)),_(b,f,{name:"steps",handleItemDefaults:n}),O("threshold.value"),O("threshold.thickness"),O("threshold.line.width"),O("threshold.line.color"),S={},b&&(S=b.axis||{}),w=T.newContainer(f,"axis"),C("visible"),l._range=C("range",l._range);var P={font:h.font,noAutotickangles:!0,outerTicks:!0};s(S,w,C,"linear"),r(S,w,C,"linear",P),i(S,w,C,"linear",P),t(S,w,C,P)}else c("title.align","center"),c("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},43480:function(ee,R,e){ee.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(ee,R,e){var M=e(33428),k=e(67756).qy,o=e(67756).Gz,T=e(3400),_=T.strScale,p=T.strTranslate,s=T.rad2deg,t=e(84284).MID_SHIFT,i=e(43616),r=e(12096),n=e(72736),a=e(54460),l=e(28336),u=e(37668),h=e(94724),c=e(76308),x={left:"start",center:"middle",right:"end"},d={left:0,center:.5,right:1},v=/[yzafpnµmkMGTPEZY]/;function g(w){return w&&w.duration>0}function y(w){w.each(function(E){c.stroke(M.select(this),E.line.color)}).each(function(E){c.fill(M.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(w,E,O){var C=w._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:O,showline:!0},E),D={type:"linear",_id:"x"+E._id},U={letter:"x",font:C.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function I(N,W){return T.coerce(P,D,h,N,W)}return l(P,D,I,U,C),u(P,D,I,U),D}function b(w,E,O){return[Math.min(E/w.width,O/w.height),w,E+"x"+O]}function f(w,E,O,C){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),D=M.select(P);return D.text(w).attr("x",0).attr("y",0).attr("text-anchor",O).attr("data-unformatted",w).call(n.convertToTspans,C).call(i.font,E),i.bBox(D.node())}function S(w,E,O,C,P,D){var U="_cache"+E;w[U]&&w[U].key===P||(w[U]={key:P,value:O});var I=T.aggNums(D,null,[w[U].value,C],2);return w[U].value=I,I}ee.exports=function(w,E,O,C){var P,D=w._fullLayout;g(O)&&C&&(P=C()),T.makeTraceGroups(D._indicatorlayer,E,"trace").each(function(U){var I,N,W,F,j,H=U[0].trace,te=M.select(this),Q=H._hasGauge,$=H._isAngular,K=H._isBullet,X=H.domain,Y={w:D._size.w*(X.x[1]-X.x[0]),h:D._size.h*(X.y[1]-X.y[0]),l:D._size.l+D._size.w*X.x[0],r:D._size.r+D._size.w*(1-X.x[1]),t:D._size.t+D._size.h*(1-X.y[1]),b:D._size.b+D._size.h*X.y[0]},re=Y.l+Y.w/2,se=Y.t+Y.h/2,ae=Math.min(Y.w/2,Y.h),ce=r.innerRadius*ae,fe=H.align||"center";if(N=se,Q){if($&&(I=re,N=se+ae/2,W=function(oe){return function(ie,de){return[de/Math.sqrt(ie.width/2*(ie.width/2)+ie.height*ie.height),ie,de]}(oe,.9*ce)}),K){var he=r.bulletPadding,ve=1-r.bulletNumberDomainSize+he;I=Y.l+(ve+(1-ve)*d[fe])*Y.w,W=function(oe){return b(oe,(r.bulletNumberDomainSize-he)*Y.w,Y.h)}}}else I=Y.l+d[fe]*Y.w,W=function(oe){return b(oe,Y.w,Y.h)};(function(oe,ie,de,Se){var _e,we,Ae,Oe=de[0].trace,ze=Se.numbersX,pe=Se.numbersY,be=Oe.align||"center",ke=x[be],Ie=Se.transitionOpts,Ee=Se.onComplete,Be=T.ensureSingle(ie,"g","numbers"),Ve=[];Oe._hasNumber&&Ve.push("number"),Oe._hasDelta&&(Ve.push("delta"),Oe.delta.position==="left"&&Ve.reverse());var Ze=Be.selectAll("text").data(Ve);function rt(Ot,Pt,Mt,He){if(!Ot.match("s")||Mt>=0==He>=0||Pt(Mt).slice(-1).match(v)||Pt(He).slice(-1).match(v))return Pt;var Ye=Ot.slice().replace("s","f").replace(/\d+/,function(We){return parseInt(We)-1}),Ne=m(oe,{tickformat:Ye});return function(We){return Math.abs(We)<1?a.tickText(Ne,We).text:Pt(We)}}Ze.enter().append("text"),Ze.attr("text-anchor",function(){return ke}).attr("class",function(Ot){return Ot}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ze.exit().remove();var it,dt=Oe.mode+Oe.align;if(Oe._hasDelta&&(it=function(){var Ot=m(oe,{tickformat:Oe.delta.valueformat},Oe._range);Ot.setScale(),a.prepTicks(Ot);var Pt=function(Re){return a.tickText(Ot,Re).text},Mt=Oe.delta.suffix,He=Oe.delta.prefix,Ye=function(Re){return Oe.delta.relative?Re.relativeDelta:Re.delta},Ne=function(Re,Fe){return Re===0||typeof Re!="number"||isNaN(Re)?"-":(Re>0?Oe.delta.increasing.symbol:Oe.delta.decreasing.symbol)+He+Fe(Re)+Mt},We=function(Re){return Re.delta>=0?Oe.delta.increasing.color:Oe.delta.decreasing.color};Oe._deltaLastValue===void 0&&(Oe._deltaLastValue=Ye(de[0]));var ot=Be.select("text.delta");function tt(){ot.text(Ne(Ye(de[0]),Pt)).call(c.fill,We(de[0])).call(n.convertToTspans,oe)}return ot.call(i.font,Oe.delta.font).call(c.fill,We({delta:Oe._deltaLastValue})),g(Ie)?ot.transition().duration(Ie.duration).ease(Ie.easing).tween("text",function(){var Re=M.select(this),Fe=Ye(de[0]),nt=Oe._deltaLastValue,Ge=rt(Oe.delta.valueformat,Pt,nt,Fe),ct=o(nt,Fe);return Oe._deltaLastValue=Fe,function(pt){Re.text(Ne(ct(pt),Ge)),Re.call(c.fill,We({delta:ct(pt)}))}}).each("end",function(){tt(),Ee&&Ee()}).each("interrupt",function(){tt(),Ee&&Ee()}):tt(),we=f(Ne(Ye(de[0]),Pt),Oe.delta.font,ke,oe),ot}(),dt+=Oe.delta.position+Oe.delta.font.size+Oe.delta.font.family+Oe.delta.valueformat,dt+=Oe.delta.increasing.symbol+Oe.delta.decreasing.symbol,Ae=we),Oe._hasNumber&&(function(){var Ot=m(oe,{tickformat:Oe.number.valueformat},Oe._range);Ot.setScale(),a.prepTicks(Ot);var Pt=function(We){return a.tickText(Ot,We).text},Mt=Oe.number.suffix,He=Oe.number.prefix,Ye=Be.select("text.number");function Ne(){var We=typeof de[0].y=="number"?He+Pt(de[0].y)+Mt:"-";Ye.text(We).call(i.font,Oe.number.font).call(n.convertToTspans,oe)}g(Ie)?Ye.transition().duration(Ie.duration).ease(Ie.easing).each("end",function(){Ne(),Ee&&Ee()}).each("interrupt",function(){Ne(),Ee&&Ee()}).attrTween("text",function(){var We=M.select(this),ot=o(de[0].lastY,de[0].y);Oe._lastValue=de[0].y;var tt=rt(Oe.number.valueformat,Pt,de[0].lastY,de[0].y);return function(Re){We.text(He+tt(ot(Re))+Mt)}}):Ne(),_e=f(He+Pt(de[0].y)+Mt,Oe.number.font,ke,oe)}(),dt+=Oe.number.font.size+Oe.number.font.family+Oe.number.valueformat+Oe.number.suffix+Oe.number.prefix,Ae=_e),Oe._hasDelta&&Oe._hasNumber){var vt,ht,Qe=[(_e.left+_e.right)/2,(_e.top+_e.bottom)/2],Je=[(we.left+we.right)/2,(we.top+we.bottom)/2],Tt=.75*Oe.delta.font.size;Oe.delta.position==="left"&&(vt=S(Oe,"deltaPos",0,-1*(_e.width*d[Oe.align]+we.width*(1-d[Oe.align])+Tt),dt,Math.min),ht=Qe[1]-Je[1],Ae={width:_e.width+we.width+Tt,height:Math.max(_e.height,we.height),left:we.left+vt,right:_e.right,top:Math.min(_e.top,we.top+ht),bottom:Math.max(_e.bottom,we.bottom+ht)}),Oe.delta.position==="right"&&(vt=S(Oe,"deltaPos",0,_e.width*(1-d[Oe.align])+we.width*d[Oe.align]+Tt,dt,Math.max),ht=Qe[1]-Je[1],Ae={width:_e.width+we.width+Tt,height:Math.max(_e.height,we.height),left:_e.left,right:we.right+vt,top:Math.min(_e.top,we.top+ht),bottom:Math.max(_e.bottom,we.bottom+ht)}),Oe.delta.position==="bottom"&&(vt=null,ht=we.height,Ae={width:Math.max(_e.width,we.width),height:_e.height+we.height,left:Math.min(_e.left,we.left),right:Math.max(_e.right,we.right),top:_e.bottom-_e.height,bottom:_e.bottom+we.height}),Oe.delta.position==="top"&&(vt=null,ht=_e.top,Ae={width:Math.max(_e.width,we.width),height:_e.height+we.height,left:Math.min(_e.left,we.left),right:Math.max(_e.right,we.right),top:_e.bottom-_e.height-we.height,bottom:_e.bottom}),it.attr({dx:vt,dy:ht})}(Oe._hasNumber||Oe._hasDelta)&&Be.attr("transform",function(){var Ot=Se.numbersScaler(Ae);dt+=Ot[2];var Pt,Mt=S(Oe,"numbersScale",1,Ot[0],dt,Math.min);Oe._scaleNumbers||(Mt=1),Pt=Oe._isAngular?pe-Mt*Ae.bottom:pe-Mt*(Ae.top+Ae.bottom)/2,Oe._numbersTop=Mt*Ae.top+Pt;var He=Ae[be];be==="center"&&(He=(Ae.left+Ae.right)/2);var Ye=ze-Mt*He;return Ye=S(Oe,"numbersTranslate",0,Ye,dt,Math.max),p(Ye,Pt)+_(Mt)})})(w,te,U,{numbersX:I,numbersY:N,numbersScaler:W,transitionOpts:O,onComplete:P}),Q&&(F={range:H.gauge.axis.range,color:H.gauge.bgcolor,line:{color:H.gauge.bordercolor,width:0},thickness:1},j={range:H.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:H.gauge.bordercolor,width:H.gauge.borderwidth},thickness:1});var ye=te.selectAll("g.angular").data($?U:[]);ye.exit().remove();var me=te.selectAll("g.angularaxis").data($?U:[]);me.exit().remove(),$&&function(oe,ie,de,Se){var _e,we,Ae,Oe,ze=de[0].trace,pe=Se.size,be=Se.radius,ke=Se.innerRadius,Ie=Se.gaugeBg,Ee=Se.gaugeOutline,Be=[pe.l+pe.w/2,pe.t+pe.h/2+be/2],Ve=Se.gauge,Ze=Se.layer,rt=Se.transitionOpts,it=Se.onComplete,dt=Math.PI/2;function vt(pt){var gt=ze.gauge.axis.range[0],ut=(pt-gt)/(ze.gauge.axis.range[1]-gt)*Math.PI-dt;return ut<-dt?-dt:ut>dt?dt:ut}function ht(pt){return M.svg.arc().innerRadius((ke+be)/2-pt/2*(be-ke)).outerRadius((ke+be)/2+pt/2*(be-ke)).startAngle(-dt)}function Qe(pt){pt.attr("d",function(gt){return ht(gt.thickness).startAngle(vt(gt.range[0])).endAngle(vt(gt.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",p(Be[0],Be[1])),Ze.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ze.selectAll("g.xangularaxistick,path,text").remove(),(_e=m(oe,ze.gauge.axis)).type="linear",_e.range=ze.gauge.axis.range,_e._id="xangularaxis",_e.ticklabeloverflow="allow",_e.setScale();var Je=function(pt){return(_e.range[0]-pt.x)/(_e.range[1]-_e.range[0])*Math.PI+Math.PI},Tt={},Ot=a.makeLabelFns(_e,0).labelStandoff;Tt.xFn=function(pt){var gt=Je(pt);return Math.cos(gt)*Ot},Tt.yFn=function(pt){var gt=Je(pt),ut=Math.sin(gt)>0?.2:1;return-Math.sin(gt)*(Ot+pt.fontSize*ut)+Math.abs(Math.cos(gt))*(pt.fontSize*t)},Tt.anchorFn=function(pt){var gt=Je(pt),ut=Math.cos(gt);return Math.abs(ut)<.1?"middle":ut>0?"start":"end"},Tt.heightFn=function(pt,gt,ut){var kt=Je(pt);return-.5*(1+Math.sin(kt))*ut};var Pt=function(pt){return p(Be[0]+be*Math.cos(pt),Be[1]-be*Math.sin(pt))};if(Ae=function(pt){return Pt(Je(pt))},we=a.calcTicks(_e),Oe=a.getTickSigns(_e)[2],_e.visible){Oe=_e.ticks==="inside"?-1:1;var Mt=(_e.linewidth||1)/2;a.drawTicks(oe,_e,{vals:we,layer:Ze,path:"M"+Oe*Mt+",0h"+Oe*_e.ticklen,transFn:function(pt){var gt=Je(pt);return Pt(gt)+"rotate("+-s(gt)+")"}}),a.drawLabels(oe,_e,{vals:we,layer:Ze,transFn:Ae,labelFns:Tt})}var He=[Ie].concat(ze.gauge.steps),Ye=Ve.selectAll("g.bg-arc").data(He);Ye.enter().append("g").classed("bg-arc",!0).append("path"),Ye.select("path").call(Qe).call(y),Ye.exit().remove();var Ne=ht(ze.gauge.bar.thickness),We=Ve.selectAll("g.value-arc").data([ze.gauge.bar]);We.enter().append("g").classed("value-arc",!0).append("path");var ot,tt,Re,Fe=We.select("path");g(rt)?(Fe.transition().duration(rt.duration).ease(rt.easing).each("end",function(){it&&it()}).each("interrupt",function(){it&&it()}).attrTween("d",(ot=Ne,tt=vt(de[0].lastY),Re=vt(de[0].y),function(){var pt=k(tt,Re);return function(gt){return ot.endAngle(pt(gt))()}})),ze._lastValue=de[0].y):Fe.attr("d",typeof de[0].y=="number"?Ne.endAngle(vt(de[0].y)):"M0,0Z"),Fe.call(y),We.exit().remove(),He=[];var nt=ze.gauge.threshold.value;(nt||nt===0)&&He.push({range:[nt,nt],color:ze.gauge.threshold.color,line:{color:ze.gauge.threshold.line.color,width:ze.gauge.threshold.line.width},thickness:ze.gauge.threshold.thickness});var Ge=Ve.selectAll("g.threshold-arc").data(He);Ge.enter().append("g").classed("threshold-arc",!0).append("path"),Ge.select("path").call(Qe).call(y),Ge.exit().remove();var ct=Ve.selectAll("g.gauge-outline").data([Ee]);ct.enter().append("g").classed("gauge-outline",!0).append("path"),ct.select("path").call(Qe).call(y),ct.exit().remove()}(w,0,U,{radius:ae,innerRadius:ce,gauge:ye,layer:me,size:Y,gaugeBg:F,gaugeOutline:j,transitionOpts:O,onComplete:P});var Me=te.selectAll("g.bullet").data(K?U:[]);Me.exit().remove();var Pe=te.selectAll("g.bulletaxis").data(K?U:[]);Pe.exit().remove(),K&&function(oe,ie,de,Se){var _e,we,Ae,Oe,ze,pe=de[0].trace,be=Se.gauge,ke=Se.layer,Ie=Se.gaugeBg,Ee=Se.gaugeOutline,Be=Se.size,Ve=pe.domain,Ze=Se.transitionOpts,rt=Se.onComplete;be.enter().append("g").classed("bullet",!0),be.attr("transform",p(Be.l,Be.t)),ke.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),ke.selectAll("g.xbulletaxistick,path,text").remove();var it=Be.h,dt=pe.gauge.bar.thickness*it,vt=Ve.x[0],ht=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(pe._hasNumber||pe._hasDelta?1-r.bulletNumberDomainSize:1);function Qe(Ye){Ye.attr("width",function(Ne){return Math.max(0,_e.c2p(Ne.range[1])-_e.c2p(Ne.range[0]))}).attr("x",function(Ne){return _e.c2p(Ne.range[0])}).attr("y",function(Ne){return .5*(1-Ne.thickness)*it}).attr("height",function(Ne){return Ne.thickness*it})}(_e=m(oe,pe.gauge.axis))._id="xbulletaxis",_e.domain=[vt,ht],_e.setScale(),we=a.calcTicks(_e),Ae=a.makeTransTickFn(_e),Oe=a.getTickSigns(_e)[2],ze=Be.t+Be.h,_e.visible&&(a.drawTicks(oe,_e,{vals:_e.ticks==="inside"?a.clipEnds(_e,we):we,layer:ke,path:a.makeTickPath(_e,ze,Oe),transFn:Ae}),a.drawLabels(oe,_e,{vals:we,layer:ke,transFn:Ae,labelFns:a.makeLabelFns(_e,ze)}));var Je=[Ie].concat(pe.gauge.steps),Tt=be.selectAll("g.bg-bullet").data(Je);Tt.enter().append("g").classed("bg-bullet",!0).append("rect"),Tt.select("rect").call(Qe).call(y),Tt.exit().remove();var Ot=be.selectAll("g.value-bullet").data([pe.gauge.bar]);Ot.enter().append("g").classed("value-bullet",!0).append("rect"),Ot.select("rect").attr("height",dt).attr("y",(it-dt)/2).call(y),g(Ze)?Ot.select("rect").transition().duration(Ze.duration).ease(Ze.easing).each("end",function(){rt&&rt()}).each("interrupt",function(){rt&&rt()}).attr("width",Math.max(0,_e.c2p(Math.min(pe.gauge.axis.range[1],de[0].y)))):Ot.select("rect").attr("width",typeof de[0].y=="number"?Math.max(0,_e.c2p(Math.min(pe.gauge.axis.range[1],de[0].y))):0),Ot.exit().remove();var Pt=de.filter(function(){return pe.gauge.threshold.value||pe.gauge.threshold.value===0}),Mt=be.selectAll("g.threshold-bullet").data(Pt);Mt.enter().append("g").classed("threshold-bullet",!0).append("line"),Mt.select("line").attr("x1",_e.c2p(pe.gauge.threshold.value)).attr("x2",_e.c2p(pe.gauge.threshold.value)).attr("y1",(1-pe.gauge.threshold.thickness)/2*it).attr("y2",(1-(1-pe.gauge.threshold.thickness)/2)*it).call(c.stroke,pe.gauge.threshold.line.color).style("stroke-width",pe.gauge.threshold.line.width),Mt.exit().remove();var He=be.selectAll("g.gauge-outline").data([Ee]);He.enter().append("g").classed("gauge-outline",!0).append("rect"),He.select("rect").call(Qe).call(y),He.exit().remove()}(w,0,U,{gauge:Me,layer:Pe,size:Y,gaugeBg:F,gaugeOutline:j,transitionOpts:O,onComplete:P});var ge=te.selectAll("text.title").data(U);ge.exit().remove(),ge.enter().append("text").classed("title",!0),ge.attr("text-anchor",function(){return K?x.right:x[H.title.align]}).text(H.title.text).call(i.font,H.title.font).call(n.convertToTspans,w),ge.attr("transform",function(){var oe,ie=Y.l+Y.w*d[H.title.align],de=r.titlePadding,Se=i.bBox(ge.node());return Q?($&&(oe=H.gauge.axis.visible?i.bBox(me.node()).top-de-Se.bottom:Y.t+Y.h/2-ae/2-Se.bottom-de),K&&(oe=N-(Se.top+Se.bottom)/2,ie=Y.l-r.bulletPadding*Y.w)):oe=H._numbersTop-de-Se.bottom,p(ie,oe)})})}},50048:function(ee,R,e){var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),_=e(45464),p=e(92880).extendFlat,s=e(67824).overrideAll,t=ee.exports=s(p({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:p({},_.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:p({},_.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(ee,R,e){var M=e(47128),k=e(3832).processGrid,o=e(3832).filter;ee.exports=function(T,_){_._len=Math.min(_.x.length,_.y.length,_.z.length,_.value.length),_._x=o(_.x,_._len),_._y=o(_.y,_._len),_._z=o(_.z,_._len),_._value=o(_.value,_._len);var p=k(_);_._gridFill=p.fill,_._Xs=p.Xs,_._Ys=p.Ys,_._Zs=p.Zs,_._len=p.len;for(var s=1/0,t=-1/0,i=0;i<_._len;i++){var r=_._value[i];s=Math.min(s,r),t=Math.max(t,r)}_._minValues=s,_._maxValues=t,_._vMin=_.isomin===void 0||_.isomin===null?s:_.isomin,_._vMax=_.isomax===void 0||_.isomax===null?t:_.isomax,M(T,_,{vals:[_._vMin,_._vMax],containerStr:"",cLetter:"c"})}},31460:function(ee,R,e){var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),_=e(8932).extractOpts,p=e(52094),s=function(a,l){for(var u=l.length-1;u>0;u--){var h=Math.min(l[u],l[u-1]),c=Math.max(l[u],l[u-1]);if(c>h&&h<a&&a<=c)return{id:u,distRatio:(c-a)/(c-h)}}return{id:0,distRatio:0}};function t(a,l,u){this.scene=a,this.uid=u,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(a){if(a.object===this.mesh){var l=a.data.index,u=this.data._meshX[l],h=this.data._meshY[l],c=this.data._meshZ[l],x=this.data._Ys.length,d=this.data._Zs.length,v=s(u,this.data._Xs).id,g=s(h,this.data._Ys).id,y=s(c,this.data._Zs).id,m=a.index=y+d*g+d*x*v;a.traceCoordinate=[this.data._meshX[m],this.data._meshY[m],this.data._meshZ[m],this.data._value[m]];var b=this.data.hovertext||this.data.text;return o(b)&&b[m]!==void 0?a.textLabel=b[m]:b&&(a.textLabel=b),!0}},i.update=function(a){var l=this.scene,u=l.fullSceneLayout;function h(d,v,g,y){return v.map(function(m){return d.d2l(m,0,y)*g})}this.data=n(a);var c={positions:p(h(u.xaxis,a._meshX,l.dataScale[0],a.xcalendar),h(u.yaxis,a._meshY,l.dataScale[1],a.ycalendar),h(u.zaxis,a._meshZ,l.dataScale[2],a.zcalendar)),cells:p(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:T(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},x=_(a);c.vertexIntensity=a._meshIntensity,c.vertexIntensityBounds=[x.min,x.max],c.colormap=k(a),this.mesh.update(c)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function n(a){a._meshI=[],a._meshJ=[],a._meshK=[];var l,u,h,c,x,d,v,g=a.surface.show,y=a.spaceframe.show,m=a.surface.fill,b=a.spaceframe.fill,f=!1,S=!1,w=0,E=a._Xs,O=a._Ys,C=a._Zs,P=E.length,D=O.length,U=C.length,I=r.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),N=function(ke,Ie,Ee){switch(I){case 5:return Ee+U*Ie+U*D*ke;case 4:return Ee+U*ke+U*P*Ie;case 3:return Ie+D*Ee+D*U*ke;case 2:return Ie+D*ke+D*P*Ee;case 1:return ke+P*Ee+P*U*Ie;default:return ke+P*Ie+P*D*Ee}},W=a._minValues,F=a._maxValues,j=a._vMin,H=a._vMax;function te(ke,Ie,Ee){for(var Be=d.length,Ve=u;Ve<Be;Ve++)if(ke===h[Ve]&&Ie===c[Ve]&&Ee===x[Ve])return Ve;return-1}function Q(){u=l}function $(){h=[],c=[],x=[],d=[],l=0,Q()}function K(ke,Ie,Ee,Be){return h.push(ke),c.push(Ie),x.push(Ee),d.push(Be),++l-1}function X(ke,Ie,Ee){for(var Be=[],Ve=0;Ve<ke.length;Ve++)Be[Ve]=ke[Ve]*(1-Ee)+Ee*Ie[Ve];return Be}function Y(ke){v=ke}function re(ke,Ie){return ke==="all"||ke===null||ke.indexOf(Ie)>-1}function se(ke,Ie){return ke===null?Ie:ke}function ae(ke,Ie,Ee){Q();var Be,Ve,Ze,rt=[Ie],it=[Ee];if(v>=1)rt=[Ie],it=[Ee];else if(v>0){var dt=function(He,Ye){var Ne=He[0],We=He[1],ot=He[2],tt=function(ut,kt,mt){for(var At=[],Lt=0;Lt<ut.length;Lt++)At[Lt]=(ut[Lt]+kt[Lt]+mt[Lt])/3;return At}(Ne,We,ot),Re=Math.sqrt(1-v),Fe=X(tt,Ne,Re),nt=X(tt,We,Re),Ge=X(tt,ot,Re),ct=Ye[0],pt=Ye[1],gt=Ye[2];return{xyzv:[[Ne,We,nt],[nt,Fe,Ne],[We,ot,Ge],[Ge,nt,We],[ot,Ne,Fe],[Fe,Ge,ot]],abc:[[ct,pt,-1],[-1,-1,ct],[pt,gt,-1],[-1,-1,pt],[gt,ct,-1],[-1,-1,gt]]}}(Ie,Ee);rt=dt.xyzv,it=dt.abc}for(var vt=0;vt<rt.length;vt++){Ie=rt[vt],Ee=it[vt];for(var ht=[],Qe=0;Qe<3;Qe++){var Je=Ie[Qe][0],Tt=Ie[Qe][1],Ot=Ie[Qe][2],Pt=Ie[Qe][3],Mt=Ee[Qe]>-1?Ee[Qe]:te(Je,Tt,Ot);ht[Qe]=Mt>-1?Mt:K(Je,Tt,Ot,se(ke,Pt))}Be=ht[0],Ve=ht[1],Ze=ht[2],a._meshI.push(Be),a._meshJ.push(Ve),a._meshK.push(Ze),++w}}function ce(ke,Ie,Ee,Be){var Ve=ke[3];Ve<Ee&&(Ve=Ee),Ve>Be&&(Ve=Be);for(var Ze=(ke[3]-Ve)/(ke[3]-Ie[3]+1e-9),rt=[],it=0;it<4;it++)rt[it]=(1-Ze)*ke[it]+Ze*Ie[it];return rt}function fe(ke,Ie,Ee){return ke>=Ie&&ke<=Ee}function he(ke){var Ie=.001*(H-j);return ke>=j-Ie&&ke<=H+Ie}function ve(ke){for(var Ie=[],Ee=0;Ee<4;Ee++){var Be=ke[Ee];Ie.push([a._x[Be],a._y[Be],a._z[Be],a._value[Be]])}return Ie}var ye=3;function me(ke,Ie,Ee,Be,Ve,Ze){Ze||(Ze=1),Ee=[-1,-1,-1];var rt=!1,it=[fe(Ie[0][3],Be,Ve),fe(Ie[1][3],Be,Ve),fe(Ie[2][3],Be,Ve)];if(!it[0]&&!it[1]&&!it[2])return!1;var dt=function(ht,Qe,Je){return he(Qe[0][3])&&he(Qe[1][3])&&he(Qe[2][3])?(ae(ht,Qe,Je),!0):Ze<ye&&me(ht,Qe,Je,j,H,++Ze)};if(it[0]&&it[1]&&it[2])return dt(ke,Ie,Ee)||rt;var vt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ht){if(it[ht[0]]&&it[ht[1]]&&!it[ht[2]]){var Qe=Ie[ht[0]],Je=Ie[ht[1]],Tt=Ie[ht[2]],Ot=ce(Tt,Qe,Be,Ve),Pt=ce(Tt,Je,Be,Ve);rt=dt(ke,[Pt,Ot,Qe],[-1,-1,Ee[ht[0]]])||rt,rt=dt(ke,[Qe,Je,Pt],[Ee[ht[0]],Ee[ht[1]],-1])||rt,vt=!0}}),vt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ht){if(it[ht[0]]&&!it[ht[1]]&&!it[ht[2]]){var Qe=Ie[ht[0]],Je=Ie[ht[1]],Tt=Ie[ht[2]],Ot=ce(Je,Qe,Be,Ve),Pt=ce(Tt,Qe,Be,Ve);rt=dt(ke,[Pt,Ot,Qe],[-1,-1,Ee[ht[0]]])||rt,vt=!0}}),rt}function Me(ke,Ie,Ee,Be){var Ve=!1,Ze=ve(Ie),rt=[fe(Ze[0][3],Ee,Be),fe(Ze[1][3],Ee,Be),fe(Ze[2][3],Ee,Be),fe(Ze[3][3],Ee,Be)];if(!(rt[0]||rt[1]||rt[2]||rt[3]))return Ve;if(rt[0]&&rt[1]&&rt[2]&&rt[3])return S&&(Ve=function(dt,vt,ht){var Qe=function(Je,Tt,Ot){ae(dt,[vt[Je],vt[Tt],vt[Ot]],[ht[Je],ht[Tt],ht[Ot]])};Qe(0,1,2),Qe(3,0,1),Qe(2,3,0),Qe(1,2,3)}(ke,Ze,Ie)||Ve),Ve;var it=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(dt){if(rt[dt[0]]&&rt[dt[1]]&&rt[dt[2]]&&!rt[dt[3]]){var vt=Ze[dt[0]],ht=Ze[dt[1]],Qe=Ze[dt[2]],Je=Ze[dt[3]];if(S)Ve=ae(ke,[vt,ht,Qe],[Ie[dt[0]],Ie[dt[1]],Ie[dt[2]]])||Ve;else{var Tt=ce(Je,vt,Ee,Be),Ot=ce(Je,ht,Ee,Be),Pt=ce(Je,Qe,Ee,Be);Ve=ae(null,[Tt,Ot,Pt],[-1,-1,-1])||Ve}it=!0}}),it||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(dt){if(rt[dt[0]]&&rt[dt[1]]&&!rt[dt[2]]&&!rt[dt[3]]){var vt=Ze[dt[0]],ht=Ze[dt[1]],Qe=Ze[dt[2]],Je=Ze[dt[3]],Tt=ce(Qe,vt,Ee,Be),Ot=ce(Qe,ht,Ee,Be),Pt=ce(Je,ht,Ee,Be),Mt=ce(Je,vt,Ee,Be);S?(Ve=ae(ke,[vt,Mt,Tt],[Ie[dt[0]],-1,-1])||Ve,Ve=ae(ke,[ht,Ot,Pt],[Ie[dt[1]],-1,-1])||Ve):Ve=function(He,Ye,Ne){var We=function(ot,tt,Re){ae(null,[Ye[ot],Ye[tt],Ye[Re]],[Ne[ot],Ne[tt],Ne[Re]])};We(0,1,2),We(2,3,0)}(0,[Tt,Ot,Pt,Mt],[-1,-1,-1,-1])||Ve,it=!0}}),it||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(dt){if(rt[dt[0]]&&!rt[dt[1]]&&!rt[dt[2]]&&!rt[dt[3]]){var vt=Ze[dt[0]],ht=Ze[dt[1]],Qe=Ze[dt[2]],Je=Ze[dt[3]],Tt=ce(ht,vt,Ee,Be),Ot=ce(Qe,vt,Ee,Be),Pt=ce(Je,vt,Ee,Be);S?(Ve=ae(ke,[vt,Tt,Ot],[Ie[dt[0]],-1,-1])||Ve,Ve=ae(ke,[vt,Ot,Pt],[Ie[dt[0]],-1,-1])||Ve,Ve=ae(ke,[vt,Pt,Tt],[Ie[dt[0]],-1,-1])||Ve):Ve=ae(null,[Tt,Ot,Pt],[-1,-1,-1])||Ve,it=!0}})),Ve}function Pe(ke,Ie,Ee,Be,Ve,Ze,rt,it,dt,vt,ht){var Qe=!1;return f&&(re(ke,"A")&&(Qe=Me(null,[Ie,Ee,Be,Ze],vt,ht)||Qe),re(ke,"B")&&(Qe=Me(null,[Ee,Be,Ve,dt],vt,ht)||Qe),re(ke,"C")&&(Qe=Me(null,[Ee,Ze,rt,dt],vt,ht)||Qe),re(ke,"D")&&(Qe=Me(null,[Be,Ze,it,dt],vt,ht)||Qe),re(ke,"E")&&(Qe=Me(null,[Ee,Be,Ze,dt],vt,ht)||Qe)),S&&(Qe=Me(ke,[Ee,Be,Ze,dt],vt,ht)||Qe),Qe}function ge(ke,Ie,Ee,Be,Ve,Ze,rt,it){return[it[0]===!0||me(ke,ve([Ie,Ee,Be]),[Ie,Ee,Be],Ze,rt),it[1]===!0||me(ke,ve([Be,Ve,Ie]),[Be,Ve,Ie],Ze,rt)]}function oe(ke,Ie,Ee,Be,Ve,Ze,rt,it,dt){return it?ge(ke,Ie,Ee,Ve,Be,Ze,rt,dt):ge(ke,Ee,Ve,Be,Ie,Ze,rt,dt)}function ie(ke,Ie,Ee,Be,Ve,Ze,rt){var it,dt,vt,ht,Qe=!1,Je=function(){Qe=me(ke,[it,dt,vt],[-1,-1,-1],Ve,Ze)||Qe,Qe=me(ke,[vt,ht,it],[-1,-1,-1],Ve,Ze)||Qe},Tt=rt[0],Ot=rt[1],Pt=rt[2];return Tt&&(it=X(ve([N(Ie,Ee-0,Be-0)])[0],ve([N(Ie-1,Ee-0,Be-0)])[0],Tt),dt=X(ve([N(Ie,Ee-0,Be-1)])[0],ve([N(Ie-1,Ee-0,Be-1)])[0],Tt),vt=X(ve([N(Ie,Ee-1,Be-1)])[0],ve([N(Ie-1,Ee-1,Be-1)])[0],Tt),ht=X(ve([N(Ie,Ee-1,Be-0)])[0],ve([N(Ie-1,Ee-1,Be-0)])[0],Tt),Je()),Ot&&(it=X(ve([N(Ie-0,Ee,Be-0)])[0],ve([N(Ie-0,Ee-1,Be-0)])[0],Ot),dt=X(ve([N(Ie-0,Ee,Be-1)])[0],ve([N(Ie-0,Ee-1,Be-1)])[0],Ot),vt=X(ve([N(Ie-1,Ee,Be-1)])[0],ve([N(Ie-1,Ee-1,Be-1)])[0],Ot),ht=X(ve([N(Ie-1,Ee,Be-0)])[0],ve([N(Ie-1,Ee-1,Be-0)])[0],Ot),Je()),Pt&&(it=X(ve([N(Ie-0,Ee-0,Be)])[0],ve([N(Ie-0,Ee-0,Be-1)])[0],Pt),dt=X(ve([N(Ie-0,Ee-1,Be)])[0],ve([N(Ie-0,Ee-1,Be-1)])[0],Pt),vt=X(ve([N(Ie-1,Ee-1,Be)])[0],ve([N(Ie-1,Ee-1,Be-1)])[0],Pt),ht=X(ve([N(Ie-1,Ee-0,Be)])[0],ve([N(Ie-1,Ee-0,Be-1)])[0],Pt),Je()),Qe}function de(ke,Ie,Ee,Be,Ve,Ze,rt,it,dt,vt,ht,Qe){var Je=ke;return Qe?(f&&ke==="even"&&(Je=null),Pe(Je,Ie,Ee,Be,Ve,Ze,rt,it,dt,vt,ht)):(f&&ke==="odd"&&(Je=null),Pe(Je,dt,it,rt,Ze,Ve,Be,Ee,Ie,vt,ht))}function Se(ke,Ie,Ee,Be,Ve){for(var Ze=[],rt=0,it=0;it<Ie.length;it++)for(var dt=Ie[it],vt=1;vt<U;vt++)for(var ht=1;ht<D;ht++)Ze.push(oe(ke,N(dt,ht-1,vt-1),N(dt,ht-1,vt),N(dt,ht,vt-1),N(dt,ht,vt),Ee,Be,(dt+ht+vt)%2,Ve&&Ve[rt]?Ve[rt]:[])),rt++;return Ze}function _e(ke,Ie,Ee,Be,Ve){for(var Ze=[],rt=0,it=0;it<Ie.length;it++)for(var dt=Ie[it],vt=1;vt<P;vt++)for(var ht=1;ht<U;ht++)Ze.push(oe(ke,N(vt-1,dt,ht-1),N(vt,dt,ht-1),N(vt-1,dt,ht),N(vt,dt,ht),Ee,Be,(vt+dt+ht)%2,Ve&&Ve[rt]?Ve[rt]:[])),rt++;return Ze}function we(ke,Ie,Ee,Be,Ve){for(var Ze=[],rt=0,it=0;it<Ie.length;it++)for(var dt=Ie[it],vt=1;vt<D;vt++)for(var ht=1;ht<P;ht++)Ze.push(oe(ke,N(ht-1,vt-1,dt),N(ht-1,vt,dt),N(ht,vt-1,dt),N(ht,vt,dt),Ee,Be,(ht+vt+dt)%2,Ve&&Ve[rt]?Ve[rt]:[])),rt++;return Ze}function Ae(ke,Ie,Ee){for(var Be=1;Be<U;Be++)for(var Ve=1;Ve<D;Ve++)for(var Ze=1;Ze<P;Ze++)de(ke,N(Ze-1,Ve-1,Be-1),N(Ze-1,Ve-1,Be),N(Ze-1,Ve,Be-1),N(Ze-1,Ve,Be),N(Ze,Ve-1,Be-1),N(Ze,Ve-1,Be),N(Ze,Ve,Be-1),N(Ze,Ve,Be),Ie,Ee,(Ze+Ve+Be)%2)}function Oe(ke,Ie,Ee,Be,Ve,Ze){for(var rt=[],it=0,dt=0;dt<Ie.length;dt++)for(var vt=Ie[dt],ht=1;ht<U;ht++)for(var Qe=1;Qe<D;Qe++)rt.push(ie(ke,vt,Qe,ht,Ee,Be,Ve[dt],Ze&&Ze[it]&&Ze[it])),it++;return rt}function ze(ke,Ie,Ee,Be,Ve,Ze){for(var rt=[],it=0,dt=0;dt<Ie.length;dt++)for(var vt=Ie[dt],ht=1;ht<P;ht++)for(var Qe=1;Qe<U;Qe++)rt.push(ie(ke,ht,vt,Qe,Ee,Be,Ve[dt],Ze&&Ze[it]&&Ze[it])),it++;return rt}function pe(ke,Ie,Ee,Be,Ve,Ze){for(var rt=[],it=0,dt=0;dt<Ie.length;dt++)for(var vt=Ie[dt],ht=1;ht<D;ht++)for(var Qe=1;Qe<P;Qe++)rt.push(ie(ke,Qe,ht,vt,Ee,Be,Ve[dt],Ze&&Ze[it]&&Ze[it])),it++;return rt}function be(ke,Ie){for(var Ee=[],Be=ke;Be<Ie;Be++)Ee.push(Be);return Ee}return function(){$(),function(){for(var dt=0;dt<P;dt++)for(var vt=0;vt<D;vt++)for(var ht=0;ht<U;ht++){var Qe=N(dt,vt,ht);K(a._x[Qe],a._y[Qe],a._z[Qe],a._value[Qe])}}();var ke=null;if(y&&b&&(Y(b),S=!0,Ae(ke,j,H),S=!1),g&&m){Y(m);for(var Ie=a.surface.pattern,Ee=a.surface.count,Be=0;Be<Ee;Be++){var Ve=Ee===1?.5:Be/(Ee-1),Ze=(1-Ve)*j+Ve*H,rt=Math.abs(Ze-W)>Math.abs(Ze-F)?[W,Ze]:[Ze,F];f=!0,Ae(Ie,rt[0],rt[1]),f=!1}}var it=[[Math.min(j,F),Math.max(j,F)],[Math.min(W,H),Math.max(W,H)]];["x","y","z"].forEach(function(dt){for(var vt=[],ht=0;ht<it.length;ht++){var Qe=0,Je=it[ht][0],Tt=it[ht][1],Ot=a.slices[dt];if(Ot.show&&Ot.fill){Y(Ot.fill);var Pt=[],Mt=[],He=[];if(Ot.locations.length)for(var Ye=0;Ye<Ot.locations.length;Ye++){var Ne=s(Ot.locations[Ye],dt==="x"?E:dt==="y"?O:C);Ne.distRatio===0?Pt.push(Ne.id):Ne.id>0&&(Mt.push(Ne.id),dt==="x"?He.push([Ne.distRatio,0,0]):dt==="y"?He.push([0,Ne.distRatio,0]):He.push([0,0,Ne.distRatio]))}else Pt=be(1,dt==="x"?P-1:dt==="y"?D-1:U-1);Mt.length>0&&(vt[Qe]=dt==="x"?Oe(ke,Mt,Je,Tt,He,vt[Qe]):dt==="y"?ze(ke,Mt,Je,Tt,He,vt[Qe]):pe(ke,Mt,Je,Tt,He,vt[Qe]),Qe++),Pt.length>0&&(vt[Qe]=dt==="x"?Se(ke,Pt,Je,Tt,vt[Qe]):dt==="y"?_e(ke,Pt,Je,Tt,vt[Qe]):we(ke,Pt,Je,Tt,vt[Qe]),Qe++)}var We=a.caps[dt];We.show&&We.fill&&(Y(We.fill),vt[Qe]=dt==="x"?Se(ke,[0,P-1],Je,Tt,vt[Qe]):dt==="y"?_e(ke,[0,D-1],Je,Tt,vt[Qe]):we(ke,[0,U-1],Je,Tt,vt[Qe]),Qe++)}}),w===0&&$(),a._meshX=h,a._meshY=c,a._meshZ=x,a._meshIntensity=d,a._Xs=E,a._Ys=O,a._Zs=C}(),a}ee.exports={findNearestOnAxis:s,generateIsoMeshes:n,createIsosurfaceTrace:function(a,l){var u=a.glplot.gl,h=M({gl:u}),c=new t(a,h,l.uid);return h._trace=c,c.update(l),a.glplot.add(h),c}}},70548:function(ee,R,e){var M=e(3400),k=e(24040),o=e(50048),T=e(27260);function _(p,s,t,i,r){var n=r("isomin"),a=r("isomax");a!=null&&n!=null&&n>a&&(s.isomin=null,s.isomax=null);var l=r("x"),u=r("y"),h=r("z"),c=r("value");l&&l.length&&u&&u.length&&h&&h.length&&c&&c.length?(k.getComponentMethod("calendars","handleTraceDefaults")(p,s,["x","y","z"],i),r("valuehoverformat"),["x","y","z"].forEach(function(x){r(x+"hoverformat");var d="caps."+x;r(d+".show")&&r(d+".fill");var v="slices."+x;r(v+".show")&&(r(v+".fill"),r(v+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){r(x)}),T(p,s,i,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}ee.exports={supplyDefaults:function(p,s,t,i){_(p,s,0,i,function(r,n){return M.coerce(p,s,o,r,n)})},supplyIsoDefaults:_}},6296:function(ee,R,e){ee.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(ee,R,e){var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(16716),_=e(45464),p=e(92880).extendFlat;ee.exports=p({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:p({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:p({},T.lightposition.x,{dflt:1e5}),y:p({},T.lightposition.y,{dflt:1e5}),z:p({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:p({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:p({},_.hoverinfo,{editType:"calc"}),showlegend:p({},_.showlegend,{dflt:!1})})},1876:function(ee,R,e){var M=e(47128);ee.exports=function(k,o){o.intensity&&M(k,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},576:function(ee,R,e){var M=e(67792).gl_mesh3d,k=e(67792).delaunay_triangulate,o=e(67792).alpha_shape,T=e(67792).convex_hull,_=e(33040).parseColorScale,p=e(3400).isArrayOrTypedArray,s=e(43080),t=e(8932).extractOpts,i=e(52094);function r(c,x,d){this.scene=c,this.uid=d,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var n=r.prototype;function a(c){for(var x=[],d=c.length,v=0;v<d;v++)x[v]=s(c[v]);return x}function l(c,x,d,v){for(var g=[],y=x.length,m=0;m<y;m++)g[m]=c.d2l(x[m],0,v)*d;return g}function u(c){for(var x=[],d=c.length,v=0;v<d;v++)x[v]=Math.round(c[v]);return x}function h(c,x){for(var d=c.length,v=0;v<d;v++)if(c[v]<=-.5||c[v]>=x-.5)return!1;return!0}n.handlePick=function(c){if(c.object===this.mesh){var x=c.index=c.data.index;c.data._cellCenter?c.traceCoordinate=c.data.dataCoordinate:c.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var d=this.data.hovertext||this.data.text;return p(d)&&d[x]!==void 0?c.textLabel=d[x]:d&&(c.textLabel=d),!0}},n.update=function(c){var x=this.scene,d=x.fullSceneLayout;this.data=c;var v,g=c.x.length,y=i(l(d.xaxis,c.x,x.dataScale[0],c.xcalendar),l(d.yaxis,c.y,x.dataScale[1],c.ycalendar),l(d.zaxis,c.z,x.dataScale[2],c.zcalendar));if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!h(c.i,g)||!h(c.j,g)||!h(c.k,g))return;v=i(u(c.i),u(c.j),u(c.k))}else v=c.alphahull===0?T(y):c.alphahull>0?o(c.alphahull,y):function(S,w){for(var E=["x","y","z"].indexOf(S),O=[],C=w.length,P=0;P<C;P++)O[P]=[w[P][(E+1)%3],w[P][(E+2)%3]];return k(O)}(c.delaunayaxis,y);var m={positions:y,cells:v,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:s(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var b=t(c);this.color="#fff";var f=c.intensitymode;m[f+"Intensity"]=c.intensity,m[f+"IntensityBounds"]=[b.min,b.max],m.colormap=_(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],m.vertexColors=a(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],m.cellColors=a(c.facecolor)):(this.color=c.color,m.meshColor=s(c.color));this.mesh.update(m)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(c,x){var d=c.glplot.gl,v=M({gl:d}),g=new r(c,v,x.uid);return v._trace=g,g.update(x),c.glplot.add(v),g}},74212:function(ee,R,e){var M=e(24040),k=e(3400),o=e(27260),T=e(52948);ee.exports=function(_,p,s,t){function i(n,a){return k.coerce(_,p,T,n,a)}function r(n){var a=n.map(function(l){var u=i(l);return u&&k.isArrayOrTypedArray(u)?u:null});return a.every(function(l){return l&&l.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!p.i||p.j&&p.k)&&(!p.j||p.k&&p.i)&&(!p.k||p.i&&p.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(_,p,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){i(n)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in _?(i("intensity"),i("intensitymode"),o(_,p,t,i,{prefix:"",cLetter:"c"})):(p.showscale=!1,"facecolor"in _?i("facecolor"):"vertexcolor"in _?i("vertexcolor"):i("color",s)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),p._length=null):p.visible=!1):p.visible=!1}},7404:function(ee,R,e){ee.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(ee,R,e){var M=e(3400).extendFlat,k=e(52904),o=e(29736).axisHoverFormat,T=e(98192).u,_=e(55756),p=e(48164),s=p.INCREASING.COLOR,t=p.DECREASING.COLOR,i=k.line;function r(n){return{line:{color:M({},i.color,{dflt:n}),width:i.width,dash:T,editType:"style"},editType:"style"}}ee.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},i.width,{}),dash:M({},T,{}),editType:"style"},increasing:r(s),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},_.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:k.zorder}},42812:function(ee,R,e){var M=e(3400),k=M._,o=e(54460),T=e(1220),_=e(39032).BADNUM;function p(t,i,r,n){return{o:t,h:i,l:r,c:n}}function s(t,i,r,n,a,l){for(var u=a.makeCalcdata(i,"open"),h=a.makeCalcdata(i,"high"),c=a.makeCalcdata(i,"low"),x=a.makeCalcdata(i,"close"),d=M.isArrayOrTypedArray(i.text),v=M.isArrayOrTypedArray(i.hovertext),g=!0,y=null,m=!!i.xperiodalignment,b=[],f=0;f<n.length;f++){var S=n[f],w=u[f],E=h[f],O=c[f],C=x[f];if(S!==_&&w!==_&&E!==_&&O!==_&&C!==_){C===w?y!==null&&C!==y&&(g=C>y):g=C>w,y=C;var P=l(w,E,O,C);P.pos=S,P.yc=(w+C)/2,P.i=f,P.dir=g?"increasing":"decreasing",P.x=P.pos,P.y=[O,E],m&&(P.orig_p=r[f]),d&&(P.tx=i.text[f]),v&&(P.htx=i.hovertext[f]),b.push(P)}else b.push({pos:S,empty:!0})}return i._extremes[a._id]=o.findExtremes(a,M.concat(c,h),{padded:!0}),b.length&&(b[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),b}ee.exports={calc:function(t,i){var r=o.getFromId(t,i.xaxis),n=o.getFromId(t,i.yaxis),a=function(x,d,v){var g=v._minDiff;if(!g){var y,m=x._fullData,b=[];for(g=1/0,y=0;y<m.length;y++){var f=m[y];if(f.type==="ohlc"&&f.visible===!0&&f.xaxis===d._id){b.push(f);var S=d.makeCalcdata(f,"x");f._origX=S;var w=T(v,d,"x",S).vals;f._xcalc=w;var E=M.distinctVals(w).minDiff;E&&isFinite(E)&&(g=Math.min(g,E))}}for(g===1/0&&(g=1),y=0;y<b.length;y++)b[y]._minDiff=g}return g*v.tickwidth}(t,r,i),l=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var h=i._xcalc;i._xcalc=null;var c=s(t,i,u,h,n,p);return i._extremes[r._id]=o.findExtremes(r,h,{vpad:l/2}),c.length?(M.extendFlat(c[0].t,{wHover:l/2,tickLen:a}),c):[{t:{empty:!0}}]},calcCommon:s}},23860:function(ee,R,e){var M=e(3400),k=e(52744),o=e(31147),T=e(20279);function _(p,s,t,i){t(i+".line.color"),t(i+".line.width",s.line.width),t(i+".line.dash",s.line.dash)}ee.exports=function(p,s,t,i){function r(n,a){return M.coerce(p,s,T,n,a)}k(p,s,r,i)?(o(p,s,i,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),_(0,s,r,"increasing"),_(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),i._requestRangeslider[s.xaxis]=!0,r("zorder")):s.visible=!1}},18720:function(ee,R,e){var M=e(54460),k=e(3400),o=e(93024),T=e(76308),_=e(3400).fillText,p=e(48164),s={increasing:p.INCREASING.SYMBOL,decreasing:p.DECREASING.SYMBOL};function t(n,a,l,u){var h,c,x=n.cd,d=n.xa,v=x[0].trace,g=x[0].t,y=v.type,m=y==="ohlc"?"l":"min",b=y==="ohlc"?"h":"max",f=g.bPos||0,S=function(F){return F.pos+f-a},w=g.bdPos||g.tickLen,E=g.wHover,O=Math.min(1,w/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));function C(F){var j=S(F);return o.inbox(j-E,j+E,h)}function P(F){var j=F[m],H=F[b];return j===H||o.inbox(j-l,H-l,h)}function D(F){return(C(F)+P(F))/2}h=n.maxHoverDistance-O,c=n.maxSpikeDistance-O;var U=o.getDistanceFunction(u,C,P,D);if(o.getClosest(x,U,n),n.index===!1)return null;var I=x[n.index];if(I.empty)return null;var N=v[I.dir],W=N.line.color;return T.opacity(W)&&N.line.width?n.color=W:n.color=N.fillcolor,n.x0=d.c2p(I.pos+f-w,!0),n.x1=d.c2p(I.pos+f+w,!0),n.xLabelVal=I.orig_p!==void 0?I.orig_p:I.pos,n.spikeDistance=D(I)*c/h,n.xSpike=d.c2p(I.pos,!0),n}function i(n,a,l,u){var h=n.cd,c=n.ya,x=h[0].trace,d=h[0].t,v=[],g=t(n,a,l,u);if(!g)return[];var y=h[g.index].hi||x.hoverinfo,m=y.split("+");if(y!=="all"&&m.indexOf("y")===-1)return[];for(var b=["high","open","close","low"],f={},S=0;S<b.length;S++){var w,E=b[S],O=x[E][g.index],C=c.c2p(O,!0);O in f?(w=f[O]).yLabel+="<br>"+d.labels[E]+M.hoverLabelText(c,O,x.yhoverformat):((w=k.extendFlat({},g)).y0=w.y1=C,w.yLabelVal=O,w.yLabel=d.labels[E]+M.hoverLabelText(c,O,x.yhoverformat),w.name="",v.push(w),f[O]=w)}return v}function r(n,a,l,u){var h=n.cd,c=n.ya,x=h[0].trace,d=h[0].t,v=t(n,a,l,u);if(!v)return[];var g=h[v.index],y=v.index=g.i,m=g.dir;function b(P){return d.labels[P]+M.hoverLabelText(c,x[P][y],x.yhoverformat)}var f=g.hi||x.hoverinfo,S=f.split("+"),w=f==="all",E=w||S.indexOf("y")!==-1,O=w||S.indexOf("text")!==-1,C=E?[b("open"),b("high"),b("low"),b("close")+"  "+s[m]]:[];return O&&_(g,x,C),v.extraText=C.join("<br>"),v.y0=v.y1=c.c2p(g.yc,!0),[v]}ee.exports={hoverPoints:function(n,a,l,u){return n.cd[0].trace.hoverlabel.split?i(n,a,l,u):r(n,a,l,u)},hoverSplit:i,hoverOnPoints:r}},65456:function(ee,R,e){ee.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(ee,R,e){var M=e(24040),k=e(3400);ee.exports=function(o,T,_,p){var s=_("x"),t=_("open"),i=_("high"),r=_("low"),n=_("close");if(_("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x"],p),t&&i&&r&&n){var a=Math.min(t.length,i.length,r.length,n.length);return s&&(a=Math.min(a,k.minRowLength(s))),T._length=a,a}}},36664:function(ee,R,e){var M=e(33428),k=e(3400);ee.exports=function(o,T,_,p){var s=T.yaxis,t=T.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(p,_,"trace ohlc").each(function(r){var n=M.select(this),a=r[0],l=a.t;if(a.trace.visible!==!0||l.empty)n.remove();else{var u=l.tickLen,h=n.selectAll("path").data(k.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(c){if(c.empty)return"M0,0Z";var x=t.c2p(c.pos-u,!0),d=t.c2p(c.pos+u,!0),v=i?(x+d)/2:t.c2p(c.pos,!0);return"M"+x+","+s.c2p(c.o,!0)+"H"+v+"M"+v+","+s.c2p(c.h,!0)+"V"+s.c2p(c.l,!0)+"M"+d+","+s.c2p(c.c,!0)+"H"+v})}})}},97384:function(ee){ee.exports=function(R,e){var M,k=R.cd,o=R.xaxis,T=R.yaxis,_=[],p=k[0].t.bPos||0;if(e===!1)for(M=0;M<k.length;M++)k[M].selected=0;else for(M=0;M<k.length;M++){var s=k[M];e.contains([o.c2p(s.pos+p),T.c2p(s.yc)],null,s.i,R)?(_.push({pointNumber:s.i,x:o.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return _}},14008:function(ee,R,e){var M=e(33428),k=e(43616),o=e(76308);ee.exports=function(T,_,p){var s=p||M.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=t[0].trace;M.select(this).selectAll("path").each(function(r){if(!r.empty){var n=i[r.dir].line;M.select(this).style("fill","none").call(o.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",i.selectedpoints&&!r.selected?.3:1)}})})}},72140:function(ee,R,e){var M=e(92880).extendFlat,k=e(45464),o=e(25376),T=e(49084),_=e(21776).Ks,p=e(86968).u,s=M({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:_({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ee.exports={domain:p({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:_({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(ee,R,e){var M=e(84888)._M,k=e(60268),o="parcats";R.name=o,R.plot=function(T,_,p,s){var t=M(T.calcdata,o);if(t.length){var i=t[0];k(T,i,p,s)}},R.clean=function(T,_,p,s){var t=s._has&&s._has("parcats"),i=_._has&&_._has("parcats");t&&!i&&s._paperdiv.selectAll(".parcats").remove()}},69136:function(ee,R,e){var M=e(71688).wrap,k=e(94288).hasColorscale,o=e(47128),T=e(68944),_=e(43616),p=e(3400),s=e(38248);function t(n,a,l){n.valueInds.push(a),n.count+=l}function i(n,a,l){return{categoryInds:n,color:a,rawColor:l,valueInds:[],count:0}}function r(n,a,l){n.valueInds.push(a),n.count+=l}ee.exports=function(n,a){var l=p.filterVisible(a.dimensions);if(l.length===0)return[];var u,h,c,x=l.map(function(H){var te;if(H.categoryorder==="trace")te=null;else if(H.categoryorder==="array")te=H.categoryarray;else{te=T(H.values);for(var Q=!0,$=0;$<te.length;$++)if(!s(te[$])){Q=!1;break}te.sort(Q?p.sorterAsc:void 0),H.categoryorder==="category descending"&&(te=te.reverse())}return function(K,X){X=X==null?[]:X.map(function(ve){return ve});var Y={},re={},se=[];X.forEach(function(ve,ye){Y[ve]=0,re[ve]=ye});for(var ae=0;ae<K.length;ae++){var ce,fe=K[ae];Y[fe]===void 0?(Y[fe]=1,ce=X.push(fe)-1,re[fe]=ce):(Y[fe]++,ce=re[fe]),se.push(ce)}var he=X.map(function(ve){return Y[ve]});return{uniqueValues:X,uniqueCounts:he,inds:se}}(H.values,te)});u=p.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(H){var te,Q=H.map(function($){return $.displayindex});if(function($){for(var K=new Array($.length),X=0;X<$.length;X++){if($[X]<0||$[X]>=$.length||K[$[X]]!==void 0)return!1;K[$[X]]=!0}return!0}(Q))for(te=0;te<H.length;te++)H[te]._displayindex=H[te].displayindex;else for(te=0;te<H.length;te++)H[te]._displayindex=te}(l),l.forEach(function(H,te){(function(Q,$){Q._categoryarray=$.uniqueValues,Q.ticktext===null||Q.ticktext===void 0?Q._ticktext=[]:Q._ticktext=Q.ticktext.slice();for(var K=Q._ticktext.length;K<$.uniqueValues.length;K++)Q._ticktext.push($.uniqueValues[K])})(H,x[te])});var d,v=a.line;v?(k(a,"line")&&o(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),d=_.tryColorscale(v)):d=p.identity;var g,y,m,b,f,S=l[0].values.length,w={},E=x.map(function(H){return H.inds});for(c=0,g=0;g<S;g++){var O=[];for(y=0;y<E.length;y++)O.push(E[y][g]);h=u[g%u.length],c+=h;var C=(m=g,b=void 0,f=void 0,p.isArrayOrTypedArray(v.color)?f=b=v.color[m%v.color.length]:b=v.color,{color:d(b),rawColor:f}),P=O+"-"+C.rawColor;w[P]===void 0&&(w[P]=i(O,C.color,C.rawColor)),r(w[P],g,h)}var D,U=l.map(function(H,te){return function(Q,$,K,X,Y){return{dimensionInd:Q,containerInd:$,displayInd:K,dimensionLabel:X,count:Y,categories:[],dragX:null}}(te,H._index,H._displayindex,H.label,c)});for(g=0;g<S;g++)for(h=u[g%u.length],y=0;y<U.length;y++){var I=U[y].containerInd,N=x[y].inds[g],W=U[y].categories;if(W[N]===void 0){var F=a.dimensions[I]._categoryarray[N],j=a.dimensions[I]._ticktext[N];W[N]={dimensionInd:y,categoryInd:D=N,categoryValue:F,displayInd:D,categoryLabel:j,valueInds:[],count:0,dragY:null}}t(W[N],g,h)}return M(function(H,te,Q){var $=H.map(function(K){return K.categories.length}).reduce(function(K,X){return Math.max(K,X)});return{dimensions:H,paths:te,trace:void 0,maxCats:$,count:Q}}(U,w,c))}},76671:function(ee,R,e){var M=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,_=e(51272),p=e(72140),s=e(26284),t=e(38116).isTypedArraySpec;function i(r,n){function a(v,g){return M.coerce(r,n,p.dimensions,v,g)}var l=a("values"),u=a("visible");if(l&&l.length||(u=n.visible=!1),u){a("label"),a("displayindex",n._index);var h,c=r.categoryarray,x=M.isArrayOrTypedArray(c)&&c.length>0||t(c);x&&(h="array");var d=a("categoryorder",h);d==="array"?(a("categoryarray"),a("ticktext")):(delete r.categoryarray,delete r.ticktext),x||d!=="array"||(n.categoryorder="trace")}}ee.exports=function(r,n,a,l){function u(d,v){return M.coerce(r,n,p,d,v)}var h=_(r,n,{name:"dimensions",handleItemDefaults:i}),c=function(d,v,g,y,m){m("line.shape"),m("line.hovertemplate");var b=m("line.color",y.colorway[0]);if(k(d,"line")&&M.isArrayOrTypedArray(b)){if(b.length)return m("line.colorscale"),o(d,v,y,m,{prefix:"line.",cLetter:"c"}),b.length;v.line.color=g}return 1/0}(r,n,a,l,u);T(n,l,u),Array.isArray(h)&&h.length||(n.visible=!1),s(n,h,"values",c),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var x=l.font;M.coerceFont(u,"labelfont",x,{overrideDflt:{size:Math.round(x.size)}}),M.coerceFont(u,"tickfont",x,{autoShadowDflt:!0,overrideDflt:{size:Math.round(x.size/1.2)}})}},22020:function(ee,R,e){ee.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(ee,R,e){var M=e(33428),k=e(67756).Gz,o=e(36424),T=e(93024),_=e(3400),p=_.strTranslate,s=e(43616),t=e(49760),i=e(72736);function r(Q,$,K,X){var Y=$._context.staticPlot,re=Q.map(W.bind(0,$,K)),se=X.selectAll("g.parcatslayer").data([null]);se.enter().append("g").attr("class","parcatslayer").style("pointer-events",Y?"none":"all");var ae=se.selectAll("g.trace.parcats").data(re,n),ce=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(ge){return p(ge.x,ge.y)}),ce.append("g").attr("class","paths");var fe=ae.select("g.paths").selectAll("path.path").data(function(ge){return ge.paths},n);fe.attr("fill",function(ge){return ge.model.color});var he=fe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ge){return ge.model.color}).attr("fill-opacity",0);v(he),fe.attr("d",function(ge){return ge.svgD}),he.empty()||fe.sort(l),fe.exit().remove(),fe.on("mouseover",u).on("mouseout",h).on("click",d),ce.append("g").attr("class","dimensions");var ve=ae.select("g.dimensions").selectAll("g.dimension").data(function(ge){return ge.dimensions},n);ve.enter().append("g").attr("class","dimension"),ve.attr("transform",function(ge){return p(ge.x,0)}),ve.exit().remove();var ye=ve.selectAll("g.category").data(function(ge){return ge.categories},n),me=ye.enter().append("g").attr("class","category");ye.attr("transform",function(ge){return p(0,ge.y)}),me.append("rect").attr("class","catrect").attr("pointer-events","none"),ye.select("rect.catrect").attr("fill","none").attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}),y(me);var Me=ye.selectAll("rect.bandrect").data(function(ge){return ge.bands},n);Me.each(function(){_.raiseToTop(this)}),Me.attr("fill",function(ge){return ge.color});var Pe=Me.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ge){return ge.color}).attr("fill-opacity",0);Me.attr("fill",function(ge){return ge.color}).attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}).attr("y",function(ge){return ge.y}).attr("cursor",function(ge){return ge.parcatsViewModel.arrangement==="fixed"?"default":ge.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(Pe),Me.exit().remove(),me.append("text").attr("class","catlabel").attr("pointer-events","none"),ye.select("text.catlabel").attr("text-anchor",function(ge){return a(ge)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(ge){return a(ge)?ge.width+5:-5}).attr("y",function(ge){return ge.height/2}).text(function(ge){return ge.model.categoryLabel}).each(function(ge){s.font(M.select(this),ge.parcatsViewModel.categorylabelfont),i.convertToTspans(M.select(this),$)}),me.append("text").attr("class","dimlabel"),ye.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ge){return ge.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(ge){return ge.width/2}).attr("y",-5).text(function(ge,oe){return oe===0?ge.parcatsViewModel.model.dimensions[ge.model.dimensionInd].dimensionLabel:null}).each(function(ge){s.font(M.select(this),ge.parcatsViewModel.labelfont)}),ye.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",O),ye.exit().remove(),ve.call(M.behavior.drag().origin(function(ge){return{x:ge.x,y:0}}).on("dragstart",C).on("drag",P).on("dragend",D)),ae.each(function(ge){ge.traceSelection=M.select(this),ge.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),ge.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}function n(Q){return Q.key}function a(Q){var $=Q.parcatsViewModel.dimensions.length,K=Q.parcatsViewModel.dimensions[$-1].model.dimensionInd;return Q.model.dimensionInd===K}function l(Q,$){return Q.model.rawColor>$.model.rawColor?1:Q.model.rawColor<$.model.rawColor?-1:0}function u(Q){if(!Q.parcatsViewModel.dragDimension&&Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){_.raiseToTop(this),g(M.select(this));var $=c(Q),K=x(Q);if(Q.parcatsViewModel.graphDiv.emit("plotly_hover",{points:$,event:M.event,constraints:K}),Q.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var X,Y,re,se=M.mouse(this)[0],ae=Q.parcatsViewModel.graphDiv,ce=Q.parcatsViewModel.trace,fe=ae._fullLayout,he=fe._paperdiv.node().getBoundingClientRect(),ve=Q.parcatsViewModel.graphDiv.getBoundingClientRect();for(re=0;re<Q.leftXs.length-1;re++)if(Q.leftXs[re]+Q.dimWidths[re]-2<=se&&se<=Q.leftXs[re+1]+2){var ye=Q.parcatsViewModel.dimensions[re],me=Q.parcatsViewModel.dimensions[re+1];X=(ye.x+ye.width+me.x)/2,Y=(Q.topYs[re]+Q.topYs[re+1]+Q.height)/2;break}var Me=Q.parcatsViewModel.x+X,Pe=Q.parcatsViewModel.y+Y,ge=t.mostReadable(Q.model.color,["black","white"]),oe=Q.model.count,ie=oe/Q.parcatsViewModel.model.count,de={countLabel:oe,probabilityLabel:ie.toFixed(3)},Se=[];Q.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Se.push(["Count:",de.countLabel].join(" ")),Q.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Se.push(["P:",de.probabilityLabel].join(" "));var _e=Se.join("<br>"),we=M.mouse(ae)[0];T.loneHover({trace:ce,x:Me-he.left+ve.left,y:Pe-he.top+ve.top,text:_e,color:Q.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ge,idealAlign:we<Me?"right":"left",hovertemplate:(ce.line||{}).hovertemplate,hovertemplateLabels:de,eventData:[{data:ce._input,fullData:ce,count:oe,probability:ie}]},{container:fe._hoverlayer.node(),outerContainer:fe._paper.node(),gd:ae})}}}function h(Q){if(!Q.parcatsViewModel.dragDimension&&(v(M.select(this)),T.loneUnhover(Q.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),Q.parcatsViewModel.pathSelection.sort(l),Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var $=c(Q),K=x(Q);Q.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:$,event:M.event,constraints:K})}}function c(Q){for(var $=[],K=U(Q.parcatsViewModel),X=0;X<Q.model.valueInds.length;X++){var Y=Q.model.valueInds[X];$.push({curveNumber:K,pointNumber:Y})}return $}function x(Q){for(var $={},K=Q.parcatsViewModel.model.dimensions,X=0;X<K.length;X++){var Y=K[X],re=Y.categories[Q.model.categoryInds[X]];$[Y.containerInd]=re.categoryValue}return Q.model.rawColor!==void 0&&($.color=Q.model.rawColor),$}function d(Q){if(Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var $=c(Q),K=x(Q);Q.parcatsViewModel.graphDiv.emit("plotly_click",{points:$,event:M.event,constraints:K})}}function v(Q){Q.attr("fill",function($){return $.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function g(Q){Q.attr("fill-opacity",.8).attr("stroke",function($){return t.mostReadable($.model.color,["black","white"])}).attr("stroke-width",.3)}function y(Q){Q.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(Q){Q.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function b(Q){var $=Q.parcatsViewModel.pathSelection,K=Q.categoryViewModel.model.dimensionInd,X=Q.categoryViewModel.model.categoryInd;return $.filter(function(Y){return Y.model.categoryInds[K]===X&&Y.model.color===Q.color})}function f(Q,$,K){var X=M.select(Q).datum(),Y=X.categoryViewModel.model,re=X.parcatsViewModel.graphDiv,se=M.select(Q.parentNode).selectAll("rect.bandrect"),ae=[];se.each(function(fe){b(fe).each(function(he){Array.prototype.push.apply(ae,c(he))})});var ce={};ce[Y.dimensionInd]=Y.categoryValue,re.emit($,{points:ae,event:K,constraints:ce})}function S(Q,$,K){var X=M.select(Q).datum(),Y=X.categoryViewModel.model,re=X.parcatsViewModel.graphDiv,se=b(X),ae=[];se.each(function(fe){Array.prototype.push.apply(ae,c(fe))});var ce={};ce[Y.dimensionInd]=Y.categoryValue,X.rawColor!==void 0&&(ce.color=X.rawColor),re.emit($,{points:ae,event:K,constraints:ce})}function w(Q,$,K){Q._fullLayout._calcInverseTransform(Q);var X,Y,re=Q._fullLayout._invScaleX,se=Q._fullLayout._invScaleY,ae=M.select(K.parentNode).select("rect.catrect"),ce=ae.node().getBoundingClientRect(),fe=ae.datum(),he=fe.parcatsViewModel,ve=he.model.dimensions[fe.model.dimensionInd],ye=he.trace,me=ce.top+ce.height/2;he.dimensions.length>1&&ve.displayInd===he.dimensions.length-1?(X=ce.left,Y="left"):(X=ce.left+ce.width,Y="right");var Me=fe.model.count,Pe=fe.model.categoryLabel,ge=Me/fe.parcatsViewModel.model.count,oe={countLabel:Me,categoryLabel:Pe,probabilityLabel:ge.toFixed(3)},ie=[];fe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ie.push(["Count:",oe.countLabel].join(" ")),fe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&ie.push(["P("+oe.categoryLabel+"):",oe.probabilityLabel].join(" "));var de=ie.join("<br>");return{trace:ye,x:re*(X-$.left),y:se*(me-$.top),text:de,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Y,hovertemplate:ye.hovertemplate,hovertemplateLabels:oe,eventData:[{data:ye._input,fullData:ye,count:Me,category:Pe,probability:ge}]}}function E(Q){if(!Q.parcatsViewModel.dragDimension&&Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(M.mouse(this)[1]<-1)return;var $,K=Q.parcatsViewModel.graphDiv,X=K._fullLayout,Y=X._paperdiv.node().getBoundingClientRect(),re=Q.parcatsViewModel.hoveron,se=this;re==="color"?(function(ae){var ce=M.select(ae).datum(),fe=b(ce);g(fe),fe.each(function(){_.raiseToTop(this)}),M.select(ae.parentNode).selectAll("rect.bandrect").filter(function(he){return he.color===ce.color}).each(function(){_.raiseToTop(this),M.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(se),S(se,"plotly_hover",M.event)):(function(ae){M.select(ae.parentNode).selectAll("rect.bandrect").each(function(ce){var fe=b(ce);g(fe),fe.each(function(){_.raiseToTop(this)})}),M.select(ae.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(se),f(se,"plotly_hover",M.event)),Q.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(re==="category"?$=w(K,Y,se):re==="color"?$=function(ae,ce,fe){ae._fullLayout._calcInverseTransform(ae);var he,ve,ye=ae._fullLayout._invScaleX,me=ae._fullLayout._invScaleY,Me=fe.getBoundingClientRect(),Pe=M.select(fe).datum(),ge=Pe.categoryViewModel,oe=ge.parcatsViewModel,ie=oe.model.dimensions[ge.model.dimensionInd],de=oe.trace,Se=Me.y+Me.height/2;oe.dimensions.length>1&&ie.displayInd===oe.dimensions.length-1?(he=Me.left,ve="left"):(he=Me.left+Me.width,ve="right");var _e=ge.model.categoryLabel,we=Pe.parcatsViewModel.model.count,Ae=0;Pe.categoryViewModel.bands.forEach(function(Ze){Ze.color===Pe.color&&(Ae+=Ze.count)});var Oe=ge.model.count,ze=0;oe.pathSelection.each(function(Ze){Ze.model.color===Pe.color&&(ze+=Ze.model.count)});var pe=Ae/we,be=Ae/ze,ke=Ae/Oe,Ie={countLabel:Ae,categoryLabel:_e,probabilityLabel:pe.toFixed(3)},Ee=[];ge.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ee.push(["Count:",Ie.countLabel].join(" ")),ge.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ee.push("P(color ∩ "+_e+"): "+Ie.probabilityLabel),Ee.push("P("+_e+" | color): "+be.toFixed(3)),Ee.push("P(color | "+_e+"): "+ke.toFixed(3)));var Be=Ee.join("<br>"),Ve=t.mostReadable(Pe.color,["black","white"]);return{trace:de,x:ye*(he-ce.left),y:me*(Se-ce.top),text:Be,color:Pe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:ve,hovertemplate:de.hovertemplate,hovertemplateLabels:Ie,eventData:[{data:de._input,fullData:de,category:_e,count:we,probability:pe,categorycount:Oe,colorcount:ze,bandcolorcount:Ae}]}}(K,Y,se):re==="dimension"&&($=function(ae,ce,fe){var he=[];return M.select(fe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){he.push(w(ae,ce,this))}),he}(K,Y,se)),$&&T.loneHover($,{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:K}))}}function O(Q){var $=Q.parcatsViewModel;$.dragDimension||(v($.pathSelection),y($.dimensionSelection.selectAll("g.category")),m($.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover($.graphDiv._fullLayout._hoverlayer.node()),$.pathSelection.sort(l),$.hoverinfoItems.indexOf("skip")!==-1)||(Q.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",M.event):f(this,"plotly_unhover",M.event))}function C(Q){Q.parcatsViewModel.arrangement!=="fixed"&&(Q.dragDimensionDisplayInd=Q.model.displayInd,Q.initialDragDimensionDisplayInds=Q.parcatsViewModel.model.dimensions.map(function($){return $.displayInd}),Q.dragHasMoved=!1,Q.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function($){var K=M.mouse(this)[0],X=M.mouse(this)[1];-2<=K&&K<=$.width+2&&-2<=X&&X<=$.height+2&&(Q.dragCategoryDisplayInd=$.model.displayInd,Q.initialDragCategoryDisplayInds=Q.model.categories.map(function(Y){return Y.displayInd}),$.model.dragY=$.y,_.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(Y){Y.y<X&&X<=Y.y+Y.height&&(Q.potentialClickBand=this)}))}),Q.parcatsViewModel.dragDimension=Q,T.loneUnhover(Q.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(Q){if(Q.parcatsViewModel.arrangement!=="fixed"&&(Q.dragHasMoved=!0,Q.dragDimensionDisplayInd!==null)){var $=Q.dragDimensionDisplayInd,K=$-1,X=$+1,Y=Q.parcatsViewModel.dimensions[$];if(Q.dragCategoryDisplayInd!==null){var re=Y.categories[Q.dragCategoryDisplayInd];re.model.dragY+=M.event.dy;var se=re.model.dragY,ae=re.model.displayInd,ce=Y.categories,fe=ce[ae-1],he=ce[ae+1];fe!==void 0&&se<fe.y+fe.height/2&&(re.model.displayInd=fe.model.displayInd,fe.model.displayInd=ae),he!==void 0&&se+re.height>he.y+he.height/2&&(re.model.displayInd=he.model.displayInd,he.model.displayInd=ae),Q.dragCategoryDisplayInd=re.model.displayInd}if(Q.dragCategoryDisplayInd===null||Q.parcatsViewModel.arrangement==="freeform"){Y.model.dragX=M.event.x;var ve=Q.parcatsViewModel.dimensions[K],ye=Q.parcatsViewModel.dimensions[X];ve!==void 0&&Y.model.dragX<ve.x+ve.width&&(Y.model.displayInd=ve.model.displayInd,ve.model.displayInd=$),ye!==void 0&&Y.model.dragX+Y.width>ye.x&&(Y.model.displayInd=ye.model.displayInd,ye.model.displayInd=Q.dragDimensionDisplayInd),Q.dragDimensionDisplayInd=Y.model.displayInd}H(Q.parcatsViewModel),j(Q.parcatsViewModel),N(Q.parcatsViewModel),I(Q.parcatsViewModel)}}function D(Q){if(Q.parcatsViewModel.arrangement!=="fixed"&&Q.dragDimensionDisplayInd!==null){M.select(this).selectAll("text").attr("font-weight","normal");var $={},K=U(Q.parcatsViewModel),X=Q.parcatsViewModel.model.dimensions.map(function(he){return he.displayInd}),Y=Q.initialDragDimensionDisplayInds.some(function(he,ve){return he!==X[ve]});Y&&X.forEach(function(he,ve){var ye=Q.parcatsViewModel.model.dimensions[ve].containerInd;$["dimensions["+ye+"].displayindex"]=he});var re=!1;if(Q.dragCategoryDisplayInd!==null){var se=Q.model.categories.map(function(he){return he.displayInd});if(re=Q.initialDragCategoryDisplayInds.some(function(he,ve){return he!==se[ve]})){var ae=Q.model.categories.slice().sort(function(he,ve){return he.displayInd-ve.displayInd}),ce=ae.map(function(he){return he.categoryValue}),fe=ae.map(function(he){return he.categoryLabel});$["dimensions["+Q.model.containerInd+"].categoryarray"]=[ce],$["dimensions["+Q.model.containerInd+"].ticktext"]=[fe],$["dimensions["+Q.model.containerInd+"].categoryorder"]="array"}}Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!Q.dragHasMoved&&Q.potentialClickBand&&(Q.parcatsViewModel.hoveron==="color"?S(Q.potentialClickBand,"plotly_click",M.event.sourceEvent):f(Q.potentialClickBand,"plotly_click",M.event.sourceEvent)),Q.model.dragX=null,Q.dragCategoryDisplayInd!==null&&(Q.parcatsViewModel.dimensions[Q.dragDimensionDisplayInd].categories[Q.dragCategoryDisplayInd].model.dragY=null,Q.dragCategoryDisplayInd=null),Q.dragDimensionDisplayInd=null,Q.parcatsViewModel.dragDimension=null,Q.dragHasMoved=null,Q.potentialClickBand=null,H(Q.parcatsViewModel),j(Q.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){N(Q.parcatsViewModel,!0),I(Q.parcatsViewModel,!0)}).each("end",function(){(Y||re)&&o.restyle(Q.parcatsViewModel.graphDiv,$,[K])})}}function U(Q){for(var $,K=Q.graphDiv._fullData,X=0;X<K.length;X++)if(Q.key===K[X].uid){$=X;break}return $}function I(Q,$){var K;$===void 0&&($=!1),Q.pathSelection.data(function(X){return X.paths},n),(K=Q.pathSelection,$?K.transition():K).attr("d",function(X){return X.svgD})}function N(Q,$){function K(se){return $?se.transition():se}$===void 0&&($=!1),Q.dimensionSelection.data(function(se){return se.dimensions},n);var X=Q.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},n);K(Q.dimensionSelection).attr("transform",function(se){return p(se.x,0)}),K(X).attr("transform",function(se){return p(0,se.y)}),X.select(".dimlabel").text(function(se,ae){return ae===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}),X.select(".catlabel").attr("text-anchor",function(se){return a(se)?"start":"end"}).attr("x",function(se){return a(se)?se.width+5:-5}).each(function(se){var ae,ce;a(se)?(ae=se.width+5,ce="start"):(ae=-5,ce="end"),M.select(this).selectAll("tspan").attr("x",ae).attr("text-anchor",ce)});var Y=X.selectAll("rect.bandrect").data(function(se){return se.bands},n),re=Y.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);Y.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),m(re),Y.each(function(){_.raiseToTop(this)}),Y.exit().remove()}function W(Q,$,K){var X,Y=K[0],re=$.margin||{l:80,r:80,t:100,b:80},se=Y.trace,ae=se.domain,ce=$.width,fe=$.height,he=Math.floor(ce*(ae.x[1]-ae.x[0])),ve=Math.floor(fe*(ae.y[1]-ae.y[0])),ye=ae.x[0]*ce+re.l,me=$.height-ae.y[1]*$.height+re.t,Me=se.line.shape;X=se.hoverinfo==="all"?["count","probability"]:(se.hoverinfo||"").split("+");var Pe={trace:se,key:se.uid,model:Y,x:ye,y:me,width:he,height:ve,hoveron:se.hoveron,hoverinfoItems:X,arrangement:se.arrangement,bundlecolors:se.bundlecolors,sortpaths:se.sortpaths,labelfont:se.labelfont,categorylabelfont:se.tickfont,pathShape:Me,dragDimension:null,margin:re,paths:[],dimensions:[],graphDiv:Q,traceSelection:null,pathSelection:null,dimensionSelection:null};return Y.dimensions&&(H(Pe),j(Pe)),Pe}function F(Q,$,K,X,Y){var re,se,ae=[],ce=[];for(se=0;se<K.length-1;se++)re=k(K[se]+Q[se],Q[se+1]),ae.push(re(Y)),ce.push(re(1-Y));var fe="M "+Q[0]+","+$[0];for(fe+="l"+K[0]+",0 ",se=1;se<K.length;se++)fe+="C"+ae[se-1]+","+$[se-1]+" "+ce[se-1]+","+$[se]+" "+Q[se]+","+$[se],fe+="l"+K[se]+",0 ";for(fe+="l0,"+X+" ",fe+="l -"+K[K.length-1]+",0 ",se=K.length-2;se>=0;se--)fe+="C"+ce[se]+","+($[se+1]+X)+" "+ae[se]+","+($[se]+X)+" "+(Q[se]+K[se])+","+($[se]+X),fe+="l-"+K[se]+",0 ";return fe+"Z"}function j(Q){var $=Q.dimensions,K=Q.model,X=$.map(function(Ie){return Ie.categories.map(function(Ee){return Ee.y})}),Y=Q.model.dimensions.map(function(Ie){return Ie.categories.map(function(Ee){return Ee.displayInd})}),re=Q.model.dimensions.map(function(Ie){return Ie.displayInd}),se=Q.dimensions.map(function(Ie){return Ie.model.dimensionInd}),ae=$.map(function(Ie){return Ie.x}),ce=$.map(function(Ie){return Ie.width}),fe=[];for(var he in K.paths)K.paths.hasOwnProperty(he)&&fe.push(K.paths[he]);function ve(Ie){var Ee=Ie.categoryInds.map(function(Be,Ve){return Y[Ve][Be]});return se.map(function(Be){return Ee[Be]})}fe.sort(function(Ie,Ee){var Be=ve(Ie),Ve=ve(Ee);return Q.sortpaths==="backward"&&(Be.reverse(),Ve.reverse()),Be.push(Ie.valueInds[0]),Ve.push(Ee.valueInds[0]),Q.bundlecolors&&(Be.unshift(Ie.rawColor),Ve.unshift(Ee.rawColor)),Be<Ve?-1:Be>Ve?1:0});for(var ye=new Array(fe.length),me=$[0].model.count,Me=$[0].categories.map(function(Ie){return Ie.height}).reduce(function(Ie,Ee){return Ie+Ee}),Pe=0;Pe<fe.length;Pe++){var ge,oe=fe[Pe];ge=me>0?Me*(oe.count/me):0;for(var ie,de=new Array(X.length),Se=0;Se<oe.categoryInds.length;Se++){var _e=oe.categoryInds[Se],we=Y[Se][_e],Ae=re[Se];de[Ae]=X[Ae][we],X[Ae][we]+=ge;var Oe=Q.dimensions[Ae].categories[we],ze=Oe.bands.length,pe=Oe.bands[ze-1];if(pe===void 0||oe.rawColor!==pe.rawColor){var be=pe===void 0?0:pe.y+pe.height;Oe.bands.push({key:be,color:oe.color,rawColor:oe.rawColor,height:ge,width:Oe.width,count:oe.count,y:be,categoryViewModel:Oe,parcatsViewModel:Q})}else{var ke=Oe.bands[ze-1];ke.height+=ge,ke.count+=oe.count}}ie=Q.pathShape==="hspline"?F(ae,de,ce,ge,.5):F(ae,de,ce,ge,0),ye[Pe]={key:oe.valueInds[0],model:oe,height:ge,leftXs:ae,topYs:de,dimWidths:ce,svgD:ie,parcatsViewModel:Q}}Q.paths=ye}function H(Q){var $=Q.model.dimensions.map(function(se){return{displayInd:se.displayInd,dimensionInd:se.dimensionInd}});$.sort(function(se,ae){return se.displayInd-ae.displayInd});var K=[];for(var X in $){var Y=$[X].dimensionInd,re=Q.model.dimensions[Y];K.push(te(Q,re))}Q.dimensions=K}function te(Q,$){var K,X=Q.model.dimensions.length,Y=$.displayInd;K=40+(X>1?(Q.width-80-16)/(X-1):0)*Y;var re,se,ae,ce,fe,he=[],ve=Q.model.maxCats,ye=$.categories.length,me=$.count,Me=Q.height-8*(ve-1),Pe=8*(ve-ye)/2,ge=$.categories.map(function(oe){return{displayInd:oe.displayInd,categoryInd:oe.categoryInd}});for(ge.sort(function(oe,ie){return oe.displayInd-ie.displayInd}),fe=0;fe<ye;fe++)ce=ge[fe].categoryInd,se=$.categories[ce],re=me>0?se.count/me*Me:0,ae={key:se.valueInds[0],model:se,width:16,height:re,y:se.dragY!==null?se.dragY:Pe,bands:[],parcatsViewModel:Q},Pe=Pe+re+8,he.push(ae);return{key:$.dimensionInd,x:$.dragX!==null?$.dragX:K,y:0,width:16,model:$,categories:he,parcatsViewModel:Q,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ee.exports=function(Q,$,K,X){r(K,Q,X,$)}},60268:function(ee,R,e){var M=e(51036);ee.exports=function(k,o,T,_){var p=k._fullLayout,s=p._paper,t=p._size;M(k,s,o,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,_)}},82296:function(ee,R,e){var M=e(49084),k=e(94724),o=e(25376),T=e(86968).u,_=e(92880).extendFlat,p=e(31780).templatedArray;ee.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({autoShadowDflt:!0,editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:p("dimension",{label:{valType:"string",editType:"plot"},tickvals:_({},k.tickvals,{editType:"plot"}),ticktext:_({},k.ticktext,{editType:"plot"}),tickformat:_({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:_({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(ee,R,e){var M=e(30140),k=e(33428),o=e(71688).keyFun,T=e(71688).repeat,_=e(3400).sorterAsc,p=e(3400).strTranslate,s=M.bar.snapRatio;function t(w,E){return w*(1-s)+E*s}var i=M.bar.snapClose;function r(w,E){return w*(1-i)+E*i}function n(w,E,O,C){if(function(te,Q){for(var $=0;$<Q.length;$++)if(te>=Q[$][0]&&te<=Q[$][1])return!0;return!1}(O,C))return O;var P=w?-1:1,D=0,U=E.length-1;if(P<0){var I=D;D=U,U=I}for(var N=E[D],W=N,F=D;P*F<P*U;F+=P){var j=F+P,H=E[j];if(P*O<P*r(N,H))return t(N,W);if(P*O<P*H||j===U)return t(H,N);W=N,N=H}}function a(w){w.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function l(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,O,C,P=h(w.brush.filter.getConsolidated(),w.height),D=[0],U=P.length?P[0][0]:null,I=0;I<P.length;I++)O=(E=P[I])[1]-E[0],D.push(U),D.push(O),(C=I+1)<P.length&&(U=P[C][0]-E[1]);return D.push(w.height),D}function h(w,E){return w.map(function(O){return O.map(function(C){return Math.max(0,C*E)}).sort(_)})}function c(){k.select(document.body).style("cursor",null)}function x(w){w.attr("stroke-dasharray",u)}function d(w,E){var O=k.select(w).selectAll(".highlight, .highlight-shadow");x(E?O.transition().duration(M.bar.snapDuration).each("end",E):O)}function v(w,E){var O,C=w.brush,P=NaN,D={};if(C.filterSpecified){var U=w.height,I=C.filter.getConsolidated(),N=h(I,U),W=NaN,F=NaN,j=NaN;for(O=0;O<=N.length;O++){var H=N[O];if(H&&H[0]<=E&&E<=H[1]){W=O;break}if(F=O?O-1:NaN,H&&H[0]>E){j=O;break}}if(P=W,isNaN(P)&&(P=isNaN(F)||isNaN(j)?isNaN(F)?j:F:E-N[F][1]<N[j][0]-E?F:j),!isNaN(P)){var te=N[P],Q=function(Y,re){var se=M.bar.handleHeight;if(!(re>Y[1]+se||re<Y[0]-se))return re>=.9*Y[1]+.1*Y[0]?"n":re<=.9*Y[0]+.1*Y[1]?"s":"ns"}(te,E);Q&&(D.interval=I[P],D.intervalPix=te,D.region=Q)}}if(w.ordinal&&!D.region){var $=w.unitTickvals,K=w.unitToPaddedPx.invert(E);for(O=0;O<$.length;O++){var X=[.25*$[Math.max(O-1,0)]+.75*$[O],.25*$[Math.min(O+1,$.length-1)]+.75*$[O]];if(K>=X[0]&&K<=X[1]){D.clickableOrdinalRange=X;break}}}return D}function g(w,E){k.event.sourceEvent.stopPropagation();var O=E.height-k.mouse(w)[1]-2*M.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[O-C.grabPoint,O+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(O)].sort(_),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),d(w.parentNode)}function y(w,E){var O=v(E,E.height-k.mouse(w)[1]-2*M.verticalPadding),C="crosshair";O.clickableOrdinalRange?C="pointer":O.region&&(C=O.region+"-resize"),k.select(document.body).style("cursor",C)}function m(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||y(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(k.behavior.drag().on("dragstart",function(E){(function(O,C){k.event.sourceEvent.stopPropagation();var P=C.height-k.mouse(O)[1]-2*M.verticalPadding,D=C.unitToPaddedPx.invert(P),U=C.brush,I=v(C,P),N=I.interval,W=U.svgBrush;if(W.wasDragged=!1,W.grabbingBar=I.region==="ns",W.grabbingBar){var F=N.map(C.unitToPaddedPx);W.grabPoint=P-F[0]-M.verticalPadding,W.barLength=F[1]-F[0]}W.clickableOrdinalRange=I.clickableOrdinalRange,W.stayingIntervals=C.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],N&&(W.stayingIntervals=W.stayingIntervals.filter(function(j){return j[0]!==N[0]&&j[1]!==N[1]})),W.startExtent=I.region?N[I.region==="s"?1:0]:D,C.parent.inBrushDrag=!0,W.brushStartCallback()})(this,E)}).on("drag",function(E){g(this,E)}).on("dragend",function(E){(function(O,C){var P=C.brush,D=P.filter,U=P.svgBrush;U._dragging||(y(O,C),g(O,C),C.brush.svgBrush.wasDragged=!1),U._dragging=!1,k.event.sourceEvent.stopPropagation();var I=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,C.parent.inBrushDrag=!1,c(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?P.filterSpecified&&C.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],P.filterSpecified=!0):I?(U.extent=U.stayingIntervals,U.extent.length===0&&f(P)):f(P),U.brushCallback(C),d(O.parentNode),void U.brushEndCallback(P.filterSpecified?D.getConsolidated():[]);var N=function(){D.set(D.getConsolidated())};if(C.ordinal){var W=C.unitTickvals;W[W.length-1]<W[0]&&W.reverse(),U.newExtent=[n(0,W,U.newExtent[0],U.stayingIntervals),n(1,W,U.newExtent[1],U.stayingIntervals)];var F=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(F?[U.newExtent]:[]),U.extent.length||f(P),U.brushCallback(C),F?d(O.parentNode,N):(N(),d(O.parentNode))}else N();U.brushEndCallback(P.filterSpecified?D.getConsolidated():[])})(this,E)}))}function b(w,E){return w[0]-E[0]}function f(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function S(w){for(var E,O=w.slice(),C=[],P=O.shift();P;){for(E=P.slice();(P=O.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}ee.exports={makeBrush:function(w,E,O,C,P,D){var U,I=function(){var N,W,F=[];return{set:function(j){(F=j.map(function(H){return H.slice().sort(_)}).sort(b)).length===1&&F[0][0]===-1/0&&F[0][1]===1/0&&(F=[[0,-1]]),N=S(F),W=F.reduce(function(H,te){return[Math.min(H[0],te[0]),Math.max(H[1],te[1])]},[1/0,-1/0])},get:function(){return F.slice()},getConsolidated:function(){return N},getBounds:function(){return W}}}();return I.set(O),{filter:I,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(U=P,function(N){var W=N.brush,F=function(H){return H.svgBrush.extent.map(function(te){return te.slice()})}(W),j=F.slice();W.filter.set(j),U()}),brushEndCallback:D}}},ensureAxisBrush:function(w,E,O){var C=w.selectAll("."+M.cn.axisBrush).data(T,o);C.enter().append("g").classed(M.cn.axisBrush,!0),function(P,D,U){var I=U._context.staticPlot,N=P.selectAll(".background").data(T);N.enter().append("rect").classed("background",!0).call(a).call(l).style("pointer-events",I?"none":"auto").attr("transform",p(0,M.verticalPadding)),N.call(m).attr("height",function(j){return j.height-M.verticalPadding});var W=P.selectAll(".highlight-shadow").data(T);W.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",D).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(j){return j.height}).call(x);var F=P.selectAll(".highlight").data(T);F.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(j){return j.height}).call(x)}(C,E,O)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(C){return C.sort(_)}),w=E.multiselect?S(w.sort(b)):[w[0]]):w=[w.sort(_)],E.tickvals){var O=E.tickvals.slice().sort(_);if(!(w=w.map(function(C){var P=[n(0,O,C[0],[]),n(1,O,C[1],[])];if(P[1]>P[0])return P}).filter(function(C){return C})).length)return}return w.length>1?w:w[0]}}},61664:function(ee,R,e){ee.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(ee,R,e){var M=e(33428),k=e(84888)._M,o=e(24196),T=e(9616);R.name="parcoords",R.plot=function(_){var p=k(_.calcdata,"parcoords")[0];p.length&&o(_,p)},R.clean=function(_,p,s,t){var i=t._has&&t._has("parcoords"),r=p._has&&p._has("parcoords");i&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},R.toSVG=function(_){var p=_._fullLayout._glimages,s=M.select(_).selectAll(".svg-container");s.filter(function(t,i){return i===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");p.append("svg:image").attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(ee,R,e){var M=e(3400).isArrayOrTypedArray,k=e(8932),o=e(71688).wrap;ee.exports=function(T,_){var p,s;return k.hasColorscale(_,"line")&&M(_.line.color)?(p=_.line.color,s=k.extractOpts(_.line).colorscale,k.calc(T,_,{vals:p,containerStr:"line",cLetter:"c"})):(p=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=.5;return i}(_._length),s=[[0,_.line.color],[1,_.line.color]]),o({lineColor:p,cscale:s})}},30140:function(ee){ee.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(ee,R,e){var M=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,_=e(51272),p=e(54460),s=e(82296),t=e(71864),i=e(30140).maxDimensionCount,r=e(26284);function n(a,l,u,h){function c(y,m){return M.coerce(a,l,s.dimensions,y,m)}var x=c("values"),d=c("visible");if(x&&x.length||(d=l.visible=!1),d){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var v=c("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:v},p.setConvert(l._ax,h.layout),c("multiselect");var g=c("constraintrange");g&&(l.constraintrange=t.cleanRanges(g,l))}}ee.exports=function(a,l,u,h){function c(y,m){return M.coerce(a,l,s,y,m)}var x=a.dimensions;Array.isArray(x)&&x.length>i&&(M.log("parcoords traces support up to "+i+" dimensions at the moment"),x.splice(i));var d=_(a,l,{name:"dimensions",layout:h,handleItemDefaults:n}),v=function(y,m,b,f,S){var w=S("line.color",b);if(k(y,"line")&&M.isArrayOrTypedArray(w)){if(w.length)return S("line.colorscale"),o(y,m,f,S,{prefix:"line.",cLetter:"c"}),w.length;m.line.color=b}return 1/0}(a,l,u,h,c);T(l,h,c),Array.isArray(d)&&d.length||(l.visible=!1),r(l,d,"values",v);var g=M.extendFlat({},h.font,{size:Math.round(h.font.size/1.2)});M.coerceFont(c,"labelfont",g),M.coerceFont(c,"tickfont",g,{autoShadowDflt:!0}),M.coerceFont(c,"rangefont",g),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},95724:function(ee,R,e){var M=e(3400).isTypedArray;R.convertTypedArray=function(k){return M(k)?Array.prototype.slice.call(k):k},R.isOrdinal=function(k){return!!k.tickvals},R.isVisible=function(k){return k.visible||!("visible"in k)}},29928:function(ee,R,e){var M=e(61664);M.plot=e(24196),ee.exports=M},51352:function(ee,R,e){var M=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),k=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),o=e(30140).maxDimensionCount,T=e(3400),_=1e-6,p=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(d,v,g,y,m){var b=d._gl;b.enable(b.SCISSOR_TEST),b.scissor(v,g,y,m),d.clear({color:[0,0,0,0],depth:1})}function r(d,v,g,y,m,b){var f=b.key;g.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:p})}(d),g.drawCompleted=!0),function S(w){var E=Math.min(y,m-w*y);w===0&&(window.cancelAnimationFrame(g.currentRafs[f]),delete g.currentRafs[f],i(d,b.scissorX,b.scissorY,b.scissorWidth,b.viewBoxSize[1])),g.clearOnly||(b.count=2*E,b.offset=2*w*y,v(b),w*y+E<m&&(g.currentRafs[f]=window.requestAnimationFrame(function(){S(w+1)})),g.drawCompleted=!1)}(0)}function n(d,v){for(var g=new Array(256),y=0;y<256;y++)g[y]=d(y/255).concat(v);return g}function a(d,v){return(d>>>8*v)%256/255}function l(d,v,g){for(var y=new Array(8*v),m=0,b=0;b<v;b++)for(var f=0;f<2;f++)for(var S=0;S<4;S++){var w=4*d+S,E=g[64*b+w];w===63&&f===0&&(E*=-1),y[m++]=E}return y}function u(d){var v="0"+d;return v.substr(v.length-2)}function h(d){return d<o?"p"+u(d+1)+"_"+u(d+4):"colors"}function c(d,v,g,y,m,b,f,S,w,E,O,C,P,D){for(var U=[[],[]],I=0;I<64;I++)U[0][I]=I===m?1:0,U[1][I]=I===b?1:0;f*=D,S*=D,w*=D,E*=D;var N=d.lines.canvasOverdrag*D,W=d.domain,F=d.canvasWidth*D,j=d.canvasHeight*D,H=d.pad.l*D,te=d.pad.b*D,Q=d.layoutHeight*D,$=d.layoutWidth*D,K=d.deselectedLines.color,X=d.deselectedLines.opacity;return T.extendFlat({key:O,resolution:[F,j],viewBoxPos:[f+N,S],viewBoxSize:[w,E],i0:m,i1:b,dim0A:U[0].slice(0,16),dim0B:U[0].slice(16,32),dim0C:U[0].slice(32,48),dim0D:U[0].slice(48,64),dim1A:U[1].slice(0,16),dim1B:U[1].slice(16,32),dim1C:U[1].slice(32,48),dim1D:U[1].slice(48,64),drwLayer:C,contextColor:[K[0]/255,K[1]/255,K[2]/255,X!=="auto"?K[3]*X:Math.max(.00392156862745098,Math.pow(1/d.lines.color.length,.3333333333333333))],scissorX:(y===v?0:f+N)+(H-N)+$*W.x[0],scissorWidth:(y===g?F-f+N:w+.5)+(y===v?f+N:0),scissorY:S+te+Q*W.y[0],scissorHeight:E,viewportX:H-N+$*W.x[0],viewportY:te+Q*W.y[0],viewportWidth:F,viewportHeight:j},P)}function x(d){var v=2047,g=Math.max(0,Math.floor(d[0]*v),0),y=Math.min(v,Math.ceil(d[1]*v),v);return[Math.min(g,y),Math.max(g,y)]}ee.exports=function(d,v){var g,y,m,b,f,S=v.context,w=v.pick,E=v.regl,O=E._gl,C=O.getParameter(O.ALIASED_LINE_WIDTH_RANGE),P=Math.max(C[0],Math.min(C[1],v.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},U=function(j){for(var H={},te=0;te<=o;te+=4)H[h(te)]=j.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return H}(E),I=E.texture(t),N=[];F(v);var W=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:M,frag:k,primitive:"lines",lineWidth:P,attributes:U,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:I,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function F(j){g=j.model,y=j.viewModel,m=y.dimensions.slice(),b=m[0]?m[0].values.length:0;var H=g.lines,te=w?H.color.map(function($,K){return K/H.color.length}):H.color,Q=function($,K,X){for(var Y,re=new Array($*(o+4)),se=0,ae=0;ae<$;ae++){for(var ce=0;ce<o;ce++)re[se++]=ce<K.length?K[ce].paddedUnitValues[ae]:.5;re[se++]=a(ae,2),re[se++]=a(ae,1),re[se++]=a(ae,0),re[se++]=(Y=X[ae],Math.max(_,Math.min(.999999,Y)))}return re}(b,m,te);(function($,K,X){for(var Y=0;Y<=o;Y+=4)$[h(Y)](l(Y/4,K,X))})(U,b,Q),S||w||(I=E.texture(T.extendFlat({data:n(g.unitToColor,255)},t)))}return{render:function(j,H,te){var Q,$,K,X=j.length,Y=1/0,re=-1/0;for(Q=0;Q<X;Q++)j[Q].dim0.canvasX<Y&&(Y=j[Q].dim0.canvasX,$=Q),j[Q].dim1.canvasX>re&&(re=j[Q].dim1.canvasX,K=Q);X===0&&i(E,0,0,g.canvasWidth,g.canvasHeight);var se=function(ge){var oe,ie,de,Se=[[],[]];for(de=0;de<64;de++){var _e=!ge&&de<m.length?m[de].brush.filter.getBounds():[-1/0,1/0];Se[0][de]=_e[0],Se[1][de]=_e[1]}var we=new Array(16384);for(oe=0;oe<16384;oe++)we[oe]=255;if(!ge)for(oe=0;oe<m.length;oe++){var Ae=oe%8,Oe=(oe-Ae)/8,ze=Math.pow(2,Ae),pe=m[oe].brush.filter.get();if(!(pe.length<2)){var be=x(pe[0])[1];for(ie=1;ie<pe.length;ie++){var ke=x(pe[ie]);for(de=be+1;de<ke[0];de++)we[8*de+Oe]&=~ze;be=Math.max(be,ke[1])}}}var Ie={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:we};return f?f(Ie):f=E.texture(Ie),{maskTexture:f,maskHeight:2048,loA:Se[0].slice(0,16),loB:Se[0].slice(16,32),loC:Se[0].slice(32,48),loD:Se[0].slice(48,64),hiA:Se[1].slice(0,16),hiB:Se[1].slice(16,32),hiC:Se[1].slice(32,48),hiD:Se[1].slice(48,64)}}(S);for(Q=0;Q<X;Q++){var ae=j[Q],ce=ae.dim0.crossfilterDimensionIndex,fe=ae.dim1.crossfilterDimensionIndex,he=ae.canvasX,ve=ae.canvasY,ye=he+ae.panelSizeX,me=ae.plotGlPixelRatio;if(H||!N[ce]||N[ce][0]!==he||N[ce][1]!==ye){N[ce]=[he,ye];var Me=c(g,$,K,Q,ce,fe,he,ve,ae.panelSizeX,ae.panelSizeY,ae.dim0.crossfilterDimensionIndex,S?0:w?2:1,se,me);D.clearOnly=te;var Pe=H?g.lines.blockLineCount:b;r(E,W,D,Pe,b,Me)}}},readPixel:function(j,H){return E.read({x:j,y:H,width:1,height:1,data:s}),s},readPixels:function(j,H,te,Q){var $=new Uint8Array(4*te*Q);return E.read({x:j,y:H,width:te,height:Q,data:$}),$},destroy:function(){for(var j in d.style["pointer-events"]="none",I.destroy(),f&&f.destroy(),U)U[j].destroy()},update:F}}},26284:function(ee){ee.exports=function(R,e,M,k){var o,T;for(k||(k=1/0),o=0;o<e.length;o++)(T=e[o]).visible&&(k=Math.min(k,T[M].length));for(k===1/0&&(k=0),R._length=k,o=0;o<e.length;o++)(T=e[o]).visible&&(T._length=k);return k}},36336:function(ee,R,e){var M=e(33428),k=e(3400),o=k.isArrayOrTypedArray,T=k.numberFormat,_=e(96824),p=e(54460),s=k.strRotate,t=k.strTranslate,i=e(72736),r=e(43616),n=e(8932),a=e(71688),l=a.keyFun,u=a.repeat,h=a.unwrap,c=e(95724),x=e(30140),d=e(71864),v=e(51352);function g(W,F,j){return k.aggNums(W,null,F,j)}function y(W,F){return b(g(Math.min,W,F),g(Math.max,W,F))}function m(W){var F=W.range;return F?b(F[0],F[1]):y(W.values,W._length)}function b(W,F){return!isNaN(W)&&isFinite(W)||(W=0),!isNaN(F)&&isFinite(F)||(F=0),W===F&&(W===0?(W-=1,F+=1):(W*=.9,F*=1.1)),[W,F]}function f(W,F,j,H,te){var Q,$,K=m(j);return H?M.scale.ordinal().domain(H.map((Q=T(j.tickformat),$=te,$?function(X,Y){var re=$[Y];return re??Q(X)}:Q))).range(H.map(function(X){var Y=(X-K[0])/(K[1]-K[0]);return W-F+Y*(2*F-W)})):M.scale.linear().domain(K).range([W-F,F])}function S(W){if(W.tickvals){var F=m(W);return M.scale.ordinal().domain(W.tickvals).range(W.tickvals.map(function(j){return(j-F[0])/(F[1]-F[0])}))}}function w(W){var F=W.map(function(te){return te[0]}),j=W.map(function(te){var Q=_(te[1]);return M.rgb("rgb("+Q[0]+","+Q[1]+","+Q[2]+")")}),H="rgb".split("").map(function(te){return M.scale.linear().clamp(!0).domain(F).range(j.map((Q=te,function($){return $[Q]})));var Q});return function(te){return H.map(function(Q){return Q(te)})}}function E(W){return W.dimensions.some(function(F){return F.brush.filterSpecified})}function O(W,F,j){var H=h(F),te=H.trace,Q=c.convertTypedArray(H.lineColor),$=te.line,K={color:_(te.unselected.line.color),opacity:te.unselected.line.opacity},X=n.extractOpts($),Y=X.reversescale?n.flipScale(H.cscale):H.cscale,re=te.domain,se=te.dimensions,ae=W.width,ce=te.labelangle,fe=te.labelside,he=te.labelfont,ve=te.tickfont,ye=te.rangefont,me=k.extendDeepNoArrays({},$,{color:Q.map(M.scale.linear().domain(m({values:Q,range:[X.min,X.max],_length:te._length}))),blockLineCount:x.blockLineCount,canvasOverdrag:x.overdrag*x.canvasPixelRatio}),Me=Math.floor(ae*(re.x[1]-re.x[0])),Pe=Math.floor(W.height*(re.y[1]-re.y[0])),ge=W.margin||{l:80,r:80,t:100,b:80},oe=Me,ie=Pe;return{key:j,colCount:se.filter(c.isVisible).length,dimensions:se,tickDistance:x.tickDistance,unitToColor:w(Y),lines:me,deselectedLines:K,labelAngle:ce,labelSide:fe,labelFont:he,tickFont:ve,rangeFont:ye,layoutWidth:ae,layoutHeight:W.height,domain:re,translateX:re.x[0]*ae,translateY:W.height-re.y[1]*W.height,pad:ge,canvasWidth:oe*x.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:ie*x.canvasPixelRatio,width:oe,height:ie,canvasPixelRatio:x.canvasPixelRatio}}function C(W,F,j){var H=j.width,te=j.height,Q=j.dimensions,$=j.canvasPixelRatio,K=function(ae){return H*ae/Math.max(1,j.colCount-1)},X=x.verticalPadding/te,Y=function(ae,ce){return M.scale.linear().range([ce,ae-ce])}(te,x.verticalPadding),re={key:j.key,xScale:K,model:j,inBrushDrag:!1},se={};return re.dimensions=Q.filter(c.isVisible).map(function(ae,ce){var fe=function(Ae,Oe){return M.scale.linear().domain(m(Ae)).range([Oe,1-Oe])}(ae,X),he=se[ae.label];se[ae.label]=(he||0)+1;var ve=ae.label+(he?"__"+he:""),ye=ae.constraintrange,me=ye&&ye.length;me&&!o(ye[0])&&(ye=[ye]);var Me=me?ye.map(function(Ae){return Ae.map(fe)}):[[-1/0,1/0]],Pe=ae.values;Pe.length>ae._length&&(Pe=Pe.slice(0,ae._length));var ge,oe=ae.tickvals;function ie(Ae,Oe){return{val:Ae,text:ge[Oe]}}function de(Ae,Oe){return Ae.val-Oe.val}if(o(oe)&&oe.length){k.isTypedArray(oe)&&(oe=Array.from(oe)),ge=ae.ticktext,o(ge)&&ge.length?ge.length>oe.length?ge=ge.slice(0,oe.length):oe.length>ge.length&&(oe=oe.slice(0,ge.length)):ge=oe.map(T(ae.tickformat));for(var Se=1;Se<oe.length;Se++)if(oe[Se]<oe[Se-1]){for(var _e=oe.map(ie).sort(de),we=0;we<oe.length;we++)oe[we]=_e[we].val,ge[we]=_e[we].text;break}}else oe=void 0;return Pe=c.convertTypedArray(Pe),{key:ve,label:ae.label,tickFormat:ae.tickformat,tickvals:oe,ticktext:ge,ordinal:c.isOrdinal(ae),multiselect:ae.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:ae._index,height:te,values:Pe,paddedUnitValues:Pe.map(fe),unitTickvals:oe&&oe.map(fe),xScale:K,x:K(ce),canvasX:K(ce)*$,unitToPaddedPx:Y,domainScale:f(te,x.verticalPadding,ae,oe,ge),ordinalScale:S(ae),parent:re,model:j,brush:d.makeBrush(W,me,Me,function(){W.linePickActive(!1)},function(){var Ae=re;Ae.focusLayer&&Ae.focusLayer.render(Ae.panels,!0);var Oe=E(Ae);!W.contextShown()&&Oe?(Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!0),W.contextShown(!0)):W.contextShown()&&!Oe&&(Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!0,!0),W.contextShown(!1))},function(Ae){if(re.focusLayer.render(re.panels,!0),re.pickLayer&&re.pickLayer.render(re.panels,!0),W.linePickActive(!0),F&&F.filterChanged){var Oe=fe.invert,ze=Ae.map(function(pe){return pe.map(Oe).sort(k.sorterAsc)}).sort(function(pe,be){return pe[0]-be[0]});F.filterChanged(re.key,ae._index,ze)}})}}),re}function P(W){W.classed(x.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function D(W,F){var j=F==="top"?1:-1,H=W*Math.PI/180;return{dir:j,dx:Math.sin(H),dy:Math.cos(H),degrees:W}}function U(W,F,j){for(var H=F.panels||(F.panels=[]),te=W.data(),Q=0;Q<te.length-1;Q++){var $=H[Q]||(H[Q]={}),K=te[Q],X=te[Q+1];$.dim0=K,$.dim1=X,$.canvasX=K.canvasX,$.panelSizeX=X.canvasX-K.canvasX,$.panelSizeY=F.model.canvasHeight,$.y=0,$.canvasY=0,$.plotGlPixelRatio=j}}function I(W,F){return p.tickText(W._ax,F,!1).text}function N(W,F){if(W.ordinal)return"";var j=W.domainScale.domain(),H=j[F?j.length-1:0];return I(W.model.dimensions[W.visibleIndex],H)}ee.exports=function(W,F,j,H){var te=W._context.staticPlot,Q=W._fullLayout,$=Q._toppaper,K=Q._glcontainer,X=W._context.plotGlPixelRatio,Y=W._fullLayout.paper_bgcolor;(function(Ae){for(var Oe=0;Oe<Ae.length;Oe++)for(var ze=0;ze<Ae[Oe].length;ze++)for(var pe=Ae[Oe][ze].trace,be=pe.dimensions,ke=0;ke<be.length;ke++){var Ie=be[ke].values,Ee=be[ke]._ax;Ee&&(Ee.range?Ee.range=b(Ee.range[0],Ee.range[1]):Ee.range=y(Ie,pe._length),Ee.dtick||(Ee.dtick=.01*(Math.abs(Ee.range[1]-Ee.range[0])||1)),Ee.tickformat=be[ke].tickformat,p.calcTicks(Ee),Ee.cleanRange())}})(F);var re,se,ae=(re=!0,se=!1,{linePickActive:function(Ae){return arguments.length?re=!!Ae:re},contextShown:function(Ae){return arguments.length?se=!!Ae:se}}),ce=F.filter(function(Ae){return h(Ae).trace.visible}).map(O.bind(0,j)).map(C.bind(0,ae,H));K.each(function(Ae,Oe){return k.extendFlat(Ae,ce[Oe])});var fe=K.selectAll(".gl-canvas").each(function(Ae){Ae.viewModel=ce[0],Ae.viewModel.plotGlPixelRatio=X,Ae.viewModel.paperColor=Y,Ae.model=Ae.viewModel?Ae.viewModel.model:null}),he=null;fe.filter(function(Ae){return Ae.pick}).style("pointer-events",te?"none":"auto").on("mousemove",function(Ae){if(ae.linePickActive()&&Ae.lineLayer&&H&&H.hover){var Oe=M.event,ze=this.width,pe=this.height,be=M.mouse(this),ke=be[0],Ie=be[1];if(ke<0||Ie<0||ke>=ze||Ie>=pe)return;var Ee=Ae.lineLayer.readPixel(ke,pe-1-Ie),Be=Ee[3]!==0,Ve=Be?Ee[2]+256*(Ee[1]+256*Ee[0]):null,Ze={x:ke,y:Ie,clientX:Oe.clientX,clientY:Oe.clientY,dataIndex:Ae.model.key,curveNumber:Ve};Ve!==he&&(Be?H.hover(Ze):H.unhover&&H.unhover(Ze),he=Ve)}}),fe.style("opacity",function(Ae){return Ae.pick?0:1}),$.style("background","rgba(255, 255, 255, 0)");var ve=$.selectAll("."+x.cn.parcoords).data(ce,l);ve.exit().remove(),ve.enter().append("g").classed(x.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ve.attr("transform",function(Ae){return t(Ae.model.translateX,Ae.model.translateY)});var ye=ve.selectAll("."+x.cn.parcoordsControlView).data(u,l);ye.enter().append("g").classed(x.cn.parcoordsControlView,!0),ye.attr("transform",function(Ae){return t(Ae.model.pad.l,Ae.model.pad.t)});var me=ye.selectAll("."+x.cn.yAxis).data(function(Ae){return Ae.dimensions},l);me.enter().append("g").classed(x.cn.yAxis,!0),ye.each(function(Ae){U(me,Ae,X)}),fe.each(function(Ae){if(Ae.viewModel){!Ae.lineLayer||H?Ae.lineLayer=v(this,Ae):Ae.lineLayer.update(Ae),(Ae.key||Ae.key===0)&&(Ae.viewModel[Ae.key]=Ae.lineLayer);var Oe=!Ae.context||H;Ae.lineLayer.render(Ae.viewModel.panels,Oe)}}),me.attr("transform",function(Ae){return t(Ae.xScale(Ae.xIndex),0)}),me.call(M.behavior.drag().origin(function(Ae){return Ae}).on("drag",function(Ae){var Oe=Ae.parent;ae.linePickActive(!1),Ae.x=Math.max(-x.overdrag,Math.min(Ae.model.width+x.overdrag,M.event.x)),Ae.canvasX=Ae.x*Ae.model.canvasPixelRatio,me.sort(function(ze,pe){return ze.x-pe.x}).each(function(ze,pe){ze.xIndex=pe,ze.x=Ae===ze?ze.x:ze.xScale(ze.xIndex),ze.canvasX=ze.x*ze.model.canvasPixelRatio}),U(me,Oe,X),me.filter(function(ze){return Math.abs(Ae.xIndex-ze.xIndex)!==0}).attr("transform",function(ze){return t(ze.xScale(ze.xIndex),0)}),M.select(this).attr("transform",t(Ae.x,0)),me.each(function(ze,pe,be){be===Ae.parent.key&&(Oe.dimensions[pe]=ze)}),Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!1,!E(Oe)),Oe.focusLayer.render&&Oe.focusLayer.render(Oe.panels)}).on("dragend",function(Ae){var Oe=Ae.parent;Ae.x=Ae.xScale(Ae.xIndex),Ae.canvasX=Ae.x*Ae.model.canvasPixelRatio,U(me,Oe,X),M.select(this).attr("transform",function(ze){return t(ze.x,0)}),Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!1,!E(Oe)),Oe.focusLayer&&Oe.focusLayer.render(Oe.panels),Oe.pickLayer&&Oe.pickLayer.render(Oe.panels,!0),ae.linePickActive(!0),H&&H.axesMoved&&H.axesMoved(Oe.key,Oe.dimensions.map(function(ze){return ze.crossfilterDimensionIndex}))})),me.exit().remove();var Me=me.selectAll("."+x.cn.axisOverlays).data(u,l);Me.enter().append("g").classed(x.cn.axisOverlays,!0),Me.selectAll("."+x.cn.axis).remove();var Pe=Me.selectAll("."+x.cn.axis).data(u,l);Pe.enter().append("g").classed(x.cn.axis,!0),Pe.each(function(Ae){var Oe=Ae.model.height/Ae.model.tickDistance,ze=Ae.domainScale,pe=ze.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Oe,Ae.tickFormat).tickValues(Ae.ordinal?pe:null).tickFormat(function(be){return c.isOrdinal(Ae)?be:I(Ae.model.dimensions[Ae.visibleIndex],be)}).scale(ze)),r.font(Pe.selectAll("text"),Ae.model.tickFont)}),Pe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Pe.selectAll("text").style("cursor","default");var ge=Me.selectAll("."+x.cn.axisHeading).data(u,l);ge.enter().append("g").classed(x.cn.axisHeading,!0);var oe=ge.selectAll("."+x.cn.axisTitle).data(u,l);oe.enter().append("text").classed(x.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",te?"none":"auto"),oe.text(function(Ae){return Ae.label}).each(function(Ae){var Oe=M.select(this);r.font(Oe,Ae.model.labelFont),i.convertToTspans(Oe,W)}).attr("transform",function(Ae){var Oe=D(Ae.model.labelAngle,Ae.model.labelSide),ze=x.axisTitleOffset;return(Oe.dir>0?"":t(0,2*ze+Ae.model.height))+s(Oe.degrees)+t(-ze*Oe.dx,-ze*Oe.dy)}).attr("text-anchor",function(Ae){var Oe=D(Ae.model.labelAngle,Ae.model.labelSide);return 2*Math.abs(Oe.dx)>Math.abs(Oe.dy)?Oe.dir*Oe.dx<0?"start":"end":"middle"});var ie=Me.selectAll("."+x.cn.axisExtent).data(u,l);ie.enter().append("g").classed(x.cn.axisExtent,!0);var de=ie.selectAll("."+x.cn.axisExtentTop).data(u,l);de.enter().append("g").classed(x.cn.axisExtentTop,!0),de.attr("transform",t(0,-x.axisExtentOffset));var Se=de.selectAll("."+x.cn.axisExtentTopText).data(u,l);Se.enter().append("text").classed(x.cn.axisExtentTopText,!0).call(P),Se.text(function(Ae){return N(Ae,!0)}).each(function(Ae){r.font(M.select(this),Ae.model.rangeFont)});var _e=ie.selectAll("."+x.cn.axisExtentBottom).data(u,l);_e.enter().append("g").classed(x.cn.axisExtentBottom,!0),_e.attr("transform",function(Ae){return t(0,Ae.model.height+x.axisExtentOffset)});var we=_e.selectAll("."+x.cn.axisExtentBottomText).data(u,l);we.enter().append("text").classed(x.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(P),we.text(function(Ae){return N(Ae,!1)}).each(function(Ae){r.font(M.select(this),Ae.model.rangeFont)}),d.ensureAxisBrush(Me,Y,W)}},24196:function(ee,R,e){var M=e(36336),k=e(5048),o=e(95724).isVisible,T={};function _(p,s,t){var i=s.indexOf(t),r=p.indexOf(i);return r===-1&&(r+=s.length),r}(ee.exports=function(p,s){var t=p._fullLayout;if(k(p,[],T)){var i={},r={},n={},a={},l=t._size;s.forEach(function(u,h){var c=u[0].trace;n[h]=c.index;var x=a[h]=c._fullInput.index;i[h]=p.data[x].dimensions,r[h]=p.data[x].dimensions.slice()}),M(p,s,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(u,h,c){var x=r[u][h],d=c.map(function(f){return f.slice()}),v="dimensions["+h+"].constraintrange",g=t._tracePreGUI[p._fullData[n[u]]._fullInput.uid];if(g[v]===void 0){var y=x.constraintrange;g[v]=y||null}var m=p._fullData[n[u]].dimensions[h];d.length?(d.length===1&&(d=d[0]),x.constraintrange=d,m.constraintrange=d.slice(),d=[d]):(delete x.constraintrange,delete m.constraintrange,d=null);var b={};b[v]=d,p.emit("plotly_restyle",[b,[a[u]]])},hover:function(u){p.emit("plotly_hover",u)},unhover:function(u){p.emit("plotly_unhover",u)},axesMoved:function(u,h){var c=function(x,d){return function(v,g){return _(x,d,v)-_(x,d,g)}}(h,r[u].filter(o));i[u].sort(c),r[u].filter(function(x){return!o(x)}).sort(function(x){return r[u].indexOf(x)}).forEach(function(x){i[u].splice(i[u].indexOf(x),1),i[u].splice(r[u].indexOf(x),0,x)}),p.emit("plotly_restyle",[{dimensions:[i[u]]},[a[u]]])}})}}).reglPrecompiled=T},74996:function(ee,R,e){var M=e(45464),k=e(86968).u,o=e(25376),T=e(22548),_=e(21776).Ks,p=e(21776).Gw,s=e(92880).extendFlat,t=e(98192).c,i=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});ee.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_({},{keys:["label","color","value","percent","text"]}),texttemplate:p({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},i,{}),outsidetextfont:s({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(ee,R,e){var M=e(7316);R.name="pie",R.plot=function(k,o,T,_){M.plotBasePlot(R.name,k,o,T,_)},R.clean=function(k,o,T,_){M.cleanBasePlot(R.name,k,o,T,_)}},45768:function(ee,R,e){var M=e(38248),k=e(49760),o=e(76308),T={};function _(s){return function(t,i){return!!t&&!!(t=k(t)).isValid()&&(t=o.addOpacity(t,t.getAlpha()),s[i]||(s[i]=t),t)}}function p(s,t){var i,r=JSON.stringify(s),n=t[r];if(!n){for(n=s.slice(),i=0;i<s.length;i++)n.push(k(s[i]).lighten(20).toHexString());for(i=0;i<s.length;i++)n.push(k(s[i]).darken(20).toHexString());t[r]=n}return n}ee.exports={calc:function(s,t){var i,r,n=[],a=s._fullLayout,l=a.hiddenlabels||[],u=t.labels,h=t.marker.colors||[],c=t.values,x=t._length,d=t._hasValues&&x;if(t.dlabel)for(u=new Array(x),i=0;i<x;i++)u[i]=String(t.label0+i*t.dlabel);var v={},g=_(a["_"+t.type+"colormap"]),y=0,m=!1;for(i=0;i<x;i++){var b,f,S;if(d){if(b=c[i],!M(b))continue;b=+b}else b=1;(f=u[i])!==void 0&&f!==""||(f=i);var w=v[f=String(f)];w===void 0?(v[f]=n.length,(S=l.indexOf(f)!==-1)||(y+=b),n.push({v:b,label:f,color:g(h[i],f),i,pts:[i],hidden:S})):(m=!0,(r=n[w]).v+=b,r.pts.push(i),r.hidden||(y+=b),r.color===!1&&h[i]&&(r.color=g(h[i],f)))}return n=n.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?m:t.sort)&&n.sort(function(E,O){return O.v-E.v}),n[0]&&(n[0].vTotal=y),n},crossTraceCalc:function(s,t){var i=(t||{}).type;i||(i="pie");var r=s._fullLayout,n=s.calcdata,a=r[i+"colorway"],l=r["_"+i+"colormap"];r["extend"+i+"colors"]&&(a=p(a,T));for(var u=0,h=0;h<n.length;h++){var c=n[h];if(c[0].trace.type===i)for(var x=0;x<c.length;x++){var d=c[x];d.color===!1&&(l[d.label]?d.color=l[d.label]:(l[d.label]=d.color=a[u%a.length],u++))}}},makePullColorFn:_,generateExtendedColors:p}},74174:function(ee,R,e){var M=e(38248),k=e(3400),o=e(74996),T=e(86968).Q,_=e(31508).handleText,p=e(3400).coercePattern;function s(i,r){var n=k.isArrayOrTypedArray(i),a=k.isArrayOrTypedArray(r),l=Math.min(n?i.length:1/0,a?r.length:1/0);if(isFinite(l)||(l=0),l&&a){for(var u,h=0;h<l;h++){var c=r[h];if(M(c)&&c>0){u=!0;break}}u||(l=0)}return{hasLabels:n,hasValues:a,len:l}}function t(i,r,n,a,l){a("marker.line.width")&&a("marker.line.color",l?void 0:n.paper_bgcolor);var u=a("marker.colors");p(a,"marker.pattern",u),i.marker&&!r.marker.pattern.fgcolor&&(r.marker.pattern.fgcolor=i.marker.colors),r.marker.pattern.bgcolor||(r.marker.pattern.bgcolor=n.paper_bgcolor)}ee.exports={handleLabelsAndValues:s,handleMarkerDefaults:t,supplyDefaults:function(i,r,n,a){function l(m,b){return k.coerce(i,r,o,m,b)}var u=s(l("labels"),l("values")),h=u.len;if(r._hasLabels=u.hasLabels,r._hasValues=u.hasValues,!r._hasLabels&&r._hasValues&&(l("label0"),l("dlabel")),h){r._length=h,t(i,r,a,l,!0),l("scalegroup");var c,x=l("text"),d=l("texttemplate");if(d||(c=l("textinfo",k.isArrayOrTypedArray(x)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),d||c&&c!=="none"){var v=l("textposition");_(i,r,a,l,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(v)||v==="auto"||v==="outside")&&l("automargin"),(v==="inside"||v==="auto"||Array.isArray(v))&&l("insidetextorientation")}else c==="none"&&l("textposition","none");T(r,a,l);var g=l("hole");if(l("title.text")){var y=l("title.position",g?"middle center":"top center");g||y!=="middle center"||(r.title.position="top center"),k.coerceFont(l,"title.font",a.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else r.visible=!1}}},53644:function(ee,R,e){var M=e(10624).appendArrayMultiPointValues;ee.exports=function(k,o){var T={curveNumber:o.index,pointNumbers:k.pts,data:o._input,fullData:o,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),M(T,o,k.pts),o.type==="funnelarea"&&(delete T.v,delete T.i),T}},21552:function(ee,R,e){var M=e(43616),k=e(76308);ee.exports=function(o,T,_,p){var s=_.marker.pattern;s&&s.shape?M.pointStyle(o,_,p,T):k.fill(o,T.color)}},69656:function(ee,R,e){var M=e(3400);function k(o){return o.indexOf("e")!==-1?o.replace(/[.]?0+e/,"e"):o.indexOf(".")!==-1?o.replace(/[.]?0+$/,""):o}R.formatPiePercent=function(o,T){var _=k((100*o).toPrecision(3));return M.numSeparate(_,T)+"%"},R.formatPieValue=function(o,T){var _=k(o.toPrecision(10));return M.numSeparate(_,T)},R.getFirstFilled=function(o,T){if(M.isArrayOrTypedArray(o))for(var _=0;_<T.length;_++){var p=o[T[_]];if(p||p===0||p==="")return p}},R.castOption=function(o,T){return M.isArrayOrTypedArray(o)?R.getFirstFilled(o,T):o||void 0},R.getRotationAngle=function(o){return(o==="auto"?0:o)*Math.PI/180}},75792:function(ee,R,e){ee.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(ee){ee.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(ee,R,e){var M=e(3400),k=e(85204);ee.exports=function(o,T){function _(p,s){return M.coerce(o,T,k,p,s)}_("hiddenlabels"),_("piecolorway",T.colorway),_("extendpiecolors")}},37820:function(ee,R,e){var M=e(33428),k=e(7316),o=e(93024),T=e(76308),_=e(43616),p=e(3400),s=p.strScale,t=p.strTranslate,i=e(72736),r=e(82744),n=r.recordMinTextSize,a=r.clearMinTextSize,l=e(78048).TEXTPAD,u=e(69656),h=e(53644),c=e(3400).isValidTextValue;function x(W,F,j){var H=j[0],te=H.cx,Q=H.cy,$=H.trace,K=$.type==="funnelarea";"_hasHoverLabel"in $||($._hasHoverLabel=!1),"_hasHoverEvent"in $||($._hasHoverEvent=!1),W.on("mouseover",function(X){var Y=F._fullLayout,re=F._fullData[$.index];if(!F._dragging&&Y.hovermode!==!1){var se=re.hoverinfo;if(Array.isArray(se)&&(se=o.castHoverinfo({hoverinfo:[u.castOption(se,X.pts)],_module:$._module},Y,0)),se==="all"&&(se="label+text+value+percent+name"),re.hovertemplate||se!=="none"&&se!=="skip"&&se){var ae=X.rInscribed||0,ce=te+X.pxmid[0]*(1-ae),fe=Q+X.pxmid[1]*(1-ae),he=Y.separators,ve=[];if(se&&se.indexOf("label")!==-1&&ve.push(X.label),X.text=u.castOption(re.hovertext||re.text,X.pts),se&&se.indexOf("text")!==-1){var ye=X.text;p.isValidTextValue(ye)&&ve.push(ye)}X.value=X.v,X.valueLabel=u.formatPieValue(X.v,he),se&&se.indexOf("value")!==-1&&ve.push(X.valueLabel),X.percent=X.v/H.vTotal,X.percentLabel=u.formatPiePercent(X.percent,he),se&&se.indexOf("percent")!==-1&&ve.push(X.percentLabel);var me=re.hoverlabel,Me=me.font,Pe=[];o.loneHover({trace:$,x0:ce-ae*H.r,x1:ce+ae*H.r,y:fe,_x0:K?te+X.TL[0]:ce-ae*H.r,_x1:K?te+X.TR[0]:ce+ae*H.r,_y0:K?Q+X.TL[1]:fe-ae*H.r,_y1:K?Q+X.BL[1]:fe+ae*H.r,text:ve.join("<br>"),name:re.hovertemplate||se.indexOf("name")!==-1?re.name:void 0,idealAlign:X.pxmid[0]<0?"left":"right",color:u.castOption(me.bgcolor,X.pts)||X.color,borderColor:u.castOption(me.bordercolor,X.pts),fontFamily:u.castOption(Me.family,X.pts),fontSize:u.castOption(Me.size,X.pts),fontColor:u.castOption(Me.color,X.pts),nameLength:u.castOption(me.namelength,X.pts),textAlign:u.castOption(me.align,X.pts),hovertemplate:u.castOption(re.hovertemplate,X.pts),hovertemplateLabels:X,eventData:[h(X,re)]},{container:Y._hoverlayer.node(),outerContainer:Y._paper.node(),gd:F,inOut_bbox:Pe}),X.bbox=Pe[0],$._hasHoverLabel=!0}$._hasHoverEvent=!0,F.emit("plotly_hover",{points:[h(X,re)],event:M.event})}}),W.on("mouseout",function(X){var Y=F._fullLayout,re=F._fullData[$.index],se=M.select(this).datum();$._hasHoverEvent&&(X.originalEvent=M.event,F.emit("plotly_unhover",{points:[h(se,re)],event:M.event}),$._hasHoverEvent=!1),$._hasHoverLabel&&(o.loneUnhover(Y._hoverlayer.node()),$._hasHoverLabel=!1)}),W.on("click",function(X){var Y=F._fullLayout,re=F._fullData[$.index];F._dragging||Y.hovermode===!1||(F._hoverdata=[h(X,re)],o.click(F,M.event))})}function d(W,F,j){var H=u.castOption(W.insidetextfont.color,F.pts);!H&&W._input.textfont&&(H=u.castOption(W._input.textfont.color,F.pts));var te=u.castOption(W.insidetextfont.family,F.pts)||u.castOption(W.textfont.family,F.pts)||j.family,Q=u.castOption(W.insidetextfont.size,F.pts)||u.castOption(W.textfont.size,F.pts)||j.size,$=u.castOption(W.insidetextfont.weight,F.pts)||u.castOption(W.textfont.weight,F.pts)||j.weight,K=u.castOption(W.insidetextfont.style,F.pts)||u.castOption(W.textfont.style,F.pts)||j.style,X=u.castOption(W.insidetextfont.variant,F.pts)||u.castOption(W.textfont.variant,F.pts)||j.variant,Y=u.castOption(W.insidetextfont.textcase,F.pts)||u.castOption(W.textfont.textcase,F.pts)||j.textcase,re=u.castOption(W.insidetextfont.lineposition,F.pts)||u.castOption(W.textfont.lineposition,F.pts)||j.lineposition,se=u.castOption(W.insidetextfont.shadow,F.pts)||u.castOption(W.textfont.shadow,F.pts)||j.shadow;return{color:H||T.contrast(F.color),family:te,size:Q,weight:$,style:K,variant:X,textcase:Y,lineposition:re,shadow:se}}function v(W,F){for(var j,H,te=0;te<W.length;te++)if((H=(j=W[te][0]).trace).title.text){var Q=H.title.text;H._meta&&(Q=p.templateString(Q,H._meta));var $=_.tester.append("text").attr("data-notex",1).text(Q).call(_.font,H.title.font).call(i.convertToTspans,F),K=_.bBox($.node(),!0);j.titleBox={width:K.width,height:K.height},$.remove()}}function g(W,F,j){var H=j.r||F.rpx1,te=F.rInscribed;if(F.startangle===F.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var Q,$=F.ring,K=$===1&&Math.abs(F.startangle-F.stopangle)===2*Math.PI,X=F.halfangle,Y=F.midangle,re=j.trace.insidetextorientation,se=re==="horizontal",ae=re==="tangential",ce=re==="radial",fe=re==="auto",he=[];if(!fe){var ve,ye=function(ie,de){if(function(Ae,Oe){var ze=Ae.startangle,pe=Ae.stopangle;return ze>Oe&&Oe>pe||ze<Oe&&Oe<pe}(F,ie)){var Se=Math.abs(ie-F.startangle),_e=Math.abs(ie-F.stopangle),we=Se<_e?Se:_e;(Q=de==="tan"?m(W,H,$,we,0):y(W,H,$,we,Math.PI/2)).textPosAngle=ie,he.push(Q)}};if(se||ae){for(ve=4;ve>=-4;ve-=2)ye(Math.PI*ve,"tan");for(ve=4;ve>=-4;ve-=2)ye(Math.PI*(ve+1),"tan")}if(se||ce){for(ve=4;ve>=-4;ve-=2)ye(Math.PI*(ve+1.5),"rad");for(ve=4;ve>=-4;ve-=2)ye(Math.PI*(ve+.5),"rad")}}if(K||fe||se){var me=Math.sqrt(W.width*W.width+W.height*W.height);if((Q={scale:te*H*2/me,rCenter:1-te,rotate:0}).textPosAngle=(F.startangle+F.stopangle)/2,Q.scale>=1)return Q;he.push(Q)}(fe||ce)&&((Q=y(W,H,$,X,Y)).textPosAngle=(F.startangle+F.stopangle)/2,he.push(Q)),(fe||ae)&&((Q=m(W,H,$,X,Y)).textPosAngle=(F.startangle+F.stopangle)/2,he.push(Q));for(var Me=0,Pe=0,ge=0;ge<he.length;ge++){var oe=he[ge].scale;if(Pe<oe&&(Pe=oe,Me=ge),!fe&&Pe>=1)break}return he[Me]}function y(W,F,j,H,te){F=Math.max(0,F-2*l);var Q=W.width/W.height,$=S(Q,H,F,j);return{scale:2*$/W.height,rCenter:b(Q,$/F),rotate:f(te)}}function m(W,F,j,H,te){F=Math.max(0,F-2*l);var Q=W.height/W.width,$=S(Q,H,F,j);return{scale:2*$/W.width,rCenter:b(Q,$/F),rotate:f(te+Math.PI/2)}}function b(W,F){return Math.cos(F)-W*F}function f(W){return(180/Math.PI*W+720)%180-90}function S(W,F,j,H){var te=W+1/(2*Math.tan(F));return j*Math.min(1/(Math.sqrt(te*te+.5)+te),H/(Math.sqrt(W*W+H/2)+W))}function w(W,F){return W.v!==F.vTotal||F.trace.hole?Math.min(1/(1+1/Math.sin(W.halfangle)),W.ring/2):1}function E(W,F){var j=F.pxmid[0],H=F.pxmid[1],te=W.width/2,Q=W.height/2;return j<0&&(te*=-1),H<0&&(Q*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(Q)*(te>0?1:-1)/2,y:Q/(1+j*j/(H*H)),outside:!0}}function O(W,F){var j,H,te,Q=W.trace,$={x:W.cx,y:W.cy},K={tx:0,ty:0};K.ty+=Q.title.font.size,te=P(Q),Q.title.position.indexOf("top")!==-1?($.y-=(1+te)*W.r,K.ty-=W.titleBox.height):Q.title.position.indexOf("bottom")!==-1&&($.y+=(1+te)*W.r);var X,Y=W.r/((X=W.trace.aspectratio)===void 0?1:X),re=F.w*(Q.domain.x[1]-Q.domain.x[0])/2;return Q.title.position.indexOf("left")!==-1?(re+=Y,$.x-=(1+te)*Y,K.tx+=W.titleBox.width/2):Q.title.position.indexOf("center")!==-1?re*=2:Q.title.position.indexOf("right")!==-1&&(re+=Y,$.x+=(1+te)*Y,K.tx-=W.titleBox.width/2),j=re/W.titleBox.width,H=C(W,F)/W.titleBox.height,{x:$.x,y:$.y,scale:Math.min(j,H),tx:K.tx,ty:K.ty}}function C(W,F){var j=W.trace,H=F.h*(j.domain.y[1]-j.domain.y[0]);return Math.min(W.titleBox.height,H/2)}function P(W){var F,j=W.pull;if(!j)return 0;if(p.isArrayOrTypedArray(j))for(j=0,F=0;F<W.pull.length;F++)W.pull[F]>j&&(j=W.pull[F]);return j}function D(W,F){for(var j=[],H=0;H<W.length;H++){var te=W[H][0],Q=te.trace,$=Q.domain,K=F.w*($.x[1]-$.x[0]),X=F.h*($.y[1]-$.y[0]);Q.title.text&&Q.title.position!=="middle center"&&(X-=C(te,F));var Y=K/2,re=X/2;Q.type!=="funnelarea"||Q.scalegroup||(re/=Q.aspectratio),te.r=Math.min(Y,re)/(1+P(Q)),te.cx=F.l+F.w*(Q.domain.x[1]+Q.domain.x[0])/2,te.cy=F.t+F.h*(1-Q.domain.y[0])-X/2,Q.title.text&&Q.title.position.indexOf("bottom")!==-1&&(te.cy-=C(te,F)),Q.scalegroup&&j.indexOf(Q.scalegroup)===-1&&j.push(Q.scalegroup)}(function(se,ae){for(var ce,fe,he,ve=0;ve<ae.length;ve++){var ye=1/0,me=ae[ve];for(fe=0;fe<se.length;fe++)if((he=(ce=se[fe][0]).trace).scalegroup===me){var Me;if(he.type==="pie")Me=ce.r*ce.r;else if(he.type==="funnelarea"){var Pe,ge;he.aspectratio>1?ge=(Pe=ce.r)/he.aspectratio:Pe=(ge=ce.r)*he.aspectratio,Me=(Pe*=(1+he.baseratio)/2)*ge}ye=Math.min(ye,Me/ce.vTotal)}for(fe=0;fe<se.length;fe++)if((he=(ce=se[fe][0]).trace).scalegroup===me){var oe=ye*ce.vTotal;he.type==="funnelarea"&&(oe/=(1+he.baseratio)/2,oe/=he.aspectratio),ce.r=Math.sqrt(oe)}}})(W,j)}function U(W,F){return[W*Math.sin(F),-W*Math.cos(F)]}function I(W,F,j){var H=W._fullLayout,te=j.trace,Q=te.texttemplate,$=te.textinfo;if(!Q&&$&&$!=="none"){var K,X=$.split("+"),Y=function(Me){return X.indexOf(Me)!==-1},re=Y("label"),se=Y("text"),ae=Y("value"),ce=Y("percent"),fe=H.separators;if(K=re?[F.label]:[],se){var he=u.getFirstFilled(te.text,F.pts);c(he)&&K.push(he)}ae&&K.push(u.formatPieValue(F.v,fe)),ce&&K.push(u.formatPiePercent(F.v/j.vTotal,fe)),F.text=K.join("<br>")}if(Q){var ve=p.castOption(te,F.i,"texttemplate");if(ve){var ye=function(Me){return{label:Me.label,value:Me.v,valueLabel:u.formatPieValue(Me.v,H.separators),percent:Me.v/j.vTotal,percentLabel:u.formatPiePercent(Me.v/j.vTotal,H.separators),color:Me.color,text:Me.text,customdata:p.castOption(te,Me.i,"customdata")}}(F),me=u.getFirstFilled(te.text,F.pts);(c(me)||me==="")&&(ye.text=me),F.text=p.texttemplateString(ve,ye,W._fullLayout._d3locale,ye,te._meta||{})}else F.text=""}}function N(W,F){var j=W.rotate*Math.PI/180,H=Math.cos(j),te=Math.sin(j),Q=(F.left+F.right)/2,$=(F.top+F.bottom)/2;W.textX=Q*H-$*te,W.textY=Q*te+$*H,W.noCenter=!0}ee.exports={plot:function(W,F){var j=W._context.staticPlot,H=W._fullLayout,te=H._size;a("pie",H),v(F,W),D(F,te);var Q=p.makeTraceGroups(H._pielayer,F,"trace").each(function($){var K=M.select(this),X=$[0],Y=X.trace;(function(re){var se,ae,ce,fe=re[0],he=fe.r,ve=fe.trace,ye=u.getRotationAngle(ve.rotation),me=2*Math.PI/fe.vTotal,Me="px0",Pe="px1";if(ve.direction==="counterclockwise"){for(se=0;se<re.length&&re[se].hidden;se++);if(se===re.length)return;ye+=me*re[se].v,me*=-1,Me="px1",Pe="px0"}for(ce=U(he,ye),se=0;se<re.length;se++)(ae=re[se]).hidden||(ae[Me]=ce,ae.startangle=ye,ye+=me*ae.v/2,ae.pxmid=U(he,ye),ae.midangle=ye,ce=U(he,ye+=me*ae.v/2),ae.stopangle=ye,ae[Pe]=ce,ae.largeArc=ae.v>fe.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/fe.vTotal,.5),ae.ring=1-ve.hole,ae.rInscribed=w(ae,fe))})($),K.attr("stroke-linejoin","round"),K.each(function(){var re=M.select(this).selectAll("g.slice").data($);re.enter().append("g").classed("slice",!0),re.exit().remove();var se=[[[],[]],[[],[]]],ae=!1;re.each(function(Pe,ge){if(Pe.hidden)M.select(this).selectAll("path,g").remove();else{Pe.pointNumber=Pe.i,Pe.curveNumber=Y.index,se[Pe.pxmid[1]<0?0:1][Pe.pxmid[0]<0?0:1].push(Pe);var oe=X.cx,ie=X.cy,de=M.select(this),Se=de.selectAll("path.surface").data([Pe]);if(Se.enter().append("path").classed("surface",!0).style({"pointer-events":j?"none":"all"}),de.call(x,W,$),Y.pull){var _e=+u.castOption(Y.pull,Pe.pts)||0;_e>0&&(oe+=_e*Pe.pxmid[0],ie+=_e*Pe.pxmid[1])}Pe.cxFinal=oe,Pe.cyFinal=ie;var we=Y.hole;if(Pe.v===X.vTotal){var Ae="M"+(oe+Pe.px0[0])+","+(ie+Pe.px0[1])+ke(Pe.px0,Pe.pxmid,!0,1)+ke(Pe.pxmid,Pe.px0,!0,1)+"Z";we?Se.attr("d","M"+(oe+we*Pe.px0[0])+","+(ie+we*Pe.px0[1])+ke(Pe.px0,Pe.pxmid,!1,we)+ke(Pe.pxmid,Pe.px0,!1,we)+"Z"+Ae):Se.attr("d",Ae)}else{var Oe=ke(Pe.px0,Pe.px1,!0,1);if(we){var ze=1-we;Se.attr("d","M"+(oe+we*Pe.px1[0])+","+(ie+we*Pe.px1[1])+ke(Pe.px1,Pe.px0,!1,we)+"l"+ze*Pe.px0[0]+","+ze*Pe.px0[1]+Oe+"Z")}else Se.attr("d","M"+oe+","+ie+"l"+Pe.px0[0]+","+Pe.px0[1]+Oe+"Z")}I(W,Pe,X);var pe=u.castOption(Y.textposition,Pe.pts),be=de.selectAll("g.slicetext").data(Pe.text&&pe!=="none"?[0]:[]);be.enter().append("g").classed("slicetext",!0),be.exit().remove(),be.each(function(){var Ie=p.ensureSingle(M.select(this),"text","",function(vt){vt.attr("data-notex",1)}),Ee=p.ensureUniformFontSize(W,pe==="outside"?function(vt,ht,Qe){return{color:u.castOption(vt.outsidetextfont.color,ht.pts)||u.castOption(vt.textfont.color,ht.pts)||Qe.color,family:u.castOption(vt.outsidetextfont.family,ht.pts)||u.castOption(vt.textfont.family,ht.pts)||Qe.family,size:u.castOption(vt.outsidetextfont.size,ht.pts)||u.castOption(vt.textfont.size,ht.pts)||Qe.size,weight:u.castOption(vt.outsidetextfont.weight,ht.pts)||u.castOption(vt.textfont.weight,ht.pts)||Qe.weight,style:u.castOption(vt.outsidetextfont.style,ht.pts)||u.castOption(vt.textfont.style,ht.pts)||Qe.style,variant:u.castOption(vt.outsidetextfont.variant,ht.pts)||u.castOption(vt.textfont.variant,ht.pts)||Qe.variant,textcase:u.castOption(vt.outsidetextfont.textcase,ht.pts)||u.castOption(vt.textfont.textcase,ht.pts)||Qe.textcase,lineposition:u.castOption(vt.outsidetextfont.lineposition,ht.pts)||u.castOption(vt.textfont.lineposition,ht.pts)||Qe.lineposition,shadow:u.castOption(vt.outsidetextfont.shadow,ht.pts)||u.castOption(vt.textfont.shadow,ht.pts)||Qe.shadow}}(Y,Pe,H.font):d(Y,Pe,H.font));Ie.text(Pe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(_.font,Ee).call(i.convertToTspans,W);var Be,Ve=_.bBox(Ie.node());if(pe==="outside")Be=E(Ve,Pe);else if(Be=g(Ve,Pe,X),pe==="auto"&&Be.scale<1){var Ze=p.ensureUniformFontSize(W,Y.outsidetextfont);Ie.call(_.font,Ze),Be=E(Ve=_.bBox(Ie.node()),Pe)}var rt=Be.textPosAngle,it=rt===void 0?Pe.pxmid:U(X.r,rt);if(Be.targetX=oe+it[0]*Be.rCenter+(Be.x||0),Be.targetY=ie+it[1]*Be.rCenter+(Be.y||0),N(Be,Ve),Be.outside){var dt=Be.targetY;Pe.yLabelMin=dt-Ve.height/2,Pe.yLabelMid=dt,Pe.yLabelMax=dt+Ve.height/2,Pe.labelExtraX=0,Pe.labelExtraY=0,ae=!0}Be.fontSize=Ee.size,n(Y.type,Be,H),$[ge].transform=Be,p.setTransormAndDisplay(Ie,Be)})}function ke(Ie,Ee,Be,Ve){var Ze=Ve*(Ee[0]-Ie[0]),rt=Ve*(Ee[1]-Ie[1]);return"a"+Ve*X.r+","+Ve*X.r+" 0 "+Pe.largeArc+(Be?" 1 ":" 0 ")+Ze+","+rt}});var ce=M.select(this).selectAll("g.titletext").data(Y.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var Pe,ge=p.ensureSingle(M.select(this),"text","",function(ie){ie.attr("data-notex",1)}),oe=Y.title.text;Y._meta&&(oe=p.templateString(oe,Y._meta)),ge.text(oe).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(_.font,Y.title.font).call(i.convertToTspans,W),Pe=Y.title.position==="middle center"?function(ie){var de=Math.sqrt(ie.titleBox.width*ie.titleBox.width+ie.titleBox.height*ie.titleBox.height);return{x:ie.cx,y:ie.cy,scale:ie.trace.hole*ie.r*2/de,tx:0,ty:-ie.titleBox.height/2+ie.trace.title.font.size}}(X):O(X,te),ge.attr("transform",t(Pe.x,Pe.y)+s(Math.min(1,Pe.scale))+t(Pe.tx,Pe.ty))}),ae&&function(Pe,ge){var oe,ie,de,Se,_e,we,Ae,Oe,ze,pe,be,ke,Ie;function Ee(rt,it){return rt.pxmid[1]-it.pxmid[1]}function Be(rt,it){return it.pxmid[1]-rt.pxmid[1]}function Ve(rt,it){it||(it={});var dt,vt,ht,Qe,Je=it.labelExtraY+(ie?it.yLabelMax:it.yLabelMin),Tt=ie?rt.yLabelMin:rt.yLabelMax,Ot=ie?rt.yLabelMax:rt.yLabelMin,Pt=rt.cyFinal+_e(rt.px0[1],rt.px1[1]),Mt=Je-Tt;if(Mt*Ae>0&&(rt.labelExtraY=Mt),p.isArrayOrTypedArray(ge.pull))for(vt=0;vt<pe.length;vt++)(ht=pe[vt])===rt||(u.castOption(ge.pull,rt.pts)||0)>=(u.castOption(ge.pull,ht.pts)||0)||((rt.pxmid[1]-ht.pxmid[1])*Ae>0?(Mt=ht.cyFinal+_e(ht.px0[1],ht.px1[1])-Tt-rt.labelExtraY)*Ae>0&&(rt.labelExtraY+=Mt):(Ot+rt.labelExtraY-Pt)*Ae>0&&(dt=3*we*Math.abs(vt-pe.indexOf(rt)),(Qe=ht.cxFinal+Se(ht.px0[0],ht.px1[0])+dt-(rt.cxFinal+rt.pxmid[0])-rt.labelExtraX)*we>0&&(rt.labelExtraX+=Qe)))}for(ie=0;ie<2;ie++)for(de=ie?Ee:Be,_e=ie?Math.max:Math.min,Ae=ie?1:-1,oe=0;oe<2;oe++){for(Se=oe?Math.max:Math.min,we=oe?1:-1,(Oe=Pe[ie][oe]).sort(de),ze=Pe[1-ie][oe],pe=ze.concat(Oe),ke=[],be=0;be<Oe.length;be++)Oe[be].yLabelMid!==void 0&&ke.push(Oe[be]);for(Ie=!1,be=0;ie&&be<ze.length;be++)if(ze[be].yLabelMid!==void 0){Ie=ze[be];break}for(be=0;be<ke.length;be++){var Ze=be&&ke[be-1];Ie&&!be&&(Ze=Ie),Ve(ke[be],Ze)}}}(se,Y),function(Pe,ge){Pe.each(function(oe){var ie=M.select(this);if(oe.labelExtraX||oe.labelExtraY){var de=ie.select("g.slicetext text");oe.transform.targetX+=oe.labelExtraX,oe.transform.targetY+=oe.labelExtraY,p.setTransormAndDisplay(de,oe.transform);var Se=oe.cxFinal+oe.pxmid[0],_e="M"+Se+","+(oe.cyFinal+oe.pxmid[1]),we=(oe.yLabelMax-oe.yLabelMin)*(oe.pxmid[0]<0?-1:1)/4;if(oe.labelExtraX){var Ae=oe.labelExtraX*oe.pxmid[1]/oe.pxmid[0],Oe=oe.yLabelMid+oe.labelExtraY-(oe.cyFinal+oe.pxmid[1]);Math.abs(Ae)>Math.abs(Oe)?_e+="l"+Oe*oe.pxmid[0]/oe.pxmid[1]+","+Oe+"H"+(Se+oe.labelExtraX+we):_e+="l"+oe.labelExtraX+","+Ae+"v"+(Oe-Ae)+"h"+we}else _e+="V"+(oe.yLabelMid+oe.labelExtraY)+"h"+we;p.ensureSingle(ie,"path","textline").call(T.stroke,ge.outsidetextfont.color).attr({"stroke-width":Math.min(2,ge.outsidetextfont.size/8),d:_e,fill:"none"})}else ie.select("path.textline").remove()})}(re,Y),ae&&Y.automargin){var fe=_.bBox(K.node()),he=Y.domain,ve=te.w*(he.x[1]-he.x[0]),ye=te.h*(he.y[1]-he.y[0]),me=(.5*ve-X.r)/te.w,Me=(.5*ye-X.r)/te.h;k.autoMargin(W,"pie."+Y.uid+".automargin",{xl:he.x[0]-me,xr:he.x[1]+me,yb:he.y[0]-Me,yt:he.y[1]+Me,l:Math.max(X.cx-X.r-fe.left,0),r:Math.max(fe.right-(X.cx+X.r),0),b:Math.max(fe.bottom-(X.cy+X.r),0),t:Math.max(X.cy-X.r-fe.top,0),pad:5})}})});setTimeout(function(){Q.selectAll("tspan").each(function(){var $=M.select(this);$.attr("dy")&&$.attr("dy",$.attr("dy"))})},0)},formatSliceLabel:I,transformInsideText:g,determineInsideTextFont:d,positionTitleOutside:O,prerenderTitles:v,layoutAreas:D,attachFxHandlers:x,computeTransform:N}},22152:function(ee,R,e){var M=e(33428),k=e(10528),o=e(82744).resizeText;ee.exports=function(T){var _=T._fullLayout._pielayer.selectAll(".trace");o(T,_,"pie"),_.each(function(p){var s=p[0].trace,t=M.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,s,T)})})}},10528:function(ee,R,e){var M=e(76308),k=e(69656).castOption,o=e(21552);ee.exports=function(T,_,p,s){var t=p.marker.line,i=k(t.color,_.pts)||M.defaultLine,r=k(t.width,_.pts)||0;T.call(o,_,p,s).style("stroke-width",r).call(M.stroke,i)}},35484:function(ee,R,e){var M=e(52904);ee.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(ee,R,e){var M=e(67792).gl_pointcloud2d,k=e(3400).isArrayOrTypedArray,o=e(43080),T=e(19280).findExtremes,_=e(44928);function p(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=p.prototype;s.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:k(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},s.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=_(t,{})},s.updateFast=function(t){var i,r,n,a,l,u,h=this.xData=this.pickXData=t.x,c=this.yData=this.pickYData=t.y,x=this.pickXYData=t.xy,d=t.xbounds&&t.ybounds,v=t.indices,g=this.bounds;if(x){if(n=x,i=x.length>>>1,d)g[0]=t.xbounds[0],g[2]=t.xbounds[1],g[1]=t.ybounds[0],g[3]=t.ybounds[1];else for(u=0;u<i;u++)a=n[2*u],l=n[2*u+1],a<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),l<g[1]&&(g[1]=l),l>g[3]&&(g[3]=l);if(v)r=v;else for(r=new Int32Array(i),u=0;u<i;u++)r[u]=u}else for(i=h.length,n=new Float32Array(2*i),r=new Int32Array(i),u=0;u<i;u++)a=h[u],l=c[u],r[u]=u,n[2*u]=a,n[2*u+1]=l,a<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),l<g[1]&&(g[1]=l),l>g[3]&&(g[3]=l);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=n;var y=o(t.marker.color),m=o(t.marker.border.color),b=t.opacity*t.marker.opacity;y[3]*=b,this.pointcloudOptions.color=y;var f=t.marker.blend;f===null&&(f=h.length<100||c.length<100),this.pointcloudOptions.blend=f,m[3]*=b,this.pointcloudOptions.borderColor=m;var S=t.marker.sizemin,w=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,O=this.scene.yaxis,C=w/2||.5;t._extremes[E._id]=T(E,[g[0],g[2]],{ppad:C}),t._extremes[O._id]=T(O,[g[1],g[3]],{ppad:C})},s.dispose=function(){this.pointcloud.dispose()},ee.exports=function(t,i){var r=new p(t,i.uid);return r.update(i),r}},41904:function(ee,R,e){var M=e(3400),k=e(35484);ee.exports=function(o,T,_){function p(s,t){return M.coerce(o,T,k,s,t)}p("x"),p("y"),p("xbounds"),p("ybounds"),o.xy&&o.xy instanceof Float32Array&&(T.xy=o.xy),o.indices&&o.indices instanceof Int32Array&&(T.indices=o.indices),p("text"),p("marker.color",_),p("marker.opacity"),p("marker.blend"),p("marker.sizemin"),p("marker.sizemax"),p("marker.border.color",_),p("marker.border.arearatio"),T._length=null}},156:function(ee,R,e){ee.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(ee,R,e){var M=e(25376),k=e(45464),o=e(22548),T=e(55756),_=e(86968).u,p=e(21776).Ks,s=e(49084),t=e(31780).templatedArray,i=e(29736).descriptionOnlyNumbers,r=e(92880).extendFlat,n=e(67824).overrideAll;(ee.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:_({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(ee,R,e){var M=e(67824).overrideAll,k=e(84888)._M,o=e(59596),T=e(65460),_=e(93972),p=e(86476),s=e(22676).prepSelect,t=e(3400),i=e(24040),r="sankey";function n(a,l){var u=a._fullData[l],h=a._fullLayout,c=h.dragmode,x=h.dragmode==="pan"?"move":"crosshair",d=u._bgRect;if(d&&c!=="pan"&&c!=="zoom"){_(d,x);var v={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},g={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},y={gd:a,element:d.node(),plotinfo:{id:l,xaxis:v,yaxis:g,fillRangeItems:t.noop},subplot:l,xaxes:[v],yaxes:[g],doneFnCompleted:function(m){var b,f=a._fullData[l],S=f.node.groups.slice(),w=[];function E(D){for(var U=f._sankey.graph.nodes,I=0;I<U.length;I++)if(U[I].pointNumber===D)return U[I]}for(var O=0;O<m.length;O++){var C=E(m[O].pointNumber);if(C)if(C.group){for(var P=0;P<C.childrenNodes.length;P++)w.push(C.childrenNodes[P].pointNumber);S[C.pointNumber-f.node._count]=!1}else w.push(C.pointNumber)}b=S.filter(Boolean).concat([w]),i.call("_guiRestyle",a,{"node.groups":[b]},l)},prepFn:function(m,b,f){s(m,b,f,y,c)}};p.init(y)}}R.name=r,R.baseLayoutAttrOverrides=M({hoverlabel:T.hoverlabel},"plot","nested"),R.plot=function(a){var l=k(a.calcdata,r)[0];o(a,l),R.updateFx(a)},R.clean=function(a,l,u,h){var c=h._has&&h._has(r),x=l._has&&l._has(r);c&&!x&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},R.updateFx=function(a){for(var l=0;l<a._fullData.length;l++)n(a,l)}},48068:function(ee,R,e){var M=e(78484),k=e(3400),o=e(71688).wrap,T=k.isArrayOrTypedArray,_=k.isIndex,p=e(8932);ee.exports=function(s,t){var i=function(r){var n,a=r.node,l=r.link,u=[],h=T(l.color),c=T(l.hovercolor),x=T(l.customdata),d={},v={},g=l.colorscales.length;for(n=0;n<g;n++){var y=l.colorscales[n],m=p.extractScale(y,{cLetter:"c"}),b=p.makeColorScaleFunc(m);v[y.label]=b}var f=0;for(n=0;n<l.value.length;n++)l.source[n]>f&&(f=l.source[n]),l.target[n]>f&&(f=l.target[n]);var S,w=f+1;r.node._count=w;var E=r.node.groups,O={};for(n=0;n<E.length;n++){var C=E[n];for(S=0;S<C.length;S++){var P=C[S],D=w+n;O.hasOwnProperty(P)?k.warn("Node "+P+" is already part of a group."):O[P]=D}}var U={source:[],target:[]};for(n=0;n<l.value.length;n++){var I=l.value[n],N=l.source[n],W=l.target[n];if(I>0&&_(N,w)&&_(W,w)&&(!O.hasOwnProperty(N)||!O.hasOwnProperty(W)||O[N]!==O[W])){O.hasOwnProperty(W)&&(W=O[W]),O.hasOwnProperty(N)&&(N=O[N]),W=+W,d[N=+N]=d[W]=!0;var F="";l.label&&l.label[n]&&(F=l.label[n]);var j=null;F&&v.hasOwnProperty(F)&&(j=v[F]),u.push({pointNumber:n,label:F,color:h?l.color[n]:l.color,hovercolor:c?l.hovercolor[n]:l.hovercolor,customdata:x?l.customdata[n]:l.customdata,concentrationscale:j,source:N,target:W,value:+I}),U.source.push(N),U.target.push(W)}}var H=w+E.length,te=T(a.color),Q=T(a.customdata),$=[];for(n=0;n<H;n++)if(d[n]){var K=a.label[n];$.push({group:n>w-1,childrenNodes:[],pointNumber:n,label:K,color:te?a.color[n]:a.color,customdata:Q?a.customdata[n]:a.customdata})}var X=!1;return function(Y,re,se){for(var ae=k.init2dArray(Y,0),ce=0;ce<Math.min(re.length,se.length);ce++)if(k.isIndex(re[ce],Y)&&k.isIndex(se[ce],Y)){if(re[ce]===se[ce])return!0;ae[re[ce]].push(se[ce])}return M(ae).components.some(function(fe){return fe.length>1})}(H,U.source,U.target)&&(X=!0),{circular:X,links:u,nodes:$,groups:E,groupLookup:O}}(t);return o({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(ee){ee.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(ee,R,e){var M=e(3400),k=e(41440),o=e(76308),T=e(49760),_=e(86968).Q,p=e(16132),s=e(31780),t=e(51272);function i(r,n){function a(l,u){return M.coerce(r,n,k.link.colorscales,l,u)}a("label"),a("cmin"),a("cmax"),a("colorscale")}ee.exports=function(r,n,a,l){function u(E,O){return M.coerce(r,n,k,E,O)}var h=M.extendDeep(l.hoverlabel,r.hoverlabel),c=r.node,x=s.newContainer(n,"node");function d(E,O){return M.coerce(c,x,k.node,E,O)}d("label"),d("groups"),d("x"),d("y"),d("pad"),d("thickness"),d("line.color"),d("line.width"),d("hoverinfo",r.hoverinfo),p(c,x,d,h),d("hovertemplate"),d("align");var v=l.colorway;d("color",x.label.map(function(E,O){return o.addOpacity(function(C){return v[C%v.length]}(O),.8)})),d("customdata");var g=r.link||{},y=s.newContainer(n,"link");function m(E,O){return M.coerce(g,y,k.link,E,O)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",r.hoverinfo),p(g,y,m,h),m("hovertemplate");var b,f=T(l.paper_bgcolor).getLuminance()<.333,S=m("color",f?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function w(E){var O=T(E);if(!O.isValid())return E;var C=O.getAlpha();return C<=.8?O.setAlpha(C+.2):O=f?O.brighten():O.darken(),O.toRgbString()}m("hovercolor",Array.isArray(S)?S.map(w):w(S)),m("customdata"),t(g,y,{name:"colorscales",handleItemDefaults:i}),_(n,l,u),u("orientation"),u("valueformat"),u("valuesuffix"),x.x.length&&x.y.length&&(b="freeform"),u("arrangement",b),M.coerceFont(u,"textfont",l.font,{autoShadowDflt:!0}),n._length=null}},45499:function(ee,R,e){ee.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(ee,R,e){var M=e(33428),k=e(3400),o=k.numberFormat,T=e(83248),_=e(93024),p=e(76308),s=e(11820).cn,t=k._;function i(g){return g!==""}function r(g,y){return g.filter(function(m){return m.key===y.traceId})}function n(g,y){M.select(g).select("path").style("fill-opacity",y),M.select(g).select("rect").style("fill-opacity",y)}function a(g){M.select(g).select("text.name").style("fill","black")}function l(g){return function(y){return g.node.sourceLinks.indexOf(y.link)!==-1||g.node.targetLinks.indexOf(y.link)!==-1}}function u(g){return function(y){return y.node.sourceLinks.indexOf(g.link)!==-1||y.node.targetLinks.indexOf(g.link)!==-1}}function h(g,y,m){y&&m&&r(m,y).selectAll("."+s.sankeyLink).filter(l(y)).call(x.bind(0,y,m,!1))}function c(g,y,m){y&&m&&r(m,y).selectAll("."+s.sankeyLink).filter(l(y)).call(d.bind(0,y,m,!1))}function x(g,y,m,b){b.style("fill",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverHue}).style("fill-opacity",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverAlpha}),b.each(function(f){var S=f.link.label;S!==""&&r(y,g).selectAll("."+s.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverHue}).style("fill-opacity",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverAlpha})}),m&&r(y,g).selectAll("."+s.sankeyNode).filter(u(g)).call(h)}function d(g,y,m,b){b.style("fill",function(f){return f.tinyColorHue}).style("fill-opacity",function(f){return f.tinyColorAlpha}),b.each(function(f){var S=f.link.label;S!==""&&r(y,g).selectAll("."+s.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){return w.tinyColorHue}).style("fill-opacity",function(w){return w.tinyColorAlpha})}),m&&r(y,g).selectAll(s.sankeyNode).filter(u(g)).call(c)}function v(g,y){var m=g.hoverlabel||{},b=k.nestedProperty(m,y).get();return!Array.isArray(b)&&b}ee.exports=function(g,y){for(var m=g._fullLayout,b=m._paper,f=m._size,S=0;S<g._fullData.length;S++)if(g._fullData[S].visible&&g._fullData[S].type===s.sankey&&!g._fullData[S]._viewInitial){var w=g._fullData[S].node;g._fullData[S]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=t(g,"source:")+" ",O=t(g,"target:")+" ",C=t(g,"concentration:")+" ",P=t(g,"incoming flow count:")+" ",D=t(g,"outgoing flow count:")+" ";T(g,b,y,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(U,I,N){g._fullLayout.hovermode!==!1&&(M.select(U).call(x.bind(0,I,N,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,g.emit("plotly_hover",{event:M.event,points:[I.link]})))},follow:function(U,I){if(g._fullLayout.hovermode!==!1){var N=I.link.trace.link;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){for(var W=[],F=0,j=0;j<I.flow.links.length;j++){var H=I.flow.links[j];if(g._fullLayout.hovermode!=="closest"||I.link.pointNumber===H.pointNumber){I.link.pointNumber===H.pointNumber&&(F=j),H.fullData=H.trace,N=I.link.trace.link;var te=$(H),Q={valueLabel:o(I.valueFormat)(H.value)+I.valueSuffix};W.push({x:te[0],y:te[1],name:Q.valueLabel,text:[H.label||"",E+H.source.label,O+H.target.label,H.concentrationscale?C+o("%0.2f")(H.flow.labelConcentration):""].filter(i).join("<br>"),color:v(N,"bgcolor")||p.addOpacity(H.color,1),borderColor:v(N,"bordercolor"),fontFamily:v(N,"font.family"),fontSize:v(N,"font.size"),fontColor:v(N,"font.color"),fontWeight:v(N,"font.weight"),fontStyle:v(N,"font.style"),fontVariant:v(N,"font.variant"),fontTextcase:v(N,"font.textcase"),fontLineposition:v(N,"font.lineposition"),fontShadow:v(N,"font.shadow"),nameLength:v(N,"namelength"),textAlign:v(N,"align"),idealAlign:M.event.x<te[0]?"right":"left",hovertemplate:N.hovertemplate,hovertemplateLabels:Q,eventData:[H]})}}_.loneHover(W,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:g,anchorIndex:F}).each(function(){I.link.concentrationscale||n(this,.65),a(this)})}}function $(K){var X,Y;K.circular?(X=(K.circularPathData.leftInnerExtent+K.circularPathData.rightInnerExtent)/2,Y=K.circularPathData.verticalFullExtent):(X=(K.source.x1+K.target.x0)/2,Y=(K.y0+K.y1)/2);var re=[X,Y];return K.trace.orientation==="v"&&re.reverse(),re[0]+=I.parent.translateX,re[1]+=I.parent.translateY,re}},unhover:function(U,I,N){g._fullLayout.hovermode!==!1&&(M.select(U).call(d.bind(0,I,N,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,g.emit("plotly_unhover",{event:M.event,points:[I.link]})),_.loneUnhover(m._hoverlayer.node()))},select:function(U,I){var N=I.link;N.originalEvent=M.event,g._hoverdata=[N],_.click(g,{target:!0})}},nodeEvents:{hover:function(U,I,N){g._fullLayout.hovermode!==!1&&(M.select(U).call(h,I,N),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,g.emit("plotly_hover",{event:M.event,points:[I.node]})))},follow:function(U,I){if(g._fullLayout.hovermode!==!1){var N=I.node.trace.node;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){var W=M.select(U).select("."+s.nodeRect),F=g._fullLayout._paperdiv.node().getBoundingClientRect(),j=W.node().getBoundingClientRect(),H=j.left-2-F.left,te=j.right+2-F.left,Q=j.top+j.height/4-F.top,$={valueLabel:o(I.valueFormat)(I.node.value)+I.valueSuffix};I.node.fullData=I.node.trace,g._fullLayout._calcInverseTransform(g);var K=g._fullLayout._invScaleX,X=g._fullLayout._invScaleY,Y=_.loneHover({x0:K*H,x1:K*te,y:X*Q,name:o(I.valueFormat)(I.node.value)+I.valueSuffix,text:[I.node.label,P+I.node.targetLinks.length,D+I.node.sourceLinks.length].filter(i).join("<br>"),color:v(N,"bgcolor")||I.tinyColorHue,borderColor:v(N,"bordercolor"),fontFamily:v(N,"font.family"),fontSize:v(N,"font.size"),fontColor:v(N,"font.color"),fontWeight:v(N,"font.weight"),fontStyle:v(N,"font.style"),fontVariant:v(N,"font.variant"),fontTextcase:v(N,"font.textcase"),fontLineposition:v(N,"font.lineposition"),fontShadow:v(N,"font.shadow"),nameLength:v(N,"namelength"),textAlign:v(N,"align"),idealAlign:"left",hovertemplate:N.hovertemplate,hovertemplateLabels:$,eventData:[I.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:g});n(Y,.85),a(Y)}}},unhover:function(U,I,N){g._fullLayout.hovermode!==!1&&(M.select(U).call(c,I,N),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,g.emit("plotly_unhover",{event:M.event,points:[I.node]})),_.loneUnhover(m._hoverlayer.node()))},select:function(U,I,N){var W=I.node;W.originalEvent=M.event,g._hoverdata=[W],M.select(U).call(c,I,N),_.click(g,{target:!0})}}})}},83248:function(ee,R,e){var M=e(49812),k=e(67756).Gz,o=e(33428),T=e(26800),_=e(48932),p=e(11820),s=e(49760),t=e(76308),i=e(43616),r=e(3400),n=r.strTranslate,a=r.strRotate,l=e(71688),u=l.keyFun,h=l.repeat,c=l.unwrap,x=e(72736),d=e(24040),v=e(84284),g=v.CAP_SHIFT,y=v.LINE_SPACING;function m(j,H,te){var Q,$=c(H),K=$.trace,X=K.domain,Y=K.orientation==="h",re=K.node.pad,se=K.node.thickness,ae={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[K.node.align],ce=j.width*(X.x[1]-X.x[0]),fe=j.height*(X.y[1]-X.y[0]),he=$._nodes,ve=$._links,ye=$.circular;(Q=ye?_.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(p.sankeyIterations).size(Y?[ce,fe]:[fe,ce]).nodeWidth(se).nodePadding(re).nodeId(function(Ae){return Ae.pointNumber}).nodeAlign(ae).nodes(he).links(ve);var me,Me,Pe,ge=Q();for(var oe in Q.nodePadding()<re&&r.warn("node.pad was reduced to ",Q.nodePadding()," to fit within the figure."),$._groupLookup){var ie,de=parseInt($._groupLookup[oe]);for(me=0;me<ge.nodes.length;me++)if(ge.nodes[me].pointNumber===de){ie=ge.nodes[me];break}if(ie){var Se={pointNumber:parseInt(oe),x0:ie.x0,x1:ie.x1,y0:ie.y0,y1:ie.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};ge.nodes.unshift(Se),ie.childrenNodes.unshift(Se)}}if(function(){for(me=0;me<ge.nodes.length;me++){var Ae,Oe,ze=ge.nodes[me],pe={};for(Me=0;Me<ze.targetLinks.length;Me++)Ae=(Oe=ze.targetLinks[Me]).source.pointNumber+":"+Oe.target.pointNumber,pe.hasOwnProperty(Ae)||(pe[Ae]=[]),pe[Ae].push(Oe);var be=Object.keys(pe);for(Me=0;Me<be.length;Me++){var ke=pe[Ae=be[Me]],Ie=0,Ee={};for(Pe=0;Pe<ke.length;Pe++)Ee[(Oe=ke[Pe]).label]||(Ee[Oe.label]=0),Ee[Oe.label]+=Oe.value,Ie+=Oe.value;for(Pe=0;Pe<ke.length;Pe++)(Oe=ke[Pe]).flow={value:Ie,labelConcentration:Ee[Oe.label]/Ie,concentration:Oe.value/Ie,links:ke},Oe.concentrationscale&&(Oe.color=s(Oe.concentrationscale(Oe.flow.labelConcentration)))}var Be=0;for(Me=0;Me<ze.sourceLinks.length;Me++)Be+=ze.sourceLinks[Me].value;for(Me=0;Me<ze.sourceLinks.length;Me++)(Oe=ze.sourceLinks[Me]).concentrationOut=Oe.value/Be;var Ve=0;for(Me=0;Me<ze.targetLinks.length;Me++)Ve+=ze.targetLinks[Me].value;for(Me=0;Me<ze.targetLinks.length;Me++)(Oe=ze.targetLinks[Me]).concenrationIn=Oe.value/Ve}}(),K.node.x.length&&K.node.y.length){for(me=0;me<Math.min(K.node.x.length,K.node.y.length,ge.nodes.length);me++)if(K.node.x[me]&&K.node.y[me]){var _e=[K.node.x[me]*ce,K.node.y[me]*fe];ge.nodes[me].x0=_e[0]-se/2,ge.nodes[me].x1=_e[0]+se/2;var we=ge.nodes[me].y1-ge.nodes[me].y0;ge.nodes[me].y0=_e[1]-we/2,ge.nodes[me].y1=_e[1]+we/2}K.arrangement==="snap"&&function(Ae){var Oe,ze,pe=Ae.map(function(Be,Ve){return{x0:Be.x0,index:Ve}}).sort(function(Be,Ve){return Be.x0-Ve.x0}),be=[],ke=-1,Ie=-1/0;for(me=0;me<pe.length;me++){var Ee=Ae[pe[me].index];Ee.x0>Ie+se&&(ke+=1,Oe=Ee.x0),Ie=Ee.x0,be[ke]||(be[ke]=[]),be[ke].push(Ee),ze=Oe-Ee.x0,Ee.x0+=ze,Ee.x1+=ze}return be}(he=ge.nodes).forEach(function(Ae){var Oe,ze,pe,be=0,ke=Ae.length;for(Ae.sort(function(Ie,Ee){return Ie.y0-Ee.y0}),pe=0;pe<ke;++pe)(Oe=Ae[pe]).y0>=be||(ze=be-Oe.y0)>1e-6&&(Oe.y0+=ze,Oe.y1+=ze),be=Oe.y1+re}),Q.update(ge)}return{circular:ye,key:te,trace:K,guid:r.randstr(),horizontal:Y,width:ce,height:fe,nodePad:K.node.pad,nodeLineColor:K.node.line.color,nodeLineWidth:K.node.line.width,linkLineColor:K.link.line.color,linkLineWidth:K.link.line.width,linkArrowLength:K.link.arrowlen,valueFormat:K.valueformat,valueSuffix:K.valuesuffix,textFont:K.textfont,translateX:X.x[0]*j.width+j.margin.l,translateY:j.height-X.y[1]*j.height+j.margin.t,dragParallel:Y?fe:ce,dragPerpendicular:Y?ce:fe,arrangement:K.arrangement,sankey:Q,graph:ge,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function b(j,H,te){var Q=s(H.color),$=s(H.hovercolor),K=H.source.label+"|"+H.target.label+"__"+te;return H.trace=j.trace,H.curveNumber=j.trace.index,{circular:j.circular,key:K,traceId:j.key,pointNumber:H.pointNumber,link:H,tinyColorHue:t.tinyRGB(Q),tinyColorAlpha:Q.getAlpha(),tinyColorHoverHue:t.tinyRGB($),tinyColorHoverAlpha:$.getAlpha(),linkPath:f,linkLineColor:j.linkLineColor,linkLineWidth:j.linkLineWidth,linkArrowLength:j.linkArrowLength,valueFormat:j.valueFormat,valueSuffix:j.valueSuffix,sankey:j.sankey,parent:j,interactionState:j.interactionState,flow:H.flow}}function f(){return function(j){var H=j.linkArrowLength;if(j.link.circular)return function(me,Me){var Pe=me.width/2,ge=me.circularPathData;return me.circularLinkType==="top"?"M "+(ge.targetX-Me)+" "+(ge.targetY+Pe)+" L"+(ge.rightInnerExtent-Me)+" "+(ge.targetY+Pe)+"A"+(ge.rightLargeArcRadius+Pe)+" "+(ge.rightSmallArcRadius+Pe)+" 0 0 1 "+(ge.rightFullExtent-Pe-Me)+" "+(ge.targetY-ge.rightSmallArcRadius)+"L"+(ge.rightFullExtent-Pe-Me)+" "+ge.verticalRightInnerExtent+"A"+(ge.rightLargeArcRadius+Pe)+" "+(ge.rightLargeArcRadius+Pe)+" 0 0 1 "+(ge.rightInnerExtent-Me)+" "+(ge.verticalFullExtent-Pe)+"L"+ge.leftInnerExtent+" "+(ge.verticalFullExtent-Pe)+"A"+(ge.leftLargeArcRadius+Pe)+" "+(ge.leftLargeArcRadius+Pe)+" 0 0 1 "+(ge.leftFullExtent+Pe)+" "+ge.verticalLeftInnerExtent+"L"+(ge.leftFullExtent+Pe)+" "+(ge.sourceY-ge.leftSmallArcRadius)+"A"+(ge.leftLargeArcRadius+Pe)+" "+(ge.leftSmallArcRadius+Pe)+" 0 0 1 "+ge.leftInnerExtent+" "+(ge.sourceY+Pe)+"L"+ge.sourceX+" "+(ge.sourceY+Pe)+"L"+ge.sourceX+" "+(ge.sourceY-Pe)+"L"+ge.leftInnerExtent+" "+(ge.sourceY-Pe)+"A"+(ge.leftLargeArcRadius-Pe)+" "+(ge.leftSmallArcRadius-Pe)+" 0 0 0 "+(ge.leftFullExtent-Pe)+" "+(ge.sourceY-ge.leftSmallArcRadius)+"L"+(ge.leftFullExtent-Pe)+" "+ge.verticalLeftInnerExtent+"A"+(ge.leftLargeArcRadius-Pe)+" "+(ge.leftLargeArcRadius-Pe)+" 0 0 0 "+ge.leftInnerExtent+" "+(ge.verticalFullExtent+Pe)+"L"+(ge.rightInnerExtent-Me)+" "+(ge.verticalFullExtent+Pe)+"A"+(ge.rightLargeArcRadius-Pe)+" "+(ge.rightLargeArcRadius-Pe)+" 0 0 0 "+(ge.rightFullExtent+Pe-Me)+" "+ge.verticalRightInnerExtent+"L"+(ge.rightFullExtent+Pe-Me)+" "+(ge.targetY-ge.rightSmallArcRadius)+"A"+(ge.rightLargeArcRadius-Pe)+" "+(ge.rightSmallArcRadius-Pe)+" 0 0 0 "+(ge.rightInnerExtent-Me)+" "+(ge.targetY-Pe)+"L"+(ge.targetX-Me)+" "+(ge.targetY-Pe)+(Me>0?"L"+ge.targetX+" "+ge.targetY:"")+"Z":"M "+(ge.targetX-Me)+" "+(ge.targetY-Pe)+" L"+(ge.rightInnerExtent-Me)+" "+(ge.targetY-Pe)+"A"+(ge.rightLargeArcRadius+Pe)+" "+(ge.rightSmallArcRadius+Pe)+" 0 0 0 "+(ge.rightFullExtent-Pe-Me)+" "+(ge.targetY+ge.rightSmallArcRadius)+"L"+(ge.rightFullExtent-Pe-Me)+" "+ge.verticalRightInnerExtent+"A"+(ge.rightLargeArcRadius+Pe)+" "+(ge.rightLargeArcRadius+Pe)+" 0 0 0 "+(ge.rightInnerExtent-Me)+" "+(ge.verticalFullExtent+Pe)+"L"+ge.leftInnerExtent+" "+(ge.verticalFullExtent+Pe)+"A"+(ge.leftLargeArcRadius+Pe)+" "+(ge.leftLargeArcRadius+Pe)+" 0 0 0 "+(ge.leftFullExtent+Pe)+" "+ge.verticalLeftInnerExtent+"L"+(ge.leftFullExtent+Pe)+" "+(ge.sourceY+ge.leftSmallArcRadius)+"A"+(ge.leftLargeArcRadius+Pe)+" "+(ge.leftSmallArcRadius+Pe)+" 0 0 0 "+ge.leftInnerExtent+" "+(ge.sourceY-Pe)+"L"+ge.sourceX+" "+(ge.sourceY-Pe)+"L"+ge.sourceX+" "+(ge.sourceY+Pe)+"L"+ge.leftInnerExtent+" "+(ge.sourceY+Pe)+"A"+(ge.leftLargeArcRadius-Pe)+" "+(ge.leftSmallArcRadius-Pe)+" 0 0 1 "+(ge.leftFullExtent-Pe)+" "+(ge.sourceY+ge.leftSmallArcRadius)+"L"+(ge.leftFullExtent-Pe)+" "+ge.verticalLeftInnerExtent+"A"+(ge.leftLargeArcRadius-Pe)+" "+(ge.leftLargeArcRadius-Pe)+" 0 0 1 "+ge.leftInnerExtent+" "+(ge.verticalFullExtent-Pe)+"L"+(ge.rightInnerExtent-Me)+" "+(ge.verticalFullExtent-Pe)+"A"+(ge.rightLargeArcRadius-Pe)+" "+(ge.rightLargeArcRadius-Pe)+" 0 0 1 "+(ge.rightFullExtent+Pe-Me)+" "+ge.verticalRightInnerExtent+"L"+(ge.rightFullExtent+Pe-Me)+" "+(ge.targetY+ge.rightSmallArcRadius)+"A"+(ge.rightLargeArcRadius-Pe)+" "+(ge.rightSmallArcRadius-Pe)+" 0 0 1 "+(ge.rightInnerExtent-Me)+" "+(ge.targetY+Pe)+"L"+(ge.targetX-Me)+" "+(ge.targetY+Pe)+(Me>0?"L"+ge.targetX+" "+ge.targetY:"")+"Z"}(j.link,H);var te=Math.abs((j.link.target.x0-j.link.source.x1)/2);H>te&&(H=te);var Q=j.link.source.x1,$=j.link.target.x0-H,K=k(Q,$),X=K(.5),Y=K(.5),re=j.link.y0-j.link.width/2,se=j.link.y0+j.link.width/2,ae=j.link.y1-j.link.width/2,ce=j.link.y1+j.link.width/2,fe="M"+Q+","+re,he="C"+X+","+re+" "+Y+","+ae+" "+$+","+ae,ve="C"+Y+","+ce+" "+X+","+se+" "+Q+","+se,ye=H>0?"L"+($+H)+","+(ae+j.link.width/2):"";return fe+he+(ye+="L"+$+","+ce)+ve+"Z"}}function S(j,H){var te=s(H.color),Q=p.nodePadAcross,$=j.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var K=H.dx,X=Math.max(.5,H.dy),Y="node_"+H.pointNumber;return H.group&&(Y=r.randstr()),H.trace=j.trace,H.curveNumber=j.trace.index,{index:H.pointNumber,key:Y,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:j.key,trace:j.trace,node:H,nodePad:j.nodePad,nodeLineColor:j.nodeLineColor,nodeLineWidth:j.nodeLineWidth,textFont:j.textFont,size:j.horizontal?j.height:j.width,visibleWidth:Math.ceil(K),visibleHeight:X,zoneX:-Q,zoneY:-$,zoneWidth:K+2*Q,zoneHeight:X+2*$,labelY:j.horizontal?H.dy/2+1:H.dx/2+1,left:H.originalLayer===1,sizeAcross:j.width,forceLayouts:j.forceLayouts,horizontal:j.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:t.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:j.valueFormat,valueSuffix:j.valueSuffix,sankey:j.sankey,graph:j.graph,arrangement:j.arrangement,uniqueNodeLabelPathId:[j.guid,j.key,Y].join("_"),interactionState:j.interactionState,figure:j}}function w(j){j.attr("transform",function(H){return n(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function E(j){j.call(w)}function O(j,H){j.call(E),H.attr("d",f())}function C(j){j.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function P(j){return j.link.width>1||j.linkLineWidth>0}function D(j){return n(j.translateX,j.translateY)+(j.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(j,H,te){j.on(".basic",null).on("mouseover.basic",function(Q){Q.interactionState.dragInProgress||Q.partOfGroup||(te.hover(this,Q,H),Q.interactionState.hovered=[this,Q])}).on("mousemove.basic",function(Q){Q.interactionState.dragInProgress||Q.partOfGroup||(te.follow(this,Q),Q.interactionState.hovered=[this,Q])}).on("mouseout.basic",function(Q){Q.interactionState.dragInProgress||Q.partOfGroup||(te.unhover(this,Q,H),Q.interactionState.hovered=!1)}).on("click.basic",function(Q){Q.interactionState.hovered&&(te.unhover(this,Q,H),Q.interactionState.hovered=!1),Q.interactionState.dragInProgress||Q.partOfGroup||te.select(this,Q,H)})}function I(j,H,te,Q){var $=o.behavior.drag().origin(function(K){return{x:K.node.x0+K.visibleWidth/2,y:K.node.y0+K.visibleHeight/2}}).on("dragstart",function(K){if(K.arrangement!=="fixed"&&(r.ensureSingle(Q._fullLayout._infolayer,"g","dragcover",function(Y){Q._fullLayout._dragCover=Y}),r.raiseToTop(this),K.interactionState.dragInProgress=K.node,W(K.node),K.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,K.interactionState.hovered),K.interactionState.hovered=!1),K.arrangement==="snap")){var X=K.traceId+"|"+K.key;K.forceLayouts[X]?K.forceLayouts[X].alpha(1):function(Y,re,se,ae){(function(fe){for(var he=0;he<fe.length;he++)fe[he].y=(fe[he].y0+fe[he].y1)/2,fe[he].x=(fe[he].x0+fe[he].x1)/2})(se.graph.nodes);var ce=se.graph.nodes.filter(function(fe){return fe.originalX===se.node.originalX}).filter(function(fe){return!fe.partOfGroup});se.forceLayouts[re]=M.forceSimulation(ce).alphaDecay(0).force("collide",M.forceCollide().radius(function(fe){return fe.dy/2+se.nodePad/2}).strength(1).iterations(p.forceIterations)).force("constrain",function(fe,he,ve,ye){return function(){for(var me=0,Me=0;Me<ve.length;Me++){var Pe=ve[Me];Pe===ye.interactionState.dragInProgress?(Pe.x=Pe.lastDraggedX,Pe.y=Pe.lastDraggedY):(Pe.vx=(Pe.originalX-Pe.x)/p.forceTicksPerFrame,Pe.y=Math.min(ye.size-Pe.dy/2,Math.max(Pe.dy/2,Pe.y))),me=Math.max(me,Math.abs(Pe.vx),Math.abs(Pe.vy))}!ye.interactionState.dragInProgress&&me<.1&&ye.forceLayouts[he].alpha()>0&&ye.forceLayouts[he].alpha(0)}}(0,re,ce,se)).stop()}(0,X,K),function(Y,re,se,ae,ce){window.requestAnimationFrame(function fe(){var he;for(he=0;he<p.forceTicksPerFrame;he++)se.forceLayouts[ae].tick();if(function(ye){for(var me=0;me<ye.length;me++)ye[me].y0=ye[me].y-ye[me].dy/2,ye[me].y1=ye[me].y0+ye[me].dy,ye[me].x0=ye[me].x-ye[me].dx/2,ye[me].x1=ye[me].x0+ye[me].dx}(se.graph.nodes),se.sankey.update(se.graph),O(Y.filter(F(se)),re),se.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(fe);else{var ve=se.node.originalX;se.node.x0=ve-se.visibleWidth/2,se.node.x1=ve+se.visibleWidth/2,N(se,ce)}})}(j,H,K,X,Q)}}).on("drag",function(K){if(K.arrangement!=="fixed"){var X=o.event.x,Y=o.event.y;K.arrangement==="snap"?(K.node.x0=X-K.visibleWidth/2,K.node.x1=X+K.visibleWidth/2,K.node.y0=Y-K.visibleHeight/2,K.node.y1=Y+K.visibleHeight/2):(K.arrangement==="freeform"&&(K.node.x0=X-K.visibleWidth/2,K.node.x1=X+K.visibleWidth/2),Y=Math.max(0,Math.min(K.size-K.visibleHeight/2,Y)),K.node.y0=Y-K.visibleHeight/2,K.node.y1=Y+K.visibleHeight/2),W(K.node),K.arrangement!=="snap"&&(K.sankey.update(K.graph),O(j.filter(F(K)),H))}}).on("dragend",function(K){if(K.arrangement!=="fixed"){K.interactionState.dragInProgress=!1;for(var X=0;X<K.node.childrenNodes.length;X++)K.node.childrenNodes[X].x=K.node.x,K.node.childrenNodes[X].y=K.node.y;K.arrangement!=="snap"&&N(K,Q)}});j.on(".drag",null).call($)}function N(j,H){for(var te=[],Q=[],$=0;$<j.graph.nodes.length;$++){var K=(j.graph.nodes[$].x0+j.graph.nodes[$].x1)/2,X=(j.graph.nodes[$].y0+j.graph.nodes[$].y1)/2;te.push(K/j.figure.width),Q.push(X/j.figure.height)}d.call("_guiRestyle",H,{"node.x":[te],"node.y":[Q]},j.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function W(j){j.lastDraggedX=j.x0+j.dx/2,j.lastDraggedY=j.y0+j.dy/2}function F(j){return function(H){return H.node.originalX===j.node.originalX}}ee.exports=function(j,H,te,Q,$){var K=j._context.staticPlot,X=!1;r.ensureSingle(j._fullLayout._infolayer,"g","first-render",function(){X=!0});var Y=j._fullLayout._dragCover,re=te.filter(function(me){return c(me).trace.visible}).map(m.bind(null,Q)),se=H.selectAll("."+p.cn.sankey).data(re,u);se.exit().remove(),se.enter().append("g").classed(p.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",K?"none":"auto").attr("transform",D),se.each(function(me,Me){j._fullData[Me]._sankey=me;var Pe="bgsankey-"+me.trace.uid+"-"+Me;r.ensureSingle(j._fullLayout._draggers,"rect",Pe),j._fullData[Me]._bgRect=o.select("."+Pe),j._fullData[Me]._bgRect.style("pointer-events",K?"none":"all").attr("width",me.width).attr("height",me.height).attr("x",me.translateX).attr("y",me.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),se.transition().ease(p.ease).duration(p.duration).attr("transform",D);var ae=se.selectAll("."+p.cn.sankeyLinks).data(h,u);ae.enter().append("g").classed(p.cn.sankeyLinks,!0).style("fill","none");var ce=ae.selectAll("."+p.cn.sankeyLink).data(function(me){return me.graph.links.filter(function(Me){return Me.value}).map(b.bind(null,me))},u);ce.enter().append("path").classed(p.cn.sankeyLink,!0).call(U,se,$.linkEvents),ce.style("stroke",function(me){return P(me)?t.tinyRGB(s(me.linkLineColor)):me.tinyColorHue}).style("stroke-opacity",function(me){return P(me)?t.opacity(me.linkLineColor):me.tinyColorAlpha}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}).style("stroke-width",function(me){return P(me)?me.linkLineWidth:1}).attr("d",f()),ce.style("opacity",function(){return j._context.staticPlot||X||Y?1:0}).transition().ease(p.ease).duration(p.duration).style("opacity",1),ce.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var fe=se.selectAll("."+p.cn.sankeyNodeSet).data(h,u);fe.enter().append("g").classed(p.cn.sankeyNodeSet,!0),fe.style("cursor",function(me){switch(me.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var he=fe.selectAll("."+p.cn.sankeyNode).data(function(me){var Me=me.graph.nodes;return function(Pe){var ge,oe=[];for(ge=0;ge<Pe.length;ge++)Pe[ge].originalX=(Pe[ge].x0+Pe[ge].x1)/2,Pe[ge].originalY=(Pe[ge].y0+Pe[ge].y1)/2,oe.indexOf(Pe[ge].originalX)===-1&&oe.push(Pe[ge].originalX);for(oe.sort(function(ie,de){return ie-de}),ge=0;ge<Pe.length;ge++)Pe[ge].originalLayerIndex=oe.indexOf(Pe[ge].originalX),Pe[ge].originalLayer=Pe[ge].originalLayerIndex/(oe.length-1)}(Me),Me.map(S.bind(null,me))},u);he.enter().append("g").classed(p.cn.sankeyNode,!0).call(w).style("opacity",function(me){return!j._context.staticPlot&&!X||me.partOfGroup?0:1}),he.call(U,se,$.nodeEvents).call(I,ce,$,j),he.transition().ease(p.ease).duration(p.duration).call(w).style("opacity",function(me){return me.partOfGroup?0:1}),he.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var ve=he.selectAll("."+p.cn.nodeRect).data(h);ve.enter().append("rect").classed(p.cn.nodeRect,!0).call(C),ve.style("stroke-width",function(me){return me.nodeLineWidth}).style("stroke",function(me){return t.tinyRGB(s(me.nodeLineColor))}).style("stroke-opacity",function(me){return t.opacity(me.nodeLineColor)}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}),ve.transition().ease(p.ease).duration(p.duration).call(C);var ye=he.selectAll("."+p.cn.nodeLabel).data(h);ye.enter().append("text").classed(p.cn.nodeLabel,!0).style("cursor","default"),ye.attr("data-notex",1).text(function(me){return me.node.label}).each(function(me){var Me=o.select(this);i.font(Me,me.textFont),x.convertToTspans(Me,j)}).attr("text-anchor",function(me){return me.horizontal&&me.left?"end":"start"}).attr("transform",function(me){var Me=o.select(this),Pe=x.lineCount(Me),ge=me.textFont.size*((Pe-1)*y-g),oe=me.nodeLineWidth/2+3,ie=((me.horizontal?me.visibleHeight:me.visibleWidth)-ge)/2;me.horizontal&&(me.left?oe=-oe:oe+=me.visibleWidth);var de=me.horizontal?"":"scale(-1,1)"+a(90);return n(me.horizontal?oe:ie,me.horizontal?ie:oe)+de}),ye.transition().ease(p.ease).duration(p.duration)}},81128:function(ee){ee.exports=function(R,e){for(var M=[],k=R.cd[0].trace,o=k._sankey.graph.nodes,T=0;T<o.length;T++){var _=o[T];if(!_.partOfGroup){var p=[(_.x0+_.x1)/2,(_.y0+_.y1)/2];k.orientation==="v"&&p.reverse(),e&&e.contains(p,!1,T,R)&&M.push({pointNumber:_.pointNumber})}}return M}},20148:function(ee,R,e){var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.texttemplate,k,"txt"),M.mergeArray(o.hovertext,k,"htx"),M.mergeArray(o.customdata,k,"data"),M.mergeArray(o.textposition,k,"tp"),o.textfont&&(M.mergeArrayCastPositive(o.textfont.size,k,"ts"),M.mergeArray(o.textfont.color,k,"tc"),M.mergeArray(o.textfont.family,k,"tf"),M.mergeArray(o.textfont.weight,k,"tw"),M.mergeArray(o.textfont.style,k,"ty"),M.mergeArray(o.textfont.variant,k,"tv"),M.mergeArray(o.textfont.textcase,k,"tC"),M.mergeArray(o.textfont.lineposition,k,"tE"),M.mergeArray(o.textfont.shadow,k,"tS"));var _=o.marker;if(_){M.mergeArrayCastPositive(_.size,k,"ms"),M.mergeArrayCastPositive(_.opacity,k,"mo"),M.mergeArray(_.symbol,k,"mx"),M.mergeArray(_.angle,k,"ma"),M.mergeArray(_.standoff,k,"mf"),M.mergeArray(_.color,k,"mc");var p=_.line;_.line&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"));var s=_.gradient;s&&s.type!=="none"&&(M.mergeArray(s.type,k,"mgt"),M.mergeArray(s.color,k,"mgc"))}}},52904:function(ee,R,e){var M=e(29736).axisHoverFormat,k=e(21776).Gw,o=e(21776).Ks,T=e(49084),_=e(25376),p=e(98192).u,s=e(98192).c,t=e(43616),i=e(88200),r=e(92880).extendFlat,n=e(98304);ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},p,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:n(!0),fillgradient:r({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:s,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:_({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(ee,R,e){var M=e(38248),k=e(3400),o=e(54460),T=e(1220),_=e(39032).BADNUM,p=e(43028),s=e(90136),t=e(20148),i=e(4500);function r(h,c,x,d,v,g,y){var m=c._length,b=h._fullLayout,f=x._id,S=d._id,w=b._firstScatter[l(c)]===c.uid,E=(u(c,b,x,d)||{}).orientation,O=c.fill;x._minDtick=0,d._minDtick=0;var C={padded:!0},P={padded:!0};y&&(C.ppad=P.ppad=y);var D=m<2||v[0]!==v[m-1]||g[0]!==g[m-1];D&&(O==="tozerox"||O==="tonextx"&&(w||E==="h"))?C.tozero=!0:(c.error_y||{}).visible||O!=="tonexty"&&O!=="tozeroy"&&(p.hasMarkers(c)||p.hasText(c))||(C.padded=!1,C.ppad=0),D&&(O==="tozeroy"||O==="tonexty"&&(w||E==="v"))?P.tozero=!0:O!=="tonextx"&&O!=="tozerox"||(P.padded=!1),f&&(c._extremes[f]=o.findExtremes(x,v,C)),S&&(c._extremes[S]=o.findExtremes(d,g,P))}function n(h,c){if(p.hasMarkers(h)){var x,d=h.marker,v=1.6*(h.marker.sizeref||1);if(x=h.marker.sizemode==="area"?function(f){return Math.max(Math.sqrt((f||0)/v),3)}:function(f){return Math.max((f||0)/v,3)},k.isArrayOrTypedArray(d.size)){var g={type:"linear"};o.setConvert(g);for(var y=g.makeCalcdata(h.marker,"size"),m=new Array(c),b=0;b<c;b++)m[b]=x(y[b]);return m}return x(d.size)}}function a(h,c){var x=l(c),d=h._firstScatter;d[x]||(d[x]=c.uid)}function l(h){var c=h.stackgroup;return h.xaxis+h.yaxis+h.type+(c?"-"+c:"")}function u(h,c,x,d){var v=h.stackgroup;if(v){var g=c._scatterStackOpts[x._id+d._id][v],y=g.orientation==="v"?d:x;return y.type==="linear"||y.type==="log"?g:void 0}}ee.exports={calc:function(h,c){var x,d,v,g,y,m,b=h._fullLayout,f=c._xA=o.getFromId(h,c.xaxis||"x","x"),S=c._yA=o.getFromId(h,c.yaxis||"y","y"),w=f.makeCalcdata(c,"x"),E=S.makeCalcdata(c,"y"),O=T(c,f,"x",w),C=T(c,S,"y",E),P=O.vals,D=C.vals,U=c._length,I=new Array(U),N=c.ids,W=u(c,b,f,S),F=!1;a(b,c);var j,H="x",te="y";W?(k.pushUnique(W.traceIndices,c._expandedIndex),(x=W.orientation==="v")?(te="s",j="x"):(H="s",j="y"),y=W.stackgaps==="interpolate"):r(h,c,f,S,P,D,n(c,U));var Q=!!c.xperiodalignment,$=!!c.yperiodalignment;for(d=0;d<U;d++){var K=I[d]={},X=M(P[d]),Y=M(D[d]);X&&Y?(K[H]=P[d],K[te]=D[d],Q&&(K.orig_x=w[d],K.xEnd=O.ends[d],K.xStart=O.starts[d]),$&&(K.orig_y=E[d],K.yEnd=C.ends[d],K.yStart=C.starts[d])):W&&(x?X:Y)?(K[j]=x?P[d]:D[d],K.gap=!0,y?(K.s=_,F=!0):K.s=0):K[H]=K[te]=_,N&&(K.id=String(N[d]))}if(t(I,c),s(h,c),i(I,c),W){for(d=0;d<I.length;)I[d][j]===_?I.splice(d,1):d++;if(k.sort(I,function(ce,fe){return ce[j]-fe[j]||ce.i-fe.i}),F){for(d=0;d<I.length-1&&I[d].gap;)d++;for((m=I[d].s)||(m=I[d].s=0),v=0;v<d;v++)I[v].s=m;for(g=I.length-1;g>d&&I[g].gap;)g--;for(m=I[g].s,v=I.length-1;v>g;v--)I[v].s=m;for(;d<g;)if(I[++d].gap){for(v=d+1;I[v].gap;)v++;for(var re=I[d-1][j],se=I[d-1].s,ae=(I[v].s-se)/(I[v][j]-re);d<v;)I[d].s=se+(I[d][j]-re)*ae,d++}}}return I},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:u}},4500:function(ee,R,e){var M=e(3400);ee.exports=function(k,o){M.isArrayOrTypedArray(o.selectedpoints)&&M.tagSelected(k,o)}},90136:function(ee,R,e){var M=e(94288).hasColorscale,k=e(47128),o=e(43028);ee.exports=function(T,_){o.hasLines(_)&&M(_,"line")&&k(T,_,{vals:_.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(_)&&(M(_,"marker")&&k(T,_,{vals:_.marker.color,containerStr:"marker",cLetter:"c"}),M(_,"marker.line")&&k(T,_,{vals:_.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(ee){ee.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(ee,R,e){var M=e(16356),k=e(96376).setGroupPositions;function o(T,_,p,s,t,i,r){t[s]=!0;var n={i:null,gap:!0,s:0};if(n[r]=p,T.splice(_,0,n),_&&p===T[_-1][r]){var a=T[_-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else i&&(n.s=function(l,u,h,c){var x=l[u-1],d=l[u+1];return d?x?x.s+(d.s-x.s)*(h-x[c])/(d[c]-x[c]):d.s:x.s}(T,_,p,r));_||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ee.exports=function(T,_){T._fullLayout.scattermode==="group"&&function(j,H){for(var te=H.xaxis,Q=H.yaxis,$=j._fullLayout,K=j._fullData,X=j.calcdata,Y=[],re=[],se=0;se<K.length;se++){var ae=K[se];ae.visible===!0&&ae.type==="scatter"&&ae.xaxis===te._id&&ae.yaxis===Q._id&&(ae.orientation==="h"?Y.push(X[se]):ae.orientation==="v"&&re.push(X[se]))}var ce={mode:$.scattermode,gap:$.scattergap};k(j,te,Q,re,ce),k(j,Q,te,Y,ce)}(T,_);var p=_.xaxis,s=_.yaxis,t=p._id+s._id,i=T._fullLayout._scatterStackOpts[t];if(i){var r,n,a,l,u,h,c,x,d,v,g,y,m,b,f,S=T.calcdata;for(var w in i){var E=(v=i[w]).traceIndices;if(E.length){for(g=v.stackgaps==="interpolate",y=v.groupnorm,v.orientation==="v"?(m="x",b="y"):(m="y",b="x"),f=new Array(E.length),r=0;r<f.length;r++)f[r]=!1;h=S[E[0]];var O=new Array(h.length);for(r=0;r<h.length;r++)O[r]=h[r][m];for(r=1;r<E.length;r++){for(u=S[E[r]],n=a=0;n<u.length;n++){for(c=u[n][m];c>O[a]&&a<O.length;a++)o(u,n,O[a],r,f,g,m),n++;if(c!==O[a]){for(l=0;l<r;l++)o(S[E[l]],a,c,l,f,g,m);O.splice(a,0,c)}a++}for(;a<O.length;a++)o(u,n,O[a],r,f,g,m),n++}var C=O.length;for(n=0;n<h.length;n++){for(x=h[n][b]=h[n].s,r=1;r<E.length;r++)(u=S[E[r]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=C,x+=u[n].s,u[n][b]=x;if(y)for(d=(y==="fraction"?x:x/100)||1,r=0;r<E.length;r++){var P=S[E[r]][n];P[b]/=d,P.sNorm=P.s/d}}for(r=0;r<E.length;r++){var D=(u=S[E[r]])[0].trace,U=M.calcMarkerSize(D,D._rawLength),I=Array.isArray(U);if(U&&f[r]||I){var N=U;for(U=new Array(C),n=0;n<C;n++)U[n]=u[n].gap?0:I?N[u[n].i]:N}var W=new Array(C),F=new Array(C);for(n=0;n<C;n++)W[n]=u[n].x,F[n]=u[n].y;M.calcAxisExpansion(T,D,p,s,W,F,U),u[0].t.orientation=v.orientation}}}}}},35036:function(ee,R,e){var M=e(3400),k=e(20011),o=e(52904);ee.exports=function(T,_){var p,s,t;function i(u){return M.coerce(s._input,s,o,u)}if(_.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(p=s._input,k(p,s,_,i));for(t=0;t<T.length;t++){var r=T[t];if(r.type==="scatter"){var n=r.fill;if(n!=="none"&&n!=="toself"&&(r.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var a=t-1;a>=0;a--){var l=T[a];if(l.type==="scatter"&&l.xaxis===r.xaxis&&l.yaxis===r.yaxis){l.opacity=void 0;break}}}}}},18800:function(ee,R,e){var M=e(3400),k=e(24040),o=e(52904),T=e(88200),_=e(43028),p=e(43980),s=e(31147),t=e(43912),i=e(74428),r=e(66828),n=e(11731),a=e(124),l=e(70840),u=e(3400).coercePattern;ee.exports=function(h,c,x,d){function v(E,O){return M.coerce(h,c,o,E,O)}var g=p(h,c,d,v);if(g||(c.visible=!1),c.visible){s(h,c,d,v),v("xhoverformat"),v("yhoverformat"),v("zorder");var y=t(h,c,d,v);d.scattermode==="group"&&c.orientation===void 0&&v("orientation","v");var m=!y&&g<T.PTS_LINESONLY?"lines+markers":"lines";v("text"),v("hovertext"),v("mode",m),_.hasMarkers(c)&&i(h,c,x,d,v,{gradient:!0}),_.hasLines(c)&&(r(h,c,x,d,v,{backoff:!0}),n(h,c,v),v("connectgaps"),v("line.simplify")),_.hasText(c)&&(v("texttemplate"),a(h,c,d,v));var b=[];(_.hasMarkers(c)||_.hasText(c))&&(v("cliponaxis"),v("marker.maxdisplayed"),b.push("points")),v("fill",y?y.fillDflt:"none"),c.fill!=="none"&&(l(h,c,x,v,{moduleHasFillgradient:!0}),_.hasLines(c)||n(h,c,v),u(v,"fillpattern",c.fillcolor,!1));var f=(c.line||{}).color,S=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||b.push("fills"),v("hoveron",b.join("+")||"points"),c.hoveron!=="fills"&&v("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(h,c,f||S||x,{axis:"y"}),w(h,c,f||S||x,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(c,v)}}},98304:function(ee){ee.exports=function(R){return{valType:"color",editType:"style",anim:!0}}},70840:function(ee,R,e){var M=e(76308),k=e(3400).isArrayOrTypedArray;ee.exports=function(o,T,_,p,s){s||(s={});var t,i=!1;if(T.marker){var r=T.marker.color,n=(T.marker.line||{}).color;r&&!k(r)?i=r:n&&!k(n)&&(i=n)}if(s.moduleHasFillgradient&&p("fillgradient.type")!=="none"){p("fillgradient.start"),p("fillgradient.stop");var a=p("fillgradient.colorscale");a&&(t=function(l){for(var u=M.interpolate(l[0][1],l[1][1],.5),h=2;h<l.length;h++){var c=M.interpolate(l[h-1][1],l[h][1],.5);u=M.interpolate(u,c,l[h-1][0]/l[h][0])}return u}(a))}p("fillcolor",M.addOpacity((T.line||{}).color||i||t||_,.5))}},76688:function(ee,R,e){var M=e(54460);ee.exports=function(k,o,T){var _={},p={_fullLayout:T},s=M.getFromTrace(p,o,"x"),t=M.getFromTrace(p,o,"y"),i=k.orig_x;i===void 0&&(i=k.x);var r=k.orig_y;return r===void 0&&(r=k.y),_.xLabel=M.tickText(s,s.c2l(i),!0).text,_.yLabel=M.tickText(t,t.c2l(r),!0).text,_}},44928:function(ee,R,e){var M=e(76308),k=e(43028);ee.exports=function(o,T){var _,p;if(o.mode==="lines")return(_=o.line.color)&&M.opacity(_)?_:o.fillcolor;if(o.mode==="none")return o.fill?o.fillcolor:"";var s=T.mcc||(o.marker||{}).color,t=T.mlcc||((o.marker||{}).line||{}).color;return(p=s&&M.opacity(s)?s:t&&M.opacity(t)&&(T.mlw||((o.marker||{}).line||{}).width)?t:"")?M.opacity(p)<.3?M.addOpacity(p,.3):p:(_=(o.line||{}).color)&&M.opacity(_)&&k.hasLines(o)&&o.line.width?_:o.fillcolor}},20011:function(ee,R,e){var M=e(71888).getAxisGroup;ee.exports=function(k,o,T,_){var p=o.orientation,s=o[{v:"x",h:"y"}[p]+"axis"],t=M(T,s)+p,i=T._alignmentOpts||{},r=_("alignmentgroup"),n=i[t];n||(n=i[t]={});var a=n[r];a?a.traces.push(o):a=n[r]={traces:[o],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var l=_("offsetgroup"),u=a.offsetGroups,h=u[l];l&&(h||(h=u[l]={offsetIndex:Object.keys(u).length}),o._offsetIndex=h.offsetIndex)}},98723:function(ee,R,e){var M=e(3400),k=e(93024),o=e(24040),T=e(44928),_=e(76308),p=M.fillText;ee.exports=function(s,t,i,r){var n=s.cd,a=n[0].trace,l=s.xa,u=s.ya,h=l.c2p(t),c=u.c2p(i),x=[h,c],d=a.hoveron||"",v=a.mode.indexOf("markers")!==-1?3:.5,g=!!a.xperiodalignment,y=!!a.yperiodalignment;if(d.indexOf("points")!==-1){var m=function(W){var F=Math.max(v,W.mrc||0),j=l.c2p(W.x)-h,H=u.c2p(W.y)-c;return Math.max(Math.sqrt(j*j+H*H)-F,1-v/F)},b=k.getDistanceFunction(r,function(W){if(g){var F=l.c2p(W.xStart),j=l.c2p(W.xEnd);return h>=Math.min(F,j)&&h<=Math.max(F,j)?0:1/0}var H=Math.max(3,W.mrc||0),te=1-1/H,Q=Math.abs(l.c2p(W.x)-h);return Q<H?te*Q/H:Q-H+te},function(W){if(y){var F=u.c2p(W.yStart),j=u.c2p(W.yEnd);return c>=Math.min(F,j)&&c<=Math.max(F,j)?0:1/0}var H=Math.max(3,W.mrc||0),te=1-1/H,Q=Math.abs(u.c2p(W.y)-c);return Q<H?te*Q/H:Q-H+te},m);if(k.getClosest(n,b,s),s.index!==!1){var f=n[s.index],S=l.c2p(f.x,!0),w=u.c2p(f.y,!0),E=f.mrc||1;s.index=f.i;var O=n[0].t.orientation,C=O&&(f.sNorm||f.s),P=O==="h"?C:f.orig_x!==void 0?f.orig_x:f.x,D=O==="v"?C:f.orig_y!==void 0?f.orig_y:f.y;return M.extendFlat(s,{color:T(a,f),x0:S-E,x1:S+E,xLabelVal:P,y0:w-E,y1:w+E,yLabelVal:D,spikeDistance:m(f),hovertemplate:a.hovertemplate}),p(f,a,s),o.getComponentMethod("errorbars","hoverInfo")(f,a,s),[s]}}function U(W){if(!W)return!1;var F=W.node();try{var j=new DOMPoint(x[0],x[1]);return F.isPointInFill(j)}catch{var H=F.ownerSVGElement.createSVGPoint();return H.x=x[0],H.y=x[1],F.isPointInFill(H)}}if(d.indexOf("fills")!==-1&&a._fillElement&&U(a._fillElement)&&!U(a._fillExclusionElement)){var I=function(W){var F,j,H,te,Q,$,K,X,Y,re=[],se=1/0,ae=-1/0,ce=1/0,fe=-1/0;for(F=0;F<W.length;F++){var he=W[F];he.contains(x)&&(re.push(he),ce=Math.min(ce,he.ymin),fe=Math.max(fe,he.ymax))}if(re.length===0)return null;for(j=((ce=Math.max(ce,0))+(fe=Math.min(fe,u._length)))/2,F=0;F<re.length;F++)for(te=re[F].pts,H=1;H<te.length;H++)(X=te[H-1][1])>j!=(Y=te[H][1])>=j&&($=te[H-1][0],K=te[H][0],Y-X&&(Q=$+(K-$)*(j-X)/(Y-X),se=Math.min(se,Q),ae=Math.max(ae,Q)));return{x0:se=Math.max(se,0),x1:ae=Math.min(ae,l._length),y0:j,y1:j}}(a._polygons);I===null&&(I={x0:x[0],x1:x[0],y0:x[1],y1:x[1]});var N=_.defaultLine;return _.opacity(a.fillcolor)?N=a.fillcolor:_.opacity((a.line||{}).color)&&(N=a.line.color),M.extendFlat(s,{distance:s.maxHoverDistance,x0:I.x0,x1:I.x1,y0:I.y0,y1:I.y1,color:N,hovertemplate:!1}),delete s.index,a.text&&!M.isArrayOrTypedArray(a.text)?s.text=String(a.text):s.text=a.name,[s]}}},65875:function(ee,R,e){var M=e(43028);ee.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(ee){ee.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(ee,R,e){var M=e(3400),k=e(55308);ee.exports=function(o,T){var _,p=T.barmode==="group";T.scattermode==="group"&&(_=p?T.bargap:.2,M.coerce(o,T,k,"scattergap",_))}},66828:function(ee,R,e){var M=e(3400).isArrayOrTypedArray,k=e(94288).hasColorscale,o=e(27260);ee.exports=function(T,_,p,s,t,i){i||(i={});var r=(T.marker||{}).color;r&&r._inputArray&&(r=r._inputArray),t("line.color",p),k(T,"line")?o(T,_,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!M(r)&&r||p),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},52340:function(ee,R,e){var M=e(43616),k=e(39032),o=k.BADNUM,T=k.LOG_CLIP,_=T+.5,p=T-.5,s=e(3400),t=s.segmentsIntersect,i=s.constrain,r=e(88200);ee.exports=function(n,a){var l,u,h,c,x,d,v,g,y,m,b,f,S,w,E,O,C,P,D=a.trace||{},U=a.xaxis,I=a.yaxis,N=U.type==="log",W=I.type==="log",F=U._length,j=I._length,H=a.backoff,te=D.marker,Q=a.connectGaps,$=a.baseTolerance,K=a.shape,X=K==="linear",Y=D.fill&&D.fill!=="none",re=[],se=r.minTolerance,ae=n.length,ce=new Array(ae),fe=0;function he(Mt){var He=n[Mt];if(!He)return!1;var Ye=a.linearized?U.l2p(He.x):U.c2p(He.x),Ne=a.linearized?I.l2p(He.y):I.c2p(He.y);if(Ye===o){if(N&&(Ye=U.c2p(He.x,!0)),Ye===o)return!1;W&&Ne===o&&(Ye*=Math.abs(U._m*j*(U._m>0?_:p)/(I._m*F*(I._m>0?_:p)))),Ye*=1e3}if(Ne===o){if(W&&(Ne=I.c2p(He.y,!0)),Ne===o)return!1;Ne*=1e3}return[Ye,Ne]}function ve(Mt,He,Ye,Ne){var We=Ye-Mt,ot=Ne-He,tt=.5-Mt,Re=.5-He,Fe=We*We+ot*ot,nt=We*tt+ot*Re;if(nt>0&&nt<Fe){var Ge=tt*ot-Re*We;if(Ge*Ge<Fe)return!0}}function ye(Mt,He){var Ye=Mt[0]/F,Ne=Mt[1]/j,We=Math.max(0,-Ye,Ye-1,-Ne,Ne-1);return We&&C!==void 0&&ve(Ye,Ne,C,P)&&(We=0),We&&He&&ve(Ye,Ne,He[0]/F,He[1]/j)&&(We=0),(1+r.toleranceGrowth*We)*$}function me(Mt,He){var Ye=Mt[0]-He[0],Ne=Mt[1]-He[1];return Math.sqrt(Ye*Ye+Ne*Ne)}var Me,Pe,ge,oe,ie,de,Se,_e=r.maxScreensAway,we=-F*_e,Ae=F*(1+_e),Oe=-j*_e,ze=j*(1+_e),pe=[[we,Oe,Ae,Oe],[Ae,Oe,Ae,ze],[Ae,ze,we,ze],[we,ze,we,Oe]];function be(Mt){if(Mt[0]<we||Mt[0]>Ae||Mt[1]<Oe||Mt[1]>ze)return[i(Mt[0],we,Ae),i(Mt[1],Oe,ze)]}function ke(Mt,He){return Mt[0]===He[0]&&(Mt[0]===we||Mt[0]===Ae)||Mt[1]===He[1]&&(Mt[1]===Oe||Mt[1]===ze)||void 0}function Ie(Mt,He,Ye){return function(Ne,We){var ot=be(Ne),tt=be(We),Re=[];if(ot&&tt&&ke(ot,tt))return Re;ot&&Re.push(ot),tt&&Re.push(tt);var Fe=2*s.constrain((Ne[Mt]+We[Mt])/2,He,Ye)-((ot||Ne)[Mt]+(tt||We)[Mt]);return Fe&&((ot&&tt?Fe>0==ot[Mt]>tt[Mt]?ot:tt:ot||tt)[Mt]+=Fe),Re}}function Ee(Mt){var He=Mt[0],Ye=Mt[1],Ne=He===ce[fe-1][0],We=Ye===ce[fe-1][1];if(!Ne||!We)if(fe>1){var ot=He===ce[fe-2][0],tt=Ye===ce[fe-2][1];Ne&&(He===we||He===Ae)&&ot?tt?fe--:ce[fe-1]=Mt:We&&(Ye===Oe||Ye===ze)&&tt?ot?fe--:ce[fe-1]=Mt:ce[fe++]=Mt}else ce[fe++]=Mt}function Be(Mt){ce[fe-1][0]!==Mt[0]&&ce[fe-1][1]!==Mt[1]&&Ee([ge,oe]),Ee(Mt),ie=null,ge=oe=0}K==="linear"||K==="spline"?Se=function(Mt,He){for(var Ye=[],Ne=0,We=0;We<4;We++){var ot=pe[We],tt=t(Mt[0],Mt[1],He[0],He[1],ot[0],ot[1],ot[2],ot[3]);tt&&(!Ne||Math.abs(tt.x-Ye[0][0])>1||Math.abs(tt.y-Ye[0][1])>1)&&(tt=[tt.x,tt.y],Ne&&me(tt,Mt)<me(Ye[0],Mt)?Ye.unshift(tt):Ye.push(tt),Ne++)}return Ye}:K==="hv"||K==="vh"?Se=function(Mt,He){var Ye=[],Ne=be(Mt),We=be(He);return Ne&&We&&ke(Ne,We)||(Ne&&Ye.push(Ne),We&&Ye.push(We)),Ye}:K==="hvh"?Se=Ie(0,we,Ae):K==="vhv"&&(Se=Ie(1,Oe,ze));var Ve=s.isArrayOrTypedArray(te);function Ze(Mt){if(Mt&&H&&(Mt.i=l,Mt.d=n,Mt.trace=D,Mt.marker=Ve?te[Mt.i]:te,Mt.backoff=H),C=Mt[0]/F,P=Mt[1]/j,Me=Mt[0]<we?we:Mt[0]>Ae?Ae:0,Pe=Mt[1]<Oe?Oe:Mt[1]>ze?ze:0,Me||Pe){if(fe)if(ie){var He=Se(ie,Mt);He.length>1&&(Be(He[0]),ce[fe++]=He[1])}else de=Se(ce[fe-1],Mt)[0],ce[fe++]=de;else ce[fe++]=[Me||Mt[0],Pe||Mt[1]];var Ye=ce[fe-1];Me&&Pe&&(Ye[0]!==Me||Ye[1]!==Pe)?(ie&&(ge!==Me&&oe!==Pe?Ee(ge&&oe?(Ne=ie,ot=(We=Mt)[0]-Ne[0],tt=(We[1]-Ne[1])/ot,(Ne[1]*We[0]-We[1]*Ne[0])/ot>0?[tt>0?we:Ae,ze]:[tt>0?Ae:we,Oe]):[ge||Me,oe||Pe]):ge&&oe&&Ee([ge,oe])),Ee([Me,Pe])):ge-Me&&oe-Pe&&Ee([Me||ge,Pe||oe]),ie=Mt,ge=Me,oe=Pe}else ie&&Be(Se(ie,Mt)[0]),ce[fe++]=Mt;var Ne,We,ot,tt}for(l=0;l<ae;l++)if(u=he(l)){for(fe=0,ie=null,Ze(u),l++;l<ae;l++){if(!(c=he(l))){if(Q)continue;break}if(X&&a.simplify){var rt=he(l+1);if(m=me(c,u),Y&&(fe===0||fe===ae-1)||!(m<ye(c,rt)*se)){for(g=[(c[0]-u[0])/m,(c[1]-u[1])/m],x=u,b=m,f=w=E=0,v=!1,h=c,l++;l<n.length;l++){if(d=rt,rt=he(l+1),!d){if(Q)continue;break}if(O=(y=[d[0]-u[0],d[1]-u[1]])[0]*g[1]-y[1]*g[0],w=Math.min(w,O),(E=Math.max(E,O))-w>ye(d,rt))break;h=d,(S=y[0]*g[0]+y[1]*g[1])>b?(b=S,c=d,v=!1):S<f&&(f=S,x=d,v=!0)}if(v?(Ze(c),h!==x&&Ze(x)):(x!==u&&Ze(x),h!==c&&Ze(c)),Ze(h),l>=n.length||!d)break;Ze(d),u=d}}else Ze(c)}ie&&Ee([ge||ie[0],oe||ie[1]]),re.push(ce.slice(0,fe))}var it=K.slice(K.length-1);if(H&&it!=="h"&&it!=="v"){for(var dt=!1,vt=-1,ht=[],Qe=0;Qe<re.length;Qe++)for(var Je=0;Je<re[Qe].length-1;Je++){var Tt=re[Qe][Je],Ot=re[Qe][Je+1],Pt=M.applyBackoff(Ot,Tt);Pt[0]===Ot[0]&&Pt[1]===Ot[1]||(dt=!0),ht[vt+1]||(ht[++vt]=[Tt,[Pt[0],Pt[1]]])}return dt?ht:re}return re}},11731:function(ee){ee.exports=function(R,e,M){M("line.shape")==="spline"&&M("line.smoothing")}},14328:function(ee){var R={tonextx:1,tonexty:1,tonext:1};ee.exports=function(e,M,k){var o,T,_,p,s,t={},i=!1,r=-1,n=0,a=-1;for(T=0;T<k.length;T++)(_=(o=k[T][0].trace).stackgroup||"")?_ in t?s=t[_]:(s=t[_]=n,n++):o.fill in R&&a>=0?s=a:(s=a=n,n++),s<r&&(i=!0),o._groupIndex=r=s;var l=k.slice();i&&l.sort(function(h,c){var x=h[0].trace,d=c[0].trace;return x._groupIndex-d._groupIndex||x.index-d.index});var u={};for(T=0;T<l.length;T++)_=(o=l[T][0].trace).stackgroup||"",o.visible===!0?(o._nexttrace=null,o.fill in R&&(p=u[_],o._prevtrace=p||null,p&&(p._nexttrace=o)),o._ownfill=o.fill&&(o.fill.substr(0,6)==="tozero"||o.fill==="toself"||o.fill.substr(0,2)==="to"&&!o._prevtrace),u[_]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return l}},7152:function(ee,R,e){var M=e(38248);ee.exports=function(k,o){o||(o=2);var T=k.marker,_=T.sizeref||1,p=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/_)}:function(t){return t/_};return function(t){var i=s(t/o);return M(i)&&i>0?Math.max(i,p):0}}},5528:function(ee){ee.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(ee,R,e){var M=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(43028);ee.exports=function(_,p,s,t,i,r){var n=T.isBubble(_),a=(_.line||{}).color;r=r||{},a&&(s=a),i("marker.symbol"),i("marker.opacity",n?.7:1),i("marker.size"),r.noAngle||(i("marker.angle"),r.noAngleRef||i("marker.angleref"),r.noStandOff||i("marker.standoff")),i("marker.color",s),k(_,"marker")&&o(_,p,t,i,{prefix:"marker.",cLetter:"c"}),r.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),r.noLine||(i("marker.line.color",a&&!Array.isArray(a)&&p.marker.color!==a?a:n?M.background:M.defaultLine),k(_,"marker.line")&&o(_,p,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",n?1:0)),n&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),r.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},31147:function(ee,R,e){var M=e(3400).dateTick0,k=e(39032).ONEWEEK;function o(T,_){return M(_,T%k==0?1:0)}ee.exports=function(T,_,p,s,t){if(t||(t={x:!0,y:!0}),t.x){var i=s("xperiod");i&&(s("xperiod0",o(i,_.xcalendar)),s("xperiodalignment"))}if(t.y){var r=s("yperiod");r&&(s("yperiod0",o(r,_.ycalendar)),s("yperiodalignment"))}}},96504:function(ee,R,e){var M=e(33428),k=e(24040),o=e(3400),T=o.ensureSingle,_=o.identity,p=e(43616),s=e(43028),t=e(52340),i=e(14328),r=e(92065).tester;function n(a,l,u,h,c,x,d){var v,g=a._context.staticPlot;(function(Ee,Be,Ve,Ze,rt){var it=Ve.xaxis,dt=Ve.yaxis,vt=M.extent(o.simpleMap(it.range,it.r2c)),ht=M.extent(o.simpleMap(dt.range,dt.r2c)),Qe=Ze[0].trace;if(s.hasMarkers(Qe)){var Je=Qe.marker.maxdisplayed;if(Je!==0){var Tt=Ze.filter(function(He){return He.x>=vt[0]&&He.x<=vt[1]&&He.y>=ht[0]&&He.y<=ht[1]}),Ot=Math.ceil(Tt.length/Je),Pt=0;rt.forEach(function(He,Ye){var Ne=He[0].trace;s.hasMarkers(Ne)&&Ne.marker.maxdisplayed>0&&Ye<Be&&Pt++});var Mt=Math.round(Pt*Ot/3+Math.floor(Pt/3)*Ot/7.1);Ze.forEach(function(He){delete He.vis}),Tt.forEach(function(He,Ye){Math.round((Ye+Mt)%Ot)===0&&(He.vis=!0)})}}})(0,l,u,h,c);var y=!!d&&d.duration>0;function m(Ee){return y?Ee.transition():Ee}var b=u.xaxis,f=u.yaxis,S=h[0].trace,w=S.line,E=M.select(x),O=T(E,"g","errorbars"),C=T(E,"g","lines"),P=T(E,"g","points"),D=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,O,u,d),S.visible===!0){var U,I;m(E).style("opacity",S.opacity);var N,W,F=S.fill.charAt(S.fill.length-1);F!=="x"&&F!=="y"&&(F=""),F==="y"?(N=1,W=f.c2p(0,!0)):F==="x"&&(N=0,W=b.c2p(0,!0)),h[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var j,H,te="",Q=[],$=S._prevtrace,K=null,X=null;$&&(te=$._prevRevpath||"",I=$._nextFill,Q=$._ownPolygons,K=$._fillsegments,X=$._fillElement);var Y,re,se,ae,ce,fe,he="",ve="",ye=[];S._polygons=[];var me=[],Me=[],Pe=o.noop;if(U=S._ownFill,s.hasLines(S)||S.fill!=="none"){I&&I.datum(h),["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1?(Y=p.steps(w.shape),re=p.steps(w.shape.split("").reverse().join(""))):Y=re=w.shape==="spline"?function(Ee){var Be=Ee[Ee.length-1];return Ee.length>1&&Ee[0][0]===Be[0]&&Ee[0][1]===Be[1]?p.smoothclosed(Ee.slice(1),w.smoothing):p.smoothopen(Ee,w.smoothing)}:function(Ee){return"M"+Ee.join("L")},se=function(Ee){return re(Ee.reverse())},Me=t(h,{xaxis:b,yaxis:f,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:S.fill}),me=new Array(Me.length);var ge=0;for(v=0;v<Me.length;v++){var oe,ie=Me[v];oe&&F?oe.push.apply(oe,ie):(oe=ie.slice(),me[ge]=oe,ge++)}S._fillElement=null,S._fillExclusionElement=X,S._fillsegments=me.slice(0,ge),me=S._fillsegments,Me.length&&(ae=Me[0][0].slice(),fe=(ce=Me[Me.length-1])[ce.length-1].slice()),Pe=function(Ee){return function(Be){if(j=Y(Be),H=se(Be),he?F?(he+="L"+j.substr(1),ve=H+"L"+ve.substr(1)):(he+="Z"+j,ve=H+"Z"+ve):(he=j,ve=H),s.hasLines(S)){var Ve=M.select(this);if(Ve.datum(h),Ee)m(Ve.style("opacity",0).attr("d",j).call(p.lineGroupStyle)).style("opacity",1);else{var Ze=m(Ve);Ze.attr("d",j),p.singleLineStyle(h,Ze)}}}}}var de=C.selectAll(".js-line").data(Me);m(de.exit()).style("opacity",0).remove(),de.each(Pe(!1)),de.enter().append("path").classed("js-line",!0).style("vector-effect",g?"none":"non-scaling-stroke").call(p.lineGroupStyle).each(Pe(!0)),p.setClipUrl(de,u.layerClipId,a);var Se=function(){var Ee=new Array(me.length);for(v=0;v<me.length;v++)Ee[v]=r(me[v]);return Ee},_e=function(Ee){var Be,Ve;if(Ee&&Ee.length!==0){for(Be=new Array(Ee.length-1+me.length),Ve=0;Ve<Ee.length-1;Ve++)Be[Ve]=r(Ee[Ve]);var Ze=Ee[Ee.length-1].slice();for(Ze.reverse(),Ve=0;Ve<me.length;Ve++)Be[Ee.length-1+Ve]=r(me[Ve].concat(Ze))}else for(Be=new Array(me.length),Ve=0;Ve<me.length;Ve++){var rt=me[Ve][0].slice(),it=me[Ve][me[Ve].length-1].slice();rt[N]=it[N]=W;var dt=[it,rt].concat(me[Ve]);Be[Ve]=r(dt)}return Be};Me.length?(U?(U.datum(h),ae&&fe&&(F?(ae[N]=fe[N]=W,m(U).attr("d","M"+fe+"L"+ae+"L"+he.substr(1)).call(p.singleFillStyle,a),ye=_e(null)):(m(U).attr("d",he+"Z").call(p.singleFillStyle,a),ye=Se())),S._polygons=ye,S._fillElement=U):I&&(S.fill.substr(0,6)==="tonext"&&he&&te?(S.fill==="tonext"?(m(I).attr("d",he+"Z"+te+"Z").call(p.singleFillStyle,a),ye=Se(),S._polygons=ye.concat(Q)):(m(I).attr("d",he+"L"+te.substr(1)+"Z").call(p.singleFillStyle,a),ye=_e(K),S._polygons=ye),S._fillElement=I):Ae(I)),S._prevRevpath=ve):(U?Ae(U):I&&Ae(I),S._prevRevpath=null),S._ownPolygons=ye,P.datum(h),D.datum(h),function(Ee,Be,Ve){var Ze,rt=Ve[0].trace,it=s.hasMarkers(rt),dt=s.hasText(rt),vt=ke(rt),ht=Ie,Qe=Ie;if(it||dt){var Je=_,Tt=rt.stackgroup,Ot=Tt&&a._fullLayout._scatterStackOpts[b._id+f._id][Tt].stackgaps==="infer zero";rt.marker.maxdisplayed||rt._needsCull?Je=Ot?ze:Oe:Tt&&!Ot&&(Je=pe),it&&(ht=Je),dt&&(Qe=Je)}var Pt,Mt=(Ze=Ee.selectAll("path.point").data(ht,vt)).enter().append("path").classed("point",!0);y&&Mt.call(p.pointStyle,rt,a).call(p.translatePoints,b,f).style("opacity",0).transition().style("opacity",1),Ze.order(),it&&(Pt=p.makePointStyleFns(rt)),Ze.each(function(He){var Ye=M.select(this),Ne=m(Ye);p.translatePoint(He,Ne,b,f)?(p.singlePointStyle(He,Ne,rt,Pt,a),u.layerClipId&&p.hideOutsideRangePoint(He,Ne,b,f,rt.xcalendar,rt.ycalendar),rt.customdata&&Ye.classed("plotly-customdata",He.data!==null&&He.data!==void 0)):Ne.remove()}),y?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),(Ze=Be.selectAll("g").data(Qe,vt)).enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(He){var Ye=M.select(this),Ne=m(Ye.select("text"));p.translatePoint(He,Ne,b,f)?u.layerClipId&&p.hideOutsideRangePoint(He,Ye,b,f,rt.xcalendar,rt.ycalendar):Ye.remove()}),Ze.selectAll("text").call(p.textPointStyle,rt,a).each(function(He){var Ye=b.c2p(He.x),Ne=f.c2p(He.y);M.select(this).selectAll("tspan.line").each(function(){m(M.select(this)).attr({x:Ye,y:Ne})})}),Ze.exit().remove()}(P,D,h);var we=S.cliponaxis===!1?null:u.layerClipId;p.setClipUrl(P,we,a),p.setClipUrl(D,we,a)}function Ae(Ee){m(Ee).attr("d","M0,0Z")}function Oe(Ee){return Ee.filter(function(Be){return!Be.gap&&Be.vis})}function ze(Ee){return Ee.filter(function(Be){return Be.vis})}function pe(Ee){return Ee.filter(function(Be){return!Be.gap})}function be(Ee){return Ee.id}function ke(Ee){if(Ee.ids)return be}function Ie(){return!1}}ee.exports=function(a,l,u,h,c,x){var d,v,g=!c,y=!!c&&c.duration>0,m=i(a,l,u);(d=h.selectAll("g.trace").data(m,function(b){return b[0].trace.uid})).enter().append("g").attr("class",function(b){return"trace scatter trace"+b[0].trace.uid}).style("stroke-miterlimit",2),d.order(),function(b,f,S){f.each(function(w){var E=T(M.select(this),"g","fills");p.setClipUrl(E,S.layerClipId,b);var O=w[0].trace,C=[];O._ownfill&&C.push("_ownFill"),O._nexttrace&&C.push("_nextFill");var P=E.selectAll("g").data(C,_);P.enter().append("g"),P.exit().each(function(D){O[D]=null}).remove(),P.order().each(function(D){O[D]=T(M.select(this),"path","js-fill")})})}(a,d,l),y?(x&&(v=x()),M.transition().duration(c.duration).ease(c.easing).each("end",function(){v&&v()}).each("interrupt",function(){v&&v()}).each(function(){h.selectAll("g.trace").each(function(b,f){n(a,f,l,b,m,this,c)})})):d.each(function(b,f){n(a,f,l,b,m,this,c)}),g&&d.exit().remove(),h.selectAll("path:not([d])").remove()}},91560:function(ee,R,e){var M=e(43028);ee.exports=function(k,o){var T,_,p,s,t=k.cd,i=k.xaxis,r=k.yaxis,n=[],a=t[0].trace;if(!M.hasMarkers(a)&&!M.hasText(a))return[];if(o===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)_=t[T],p=i.c2p(_.x),s=r.c2p(_.y),_.i!==null&&o.contains([p,s],!1,T,k)?(n.push({pointNumber:_.i,x:i.c2d(_.x),y:r.c2d(_.y)}),_.selected=1):_.selected=0;return n}},43912:function(ee){var R=["orientation","groupnorm","stackgaps"];ee.exports=function(e,M,k,o){var T=k._scatterStackOpts,_=o("stackgroup");if(_){var p=M.xaxis+M.yaxis,s=T[p];s||(s=T[p]={});var t=s[_],i=!1;t?t.traces.push(M):(t=s[_]={traceIndices:[],traces:[M]},i=!0);for(var r={orientation:M.x&&!M.y?"h":"v"},n=0;n<R.length;n++){var a=R[n],l=a+"Found";if(!t[l]){var u=e[a]!==void 0,h=a==="orientation";if((u||i)&&(t[a]=o(a,r[a]),h&&(t.fillDflt=t[a]==="h"?"tonextx":"tonexty"),u&&(t[l]=!0,!i&&(delete t.traces[0][a],h))))for(var c=0;c<t.traces.length-1;c++){var x=t.traces[c];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},49224:function(ee,R,e){var M=e(33428),k=e(43616),o=e(24040);function T(p,s,t){k.pointStyle(p.selectAll("path.point"),s,t)}function _(p,s,t){k.textPointStyle(p.selectAll("text"),s,t)}ee.exports={style:function(p){var s=M.select(p).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(M.select(this),t.trace||t[0].trace,p)}),s.selectAll("g.text").each(function(t){_(M.select(this),t.trace||t[0].trace,p)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,p,!1),o.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:_,styleOnSelect:function(p,s,t){var i=s[0].trace;i.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),i),k.selectedTextStyle(t.selectAll("text"),i)):(T(t,i,p),_(t,i,p))}}},43028:function(ee,R,e){var M=e(3400),k=e(38116).isTypedArraySpec;ee.exports={hasLines:function(o){return o.visible&&o.mode&&o.mode.indexOf("lines")!==-1},hasMarkers:function(o){return o.visible&&(o.mode&&o.mode.indexOf("markers")!==-1||o.type==="splom")},hasText:function(o){return o.visible&&o.mode&&o.mode.indexOf("text")!==-1},isBubble:function(o){var T=o.marker;return M.isPlainObject(T)&&(M.isArrayOrTypedArray(T.size)||k(T.size))}}},124:function(ee,R,e){var M=e(3400);ee.exports=function(k,o,T,_,p){p=p||{},_("textposition"),M.coerceFont(_,"textfont",p.font||T.font,p),p.noSelect||(_("selected.textfont.color"),_("unselected.textfont.color"))}},43980:function(ee,R,e){var M=e(3400),k=e(24040);ee.exports=function(o,T,_,p){var s,t=p("x"),i=p("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],_),t){var r=M.minRowLength(t);i?s=Math.min(r,M.minRowLength(i)):(s=r,p("y0"),p("dy"))}else{if(!i)return 0;s=M.minRowLength(i),p("x0"),p("dx")}return T._length=s,s}},91592:function(ee,R,e){var M=e(52904),k=e(25376),o=e(49084),T=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(21776).Gw,s=e(45464),t=e(99168),i=e(87792),r=e(92880).extendFlat,n=e(67824).overrideAll,a=e(95376),l=M.line,u=M.marker,h=u.line,c=r({width:l.width,dash:{valType:"enumerated",values:a(t),dflt:"solid"}},o("line")),x=ee.exports=n({x:M.x,y:M.y,z:{valType:"data_array"},text:r({},M.text,{}),texttemplate:p({},{}),hovertext:r({},M.hovertext,{}),hovertemplate:_(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:r({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:M.connectgaps,line:c,marker:r({symbol:{valType:"enumerated",values:a(i),dflt:"circle",arrayOk:!0},size:r({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:r({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:r({width:r({},h.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:r({},M.textposition,{dflt:"top center"}),textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:s.opacity,hoverinfo:r({},s.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},41484:function(ee,R,e){var M=e(20148),k=e(90136);ee.exports=function(o,T){var _=[{x:!1,y:!1,trace:T,t:{}}];return M(_,T),k(o,T),_}},45156:function(ee,R,e){var M=e(24040);function k(o,T,_,p){if(!T||!T.visible)return null;for(var s=M.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(o.length),i=0;i<o.length;i++){var r=s(+o[i],i);if(p.type==="log"){var n=p.c2l(o[i]),a=o[i]-r[0],l=o[i]+r[1];if(t[i]=[(p.c2l(a,!0)-n)*_,(p.c2l(l,!0)-n)*_],a>0){var u=p.c2l(a);p._lowerLogErrorBound||(p._lowerLogErrorBound=u),p._lowerErrorBound=Math.min(p._lowerLogErrorBound,u)}}else t[i]=[-r[0]*_,r[1]*_]}return t}ee.exports=function(o,T,_){var p=[k(o.x,o.error_x,T[0],_.xaxis),k(o.y,o.error_y,T[1],_.yaxis),k(o.z,o.error_z,T[2],_.zaxis)],s=function(l){for(var u=0;u<l.length;u++)if(l[u])return l[u].length;return 0}(p);if(s===0)return null;for(var t=new Array(s),i=0;i<s;i++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(p[n])for(var a=0;a<2;a++)r[a][n]=p[n][i][a];t[i]=r}return t}},41064:function(ee,R,e){var M=e(67792).gl_line3d,k=e(67792).gl_scatter3d,o=e(67792).gl_error3d,T=e(67792).gl_mesh3d,_=e(67792).delaunay_triangulate,p=e(3400),s=e(43080),t=e(33040).formatColor,i=e(7152),r=e(99168),n=e(87792),a=e(54460),l=e(10624).appendArrayPointValue,u=e(45156);function h(f,S){this.scene=f,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=h.prototype;function x(f){return f==null?0:f.indexOf("left")>-1?-1:f.indexOf("right")>-1?1:0}function d(f){return f==null?0:f.indexOf("top")>-1?-1:f.indexOf("bottom")>-1?1:0}function v(f,S){return S(4*f)}function g(f){return n[f]}function y(f,S,w,E,O){var C=null;if(p.isArrayOrTypedArray(f)){C=[];for(var P=0;P<S;P++)f[P]===void 0?C[P]=E:C[P]=w(f[P],O)}else C=w(f,p.identity);return C}function m(f){if(p.isArrayOrTypedArray(f)){var S=f[0];return p.isArrayOrTypedArray(S)&&(f=S),"rgb("+f.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function b(f){return p.isArrayOrTypedArray(f)?f.length===4&&typeof f[0]=="number"?m(f):f.map(m):null}c.handlePick=function(f){if(f.object&&(f.object===this.linePlot||f.object===this.delaunayMesh||f.object===this.textMarkers||f.object===this.scatterPlot)){var S=f.index=f.data.index;return f.object.highlight&&f.object.highlight(null),this.scatterPlot&&(f.object=this.scatterPlot,this.scatterPlot.highlight(f.data)),f.textLabel="",this.textLabels&&(p.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(f.textLabel=this.textLabels[S]):f.textLabel=this.textLabels),f.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(f){var S,w,E,O,C=this.scene.glplot.gl,P=r.solid;this.data=f;var D=function(N,W){var F,j,H,te,Q,$,K=[],X=N.fullSceneLayout,Y=N.dataScale,re=X.xaxis,se=X.yaxis,ae=X.zaxis,ce=W.marker,fe=W.line,he=W.x||[],ve=W.y||[],ye=W.z||[],me=he.length,Me=W.xcalendar,Pe=W.ycalendar,ge=W.zcalendar;for(Q=0;Q<me;Q++)F=re.d2l(he[Q],0,Me)*Y[0],j=se.d2l(ve[Q],0,Pe)*Y[1],H=ae.d2l(ye[Q],0,ge)*Y[2],K[Q]=[F,j,H];if(Array.isArray(W.text))$=W.text;else if(p.isTypedArray(W.text))$=Array.from(W.text);else if(W.text!==void 0)for($=new Array(me),Q=0;Q<me;Q++)$[Q]=W.text;function oe(Be,Ve){var Ze=X[Be];return a.tickText(Ze,Ze.d2l(Ve),!0).text}var ie=W.texttemplate;if(ie){var de=N.fullLayout._d3locale,Se=Array.isArray(ie),_e=Se?Math.min(ie.length,me):me,we=Se?function(Be){return ie[Be]}:function(){return ie};for($=new Array(_e),Q=0;Q<_e;Q++){var Ae={x:he[Q],y:ve[Q],z:ye[Q]},Oe={xLabel:oe("xaxis",he[Q]),yLabel:oe("yaxis",ve[Q]),zLabel:oe("zaxis",ye[Q])},ze={};l(ze,W,Q);var pe=W._meta||{};$[Q]=p.texttemplateString(we(Q),Oe,de,ze,Ae,pe)}}if(te={position:K,mode:W.mode,text:$},"line"in W&&(te.lineColor=t(fe,1,me),te.lineWidth=fe.width,te.lineDashes=fe.dash),"marker"in W){var be=i(W);te.scatterColor=t(ce,1,me),te.scatterSize=y(ce.size,me,v,20,be),te.scatterMarker=y(ce.symbol,me,g,"●"),te.scatterLineWidth=ce.line.width,te.scatterLineColor=t(ce.line,1,me),te.scatterAngle=0}"textposition"in W&&(te.textOffset=function(Be){var Ve=[0,0];if(Array.isArray(Be))for(var Ze=0;Ze<Be.length;Ze++)Ve[Ze]=[0,0],Be[Ze]&&(Ve[Ze][0]=x(Be[Ze]),Ve[Ze][1]=d(Be[Ze]));else Ve[0]=x(Be),Ve[1]=d(Be);return Ve}(W.textposition),te.textColor=t(W.textfont,1,me),te.textSize=y(W.textfont.size,me,p.identity,12),te.textFontFamily=W.textfont.family,te.textFontWeight=W.textfont.weight,te.textFontStyle=W.textfont.style,te.textFontVariant=W.textfont.variant,te.textAngle=0);var ke=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],Q=0;Q<3;++Q){var Ie=W.projection[ke[Q]];(te.project[Q]=Ie.show)&&(te.projectOpacity[Q]=Ie.opacity,te.projectScale[Q]=Ie.scale)}te.errorBounds=u(W,Y,X);var Ee=function(Be){for(var Ve=[0,0,0],Ze=[[0,0,0],[0,0,0],[0,0,0]],rt=[1,1,1],it=0;it<3;it++){var dt=Be[it];dt&&dt.copy_zstyle!==!1&&Be[2].visible!==!1&&(dt=Be[2]),dt&&dt.visible&&(Ve[it]=dt.width/2,Ze[it]=s(dt.color),rt[it]=dt.thickness)}return{capSize:Ve,color:Ze,lineWidth:rt}}([W.error_x,W.error_y,W.error_z]);return te.errorColor=Ee.color,te.errorLineWidth=Ee.lineWidth,te.errorCapSize=Ee.capSize,te.delaunayAxis=W.surfaceaxis,te.delaunayColor=s(W.surfacecolor),te}(this.scene,f);"mode"in D&&(this.mode=D.mode),"lineDashes"in D&&D.lineDashes in r&&(P=r[D.lineDashes]),this.color=b(D.scatterColor)||b(D.lineColor),this.dataPoints=D.position,S={gl:this.scene.glplot.gl,position:D.position,color:D.lineColor,lineWidth:D.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:f.opacity,connectGaps:f.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=M(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=f.opacity;if(f.marker&&f.marker.opacity!==void 0&&(U*=f.marker.opacity),w={gl:this.scene.glplot.gl,position:D.position,color:D.scatterColor,size:D.scatterSize,glyph:D.scatterMarker,opacity:U,orthographic:!0,lineWidth:D.scatterLineWidth,lineColor:D.scatterLineColor,project:D.project,projectScale:D.projectScale,projectOpacity:D.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:D.position,glyph:D.text,color:D.textColor,size:D.textSize,angle:D.textAngle,alignment:D.textOffset,font:D.textFontFamily,fontWeight:D.textFontWeight,fontStyle:D.textFontStyle,fontVariant:D.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:f.opacity},this.textLabels=f.hovertext||f.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=k(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:D.position,color:D.errorColor,error:D.errorBounds,lineWidth:D.errorLineWidth,capSize:D.errorCapSize,opacity:f.opacity},this.errorBars?D.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):D.errorBounds&&(this.errorBars=o(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),D.delaunayAxis>=0){var I=function(N,W,F){var j,H=(F+1)%3,te=(F+2)%3,Q=[],$=[];for(j=0;j<N.length;++j){var K=N[j];!isNaN(K[H])&&isFinite(K[H])&&!isNaN(K[te])&&isFinite(K[te])&&(Q.push([K[H],K[te]]),$.push(j))}var X=_(Q);for(j=0;j<X.length;++j)for(var Y=X[j],re=0;re<Y.length;++re)Y[re]=$[Y[re]];return{positions:N,cells:X,meshColor:W}}(D.position,D.delaunayColor,D.delaunayAxis);I.opacity=f.opacity,this.delaunayMesh?this.delaunayMesh.update(I):(I.gl=C,this.delaunayMesh=T(I),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ee.exports=function(f,S){var w=new h(f,S.uid);return w.update(S),w}},83484:function(ee,R,e){var M=e(24040),k=e(3400),o=e(43028),T=e(74428),_=e(66828),p=e(124),s=e(91592);ee.exports=function(t,i,r,n){function a(g,y){return k.coerce(t,i,s,g,y)}var l=function(g,y,m,b){var f=0,S=m("x"),w=m("y"),E=m("z");return M.getComponentMethod("calendars","handleTraceDefaults")(g,y,["x","y","z"],b),S&&w&&E&&(f=Math.min(S.length,w.length,E.length),y._length=y._xlength=y._ylength=y._zlength=f),f}(t,i,a,n);if(l){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),o.hasMarkers(i)&&T(t,i,r,n,a,{noSelect:!0,noAngle:!0}),o.hasLines(i)&&(a("connectgaps"),_(t,i,r,n,a)),o.hasText(i)&&(a("texttemplate"),p(t,i,n,a,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var u=(i.line||{}).color,h=(i.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",u||h);for(var c=["x","y","z"],x=0;x<3;++x){var d="projection."+c[x];a(d+".show")&&(a(d+".opacity"),a(d+".scale"))}var v=M.getComponentMethod("errorbars","supplyDefaults");v(t,i,u||h||r,{axis:"z"}),v(t,i,u||h||r,{axis:"y",inherit:"z"}),v(t,i,u||h||r,{axis:"x",inherit:"z"})}else i.visible=!1}},3296:function(ee,R,e){ee.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(ee,R,e){var M=e(98304),k=e(52904),o=e(45464),T=e(21776).Ks,_=e(21776).Gw,p=e(49084),s=e(92880).extendFlat,t=k.marker,i=k.line,r=t.line;ee.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:s({},k.mode,{dflt:"markers"}),text:s({},k.text,{}),texttemplate:_({editType:"plot"},{keys:["a","b","text"]}),hovertext:s({},k.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:s({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:s({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M(),marker:s({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:r.width,editType:"calc"},p("marker.line")),gradient:t.gradient,editType:"calc"},p("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:s({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:T(),zorder:k.zorder}},48228:function(ee,R,e){var M=e(38248),k=e(90136),o=e(20148),T=e(4500),_=e(16356).calcMarkerSize,p=e(50948);ee.exports=function(s,t){var i=t._carpetTrace=p(s,t);if(i&&i.visible&&i.visible!=="legendonly"){var r;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var n,a,l=t._length,u=new Array(l),h=!1;for(r=0;r<l;r++)if(n=t.a[r],a=t.b[r],M(n)&&M(a)){var c=i.ab2xy(+n,+a,!0),x=i.isVisible(+n,+a);x||(h=!0),u[r]={x:c[0],y:c[1],a:n,b:a,vis:x}}else u[r]={x:!1,y:!1};return t._needsCull=h,u[0].carpet=i,u[0].trace=t,_(t,l),k(s,t),o(u,t),T(u,t),u}}},6176:function(ee,R,e){var M=e(3400),k=e(88200),o=e(43028),T=e(74428),_=e(66828),p=e(11731),s=e(124),t=e(70840),i=e(90372);ee.exports=function(r,n,a,l){function u(v,g){return M.coerce(r,n,i,v,g)}u("carpet"),n.xaxis="x",n.yaxis="y";var h=u("a"),c=u("b"),x=Math.min(h.length,c.length);if(x){n._length=x,u("text"),u("texttemplate"),u("hovertext"),u("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(n)&&T(r,n,a,l,u,{gradient:!0}),o.hasLines(n)&&(_(r,n,a,l,u,{backoff:!0}),p(r,n,u),u("connectgaps")),o.hasText(n)&&s(r,n,l,u);var d=[];(o.hasMarkers(n)||o.hasText(n))&&(u("marker.maxdisplayed"),d.push("points")),u("fill"),n.fill!=="none"&&(t(r,n,a,u),o.hasLines(n)||p(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||d.push("fills"),u("hoveron",d.join("+")||"points")!=="fills"&&u("hovertemplate"),u("zorder"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},89307:function(ee){ee.exports=function(R,e,M,k,o){var T=k[o];return R.a=T.a,R.b=T.b,R.y=T.y,R}},52364:function(ee){ee.exports=function(R,e){var M={},k=e._carpet,o=k.ab2ij([R.a,R.b]),T=Math.floor(o[0]),_=o[0]-T,p=Math.floor(o[1]),s=o[1]-p,t=k.evalxy([],T,p,_,s);return M.yLabel=t[1].toFixed(3),M}},58960:function(ee,R,e){var M=e(98723),k=e(3400).fillText;ee.exports=function(o,T,_,p){var s=M(o,T,_,p);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var i=1-t.y0/o.ya._length,r=o.xa._length,n=r*i/2,a=r-n;return t.x0=Math.max(Math.min(t.x0,a),n),t.x1=Math.max(Math.min(t.x1,a),n),s}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,h=u._carpet,c=u._module.formatLabels(l,u);t.yLabel=c.yLabel,delete t.text;var x=[];if(!u.hovertemplate){var d=(l.hi||u.hoverinfo).split("+");d.indexOf("all")!==-1&&(d=["a","b","text"]),d.indexOf("a")!==-1&&v(h.aaxis,l.a),d.indexOf("b")!==-1&&v(h.baxis,l.b),x.push("y: "+t.yLabel),d.indexOf("text")!==-1&&k(l,u,x),t.extraText=x.join("<br>")}return s}function v(g,y){var m;m=g.labelprefix&&g.labelprefix.length>0?g.labelprefix.replace(/ = $/,""):g._hovertitle,x.push(m+": "+y.toFixed(3)+g.labelsuffix)}}},4184:function(ee,R,e){ee.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(ee,R,e){var M=e(96504),k=e(54460),o=e(43616);ee.exports=function(T,_,p,s){var t,i,r,n=p[0][0].carpet,a=k.getFromId(T,n.xaxis||"x"),l=k.getFromId(T,n.yaxis||"y"),u={xaxis:a,yaxis:l,plot:_.plot};for(t=0;t<p.length;t++)(i=p[t][0].trace)._xA=a,i._yA=l;for(M(T,u,p,s),t=0;t<p.length;t++)i=p[t][0].trace,r=s.selectAll("g.trace"+i.uid+" .js-line"),o.setClipUrl(r,p[t][0].carpet._clipPathId,T)}},6096:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),_=e(45464),p=e(49084),s=e(98192).u,t=e(92880).extendFlat,i=e(67824).overrideAll,r=T.marker,n=T.line,a=r.line;ee.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:n.color,width:n.width,dash:s},connectgaps:T.connectgaps,marker:t({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:t({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:t({width:a.width},p("marker.line")),gradient:r.gradient},p("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:o(),selected:T.selected,unselected:T.unselected,hoverinfo:t({},_.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},25212:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),_=e(4500),p=e(3400).isArrayOrTypedArray,s=e(3400)._;function t(i){return i&&typeof i=="string"}ee.exports=function(i,r){var n,a=p(r.locations),l=a?r.locations.length:r._length,u=new Array(l);n=r.geojson?function(g){return t(g)||M(g)}:t;for(var h=0;h<l;h++){var c=u[h]={};if(a){var x=r.locations[h];c.loc=n(x)?x:null}else{var d=r.lon[h],v=r.lat[h];M(d)&&M(v)?c.lonlat=[+d,+v]:c.lonlat=[k,k]}}return T(u,r),o(i,r),_(u,r),l&&(u[0].t={labels:{lat:s(i,"lat:")+" ",lon:s(i,"lon:")+" "}}),u}},86188:function(ee,R,e){var M=e(3400),k=e(43028),o=e(74428),T=e(66828),_=e(124),p=e(70840),s=e(6096);ee.exports=function(t,i,r,n){function a(v,g){return M.coerce(t,i,s,v,g)}var l,u=a("locations");if(u&&u.length){var h,c=a("geojson");(typeof c=="string"&&c!==""||M.isPlainObject(c))&&(h="geojson-id"),a("locationmode",h)==="geojson-id"&&a("featureidkey"),l=u.length}else{var x=a("lon")||[],d=a("lat")||[];l=Math.min(x.length,d.length)}l?(i._length=l,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasMarkers(i)&&o(t,i,r,n,a,{gradient:!0}),k.hasLines(i)&&(T(t,i,r,n,a),a("connectgaps")),k.hasText(i)&&(a("texttemplate"),_(t,i,n,a)),a("fill"),i.fill!=="none"&&p(t,i,r,a),M.coerceSelectionMarkerOpacity(i,a)):i.visible=!1}},58544:function(ee){ee.exports=function(R,e,M,k,o){R.lon=e.lon,R.lat=e.lat,R.location=e.loc?e.loc:null;var T=k[o];return T.fIn&&T.fIn.properties&&(R.properties=T.fIn.properties),R}},56696:function(ee,R,e){var M=e(54460);ee.exports=function(k,o,T){var _={},p=T[o.geo]._subplot.mockAxis,s=k.lonlat;return _.lonLabel=M.tickText(p,p.c2l(s[0]),!0).text,_.latLabel=M.tickText(p,p.c2l(s[1]),!0).text,_}},64292:function(ee,R,e){var M=e(93024),k=e(39032).BADNUM,o=e(44928),T=e(3400).fillText,_=e(6096);ee.exports=function(p,s,t){var i=p.cd,r=i[0].trace,n=p.xa,a=p.ya,l=p.subplot,u=l.projection.isLonLatOverEdges,h=l.project;if(M.getClosest(i,function(m){var b=m.lonlat;if(b[0]===k||u(b))return 1/0;var f=h(b),S=h([s,t]),w=Math.abs(f[0]-S[0]),E=Math.abs(f[1]-S[1]),O=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-O,1-3/O)},p),p.index!==!1){var c=i[p.index],x=c.lonlat,d=[n.c2p(x),a.c2p(x)],v=c.mrc||1;p.x0=d[0]-v,p.x1=d[0]+v,p.y0=d[1]-v,p.y1=d[1]+v,p.loc=c.loc,p.lon=x[0],p.lat=x[1];var g={};g[r.geo]={_subplot:l};var y=r._module.formatLabels(c,r,g);return p.lonLabel=y.lonLabel,p.latLabel=y.latLabel,p.color=o(r,c),p.extraText=function(m,b,f,S){if(!m.hovertemplate){var w=b.hi||m.hoverinfo,E=w==="all"?_.hoverinfo.flags:w.split("+"),O=E.indexOf("location")!==-1&&Array.isArray(m.locations),C=E.indexOf("lon")!==-1,P=E.indexOf("lat")!==-1,D=E.indexOf("text")!==-1,U=[];return O?U.push(b.loc):C&&P?U.push("("+I(f.latLabel)+", "+I(f.lonLabel)+")"):C?U.push(S.lon+I(f.lonLabel)):P&&U.push(S.lat+I(f.latLabel)),D&&T(b,m,U),U.join("<br>")}function I(N){return N+"°"}}(r,c,p,i[0].t.labels),p.hovertemplate=r.hovertemplate,[p]}}},36952:function(ee,R,e){ee.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(ee,R,e){var M=e(33428),k=e(3400),o=e(59972).getTopojsonFeatures,T=e(44808),_=e(27144),p=e(19280).findExtremes,s=e(39032).BADNUM,t=e(16356).calcMarkerSize,i=e(43028),r=e(25064);ee.exports={calcGeoJSON:function(n,a){var l,u,h=n[0].trace,c=a[h.geo],x=c._subplot,d=h._length;if(k.isArrayOrTypedArray(h.locations)){var v=h.locationmode,g=v==="geojson-id"?_.extractTraceFeature(n):o(h,x.topojson);for(l=0;l<d;l++){u=n[l];var y=v==="geojson-id"?u.fOut:_.locationToFeature(v,u.loc,g);u.lonlat=y?y.properties.ct:[s,s]}}var m,b,f={padded:!0};if(c.fitbounds==="geojson"&&h.locationmode==="geojson-id"){var S=_.computeBbox(_.getTraceGeojson(h));m=[S[0],S[2]],b=[S[1],S[3]]}else{for(m=new Array(d),b=new Array(d),l=0;l<d;l++)u=n[l],m[l]=u.lonlat[0],b[l]=u.lonlat[1];f.ppad=t(h,d)}h._extremes.lon=p(c.lonaxis._ax,m,f),h._extremes.lat=p(c.lataxis._ax,b,f)},plot:function(n,a,l){var u=a.layers.frontplot.select(".scatterlayer"),h=k.makeTraceGroups(u,l,"trace scattergeo");function c(x,d){x.lonlat[0]===s&&M.select(d).remove()}h.selectAll("*").remove(),h.each(function(x){var d=M.select(this),v=x[0].trace;if(i.hasLines(v)||v.fill!=="none"){var g=T.calcTraceToLineCoords(x),y=v.fill!=="none"?T.makePolygon(g):T.makeLine(g);d.selectAll("path.js-line").data([{geojson:y,trace:v}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(v)&&d.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(m){c(m,this)}),i.hasText(v)&&d.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(m){c(m,this)}),r(n,x)})}}},8796:function(ee,R,e){var M=e(43028),k=e(39032).BADNUM;ee.exports=function(o,T){var _,p,s,t,i,r=o.cd,n=o.xaxis,a=o.yaxis,l=[],u=r[0].trace;if(!M.hasMarkers(u)&&!M.hasText(u))return[];if(T===!1)for(i=0;i<r.length;i++)r[i].selected=0;else for(i=0;i<r.length;i++)(p=(_=r[i]).lonlat)[0]!==k&&(s=n.c2p(p),t=a.c2p(p),T.contains([s,t],null,i,o)?(l.push({pointNumber:i,lon:p[0],lat:p[1]}),_.selected=1):_.selected=0);return l}},25064:function(ee,R,e){var M=e(33428),k=e(43616),o=e(76308),T=e(49224),_=T.stylePoints,p=T.styleText;ee.exports=function(s,t){t&&function(i,r){var n=r[0].trace,a=r[0].node3;a.style("opacity",r[0].trace.opacity),_(a,n,i),p(a,n,i),a.selectAll("path.js-line").style("fill","none").each(function(l){var u=M.select(this),h=l.trace,c=h.line||{};u.call(o.stroke,c.color).call(k.dashLine,c.dash||"",c.width||0),h.fill!=="none"&&u.call(o.fill,h.fillcolor)})}(s,t)}},2876:function(ee,R,e){var M=e(45464),k=e(25376),o=e(98304),T=e(52904),_=e(29736).axisHoverFormat,p=e(49084),s=e(95376),t=e(92880).extendFlat,i=e(67824).overrideAll,r=e(67072).DASHES,n=T.line,a=T.marker,l=a.line,u=ee.exports=i({x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),text:T.text,hovertext:T.hovertext,textposition:T.textposition,textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:s(r),dflt:"solid"}},marker:t({},p("marker"),{symbol:a.symbol,angle:a.angle,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:t({},p("marker.line"),{width:l.width})}),connectgaps:T.connectgaps,fill:t({},T.fill,{dflt:"none"}),fillcolor:o(),selected:{marker:T.selected.marker,textfont:T.selected.textfont},unselected:{marker:T.unselected.marker,textfont:T.unselected.textfont},opacity:M.opacity},"calc","nested");u.x.editType=u.y.editType=u.x0.editType=u.y0.editType="calc+clearAxisTypes",u.hovertemplate=T.hovertemplate,u.texttemplate=T.texttemplate},64628:function(ee,R,e){var M=e(41272);ee.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:M.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(ee,R,e){var M=e(3108),k=e(3400),o=e(79811),T=e(19280).findExtremes,_=e(1220),p=e(16356),s=p.calcMarkerSize,t=p.calcAxisExpansion,i=p.setFirstScatter,r=e(90136),n=e(84236),a=e(74588),l=e(39032).BADNUM,u=e(67072).TOO_MANY_POINTS;function h(c,x,d){var v=c._extremes[x._id],g=T(x,d._bnds,{padded:!0});v.min=v.min.concat(g.min),v.max=v.max.concat(g.max)}ee.exports=function(c,x){var d,v=c._fullLayout,g=x._xA=o.getFromId(c,x.xaxis,"x"),y=x._yA=o.getFromId(c,x.yaxis,"y"),m=v._plots[x.xaxis+x.yaxis],b=x._length,f=b>=u,S=2*b,w={},E=g.makeCalcdata(x,"x"),O=y.makeCalcdata(x,"y"),C=_(x,g,"x",E),P=_(x,y,"y",O),D=C.vals,U=P.vals;x._x=D,x._y=U,x.xperiodalignment&&(x._origX=E,x._xStarts=C.starts,x._xEnds=C.ends),x.yperiodalignment&&(x._origY=O,x._yStarts=P.starts,x._yEnds=P.ends);var I=new Array(S),N=new Array(b);for(d=0;d<b;d++)I[2*d]=D[d]===l?NaN:D[d],I[2*d+1]=U[d]===l?NaN:U[d],N[d]=d;if(g.type==="log")for(d=0;d<S;d+=2)I[d]=g.c2l(I[d]);if(y.type==="log")for(d=1;d<S;d+=2)I[d]=y.c2l(I[d]);f&&g.type!=="log"&&y.type!=="log"?w.tree=M(I):w.ids=N,r(c,x);var W,F=function(H,te,Q,$,K,X){var Y=n.style(H,Q);if(Y.marker&&(Y.marker.positions=$),Y.line&&$.length>1&&k.extendFlat(Y.line,n.linePositions(H,Q,$)),Y.errorX||Y.errorY){var re=n.errorBarPositions(H,Q,$,K,X);Y.errorX&&k.extendFlat(Y.errorX,re.x),Y.errorY&&k.extendFlat(Y.errorY,re.y)}return Y.text&&(k.extendFlat(Y.text,{positions:$},n.textPosition(H,Q,Y.text,Y.marker)),k.extendFlat(Y.textSel,{positions:$},n.textPosition(H,Q,Y.text,Y.markerSel)),k.extendFlat(Y.textUnsel,{positions:$},n.textPosition(H,Q,Y.text,Y.markerUnsel))),Y}(c,0,x,I,D,U),j=a(c,m);return i(v,x),f?F.marker&&(W=F.marker.sizeAvg||Math.max(F.marker.size,3)):W=s(x,b),t(c,x,g,y,D,U,W),F.errorX&&h(x,g,F.errorX),F.errorY&&h(x,y,F.errorY),F.fill&&!j.fill2d&&(j.fill2d=!0),F.marker&&!j.scatter2d&&(j.scatter2d=!0),F.line&&!j.line2d&&(j.line2d=!0),!F.errorX&&!F.errorY||j.error2d||(j.error2d=!0),F.text&&!j.glText&&(j.glText=!0),F.marker&&(F.marker.snap=b),j.lineOptions.push(F.line),j.errorXOptions.push(F.errorX),j.errorYOptions.push(F.errorY),j.fillOptions.push(F.fill),j.markerOptions.push(F.marker),j.markerSelectedOptions.push(F.markerSel),j.markerUnselectedOptions.push(F.markerUnsel),j.textOptions.push(F.text),j.textSelectedOptions.push(F.textSel),j.textUnselectedOptions.push(F.textUnsel),j.selectBatch.push([]),j.unselectBatch.push([]),w._scene=j,w.index=j.count,w.x=D,w.y=U,w.positions=I,j.count++,[{x:!1,y:!1,t:w,trace:x}]}},67072:function(ee){ee.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(ee,R,e){var M=e(38248),k=e(20472),o=e(72160),T=e(24040),_=e(3400),p=_.isArrayOrTypedArray,s=e(43616),t=e(79811),i=e(33040).formatColor,r=e(43028),n=e(7152),a=e(80088),l=e(67072),u=e(13448).DESELECTDIM,h={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},c=e(10624).appendArrayPointValue;function x(C,P){var D,U=C._fullLayout,I=P._length,N=P.textfont,W=P.textposition,F=p(W)?W:[W],j=N.color,H=N.size,te=N.family,Q=N.weight,$=N.style,K=N.variant,X={},Y=C._context.plotGlPixelRatio,re=P.texttemplate;if(re){X.text=[];var se=U._d3locale,ae=Array.isArray(re),ce=ae?Math.min(re.length,I):I,fe=ae?function(ge){return re[ge]}:function(){return re};for(D=0;D<ce;D++){var he={i:D},ve=P._module.formatLabels(he,P,U),ye={};c(ye,P,D);var me=P._meta||{};X.text.push(_.texttemplateString(fe(D),ve,se,ye,he,me))}}else p(P.text)&&P.text.length<I?X.text=P.text.slice():X.text=P.text;if(p(X.text))for(D=X.text.length;D<I;D++)X.text[D]="";for(X.opacity=P.opacity,X.font={},X.align=[],X.baseline=[],D=0;D<F.length;D++){var Me=F[D].split(/\s+/);switch(Me[1]){case"left":X.align.push("right");break;case"right":X.align.push("left");break;default:X.align.push(Me[1])}switch(Me[0]){case"top":X.baseline.push("bottom");break;case"bottom":X.baseline.push("top");break;default:X.baseline.push(Me[0])}}if(p(j))for(X.color=new Array(I),D=0;D<I;D++)X.color[D]=j[D];else X.color=j;if(p(H)||Array.isArray(te)||p(Q)||Array.isArray($)||Array.isArray(K))for(X.font=new Array(I),D=0;D<I;D++){var Pe=X.font[D]={};Pe.size=(_.isTypedArray(H)?H[D]:p(H)?M(H[D])?H[D]:0:H)*Y,Pe.family=Array.isArray(te)?te[D]:te,Pe.weight=d(p(Q)?Q[D]:Q),Pe.style=Array.isArray($)?$[D]:$,Pe.variant=Array.isArray(K)?K[D]:K}else X.font={size:H*Y,family:te,weight:d(Q),style:$,variant:K};return X}function d(C){return C<=1e3?C>500?"bold":"normal":C}function v(C,P){var D,U,I=P._length,N=P.marker,W={},F=p(N.symbol),j=p(N.angle),H=p(N.color),te=p(N.line.color),Q=p(N.opacity),$=p(N.size),K=p(N.line.width);if(F||(U=a.isOpenSymbol(N.symbol)),F||H||te||Q||j){W.symbols=new Array(I),W.angles=new Array(I),W.colors=new Array(I),W.borderColors=new Array(I);var X=N.symbol,Y=N.angle,re=i(N,N.opacity,I),se=i(N.line,N.opacity,I);if(!p(se[0])){var ae=se;for(se=Array(I),D=0;D<I;D++)se[D]=ae}if(!p(re[0])){var ce=re;for(re=Array(I),D=0;D<I;D++)re[D]=ce}if(!p(X)){var fe=X;for(X=Array(I),D=0;D<I;D++)X[D]=fe}if(!p(Y)){var he=Y;for(Y=Array(I),D=0;D<I;D++)Y[D]=he}for(W.symbols=X,W.angles=Y,W.colors=re,W.borderColors=se,D=0;D<I;D++)F&&(U=a.isOpenSymbol(N.symbol[D])),U&&(se[D]=re[D].slice(),re[D]=re[D].slice(),re[D][3]=0);for(W.opacity=P.opacity,W.markers=new Array(I),D=0;D<I;D++)W.markers[D]=O({mx:W.symbols[D],ma:W.angles[D]},P)}else U?(W.color=o(N.color,"uint8"),W.color[3]=0,W.borderColor=o(N.color,"uint8")):(W.color=o(N.color,"uint8"),W.borderColor=o(N.line.color,"uint8")),W.opacity=P.opacity*N.opacity,W.marker=O({mx:N.symbol,ma:N.angle},P);var ve,ye=n(P,1);if($||K){var me,Me=W.sizes=new Array(I),Pe=W.borderSizes=new Array(I),ge=0;if($){for(D=0;D<I;D++)Me[D]=ye(N.size[D]),ge+=Me[D];me=ge/I}else for(ve=ye(N.size),D=0;D<I;D++)Me[D]=ve;if(K)for(D=0;D<I;D++)Pe[D]=N.line.width[D];else for(ve=N.line.width,D=0;D<I;D++)Pe[D]=ve;W.sizeAvg=me}else W.size=ye(N&&N.size||10),W.borderSizes=ye(N.line.width);return W}function g(C,P,D){var U=P.marker,I={};return D&&(D.marker&&D.marker.symbol?I=v(0,_.extendFlat({},U,D.marker)):D.marker&&(D.marker.size&&(I.size=D.marker.size),D.marker.color&&(I.colors=D.marker.color),D.marker.opacity!==void 0&&(I.opacity=D.marker.opacity))),I}function y(C,P,D){var U={};if(!D)return U;if(D.textfont){var I={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:_.extendFlat({},P.textfont)};D.textfont&&_.extendFlat(I.textfont,D.textfont),U=x(C,I)}return U}function m(C,P,D){var U={capSize:2*P.width*D,lineWidth:P.thickness*D,color:P.color};return P.copy_ystyle&&(U=C.error_y),U}var b=l.SYMBOL_SDF_SIZE,f=l.SYMBOL_SIZE,S=l.SYMBOL_STROKE,w={},E=s.symbolFuncs[0](.05*f);function O(C,P){var D,U,I=C.mx;if(I==="circle")return null;var N=s.symbolNumber(I),W=s.symbolFuncs[N%100],F=!!s.symbolNoDot[N%100],j=!!s.symbolNoFill[N%100],H=a.isDotSymbol(I);if(C.ma&&(I+="_"+C.ma),w[I])return w[I];var te=s.getMarkerAngle(C,P);return D=H&&!F?W(1.1*f,te)+E:W(f,te),U=k(D,{w:b,h:b,viewBox:[-f,-f,f,f],stroke:j?S:-S}),w[I]=U,U||null}ee.exports={style:function(C,P){var D,U={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},I=C._context.plotGlPixelRatio;if(P.visible!==!0)return U;if(r.hasText(P)&&(U.text=x(C,P),U.textSel=y(C,P,P.selected),U.textUnsel=y(C,P,P.unselected)),r.hasMarkers(P)&&(U.marker=v(0,P),U.markerSel=g(0,P,P.selected),U.markerUnsel=g(0,P,P.unselected),!P.unselected&&p(P.marker.opacity))){var N=P.marker.opacity;for(U.markerUnsel.opacity=new Array(N.length),D=0;D<N.length;D++)U.markerUnsel.opacity[D]=u*N[D]}if(r.hasLines(P)){U.line={overlay:!0,thickness:P.line.width*I,color:P.line.color,opacity:P.opacity};var W=(l.DASHES[P.line.dash]||[1]).slice();for(D=0;D<W.length;++D)W[D]*=P.line.width*I;U.line.dashes=W}return P.error_x&&P.error_x.visible&&(U.errorX=m(P,P.error_x,I)),P.error_y&&P.error_y.visible&&(U.errorY=m(P,P.error_y,I)),P.fill&&P.fill!=="none"&&(U.fill={closed:!0,fill:P.fillcolor,thickness:0}),U},markerStyle:v,markerSelection:g,linePositions:function(C,P,D){var U,I,N=D.length,W=N/2;if(r.hasLines(P)&&W)if(P.line.shape==="hv"){for(U=[],I=0;I<W-1;I++)isNaN(D[2*I])||isNaN(D[2*I+1])?U.push(NaN,NaN,NaN,NaN):(U.push(D[2*I],D[2*I+1]),isNaN(D[2*I+2])||isNaN(D[2*I+3])?U.push(NaN,NaN):U.push(D[2*I+2],D[2*I+1]));U.push(D[N-2],D[N-1])}else if(P.line.shape==="hvh"){for(U=[],I=0;I<W-1;I++)if(isNaN(D[2*I])||isNaN(D[2*I+1])||isNaN(D[2*I+2])||isNaN(D[2*I+3]))isNaN(D[2*I])||isNaN(D[2*I+1])?U.push(NaN,NaN):U.push(D[2*I],D[2*I+1]),U.push(NaN,NaN);else{var F=(D[2*I]+D[2*I+2])/2;U.push(D[2*I],D[2*I+1],F,D[2*I+1],F,D[2*I+3])}U.push(D[N-2],D[N-1])}else if(P.line.shape==="vhv"){for(U=[],I=0;I<W-1;I++)if(isNaN(D[2*I])||isNaN(D[2*I+1])||isNaN(D[2*I+2])||isNaN(D[2*I+3]))isNaN(D[2*I])||isNaN(D[2*I+1])?U.push(NaN,NaN):U.push(D[2*I],D[2*I+1]),U.push(NaN,NaN);else{var j=(D[2*I+1]+D[2*I+3])/2;U.push(D[2*I],D[2*I+1],D[2*I],j,D[2*I+2],j)}U.push(D[N-2],D[N-1])}else if(P.line.shape==="vh"){for(U=[],I=0;I<W-1;I++)isNaN(D[2*I])||isNaN(D[2*I+1])?U.push(NaN,NaN,NaN,NaN):(U.push(D[2*I],D[2*I+1]),isNaN(D[2*I+2])||isNaN(D[2*I+3])?U.push(NaN,NaN):U.push(D[2*I],D[2*I+3]));U.push(D[N-2],D[N-1])}else U=D;var H=!1;for(I=0;I<U.length;I++)if(isNaN(U[I])){H=!0;break}var te=H||U.length>l.TOO_MANY_POINTS||r.hasMarkers(P)?"rect":"round";if(H&&P.connectgaps){var Q=U[0],$=U[1];for(I=0;I<U.length;I+=2)isNaN(U[I])||isNaN(U[I+1])?(U[I]=Q,U[I+1]=$):(Q=U[I],$=U[I+1])}return{join:te,positions:U}},errorBarPositions:function(C,P,D,U,I){var N=T.getComponentMethod("errorbars","makeComputeError"),W=t.getFromId(C,P.xaxis,"x"),F=t.getFromId(C,P.yaxis,"y"),j=D.length/2,H={};function te(Q,$){var K=$._id.charAt(0),X=P["error_"+K];if(X&&X.visible&&($.type==="linear"||$.type==="log")){for(var Y=N(X),re={x:0,y:1}[K],se={x:[0,1,2,3],y:[2,3,0,1]}[K],ae=new Float64Array(4*j),ce=1/0,fe=-1/0,he=0,ve=0;he<j;he++,ve+=4){var ye=Q[he];if(M(ye)){var me=D[2*he+re],Me=Y(ye,he),Pe=Me[0],ge=Me[1];if(M(Pe)&&M(ge)){var oe=ye-Pe,ie=ye+ge;ae[ve+se[0]]=me-$.c2l(oe),ae[ve+se[1]]=$.c2l(ie)-me,ae[ve+se[2]]=0,ae[ve+se[3]]=0,ce=Math.min(ce,ye-Pe),fe=Math.max(fe,ye+ge)}}}H[K]={positions:D,errors:ae,_bnds:[ce,fe]}}}return te(U,W),te(I,F),H},textPosition:function(C,P,D,U){var I,N=P._length,W={};if(r.hasMarkers(P)){var F=D.font,j=D.align,H=D.baseline;for(W.offset=new Array(N),I=0;I<N;I++){var te=U.sizes?U.sizes[I]:U.size,Q=p(F)?F[I].size:F.size,$=p(j)?j.length>1?j[I]:j[0]:j,K=p(H)?H.length>1?H[I]:H[0]:H,X=h[$],Y=h[K],re=te?te/.8+1:0,se=-Y*re-.5*Y;W.offset[I]=[X*re/Q,se/Q]}}return W}}},80220:function(ee,R,e){var M=e(3400),k=e(24040),o=e(80088),T=e(2876),_=e(88200),p=e(43028),s=e(43980),t=e(31147),i=e(74428),r=e(66828),n=e(70840),a=e(124);ee.exports=function(l,u,h,c){function x(S,w){return M.coerce(l,u,T,S,w)}var d=!!l.marker&&o.isOpenSymbol(l.marker.symbol),v=p.isBubble(l),g=s(l,u,c,x);if(g){t(l,u,c,x),x("xhoverformat"),x("yhoverformat");var y=g<_.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",y),p.hasMarkers(u)&&(i(l,u,h,c,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",d||v?1:0)),p.hasLines(u)&&(x("connectgaps"),r(l,u,h,c,x),x("line.shape")),p.hasText(u)&&(x("texttemplate"),a(l,u,c,x,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var m=(u.line||{}).color,b=(u.marker||{}).color;x("fill"),u.fill!=="none"&&n(l,u,h,x);var f=k.getComponentMethod("errorbars","supplyDefaults");f(l,u,m||b||h,{axis:"y"}),f(l,u,m||b||h,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1}},26768:function(ee,R,e){var M=e(3400),k=e(76308),o=e(13448).DESELECTDIM;ee.exports={styleTextSelection:function(T){var _,p,s=T[0],t=s.trace,i=s.t,r=i._scene,n=i.index,a=r.selectBatch[n],l=r.unselectBatch[n],u=r.textOptions[n],h=r.textSelectedOptions[n]||{},c=r.textUnselectedOptions[n]||{},x=M.extendFlat({},u);if(a.length||l.length){var d=h.color,v=c.color,g=u.color,y=M.isArrayOrTypedArray(g);for(x.color=new Array(t._length),_=0;_<a.length;_++)p=a[_],x.color[p]=d||(y?g[p]:g);for(_=0;_<l.length;_++){p=l[_];var m=y?g[p]:g;x.color[p]=v||(d?m:k.addOpacity(m,o))}}r.glText[n].update(x)}}},99396:function(ee,R,e){var M=e(76688);ee.exports=function(k,o,T){var _=k.i;return"x"in k||(k.x=o._x[_]),"y"in k||(k.y=o._y[_]),M(k,o,T)}},80088:function(ee,R,e){var M=e(67072);R.isOpenSymbol=function(k){return typeof k=="string"?M.OPEN_RE.test(k):k%200>100},R.isDotSymbol=function(k){return typeof k=="string"?M.DOT_RE.test(k):k>200}},41272:function(ee,R,e){var M=e(24040),k=e(3400),o=e(44928);function T(_,p,s,t){var i=_.xa,r=_.ya,n=_.distance,a=_.dxy,l=_.index,u={pointNumber:l,x:p[l],y:s[l]};u.tx=k.isArrayOrTypedArray(t.text)?t.text[l]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var h=t.textfont;h&&(u.ts=k.isArrayOrTypedArray(h.size)?h.size[l]:h.size,u.tc=k.isArrayOrTypedArray(h.color)?h.color[l]:h.color,u.tf=Array.isArray(h.family)?h.family[l]:h.family,u.tw=Array.isArray(h.weight)?h.weight[l]:h.weight,u.ty=Array.isArray(h.style)?h.style[l]:h.style,u.tv=Array.isArray(h.variant)?h.variant[l]:h.variant);var c=t.marker;c&&(u.ms=k.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=k.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=k.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.ma=k.isArrayOrTypedArray(c.angle)?c.angle[l]:c.angle,u.mc=k.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var x=c&&c.line;x&&(u.mlc=Array.isArray(x.color)?x.color[l]:x.color,u.mlw=k.isArrayOrTypedArray(x.width)?x.width[l]:x.width);var d=c&&c.gradient;d&&d.type!=="none"&&(u.mgt=Array.isArray(d.type)?d.type[l]:d.type,u.mgc=Array.isArray(d.color)?d.color[l]:d.color);var v=i.c2p(u.x,!0),g=r.c2p(u.y,!0),y=u.mrc||1,m=t.hoverlabel;m&&(u.hbg=Array.isArray(m.bgcolor)?m.bgcolor[l]:m.bgcolor,u.hbc=Array.isArray(m.bordercolor)?m.bordercolor[l]:m.bordercolor,u.hts=k.isArrayOrTypedArray(m.font.size)?m.font.size[l]:m.font.size,u.htc=Array.isArray(m.font.color)?m.font.color[l]:m.font.color,u.htf=Array.isArray(m.font.family)?m.font.family[l]:m.font.family,u.hnl=k.isArrayOrTypedArray(m.namelength)?m.namelength[l]:m.namelength);var b=t.hoverinfo;b&&(u.hi=Array.isArray(b)?b[l]:b);var f=t.hovertemplate;f&&(u.ht=Array.isArray(f)?f[l]:f);var S={};S[_.index]=u;var w=t._origX,E=t._origY,O=k.extendFlat({},_,{color:o(t,u),x0:v-y,x1:v+y,xLabelVal:w?w[l]:u.x,y0:g-y,y1:g+y,yLabelVal:E?E[l]:u.y,cd:S,distance:n,spikeDistance:a,hovertemplate:u.ht});return u.htx?O.text=u.htx:u.tx?O.text=u.tx:t.text&&(O.text=t.text),k.fillText(u,t,O),M.getComponentMethod("errorbars","hoverInfo")(u,t,O),O}ee.exports={hoverPoints:function(_,p,s,t){var i,r,n,a,l,u,h,c,x,d,v=_.cd,g=v[0].t,y=v[0].trace,m=_.xa,b=_.ya,f=g.x,S=g.y,w=m.c2p(p),E=b.c2p(s),O=_.distance;if(g.tree){var C=m.p2c(w-O),P=m.p2c(w+O),D=b.p2c(E-O),U=b.p2c(E+O);i=t==="x"?g.tree.range(Math.min(C,P),Math.min(b._rl[0],b._rl[1]),Math.max(C,P),Math.max(b._rl[0],b._rl[1])):g.tree.range(Math.min(C,P),Math.min(D,U),Math.max(C,P),Math.max(D,U))}else i=g.ids;var I=O;if(t==="x"){var N=!!y.xperiodalignment,W=!!y.yperiodalignment;for(u=0;u<i.length;u++){if(a=f[r=i[u]],h=Math.abs(m.c2p(a)-w),N){var F=m.c2p(y._xStarts[r]),j=m.c2p(y._xEnds[r]);h=w>=Math.min(F,j)&&w<=Math.max(F,j)?0:1/0}if(h<I){if(I=h,l=S[r],c=b.c2p(l)-E,W){var H=b.c2p(y._yStarts[r]),te=b.c2p(y._yEnds[r]);c=E>=Math.min(H,te)&&E<=Math.max(H,te)?0:1/0}d=Math.sqrt(h*h+c*c),n=i[u]}}}else for(u=i.length-1;u>-1;u--)a=f[r=i[u]],l=S[r],h=m.c2p(a)-w,c=b.c2p(l)-E,(x=Math.sqrt(h*h+c*c))<I&&(I=d=x,n=r);return _.index=n,_.distance=I,_.dxy=d,n===void 0?[_]:[T(_,f,S,y)]},calcHover:T}},38983:function(ee,R,e){var M=e(64628);M.plot=e(89876),ee.exports=M},89876:function(ee,R,e){var M=e(38540),k=e(13472),o=e(24544),T=e(23352),_=e(3400),p=e(72760).selectMode,s=e(5048),t=e(43028),i=e(14328),r=e(26768).styleTextSelection,n={};function a(l,u,h,c){var x=l._size,d=l.width*c,v=l.height*c,g=x.l*c,y=x.b*c,m=x.r*c,b=x.t*c,f=x.w*c,S=x.h*c;return[g+u.domain[0]*f,y+h.domain[0]*S,d-m-(1-u.domain[1])*f,v-b-(1-h.domain[1])*S]}(ee.exports=function(l,u,h){if(h.length){var c,x,d=l._fullLayout,v=u._scene,g=u.xaxis,y=u.yaxis;if(v)if(s(l,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var m=v.count,b=d._glcanvas.data()[0].regl;if(i(l,u,h),v.dirty){if(!v.line2d&&!v.error2d||v.scatter2d||v.fill2d||v.glText||b.clear({}),v.error2d===!0&&(v.error2d=o(b)),v.line2d===!0&&(v.line2d=k(b)),v.scatter2d===!0&&(v.scatter2d=M(b)),v.fill2d===!0&&(v.fill2d=k(b)),v.glText===!0)for(v.glText=new Array(m),c=0;c<m;c++)v.glText[c]=new T(b);if(v.glText){if(m>v.glText.length){var f=m-v.glText.length;for(c=0;c<f;c++)v.glText.push(new T(b))}else if(m<v.glText.length){var S=v.glText.length-m;v.glText.splice(m,S).forEach(function(re){re.destroy()})}for(c=0;c<m;c++)v.glText[c].update(v.textOptions[c])}if(v.line2d&&(v.line2d.update(v.lineOptions),v.lineOptions=v.lineOptions.map(function(re){if(re&&re.positions){for(var se=re.positions,ae=0;ae<se.length&&(isNaN(se[ae])||isNaN(se[ae+1]));)ae+=2;for(var ce=se.length-2;ce>ae&&(isNaN(se[ce])||isNaN(se[ce+1]));)ce-=2;re.positions=se.slice(ae,ce+2)}return re}),v.line2d.update(v.lineOptions)),v.error2d){var w=(v.errorXOptions||[]).concat(v.errorYOptions||[]);v.error2d.update(w)}v.scatter2d&&v.scatter2d.update(v.markerOptions),v.fillOrder=_.repeat(null,m),v.fill2d&&(v.fillOptions=v.fillOptions.map(function(re,se){var ae=h[se];if(re&&ae&&ae[0]&&ae[0].trace){var ce,fe,he=ae[0],ve=he.trace,ye=he.t,me=v.lineOptions[se],Me=[];ve._ownfill&&Me.push(se),ve._nexttrace&&Me.push(se+1),Me.length&&(v.fillOrder[se]=Me);var Pe,ge,oe=[],ie=me&&me.positions||ye.positions;if(ve.fill==="tozeroy"){for(Pe=0;Pe<ie.length&&isNaN(ie[Pe+1]);)Pe+=2;for(ge=ie.length-2;ge>Pe&&isNaN(ie[ge+1]);)ge-=2;ie[Pe+1]!==0&&(oe=[ie[Pe],0]),oe=oe.concat(ie.slice(Pe,ge+2)),ie[ge+1]!==0&&(oe=oe.concat([ie[ge],0]))}else if(ve.fill==="tozerox"){for(Pe=0;Pe<ie.length&&isNaN(ie[Pe]);)Pe+=2;for(ge=ie.length-2;ge>Pe&&isNaN(ie[ge]);)ge-=2;ie[Pe]!==0&&(oe=[0,ie[Pe+1]]),oe=oe.concat(ie.slice(Pe,ge+2)),ie[ge]!==0&&(oe=oe.concat([0,ie[ge+1]]))}else if(ve.fill==="toself"||ve.fill==="tonext"){for(oe=[],ce=0,re.splitNull=!0,fe=0;fe<ie.length;fe+=2)(isNaN(ie[fe])||isNaN(ie[fe+1]))&&((oe=oe.concat(ie.slice(ce,fe))).push(ie[ce],ie[ce+1]),oe.push(null,null),ce=fe+2);oe=oe.concat(ie.slice(ce)),ce&&oe.push(ie[ce],ie[ce+1])}else{var de=ve._nexttrace;if(de){var Se=v.lineOptions[se+1];if(Se){var _e=Se.positions;if(ve.fill==="tonexty"){for(oe=ie.slice(),se=Math.floor(_e.length/2);se--;){var we=_e[2*se],Ae=_e[2*se+1];isNaN(we)||isNaN(Ae)||oe.push(we,Ae)}re.fill=de.fillcolor}}}}if(ve._prevtrace&&ve._prevtrace.fill==="tonext"){var Oe=v.lineOptions[se-1].positions,ze=oe.length/2,pe=[ce=ze];for(fe=0;fe<Oe.length;fe+=2)(isNaN(Oe[fe])||isNaN(Oe[fe+1]))&&(pe.push(fe/2+ze+1),ce=fe+2);oe=oe.concat(Oe),re.hole=pe}return re.fillmode=ve.fill,re.opacity=ve.opacity,re.positions=oe,re}}),v.fill2d.update(v.fillOptions))}var E=d.dragmode,O=p(E),C=d.clickmode.indexOf("select")>-1;for(c=0;c<m;c++){var P=h[c][0],D=P.trace,U=P.t,I=U.index,N=D._length,W=U.x,F=U.y;if(D.selectedpoints||O||C){if(O||(O=!0),D.selectedpoints){var j=v.selectBatch[I]=_.selIndices2selPoints(D),H={};for(x=0;x<j.length;x++)H[j[x]]=1;var te=[];for(x=0;x<N;x++)H[x]||te.push(x);v.unselectBatch[I]=te}var Q=U.xpx=new Array(N),$=U.ypx=new Array(N);for(x=0;x<N;x++)Q[x]=g.c2p(W[x]),$[x]=y.c2p(F[x])}else U.xpx=U.ypx=null}if(O){if(v.select2d||(v.select2d=M(d._glcanvas.data()[1].regl)),v.scatter2d){var K=new Array(m);for(c=0;c<m;c++)K[c]=v.selectBatch[c].length||v.unselectBatch[c].length?v.markerUnselectedOptions[c]:{};v.scatter2d.update(K)}v.select2d&&(v.select2d.update(v.markerOptions),v.select2d.update(v.markerSelectedOptions)),v.glText&&h.forEach(function(re){var se=((re||[])[0]||{}).trace||{};t.hasText(se)&&r(re)})}else v.scatter2d&&v.scatter2d.update(v.markerOptions);var X={viewport:a(d,g,y,l._context.plotGlPixelRatio),range:[(g._rl||g.range)[0],(y._rl||y.range)[0],(g._rl||g.range)[1],(y._rl||y.range)[1]]},Y=_.repeat(X,v.count);v.fill2d&&v.fill2d.update(Y),v.line2d&&v.line2d.update(Y),v.error2d&&v.error2d.update(Y.concat(Y)),v.scatter2d&&v.scatter2d.update(Y),v.select2d&&v.select2d.update(Y),v.glText&&v.glText.forEach(function(re){re.update(X)})}else v.init()}}).reglPrecompiled=n},74588:function(ee,R,e){var M=e(3400);ee.exports=function(k,o){var T=o._scene,_={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},p={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((T=o._scene={}).init=function(){M.extendFlat(T,p,_)},T.init(),T.update=function(s){var t=M.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,i=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,l=T.select2d,u=T.selectBatch,h=T.unselectBatch,c=0;c<s;c++){if(t&&T.fillOrder[c]&&t.draw(T.fillOrder[c]),r&&T.lineOptions[c]&&r.draw(c),i&&(T.errorXOptions[c]&&i.draw(c),T.errorYOptions[c]&&i.draw(c+s)),n&&T.markerOptions[c])if(h[c].length){var x=M.repeat([],T.count);x[c]=h[c],n.draw(x)}else u[c].length||n.draw(c);a[c]&&T.textOptions[c]&&a[c].render()}l&&l.draw(u),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,o._scene=null}),T.dirty||M.extendFlat(T,_),T}},73224:function(ee,R,e){var M=e(43028),k=e(26768).styleTextSelection;ee.exports=function(o,T){var _=o.cd,p=o.xaxis,s=o.yaxis,t=[],i=_[0].trace,r=_[0].t,n=i._length,a=r.x,l=r.y,u=r._scene,h=r.index;if(!u)return t;var c=M.hasText(i),x=M.hasMarkers(i),d=!x&&!c;if(i.visible!==!0||d)return t;var v=[],g=[];if(T!==!1&&!T.degenerate)for(var y=0;y<n;y++)T.contains([r.xpx[y],r.ypx[y]],!1,y,o)?(v.push(y),t.push({pointNumber:y,x:p.c2d(a[y]),y:s.c2d(l[y])})):g.push(y);if(x){var m=u.scatter2d;if(v.length||g.length){if(!u.selectBatch[h].length&&!u.unselectBatch[h].length){var b=new Array(u.count);b[h]=u.markerUnselectedOptions[h],m.update.apply(m,b)}}else{var f=new Array(u.count);f[h]=u.markerOptions[h],m.update.apply(m,f)}}return u.selectBatch[h]=v,u.unselectBatch[h]=g,c&&k(_),t}},31512:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(6096),_=e(52904),p=e(5232),s=e(45464),t=e(49084),i=e(92880).extendFlat,r=e(67824).overrideAll,n=e(5232),a=T.line,l=T.marker;ee.exports=r({lon:T.lon,lat:T.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},n.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},l.opacity,{dflt:1})},mode:i({},_.mode,{dflt:"markers"}),text:i({},_.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},_.hovertext,{}),line:{color:a.color,width:a.width},connectgaps:_.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},t("marker")),fill:T.fill,fillcolor:o(),textfont:p.layers.symbol.textfont,textposition:p.layers.symbol.textposition,below:{valType:"string"},selected:{marker:_.selected.marker},unselected:{marker:_.unselected.marker},hoverinfo:i({},s.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},79732:function(ee){var R=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];ee.exports={isSupportedFont:function(e){return R.indexOf(e)!==-1}}},59392:function(ee,R,e){var M=e(38248),k=e(3400),o=e(39032).BADNUM,T=e(44808),_=e(8932),p=e(43616),s=e(7152),t=e(43028),i=e(79732).isSupportedFont,r=e(89032),n=e(10624).appendArrayPointValue,a=e(72736).NEWLINES,l=e(72736).BR_TAG_ALL;function u(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function h(g,y){return k.isArrayOrTypedArray(g)?y?function(m){return M(g[m])?+g[m]:0}:function(m){return g[m]}:g?function(){return g}:c}function c(){return""}function x(g){return g[0]===o}function d(g,y){var m;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(y)){m=["step",["get","point_count"],g[0]];for(var b=1;b<g.length;b++)m.push(y[b-1],g[b])}else m=g;return m}function v(g){var y=g.textfont,m=y.family,b=y.style,f=y.weight,S=m.split(" "),w=S[S.length-1]==="Italic";w&&S.pop(),w=w||b==="italic";var E=S.join(" ");return f==="bold"&&S.indexOf("Bold")===-1?E+=" Bold":f<=1e3&&(S[0]==="Metropolis"?(E="Metropolis",E+=f>850?" Black":f>750?" Extra Bold":f>650?" Bold":f>550?" Semi Bold":f>450?" Medium":f>350?" Regular":f>250?" Light":f>150?" Extra Light":" Thin"):S.slice(0,2).join(" ")==="Open Sans"?(E="Open Sans",E+=f>750?" Extrabold":f>650?" Bold":f>550?" Semibold":f>350?" Regular":" Light"):S.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(E="Klokantech Noto Sans",S[3]==="CJK"&&(E+=" CJK"),E+=f>500?" Bold":" Regular")),w&&(E+=" Italic"),E==="Open Sans Regular Italic"?E="Open Sans Italic":E==="Open Sans Regular Bold"?E="Open Sans Bold":E==="Open Sans Regular Bold Italic"?E="Open Sans Bold Italic":E==="Klokantech Noto Sans Regular Italic"&&(E="Klokantech Noto Sans Italic"),i(E)||(E=m),E.split(", ")}ee.exports=function(g,y){var m,b=y[0].trace,f=b.visible===!0&&b._length!==0,S=b.fill!=="none",w=t.hasLines(b),E=t.hasMarkers(b),O=t.hasText(b),C=E&&b.marker.symbol==="circle",P=E&&b.marker.symbol!=="circle",D=b.cluster&&b.cluster.enabled,U=u("fill"),I=u("line"),N=u("circle"),W=u("symbol"),F={fill:U,line:I,circle:N,symbol:W};if(!f)return F;if((S||w)&&(m=T.calcTraceToLineCoords(y)),S&&(U.geojson=T.makePolygon(m),U.layout.visibility="visible",k.extendFlat(U.paint,{"fill-color":b.fillcolor})),w&&(I.geojson=T.makeLine(m),I.layout.visibility="visible",k.extendFlat(I.paint,{"line-width":b.line.width,"line-color":b.line.color,"line-opacity":b.opacity})),C){var j=function(Q){var $,K,X,Y,re=Q[0].trace,se=re.marker,ae=re.selectedpoints,ce=k.isArrayOrTypedArray(se.color),fe=k.isArrayOrTypedArray(se.size),he=k.isArrayOrTypedArray(se.opacity);function ve(de){return re.opacity*de}ce&&(K=_.hasColorscale(re,"marker")?_.makeColorScaleFuncFromTrace(se):k.identity),fe&&(X=s(re)),he&&(Y=function(de){return ve(M(de)?+k.constrain(de,0,1):0)});var ye,me,Me=[];for($=0;$<Q.length;$++){var Pe=Q[$],ge=Pe.lonlat;if(!x(ge)){var oe={};K&&(oe.mcc=Pe.mcc=K(Pe.mc)),X&&(oe.mrc=Pe.mrc=X(Pe.ms)),Y&&(oe.mo=Y(Pe.mo)),ae&&(oe.selected=Pe.selected||0),Me.push({type:"Feature",id:$+1,geometry:{type:"Point",coordinates:ge},properties:oe})}}if(ae)for(ye=p.makeSelectedPointStyleFns(re),$=0;$<Me.length;$++){var ie=Me[$].properties;ye.selectedOpacityFn&&(ie.mo=ve(ye.selectedOpacityFn(ie))),ye.selectedColorFn&&(ie.mcc=ye.selectedColorFn(ie)),ye.selectedSizeFn&&(ie.mrc=ye.selectedSizeFn(ie))}return{geojson:{type:"FeatureCollection",features:Me},mcc:ce||ye&&ye.selectedColorFn?{type:"identity",property:"mcc"}:se.color,mrc:fe||ye&&ye.selectedSizeFn?{type:"identity",property:"mrc"}:(me=se.size,me/2),mo:he||ye&&ye.selectedOpacityFn?{type:"identity",property:"mo"}:ve(se.opacity)}}(y);N.geojson=j.geojson,N.layout.visibility="visible",D&&(N.filter=["!",["has","point_count"]],F.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":d(b.cluster.color,b.cluster.step),"circle-radius":d(b.cluster.size,b.cluster.step),"circle-opacity":d(b.cluster.opacity,b.cluster.step)}},F.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":v(b),"text-size":12}}),k.extendFlat(N.paint,{"circle-color":j.mcc,"circle-radius":j.mrc,"circle-opacity":j.mo})}if(C&&D&&(N.filter=["!",["has","point_count"]]),(P||O)&&(W.geojson=function(Q,$){for(var K=$._fullLayout,X=Q[0].trace,Y=X.marker||{},re=Y.symbol,se=Y.angle,ae=re!=="circle"?h(re):c,ce=se!=="auto"?h(se,!0):c,fe=t.hasText(X)?h(X.text):c,he=[],ve=0;ve<Q.length;ve++){var ye=Q[ve];if(!x(ye.lonlat)){var me,Me=X.texttemplate;if(Me){var Pe=Array.isArray(Me)?Me[ve]||"":Me,ge=X._module.formatLabels(ye,X,K),oe={};n(oe,X,ye.i);var ie=X._meta||{};me=k.texttemplateString(Pe,ge,K._d3locale,oe,ye,ie)}else me=fe(ve);me&&(me=me.replace(a,"").replace(l,`
`)),he.push({type:"Feature",geometry:{type:"Point",coordinates:ye.lonlat},properties:{symbol:ae(ve),angle:ce(ve),text:me}})}}return{type:"FeatureCollection",features:he}}(y,g),k.extendFlat(W.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(k.extendFlat(W.layout,{"icon-size":b.marker.size/10}),"angle"in b.marker&&b.marker.angle!=="auto"&&k.extendFlat(W.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),W.layout["icon-allow-overlap"]=b.marker.allowoverlap,k.extendFlat(W.paint,{"icon-opacity":b.opacity*b.marker.opacity,"icon-color":b.marker.color})),O)){var H=(b.marker||{}).size,te=r(b.textposition,H);k.extendFlat(W.layout,{"text-size":b.textfont.size,"text-anchor":te.anchor,"text-offset":te.offset,"text-font":v(b)}),k.extendFlat(W.paint,{"text-color":b.textfont.color,"text-opacity":b.opacity})}return F}},15752:function(ee,R,e){var M=e(3400),k=e(43028),o=e(74428),T=e(66828),_=e(124),p=e(70840),s=e(31512),t=e(79732).isSupportedFont;ee.exports=function(i,r,n,a){function l(b,f){return M.coerce(i,r,s,b,f)}function u(b,f){return M.coerce2(i,r,s,b,f)}var h=function(b,f,S){var w=S("lon")||[],E=S("lat")||[],O=Math.min(w.length,E.length);return f._length=O,O}(0,r,l);if(h){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),k.hasMarkers(r)){o(i,r,n,a,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var c=r.marker;c.symbol!=="circle"&&(M.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),M.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}k.hasLines(r)&&(T(i,r,n,a,l,{noDash:!0}),l("connectgaps"));var x=u("cluster.maxzoom"),d=u("cluster.step"),v=u("cluster.color",r.marker&&r.marker.color||n),g=u("cluster.size"),y=u("cluster.opacity");if(l("cluster.enabled",x!==!1||d!==!1||v!==!1||g!==!1||y!==!1)||k.hasText(r)){var m=a.font.family;_(i,r,a,l,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:t(m)?m:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}})}l("fill"),r.fill!=="none"&&p(i,r,n,l),M.coerceSelectionMarkerOpacity(r,l)}else r.visible=!1}},37920:function(ee){ee.exports=function(R,e){return R.lon=e.lon,R.lat=e.lat,R}},11960:function(ee,R,e){var M=e(54460);ee.exports=function(k,o,T){var _={},p=T[o.subplot]._subplot.mockAxis,s=k.lonlat;return _.lonLabel=M.tickText(p,p.c2l(s[0]),!0).text,_.latLabel=M.tickText(p,p.c2l(s[1]),!0).text,_}},63312:function(ee,R,e){var M=e(93024),k=e(3400),o=e(44928),T=k.fillText,_=e(39032).BADNUM,p=e(47552).traceLayerPrefix;function s(t,i,r){if(!t.hovertemplate){var n=(i.hi||t.hoverinfo).split("+"),a=n.indexOf("all")!==-1,l=n.indexOf("lon")!==-1,u=n.indexOf("lat")!==-1,h=i.lonlat,c=[];return a||l&&u?c.push("("+x(h[1])+", "+x(h[0])+")"):l?c.push(r.lon+x(h[0])):u&&c.push(r.lat+x(h[1])),(a||n.indexOf("text")!==-1)&&T(i,t,c),c.join("<br>")}function x(d){return d+"°"}}ee.exports={hoverPoints:function(t,i,r){var n=t.cd,a=n[0].trace,l=t.xa,u=t.ya,h=t.subplot,c=[],x=p+a.uid+"-circle",d=a.cluster&&a.cluster.enabled;if(d){var v=h.map.queryRenderedFeatures(null,{layers:[x]});c=v.map(function(P){return P.id})}var g=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),y=i-g;if(M.getClosest(n,function(P){var D=P.lonlat;if(D[0]===_||d&&c.indexOf(P.i+1)===-1)return 1/0;var U=k.modHalf(D[0],360),I=D[1],N=h.project([U,I]),W=N.x-l.c2p([y,I]),F=N.y-u.c2p([U,r]),j=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(W*W+F*F)-j,1-3/j)},t),t.index!==!1){var m=n[t.index],b=m.lonlat,f=[k.modHalf(b[0],360)+g,b[1]],S=l.c2p(f),w=u.c2p(f),E=m.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=w-E,t.y1=w+E;var O={};O[a.subplot]={_subplot:h};var C=a._module.formatLabels(m,a,O);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=o(a,m),t.extraText=s(a,m,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:s}},11572:function(ee,R,e){ee.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(ee,R,e){var M=e(3400),k=e(59392),o=e(47552).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function _(s,t,i,r){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=i,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:o+t+"-fill",line:o+t+"-line",circle:o+t+"-circle",symbol:o+t+"-symbol",cluster:o+t+"-cluster",clusterCount:o+t+"-cluster-count"},this.below=null}var p=_.prototype;p.addSource=function(s,t,i){var r={type:"geojson",data:t.geojson};i&&i.enabled&&M.extendFlat(r,{cluster:!0,clusterMaxZoom:i.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[s]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],r)},p.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},p.addLayer=function(s,t,i){var r={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter);for(var n,a=this.layerIds[s],l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===a){n=!0;break}n?(this.subplot.setOptions(a,"setLayoutProperty",r.layout),r.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",r.paint)):this.subplot.addLayer(r,i)},p.update=function(s){var t=s[0].trace,i=this.subplot,r=i.map,n=k(i.gd,s),a=i.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,h=this;function c(y){u?function(m){for(var b=T.cluster,f=b.length-1;f>=0;f--){var S=b[f];r.removeLayer(h.layerIds[S])}m||r.removeSource(h.sourceIds.circle)}(y):function(m){for(var b=T.nonCluster,f=b.length-1;f>=0;f--){var S=b[f];r.removeLayer(h.layerIds[S]),m||r.removeSource(h.sourceIds[S])}}(y)}function x(y){l?function(m){m||h.addSource("circle",n.circle,t.cluster);for(var b=T.cluster,f=0;f<b.length;f++){var S=b[f],w=n[S];h.addLayer(S,w,a)}}(y):function(m){for(var b=T.nonCluster,f=0;f<b.length;f++){var S=b[f],w=n[S];m||h.addSource(S,w),h.addLayer(S,w,a)}}(y)}function d(){for(var y=l?T.cluster:T.nonCluster,m=0;m<y.length;m++){var b=y[m],f=n[b];f&&(i.setOptions(h.layerIds[b],"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&(b!=="cluster"&&h.setSourceData(b,f),i.setOptions(h.layerIds[b],"setPaintProperty",f.paint)))}}var v=this.isHidden,g=t.visible!==!0;g?v||c():v?g||x():u!==l?(c(),x()):(this.below!==a&&(c(!0),x(!0)),d()),this.clusterEnabled=l,this.isHidden=g,this.below=a,s[0].trace._glTrace=this},p.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,i=t.length-1;i>=0;i--){var r=t[i];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},ee.exports=function(s,t){var i,r,n,a=t[0].trace,l=a.cluster&&a.cluster.enabled,u=a.visible!==!0,h=new _(s,a.uid,l,u),c=k(s.gd,t),x=h.below=s.belowLookup["trace-"+a.uid];if(l)for(h.addSource("circle",c.circle,a.cluster),i=0;i<T.cluster.length;i++)n=c[r=T.cluster[i]],h.addLayer(r,n,x);else for(i=0;i<T.nonCluster.length;i++)n=c[r=T.nonCluster[i]],h.addSource(r,n,a.cluster),h.addLayer(r,n,x);return t[0].trace._glTrace=h,h}},404:function(ee,R,e){var M=e(3400),k=e(43028),o=e(39032).BADNUM;ee.exports=function(T,_){var p,s=T.cd,t=T.xaxis,i=T.yaxis,r=[],n=s[0].trace;if(!k.hasMarkers(n))return[];if(_===!1)for(p=0;p<s.length;p++)s[p].selected=0;else for(p=0;p<s.length;p++){var a=s[p],l=a.lonlat;if(l[0]!==o){var u=[M.modHalf(l[0],360),l[1]],h=[t.c2p(u),i.c2p(u)];_.contains(h,null,p,T)?(r.push({pointNumber:p,lon:l[0],lat:l[1]}),a.selected=1):a.selected=0}}return r}},8319:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),_=e(52904),p=e(45464),s=_.line;ee.exports={mode:_.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:o({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:o({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:o({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},p.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:_.hoveron,hovertemplate:M(),selected:_.selected,unselected:_.unselected}},58320:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,o=e(54460),T=e(90136),_=e(20148),p=e(4500),s=e(16356).calcMarkerSize;ee.exports=function(t,i){for(var r=t._fullLayout,n=i.subplot,a=r[n].radialaxis,l=r[n].angularaxis,u=a.makeCalcdata(i,"r"),h=l.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),d=0;d<c;d++){var v=u[d],g=h[d],y=x[d]={};M(v)&&M(g)?(y.r=v,y.theta=g):y.r=k}var m=s(i,c);return i._extremes.x=o.findExtremes(a,u,{ppad:m}),T(t,i),_(x,i),p(x,i),x}},85968:function(ee,R,e){var M=e(3400),k=e(43028),o=e(74428),T=e(66828),_=e(11731),p=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(8319);function r(n,a,l,u){var h,c=u("r"),x=u("theta");if(M.isTypedArray(c)&&(a.r=c=Array.from(c)),M.isTypedArray(x)&&(a.theta=x=Array.from(x)),c)x?h=Math.min(c.length,x.length):(h=c.length,u("theta0"),u("dtheta"));else{if(!x)return 0;h=a.theta.length,u("r0"),u("dr")}return a._length=h,h}ee.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,l,u){function h(d,v){return M.coerce(n,a,i,d,v)}var c=r(0,a,0,h);if(c){h("thetaunit"),h("mode",c<t?"lines+markers":"lines"),h("text"),h("hovertext"),a.hoveron!=="fills"&&h("hovertemplate"),k.hasMarkers(a)&&o(n,a,l,u,h,{gradient:!0}),k.hasLines(a)&&(T(n,a,l,u,h,{backoff:!0}),_(n,a,h),h("connectgaps")),k.hasText(a)&&(h("texttemplate"),p(n,a,u,h));var x=[];(k.hasMarkers(a)||k.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),x.push("points")),h("fill"),a.fill!=="none"&&(s(n,a,l,h),k.hasLines(a)||_(n,a,h)),a.fill!=="tonext"&&a.fill!=="toself"||x.push("fills"),h("hoveron",x.join("+")||"points"),M.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},22852:function(ee,R,e){var M=e(3400),k=e(54460);ee.exports=function(o,T,_){var p,s,t={},i=_[T.subplot]._subplot;i?(p=i.radialAxis,s=i.angularAxis):(p=(i=_[T.subplot]).radialaxis,s=i.angularaxis);var r=p.c2l(o.r);t.rLabel=k.tickText(p,r,!0).text;var n=s.thetaunit==="degrees"?M.rad2deg(o.theta):o.theta;return t.thetaLabel=k.tickText(s,n,!0).text,t}},8504:function(ee,R,e){var M=e(98723);function k(o,T,_,p){var s=_.radialAxis,t=_.angularAxis;s._hovertitle="r",t._hovertitle="θ";var i={};i[T.subplot]={_subplot:_};var r=T._module.formatLabels(o,T,i);p.rLabel=r.rLabel,p.thetaLabel=r.thetaLabel;var n=o.hi||T.hoverinfo,a=[];function l(h,c){a.push(h._hovertitle+": "+c)}if(!T.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&l(s,p.rLabel),u.indexOf("theta")!==-1&&l(t,p.thetaLabel),u.indexOf("text")!==-1&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}ee.exports={hoverPoints:function(o,T,_,p){var s=M(o,T,_,p);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=o.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},76924:function(ee,R,e){ee.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(ee,R,e){var M=e(96504),k=e(39032).BADNUM;ee.exports=function(o,T,_){for(var p=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,i={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<_.length;a++)for(var l=_[a],u=0;u<l.length;u++){u===0&&(l[0].trace._xA=s,l[0].trace._yA=t);var h=l[u],c=h.r;if(c===k)h.x=h.y=k;else{var x=r.c2g(c),d=n.c2g(h.theta);h.x=x*Math.cos(d),h.y=x*Math.sin(d)}}M(o,i,_,p)}},24396:function(ee,R,e){var M=e(8319),k=e(2876),o=e(21776).Gw;ee.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:{color:k.line.color,width:k.line.width,dash:k.line.dash,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},27160:function(ee,R,e){ee.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(ee,R,e){var M=e(90136),k=e(16356).calcMarkerSize,o=e(84236),T=e(54460),_=e(67072).TOO_MANY_POINTS;ee.exports=function(p,s){var t=p._fullLayout,i=s.subplot,r=t[i].radialaxis,n=t[i].angularaxis,a=s._r=r.makeCalcdata(s,"r"),l=s._theta=n.makeCalcdata(s,"theta"),u=s._length,h={};u<a.length&&(a=a.slice(0,u)),u<l.length&&(l=l.slice(0,u)),h.r=a,h.theta=l,M(p,s);var c,x=h.opts=o.style(p,s);return u<_?c=k(s,u):x.marker&&(c=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=T.findExtremes(r,a,{ppad:c}),[{x:!1,y:!1,t:h,trace:s}]}},98608:function(ee,R,e){var M=e(3400),k=e(43028),o=e(85968).handleRThetaDefaults,T=e(74428),_=e(66828),p=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(24396);ee.exports=function(r,n,a,l){function u(c,x){return M.coerce(r,n,i,c,x)}var h=o(r,n,l,u);h?(u("thetaunit"),u("mode",h<t?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),k.hasMarkers(n)&&T(r,n,a,l,u,{noAngleRef:!0,noStandOff:!0}),k.hasLines(n)&&(_(r,n,a,l,u),u("connectgaps")),k.hasText(n)&&(u("texttemplate"),p(r,n,l,u,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),u("fill"),n.fill!=="none"&&s(r,n,a,u),M.coerceSelectionMarkerOpacity(n,u)):n.visible=!1}},94120:function(ee,R,e){var M=e(22852);ee.exports=function(k,o,T){var _=k.i;return"r"in k||(k.r=o._r[_]),"theta"in k||(k.theta=o._theta[_]),M(k,o,T)}},1600:function(ee,R,e){var M=e(41272),k=e(8504).makeHoverPointText;ee.exports={hoverPoints:function(o,T,_,p){var s=o.cd[0].t,t=s.r,i=s.theta,r=M.hoverPoints(o,T,_,p);if(r&&r[0].index!==!1){var n=r[0];if(n.index===void 0)return r;var a=o.subplot,l=n.cd[n.index],u=n.trace;if(l.r=t[n.index],l.theta=i[n.index],a.isPtInside(l))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(l,u,a,n),r}}}},62944:function(ee,R,e){var M=e(27160);M.plot=e(56512),ee.exports=M},56512:function(ee,R,e){var M=e(3108),k=e(38248),o=e(89876),T=e(74588),_=e(84236),p=e(3400),s=e(67072).TOO_MANY_POINTS;ee.exports=function(t,i,r){if(r.length){var n=i.radialAxis,a=i.angularAxis,l=T(t,i);return r.forEach(function(u){if(u&&u[0]&&u[0].trace){var h,c=u[0],x=c.trace,d=c.t,v=x._length,g=d.r,y=d.theta,m=d.opts,b=g.slice(),f=y.slice();for(h=0;h<g.length;h++)i.isPtInside({r:g[h],theta:y[h]})||(b[h]=NaN,f[h]=NaN);var S=new Array(2*v),w=Array(v),E=Array(v);for(h=0;h<v;h++){var O,C,P=b[h];if(k(P)){var D=n.c2g(P),U=a.c2g(f[h],x.thetaunit);O=D*Math.cos(U),C=D*Math.sin(U)}else O=C=NaN;w[h]=S[2*h]=O,E[h]=S[2*h+1]=C}d.tree=M(S),m.marker&&v>=s&&(m.marker.cluster=d.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=S),m.line&&S.length>1&&p.extendFlat(m.line,_.linePositions(t,x,S)),m.text&&(p.extendFlat(m.text,{positions:S},_.textPosition(t,x,m.text,m.marker)),p.extendFlat(m.textSel,{positions:S},_.textPosition(t,x,m.text,m.markerSel)),p.extendFlat(m.textUnsel,{positions:S},_.textPosition(t,x,m.text,m.markerUnsel))),m.fill&&!l.fill2d&&(l.fill2d=!0),m.marker&&!l.scatter2d&&(l.scatter2d=!0),m.line&&!l.line2d&&(l.line2d=!0),m.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(m.line),l.fillOptions.push(m.fill),l.markerOptions.push(m.marker),l.markerSelectedOptions.push(m.markerSel),l.markerUnselectedOptions.push(m.markerUnsel),l.textOptions.push(m.text),l.textSelectedOptions.push(m.textSel),l.textUnselectedOptions.push(m.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),d.x=w,d.y=E,d.rawx=w,d.rawy=E,d.r=g,d.theta=y,d.positions=S,d._scene=l,d.index=l.count,l.count++}}),o(t,i,r)}},ee.exports.reglPrecompiled={}},69496:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),_=e(52904),p=e(45464),s=_.line;ee.exports={mode:_.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:_.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:o({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:o({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:o({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},p.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:_.hoveron,hovertemplate:M(),selected:_.selected,unselected:_.unselected}},47507:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),_=e(4500),p=e(16356).calcMarkerSize;ee.exports=function(s,t){for(var i=s._fullLayout,r=t.subplot,n=i[r].realaxis,a=i[r].imaginaryaxis,l=n.makeCalcdata(t,"real"),u=a.makeCalcdata(t,"imag"),h=t._length,c=new Array(h),x=0;x<h;x++){var d=l[x],v=u[x],g=c[x]={};M(d)&&M(v)?(g.real=d,g.imag=v):g.real=k}return p(t,h),o(s,t),T(c,t),_(c,t),c}},76716:function(ee,R,e){var M=e(3400),k=e(43028),o=e(74428),T=e(66828),_=e(11731),p=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(69496);ee.exports=function(r,n,a,l){function u(x,d){return M.coerce(r,n,i,x,d)}var h=function(x,d,v,g){var y,m=g("real"),b=g("imag");return m&&b&&(y=Math.min(m.length,b.length)),M.isTypedArray(m)&&(d.real=m=Array.from(m)),M.isTypedArray(b)&&(d.imag=b=Array.from(b)),d._length=y,y}(0,n,0,u);if(h){u("mode",h<t?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),k.hasMarkers(n)&&o(r,n,a,l,u,{gradient:!0}),k.hasLines(n)&&(T(r,n,a,l,u,{backoff:!0}),_(r,n,u),u("connectgaps")),k.hasText(n)&&(u("texttemplate"),p(r,n,l,u));var c=[];(k.hasMarkers(n)||k.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),n.fill!=="none"&&(s(r,n,a,u),k.hasLines(n)||_(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},49504:function(ee,R,e){var M=e(54460);ee.exports=function(k,o,T){var _={},p=T[o.subplot]._subplot;return _.realLabel=M.tickText(p.radialAxis,k.real,!0).text,_.imagLabel=M.tickText(p.angularAxis,k.imag,!0).text,_}},25292:function(ee,R,e){var M=e(98723);function k(o,T,_,p){var s=_.radialAxis,t=_.angularAxis;s._hovertitle="real",t._hovertitle="imag";var i={};i[T.subplot]={_subplot:_};var r=T._module.formatLabels(o,T,i);p.realLabel=r.realLabel,p.imagLabel=r.imagLabel;var n=o.hi||T.hoverinfo,a=[];function l(h,c){a.push(h._hovertitle+": "+c)}if(!T.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&l(s,p.realLabel),u.indexOf("imag")!==-1&&l(t,p.imagLabel),u.indexOf("text")!==-1&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}ee.exports={hoverPoints:function(o,T,_,p){var s=M(o,T,_,p);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=o.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},95443:function(ee,R,e){ee.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(ee,R,e){var M=e(96504),k=e(39032).BADNUM,o=e(36416).smith;ee.exports=function(T,_,p){for(var s=_.layers.frontplot.select("g.scatterlayer"),t=_.xaxis,i=_.yaxis,r={xaxis:t,yaxis:i,plot:_.framework,layerClipId:_._hasClipOnAxisFalse?_.clipIds.forTraces:null},n=0;n<p.length;n++)for(var a=p[n],l=0;l<a.length;l++){l===0&&(a[0].trace._xA=t,a[0].trace._yA=i);var u=a[l],h=u.real;if(h===k)u.x=u.y=k;else{var c=o([h,u.imag]);u.x=c[0],u.y=c[1]}}M(T,r,p,s)}},5896:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),_=e(45464),p=e(49084),s=e(98192).u,t=e(92880).extendFlat,i=T.marker,r=T.line,n=i.line;ee.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:r.color,width:r.width,dash:s,backoff:r.backoff,shape:t({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o(),marker:t({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:n.width,editType:"calc"},p("marker.line")),gradient:i.gradient,editType:"calc"},p("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},_.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:M()}},34335:function(ee,R,e){var M=e(38248),k=e(90136),o=e(20148),T=e(4500),_=e(16356).calcMarkerSize,p=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};ee.exports=function(t,i){var r,n,a,l,u,h,c=t._fullLayout[i.subplot].sum,x=i.sum||c,d={a:i.a,b:i.b,c:i.c};for(r=0;r<p.length;r++)if(!d[a=p[r]]){for(u=d[s[a][0]],h=d[s[a][1]],l=new Array(u.length),n=0;n<u.length;n++)l[n]=x-u[n]-h[n];d[a]=l}var v,g,y,m,b,f,S=i._length,w=new Array(S);for(r=0;r<S;r++)v=d.a[r],g=d.b[r],y=d.c[r],M(v)&&M(g)&&M(y)?((m=c/((v=+v)+(g=+g)+(y=+y)))!=1&&(v*=m,g*=m,y*=m),f=v,b=y-g,w[r]={x:b,y:f,a:v,b:g,c:y}):w[r]={x:!1,y:!1};return _(i,S),k(t,i),o(w,i),T(w,i),w}},84256:function(ee,R,e){var M=e(3400),k=e(88200),o=e(43028),T=e(74428),_=e(66828),p=e(11731),s=e(124),t=e(70840),i=e(5896);ee.exports=function(r,n,a,l){function u(g,y){return M.coerce(r,n,i,g,y)}var h,c=u("a"),x=u("b"),d=u("c");if(c?(h=c.length,x?(h=Math.min(h,x.length),d&&(h=Math.min(h,d.length))):h=d?Math.min(h,d.length):0):x&&d&&(h=Math.min(x.length,d.length)),h){n._length=h,u("sum"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),u("mode",h<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(n)&&T(r,n,a,l,u,{gradient:!0}),o.hasLines(n)&&(_(r,n,a,l,u,{backoff:!0}),p(r,n,u),u("connectgaps")),o.hasText(n)&&(u("texttemplate"),s(r,n,l,u));var v=[];(o.hasMarkers(n)||o.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),v.push("points")),u("fill"),n.fill!=="none"&&(t(r,n,a,u),o.hasLines(n)||p(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||v.push("fills"),u("hoveron",v.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},97476:function(ee){ee.exports=function(R,e,M,k,o){if(e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),k[o]){var T=k[o];R.a=T.a,R.b=T.b,R.c=T.c}else R.a=e.a,R.b=e.b,R.c=e.c;return R}},90404:function(ee,R,e){var M=e(54460);ee.exports=function(k,o,T){var _={},p=T[o.subplot]._subplot;return _.aLabel=M.tickText(p.aaxis,k.a,!0).text,_.bLabel=M.tickText(p.baxis,k.b,!0).text,_.cLabel=M.tickText(p.caxis,k.c,!0).text,_}},26596:function(ee,R,e){var M=e(98723);ee.exports=function(k,o,T,_){var p=M(k,o,T,_);if(p&&p[0].index!==!1){var s=p[0];if(s.index===void 0){var t=1-s.y0/k.ya._length,i=k.xa._length,r=i*t/2,n=i-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),p}var a=s.cd[s.index],l=s.trace,u=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var h={};h[l.subplot]={_subplot:u};var c=l._module.formatLabels(a,l,h);s.aLabel=c.aLabel,s.bLabel=c.bLabel,s.cLabel=c.cLabel;var x=a.hi||l.hoverinfo,d=[];if(!l.hovertemplate){var v=x.split("+");v.indexOf("all")!==-1&&(v=["a","b","c"]),v.indexOf("a")!==-1&&g(u.aaxis,s.aLabel),v.indexOf("b")!==-1&&g(u.baxis,s.bLabel),v.indexOf("c")!==-1&&g(u.caxis,s.cLabel)}return s.extraText=d.join("<br>"),s.hovertemplate=l.hovertemplate,p}function g(y,m){d.push(y._hovertitle+": "+m)}}},34864:function(ee,R,e){ee.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(ee,R,e){var M=e(96504);ee.exports=function(k,o,T){var _=o.plotContainer;_.select(".scatterlayer").selectAll("*").remove();for(var p=o.xaxis,s=o.yaxis,t={xaxis:p,yaxis:s,plot:_,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},i=o.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=p,n[0].trace._yA=s)}M(k,t,T,i)}},44524:function(ee,R,e){var M=e(52904),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,_=e(2876),p=e(33816).idRegex,s=e(31780).templatedArray,t=e(92880).extendFlat,i=M.marker,r=i.line,n=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),a=t(k("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:n,editType:"calc"});function l(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:p[u],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",ee.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},_.text,{}),hovertext:t({},_.hovertext,{}),hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),marker:a,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:_.selected.marker,editType:"calc"},unselected:{marker:_.unselected.marker,editType:"calc"},opacity:_.opacity}},28888:function(ee,R,e){var M=e(24040),k=e(12704);ee.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},M.register(k)},99332:function(ee,R,e){var M=e(13472),k=e(24040),o=e(5048),T=e(84888)._M,_=e(57952),p=e(79811).getFromId,s=e(54460).shouldShowZeroLine,t="splom",i={};function r(a,l,u){for(var h=u.matrixOptions.data.length,c=l._visibleDims,x=u.viewOpts.ranges=new Array(h),d=0;d<c.length;d++){var v=c[d],g=x[d]=new Array(4),y=p(a,l._diag[v][0]);y&&(g[0]=y.r2l(y.range[0]),g[2]=y.r2l(y.range[1]));var m=p(a,l._diag[v][1]);m&&(g[1]=m.r2l(m.range[0]),g[3]=m.r2l(m.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:x},{ranges:x}):u.matrix.update({ranges:x})}function n(a){var l=a._fullLayout,u=l._glcanvas.data()[0].regl,h=l._splomGrid;h||(h=l._splomGrid=M(u)),h.update(function(c){var x,d=c._context.plotGlPixelRatio,v=c._fullLayout,g=v._size,y=[0,0,v.width*d,v.height*d],m={};function b(H,te,Q,$,K,X){Q*=d,$*=d,K*=d,X*=d;var Y=te[H+"color"],re=te[H+"width"],se=String(Y+re);se in m?m[se].data.push(NaN,NaN,Q,$,K,X):m[se]={data:[Q,$,K,X],join:"rect",thickness:re*d,color:Y,viewport:y,range:y,overlay:!1}}for(x in v._splomSubplots){var f,S,w=v._plots[x],E=w.xaxis,O=w.yaxis,C=E._gridVals,P=O._gridVals,D=E._offset,U=E._length,I=O._length,N=g.b+O.domain[0]*g.h,W=-O._m,F=-W*O.r2l(O.range[0],O.calendar);if(E.showgrid)for(x=0;x<C.length;x++)f=D+E.l2p(C[x].x),b("grid",E,f,N,f,N+I);if(O.showgrid)for(x=0;x<P.length;x++)b("grid",O,D,S=N+F+W*P[x].x,D+U,S);s(c,E,O)&&(f=D+E.l2p(0),b("zeroline",E,f,N,f,N+I)),s(c,O,E)&&b("zeroline",O,D,S=N+F+0,D+U,S)}var j=[];for(x in m)j.push(m[x]);return j}(a))}ee.exports={name:t,attr:_.attr,attrRegex:_.attrRegex,layoutAttributes:_.layoutAttributes,supplyLayoutDefaults:_.supplyLayoutDefaults,drawFramework:_.drawFramework,plot:function(a){var l=a._fullLayout,u=k.getModule(t),h=T(a.calcdata,u)[0];o(a,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(l._hasOnlyLargeSploms&&n(a),u.plot(a,{},h))},drag:function(a){var l=a.calcdata,u=a._fullLayout;u._hasOnlyLargeSploms&&n(a);for(var h=0;h<l.length;h++){var c=l[h][0].trace,x=u._splomScenes[c.uid];c.type==="splom"&&x&&x.matrix&&r(a,c,x)}},updateGrid:n,clean:function(a,l,u,h){var c,x={};if(h._splomScenes){for(c=0;c<a.length;c++){var d=a[c];d.type==="splom"&&(x[d.uid]=1)}for(c=0;c<u.length;c++){var v=u[c];if(!x[v.uid]){var g=h._splomScenes[v.uid];g&&g.destroy&&g.destroy(),h._splomScenes[v.uid]=null,delete h._splomScenes[v.uid]}}}Object.keys(h._splomScenes||{}).length===0&&delete h._splomScenes,h._splomGrid&&!l._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),_.clean(a,l,u,h)},updateFx:_.updateFx,toSVG:_.toSVG,reglPrecompiled:i}},66821:function(ee,R,e){var M=e(3400),k=e(79811),o=e(16356).calcMarkerSize,T=e(16356).calcAxisExpansion,_=e(90136),p=e(84236).markerSelection,s=e(84236).markerStyle,t=e(72308),i=e(39032).BADNUM,r=e(67072).TOO_MANY_POINTS;ee.exports=function(n,a){var l,u,h,c,x,d,v=a.dimensions,g=a._length,y={},m=y.cdata=[],b=y.data=[],f=a._visibleDims=[];function S(E,O){for(var C=E.makeCalcdata({v:O.values,vcalendar:a.calendar},"v"),P=0;P<C.length;P++)C[P]=C[P]===i?NaN:C[P];m.push(C),b.push(E.type==="log"?M.simpleMap(C,E.c2l):C)}for(l=0;l<v.length;l++)if((h=v[l]).visible){if(c=k.getFromId(n,a._diag[l][0]),x=k.getFromId(n,a._diag[l][1]),c&&x&&c.type!==x.type){M.log("Skipping splom dimension "+l+" with conflicting axis types");continue}c?(S(c,h),x&&x.type==="category"&&(x._categories=c._categories.slice())):S(x,h),f.push(l)}for(_(n,a),M.extendFlat(y,s(n,a)),d=m.length*g>r?y.sizeAvg||Math.max(y.size,3):o(a,g),u=0;u<f.length;u++)h=v[l=f[u]],c=k.getFromId(n,a._diag[l][0])||{},x=k.getFromId(n,a._diag[l][1])||{},T(n,a,c,x,m[u],m[u],d);var w=t(n,a);return w.matrix||(w.matrix=!0),w.matrixOptions=y,w.selectedOptions=p(n,a,a.selected),w.unselectedOptions=p(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},69544:function(ee,R,e){var M=e(3400),k=e(51272),o=e(44524),T=e(43028),_=e(74428),p=e(26284),s=e(80088).isOpenSymbol;function t(i,r){function n(l,u){return M.coerce(i,r,o.dimensions,l,u)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}ee.exports=function(i,r,n,a){function l(g,y){return M.coerce(i,r,o,g,y)}var u=k(i,r,{name:"dimensions",handleItemDefaults:t}),h=l("diagonal.visible"),c=l("showupperhalf"),x=l("showlowerhalf");if(p(r,u,"values")&&(h||c||x)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),_(i,r,n,a,l,{noAngleRef:!0,noStandOff:!0});var d=s(r.marker.symbol),v=T.isBubble(r);l("marker.line.width",d||v?1:0),function(g,y,m,b){var f,S,w=y.dimensions,E=w.length,O=y.showupperhalf,C=y.showlowerhalf,P=y.diagonal.visible,D=new Array(E),U=new Array(E);for(f=0;f<E;f++){var I=f?f+1:"";D[f]="x"+I,U[f]="y"+I}var N=b("xaxes",D),W=b("yaxes",U),F=y._diag=new Array(E);y._xaxes={},y._yaxes={};var j=[],H=[];function te(ce,fe,he,ve){if(ce){var ye=ce.charAt(0),me=m._splomAxes[ye];if(y["_"+ye+"axes"][ce]=1,ve.push(ce),!(ce in me)){var Me=me[ce]={};he&&(Me.label=he.label||"",he.visible&&he.axis&&(he.axis.type&&(Me.type=he.axis.type),he.axis.matches&&(Me.matches=fe)))}}}var Q=!P&&!C,$=!P&&!O;for(y._axesDim={},f=0;f<E;f++){var K=w[f],X=f===0,Y=f===E-1,re=X&&Q||Y&&$?void 0:N[f],se=X&&$||Y&&Q?void 0:W[f];te(re,se,K,j),te(se,re,K,H),F[f]=[re,se],y._axesDim[re]=f,y._axesDim[se]=f}for(f=0;f<j.length;f++)for(S=0;S<H.length;S++){var ae=j[f]+H[S];f>S&&O||f<S&&C?m._splomSubplots[ae]=1:f!==S||!P&&C&&O||(m._splomSubplots[ae]=1)}(!C||!P&&O&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,r,a,l),M.coerceSelectionMarkerOpacity(r,l)}else r.visible=!1}},83156:function(ee,R,e){var M=e(3400),k=e(90136),o=e(84236).markerStyle;ee.exports=function(T,_){var p=_.trace,s=T._fullLayout._splomScenes[p.uid];if(s){k(T,p),M.extendFlat(s.matrixOptions,o(T,p));var t=M.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},50328:function(ee,R){R.getDimIndex=function(e,M){for(var k=M._id,o={x:0,y:1}[k.charAt(0)],T=e._visibleDims,_=0;_<T.length;_++){var p=T[_];if(e._diag[p][o]===k)return _}return!1}},72248:function(ee,R,e){var M=e(50328),k=e(41272).calcHover,o=e(54460).getFromId,T=e(92880).extendFlat;function _(p,s,t,i){var r=p.cd[0].trace,n=p.scene.matrixOptions.cdata,a=p.xa,l=p.ya,u=a.c2p(s),h=l.c2p(t),c=p.distance,x=M.getDimIndex(r,a),d=M.getDimIndex(r,l);if(x===!1||d===!1)return[p];for(var v,g,y=n[x],m=n[d],b=c,f=0;f<y.length;f++)if(!i||f===p.index){var S=y[f],w=m[f],E=a.c2p(S)-u,O=l.c2p(w)-h,C=Math.sqrt(E*E+O*O);(i||C<b)&&(b=g=C,v=f)}return p.index=v,p.distance=b,p.dxy=g,v===void 0?[p]:[k(p,y,m,r)]}ee.exports={hoverPoints:function(p,s,t,i,r){r||(r={});var n=(i||"").charAt(0)==="x",a=(i||"").charAt(0)==="y",l=_(p,s,t);if((n||a)&&r.hoversubplots==="axis"&&l[0])for(var u=(n?p.xa:p.ya)._subplotsWith,h=r.gd,c=T({},p),x=0;x<u.length;x++){var d=u[x];if(d!==p.xa._id+p.ya._id){a?c.xa=o(h,d,"x"):c.ya=o(h,d,"y");var v=_(c,s,t,n||a);l=l.concat(v)}}return l}}},97924:function(ee,R,e){var M=e(28888);M.basePlotModule=e(99332),ee.exports=M},54840:function(ee,R,e){var M=e(55795),k=e(3400),o=e(79811),T=e(72760).selectMode;function _(p,s){var t,i,r,n,a,l=p._fullLayout,u=l._size,h=s.trace,c=s.t,x=l._splomScenes[h.uid],d=x.matrixOptions,v=d.cdata,g=l._glcanvas.data()[0].regl,y=l.dragmode;if(v.length!==0){d.lower=h.showupperhalf,d.upper=h.showlowerhalf,d.diagonal=h.diagonal.visible;var m=h._visibleDims,b=v.length,f=x.viewOpts={};for(f.ranges=new Array(b),f.domains=new Array(b),a=0;a<m.length;a++){r=m[a];var S=f.ranges[a]=new Array(4),w=f.domains[a]=new Array(4);(t=o.getFromId(p,h._diag[r][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],w[0]=t.domain[0],w[2]=t.domain[1]),(i=o.getFromId(p,h._diag[r][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],w[1]=i.domain[0],w[3]=i.domain[1])}var E=p._context.plotGlPixelRatio,O=u.l*E,C=u.b*E,P=u.w*E,D=u.h*E;f.viewport=[O,C,P+O,D+C],x.matrix===!0&&(x.matrix=M(g));var U=l.clickmode.indexOf("select")>-1,I=!0;if(T(y)||h.selectedpoints||U){var N=h._length;if(h.selectedpoints){x.selectBatch=h.selectedpoints;var W=h.selectedpoints,F={};for(r=0;r<W.length;r++)F[W[r]]=!0;var j=[];for(r=0;r<N;r++)F[r]||j.push(r);x.unselectBatch=j}var H=c.xpx=new Array(b),te=c.ypx=new Array(b);for(a=0;a<m.length;a++){if(r=m[a],t=o.getFromId(p,h._diag[r][0]))for(H[a]=new Array(N),n=0;n<N;n++)H[a][n]=t.c2p(v[a][n]);if(i=o.getFromId(p,h._diag[r][1]))for(te[a]=new Array(N),n=0;n<N;n++)te[a][n]=i.c2p(v[a][n])}if(x.selectBatch.length||x.unselectBatch.length){var Q=k.extendFlat({},d,x.unselectedOptions,f),$=k.extendFlat({},d,x.selectedOptions,f);x.matrix.update(Q,$),I=!1}}else c.xpx=c.ypx=null;if(I){var K=k.extendFlat({},d,f);x.matrix.update(K,null)}}}ee.exports=function(p,s,t){if(t.length)for(var i=0;i<t.length;i++)_(p,t[i][0])}},72308:function(ee,R,e){var M=e(3400);ee.exports=function(k,o){var T=k._fullLayout,_=o.uid,p=T._splomScenes;p||(p=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=p[o.uid];return t||((t=p[_]=M.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||M.extendFlat(t,s),t}},62500:function(ee,R,e){var M=e(3400),k=M.pushUnique,o=e(43028),T=e(50328);ee.exports=function(_,p){var s=_.cd,t=s[0].trace,i=s[0].t,r=_.scene,n=r.matrixOptions.cdata,a=_.xaxis,l=_.yaxis,u=[];if(!r)return u;var h=!o.hasMarkers(t)&&!o.hasText(t);if(t.visible!==!0||h)return u;var c=T.getDimIndex(t,a),x=T.getDimIndex(t,l);if(c===!1||x===!1)return u;var d=i.xpx[c],v=i.ypx[x],g=n[c],y=n[x],m=(_.scene.selectBatch||[]).slice(),b=[];if(p!==!1&&!p.degenerate)for(var f=0;f<g.length;f++)p.contains([d[f],v[f]],null,f,_)?(u.push({pointNumber:f,x:g[f],y:y[f]}),k(m,f)):m.indexOf(f)!==-1?k(m,f):b.push(f);var S=r.matrixOptions;return m.length||b.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,M.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=m,r.unselectBatch=b,u}},90167:function(ee,R,e){var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),_=e(45464),p=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},_.showlegend,{dflt:!1})};p(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=p({},_.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,ee.exports=s},3832:function(ee,R,e){var M=e(3400),k=e(47128);function o(p){var s,t,i,r,n,a,l,u,h,c,x,d,v=p._x,g=p._y,y=p._z,m=p._len,b=-1/0,f=1/0,S=-1/0,w=1/0,E=-1/0,O=1/0,C="";for(m&&(l=v[0],h=g[0],x=y[0]),m>1&&(u=v[m-1],c=g[m-1],d=y[m-1]),s=0;s<m;s++)b=Math.max(b,v[s]),f=Math.min(f,v[s]),S=Math.max(S,g[s]),w=Math.min(w,g[s]),E=Math.max(E,y[s]),O=Math.min(O,y[s]),r||v[s]===l||(r=!0,C+="x"),n||g[s]===h||(n=!0,C+="y"),a||y[s]===x||(a=!0,C+="z");r||(C+="x"),n||(C+="y"),a||(C+="z");var P=T(p._x),D=T(p._y),U=T(p._z);C=(C=(C=C.replace("x",(l>u?"-":"+")+"x")).replace("y",(h>c?"-":"+")+"y")).replace("z",(x>d?"-":"+")+"z");var I=function(){m=0,P=[],D=[],U=[]};(!m||m<P.length*D.length*U.length)&&I();var N=function(ye){return ye==="x"?v:ye==="y"?g:y},W=function(ye){return ye==="x"?P:ye==="y"?D:U},F=function(ye){return ye[m-1]<ye[0]?-1:1},j=N(C[1]),H=N(C[3]),te=N(C[5]),Q=W(C[1]).length,$=W(C[3]).length,K=W(C[5]).length,X=!1,Y=function(ye,me,Me){return Q*($*ye+me)+Me},re=F(N(C[1])),se=F(N(C[3])),ae=F(N(C[5]));for(s=0;s<K-1;s++){for(t=0;t<$-1;t++){for(i=0;i<Q-1;i++){var ce=Y(s,t,i),fe=Y(s,t,i+1),he=Y(s,t+1,i),ve=Y(s+1,t,i);if(j[ce]*re<j[fe]*re&&H[ce]*se<H[he]*se&&te[ce]*ae<te[ve]*ae||(X=!0),X)break}if(X)break}if(X)break}return X&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),I()),{xMin:f,yMin:w,zMin:O,xMax:b,yMax:S,zMax:E,Xs:P,Ys:D,Zs:U,len:m,fill:C}}function T(p){return M.distinctVals(p).vals}function _(p,s){if(s===void 0&&(s=p.length),M.isTypedArray(p))return p.subarray(0,s);for(var t=[],i=0;i<s;i++)t[i]=+p[i];return t}ee.exports={calc:function(p,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=_(s.u,s._len),s._v=_(s.v,s._len),s._w=_(s.w,s._len),s._x=_(s.x,s._len),s._y=_(s.y,s._len),s._z=_(s.z,s._len);var t=o(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var i,r,n,a=0;s.starts&&(i=_(s.starts.x||[]),r=_(s.starts.y||[]),n=_(s.starts.z||[]),a=Math.min(i.length,r.length,n.length)),s._startsX=i||[],s._startsY=r||[],s._startsZ=n||[];var l,u=0,h=1/0;for(l=0;l<s._len;l++){var c=s._u[l],x=s._v[l],d=s._w[l],v=Math.sqrt(c*c+x*x+d*d);u=Math.max(u,v),h=Math.min(h,v)}for(k(p,s,{vals:[h,u],containerStr:"",cLetter:"c"}),l=0;l<a;l++){var g=i[l];t.xMax=Math.max(t.xMax,g),t.xMin=Math.min(t.xMin,g);var y=r[l];t.yMax=Math.max(t.yMax,y),t.yMin=Math.min(t.yMin,y);var m=n[l];t.zMax=Math.max(t.zMax,m),t.zMin=Math.min(t.zMin,m)}s._slen=a,s._normMax=u,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:_,processGrid:o}},25668:function(ee,R,e){var M=e(67792).gl_streamtube3d,k=M.createTubeMesh,o=e(3400),T=e(33040).parseColorScale,_=e(8932).extractOpts,p=e(52094),s={xaxis:0,yaxis:1,zaxis:2};function t(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var i=t.prototype;function r(l){var u=l.length;return u>2?l.slice(1,u-1):u===2?[(l[0]+l[1])/2]:l}function n(l){var u=l.length;return u===1?[.5,.5]:[l[1]-l[0],l[u-1]-l[u-2]]}function a(l,u){var h=l.fullSceneLayout,c=l.dataScale,x=u._len,d={};function v(Q,$){var K=h[$],X=c[s[$]];return o.simpleMap(Q,function(Y){return K.d2l(Y)*X})}if(d.vectors=p(v(u._u,"xaxis"),v(u._v,"yaxis"),v(u._w,"zaxis"),x),!x)return{positions:[],cells:[]};var g=v(u._Xs,"xaxis"),y=v(u._Ys,"yaxis"),m=v(u._Zs,"zaxis");if(d.meshgrid=[g,y,m],d.gridFill=u._gridFill,u._slen)d.startingPositions=p(v(u._startsX,"xaxis"),v(u._startsY,"yaxis"),v(u._startsZ,"zaxis"));else{for(var b=y[0],f=r(g),S=r(m),w=new Array(f.length*S.length),E=0,O=0;O<f.length;O++)for(var C=0;C<S.length;C++)w[E++]=[f[O],b,S[C]];d.startingPositions=w}d.colormap=T(u),d.tubeSize=u.sizeref,d.maxLength=u.maxdisplayed;var P=v(u._xbnds,"xaxis"),D=v(u._ybnds,"yaxis"),U=v(u._zbnds,"zaxis"),I=n(g),N=n(y),W=n(m),F=[[P[0]-I[0],D[0]-N[0],U[0]-W[0]],[P[1]+I[1],D[1]+N[1],U[1]+W[1]]],j=M(d,F),H=_(u);j.vertexIntensityBounds=[H.min/u._normMax,H.max/u._normMax];var te=u.lightposition;return j.lightPosition=[te.x,te.y,te.z],j.ambient=u.lighting.ambient,j.diffuse=u.lighting.diffuse,j.specular=u.lighting.specular,j.roughness=u.lighting.roughness,j.fresnel=u.lighting.fresnel,j.opacity=u.opacity,u._pad=j.tubeScale*u.sizeref*2,j}i.handlePick=function(l){var u=this.scene.fullSceneLayout,h=this.scene.dataScale;function c(v,g){var y=u[g],m=h[s[g]];return y.l2c(v)/m}if(l.object===this.mesh){var x=l.data.position,d=l.data.velocity;return l.traceCoordinate=[c(x[0],"xaxis"),c(x[1],"yaxis"),c(x[2],"zaxis"),c(d[0],"xaxis"),c(d[1],"yaxis"),c(d[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(l){this.data=l;var u=a(this.scene,l);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(l,u){var h=l.glplot.gl,c=a(l,u),x=k(h,c),d=new t(l,u.uid);return d.mesh=x,d.data=u,x._trace=d,l.glplot.add(x),d}},54304:function(ee,R,e){var M=e(3400),k=e(27260),o=e(90167);ee.exports=function(T,_,p,s){function t(h,c){return M.coerce(T,_,o,h,c)}var i=t("u"),r=t("v"),n=t("w"),a=t("x"),l=t("y"),u=t("z");i&&i.length&&r&&r.length&&n&&n.length&&a&&a.length&&l&&l.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,_,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),_._length=null):_.visible=!1}},15436:function(ee,R,e){ee.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(M,k){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=k.traceCoordinate[3],M.tubev=k.traceCoordinate[4],M.tubew=k.traceCoordinate[5],M.norm=k.traceCoordinate[6],M.divergence=k.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},424:function(ee,R,e){var M=e(45464),k=e(21776).Ks,o=e(21776).Gw,T=e(49084),_=e(86968).u,p=e(74996),s=e(27328),t=e(92880).extendFlat,i=e(98192).c;ee.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},p.marker.line.color,{dflt:null}),width:t({},p.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:p.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:o({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:p.hovertext,hoverinfo:t({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:p.textfont,insidetextorientation:p.insidetextorientation,insidetextfont:p.insidetextfont,outsidetextfont:t({},p.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:p.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:_({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(ee,R,e){var M=e(7316);R.name="sunburst",R.plot=function(k,o,T,_){M.plotBasePlot(R.name,k,o,T,_)},R.clean=function(k,o,T,_){M.cleanBasePlot(R.name,k,o,T,_)}},3776:function(ee,R,e){var M=e(74148),k=e(38248),o=e(3400),T=e(8932).makeColorScaleFuncFromTrace,_=e(45768).makePullColorFn,p=e(45768).generateExtendedColors,s=e(8932).calc,t=e(39032).ALMOST_EQUAL,i={},r={},n={};function a(l,u,h){var c=0,x=l.children;if(x){for(var d=x.length,v=0;v<d;v++)c+=a(x[v],u,h);h.branches&&c++}else h.leaves&&c++;return l.value=l.data.data.value=c,u._values||(u._values=[]),u._values[l.data.data.i]=c,c}R.calc=function(l,u){var h,c,x,d,v,g,y=l._fullLayout,m=u.ids,b=o.isArrayOrTypedArray(m),f=u.labels,S=u.parents,w=u.values,E=o.isArrayOrTypedArray(w),O=[],C={},P={},D=function(ae){return ae||typeof ae=="number"},U=function(ae){return!E||k(w[ae])&&w[ae]>=0};b?(h=Math.min(m.length,S.length),c=function(ae){return D(m[ae])&&U(ae)},x=function(ae){return String(m[ae])}):(h=Math.min(f.length,S.length),c=function(ae){return D(f[ae])&&U(ae)},x=function(ae){return String(f[ae])}),E&&(h=Math.min(h,w.length));for(var I=0;I<h;I++)if(c(I)){var N=x(I),W=D(S[I])?String(S[I]):"",F={i:I,id:N,pid:W,label:D(f[I])?String(f[I]):""};E&&(F.v=+w[I]),O.push(F),v=N,C[d=W]?C[d].push(v):C[d]=[v],P[v]=1}if(C[""]){if(C[""].length>1){for(var j=o.randstr(),H=0;H<O.length;H++)O[H].pid===""&&(O[H].pid=j);O.unshift({hasMultipleRoots:!0,id:j,pid:"",label:""})}}else{var te,Q=[];for(te in C)P[te]||Q.push(te);if(Q.length!==1)return o.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",Q.join(", ")].join(" "));te=Q[0],O.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{g=M.stratify().id(function(ae){return ae.id}).parentId(function(ae){return ae.pid})(O)}catch(ae){return o.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ae.message].join(" "))}var $=M.hierarchy(g),K=!1;if(E)switch(u.branchvalues){case"remainder":$.sum(function(ae){return ae.data.v});break;case"total":$.each(function(ae){var ce=ae.data.data,fe=ce.v;if(ae.children){var he=ae.children.reduce(function(ve,ye){return ve+ye.data.data.v},0);if((ce.hasImpliedRoot||ce.hasMultipleRoots)&&(fe=he),fe<he*t)return K=!0,o.warn(["Total value for node",ae.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,fe,`
children sum =`,he].join(" "))}ae.value=fe})}else a($,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!K){var X,Y;u.sort&&$.sort(function(ae,ce){return ce.value-ae.value});var re=u.marker.colors||[],se=!!re.length;return u._hasColorscale?(se||(re=E?u.values:u._values),s(l,u,{vals:re,containerStr:"marker",cLetter:"c"}),Y=T(u.marker)):X=_(y["_"+u.type+"colormap"]),$.each(function(ae){var ce=ae.data.data;ce.color=u._hasColorscale?Y(re[ce.i]):X(re[ce.i],ce.id)}),O[0].hierarchy=$,O}},R._runCrossTraceCalc=function(l,u){var h=u._fullLayout,c=u.calcdata,x=h[l+"colorway"],d=h["_"+l+"colormap"];h["extend"+l+"colors"]&&(x=p(x,l==="icicle"?n:l==="treemap"?r:i));var v,g=0;function y(f){var S=f.data.data,w=S.id;S.color===!1&&(d[w]?S.color=d[w]:f.parent?f.parent.parent?S.color=f.parent.data.data.color:(d[w]=S.color=x[g%x.length],g++):S.color=v)}for(var m=0;m<c.length;m++){var b=c[m][0];b.trace.type===l&&b.hierarchy&&(v=b.trace.root.color,b.hierarchy.each(y))}},R.crossTraceCalc=function(l){return R._runCrossTraceCalc("sunburst",l)}},27328:function(ee){ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(ee,R,e){var M=e(3400),k=e(424),o=e(86968).Q,T=e(31508).handleText,_=e(74174).handleMarkerDefaults,p=e(8932),s=p.hasColorscale,t=p.handleDefaults;ee.exports=function(i,r,n,a){function l(v,g){return M.coerce(i,r,k,v,g)}var u=l("labels"),h=l("parents");if(u&&u.length&&h&&h.length){var c=l("values");c&&c.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),_(i,r,a,l);var x=r._hasColorscale=s(i,"marker","colors")||(i.marker||{}).coloraxis;x&&t(i,r,a,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",x?1:.7);var d=l("text");l("texttemplate"),r.texttemplate||l("textinfo",M.isArrayOrTypedArray(d)?"text+label":"label"),l("hovertext"),l("hovertemplate"),T(i,r,a,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),o(r,a,l),r._length=null}else r.visible=!1}},60404:function(ee,R,e){var M=e(43616),k=e(76308);ee.exports=function(o,T,_,p,s){var t=T.data.data,i=t.i,r=s||t.color;if(i>=0){T.i=t.i;var n=_.marker;n.pattern&&n.colors&&n.pattern.shape||(n.color=r,T.color=r),M.pointStyle(o,_,p,T)}else k.fill(o,r)}},45716:function(ee,R,e){var M=e(33428),k=e(24040),o=e(10624).appendArrayPointValue,T=e(93024),_=e(3400),p=e(95924),s=e(78176),t=e(69656).formatPieValue;function i(r,n,a){for(var l=r.data.data,u={curveNumber:n.index,pointNumber:l.i,data:n._input,fullData:n},h=0;h<a.length;h++){var c=a[h];c in r&&(u[c]=r[c])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(u.parent=r.parentString),o(u,n,l.i),u}ee.exports=function(r,n,a,l,u){var h=l[0],c=h.trace,x=h.hierarchy,d=c.type==="sunburst",v=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),r.on("mouseover",function(g){var y=a._fullLayout;if(!a._dragging&&y.hovermode!==!1){var m,b=a._fullData[c.index],f=g.data.data,S=f.i,w=s.isHierarchyRoot(g),E=s.getParent(x,g),O=s.getValue(g),C=function(re){return _.castOption(b,S,re)},P=C("hovertemplate"),D=T.castHoverinfo(b,y,S),U=y.separators;if(P||D&&D!=="none"&&D!=="skip"){var I,N;d&&(I=h.cx+g.pxmid[0]*(1-g.rInscribed),N=h.cy+g.pxmid[1]*(1-g.rInscribed)),v&&(I=g._hoverX,N=g._hoverY);var W,F={},j=[],H=[],te=function(re){return j.indexOf(re)!==-1};D&&(j=D==="all"?b._module.attributes.hoverinfo.flags:D.split("+")),F.label=f.label,te("label")&&F.label&&H.push(F.label),f.hasOwnProperty("v")&&(F.value=f.v,F.valueLabel=t(F.value,U),te("value")&&H.push(F.valueLabel)),F.currentPath=g.currentPath=s.getPath(g.data),te("current path")&&!w&&H.push(F.currentPath);var Q=[],$=function(){Q.indexOf(W)===-1&&(H.push(W),Q.push(W))};F.percentParent=g.percentParent=O/s.getValue(E),F.parent=g.parentString=s.getPtLabel(E),te("percent parent")&&(W=s.formatPercent(F.percentParent,U)+" of "+F.parent,$()),F.percentEntry=g.percentEntry=O/s.getValue(n),F.entry=g.entry=s.getPtLabel(n),!te("percent entry")||w||g.onPathbar||(W=s.formatPercent(F.percentEntry,U)+" of "+F.entry,$()),F.percentRoot=g.percentRoot=O/s.getValue(x),F.root=g.root=s.getPtLabel(x),te("percent root")&&!w&&(W=s.formatPercent(F.percentRoot,U)+" of "+F.root,$()),F.text=C("hovertext")||C("text"),te("text")&&(W=F.text,_.isValidTextValue(W)&&H.push(W)),m=[i(g,b,u.eventDataKeys)];var K={trace:b,y:N,_x0:g._x0,_x1:g._x1,_y0:g._y0,_y1:g._y1,text:H.join("<br>"),name:P||te("name")?b.name:void 0,color:C("hoverlabel.bgcolor")||f.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),fontWeight:C("hoverlabel.font.weight"),fontStyle:C("hoverlabel.font.style"),fontVariant:C("hoverlabel.font.variant"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:F,eventData:m};d&&(K.x0=I-g.rInscribed*g.rpx1,K.x1=I+g.rInscribed*g.rpx1,K.idealAlign=g.pxmid[0]<0?"left":"right"),v&&(K.x=I,K.idealAlign=I<0?"left":"right");var X=[];T.loneHover(K,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:a,inOut_bbox:X}),m[0].bbox=X[0],c._hasHoverLabel=!0}if(v){var Y=r.select("path.surface");u.styleOne(Y,g,b,a,{hovered:!0})}c._hasHoverEvent=!0,a.emit("plotly_hover",{points:m||[i(g,b,u.eventDataKeys)],event:M.event})}}),r.on("mouseout",function(g){var y=a._fullLayout,m=a._fullData[c.index],b=M.select(this).datum();if(c._hasHoverEvent&&(g.originalEvent=M.event,a.emit("plotly_unhover",{points:[i(b,m,u.eventDataKeys)],event:M.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(T.loneUnhover(y._hoverlayer.node()),c._hasHoverLabel=!1),v){var f=r.select("path.surface");u.styleOne(f,b,m,a,{hovered:!1})}}),r.on("click",function(g){var y=a._fullLayout,m=a._fullData[c.index],b=d&&(s.isHierarchyRoot(g)||s.isLeaf(g)),f=s.getPtId(g),S=s.isEntry(g)?s.findEntryWithChild(x,f):s.findEntryWithLevel(x,f),w=s.getPtId(S),E={points:[i(g,m,u.eventDataKeys)],event:M.event};b||(E.nextLevel=w);var O=p.triggerHandler(a,"plotly_"+c.type+"click",E);if(O!==!1&&y.hovermode&&(a._hoverdata=[i(g,m,u.eventDataKeys)],T.click(a,M.event)),!b&&O!==!1&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",m,y._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:w}],traces:[c.index]},P={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(y._hoverlayer.node()),k.call("animate",a,C,P)}})}},78176:function(ee,R,e){var M=e(3400),k=e(76308),o=e(93972),T=e(69656);function _(p){return p.data.data.pid}R.findEntryWithLevel=function(p,s){var t;return s&&p.eachAfter(function(i){if(R.getPtId(i)===s)return t=i.copy()}),t||p},R.findEntryWithChild=function(p,s){var t;return p.eachAfter(function(i){for(var r=i.children||[],n=0;n<r.length;n++){var a=r[n];if(R.getPtId(a)===s)return t=i.copy()}}),t||p},R.isEntry=function(p){return!p.parent},R.isLeaf=function(p){return!p.children},R.getPtId=function(p){return p.data.data.id},R.getPtLabel=function(p){return p.data.data.label},R.getValue=function(p){return p.value},R.isHierarchyRoot=function(p){return _(p)===""},R.setSliceCursor=function(p,s,t){var i=t.isTransitioning;if(!i){var r=p.datum();i=t.hideOnRoot&&R.isHierarchyRoot(r)||t.hideOnLeaves&&R.isLeaf(r)}o(p,i?null:"pointer")},R.getInsideTextFontKey=function(p,s,t,i,r){var n=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=t.data.data.i;return M.castOption(s,a,n+"."+p)||M.castOption(s,a,"textfont."+p)||i.size},R.getOutsideTextFontKey=function(p,s,t,i){var r=t.data.data.i;return M.castOption(s,r,"outsidetextfont."+p)||M.castOption(s,r,"textfont."+p)||i.size},R.isOutsideText=function(p,s){return!p._hasColorscale&&R.isHierarchyRoot(s)},R.determineTextFont=function(p,s,t,i){return R.isOutsideText(p,s)?function(r,n,a){return{color:R.getOutsideTextFontKey("color",r,n,a),family:R.getOutsideTextFontKey("family",r,n,a),size:R.getOutsideTextFontKey("size",r,n,a),weight:R.getOutsideTextFontKey("weight",r,n,a),style:R.getOutsideTextFontKey("style",r,n,a),variant:R.getOutsideTextFontKey("variant",r,n,a),textcase:R.getOutsideTextFontKey("textcase",r,n,a),lineposition:R.getOutsideTextFontKey("lineposition",r,n,a),shadow:R.getOutsideTextFontKey("shadow",r,n,a)}}(p,s,t):function(r,n,a,l){var u=(l||{}).onPathbar,h=n.data.data,c=h.i,x=M.castOption(r,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!x&&r._input.textfont&&(x=M.castOption(r._input,c,"textfont.color")),{color:x||k.contrast(h.color),family:R.getInsideTextFontKey("family",r,n,a,l),size:R.getInsideTextFontKey("size",r,n,a,l),weight:R.getInsideTextFontKey("weight",r,n,a,l),style:R.getInsideTextFontKey("style",r,n,a,l),variant:R.getInsideTextFontKey("variant",r,n,a,l),textcase:R.getInsideTextFontKey("textcase",r,n,a,l),lineposition:R.getInsideTextFontKey("lineposition",r,n,a,l),shadow:R.getInsideTextFontKey("shadow",r,n,a,l)}}(p,s,t,i)},R.hasTransition=function(p){return!!(p&&p.duration>0)},R.getMaxDepth=function(p){return p.maxdepth>=0?p.maxdepth:1/0},R.isHeader=function(p,s){return!(R.isLeaf(p)||p.depth===s._maxDepth-1)},R.getParent=function(p,s){return R.findEntryWithLevel(p,_(s))},R.listPath=function(p,s){var t=p.parent;if(!t)return[];var i=s?[t.data[s]]:[t];return R.listPath(t,s).concat(i)},R.getPath=function(p){return R.listPath(p,"label").join("/")+"/"},R.formatValue=T.formatPieValue,R.formatPercent=function(p,s){var t=M.formatPercent(p,0);return t==="0%"&&(t=T.formatPiePercent(p,s)),t}},5621:function(ee,R,e){ee.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(ee){ee.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(ee,R,e){var M=e(3400),k=e(84920);ee.exports=function(o,T){function _(p,s){return M.coerce(o,T,k,p,s)}_("sunburstcolorway",T.colorway),_("extendsunburstcolors")}},96488:function(ee,R,e){var M=e(33428),k=e(74148),o=e(67756).qy,T=e(43616),_=e(3400),p=e(72736),s=e(82744),t=s.recordMinTextSize,i=s.clearMinTextSize,r=e(37820),n=e(69656).getRotationAngle,a=r.computeTransform,l=r.transformInsideText,u=e(85676).styleOne,h=e(60100).resizeText,c=e(45716),x=e(27328),d=e(78176);function v(y,m,b,f){var S=y._context.staticPlot,w=y._fullLayout,E=!w.uniformtext.mode&&d.hasTransition(f),O=M.select(b).selectAll("g.slice"),C=m[0],P=C.trace,D=C.hierarchy,U=d.findEntryWithLevel(D,P.level),I=d.getMaxDepth(P),N=w._size,W=P.domain,F=N.w*(W.x[1]-W.x[0]),j=N.h*(W.y[1]-W.y[0]),H=.5*Math.min(F,j),te=C.cx=N.l+N.w*(W.x[1]+W.x[0])/2,Q=C.cy=N.t+N.h*(1-W.y[0])-j/2;if(!U)return O.remove();var $=null,K={};E&&O.each(function(ie){K[d.getPtId(ie)]={rpx0:ie.rpx0,rpx1:ie.rpx1,x0:ie.x0,x1:ie.x1,transform:ie.transform},!$&&d.isEntry(ie)&&($=ie)});var X=function(ie){return k.partition().size([2*Math.PI,ie.height+1])(ie)}(U).descendants(),Y=U.height+1,re=0,se=I;C.hasMultipleRoots&&d.isHierarchyRoot(U)&&(X=X.slice(1),Y-=1,re=1,se+=1),X=X.filter(function(ie){return ie.y1<=se});var ae=n(P.rotation);ae&&X.forEach(function(ie){ie.x0+=ae,ie.x1+=ae});var ce=Math.min(Y,I),fe=function(ie){return(ie-re)/ce*H},he=function(ie,de){return[ie*Math.cos(de),-ie*Math.sin(de)]},ve=function(ie){return _.pathAnnulus(ie.rpx0,ie.rpx1,ie.x0,ie.x1,te,Q)},ye=function(ie){return te+g(ie)[0]*(ie.transform.rCenter||0)+(ie.transform.x||0)},me=function(ie){return Q+g(ie)[1]*(ie.transform.rCenter||0)+(ie.transform.y||0)};(O=O.data(X,d.getPtId)).enter().append("g").classed("slice",!0),E?O.exit().transition().each(function(){var ie=M.select(this);ie.select("path.surface").transition().attrTween("d",function(de){var Se=function(_e){var we,Ae=d.getPtId(_e),Oe=K[Ae],ze=K[d.getPtId(U)];if(ze){var pe=(_e.x1>ze.x1?2*Math.PI:0)+ae;we=_e.rpx1<ze.rpx1?{x0:_e.x0,x1:_e.x1,rpx0:0,rpx1:0}:{x0:pe,x1:pe,rpx0:_e.rpx0,rpx1:_e.rpx1}}else{var be,ke=d.getPtId(_e.parent);O.each(function(Ze){if(d.getPtId(Ze)===ke)return be=Ze});var Ie,Ee=be.children;Ee.forEach(function(Ze,rt){if(d.getPtId(Ze)===Ae)return Ie=rt});var Be=Ee.length,Ve=o(be.x0,be.x1);we={rpx0:H,rpx1:H,x0:Ve(Ie/Be),x1:Ve((Ie+1)/Be)}}return o(Oe,we)}(de);return function(_e){return ve(Se(_e))}}),ie.select("g.slicetext").attr("opacity",0)}).remove():O.exit().remove(),O.order();var Me=null;if(E&&$){var Pe=d.getPtId($);O.each(function(ie){Me===null&&d.getPtId(ie)===Pe&&(Me=ie.x1)})}var ge=O;function oe(ie){var de=ie.parent,Se=K[d.getPtId(de)],_e={};if(Se){var we=de.children,Ae=we.indexOf(ie),Oe=we.length,ze=o(Se.x0,Se.x1);_e.x0=ze(Ae/Oe),_e.x1=ze(Ae/Oe)}else _e.x0=_e.x1=0;return _e}E&&(ge=ge.transition().each("end",function(){var ie=M.select(this);d.setSliceCursor(ie,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ge.each(function(ie){var de=M.select(this),Se=_.ensureSingle(de,"path","surface",function(pe){pe.style("pointer-events",S?"none":"all")});ie.rpx0=fe(ie.y0),ie.rpx1=fe(ie.y1),ie.xmid=(ie.x0+ie.x1)/2,ie.pxmid=he(ie.rpx1,ie.xmid),ie.midangle=-(ie.xmid-Math.PI/2),ie.startangle=-(ie.x0-Math.PI/2),ie.stopangle=-(ie.x1-Math.PI/2),ie.halfangle=.5*Math.min(_.angleDelta(ie.x0,ie.x1)||Math.PI,Math.PI),ie.ring=1-ie.rpx0/ie.rpx1,ie.rInscribed=function(pe){return pe.rpx0===0&&_.isFullCircle([pe.x0,pe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(pe.halfangle)),pe.ring/2))}(ie),E?Se.transition().attrTween("d",function(pe){var be=function(ke){var Ie,Ee=K[d.getPtId(ke)],Be={x0:ke.x0,x1:ke.x1,rpx0:ke.rpx0,rpx1:ke.rpx1};if(Ee)Ie=Ee;else if($)if(ke.parent)if(Me){var Ve=(ke.x1>Me?2*Math.PI:0)+ae;Ie={x0:Ve,x1:Ve}}else Ie={rpx0:H,rpx1:H},_.extendFlat(Ie,oe(ke));else Ie={rpx0:0,rpx1:0};else Ie={x0:ae,x1:ae};return o(Ie,Be)}(pe);return function(ke){return ve(be(ke))}}):Se.attr("d",ve),de.call(c,U,y,m,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning}),Se.call(u,ie,P,y);var _e=_.ensureSingle(de,"g","slicetext"),we=_.ensureSingle(_e,"text","",function(pe){pe.attr("data-notex",1)}),Ae=_.ensureUniformFontSize(y,d.determineTextFont(P,ie,w.font));we.text(R.formatSliceLabel(ie,U,P,m,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Ae).call(p.convertToTspans,y);var Oe=T.bBox(we.node());ie.transform=l(Oe,ie,C),ie.transform.targetX=ye(ie),ie.transform.targetY=me(ie);var ze=function(pe,be){var ke=pe.transform;return a(ke,be),ke.fontSize=Ae.size,t(P.type,ke,w),_.getTextTransform(ke)};E?we.transition().attrTween("transform",function(pe){var be=function(ke){var Ie,Ee=K[d.getPtId(ke)],Be=ke.transform;if(Ee)Ie=Ee;else if(Ie={rpx1:ke.rpx1,transform:{textPosAngle:Be.textPosAngle,scale:0,rotate:Be.rotate,rCenter:Be.rCenter,x:Be.x,y:Be.y}},$)if(ke.parent)if(Me){var Ve=ke.x1>Me?2*Math.PI:0;Ie.x0=Ie.x1=Ve}else _.extendFlat(Ie,oe(ke));else Ie.x0=Ie.x1=ae;else Ie.x0=Ie.x1=ae;var Ze=o(Ie.transform.textPosAngle,ke.transform.textPosAngle),rt=o(Ie.rpx1,ke.rpx1),it=o(Ie.x0,ke.x0),dt=o(Ie.x1,ke.x1),vt=o(Ie.transform.scale,Be.scale),ht=o(Ie.transform.rotate,Be.rotate),Qe=Be.rCenter===0?3:Ie.transform.rCenter===0?1/3:1,Je=o(Ie.transform.rCenter,Be.rCenter);return function(Tt){var Ot=rt(Tt),Pt=it(Tt),Mt=dt(Tt),He=function(Ne){return Je(Math.pow(Ne,Qe))}(Tt),Ye={pxmid:he(Ot,(Pt+Mt)/2),rpx1:Ot,transform:{textPosAngle:Ze(Tt),rCenter:He,x:Be.x,y:Be.y}};return t(P.type,Be,w),{transform:{targetX:ye(Ye),targetY:me(Ye),scale:vt(Tt),rotate:ht(Tt),rCenter:He}}}}(pe);return function(ke){return ze(be(ke),Oe)}}):we.attr("transform",ze(ie,Oe))})}function g(y){return m=y.rpx1,b=y.transform.textPosAngle,[m*Math.sin(b),-m*Math.cos(b)];var m,b}R.plot=function(y,m,b,f){var S,w,E=y._fullLayout,O=E._sunburstlayer,C=!b,P=!E.uniformtext.mode&&d.hasTransition(b);i("sunburst",E),(S=O.selectAll("g.trace.sunburst").data(m,function(D){return D[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(f&&(w=f()),M.transition().duration(b.duration).ease(b.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){O.selectAll("g.trace").each(function(D){v(y,D,this,b)})})):(S.each(function(D){v(y,D,this,b)}),E.uniformtext.mode&&h(y,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},R.formatSliceLabel=function(y,m,b,f,S){var w=b.texttemplate,E=b.textinfo;if(!(w||E&&E!=="none"))return"";var O=S.separators,C=f[0],P=y.data.data,D=C.hierarchy,U=d.isHierarchyRoot(y),I=d.getParent(D,y),N=d.getValue(y);if(!w){var W,F=E.split("+"),j=function(se){return F.indexOf(se)!==-1},H=[];if(j("label")&&P.label&&H.push(P.label),P.hasOwnProperty("v")&&j("value")&&H.push(d.formatValue(P.v,O)),!U){j("current path")&&H.push(d.getPath(y.data));var te=0;j("percent parent")&&te++,j("percent entry")&&te++,j("percent root")&&te++;var Q=te>1;if(te){var $,K=function(se){W=d.formatPercent($,O),Q&&(W+=" of "+se),H.push(W)};j("percent parent")&&!U&&($=N/d.getValue(I),K("parent")),j("percent entry")&&($=N/d.getValue(m),K("entry")),j("percent root")&&($=N/d.getValue(D),K("root"))}}return j("text")&&(W=_.castOption(b,P.i,"text"),_.isValidTextValue(W)&&H.push(W)),H.join("<br>")}var X=_.castOption(b,P.i,"texttemplate");if(!X)return"";var Y={};P.label&&(Y.label=P.label),P.hasOwnProperty("v")&&(Y.value=P.v,Y.valueLabel=d.formatValue(P.v,O)),Y.currentPath=d.getPath(y.data),U||(Y.percentParent=N/d.getValue(I),Y.percentParentLabel=d.formatPercent(Y.percentParent,O),Y.parent=d.getPtLabel(I)),Y.percentEntry=N/d.getValue(m),Y.percentEntryLabel=d.formatPercent(Y.percentEntry,O),Y.entry=d.getPtLabel(m),Y.percentRoot=N/d.getValue(D),Y.percentRootLabel=d.formatPercent(Y.percentRoot,O),Y.root=d.getPtLabel(D),P.hasOwnProperty("color")&&(Y.color=P.color);var re=_.castOption(b,P.i,"text");return(_.isValidTextValue(re)||re==="")&&(Y.text=re),Y.customdata=_.castOption(b,P.i,"customdata"),_.texttemplateString(X,Y,S._d3locale,Y,b._meta||{})}},85676:function(ee,R,e){var M=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,_=e(60404);function p(s,t,i,r){var n=t.data.data,a=!t.children,l=n.i,u=o.castOption(i,l,"marker.line.color")||k.defaultLine,h=o.castOption(i,l,"marker.line.width")||0;s.call(_,t,i,r).style("stroke-width",h).call(k.stroke,u).style("opacity",a?i.leaf.opacity:null)}ee.exports={style:function(s){var t=s._fullLayout._sunburstlayer.selectAll(".trace");T(s,t,"sunburst"),t.each(function(i){var r=M.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){M.select(this).call(p,a,n,s)})})},styleOne:p}},16716:function(ee,R,e){var M=e(76308),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,_=e(45464),p=e(92880).extendFlat,s=e(67824).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=ee.exports=s(p({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:p({},k.zauto,{}),zmin:p({},k.zmin,{}),zmax:p({},k.zmax,{})},hoverinfo:p({},_.hoverinfo),showlegend:p({},_.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},56576:function(ee,R,e){var M=e(47128);ee.exports=function(k,o){o.surfacecolor?M(k,o,{vals:o.surfacecolor,containerStr:"",cLetter:"c"}):M(k,o,{vals:o.z,containerStr:"",cLetter:"c"})}},79164:function(ee,R,e){var M=e(67792).gl_surface3d,k=e(67792).ndarray,o=e(67792).ndarray_linear_interpolate.d2,T=e(70448),_=e(11240),p=e(3400).isArrayOrTypedArray,s=e(33040).parseColorScale,t=e(43080),i=e(8932).extractOpts;function r(b,f,S){this.scene=b,this.uid=S,this.surface=f,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(b,f,S,w){var E=p(this.data.x)?p(this.data.x[0])?this.data.x[f][b]:this.data.x[b]:b;return S===void 0?E:w.d2l(E,0,S)},n.getYat=function(b,f,S,w){var E=p(this.data.y)?p(this.data.y[0])?this.data.y[f][b]:this.data.y[f]:f;return S===void 0?E:w.d2l(E,0,S)},n.getZat=function(b,f,S,w){var E=this.data.z[f][b];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[f][b]),S===void 0?E:w.d2l(E,0,S)},n.handlePick=function(b){if(b.object===this.surface){var f=(b.data.index[0]-1)/this.dataScaleX-1,S=(b.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round(f),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);b.index=[w,E],b.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],b.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var O=0;O<3;O++)b.dataCoordinate[O]!=null&&(b.dataCoordinate[O]*=this.scene.dataScale[O]);var C=this.data.hovertext||this.data.text;return p(C)&&C[E]&&C[E][w]!==void 0?b.textLabel=C[E][w]:b.textLabel=C||"",b.data.dataCoordinate=b.dataCoordinate.slice(),this.surface.highlight(b.data),this.scene.glplot.spikes.position=b.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(b,f){if(b<f)return 0;for(var S=0;Math.floor(b%f)===0;)b/=f,S++;return S}function u(b){for(var f=[],S=0;S<a.length;S++){var w=a[S];f.push(l(b,w))}return f}function h(b){for(var f=u(b),S=b,w=0;w<a.length;w++)if(f[w]>0){S=a[w];break}return S}function c(b,f){if(!(b<1||f<1)){for(var S=u(b),w=u(f),E=1,O=0;O<a.length;O++)E*=Math.pow(a[O],Math.max(S[O],w[O]));return E}}n.calcXnums=function(b){var f,S=[];for(f=1;f<b;f++){var w=this.getXat(f-1,0),E=this.getXat(f,0);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var O=0;for(f=1;f<b;f++)O+=S[f-1];for(f=1;f<b;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(O/S[f-1]);return S},n.calcYnums=function(b){var f,S=[];for(f=1;f<b;f++){var w=this.getYat(0,f-1),E=this.getYat(0,f);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var O=0;for(f=1;f<b;f++)O+=S[f-1];for(f=1;f<b;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(O/S[f-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],d=x[9],v=x[13];function g(b,f,S){var w=S[8]+S[2]*f[0]+S[5]*f[1];return b[0]=(S[6]+S[0]*f[0]+S[3]*f[1])/w,b[1]=(S[7]+S[1]*f[0]+S[4]*f[1])/w,b}function y(b,f,S){return function(w,E,O,C){for(var P=[0,0],D=w.shape[0],U=w.shape[1],I=0;I<D;I++)for(var N=0;N<U;N++)O(P,[I,N],C),w.set(I,N,o(E,P[0],P[1]))}(b,f,g,S),b}function m(b,f){for(var S=!1,w=0;w<b.length;w++)if(f===b[w]){S=!0;break}S===!1&&b.push(f)}n.estimateScale=function(b,f){for(var S=1+function(E){if(E.length!==0){for(var O=1,C=0;C<E.length;C++)O=c(O,E[C]);return O}}(f===0?this.calcXnums(b):this.calcYnums(b));S<d;)S*=2;for(;S>v;)S--,S/=h(S),++S<d&&(S=v);var w=Math.round(S/b);return w>1?w:1},n.refineCoords=function(b){for(var f=this.dataScaleX,S=this.dataScaleY,w=b[0].shape[0],E=b[0].shape[1],O=0|Math.floor(b[0].shape[0]*f+1),C=0|Math.floor(b[0].shape[1]*S+1),P=1+w+1,D=1+E+1,U=k(new Float32Array(P*D),[P,D]),I=[1/f,0,0,0,1/S,0,0,0,1],N=0;N<b.length;++N){this.surface.padField(U,b[N]);var W=k(new Float32Array(O*C),[O,C]);y(W,U,I),b[N]=W}},n.setContourLevels=function(){var b,f,S,w=[[],[],[]],E=[!1,!1,!1],O=!1;for(b=0;b<3;++b)if(this.showContour[b]&&(O=!0,this.contourSize[b]>0&&this.contourStart[b]!==null&&this.contourEnd[b]!==null&&this.contourEnd[b]>this.contourStart[b]))for(E[b]=!0,f=this.contourStart[b];f<this.contourEnd[b];f+=this.contourSize[b])S=f*this.scene.dataScale[b],m(w[b],S);if(O){var C=[[],[],[]];for(b=0;b<3;++b)this.showContour[b]&&(C[b]=E[b]?w[b]:this.scene.contourLevels[b]);this.surface.update({levels:C})}},n.update=function(b){var f,S,w,E,O=this.scene,C=O.fullSceneLayout,P=this.surface,D=s(b),U=O.dataScale,I=b.z[0].length,N=b._ylength,W=O.contourLevels;this.data=b;var F=[];for(f=0;f<3;f++)for(F[f]=[],S=0;S<I;S++)F[f][S]=[];for(S=0;S<I;S++)for(w=0;w<N;w++)F[0][S][w]=this.getXat(S,w,b.xcalendar,C.xaxis),F[1][S][w]=this.getYat(S,w,b.ycalendar,C.yaxis),F[2][S][w]=this.getZat(S,w,b.zcalendar,C.zaxis);if(b.connectgaps)for(b._emptypoints=_(F[2]),T(F[2],b._emptypoints),b._interpolatedZ=[],S=0;S<I;S++)for(b._interpolatedZ[S]=[],w=0;w<N;w++)b._interpolatedZ[S][w]=F[2][S][w];for(f=0;f<3;f++)for(S=0;S<I;S++)for(w=0;w<N;w++)(E=F[f][S][w])==null?F[f][S][w]=NaN:E=F[f][S][w]*=U[f];for(f=0;f<3;f++)for(S=0;S<I;S++)for(w=0;w<N;w++)(E=F[f][S][w])!=null&&(this.minValues[f]>E&&(this.minValues[f]=E),this.maxValues[f]<E&&(this.maxValues[f]=E));for(f=0;f<3;f++)this.objectOffset[f]=.5*(this.minValues[f]+this.maxValues[f]);for(f=0;f<3;f++)for(S=0;S<I;S++)for(w=0;w<N;w++)(E=F[f][S][w])!=null&&(F[f][S][w]-=this.objectOffset[f]);var j=[k(new Float32Array(I*N),[I,N]),k(new Float32Array(I*N),[I,N]),k(new Float32Array(I*N),[I,N])];for(f=0;f<3;f++)for(S=0;S<I;S++)for(w=0;w<N;w++)j[f].set(S,w,F[f][S][w]);F=[];var H={colormap:D,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!b.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:b.opacityscale,opacity:b.opacity},te=i(b);if(H.intensityBounds=[te.min,te.max],b.surfacecolor){var Q=k(new Float32Array(I*N),[I,N]);for(S=0;S<I;S++)for(w=0;w<N;w++)Q.set(S,w,b.surfacecolor[w][S]);j.push(Q)}else H.intensityBounds[0]*=U[2],H.intensityBounds[1]*=U[2];(v<j[0].shape[0]||v<j[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(j[0].shape[0],0),this.dataScaleY=this.estimateScale(j[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(j)),b.surfacecolor&&(H.intensity=j.pop());var $=[!0,!0,!0],K=["x","y","z"];for(f=0;f<3;++f){var X=b.contours[K[f]];$[f]=X.highlight,H.showContour[f]=X.show||X.highlight,H.showContour[f]&&(H.contourProject[f]=[X.project.x,X.project.y,X.project.z],X.show?(this.showContour[f]=!0,H.levels[f]=W[f],P.highlightColor[f]=H.contourColor[f]=t(X.color),X.usecolormap?P.highlightTint[f]=H.contourTint[f]=0:P.highlightTint[f]=H.contourTint[f]=1,H.contourWidth[f]=X.width,this.contourStart[f]=X.start,this.contourEnd[f]=X.end,this.contourSize[f]=X.size):(this.showContour[f]=!1,this.contourStart[f]=null,this.contourEnd[f]=null,this.contourSize[f]=0),X.highlight&&(H.dynamicColor[f]=t(X.highlightcolor),H.dynamicWidth[f]=X.highlightwidth))}(function(Y){var re=Y[0].rgb,se=Y[Y.length-1].rgb;return re[0]===se[0]&&re[1]===se[1]&&re[2]===se[2]&&re[3]===se[3]})(D)&&(H.vertexColor=!0),H.objectOffset=this.objectOffset,H.coords=j,P.update(H),P.visible=b.visible,P.enableDynamic=$,P.enableHighlight=$,P.snapToData=!0,"lighting"in b&&(P.ambientLight=b.lighting.ambient,P.diffuseLight=b.lighting.diffuse,P.specularLight=b.lighting.specular,P.roughness=b.lighting.roughness,P.fresnel=b.lighting.fresnel),"lightposition"in b&&(P.lightPosition=[b.lightposition.x,b.lightposition.y,b.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ee.exports=function(b,f){var S=b.glplot.gl,w=M({gl:S}),E=new r(b,w,f.uid);return w._trace=E,E.update(f),b.glplot.add(w),E}},60192:function(ee,R,e){var M=e(24040),k=e(3400),o=e(27260),T=e(16716);function _(s,t,i,r){var n=r("opacityscale");n==="max"?t.opacityscale=[[0,.1],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,.1]]:n==="extremes"?t.opacityscale=function(a,l){for(var u=[],h=0;h<32;h++){var c=h/31,x=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,x))])}return u}():function(a){var l=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var u=0;u<a.length;u++){var h=a[u];if(h.length!==2||+h[0]<l)return!1;l=+h[0]}return!0}(n)||(t.opacityscale=void 0)}function p(s,t,i){t in s&&!(i in s)&&(s[i]=s[t])}ee.exports={supplyDefaults:function(s,t,i,r){var n,a;function l(m,b){return k.coerce(s,t,T,m,b)}var u=l("x"),h=l("y"),c=l("z");if(!c||!c.length||u&&u.length<1||h&&h.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?c.length:c[0].length,t._ylength=c.length,M.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],r),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){l(m)});var x=l("surfacecolor"),d=["x","y","z"];for(n=0;n<3;++n){var v="contours."+d[n],g=l(v+".show"),y=l(v+".highlight");if(g||y)for(a=0;a<3;++a)l(v+".project."+d[a]);g&&(l(v+".color"),l(v+".width"),l(v+".usecolormap")),y&&(l(v+".highlightcolor"),l(v+".highlightwidth")),l(v+".start"),l(v+".end"),l(v+".size")}x||(p(s,"zmin","cmin"),p(s,"zmax","cmax"),p(s,"zauto","cauto")),o(s,t,r,l,{prefix:"",cLetter:"c"}),_(0,t,0,l),t._length=null}},opacityscaleDefaults:_}},91304:function(ee,R,e){ee.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(ee,R,e){var M=e(13916),k=e(92880).extendFlat,o=e(67824).overrideAll,T=e(25376),_=e(86968).u,p=e(29736).descriptionOnlyNumbers;(ee.exports=o({domain:_({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(ee,R,e){var M=e(84888)._M,k=e(24752),o="table";R.name=o,R.plot=function(T){var _=M(T.calcdata,o)[0];_.length&&k(T,_)},R.clean=function(T,_,p,s){var t=s._has&&s._has(o),i=_._has&&_._has(o);t&&!i&&s._paperdiv.selectAll(".table").remove()}},39312:function(ee,R,e){var M=e(71688).wrap;ee.exports=function(){return M({})}},23536:function(ee){ee.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(ee,R,e){var M=e(23536),k=e(92880).extendFlat,o=e(38248),T=e(38116).isTypedArray,_=e(38116).isArrayOrTypedArray;function p(l){if(_(l)){for(var u=0,h=0;h<l.length;h++)u=Math.max(u,p(l[h]));return u}return l}function s(l,u){return l+u}function t(l){var u,h=l.slice(),c=1/0,x=0;for(u=0;u<h.length;u++)T(h[u])?h[u]=Array.from(h[u]):_(h[u])||(h[u]=[h[u]]),c=Math.min(c,h[u].length),x=Math.max(x,h[u].length);if(c!==x)for(u=0;u<h.length;u++){var d=x-h[u].length;d&&(h[u]=h[u].concat(i(d)))}return h}function i(l){for(var u=new Array(l),h=0;h<l;h++)u[h]="";return u}function r(l){return l.calcdata.columns.reduce(function(u,h){return h.xIndex<l.xIndex?u+h.columnWidth:u},0)}function n(l,u){return Object.keys(l).map(function(h){return k({},l[h],{auxiliaryBlocks:u})})}function a(l,u){for(var h,c={},x=0,d=0,v={firstRowIndex:null,lastRowIndex:null,rows:[]},g=0,y=0,m=0;m<l.length;m++)h=l[m],v.rows.push({rowIndex:m,rowHeight:h}),((d+=h)>=u||m===l.length-1)&&(c[x]=v,v.key=y++,v.firstRowIndex=g,v.lastRowIndex=m,v={firstRowIndex:null,lastRowIndex:null,rows:[]},x+=d,g=m+1,d=0);return c}ee.exports=function(l,u){var h=t(u.cells.values),c=function(N){return N.slice(u.header.values.length,N.length)},x=t(u.header.values);x.length&&!x[0].length&&(x[0]=[""],x=t(x));var d=x.concat(c(h).map(function(){return i((x[0]||[""]).length)})),v=u.domain,g=Math.floor(l._fullLayout._size.w*(v.x[1]-v.x[0])),y=Math.floor(l._fullLayout._size.h*(v.y[1]-v.y[0])),m=u.header.values.length?d[0].map(function(){return u.header.height}):[M.emptyHeaderHeight],b=h.length?h[0].map(function(){return u.cells.height}):[],f=m.reduce(s,0),S=a(b,y-f+M.uplift),w=n(a(m,f),[]),E=n(S,w),O={},C=u._fullInput.columnorder;_(C)&&(C=Array.from(C)),C=C.concat(c(h.map(function(N,W){return W})));var P=d.map(function(N,W){var F=_(u.columnwidth)?u.columnwidth[Math.min(W,u.columnwidth.length-1)]:u.columnwidth;return o(F)?Number(F):1}),D=P.reduce(s,0);P=P.map(function(N){return N/D*g});var U=Math.max(p(u.header.line.width),p(u.cells.line.width)),I={key:u.uid+l._context.staticPlot,translateX:v.x[0]*l._fullLayout._size.w,translateY:l._fullLayout._size.h*(1-v.y[1]),size:l._fullLayout._size,width:g,maxLineWidth:U,height:y,columnOrder:C,groupHeight:y,rowBlocks:E,headerRowBlocks:w,scrollY:0,cells:k({},u.cells,{values:h}),headerCells:k({},u.header,{values:d}),gdColumns:d.map(function(N){return N[0]}),gdColumnsOriginalOrder:d.map(function(N){return N[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:d.map(function(N,W){var F=O[N];return O[N]=(F||0)+1,{key:N+"__"+O[N],label:N,specIndex:W,xIndex:C[W],xScale:r,x:void 0,calcdata:void 0,columnWidth:P[W]}})};return I.columns.forEach(function(N){N.calcdata=I,N.x=r(N)}),I}},53056:function(ee,R,e){var M=e(92880).extendFlat;R.splitToPanels=function(k){var o=[0,0],T=M({},k,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:M({},k.calcdata,{cells:k.calcdata.headerCells})});return[M({},k,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),M({},k,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},R.splitToCells=function(k){var o=function(T){var _=T.rowBlocks[T.page],p=_?_.rows[0].rowIndex:0;return[p,_?p+_.rows.length:0]}(k);return(k.values||[]).slice(o[0],o[1]).map(function(T,_){return{keyWithinBlock:_+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:o[0]+_,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},53212:function(ee,R,e){var M=e(3400),k=e(60520),o=e(86968).Q;ee.exports=function(T,_,p,s){function t(i,r){return M.coerce(T,_,k,i,r)}o(_,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),M.coerceFont(t,"header.font",s.font),function(i,r){for(var n=i.columnorder||[],a=i.header.values.length,l=n.slice(0,a),u=l.slice().sort(function(x,d){return x-d}),h=l.map(function(x){return u.indexOf(x)}),c=h.length;c<a;c++)h.push(c);r("columnorder",h)}(_,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),M.coerceFont(t,"cells.font",s.font),_._length=null}},41724:function(ee,R,e){ee.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(ee,R,e){var M=e(23536),k=e(33428),o=e(3400),T=o.numberFormat,_=e(71688),p=e(43616),s=e(72736),t=e(3400).raiseToTop,i=e(3400).strTranslate,r=e(3400).cancelTransition,n=e(55992),a=e(53056),l=e(76308);function u(H){return Math.ceil(H.calcdata.maxLineWidth/2)}function h(H,te){return"clip"+H._fullLayout._uid+"_scrollAreaBottomClip_"+te.key}function c(H,te){return"clip"+H._fullLayout._uid+"_columnBoundaryClippath_"+te.calcdata.key+"_"+te.specIndex}function x(H){return[].concat.apply([],H.map(function(te){return te})).map(function(te){return te.__data__})}function d(H,te,Q){var $=H.selectAll("."+M.cn.scrollbarKit).data(_.repeat,_.keyFun);$.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),$.each(function(se){var ae=se.scrollbarState;ae.totalHeight=function(ce){var fe=ce.rowBlocks;return N(fe,fe.length-1)+(fe.length?W(fe[fe.length-1],1/0):1)}(se),ae.scrollableAreaHeight=se.groupHeight-w(se),ae.currentlyVisibleHeight=Math.min(ae.totalHeight,ae.scrollableAreaHeight),ae.ratio=ae.currentlyVisibleHeight/ae.totalHeight,ae.barLength=Math.max(ae.ratio*ae.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),ae.barWiggleRoom=ae.currentlyVisibleHeight-ae.barLength,ae.wiggleRoom=Math.max(0,ae.totalHeight-ae.scrollableAreaHeight),ae.topY=ae.barWiggleRoom===0?0:se.scrollY/ae.wiggleRoom*ae.barWiggleRoom,ae.bottomY=ae.topY+ae.barLength,ae.dragMultiplier=ae.wiggleRoom/ae.barWiggleRoom}).attr("transform",function(se){var ae=se.width+M.scrollbarWidth/2+M.scrollbarOffset;return i(ae,w(se))});var K=$.selectAll("."+M.cn.scrollbar).data(_.repeat,_.keyFun);K.enter().append("g").classed(M.cn.scrollbar,!0);var X=K.selectAll("."+M.cn.scrollbarSlider).data(_.repeat,_.keyFun);X.enter().append("g").classed(M.cn.scrollbarSlider,!0),X.attr("transform",function(se){return i(0,se.scrollbarState.topY||0)});var Y=X.selectAll("."+M.cn.scrollbarGlyph).data(_.repeat,_.keyFun);Y.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),Y.attr("y2",function(se){return se.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(se){return se.columnDragInProgress||!se.scrollbarState.barWiggleRoom||Q?0:.4}),Y.transition().delay(0).duration(0),Y.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var re=K.selectAll("."+M.cn.scrollbarCaptureZone).data(_.repeat,_.keyFun);re.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(se){var ae=k.event.y,ce=this.getBoundingClientRect(),fe=se.scrollbarState,he=ae-ce.top,ve=k.scale.linear().domain([0,fe.scrollableAreaHeight]).range([0,fe.totalHeight]).clamp(!0);fe.topY<=he&&he<=fe.bottomY||O(te,H,null,ve(he-fe.barLength/2))(se)}).call(k.behavior.drag().origin(function(se){return k.event.stopPropagation(),se.scrollbarState.scrollbarScrollInProgress=!0,se}).on("drag",O(te,H)).on("dragend",function(){})),re.attr("y2",function(se){return se.scrollbarState.scrollableAreaHeight}),te._context.staticPlot&&(Y.remove(),re.remove())}function v(H,te,Q,$){var K=function(ae){var ce=ae.selectAll("."+M.cn.columnCells).data(_.repeat,_.keyFun);return ce.enter().append("g").classed(M.cn.columnCells,!0),ce.exit().remove(),ce}(Q),X=function(ae){var ce=ae.selectAll("."+M.cn.columnCell).data(a.splitToCells,function(fe){return fe.keyWithinBlock});return ce.enter().append("g").classed(M.cn.columnCell,!0),ce.exit().remove(),ce}(K);(function(ae){ae.each(function(ce,fe){var he=ce.calcdata.cells.font,ve=ce.column.specIndex,ye={size:m(he.size,ve,fe),color:m(he.color,ve,fe),family:m(he.family,ve,fe),weight:m(he.weight,ve,fe),style:m(he.style,ve,fe),variant:m(he.variant,ve,fe),textcase:m(he.textcase,ve,fe),lineposition:m(he.lineposition,ve,fe),shadow:m(he.shadow,ve,fe)};ce.rowNumber=ce.key,ce.align=m(ce.calcdata.cells.align,ve,fe),ce.cellBorderWidth=m(ce.calcdata.cells.line.width,ve,fe),ce.font=ye})})(X);var Y=function(ae){var ce=ae.selectAll("."+M.cn.cellRect).data(_.repeat,function(fe){return fe.keyWithinBlock});return ce.enter().append("rect").classed(M.cn.cellRect,!0),ce}(X);(function(ae){ae.attr("width",function(ce){return ce.column.columnWidth}).attr("stroke-width",function(ce){return ce.cellBorderWidth}).each(function(ce){var fe=k.select(this);l.stroke(fe,m(ce.calcdata.cells.line.color,ce.column.specIndex,ce.rowNumber)),l.fill(fe,m(ce.calcdata.cells.fill.color,ce.column.specIndex,ce.rowNumber))})})(Y);var re=function(ae){var ce=ae.selectAll("."+M.cn.cellTextHolder).data(_.repeat,function(fe){return fe.keyWithinBlock});return ce.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ce}(X),se=function(ae){var ce=ae.selectAll("."+M.cn.cellText).data(_.repeat,function(fe){return fe.keyWithinBlock});return ce.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ce}(re);(function(ae){ae.each(function(ce){p.font(k.select(this),ce.font)})})(se),g(se,te,$,H),I(X)}function g(H,te,Q,$){H.text(function(K){var X=K.column.specIndex,Y=K.rowNumber,re=K.value,se=typeof re=="string",ae=se&&re.match(/<br>/i),ce=!se||ae;K.mayHaveMarkup=se&&re.match(/[<&>]/);var fe,he=typeof(fe=re)=="string"&&fe.match(M.latexCheck);K.latex=he;var ve,ye,me=he?"":m(K.calcdata.cells.prefix,X,Y)||"",Me=he?"":m(K.calcdata.cells.suffix,X,Y)||"",Pe=he?null:m(K.calcdata.cells.format,X,Y)||null,ge=me+(Pe?T(Pe)(K.value):K.value)+Me;if(K.wrappingNeeded=!K.wrapped&&!ce&&!he&&(ve=y(ge)),K.cellHeightMayIncrease=ae||he||K.mayHaveMarkup||(ve===void 0?y(ge):ve),K.needsConvertToTspans=K.mayHaveMarkup||K.wrappingNeeded||K.latex,K.wrappingNeeded){var oe=(M.wrapSplitCharacter===" "?ge.replace(/<a href=/gi,"<a_href="):ge).split(M.wrapSplitCharacter),ie=M.wrapSplitCharacter===" "?oe.map(function(de){return de.replace(/<a_href=/gi,"<a href=")}):oe;K.fragments=ie.map(function(de){return{text:de,width:null}}),K.fragments.push({fragment:M.wrapSpacer,width:null}),ye=ie.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete K.fragments,ye=ge;return ye}).attr("dy",function(K){return K.needsConvertToTspans?0:"0.75em"}).each(function(K){var X=this,Y=k.select(X),re=K.wrappingNeeded?P:D;K.needsConvertToTspans?s.convertToTspans(Y,$,re(Q,X,te,$,K)):k.select(X.parentNode).attr("transform",function(se){return i(U(se),M.cellPad)}).attr("text-anchor",function(se){return{left:"start",center:"middle",right:"end"}[se.align]})})}function y(H){return H.indexOf(M.wrapSplitCharacter)!==-1}function m(H,te,Q){if(o.isArrayOrTypedArray(H)){var $=H[Math.min(te,H.length-1)];return o.isArrayOrTypedArray($)?$[Math.min(Q,$.length-1)]:$}return H}function b(H,te,Q){H.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",i(te.x,Q))}function f(H){return H.type==="cells"}function S(H){return H.type==="header"}function w(H){return(H.rowBlocks.length?H.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(te,Q){return te+W(Q,1/0)},0)}function E(H,te,Q){var $=x(te)[0];if($!==void 0){var K=$.rowBlocks,X=$.calcdata,Y=N(K,K.length),re=$.calcdata.groupHeight-w($),se=X.scrollY=Math.max(0,Math.min(Y-re,X.scrollY)),ae=function(ce,fe,he){for(var ve=[],ye=0,me=0;me<ce.length;me++){for(var Me=ce[me],Pe=Me.rows,ge=0,oe=0;oe<Pe.length;oe++)ge+=Pe[oe].rowHeight;Me.allRowsHeight=ge,fe<ye+ge&&fe+he>ye&&ve.push(me),ye+=ge}return ve}(K,se,re);ae.length===1&&(ae[0]===K.length-1?ae.unshift(ae[0]-1):ae.push(ae[0]+1)),ae[0]%2&&ae.reverse(),te.each(function(ce,fe){ce.page=ae[fe],ce.scrollY=se}),te.attr("transform",function(ce){var fe=N(ce.rowBlocks,ce.page)-ce.scrollY;return i(0,fe)}),H&&(C(H,Q,te,ae,$.prevPages,$,0),C(H,Q,te,ae,$.prevPages,$,1),d(Q,H))}}function O(H,te,Q,$){return function(K){var X=K.calcdata?K.calcdata:K,Y=te.filter(function(ce){return X.key===ce.key}),re=Q||X.scrollbarState.dragMultiplier,se=X.scrollY;X.scrollY=$===void 0?X.scrollY+re*k.event.dy:$;var ae=Y.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(f);return E(H,ae,Y),X.scrollY===se}}function C(H,te,Q,$,K,X,Y){$[Y]!==K[Y]&&(clearTimeout(X.currentRepaint[Y]),X.currentRepaint[Y]=setTimeout(function(){var re=Q.filter(function(se,ae){return ae===Y&&$[ae]!==K[ae]});v(H,te,re,Q),K[Y]=$[Y]}))}function P(H,te,Q,$){return function(){var K=k.select(te.parentNode);K.each(function(X){var Y=X.fragments;K.selectAll("tspan.line").each(function(ye,me){Y[me].width=this.getComputedTextLength()});var re,se,ae=Y[Y.length-1].width,ce=Y.slice(0,-1),fe=[],he=0,ve=X.column.columnWidth-2*M.cellPad;for(X.value="";ce.length;)he+(se=(re=ce.shift()).width+ae)>ve&&(X.value+=fe.join(M.wrapSpacer)+M.lineBreaker,fe=[],he=0),fe.push(re.text),he+=se;he&&(X.value+=fe.join(M.wrapSpacer)),X.wrapped=!0}),K.selectAll("tspan.line").remove(),g(K.select("."+M.cn.cellText),Q,H,$),k.select(te.parentNode.parentNode).call(I)}}function D(H,te,Q,$,K){return function(){if(!K.settledY){var X=k.select(te.parentNode),Y=j(K),re=K.key-Y.firstRowIndex,se=Y.rows[re].rowHeight,ae=K.cellHeightMayIncrease?te.parentNode.getBoundingClientRect().height+2*M.cellPad:se,ce=Math.max(ae,se);ce-Y.rows[re].rowHeight&&(Y.rows[re].rowHeight=ce,H.selectAll("."+M.cn.columnCell).call(I),E(null,H.filter(f),0),d(Q,$,!0)),X.attr("transform",function(){var fe=this,he=fe.parentNode.getBoundingClientRect(),ve=k.select(fe.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),ye=fe.transform.baseVal.consolidate(),me=ve.top-he.top+(ye?ye.matrix.f:M.cellPad);return i(U(K,k.select(fe.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),me)}),K.settledY=!0}}}function U(H,te){switch(H.align){case"left":default:return M.cellPad;case"right":return H.column.columnWidth-(te||0)-M.cellPad;case"center":return(H.column.columnWidth-(te||0))/2}}function I(H){H.attr("transform",function(te){var Q=te.rowBlocks[0].auxiliaryBlocks.reduce(function(K,X){return K+W(X,1/0)},0),$=W(j(te),te.key);return i(0,$+Q)}).selectAll("."+M.cn.cellRect).attr("height",function(te){return(Q=j(te),$=te.key,Q.rows[$-Q.firstRowIndex]).rowHeight;var Q,$})}function N(H,te){for(var Q=0,$=te-1;$>=0;$--)Q+=F(H[$]);return Q}function W(H,te){for(var Q=0,$=0;$<H.rows.length&&H.rows[$].rowIndex<te;$++)Q+=H.rows[$].rowHeight;return Q}function F(H){var te=H.allRowsHeight;if(te!==void 0)return te;for(var Q=0,$=0;$<H.rows.length;$++)Q+=H.rows[$].rowHeight;return H.allRowsHeight=Q,Q}function j(H){return H.rowBlocks[H.page]}ee.exports=function(H,te){var Q=!H._context.staticPlot,$=H._fullLayout._paper.selectAll("."+M.cn.table).data(te.map(function(Me){var Pe=_.unwrap(Me).trace;return n(H,Pe)}),_.keyFun);$.exit().remove(),$.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),$.attr("width",function(Me){return Me.width+Me.size.l+Me.size.r}).attr("height",function(Me){return Me.height+Me.size.t+Me.size.b}).attr("transform",function(Me){return i(Me.translateX,Me.translateY)});var K=$.selectAll("."+M.cn.tableControlView).data(_.repeat,_.keyFun),X=K.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(Q){var Y="onwheel"in document?"wheel":"mousewheel";X.on("mousemove",function(Me){K.filter(function(Pe){return Me===Pe}).call(d,H)}).on(Y,function(Me){if(!Me.scrollbarState.wheeling){Me.scrollbarState.wheeling=!0;var Pe=Me.scrollY+k.event.deltaY;O(H,K,null,Pe)(Me)||(k.event.stopPropagation(),k.event.preventDefault()),Me.scrollbarState.wheeling=!1}}).call(d,H,!0)}K.attr("transform",function(Me){return i(Me.size.l,Me.size.t)});var re=K.selectAll("."+M.cn.scrollBackground).data(_.repeat,_.keyFun);re.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),re.attr("width",function(Me){return Me.width}).attr("height",function(Me){return Me.height}),K.each(function(Me){p.setClipUrl(k.select(this),h(H,Me),H)});var se=K.selectAll("."+M.cn.yColumn).data(function(Me){return Me.columns},_.keyFun);se.enter().append("g").classed(M.cn.yColumn,!0),se.exit().remove(),se.attr("transform",function(Me){return i(Me.x,0)}),Q&&se.call(k.behavior.drag().origin(function(Me){return b(k.select(this),Me,-M.uplift),t(this),Me.calcdata.columnDragInProgress=!0,d(K.filter(function(Pe){return Me.calcdata.key===Pe.key}),H),Me}).on("drag",function(Me){var Pe=k.select(this),ge=function(oe){return(Me===oe?k.event.x:oe.x)+oe.columnWidth/2};Me.x=Math.max(-M.overdrag,Math.min(Me.calcdata.width+M.overdrag-Me.columnWidth,k.event.x)),x(se).filter(function(oe){return oe.calcdata.key===Me.calcdata.key}).sort(function(oe,ie){return ge(oe)-ge(ie)}).forEach(function(oe,ie){oe.xIndex=ie,oe.x=Me===oe?oe.x:oe.xScale(oe)}),se.filter(function(oe){return Me!==oe}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(oe){return i(oe.x,0)}),Pe.call(r).attr("transform",i(Me.x,-M.uplift))}).on("dragend",function(Me){var Pe=k.select(this),ge=Me.calcdata;Me.x=Me.xScale(Me),Me.calcdata.columnDragInProgress=!1,b(Pe,Me,0),function(oe,ie,de){var Se=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(_e,we){return de[Se.indexOf(_e)]-de[Se.indexOf(we)]}),ie.columnorder=de,oe.emit("plotly_restyle")}(H,ge,ge.columns.map(function(oe){return oe.xIndex}))})),se.each(function(Me){p.setClipUrl(k.select(this),c(H,Me),H)});var ae=se.selectAll("."+M.cn.columnBlock).data(a.splitToPanels,_.keyFun);ae.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(Me){return Me.key}),ae.style("cursor",function(Me){return Me.dragHandle?"ew-resize":Me.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ce=ae.filter(S),fe=ae.filter(f);Q&&fe.call(k.behavior.drag().origin(function(Me){return k.event.stopPropagation(),Me}).on("drag",O(H,K,-1)).on("dragend",function(){})),v(H,K,ce,ae),v(H,K,fe,ae);var he=K.selectAll("."+M.cn.scrollAreaClip).data(_.repeat,_.keyFun);he.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(Me){return h(H,Me)});var ve=he.selectAll("."+M.cn.scrollAreaClipRect).data(_.repeat,_.keyFun);ve.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),ve.attr("width",function(Me){return Me.width+2*M.overdrag}).attr("height",function(Me){return Me.height+M.uplift}),se.selectAll("."+M.cn.columnBoundary).data(_.repeat,_.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var ye=se.selectAll("."+M.cn.columnBoundaryClippath).data(_.repeat,_.keyFun);ye.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),ye.attr("id",function(Me){return c(H,Me)});var me=ye.selectAll("."+M.cn.columnBoundaryRect).data(_.repeat,_.keyFun);me.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),me.attr("width",function(Me){return Me.columnWidth+2*u(Me)}).attr("height",function(Me){return Me.calcdata.height+2*u(Me)+M.uplift}).attr("x",function(Me){return-u(Me)}).attr("y",function(Me){return-u(Me)}),E(null,fe,K)}},40516:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,_=e(74996),p=e(424),s=e(32984),t=e(92880).extendFlat,i=e(98192).c;ee.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:p.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:p.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},_.textfont,{}),editType:"calc"},text:_.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:_.hovertext,hoverinfo:p.hoverinfo,hovertemplate:M({},{keys:s.eventDataKeys}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:t({},_.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:_.sort,root:p.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},79516:function(ee,R,e){var M=e(7316);R.name="treemap",R.plot=function(k,o,T,_){M.plotBasePlot(R.name,k,o,T,_)},R.clean=function(k,o,T,_){M.cleanBasePlot(R.name,k,o,T,_)}},97840:function(ee,R,e){var M=e(3776);R.r=function(k,o){return M.calc(k,o)},R.q=function(k){return M._runCrossTraceCalc("treemap",k)}},32984:function(ee){ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(ee,R,e){var M=e(3400),k=e(40516),o=e(76308),T=e(86968).Q,_=e(31508).handleText,p=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,r=t.handleDefaults;ee.exports=function(n,a,l,u){function h(b,f){return M.coerce(n,a,k,b,f)}var c=h("labels"),x=h("parents");if(c&&c.length&&x&&x.length){var d=h("values");d&&d.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.packing")==="squarify"&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var v=h("text");h("texttemplate"),a.texttemplate||h("textinfo",M.isArrayOrTypedArray(v)?"text+label":"label"),h("hovertext"),h("hovertemplate");var g=h("pathbar.visible");_(n,a,u,h,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var y=a.textposition.indexOf("bottom")!==-1;s(n,a,u,h),(a._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis)?r(n,a,u,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(a.marker.colors||[]).length);var m=2*a.textfont.size;h("marker.pad.t",y?m/4:m),h("marker.pad.l",m/4),h("marker.pad.r",m/4),h("marker.pad.b",y?m:m/4),h("marker.cornerradius"),a._hovered={marker:{line:{width:2,color:o.contrast(u.paper_bgcolor)}}},g&&(h("pathbar.thickness",a.pathbar.textfont.size+2*p),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),T(a,u,h),a._length=null}else a.visible=!1}},95808:function(ee,R,e){var M=e(33428),k=e(78176),o=e(82744).clearMinTextSize,T=e(60100).resizeText,_=e(52960);ee.exports=function(p,s,t,i,r){var n,a,l=r.type,u=r.drawDescendants,h=p._fullLayout,c=h["_"+l+"layer"],x=!t;o(l,h),(n=c.selectAll("g.trace."+l).data(s,function(d){return d[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),n.order(),!h.uniformtext.mode&&k.hasTransition(t)?(i&&(a=i()),M.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){c.selectAll("g.trace").each(function(d){_(p,d,this,t,u)})})):(n.each(function(d){_(p,d,this,t,u)}),h.uniformtext.mode&&T(p,c.selectAll(".trace"),l)),x&&n.exit().remove()}},27336:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616),T=e(72736),_=e(13832),p=e(66192).styleOne,s=e(32984),t=e(78176),i=e(45716),r=!0;ee.exports=function(n,a,l,u,h){var c=h.barDifY,x=h.width,d=h.height,v=h.viewX,g=h.viewY,y=h.pathSlice,m=h.toMoveInsideSlice,b=h.strTransform,f=h.hasTransition,S=h.handleSlicesExit,w=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,O={},C=n._context.staticPlot,P=n._fullLayout,D=a[0],U=D.trace,I=D.hierarchy,N=x/U._entryDepth,W=t.listPath(l.data,"id"),F=_(I.copy(),[x,d],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(F=F.filter(function(H){var te=W.indexOf(H.data.id);return te!==-1&&(H.x0=N*te,H.x1=N*(te+1),H.y0=c,H.y1=c+d,H.onPathbar=!0,!0)})).reverse(),(u=u.data(F,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,r,O,[x,d],y),u.order();var j=u;f&&(j=j.transition().each("end",function(){var H=M.select(this);t.setSliceCursor(H,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(H){H._x0=v(H.x0),H._x1=v(H.x1),H._y0=g(H.y0),H._y1=g(H.y1),H._hoverX=v(H.x1-Math.min(x,d)/2),H._hoverY=g(H.y1-d/2);var te=M.select(this),Q=k.ensureSingle(te,"path","surface",function(Y){Y.style("pointer-events",C?"none":"all")});f?Q.transition().attrTween("d",function(Y){var re=w(Y,r,O,[x,d]);return function(se){return y(re(se))}}):Q.attr("d",y),te.call(i,l,n,a,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),Q.call(p,H,U,n,{hovered:!1}),H._text=(t.getPtLabel(H)||"").split("<br>").join(" ")||"";var $=k.ensureSingle(te,"g","slicetext"),K=k.ensureSingle($,"text","",function(Y){Y.attr("data-notex",1)}),X=k.ensureUniformFontSize(n,t.determineTextFont(U,H,P.font,{onPathbar:!0}));K.text(H._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,X).call(T.convertToTspans,n),H.textBB=o.bBox(K.node()),H.transform=m(H,{fontSize:X.size,onPathbar:!0}),H.transform.fontSize=X.size,f?K.transition().attrTween("transform",function(Y){var re=E(Y,r,O,[x,d]);return function(se){return b(re(se))}}):K.attr("transform",b(H))})}},76477:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616),T=e(72736),_=e(13832),p=e(66192).styleOne,s=e(32984),t=e(78176),i=e(45716),r=e(96488).formatSliceLabel,n=!1;ee.exports=function(a,l,u,h,c){var x=c.width,d=c.height,v=c.viewX,g=c.viewY,y=c.pathSlice,m=c.toMoveInsideSlice,b=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,O=c.prevEntry,C=a._context.staticPlot,P=a._fullLayout,D=l[0].trace,U=D.textposition.indexOf("left")!==-1,I=D.textposition.indexOf("right")!==-1,N=D.textposition.indexOf("bottom")!==-1,W=!N&&!D.marker.pad.t||N&&!D.marker.pad.b,F=_(u,[x,d],{packing:D.tiling.packing,squarifyratio:D.tiling.squarifyratio,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,pad:{inner:D.tiling.pad,top:D.marker.pad.t,left:D.marker.pad.l,right:D.marker.pad.r,bottom:D.marker.pad.b}}).descendants(),j=1/0,H=-1/0;F.forEach(function(X){var Y=X.depth;Y>=D._maxDepth?(X.x0=X.x1=(X.x0+X.x1)/2,X.y0=X.y1=(X.y0+X.y1)/2):(j=Math.min(j,Y),H=Math.max(H,Y))}),h=h.data(F,t.getPtId),D._maxVisibleLayers=isFinite(H)?H-j+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[x,d],y),h.order();var te=null;if(f&&O){var Q=t.getPtId(O);h.each(function(X){te===null&&t.getPtId(X)===Q&&(te={x0:X.x0,x1:X.x1,y0:X.y0,y1:X.y1})})}var $=function(){return te||{x0:0,x1:x,y0:0,y1:d}},K=h;return f&&(K=K.transition().each("end",function(){var X=M.select(this);t.setSliceCursor(X,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),K.each(function(X){var Y=t.isHeader(X,D);X._x0=v(X.x0),X._x1=v(X.x1),X._y0=g(X.y0),X._y1=g(X.y1),X._hoverX=v(X.x1-D.marker.pad.r),X._hoverY=g(N?X.y1-D.marker.pad.b/2:X.y0+D.marker.pad.t/2);var re=M.select(this),se=k.ensureSingle(re,"path","surface",function(ye){ye.style("pointer-events",C?"none":"all")});f?se.transition().attrTween("d",function(ye){var me=w(ye,n,$(),[x,d]);return function(Me){return y(me(Me))}}):se.attr("d",y),re.call(i,u,a,l,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),se.call(p,X,D,a,{hovered:!1}),X.x0===X.x1||X.y0===X.y1?X._text="":X._text=Y?W?"":t.getPtLabel(X)||"":r(X,u,D,l,P)||"";var ae=k.ensureSingle(re,"g","slicetext"),ce=k.ensureSingle(ae,"text","",function(ye){ye.attr("data-notex",1)}),fe=k.ensureUniformFontSize(a,t.determineTextFont(D,X,P.font)),he=X._text||" ",ve=Y&&he.indexOf("<br>")===-1;ce.text(he).classed("slicetext",!0).attr("text-anchor",I?"end":U||ve?"start":"middle").call(o.font,fe).call(T.convertToTspans,a),X.textBB=o.bBox(ce.node()),X.transform=m(X,{fontSize:fe.size,isHeader:Y}),X.transform.fontSize=fe.size,f?ce.transition().attrTween("transform",function(ye){var me=E(ye,n,$(),[x,d]);return function(Me){return b(me(Me))}}):ce.attr("transform",b(X))}),te}},83024:function(ee){ee.exports=function R(e,M,k){var o;k.swapXY&&(o=e.x0,e.x0=e.y0,e.y0=o,o=e.x1,e.x1=e.y1,e.y1=o),k.flipX&&(o=e.x0,e.x0=M[0]-e.x1,e.x1=M[0]-o),k.flipY&&(o=e.y0,e.y0=M[1]-e.y1,e.y1=M[1]-o);var T=e.children;if(T)for(var _=0;_<T.length;_++)R(T[_],M,k)}},31991:function(ee,R,e){ee.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(ee){ee.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(ee,R,e){var M=e(3400),k=e(45392);ee.exports=function(o,T){function _(p,s){return M.coerce(o,T,k,p,s)}_("treemapcolorway",T.colorway),_("extendtreemapcolors")}},13832:function(ee,R,e){var M=e(74148),k=e(83024);ee.exports=function(o,T,_){var p,s=_.flipX,t=_.flipY,i=_.packing==="dice-slice",r=_.pad[t?"bottom":"top"],n=_.pad[s?"right":"left"],a=_.pad[s?"left":"right"],l=_.pad[t?"top":"bottom"];i&&(p=n,n=r,r=p,p=a,a=l,l=p);var u=M.treemap().tile(function(h,c){switch(h){case"squarify":return M.treemapSquarify.ratio(c);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(_.packing,_.squarifyratio)).paddingInner(_.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(l).size(i?[T[1],T[0]]:T)(o);return(i||s||t)&&k(u,T,{swapXY:i,flipX:s,flipY:t}),u}},53264:function(ee,R,e){var M=e(95808),k=e(76477);ee.exports=function(o,T,_,p){return M(o,T,_,p,{type:"treemap",drawDescendants:k})}},52960:function(ee,R,e){var M=e(33428),k=e(67756).qy,o=e(78176),T=e(3400),_=e(78048).TEXTPAD,p=e(98184).toMoveInsideBar,s=e(82744).recordMinTextSize,t=e(32984),i=e(27336);function r(n){return o.isHierarchyRoot(n)?"":o.getPtId(n)}ee.exports=function(n,a,l,u,h){var c=n._fullLayout,x=a[0],d=x.trace,v=d.type==="icicle",g=x.hierarchy,y=o.findEntryWithLevel(g,d.level),m=M.select(l),b=m.selectAll("g.pathbar"),f=m.selectAll("g.slice");if(!y)return b.remove(),void f.remove();var S=o.isHierarchyRoot(y),w=!c.uniformtext.mode&&o.hasTransition(u),E=o.getMaxDepth(d),O=c._size,C=d.domain,P=O.w*(C.x[1]-C.x[0]),D=O.h*(C.y[1]-C.y[0]),U=P,I=d.pathbar.thickness,N=d.marker.line.width+t.gapWithPathbar,W=d.pathbar.visible?d.pathbar.side.indexOf("bottom")>-1?D+N:-(I+N):0,F={x0:U,x1:U,y0:W,y1:W+I},j=function(be,ke,Ie){var Ee=d.tiling.pad,Be=function(it){return it-Ee<=ke.x0},Ve=function(it){return it+Ee>=ke.x1},Ze=function(it){return it-Ee<=ke.y0},rt=function(it){return it+Ee>=ke.y1};return be.x0===ke.x0&&be.x1===ke.x1&&be.y0===ke.y0&&be.y1===ke.y1?{x0:be.x0,x1:be.x1,y0:be.y0,y1:be.y1}:{x0:Be(be.x0-Ee)?0:Ve(be.x0-Ee)?Ie[0]:be.x0,x1:Be(be.x1+Ee)?0:Ve(be.x1+Ee)?Ie[0]:be.x1,y0:Ze(be.y0-Ee)?0:rt(be.y0-Ee)?Ie[1]:be.y0,y1:Ze(be.y1+Ee)?0:rt(be.y1+Ee)?Ie[1]:be.y1}},H=null,te={},Q={},$=null,K=function(be,ke){return ke?te[r(be)]:Q[r(be)]};x.hasMultipleRoots&&S&&E++,d._maxDepth=E,d._backgroundColor=c.paper_bgcolor,d._entryDepth=y.data.depth,d._atRootLevel=S;var X=-P/2+O.l+O.w*(C.x[1]+C.x[0])/2,Y=-D/2+O.t+O.h*(1-(C.y[1]+C.y[0])/2),re=function(be){return X+be},se=function(be){return Y+be},ae=se(0),ce=re(0),fe=function(be){return ce+be},he=function(be){return ae+be};function ve(be,ke){return be+","+ke}var ye=fe(0),me=function(be){be.x=Math.max(ye,be.x)},Me=d.pathbar.edgeshape,Pe=d[v?"tiling":"marker"].pad,ge=function(be){return d.textposition.indexOf(be)!==-1},oe=ge("top"),ie=ge("left"),de=ge("right"),Se=ge("bottom"),_e=function(be,ke){var Ie=be.x0,Ee=be.x1,Be=be.y0,Ve=be.y1,Ze=be.textBB,rt=oe||ke.isHeader&&!Se?"start":Se?"end":"middle",it=ge("right"),dt=ge("left")||ke.onPathbar?-1:it?1:0;if(ke.isHeader){if((Ie+=(v?Pe:Pe.l)-_)>=(Ee-=(v?Pe:Pe.r)-_)){var vt=(Ie+Ee)/2;Ie=vt,Ee=vt}var ht;Se?Be<(ht=Ve-(v?Pe:Pe.b))&&ht<Ve&&(Be=ht):Be<(ht=Be+(v?Pe:Pe.t))&&ht<Ve&&(Ve=ht)}var Qe=p(Ie,Ee,Be,Ve,Ze,{isHorizontal:!1,constrained:!0,angle:0,anchor:rt,leftToRight:dt});return Qe.fontSize=ke.fontSize,Qe.targetX=re(Qe.targetX),Qe.targetY=se(Qe.targetY),isNaN(Qe.targetX)||isNaN(Qe.targetY)?{}:(Ie!==Ee&&Be!==Ve&&s(d.type,Qe,c),{scale:Qe.scale,rotate:Qe.rotate,textX:Qe.textX,textY:Qe.textY,anchorX:Qe.anchorX,anchorY:Qe.anchorY,targetX:Qe.targetX,targetY:Qe.targetY})},we=function(be,ke){for(var Ie,Ee=0,Be=be;!Ie&&Ee<E;)Ee++,(Be=Be.parent)?Ie=K(Be,ke):Ee=E;return Ie||{}},Ae=function(be,ke,Ie,Ee,Be){var Ve,Ze=K(be,ke);if(Ze)Ve=Ze;else if(ke)Ve=F;else if(H)if(be.parent){var rt=$||Ie;rt&&!ke?Ve=j(be,rt,Ee):(Ve={},T.extendFlat(Ve,we(be,ke)))}else Ve=T.extendFlat({},be),v&&(Be.orientation==="h"?Be.flipX?Ve.x0=be.x1:Ve.x1=0:Be.flipY?Ve.y0=be.y1:Ve.y1=0);else Ve={};return k(Ve,{x0:be.x0,x1:be.x1,y0:be.y0,y1:be.y1})},Oe=function(be,ke,Ie,Ee){var Be=K(be,ke),Ve={},Ze=function(it,dt,vt,ht){if(dt)return te[r(g)]||F;var Qe=Q[d.level]||vt;return function(Je){return Je.data.depth-y.data.depth<E}(it)?j(it,Qe,ht):{}}(be,ke,Ie,Ee);T.extendFlat(Ve,{transform:_e({x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,textBB:be.textBB,_text:be._text},{isHeader:o.isHeader(be,d)})}),Be?Ve=Be:be.parent&&T.extendFlat(Ve,we(be,ke));var rt=be.transform;return be.x0!==be.x1&&be.y0!==be.y1&&s(d.type,rt,c),k(Ve,{transform:{scale:rt.scale,rotate:rt.rotate,textX:rt.textX,textY:rt.textY,anchorX:rt.anchorX,anchorY:rt.anchorY,targetX:rt.targetX,targetY:rt.targetY}})},ze=function(be,ke,Ie,Ee,Be){var Ve=Ee[0],Ze=Ee[1];w?be.exit().transition().each(function(){var rt=M.select(this);rt.select("path.surface").transition().attrTween("d",function(it){var dt=function(vt,ht,Qe,Je){var Tt,Ot=K(vt,ht);if(ht)Tt=F;else{var Pt=K(y,ht);Tt=Pt?j(vt,Pt,Je):{}}return k(Ot,Tt)}(it,ke,0,[Ve,Ze]);return function(vt){return Be(dt(vt))}}),rt.select("g.slicetext").attr("opacity",0)}).remove():be.exit().remove()},pe=function(be){var ke=be.transform;return be.x0!==be.x1&&be.y0!==be.y1&&s(d.type,ke,c),T.getTextTransform({textX:ke.textX,textY:ke.textY,anchorX:ke.anchorX,anchorY:ke.anchorY,targetX:ke.targetX,targetY:ke.targetY,scale:ke.scale,rotate:ke.rotate})};w&&(b.each(function(be){te[r(be)]={x0:be.x0,x1:be.x1,y0:be.y0,y1:be.y1},be.transform&&(te[r(be)].transform={textX:be.transform.textX,textY:be.transform.textY,anchorX:be.transform.anchorX,anchorY:be.transform.anchorY,targetX:be.transform.targetX,targetY:be.transform.targetY,scale:be.transform.scale,rotate:be.transform.rotate})}),f.each(function(be){Q[r(be)]={x0:be.x0,x1:be.x1,y0:be.y0,y1:be.y1},be.transform&&(Q[r(be)].transform={textX:be.transform.textX,textY:be.transform.textY,anchorX:be.transform.anchorX,anchorY:be.transform.anchorY,targetX:be.transform.targetX,targetY:be.transform.targetY,scale:be.transform.scale,rotate:be.transform.rotate}),!H&&o.isEntry(be)&&(H=be)})),$=h(n,a,y,f,{width:P,height:D,viewX:re,viewY:se,pathSlice:function(be){var ke=re(be.x0),Ie=re(be.x1),Ee=se(be.y0),Be=se(be.y1),Ve=Ie-ke,Ze=Be-Ee;if(!Ve||!Ze)return"";var rt=d.marker.cornerradius||0,it=Math.min(rt,Ve/2,Ze/2);it&&be.data&&be.data.data&&be.data.data.label&&(oe&&(it=Math.min(it,Pe.t)),ie&&(it=Math.min(it,Pe.l)),de&&(it=Math.min(it,Pe.r)),Se&&(it=Math.min(it,Pe.b)));var dt=function(vt,ht){return it?"a"+ve(it,it)+" 0 0 1 "+ve(vt,ht):""};return"M"+ve(ke,Ee+it)+dt(it,-it)+"L"+ve(Ie-it,Ee)+dt(it,it)+"L"+ve(Ie,Be-it)+dt(-it,it)+"L"+ve(ke+it,Be)+dt(-it,-it)+"Z"},toMoveInsideSlice:_e,prevEntry:H,makeUpdateSliceInterpolator:Ae,makeUpdateTextInterpolator:Oe,handleSlicesExit:ze,hasTransition:w,strTransform:pe}),d.pathbar.visible?i(n,a,y,b,{barDifY:W,width:U,height:I,viewX:fe,viewY:he,pathSlice:function(be){var ke=fe(Math.max(Math.min(be.x0,be.x0),0)),Ie=fe(Math.min(Math.max(be.x1,be.x1),U)),Ee=he(be.y0),Be=he(be.y1),Ve=I/2,Ze={},rt={};Ze.x=ke,rt.x=Ie,Ze.y=rt.y=(Ee+Be)/2;var it={x:ke,y:Ee},dt={x:Ie,y:Ee},vt={x:Ie,y:Be},ht={x:ke,y:Be};return Me===">"?(it.x-=Ve,dt.x-=Ve,vt.x-=Ve,ht.x-=Ve):Me==="/"?(vt.x-=Ve,ht.x-=Ve,Ze.x-=Ve/2,rt.x-=Ve/2):Me==="\\"?(it.x-=Ve,dt.x-=Ve,Ze.x-=Ve/2,rt.x-=Ve/2):Me==="<"&&(Ze.x-=Ve,rt.x-=Ve),me(it),me(ht),me(Ze),me(dt),me(vt),me(rt),"M"+ve(it.x,it.y)+"L"+ve(dt.x,dt.y)+"L"+ve(rt.x,rt.y)+"L"+ve(vt.x,vt.y)+"L"+ve(ht.x,ht.y)+"L"+ve(Ze.x,Ze.y)+"Z"},toMoveInsideSlice:_e,makeUpdateSliceInterpolator:Ae,makeUpdateTextInterpolator:Oe,handleSlicesExit:ze,hasTransition:w,strTransform:pe}):b.remove()}},66192:function(ee,R,e){var M=e(33428),k=e(76308),o=e(3400),T=e(78176),_=e(82744).resizeText,p=e(60404);function s(t,i,r,n,a){var l,u,h=(a||{}).hovered,c=i.data.data,x=c.i,d=c.color,v=T.isHierarchyRoot(i),g=1;if(h)l=r._hovered.marker.line.color,u=r._hovered.marker.line.width;else if(v&&d===r.root.color)g=100,l="rgba(0,0,0,0)",u=0;else if(l=o.castOption(r,x,"marker.line.color")||k.defaultLine,u=o.castOption(r,x,"marker.line.width")||0,!r._hasColorscale&&!i.onPathbar){var y=r.marker.depthfade;if(y){var m,b=k.combine(k.addOpacity(r._backgroundColor,.75),d);if(y===!0){var f=T.getMaxDepth(r);m=isFinite(f)?T.isLeaf(i)?0:r._maxVisibleLayers-(i.data.depth-r._entryDepth):i.data.height+1}else m=i.data.depth-r._entryDepth,r._atRootLevel||m++;if(m>0)for(var S=0;S<m;S++){var w=.5*S/m;d=k.combine(k.addOpacity(b,w),d)}}}t.call(p,i,r,n,d).style("stroke-width",u).call(k.stroke,l).style("opacity",g)}ee.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");_(t,i,"treemap"),i.each(function(r){var n=M.select(this),a=r[0].trace;n.style("opacity",a.opacity),n.selectAll("path.surface").each(function(l){M.select(this).call(s,l,a,t,{hovered:!1})})})},styleOne:s}},13988:function(ee,R,e){var M=e(63188),k=e(92880).extendFlat,o=e(29736).axisHoverFormat;ee.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:o("x"),yhoverformat:o("y"),name:k({},M.name,{}),orientation:k({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:k({},M.boxpoints,{}),jitter:k({},M.jitter,{}),pointpos:k({},M.pointpos,{}),width:k({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:M.zorder}},67064:function(ee,R,e){var M=e(3400),k=e(54460),o=e(62555),T=e(63800),_=e(39032).BADNUM;function p(t,i,r){var n=i.max-i.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var a=r.length,l=M.stdev(r,a-1,i.mean);return Math.max(function(u,h,c){return 1.059*Math.min(h,c/1.349)*Math.pow(u,-.2)}(a,l,i.q3-i.q1),n/100)}function s(t,i,r,n){var a,l=t.spanmode,u=t.span||[],h=[i.min,i.max],c=[i.min-2*n,i.max+2*n];function x(v){var g=u[v],y=r.type==="multicategory"?r.r2c(g):r.d2c(g,0,t[i.valLetter+"calendar"]);return y===_?c[v]:y}var d={type:"linear",range:a=l==="soft"?c:l==="hard"?h:[x(0),x(1)]};return k.setConvert(d),d.cleanRange(),a}ee.exports=function(t,i){var r=o(t,i);if(r[0].t.empty)return r;for(var n=t._fullLayout,a=k.getFromId(t,i[i.orientation==="h"?"xaxis":"yaxis"]),l=1/0,u=-1/0,h=0,c=0,x=0;x<r.length;x++){var d=r[x],v=d.pts.map(T.extractVal),g=d.bandwidth=p(i,d,v),y=d.span=s(i,d,a,g);if(d.min===d.max&&g===0)y=d.span=[d.min,d.max],d.density=[{v:1,t:y[0]}],d.bandwidth=g,h=Math.max(h,1);else{var m=y[1]-y[0],b=Math.ceil(m/(g/3)),f=m/b;if(!isFinite(f)||!isFinite(b))return M.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=T.makeKDE(d,i,v);d.density=new Array(b);for(var w=0,E=y[0];E<y[1]+f/2;w++,E+=f){var O=S(E);d.density[w]={v:O,t:E},h=Math.max(h,O)}}c=Math.max(c,v.length),l=Math.min(l,y[0]),u=Math.max(u,y[1])}var C=k.findExtremes(a,[l,u],{padded:!0});if(i._extremes[a._id]=C,i.width)r[0].t.maxKDE=h;else{var P=n._violinScaleGroupStats,D=i.scalegroup,U=P[D];U?(U.maxKDE=Math.max(U.maxKDE,h),U.maxCount=Math.max(U.maxCount,c)):P[D]={maxKDE:h,maxCount:c}}return r[0].t.labels.kde=M._(t,"kde:"),r}},14348:function(ee,R,e){var M=e(96404).setPositionOffset,k=["v","h"];ee.exports=function(o,T){for(var _=o.calcdata,p=T.xaxis,s=T.yaxis,t=0;t<k.length;t++){for(var i=k[t],r=i==="h"?s:p,n=[],a=0;a<_.length;a++){var l=_[a],u=l[0].t,h=l[0].trace;h.visible!==!0||h.type!=="violin"||u.empty||h.orientation!==i||h.xaxis!==p._id||h.yaxis!==s._id||n.push(a)}M("violin",o,n,r)}}},36240:function(ee,R,e){var M=e(3400),k=e(76308),o=e(90624),T=e(13988);ee.exports=function(_,p,s,t){function i(m,b){return M.coerce(_,p,T,m,b)}function r(m,b){return M.coerce2(_,p,T,m,b)}if(o.handleSampleDefaults(_,p,i,t),p.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",p.name),i("scalemode"));var n,a=i("span");Array.isArray(a)&&(n="manual"),i("spanmode",n);var l=i("line.color",(_.marker||{}).color||s),u=i("line.width"),h=i("fillcolor",k.addOpacity(p.line.color,.5));o.handlePointsDefaults(_,p,i,{prefix:""});var c=r("box.width"),x=r("box.fillcolor",h),d=r("box.line.color",l),v=r("box.line.width",u);i("box.visible",!!(c||x||d||v))||(p.box={visible:!1});var g=r("meanline.color",l),y=r("meanline.width",u);i("meanline.visible",!!(g||y))||(p.meanline={visible:!1}),i("quartilemethod"),i("zorder")}}},63800:function(ee,R,e){var M=e(3400),k=function(o){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*o*o)};R.makeKDE=function(o,T,_){var p=_.length,s=k,t=o.bandwidth,i=1/(p*t);return function(r){for(var n=0,a=0;a<p;a++)n+=s((r-_[a])/t);return i*n}},R.getPositionOnKdePath=function(o,T,_){var p,s;T.orientation==="h"?(p="y",s="x"):(p="x",s="y");var t=M.findPointOnPath(o.path,_,s,{pathLength:o.pathLength}),i=o.posCenterPx,r=t[p];return[r,T.side==="both"?2*i-r:i]},R.getKdeValue=function(o,T,_){var p=o.pts.map(R.extractVal);return R.makeKDE(o,T,p)(_)/o.posDensityScale},R.extractVal=function(o){return o.v}},78e3:function(ee,R,e){var M=e(76308),k=e(3400),o=e(54460),T=e(27576),_=e(63800);ee.exports=function(p,s,t,i,r){r||(r={});var n,a,l=r.hoverLayer,u=p.cd,h=u[0].trace,c=h.hoveron,x=c.indexOf("violins")!==-1,d=c.indexOf("kde")!==-1,v=[];if(x||d){var g=T.hoverOnBoxes(p,s,t,i);if(d&&g.length>0){var y,m,b,f,S,w=p.xa,E=p.ya;h.orientation==="h"?(S=s,y="y",b=E,m="x",f=w):(S=t,y="x",b=w,m="y",f=E);var O=u[p.index];if(S>=O.span[0]&&S<=O.span[1]){var C=k.extendFlat({},p),P=f.c2p(S,!0),D=_.getKdeValue(O,h,S),U=_.getPositionOnKdePath(O,h,P),I=b._offset,N=b._length;C[y+"0"]=U[0],C[y+"1"]=U[1],C[m+"0"]=C[m+"1"]=P,C[m+"Label"]=m+": "+o.hoverLabelText(f,S,h[m+"hoverformat"])+", "+u[0].t.labels.kde+" "+D.toFixed(3);for(var W=0,F=0;F<g.length;F++)if(g[F].attr==="med"){W=F;break}C.spikeDistance=g[W].spikeDistance;var j=y+"Spike";C[j]=g[W][j],g[W].spikeDistance=void 0,g[W][j]=void 0,C.hovertemplate=!1,v.push(C),(a={})[y+"1"]=k.constrain(I+U[0],I,I+N),a[y+"2"]=k.constrain(I+U[1],I,I+N),a[m+"1"]=a[m+"2"]=f._offset+P}}x&&(v=v.concat(g))}c.indexOf("points")!==-1&&(n=T.hoverOnPoints(p,s,t));var H=l.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return H.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),H.exit().remove(),H.attr(a).call(M.stroke,p.color),i==="closest"?n?[n]:v:(n&&v.push(n),v)}},22869:function(ee,R,e){ee.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(ee,R,e){var M=e(16560),k=e(3400).extendFlat;ee.exports={violinmode:k({},M.boxmode,{}),violingap:k({},M.boxgap,{}),violingroupgap:k({},M.boxgroupgap,{})}},8939:function(ee,R,e){var M=e(3400),k=e(98228),o=e(68832);ee.exports=function(T,_,p){o._supply(T,_,p,function(s,t){return M.coerce(T,_,k,s,t)},"violin")}},5140:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616),T=e(18728),_=e(52340),p=e(63800);ee.exports=function(s,t,i,r){var n=s._context.staticPlot,a=s._fullLayout,l=t.xaxis,u=t.yaxis;function h(c,x){var d=_(c,{xaxis:l,yaxis:u,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return o.smoothopen(d[0],1)}k.makeTraceGroups(r,i,"trace violins").each(function(c){var x=M.select(this),d=c[0],v=d.t,g=d.trace;if(g.visible!==!0||v.empty)x.remove();else{var y=v.bPos,m=v.bdPos,b=t[v.valLetter+"axis"],f=t[v.posLetter+"axis"],S=g.side==="both",w=S||g.side==="positive",E=S||g.side==="negative",O=x.selectAll("path.violin").data(k.identity);O.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),O.exit().remove(),O.each(function(F){var j,H,te,Q,$,K,X,Y,re=M.select(this),se=F.density,ae=se.length,ce=f.c2l(F.pos+y,!0),fe=f.l2p(ce);if(g.width)j=v.maxKDE/m;else{var he=a._violinScaleGroupStats[g.scalegroup];j=g.scalemode==="count"?he.maxKDE/m*(he.maxCount/F.pts.length):he.maxKDE/m}if(w){for(X=new Array(ae),$=0;$<ae;$++)(Y=X[$]={})[v.posLetter]=ce+se[$].v/j,Y[v.valLetter]=b.c2l(se[$].t,!0);H=h(X,g)}if(E){for(X=new Array(ae),K=0,$=ae-1;K<ae;K++,$--)(Y=X[K]={})[v.posLetter]=ce-se[$].v/j,Y[v.valLetter]=b.c2l(se[$].t,!0);te=h(X,g)}if(S)Q=H+"L"+te.substr(1)+"Z";else{var ve=[fe,b.c2p(se[0].t)],ye=[fe,b.c2p(se[ae-1].t)];g.orientation==="h"&&(ve.reverse(),ye.reverse()),Q=w?"M"+ve+"L"+H.substr(1)+"L"+ye:"M"+ye+"L"+te.substr(1)+"L"+ve}re.attr("d",Q),F.posCenterPx=fe,F.posDensityScale=j*m,F.path=re.node(),F.pathLength=F.path.getTotalLength()/(S?2:1)});var C,P,D,U=g.box,I=U.width,N=(U.line||{}).width;S?(C=m*I,P=0):w?(C=[0,m*I/2],P=N*{x:1,y:-1}[v.posLetter]):(C=[m*I/2,0],P=N*{x:-1,y:1}[v.posLetter]),T.plotBoxAndWhiskers(x,{pos:f,val:b},g,{bPos:y,bdPos:C,bPosPxOffset:P}),T.plotBoxMean(x,{pos:f,val:b},g,{bPos:y,bdPos:C,bPosPxOffset:P}),!g.box.visible&&g.meanline.visible&&(D=k.identity);var W=x.selectAll("path.meanline").data(D||[]);W.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),W.exit().remove(),W.each(function(F){var j=b.c2p(F.mean,!0),H=p.getPositionOnKdePath(F,g,j);M.select(this).attr("d",g.orientation==="h"?"M"+j+","+H[0]+"V"+H[1]:"M"+H[0]+","+j+"H"+H[1])}),T.plotPoints(x,{x:l,y:u},g,v)}})}},95908:function(ee,R,e){var M=e(33428),k=e(76308),o=e(49224).stylePoints;ee.exports=function(T){var _=M.select(T).selectAll("g.trace.violins");_.style("opacity",function(p){return p[0].trace.opacity}),_.each(function(p){var s=p[0].trace,t=M.select(this),i=s.box||{},r=i.line||{},n=s.meanline||{},a=n.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,i.fillcolor);var l={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(l).call(k.stroke,n.color),t.selectAll("path.meanline").style(l).call(k.stroke,n.color),o(t,s,T)})}},58168:function(ee,R,e){var M=e(49084),k=e(50048),o=e(16716),T=e(45464),_=e(92880).extendFlat,p=e(67824).overrideAll,s=ee.exports=p(_({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:o.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:_({},T.hoverinfo),showlegend:_({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},91976:function(ee,R,e){var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),_=e(8932).extractOpts,p=e(52094),s=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function i(n,a,l){this.scene=n,this.uid=l,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var r=i.prototype;r.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,l=this.data._meshX[a],u=this.data._meshY[a],h=this.data._meshZ[a],c=this.data._Ys.length,x=this.data._Zs.length,d=s(l,this.data._Xs).id,v=s(u,this.data._Ys).id,g=s(h,this.data._Zs).id,y=n.index=g+x*v+x*c*d;n.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var m=this.data.hovertext||this.data.text;return o(m)&&m[y]!==void 0?n.textLabel=m[y]:m&&(n.textLabel=m),!0}},r.update=function(n){var a=this.scene,l=a.fullSceneLayout;function u(x,d,v,g){return d.map(function(y){return x.d2l(y,0,g)*v})}this.data=t(n);var h={positions:p(u(l.xaxis,n._meshX,a.dataScale[0],n.xcalendar),u(l.yaxis,n._meshY,a.dataScale[1],n.ycalendar),u(l.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:p(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,opacityscale:n.opacityscale,contourEnable:n.contour.show,contourColor:T(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},c=_(n);h.vertexIntensity=n._meshIntensity,h.vertexIntensityBounds=[c.min,c.max],h.colormap=k(n),this.mesh.update(h)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(n,a){var l=n.glplot.gl,u=M({gl:l}),h=new i(n,u,a.uid);return u._trace=h,h.update(a),n.glplot.add(u),h}},12448:function(ee,R,e){var M=e(3400),k=e(58168),o=e(70548).supplyIsoDefaults,T=e(60192).opacityscaleDefaults;ee.exports=function(_,p,s,t){function i(r,n){return M.coerce(_,p,k,r,n)}o(_,p,s,t,i),T(_,p,t,i)}},67776:function(ee,R,e){ee.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(ee,R,e){var M=e(20832),k=e(52904).line,o=e(45464),T=e(29736).axisHoverFormat,_=e(21776).Ks,p=e(21776).Gw,s=e(10213),t=e(92880).extendFlat,i=e(76308);function r(n){return{marker:{color:t({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ee.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:_({},{keys:s.eventDataKeys}),hoverinfo:t({},o.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:p({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},k.color,{dflt:i.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,zorder:M.zorder}},73540:function(ee,R,e){var M=e(54460),k=e(1220),o=e(3400).mergeArray,T=e(4500),_=e(39032).BADNUM;function p(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}ee.exports=function(t,i){var r,n,a,l,u,h,c=M.getFromId(t,i.xaxis||"x"),x=M.getFromId(t,i.yaxis||"y");i.orientation==="h"?(r=c.makeCalcdata(i,"x"),a=x.makeCalcdata(i,"y"),l=k(i,x,"y",a),u=!!i.yperiodalignment,h="y"):(r=x.makeCalcdata(i,"y"),a=c.makeCalcdata(i,"x"),l=k(i,c,"x",a),u=!!i.xperiodalignment,h="x"),n=l.vals;for(var d,v=Math.min(n.length,r.length),g=new Array(v),y=0,m=!1,b=0;b<v;b++){var f=r[b]||0,S=!1;(r[b]!==_||s(i.measure[b])||p(i.measure[b]))&&b+1<v&&(r[b+1]!==_||s(i.measure[b+1])||p(i.measure[b+1]))&&(S=!0);var w=g[b]={i:b,p:n[b],s:f,rawS:f,cNext:S};p(i.measure[b])?(y=w.s,w.isSum=!0,w.dir="totals",w.s=y):s(i.measure[b])?(w.isSum=!0,w.dir="totals",w.s=y):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",d=w.s,w.s=y+d,y+=d),w.dir==="totals"&&(m=!0),u&&(g[b].orig_p=a[b],g[b][h+"End"]=l.ends[b],g[b][h+"Start"]=l.starts[b]),i.ids&&(w.id=String(i.ids[b])),w.v=(i.base||0)+y}return g.length&&(g[0].hasTotals=m),o(i.text,g,"tx"),o(i.hovertext,g,"htx"),T(g,i),g}},10213:function(ee){ee.exports={eventDataKeys:["initial","delta","final"]}},50152:function(ee,R,e){var M=e(96376).setGroupPositions;ee.exports=function(k,o){var T,_,p=k._fullLayout,s=k._fullData,t=k.calcdata,i=o.xaxis,r=o.yaxis,n=[],a=[],l=[];for(_=0;_<s.length;_++){var u=s[_];u.visible===!0&&u.xaxis===i._id&&u.yaxis===r._id&&u.type==="waterfall"&&(T=t[_],u.orientation==="h"?l.push(T):a.push(T),n.push(T))}var h={mode:p.waterfallmode,norm:p.waterfallnorm,gap:p.waterfallgap,groupgap:p.waterfallgroupgap};for(M(k,i,r,a,h),M(k,r,i,l,h),_=0;_<n.length;_++){T=n[_];for(var c=0;c<T.length;c++){var x=T[c];x.isSum===!1&&(x.s0+=c===0?0:T[c-1].s),c+1<T.length&&(T[c].nextP0=T[c+1].p0,T[c].nextS0=T[c+1].s0)}}}},24224:function(ee,R,e){var M=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),_=e(31147),p=e(65776),s=e(76308),t=e(48164),i=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(a,l,u){a(l+".marker.color",u),a(l+".marker.line.color",s.defaultLine),a(l+".marker.line.width")}ee.exports={supplyDefaults:function(a,l,u,h){function c(d,v){return M.coerce(a,l,p,d,v)}if(T(a,l,h,c)){_(a,l,h,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",l.x&&!l.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");o(a,l,h,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(c("texttemplate"),l.texttemplate||c("textinfo")),n(c,"increasing",i),n(c,"decreasing",r),n(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash"))),c("zorder")}else l.visible=!1},crossTraceDefaults:function(a,l){var u,h;function c(d){return M.coerce(h._input,h,p,d)}if(l.waterfallmode==="group")for(var x=0;x<a.length;x++)u=(h=a[x])._input,k(u,h,l,c)}}},53256:function(ee){ee.exports=function(R,e){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"initial"in e&&(R.initial=e.initial),"delta"in e&&(R.delta=e.delta),"final"in e&&(R.final=e.final),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},94196:function(ee,R,e){var M=e(54460).hoverLabelText,k=e(76308).opacity,o=e(63400).hoverOnBars,T=e(48164),_=T.INCREASING.SYMBOL,p=T.DECREASING.SYMBOL;ee.exports=function(s,t,i,r,n){var a=o(s,t,i,r,n);if(a){var l=a.cd,u=l[0].trace,h=u.orientation==="h",c=h?"x":"y",x=h?s.xa:s.ya,d=l[a.index],v=d.isSum?d.b+d.s:d.rawS;a.initial=d.b+d.s-v,a.delta=v,a.final=a.initial+a.delta;var g=w(Math.abs(a.delta));a.deltaLabel=v<0?"("+g+")":g,a.finalLabel=w(a.final),a.initialLabel=w(a.initial);var y=d.hi||u.hoverinfo,m=[];if(y&&y!=="none"&&y!=="skip"){var b=y==="all",f=y.split("+"),S=function(E){return b||f.indexOf(E)!==-1};d.isSum||(!S("final")||S(h?"x":"y")||m.push(a.finalLabel),S("delta")&&(v<0?m.push(a.deltaLabel+" "+p):m.push(a.deltaLabel+" "+_)),S("initial")&&m.push("Initial: "+a.initialLabel))}return m.length&&(a.extraText=m.join("<br>")),a.color=function(E,O){var C=E[O.dir].marker,P=C.color,D=C.line.color,U=C.line.width;return k(P)?P:k(D)&&U?D:void 0}(u,d),[a]}function w(E){return M(x,E,u[c+"hoverformat"])}}},95952:function(ee,R,e){ee.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(ee){ee.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(ee,R,e){var M=e(3400),k=e(91352);ee.exports=function(o,T,_){var p=!1;function s(r,n){return M.coerce(o,T,k,r,n)}for(var t=0;t<_.length;t++){var i=_[t];if(i.visible&&i.type==="waterfall"){p=!0;break}}p&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},64488:function(ee,R,e){var M=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,_=e(98184),p=e(82744).clearMinTextSize;ee.exports=function(s,t,i,r){var n=s._fullLayout;p("waterfall",n),_.plot(s,t,i,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),function(a,l,u,h){var c=l.xaxis,x=l.yaxis;k.makeTraceGroups(h,u,"trace bars").each(function(d){var v=M.select(this),g=d[0].trace,y=k.ensureSingle(v,"g","lines");if(g.connector&&g.connector.visible){var m=g.orientation==="h",b=g.connector.mode,f=y.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var O=function(U,I,N,W){var F=[],j=[],H=W?I:N,te=W?N:I;return F[0]=H.c2p(U.s0,!0),j[0]=te.c2p(U.p0,!0),F[1]=H.c2p(U.s1,!0),j[1]=te.c2p(U.p1,!0),F[2]=H.c2p(U.nextS0,!0),j[2]=te.c2p(U.nextP0,!0),W?[F,j]:[j,F]}(w,c,x,m),C=O[0],P=O[1],D="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&(b==="spanning"&&!w.isSum&&E>0&&(D+=m?"M"+C[0]+","+P[1]+"V"+P[0]:"M"+C[1]+","+P[0]+"H"+C[0]),b!=="between"&&(w.isSum||E<S-1)&&(D+=m?"M"+C[1]+","+P[0]+"V"+P[1]:"M"+C[0]+","+P[1]+"H"+C[1]),C[2]!==T&&P[2]!==T&&(D+=m?"M"+C[1]+","+P[1]+"V"+P[2]:"M"+C[1]+","+P[1]+"H"+C[2])),D===""&&(D="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",D).call(o.setClipUrl,l.layerClipId,a)}})}else y.remove()})}(s,t,i,r)}},12252:function(ee,R,e){var M=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,_=e(60100),p=e(82744).resizeText,s=_.styleTextPoints;ee.exports={style:function(t,i,r){var n=r||M.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");p(t,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var l=M.select(this),u=a[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var c=u[h.dir].marker;M.select(this).call(o.fill,c.color).call(o.stroke,c.line.color).call(k.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!h.selected?T:1)}}),s(l,u,t),l.selectAll(".lines").each(function(){var h=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},84224:function(ee,R,e){var M=e(54460),k=e(3400),o=e(73060),T=e(60468).W,_=e(39032).BADNUM;R.moduleType="transform",R.name="aggregate";var p=R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=p.aggregations;function t(a,l,u,h){if(h.enabled){for(var c=h.target,x=k.nestedProperty(l,c),d=x.get(),v=function(m,b){var f=m.func,S=b.d2c,w=b.c2d;switch(f){case"count":return i;case"first":return r;case"last":return n;case"sum":return function(E,O){for(var C=0,P=0;P<O.length;P++){var D=S(E[O[P]]);D!==_&&(C+=D)}return w(C)};case"avg":return function(E,O){for(var C=0,P=0,D=0;D<O.length;D++){var U=S(E[O[D]]);U!==_&&(C+=U,P++)}return P?w(C/P):_};case"min":return function(E,O){for(var C=1/0,P=0;P<O.length;P++){var D=S(E[O[P]]);D!==_&&(C=Math.min(C,D))}return C===1/0?_:w(C)};case"max":return function(E,O){for(var C=-1/0,P=0;P<O.length;P++){var D=S(E[O[P]]);D!==_&&(C=Math.max(C,D))}return C===-1/0?_:w(C)};case"range":return function(E,O){for(var C=1/0,P=-1/0,D=0;D<O.length;D++){var U=S(E[O[D]]);U!==_&&(C=Math.min(C,U),P=Math.max(P,U))}return P===-1/0||C===1/0?_:w(P-C)};case"change":return function(E,O){var C=S(E[O[0]]),P=S(E[O[O.length-1]]);return C===_||P===_?_:w(P-C)};case"median":return function(E,O){for(var C=[],P=0;P<O.length;P++){var D=S(E[O[P]]);D!==_&&C.push(D)}if(!C.length)return _;C.sort(k.sorterAsc);var U=(C.length-1)/2;return w((C[Math.floor(U)]+C[Math.ceil(U)])/2)};case"mode":return function(E,O){for(var C={},P=0,D=_,U=0;U<O.length;U++){var I=S(E[O[U]]);if(I!==_){var N=C[I]=(C[I]||0)+1;N>P&&(P=N,D=I)}}return P?w(D):_};case"rms":return function(E,O){for(var C=0,P=0,D=0;D<O.length;D++){var U=S(E[O[D]]);U!==_&&(C+=U*U,P++)}return P?w(Math.sqrt(C/P)):_};case"stddev":return function(E,O){var C,P=0,D=0,U=1,I=_;for(C=0;C<O.length&&I===_;C++)I=S(E[O[C]]);if(I===_)return _;for(;C<O.length;C++){var N=S(E[O[C]]);if(N!==_){var W=N-I;P+=W,D+=W*W,U++}}var F=m.funcmode==="sample"?U-1:U;return F?Math.sqrt((D-P*P/U)/F):0}}}(h,M.getDataConversions(a,l,c,d)),g=new Array(u.length),y=0;y<u.length;y++)g[y]=v(d,u[y]);x.set(g),h.func==="count"&&k.pushUnique(l._arrayAttrs,c)}}function i(a,l){return l.length}function r(a,l){return a[l[0]]}function n(a,l){return a[l[l.length-1]]}R.supplyDefaults=function(a,l){var u,h={};function c(w,E){return k.coerce(a,h,p,w,E)}if(!c("enabled"))return h;var x=o.findArrayAttributes(l),d={};for(u=0;u<x.length;u++)d[x[u]]=1;var v=c("groups");if(!Array.isArray(v)){if(!d[v])return h.enabled=!1,h;d[v]=0}var g,y=a.aggregations||[],m=h.aggregations=new Array(y.length);function b(w,E){return k.coerce(y[u],g,s,w,E)}for(u=0;u<y.length;u++){g={_index:u};var f=b("target"),S=b("func");b("enabled")&&f&&(d[f]||S==="count"&&d[f]===void 0)?(S==="stddev"&&b("funcmode"),d[f]=0,m[u]=g):m[u]={enabled:!1,_index:u}}for(u=0;u<x.length;u++)d[x[u]]&&m.push({target:x[u],func:s.func.dflt,enabled:!0,_index:-1});return h},R.calcTransform=function(a,l,u){if(u.enabled){var h=u.groups,c=k.getTargetArray(l,{target:h});if(c){var x,d,v,g,y={},m={},b=[],f=T(l.transforms,u),S=c.length;for(l._length&&(S=Math.min(S,l._length)),x=0;x<S;x++)(v=y[d=c[x]])===void 0?(y[d]=b.length,g=[x],b.push(g),m[y[d]]=f(x)):(b[v].push(x),m[y[d]]=(m[y[d]]||[]).concat(f(x)));u._indexToPoints=m;var w=u.aggregations;for(x=0;x<w.length;x++)t(a,l,b,w[x]);typeof h=="string"&&t(a,l,b,{target:h,func:"first",enabled:!0}),l._length=b.length}}}},76744:function(ee,R,e){var M=e(3400),k=e(24040),o=e(54460),T=e(60468).W,_=e(69104),p=_.COMPARISON_OPS,s=_.INTERVAL_OPS,t=_.SET_OPS;R.moduleType="transform",R.name="filter",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(p).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},R.supplyDefaults=function(i){var r={};function n(u,h){return M.coerce(i,r,R.attributes,u,h)}if(n("enabled")){var a=n("target");if(M.isArrayOrTypedArray(a)&&a.length===0)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var l=k.getComponentMethod("calendars","handleDefaults");l(i,r,"valuecalendar",null),l(i,r,"targetcalendar",null)}return r},R.calcTransform=function(i,r,n){if(n.enabled){var a=M.getTargetArray(r,n);if(a){var l=n.target,u=a.length;r._length&&(u=Math.min(u,r._length));var h=n.targetcalendar,c=r._arrayAttrs,x=n.preservegaps;if(typeof l=="string"){var d=M.nestedProperty(r,l+"calendar").get();d&&(h=d)}var v,g,y=function(O,C,P){var D=O.operation,U=O.value,I=M.isArrayOrTypedArray(U);function N(H){return H.indexOf(D)!==-1}var W,F=function(H){return C(H,0,O.valuecalendar)},j=function(H){return C(H,0,P)};switch(N(p)?W=F(I?U[0]:U):N(s)?W=I?[F(U[0]),F(U[1])]:[F(U),F(U)]:N(t)&&(W=I?U.map(F):[F(U)]),D){case"=":return function(H){return j(H)===W};case"!=":return function(H){return j(H)!==W};case"<":return function(H){return j(H)<W};case"<=":return function(H){return j(H)<=W};case">":return function(H){return j(H)>W};case">=":return function(H){return j(H)>=W};case"[]":return function(H){var te=j(H);return te>=W[0]&&te<=W[1]};case"()":return function(H){var te=j(H);return te>W[0]&&te<W[1]};case"[)":return function(H){var te=j(H);return te>=W[0]&&te<W[1]};case"(]":return function(H){var te=j(H);return te>W[0]&&te<=W[1]};case"][":return function(H){var te=j(H);return te<=W[0]||te>=W[1]};case")(":return function(H){var te=j(H);return te<W[0]||te>W[1]};case"](":return function(H){var te=j(H);return te<=W[0]||te>W[1]};case")[":return function(H){var te=j(H);return te<W[0]||te>=W[1]};case"{}":return function(H){return W.indexOf(j(H))!==-1};case"}{":return function(H){return W.indexOf(j(H))===-1}}}(n,o.getDataToCoordFunc(i,r,l,a),h),m={},b={},f=0;x?(v=function(O){m[O.astr]=M.extendDeep([],O.get()),O.set(new Array(u))},g=function(O,C){var P=m[O.astr][C];O.get()[C]=P}):(v=function(O){m[O.astr]=M.extendDeep([],O.get()),O.set([])},g=function(O,C){var P=m[O.astr][C];O.get().push(P)}),E(v);for(var S=T(r.transforms,n),w=0;w<u;w++)y(a[w])?(E(g,w),b[f++]=S(w)):x&&f++;n._indexToPoints=b,r._length=f}}function E(O,C){for(var P=0;P<c.length;P++)O(M.nestedProperty(r,c[P]),C)}}},32028:function(ee,R,e){var M=e(3400),k=e(73060),o=e(7316),T=e(60468).W;function _(p,s){var t,i,r,n,a,l,u,h,c,x,d=s.transform,v=s.transformIndex,g=p.transforms[v].groups,y=T(p.transforms,d);if(!M.isArrayOrTypedArray(g)||g.length===0)return[p];var m=M.filterUnique(g),b=new Array(m.length),f=g.length,S=k.findArrayAttributes(p),w=d.styles||[],E={};for(t=0;t<w.length;t++)E[w[t].target]=w[t].value;d.styles&&(x=M.keyedContainer(d,"styles","target","value.name"));var O={},C={};for(t=0;t<m.length;t++){O[l=m[t]]=t,C[l]=0,(u=b[t]=M.extendDeepNoArrays({},p))._group=l,u.transforms[v]._indexToPoints={};var P=null;for(x&&(P=x.get(l)),u.name=P||P===""?P:M.templateString(d.nameformat,{trace:p.name,group:l}),h=u.transforms,u.transforms=[],i=0;i<h.length;i++)u.transforms[i]=M.extendDeepNoArrays({},h[i]);for(i=0;i<S.length;i++)M.nestedProperty(u,S[i]).set([])}for(r=0;r<S.length;r++){for(n=S[r],i=0,c=[];i<m.length;i++)c[i]=M.nestedProperty(b[i],n).get();for(a=M.nestedProperty(p,n).get(),i=0;i<f;i++)c[O[g[i]]].push(a[i])}for(i=0;i<f;i++)(u=b[O[g[i]]]).transforms[v]._indexToPoints[C[g[i]]]=y(i),C[g[i]]++;for(t=0;t<m.length;t++)l=m[t],u=b[t],o.clearExpandedTraceDefaultColors(u),u=M.extendDeepNoArrays(u,E[l]||{});return b}R.moduleType="transform",R.name="groupby",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},R.supplyDefaults=function(p,s,t){var i,r={};function n(c,x){return M.coerce(p,r,R.attributes,c,x)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=p.styles,l=r.styles=[];if(a)for(i=0;i<a.length;i++){var u=l[i]={};M.coerce(a[i],l[i],R.attributes.styles,"target");var h=M.coerce(a[i],l[i],R.attributes.styles,"value");M.isPlainObject(h)?u.value=M.extendDeep({},h):h&&delete u.value}return r},R.transform=function(p,s){var t,i,r,n=[];for(i=0;i<p.length;i++)for(t=_(p[i],s),r=0;r<t.length;r++)n.push(t[r]);return n}},60468:function(ee,R){R.W=function(e,M){for(var k,o,T=0;T<e.length&&(k=e[T])!==M;T++)k._indexToPoints&&k.enabled!==!1&&(o=k._indexToPoints);var _=o?function(p){return o[p]}:function(p){return[p]};return _}},76272:function(ee,R,e){var M=e(3400),k=e(54460),o=e(60468).W,T=e(39032).BADNUM;R.moduleType="transform",R.name="sort",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},R.supplyDefaults=function(_){var p={};function s(t,i){return M.coerce(_,p,R.attributes,t,i)}return s("enabled")&&(s("target"),s("order")),p},R.calcTransform=function(_,p,s){if(s.enabled){var t=M.getTargetArray(p,s);if(t){var i=s.target,r=t.length;p._length&&(r=Math.min(r,p._length));var n,a,l=p._arrayAttrs,u=function(g,y,m,b){var f,S=new Array(b),w=new Array(b);for(f=0;f<b;f++)S[f]={v:y[f],i:f};for(S.sort(function(E,O){switch(E.order){case"ascending":return function(C,P){var D=O(C.v),U=O(P.v);return D===T?1:U===T?-1:D-U};case"descending":return function(C,P){var D=O(C.v),U=O(P.v);return D===T?1:U===T?-1:U-D}}}(g,m)),f=0;f<b;f++)w[f]=S[f].i;return w}(s,t,k.getDataToCoordFunc(_,p,i,t),r),h=o(p.transforms,s),c={};for(n=0;n<l.length;n++){var x=M.nestedProperty(p,l[n]),d=x.get(),v=new Array(r);for(a=0;a<r;a++)v[a]=d[u[a]];x.set(v)}for(a=0;a<r;a++)c[a]=h(u[a]);s._indexToPoints=c,p._length=r}}}},25788:function(ee,R){R.version="2.33.0"},67792:function(ee,R,e){var M=e(4168);(function(){var k={1964:function(p,s,t){p.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(p,s,t){function i(pe,be){for(var ke=0;ke<be.length;ke++){var Ie=be[ke];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(pe,r(Ie.key),Ie)}}function r(pe){var be=function(ke,Ie){if(u(ke)!="object"||!ke)return ke;var Ee=ke[Symbol.toPrimitive];if(Ee!==void 0){var Be=Ee.call(ke,"string");if(u(Be)!="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ke)}(pe);return u(be)=="symbol"?be:be+""}function n(){try{var pe=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n=function(){return!!pe})()}function a(pe){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(be){return be.__proto__||Object.getPrototypeOf(be)},a(pe)}function l(pe,be){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ke,Ie){return ke.__proto__=Ie,ke},l(pe,be)}function u(pe){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},u(pe)}var h=t(7507),c=t(3778),x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.hp=g,s.IS=50;var d=2147483647;function v(pe){if(pe>d)throw new RangeError('The value "'+pe+'" is invalid for option "size"');var be=new Uint8Array(pe);return Object.setPrototypeOf(be,g.prototype),be}function g(pe,be,ke){if(typeof pe=="number"){if(typeof be=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(pe)}return y(pe,be,ke)}function y(pe,be,ke){if(typeof pe=="string")return function(Be,Ve){if(typeof Ve=="string"&&Ve!==""||(Ve="utf8"),!g.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);var Ze=0|E(Be,Ve),rt=v(Ze),it=rt.write(Be,Ve);return it!==Ze&&(rt=rt.slice(0,it)),rt}(pe,be);if(ArrayBuffer.isView(pe))return function(Be){if(_e(Be,Uint8Array)){var Ve=new Uint8Array(Be);return S(Ve.buffer,Ve.byteOffset,Ve.byteLength)}return f(Be)}(pe);if(pe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(pe));if(_e(pe,ArrayBuffer)||pe&&_e(pe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_e(pe,SharedArrayBuffer)||pe&&_e(pe.buffer,SharedArrayBuffer)))return S(pe,be,ke);if(typeof pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ie=pe.valueOf&&pe.valueOf();if(Ie!=null&&Ie!==pe)return g.from(Ie,be,ke);var Ee=function(Be){if(g.isBuffer(Be)){var Ve=0|w(Be.length),Ze=v(Ve);return Ze.length===0||Be.copy(Ze,0,0,Ve),Ze}return Be.length!==void 0?typeof Be.length!="number"||we(Be.length)?v(0):f(Be):Be.type==="Buffer"&&Array.isArray(Be.data)?f(Be.data):void 0}(pe);if(Ee)return Ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof pe[Symbol.toPrimitive]=="function")return g.from(pe[Symbol.toPrimitive]("string"),be,ke);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(pe))}function m(pe){if(typeof pe!="number")throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function b(pe){return m(pe),v(pe<0?0:0|w(pe))}function f(pe){for(var be=pe.length<0?0:0|w(pe.length),ke=v(be),Ie=0;Ie<be;Ie+=1)ke[Ie]=255&pe[Ie];return ke}function S(pe,be,ke){if(be<0||pe.byteLength<be)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<be+(ke||0))throw new RangeError('"length" is outside of buffer bounds');var Ie;return Ie=be===void 0&&ke===void 0?new Uint8Array(pe):ke===void 0?new Uint8Array(pe,be):new Uint8Array(pe,be,ke),Object.setPrototypeOf(Ie,g.prototype),Ie}function w(pe){if(pe>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|pe}function E(pe,be){if(g.isBuffer(pe))return pe.length;if(ArrayBuffer.isView(pe)||_e(pe,ArrayBuffer))return pe.byteLength;if(typeof pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(pe));var ke=pe.length,Ie=arguments.length>2&&arguments[2]===!0;if(!Ie&&ke===0)return 0;for(var Ee=!1;;)switch(be){case"ascii":case"latin1":case"binary":return ke;case"utf8":case"utf-8":return ie(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ke;case"hex":return ke>>>1;case"base64":return de(pe).length;default:if(Ee)return Ie?-1:ie(pe).length;be=(""+be).toLowerCase(),Ee=!0}}function O(pe,be,ke){var Ie=!1;if((be===void 0||be<0)&&(be=0),be>this.length||((ke===void 0||ke>this.length)&&(ke=this.length),ke<=0)||(ke>>>=0)<=(be>>>=0))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return K(this,be,ke);case"utf8":case"utf-8":return H(this,be,ke);case"ascii":return Q(this,be,ke);case"latin1":case"binary":return $(this,be,ke);case"base64":return j(this,be,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,be,ke);default:if(Ie)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),Ie=!0}}function C(pe,be,ke){var Ie=pe[be];pe[be]=pe[ke],pe[ke]=Ie}function P(pe,be,ke,Ie,Ee){if(pe.length===0)return-1;if(typeof ke=="string"?(Ie=ke,ke=0):ke>2147483647?ke=2147483647:ke<-2147483648&&(ke=-2147483648),we(ke=+ke)&&(ke=Ee?0:pe.length-1),ke<0&&(ke=pe.length+ke),ke>=pe.length){if(Ee)return-1;ke=pe.length-1}else if(ke<0){if(!Ee)return-1;ke=0}if(typeof be=="string"&&(be=g.from(be,Ie)),g.isBuffer(be))return be.length===0?-1:D(pe,be,ke,Ie,Ee);if(typeof be=="number")return be&=255,typeof Uint8Array.prototype.indexOf=="function"?Ee?Uint8Array.prototype.indexOf.call(pe,be,ke):Uint8Array.prototype.lastIndexOf.call(pe,be,ke):D(pe,[be],ke,Ie,Ee);throw new TypeError("val must be string, number or Buffer")}function D(pe,be,ke,Ie,Ee){var Be,Ve=1,Ze=pe.length,rt=be.length;if(Ie!==void 0&&((Ie=String(Ie).toLowerCase())==="ucs2"||Ie==="ucs-2"||Ie==="utf16le"||Ie==="utf-16le")){if(pe.length<2||be.length<2)return-1;Ve=2,Ze/=2,rt/=2,ke/=2}function it(Qe,Je){return Ve===1?Qe[Je]:Qe.readUInt16BE(Je*Ve)}if(Ee){var dt=-1;for(Be=ke;Be<Ze;Be++)if(it(pe,Be)===it(be,dt===-1?0:Be-dt)){if(dt===-1&&(dt=Be),Be-dt+1===rt)return dt*Ve}else dt!==-1&&(Be-=Be-dt),dt=-1}else for(ke+rt>Ze&&(ke=Ze-rt),Be=ke;Be>=0;Be--){for(var vt=!0,ht=0;ht<rt;ht++)if(it(pe,Be+ht)!==it(be,ht)){vt=!1;break}if(vt)return Be}return-1}function U(pe,be,ke,Ie){ke=Number(ke)||0;var Ee=pe.length-ke;Ie?(Ie=Number(Ie))>Ee&&(Ie=Ee):Ie=Ee;var Be,Ve=be.length;for(Ie>Ve/2&&(Ie=Ve/2),Be=0;Be<Ie;++Be){var Ze=parseInt(be.substr(2*Be,2),16);if(we(Ze))return Be;pe[ke+Be]=Ze}return Be}function I(pe,be,ke,Ie){return Se(ie(be,pe.length-ke),pe,ke,Ie)}function N(pe,be,ke,Ie){return Se(function(Ee){for(var Be=[],Ve=0;Ve<Ee.length;++Ve)Be.push(255&Ee.charCodeAt(Ve));return Be}(be),pe,ke,Ie)}function W(pe,be,ke,Ie){return Se(de(be),pe,ke,Ie)}function F(pe,be,ke,Ie){return Se(function(Ee,Be){for(var Ve,Ze,rt,it=[],dt=0;dt<Ee.length&&!((Be-=2)<0);++dt)Ze=(Ve=Ee.charCodeAt(dt))>>8,rt=Ve%256,it.push(rt),it.push(Ze);return it}(be,pe.length-ke),pe,ke,Ie)}function j(pe,be,ke){return be===0&&ke===pe.length?h.fromByteArray(pe):h.fromByteArray(pe.slice(be,ke))}function H(pe,be,ke){ke=Math.min(pe.length,ke);for(var Ie=[],Ee=be;Ee<ke;){var Be=pe[Ee],Ve=null,Ze=Be>239?4:Be>223?3:Be>191?2:1;if(Ee+Ze<=ke){var rt=void 0,it=void 0,dt=void 0,vt=void 0;switch(Ze){case 1:Be<128&&(Ve=Be);break;case 2:(192&(rt=pe[Ee+1]))==128&&(vt=(31&Be)<<6|63&rt)>127&&(Ve=vt);break;case 3:rt=pe[Ee+1],it=pe[Ee+2],(192&rt)==128&&(192&it)==128&&(vt=(15&Be)<<12|(63&rt)<<6|63&it)>2047&&(vt<55296||vt>57343)&&(Ve=vt);break;case 4:rt=pe[Ee+1],it=pe[Ee+2],dt=pe[Ee+3],(192&rt)==128&&(192&it)==128&&(192&dt)==128&&(vt=(15&Be)<<18|(63&rt)<<12|(63&it)<<6|63&dt)>65535&&vt<1114112&&(Ve=vt)}}Ve===null?(Ve=65533,Ze=1):Ve>65535&&(Ve-=65536,Ie.push(Ve>>>10&1023|55296),Ve=56320|1023&Ve),Ie.push(Ve),Ee+=Ze}return function(ht){var Qe=ht.length;if(Qe<=te)return String.fromCharCode.apply(String,ht);for(var Je="",Tt=0;Tt<Qe;)Je+=String.fromCharCode.apply(String,ht.slice(Tt,Tt+=te));return Je}(Ie)}g.TYPED_ARRAY_SUPPORT=function(){try{var pe=new Uint8Array(1),be={foo:function(){return 42}};return Object.setPrototypeOf(be,Uint8Array.prototype),Object.setPrototypeOf(pe,be),pe.foo()===42}catch{return!1}}(),g.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(pe,be,ke){return y(pe,be,ke)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(pe,be,ke){return function(Ie,Ee,Be){return m(Ie),Ie<=0?v(Ie):Ee!==void 0?typeof Be=="string"?v(Ie).fill(Ee,Be):v(Ie).fill(Ee):v(Ie)}(pe,be,ke)},g.allocUnsafe=function(pe){return b(pe)},g.allocUnsafeSlow=function(pe){return b(pe)},g.isBuffer=function(pe){return pe!=null&&pe._isBuffer===!0&&pe!==g.prototype},g.compare=function(pe,be){if(_e(pe,Uint8Array)&&(pe=g.from(pe,pe.offset,pe.byteLength)),_e(be,Uint8Array)&&(be=g.from(be,be.offset,be.byteLength)),!g.isBuffer(pe)||!g.isBuffer(be))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pe===be)return 0;for(var ke=pe.length,Ie=be.length,Ee=0,Be=Math.min(ke,Ie);Ee<Be;++Ee)if(pe[Ee]!==be[Ee]){ke=pe[Ee],Ie=be[Ee];break}return ke<Ie?-1:Ie<ke?1:0},g.isEncoding=function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(pe,be){if(!Array.isArray(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(pe.length===0)return g.alloc(0);var ke;if(be===void 0)for(be=0,ke=0;ke<pe.length;++ke)be+=pe[ke].length;var Ie=g.allocUnsafe(be),Ee=0;for(ke=0;ke<pe.length;++ke){var Be=pe[ke];if(_e(Be,Uint8Array))Ee+Be.length>Ie.length?(g.isBuffer(Be)||(Be=g.from(Be)),Be.copy(Ie,Ee)):Uint8Array.prototype.set.call(Ie,Be,Ee);else{if(!g.isBuffer(Be))throw new TypeError('"list" argument must be an Array of Buffers');Be.copy(Ie,Ee)}Ee+=Be.length}return Ie},g.byteLength=E,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var pe=this.length;if(pe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var be=0;be<pe;be+=2)C(this,be,be+1);return this},g.prototype.swap32=function(){var pe=this.length;if(pe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var be=0;be<pe;be+=4)C(this,be,be+3),C(this,be+1,be+2);return this},g.prototype.swap64=function(){var pe=this.length;if(pe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var be=0;be<pe;be+=8)C(this,be,be+7),C(this,be+1,be+6),C(this,be+2,be+5),C(this,be+3,be+4);return this},g.prototype.toString=function(){var pe=this.length;return pe===0?"":arguments.length===0?H(this,0,pe):O.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(pe){if(!g.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe||g.compare(this,pe)===0},g.prototype.inspect=function(){var pe="",be=s.IS;return pe=this.toString("hex",0,be).replace(/(.{2})/g,"$1 ").trim(),this.length>be&&(pe+=" ... "),"<Buffer "+pe+">"},x&&(g.prototype[x]=g.prototype.inspect),g.prototype.compare=function(pe,be,ke,Ie,Ee){if(_e(pe,Uint8Array)&&(pe=g.from(pe,pe.offset,pe.byteLength)),!g.isBuffer(pe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(pe));if(be===void 0&&(be=0),ke===void 0&&(ke=pe?pe.length:0),Ie===void 0&&(Ie=0),Ee===void 0&&(Ee=this.length),be<0||ke>pe.length||Ie<0||Ee>this.length)throw new RangeError("out of range index");if(Ie>=Ee&&be>=ke)return 0;if(Ie>=Ee)return-1;if(be>=ke)return 1;if(this===pe)return 0;for(var Be=(Ee>>>=0)-(Ie>>>=0),Ve=(ke>>>=0)-(be>>>=0),Ze=Math.min(Be,Ve),rt=this.slice(Ie,Ee),it=pe.slice(be,ke),dt=0;dt<Ze;++dt)if(rt[dt]!==it[dt]){Be=rt[dt],Ve=it[dt];break}return Be<Ve?-1:Ve<Be?1:0},g.prototype.includes=function(pe,be,ke){return this.indexOf(pe,be,ke)!==-1},g.prototype.indexOf=function(pe,be,ke){return P(this,pe,be,ke,!0)},g.prototype.lastIndexOf=function(pe,be,ke){return P(this,pe,be,ke,!1)},g.prototype.write=function(pe,be,ke,Ie){if(be===void 0)Ie="utf8",ke=this.length,be=0;else if(ke===void 0&&typeof be=="string")Ie=be,ke=this.length,be=0;else{if(!isFinite(be))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");be>>>=0,isFinite(ke)?(ke>>>=0,Ie===void 0&&(Ie="utf8")):(Ie=ke,ke=void 0)}var Ee=this.length-be;if((ke===void 0||ke>Ee)&&(ke=Ee),pe.length>0&&(ke<0||be<0)||be>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");for(var Be=!1;;)switch(Ie){case"hex":return U(this,pe,be,ke);case"utf8":case"utf-8":return I(this,pe,be,ke);case"ascii":case"latin1":case"binary":return N(this,pe,be,ke);case"base64":return W(this,pe,be,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,pe,be,ke);default:if(Be)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),Be=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var te=4096;function Q(pe,be,ke){var Ie="";ke=Math.min(pe.length,ke);for(var Ee=be;Ee<ke;++Ee)Ie+=String.fromCharCode(127&pe[Ee]);return Ie}function $(pe,be,ke){var Ie="";ke=Math.min(pe.length,ke);for(var Ee=be;Ee<ke;++Ee)Ie+=String.fromCharCode(pe[Ee]);return Ie}function K(pe,be,ke){var Ie=pe.length;(!be||be<0)&&(be=0),(!ke||ke<0||ke>Ie)&&(ke=Ie);for(var Ee="",Be=be;Be<ke;++Be)Ee+=Ae[pe[Be]];return Ee}function X(pe,be,ke){for(var Ie=pe.slice(be,ke),Ee="",Be=0;Be<Ie.length-1;Be+=2)Ee+=String.fromCharCode(Ie[Be]+256*Ie[Be+1]);return Ee}function Y(pe,be,ke){if(pe%1!=0||pe<0)throw new RangeError("offset is not uint");if(pe+be>ke)throw new RangeError("Trying to access beyond buffer length")}function re(pe,be,ke,Ie,Ee,Be){if(!g.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(be>Ee||be<Be)throw new RangeError('"value" argument is out of bounds');if(ke+Ie>pe.length)throw new RangeError("Index out of range")}function se(pe,be,ke,Ie,Ee){Me(be,Ie,Ee,pe,ke,7);var Be=Number(be&BigInt(4294967295));pe[ke++]=Be,Be>>=8,pe[ke++]=Be,Be>>=8,pe[ke++]=Be,Be>>=8,pe[ke++]=Be;var Ve=Number(be>>BigInt(32)&BigInt(4294967295));return pe[ke++]=Ve,Ve>>=8,pe[ke++]=Ve,Ve>>=8,pe[ke++]=Ve,Ve>>=8,pe[ke++]=Ve,ke}function ae(pe,be,ke,Ie,Ee){Me(be,Ie,Ee,pe,ke,7);var Be=Number(be&BigInt(4294967295));pe[ke+7]=Be,Be>>=8,pe[ke+6]=Be,Be>>=8,pe[ke+5]=Be,Be>>=8,pe[ke+4]=Be;var Ve=Number(be>>BigInt(32)&BigInt(4294967295));return pe[ke+3]=Ve,Ve>>=8,pe[ke+2]=Ve,Ve>>=8,pe[ke+1]=Ve,Ve>>=8,pe[ke]=Ve,ke+8}function ce(pe,be,ke,Ie,Ee,Be){if(ke+Ie>pe.length)throw new RangeError("Index out of range");if(ke<0)throw new RangeError("Index out of range")}function fe(pe,be,ke,Ie,Ee){return be=+be,ke>>>=0,Ee||ce(pe,0,ke,4),c.write(pe,be,ke,Ie,23,4),ke+4}function he(pe,be,ke,Ie,Ee){return be=+be,ke>>>=0,Ee||ce(pe,0,ke,8),c.write(pe,be,ke,Ie,52,8),ke+8}g.prototype.slice=function(pe,be){var ke=this.length;(pe=~~pe)<0?(pe+=ke)<0&&(pe=0):pe>ke&&(pe=ke),(be=be===void 0?ke:~~be)<0?(be+=ke)<0&&(be=0):be>ke&&(be=ke),be<pe&&(be=pe);var Ie=this.subarray(pe,be);return Object.setPrototypeOf(Ie,g.prototype),Ie},g.prototype.readUintLE=g.prototype.readUIntLE=function(pe,be,ke){pe>>>=0,be>>>=0,ke||Y(pe,be,this.length);for(var Ie=this[pe],Ee=1,Be=0;++Be<be&&(Ee*=256);)Ie+=this[pe+Be]*Ee;return Ie},g.prototype.readUintBE=g.prototype.readUIntBE=function(pe,be,ke){pe>>>=0,be>>>=0,ke||Y(pe,be,this.length);for(var Ie=this[pe+--be],Ee=1;be>0&&(Ee*=256);)Ie+=this[pe+--be]*Ee;return Ie},g.prototype.readUint8=g.prototype.readUInt8=function(pe,be){return pe>>>=0,be||Y(pe,1,this.length),this[pe]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(pe,be){return pe>>>=0,be||Y(pe,2,this.length),this[pe]|this[pe+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(pe,be){return pe>>>=0,be||Y(pe,2,this.length),this[pe]<<8|this[pe+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(pe,be){return pe>>>=0,be||Y(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+16777216*this[pe+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(pe,be){return pe>>>=0,be||Y(pe,4,this.length),16777216*this[pe]+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},g.prototype.readBigUInt64LE=Oe(function(pe){Pe(pe>>>=0,"offset");var be=this[pe],ke=this[pe+7];be!==void 0&&ke!==void 0||ge(pe,this.length-8);var Ie=be+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24),Ee=this[++pe]+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+ke*Math.pow(2,24);return BigInt(Ie)+(BigInt(Ee)<<BigInt(32))}),g.prototype.readBigUInt64BE=Oe(function(pe){Pe(pe>>>=0,"offset");var be=this[pe],ke=this[pe+7];be!==void 0&&ke!==void 0||ge(pe,this.length-8);var Ie=be*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe],Ee=this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+ke;return(BigInt(Ie)<<BigInt(32))+BigInt(Ee)}),g.prototype.readIntLE=function(pe,be,ke){pe>>>=0,be>>>=0,ke||Y(pe,be,this.length);for(var Ie=this[pe],Ee=1,Be=0;++Be<be&&(Ee*=256);)Ie+=this[pe+Be]*Ee;return Ie>=(Ee*=128)&&(Ie-=Math.pow(2,8*be)),Ie},g.prototype.readIntBE=function(pe,be,ke){pe>>>=0,be>>>=0,ke||Y(pe,be,this.length);for(var Ie=be,Ee=1,Be=this[pe+--Ie];Ie>0&&(Ee*=256);)Be+=this[pe+--Ie]*Ee;return Be>=(Ee*=128)&&(Be-=Math.pow(2,8*be)),Be},g.prototype.readInt8=function(pe,be){return pe>>>=0,be||Y(pe,1,this.length),128&this[pe]?-1*(255-this[pe]+1):this[pe]},g.prototype.readInt16LE=function(pe,be){pe>>>=0,be||Y(pe,2,this.length);var ke=this[pe]|this[pe+1]<<8;return 32768&ke?4294901760|ke:ke},g.prototype.readInt16BE=function(pe,be){pe>>>=0,be||Y(pe,2,this.length);var ke=this[pe+1]|this[pe]<<8;return 32768&ke?4294901760|ke:ke},g.prototype.readInt32LE=function(pe,be){return pe>>>=0,be||Y(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},g.prototype.readInt32BE=function(pe,be){return pe>>>=0,be||Y(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},g.prototype.readBigInt64LE=Oe(function(pe){Pe(pe>>>=0,"offset");var be=this[pe],ke=this[pe+7];be!==void 0&&ke!==void 0||ge(pe,this.length-8);var Ie=this[pe+4]+this[pe+5]*Math.pow(2,8)+this[pe+6]*Math.pow(2,16)+(ke<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(be+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24))}),g.prototype.readBigInt64BE=Oe(function(pe){Pe(pe>>>=0,"offset");var be=this[pe],ke=this[pe+7];be!==void 0&&ke!==void 0||ge(pe,this.length-8);var Ie=(be<<24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+ke)}),g.prototype.readFloatLE=function(pe,be){return pe>>>=0,be||Y(pe,4,this.length),c.read(this,pe,!0,23,4)},g.prototype.readFloatBE=function(pe,be){return pe>>>=0,be||Y(pe,4,this.length),c.read(this,pe,!1,23,4)},g.prototype.readDoubleLE=function(pe,be){return pe>>>=0,be||Y(pe,8,this.length),c.read(this,pe,!0,52,8)},g.prototype.readDoubleBE=function(pe,be){return pe>>>=0,be||Y(pe,8,this.length),c.read(this,pe,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(pe,be,ke,Ie){pe=+pe,be>>>=0,ke>>>=0,Ie||re(this,pe,be,ke,Math.pow(2,8*ke)-1,0);var Ee=1,Be=0;for(this[be]=255&pe;++Be<ke&&(Ee*=256);)this[be+Be]=pe/Ee&255;return be+ke},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(pe,be,ke,Ie){pe=+pe,be>>>=0,ke>>>=0,Ie||re(this,pe,be,ke,Math.pow(2,8*ke)-1,0);var Ee=ke-1,Be=1;for(this[be+Ee]=255&pe;--Ee>=0&&(Be*=256);)this[be+Ee]=pe/Be&255;return be+ke},g.prototype.writeUint8=g.prototype.writeUInt8=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,1,255,0),this[be]=255&pe,be+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,2,65535,0),this[be]=255&pe,this[be+1]=pe>>>8,be+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,2,65535,0),this[be]=pe>>>8,this[be+1]=255&pe,be+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,4,4294967295,0),this[be+3]=pe>>>24,this[be+2]=pe>>>16,this[be+1]=pe>>>8,this[be]=255&pe,be+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,4,4294967295,0),this[be]=pe>>>24,this[be+1]=pe>>>16,this[be+2]=pe>>>8,this[be+3]=255&pe,be+4},g.prototype.writeBigUInt64LE=Oe(function(pe){return se(this,pe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=Oe(function(pe){return ae(this,pe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(pe,be,ke,Ie){if(pe=+pe,be>>>=0,!Ie){var Ee=Math.pow(2,8*ke-1);re(this,pe,be,ke,Ee-1,-Ee)}var Be=0,Ve=1,Ze=0;for(this[be]=255&pe;++Be<ke&&(Ve*=256);)pe<0&&Ze===0&&this[be+Be-1]!==0&&(Ze=1),this[be+Be]=(pe/Ve>>0)-Ze&255;return be+ke},g.prototype.writeIntBE=function(pe,be,ke,Ie){if(pe=+pe,be>>>=0,!Ie){var Ee=Math.pow(2,8*ke-1);re(this,pe,be,ke,Ee-1,-Ee)}var Be=ke-1,Ve=1,Ze=0;for(this[be+Be]=255&pe;--Be>=0&&(Ve*=256);)pe<0&&Ze===0&&this[be+Be+1]!==0&&(Ze=1),this[be+Be]=(pe/Ve>>0)-Ze&255;return be+ke},g.prototype.writeInt8=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,1,127,-128),pe<0&&(pe=255+pe+1),this[be]=255&pe,be+1},g.prototype.writeInt16LE=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,2,32767,-32768),this[be]=255&pe,this[be+1]=pe>>>8,be+2},g.prototype.writeInt16BE=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,2,32767,-32768),this[be]=pe>>>8,this[be+1]=255&pe,be+2},g.prototype.writeInt32LE=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,4,2147483647,-2147483648),this[be]=255&pe,this[be+1]=pe>>>8,this[be+2]=pe>>>16,this[be+3]=pe>>>24,be+4},g.prototype.writeInt32BE=function(pe,be,ke){return pe=+pe,be>>>=0,ke||re(this,pe,be,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),this[be]=pe>>>24,this[be+1]=pe>>>16,this[be+2]=pe>>>8,this[be+3]=255&pe,be+4},g.prototype.writeBigInt64LE=Oe(function(pe){return se(this,pe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=Oe(function(pe){return ae(this,pe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeFloatLE=function(pe,be,ke){return fe(this,pe,be,!0,ke)},g.prototype.writeFloatBE=function(pe,be,ke){return fe(this,pe,be,!1,ke)},g.prototype.writeDoubleLE=function(pe,be,ke){return he(this,pe,be,!0,ke)},g.prototype.writeDoubleBE=function(pe,be,ke){return he(this,pe,be,!1,ke)},g.prototype.copy=function(pe,be,ke,Ie){if(!g.isBuffer(pe))throw new TypeError("argument should be a Buffer");if(ke||(ke=0),Ie||Ie===0||(Ie=this.length),be>=pe.length&&(be=pe.length),be||(be=0),Ie>0&&Ie<ke&&(Ie=ke),Ie===ke||pe.length===0||this.length===0)return 0;if(be<0)throw new RangeError("targetStart out of bounds");if(ke<0||ke>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),pe.length-be<Ie-ke&&(Ie=pe.length-be+ke);var Ee=Ie-ke;return this===pe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(be,ke,Ie):Uint8Array.prototype.set.call(pe,this.subarray(ke,Ie),be),Ee},g.prototype.fill=function(pe,be,ke,Ie){if(typeof pe=="string"){if(typeof be=="string"?(Ie=be,be=0,ke=this.length):typeof ke=="string"&&(Ie=ke,ke=this.length),Ie!==void 0&&typeof Ie!="string")throw new TypeError("encoding must be a string");if(typeof Ie=="string"&&!g.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(pe.length===1){var Ee=pe.charCodeAt(0);(Ie==="utf8"&&Ee<128||Ie==="latin1")&&(pe=Ee)}}else typeof pe=="number"?pe&=255:typeof pe=="boolean"&&(pe=Number(pe));if(be<0||this.length<be||this.length<ke)throw new RangeError("Out of range index");if(ke<=be)return this;var Be;if(be>>>=0,ke=ke===void 0?this.length:ke>>>0,pe||(pe=0),typeof pe=="number")for(Be=be;Be<ke;++Be)this[Be]=pe;else{var Ve=g.isBuffer(pe)?pe:g.from(pe,Ie),Ze=Ve.length;if(Ze===0)throw new TypeError('The value "'+pe+'" is invalid for argument "value"');for(Be=0;Be<ke-be;++Be)this[Be+be]=Ve[Be%Ze]}return this};var ve={};function ye(pe,be,ke){ve[pe]=function(Ie){function Ee(){var Ze,rt,it,dt;return function(vt,ht){if(!(vt instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,Ee),rt=this,it=a(it=Ee),Ze=function(vt,ht){if(ht&&(u(ht)==="object"||typeof ht=="function"))return ht;if(ht!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qe){if(Qe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qe}(vt)}(rt,n()?Reflect.construct(it,[],a(rt).constructor):it.apply(rt,dt)),Object.defineProperty(Ze,"message",{value:be.apply(Ze,arguments),writable:!0,configurable:!0}),Ze.name="".concat(Ze.name," [").concat(pe,"]"),Ze.stack,delete Ze.name,Ze}return function(Ze,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");Ze.prototype=Object.create(rt&&rt.prototype,{constructor:{value:Ze,writable:!0,configurable:!0}}),Object.defineProperty(Ze,"prototype",{writable:!1}),rt&&l(Ze,rt)}(Ee,Ie),Be=Ee,(Ve=[{key:"code",get:function(){return pe},set:function(Ze){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ze,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(pe,"]: ").concat(this.message)}}])&&i(Be.prototype,Ve),Object.defineProperty(Be,"prototype",{writable:!1}),Be;var Be,Ve}(ke)}function me(pe){for(var be="",ke=pe.length,Ie=pe[0]==="-"?1:0;ke>=Ie+4;ke-=3)be="_".concat(pe.slice(ke-3,ke)).concat(be);return"".concat(pe.slice(0,ke)).concat(be)}function Me(pe,be,ke,Ie,Ee,Be){if(pe>ke||pe<be){var Ve,Ze=typeof be=="bigint"?"n":"";throw Ve=be===0||be===BigInt(0)?">= 0".concat(Ze," and < 2").concat(Ze," ** ").concat(8*(Be+1)).concat(Ze):">= -(2".concat(Ze," ** ").concat(8*(Be+1)-1).concat(Ze,") and < 2 ** ")+"".concat(8*(Be+1)-1).concat(Ze),new ve.ERR_OUT_OF_RANGE("value",Ve,pe)}(function(rt,it,dt){Pe(it,"offset"),rt[it]!==void 0&&rt[it+dt]!==void 0||ge(it,rt.length-(dt+1))})(Ie,Ee,Be)}function Pe(pe,be){if(typeof pe!="number")throw new ve.ERR_INVALID_ARG_TYPE(be,"number",pe)}function ge(pe,be,ke){throw Math.floor(pe)!==pe?(Pe(pe,ke),new ve.ERR_OUT_OF_RANGE("offset","an integer",pe)):be<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(be),pe)}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?"".concat(pe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(pe,be){return'The "'.concat(pe,'" argument must be of type number. Received type ').concat(u(be))},TypeError),ye("ERR_OUT_OF_RANGE",function(pe,be,ke){var Ie='The value of "'.concat(pe,'" is out of range.'),Ee=ke;return Number.isInteger(ke)&&Math.abs(ke)>Math.pow(2,32)?Ee=me(String(ke)):typeof ke=="bigint"&&(Ee=String(ke),(ke>Math.pow(BigInt(2),BigInt(32))||ke<-Math.pow(BigInt(2),BigInt(32)))&&(Ee=me(Ee)),Ee+="n"),Ie+" It must be ".concat(be,". Received ").concat(Ee)},RangeError);var oe=/[^+/0-9A-Za-z-_]/g;function ie(pe,be){var ke;be=be||1/0;for(var Ie=pe.length,Ee=null,Be=[],Ve=0;Ve<Ie;++Ve){if((ke=pe.charCodeAt(Ve))>55295&&ke<57344){if(!Ee){if(ke>56319){(be-=3)>-1&&Be.push(239,191,189);continue}if(Ve+1===Ie){(be-=3)>-1&&Be.push(239,191,189);continue}Ee=ke;continue}if(ke<56320){(be-=3)>-1&&Be.push(239,191,189),Ee=ke;continue}ke=65536+(Ee-55296<<10|ke-56320)}else Ee&&(be-=3)>-1&&Be.push(239,191,189);if(Ee=null,ke<128){if((be-=1)<0)break;Be.push(ke)}else if(ke<2048){if((be-=2)<0)break;Be.push(ke>>6|192,63&ke|128)}else if(ke<65536){if((be-=3)<0)break;Be.push(ke>>12|224,ke>>6&63|128,63&ke|128)}else{if(!(ke<1114112))throw new Error("Invalid code point");if((be-=4)<0)break;Be.push(ke>>18|240,ke>>12&63|128,ke>>6&63|128,63&ke|128)}}return Be}function de(pe){return h.toByteArray(function(be){if((be=(be=be.split("=")[0]).trim().replace(oe,"")).length<2)return"";for(;be.length%4!=0;)be+="=";return be}(pe))}function Se(pe,be,ke,Ie){var Ee;for(Ee=0;Ee<Ie&&!(Ee+ke>=be.length||Ee>=pe.length);++Ee)be[Ee+ke]=pe[Ee];return Ee}function _e(pe,be){return pe instanceof be||pe!=null&&pe.constructor!=null&&pe.constructor.name!=null&&pe.constructor.name===be.name}function we(pe){return pe!=pe}var Ae=function(){for(var pe="0123456789abcdef",be=new Array(256),ke=0;ke<16;++ke)for(var Ie=16*ke,Ee=0;Ee<16;++Ee)be[Ie+Ee]=pe[ke]+pe[Ee];return be}();function Oe(pe){return typeof BigInt>"u"?ze:pe}function ze(){throw new Error("BigInt not supported")}},9216:function(p){p.exports=r,p.exports.isMobile=r,p.exports.default=r;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function r(n){n||(n={});var a=n.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),typeof a!="string")return!1;var l=s.test(a)&&!t.test(a)||!!n.tablet&&i.test(a);return!l&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1&&(l=!0),l}},6296:function(p,s,t){p.exports=function(u){var h=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],x=u.up||[0,1,0],d=u.distanceLimits||[0,1/0],v=u.mode||"turntable",g=i(),y=r(),m=n();return g.setDistanceLimits(d[0],d[1]),g.lookAt(0,h,c,x),y.setDistanceLimits(d[0],d[1]),y.lookAt(0,h,c,x),m.setDistanceLimits(d[0],d[1]),m.lookAt(0,h,c,x),new a({turntable:g,orbit:y,matrix:m},v)};var i=t(7261),r=t(9977),n=t(4192);function a(u,h){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=h,this._active=u[h],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=a.prototype;l.flush=function(u){for(var h=this._controllerList,c=0;c<h.length;++c)h[c].flush(u)},l.idle=function(u){for(var h=this._controllerList,c=0;c<h.length;++c)h[c].idle(u)},l.lookAt=function(u,h,c,x){for(var d=this._controllerList,v=0;v<d.length;++v)d[v].lookAt(u,h,c,x)},l.rotate=function(u,h,c,x){for(var d=this._controllerList,v=0;v<d.length;++v)d[v].rotate(u,h,c,x)},l.pan=function(u,h,c,x){for(var d=this._controllerList,v=0;v<d.length;++v)d[v].pan(u,h,c,x)},l.translate=function(u,h,c,x){for(var d=this._controllerList,v=0;v<d.length;++v)d[v].translate(u,h,c,x)},l.setMatrix=function(u,h){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setMatrix(u,h)},l.setDistanceLimits=function(u,h){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistanceLimits(u,h)},l.setDistance=function(u,h){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistance(u,h)},l.recalcMatrix=function(u){this._active.recalcMatrix(u)},l.getDistance=function(u){return this._active.getDistance(u)},l.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},l.lastT=function(){return this._active.lastT()},l.setMode=function(u){if(u!==this._mode){var h=this._controllerNames.indexOf(u);if(!(h<0)){var c=this._active,x=this._controllerList[h],d=Math.max(c.lastT(),x.lastT());c.recalcMatrix(d),x.setMatrix(d,c.computedMatrix),this._active=x,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},7169:function(p,s,t){var i=typeof WeakMap>"u"?t(1538):WeakMap,r=t(2762),n=t(8116),a=new i;p.exports=function(l){var u=a.get(l),h=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!h||!l.isBuffer(h)){var c=r(l,new Float32Array([-1,-1,-1,4,4,-1]));(u=n(l,[{buffer:c,type:l.FLOAT,size:2}]))._triangleBuffer=c,a.set(l,u)}u.bind(),l.drawArrays(l.TRIANGLES,0,3),u.unbind()}},1085:function(p,s,t){var i=t(1371);p.exports=function(r,n,a){n=typeof n=="number"?n:1,a=a||": ";var l=r.split(/\r?\n/),u=String(l.length+n-1).length;return l.map(function(h,c){var x=c+n,d=String(x).length;return i(x,u-d)+a+h}).join(`
`)}},3952:function(p,s,t){p.exports=function(n){var a=n.length;if(a===0)return[];if(a===1)return[0];for(var l=n[0].length,u=[n[0]],h=[0],c=1;c<a;++c)if(u.push(n[c]),r(u,l)){if(h.push(c),h.length===l+1)return h}else u.pop();return h};var i=t(3250);function r(n,a){for(var l=new Array(a+1),u=0;u<n.length;++u)l[u]=n[u];for(u=0;u<=n.length;++u){for(var h=n.length;h<=a;++h){for(var c=new Array(a),x=0;x<a;++x)c[x]=Math.pow(h+1-u,x);l[h]=c}if(i.apply(void 0,l))return!0}return!1}},5995:function(p,s,t){p.exports=function(n,a){return i(a).filter(function(l){for(var u=new Array(l.length),h=0;h<l.length;++h)u[h]=a[l[h]];return r(u)*n<1})};var i=t(7642),r=t(6037)},3502:function(p,s,t){p.exports=function(n,a){return r(i(n,a))};var i=t(5995),r=t(9127)},6468:function(p){p.exports=function(s){return atob(s)}},2642:function(p,s,t){p.exports=function(n,a){for(var l=a.length,u=new Array(l+1),h=0;h<l;++h){for(var c=new Array(l+1),x=0;x<=l;++x)c[x]=n[x][h];u[h]=c}for(u[l]=new Array(l+1),h=0;h<=l;++h)u[l][h]=1;var d=new Array(l+1);for(h=0;h<l;++h)d[h]=a[h];d[l]=1;var v=i(u,d),g=r(v[l+1]);g===0&&(g=1);var y=new Array(l+1);for(h=0;h<=l;++h)y[h]=r(v[h])/g;return y};var i=t(727);function r(n){for(var a=0,l=0;l<n.length;++l)a+=n[l];return a}},7507:function(p,s){s.byteLength=function(h){var c=l(h),x=c[0],d=c[1];return 3*(x+d)/4-d},s.toByteArray=function(h){var c,x,d=l(h),v=d[0],g=d[1],y=new r(function(f,S,w){return 3*(S+w)/4-w}(0,v,g)),m=0,b=g>0?v-4:v;for(x=0;x<b;x+=4)c=i[h.charCodeAt(x)]<<18|i[h.charCodeAt(x+1)]<<12|i[h.charCodeAt(x+2)]<<6|i[h.charCodeAt(x+3)],y[m++]=c>>16&255,y[m++]=c>>8&255,y[m++]=255&c;return g===2&&(c=i[h.charCodeAt(x)]<<2|i[h.charCodeAt(x+1)]>>4,y[m++]=255&c),g===1&&(c=i[h.charCodeAt(x)]<<10|i[h.charCodeAt(x+1)]<<4|i[h.charCodeAt(x+2)]>>2,y[m++]=c>>8&255,y[m++]=255&c),y},s.fromByteArray=function(h){for(var c,x=h.length,d=x%3,v=[],g=16383,y=0,m=x-d;y<m;y+=g)v.push(u(h,y,y+g>m?m:y+g));return d===1?(c=h[x-1],v.push(t[c>>2]+t[c<<4&63]+"==")):d===2&&(c=(h[x-2]<<8)+h[x-1],v.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),v.join("")};for(var t=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=n[a],i[n.charCodeAt(a)]=a;function l(h){var c=h.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=h.indexOf("=");return x===-1&&(x=c),[x,x===c?0:4-x%4]}function u(h,c,x){for(var d,v,g=[],y=c;y<x;y+=3)d=(h[y]<<16&16711680)+(h[y+1]<<8&65280)+(255&h[y+2]),g.push(t[(v=d)>>18&63]+t[v>>12&63]+t[v>>6&63]+t[63&v]);return g.join("")}i[45]=62,i[95]=63},3865:function(p,s,t){var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},1318:function(p){p.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},8697:function(p,s,t){var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]),r[1].mul(n[0]))}},7842:function(p,s,t){var i=t(6330),r=t(1533),n=t(2651),a=t(4387),l=t(869),u=t(8697);p.exports=function h(c,x){if(i(c))return x?u(c,h(x)):[c[0].clone(),c[1].clone()];var d,v,g=0;if(r(c))d=c.clone();else if(typeof c=="string")d=a(c);else{if(c===0)return[n(0),n(1)];if(c===Math.floor(c))d=n(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),g-=256;d=n(c)}}if(i(x))d.mul(x[1]),v=x[0].clone();else if(r(x))v=x.clone();else if(typeof x=="string")v=a(x);else if(x)if(x===Math.floor(x))v=n(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),g+=256;v=n(x)}else v=n(1);return g>0?d=d.ushln(g):g<0&&(v=v.ushln(-g)),l(d,v)}},6330:function(p,s,t){var i=t(1533);p.exports=function(r){return Array.isArray(r)&&r.length===2&&i(r[0])&&i(r[1])}},5716:function(p,s,t){var i=t(6859);p.exports=function(r){return r.cmp(new i(0))}},1369:function(p,s,t){var i=t(5716);p.exports=function(r){var n=r.length,a=r.words,l=0;if(n===1)l=a[0];else if(n===2)l=a[0]+67108864*a[1];else for(var u=0;u<n;u++)l+=a[u]*Math.pow(67108864,u);return i(r)*l}},4025:function(p,s,t){var i=t(2361),r=t(8828).countTrailingZeros;p.exports=function(n){var a=r(i.lo(n));if(a<32)return a;var l=r(i.hi(n));return l>20?52:l+32}},1533:function(p,s,t){t(6859),p.exports=function(i){return i&&typeof i=="object"&&!!i.words}},2651:function(p,s,t){var i=t(6859),r=t(2361);p.exports=function(n){var a=r.exponent(n);return a<52?new i(n):new i(n*Math.pow(2,52-a)).ushln(a-52)}},869:function(p,s,t){var i=t(2651),r=t(5716);p.exports=function(n,a){var l=r(n),u=r(a);if(l===0)return[i(0),i(1)];if(u===0)return[i(0),i(0)];u<0&&(n=n.neg(),a=a.neg());var h=n.gcd(a);return h.cmpn(1)?[n.div(h),a.div(h)]:[n,a]}},4387:function(p,s,t){var i=t(6859);p.exports=function(r){return new i(r)}},6504:function(p,s,t){var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[0]),r[1].mul(n[1]))}},7721:function(p,s,t){var i=t(5716);p.exports=function(r){return i(r[0])*i(r[1])}},5572:function(p,s,t){var i=t(869);p.exports=function(r,n){return i(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},946:function(p,s,t){var i=t(1369),r=t(4025);p.exports=function(n){var a=n[0],l=n[1];if(a.cmpn(0)===0)return 0;var u=a.abs().divmod(l.abs()),h=u.div,c=i(h),x=u.mod,d=a.negative!==l.negative?-1:1;if(x.cmpn(0)===0)return d*c;if(c){var v=r(c)+4;return d*(c+(y=i(x.ushln(v).divRound(l)))*Math.pow(2,-v))}var g=l.bitLength()-x.bitLength()+53,y=i(x.ushln(g).divRound(l));return g<1023?d*y*Math.pow(2,-g):d*(y*=Math.pow(2,-1023))*Math.pow(2,1023-g)}},2478:function(p){function s(l,u,h,c,x){for(var d=x+1;c<=x;){var v=c+x>>>1,g=l[v];(h!==void 0?h(g,u):g-u)>=0?(d=v,x=v-1):c=v+1}return d}function t(l,u,h,c,x){for(var d=x+1;c<=x;){var v=c+x>>>1,g=l[v];(h!==void 0?h(g,u):g-u)>0?(d=v,x=v-1):c=v+1}return d}function i(l,u,h,c,x){for(var d=c-1;c<=x;){var v=c+x>>>1,g=l[v];(h!==void 0?h(g,u):g-u)<0?(d=v,c=v+1):x=v-1}return d}function r(l,u,h,c,x){for(var d=c-1;c<=x;){var v=c+x>>>1,g=l[v];(h!==void 0?h(g,u):g-u)<=0?(d=v,c=v+1):x=v-1}return d}function n(l,u,h,c,x){for(;c<=x;){var d=c+x>>>1,v=l[d],g=h!==void 0?h(v,u):v-u;if(g===0)return d;g<=0?c=d+1:x=d-1}return-1}function a(l,u,h,c,x,d){return typeof h=="function"?d(l,u,h,c===void 0?0:0|c,x===void 0?l.length-1:0|x):d(l,u,void 0,h===void 0?0:0|h,c===void 0?l.length-1:0|c)}p.exports={ge:function(l,u,h,c,x){return a(l,u,h,c,x,s)},gt:function(l,u,h,c,x){return a(l,u,h,c,x,t)},lt:function(l,u,h,c,x){return a(l,u,h,c,x,i)},le:function(l,u,h,c,x){return a(l,u,h,c,x,r)},eq:function(l,u,h,c,x){return a(l,u,h,c,x,n)}}},8828:function(p,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,l=n,u=7;for(a>>>=1;a;a>>>=1)l<<=1,l|=1&a,--u;r[n]=l<<u&255}})(i),s.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6859:function(p,s,t){(function(i,r){function n(I,N){if(!I)throw new Error(N||"Assertion failed")}function a(I,N){I.super_=N;var W=function(){};W.prototype=N.prototype,I.prototype=new W,I.prototype.constructor=I}function l(I,N,W){if(l.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&(N!=="le"&&N!=="be"||(W=N,N=10),this._init(I||0,N||10,W||"be"))}var u;typeof i=="object"?i.exports=l:r.BN=l,l.BN=l,l.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(7790).Buffer}catch{}function h(I,N){var W=I.charCodeAt(N);return W>=65&&W<=70?W-55:W>=97&&W<=102?W-87:W-48&15}function c(I,N,W){var F=h(I,W);return W-1>=N&&(F|=h(I,W-1)<<4),F}function x(I,N,W,F){for(var j=0,H=Math.min(I.length,W),te=N;te<H;te++){var Q=I.charCodeAt(te)-48;j*=F,j+=Q>=49?Q-49+10:Q>=17?Q-17+10:Q}return j}l.isBN=function(I){return I instanceof l||I!==null&&typeof I=="object"&&I.constructor.wordSize===l.wordSize&&Array.isArray(I.words)},l.max=function(I,N){return I.cmp(N)>0?I:N},l.min=function(I,N){return I.cmp(N)<0?I:N},l.prototype._init=function(I,N,W){if(typeof I=="number")return this._initNumber(I,N,W);if(typeof I=="object")return this._initArray(I,N,W);N==="hex"&&(N=16),n(N===(0|N)&&N>=2&&N<=36);var F=0;(I=I.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<I.length&&(N===16?this._parseHex(I,F,W):(this._parseBase(I,N,F),W==="le"&&this._initArray(this.toArray(),N,W)))},l.prototype._initNumber=function(I,N,W){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[67108863&I],this.length=1):I<4503599627370496?(this.words=[67108863&I,I/67108864&67108863],this.length=2):(n(I<9007199254740992),this.words=[67108863&I,I/67108864&67108863,1],this.length=3),W==="le"&&this._initArray(this.toArray(),N,W)},l.prototype._initArray=function(I,N,W){if(n(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var j,H,te=0;if(W==="be")for(F=I.length-1,j=0;F>=0;F-=3)H=I[F]|I[F-1]<<8|I[F-2]<<16,this.words[j]|=H<<te&67108863,this.words[j+1]=H>>>26-te&67108863,(te+=24)>=26&&(te-=26,j++);else if(W==="le")for(F=0,j=0;F<I.length;F+=3)H=I[F]|I[F+1]<<8|I[F+2]<<16,this.words[j]|=H<<te&67108863,this.words[j+1]=H>>>26-te&67108863,(te+=24)>=26&&(te-=26,j++);return this.strip()},l.prototype._parseHex=function(I,N,W){this.length=Math.ceil((I.length-N)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var j,H=0,te=0;if(W==="be")for(F=I.length-1;F>=N;F-=2)j=c(I,N,F)<<H,this.words[te]|=67108863&j,H>=18?(H-=18,te+=1,this.words[te]|=j>>>26):H+=8;else for(F=(I.length-N)%2==0?N+1:N;F<I.length;F+=2)j=c(I,N,F)<<H,this.words[te]|=67108863&j,H>=18?(H-=18,te+=1,this.words[te]|=j>>>26):H+=8;this.strip()},l.prototype._parseBase=function(I,N,W){this.words=[0],this.length=1;for(var F=0,j=1;j<=67108863;j*=N)F++;F--,j=j/N|0;for(var H=I.length-W,te=H%F,Q=Math.min(H,H-te)+W,$=0,K=W;K<Q;K+=F)$=x(I,K,K+F,N),this.imuln(j),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($);if(te!==0){var X=1;for($=x(I,K,I.length,N),K=0;K<te;K++)X*=N;this.imuln(X),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($)}this.strip()},l.prototype.copy=function(I){I.words=new Array(this.length);for(var N=0;N<this.length;N++)I.words[N]=this.words[N];I.length=this.length,I.negative=this.negative,I.red=this.red},l.prototype.clone=function(){var I=new l(null);return this.copy(I),I},l.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(I,N,W){W.negative=N.negative^I.negative;var F=I.length+N.length|0;W.length=F,F=F-1|0;var j=0|I.words[0],H=0|N.words[0],te=j*H,Q=67108863&te,$=te/67108864|0;W.words[0]=Q;for(var K=1;K<F;K++){for(var X=$>>>26,Y=67108863&$,re=Math.min(K,N.length-1),se=Math.max(0,K-I.length+1);se<=re;se++){var ae=K-se|0;X+=(te=(j=0|I.words[ae])*(H=0|N.words[se])+Y)/67108864|0,Y=67108863&te}W.words[K]=0|Y,$=0|X}return $!==0?W.words[K]=0|$:W.length--,W.strip()}l.prototype.toString=function(I,N){var W;if(N=0|N||1,(I=I||10)===16||I==="hex"){W="";for(var F=0,j=0,H=0;H<this.length;H++){var te=this.words[H],Q=(16777215&(te<<F|j)).toString(16);W=(j=te>>>24-F&16777215)!=0||H!==this.length-1?d[6-Q.length]+Q+W:Q+W,(F+=2)>=26&&(F-=26,H--)}for(j!==0&&(W=j.toString(16)+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}if(I===(0|I)&&I>=2&&I<=36){var $=v[I],K=g[I];W="";var X=this.clone();for(X.negative=0;!X.isZero();){var Y=X.modn(K).toString(I);W=(X=X.idivn(K)).isZero()?Y+W:d[$-Y.length]+Y+W}for(this.isZero()&&(W="0"+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}n(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=67108864*this.words[1]:this.length===3&&this.words[2]===1?I+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(I,N){return n(u!==void 0),this.toArrayLike(u,I,N)},l.prototype.toArray=function(I,N){return this.toArrayLike(Array,I,N)},l.prototype.toArrayLike=function(I,N,W){var F=this.byteLength(),j=W||Math.max(1,F);n(F<=j,"byte array longer than desired length"),n(j>0,"Requested array length <= 0"),this.strip();var H,te,Q=N==="le",$=new I(j),K=this.clone();if(Q){for(te=0;!K.isZero();te++)H=K.andln(255),K.iushrn(8),$[te]=H;for(;te<j;te++)$[te]=0}else{for(te=0;te<j-F;te++)$[te]=0;for(te=0;!K.isZero();te++)H=K.andln(255),K.iushrn(8),$[j-te-1]=H}return $},Math.clz32?l.prototype._countBits=function(I){return 32-Math.clz32(I)}:l.prototype._countBits=function(I){var N=I,W=0;return N>=4096&&(W+=13,N>>>=13),N>=64&&(W+=7,N>>>=7),N>=8&&(W+=4,N>>>=4),N>=2&&(W+=2,N>>>=2),W+N},l.prototype._zeroBits=function(I){if(I===0)return 26;var N=I,W=0;return!(8191&N)&&(W+=13,N>>>=13),!(127&N)&&(W+=7,N>>>=7),!(15&N)&&(W+=4,N>>>=4),!(3&N)&&(W+=2,N>>>=2),!(1&N)&&W++,W},l.prototype.bitLength=function(){var I=this.words[this.length-1],N=this._countBits(I);return 26*(this.length-1)+N},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,N=0;N<this.length;N++){var W=this._zeroBits(this.words[N]);if(I+=W,W!==26)break}return I},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},l.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var N=0;N<I.length;N++)this.words[N]=this.words[N]|I.words[N];return this.strip()},l.prototype.ior=function(I){return n((this.negative|I.negative)==0),this.iuor(I)},l.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},l.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},l.prototype.iuand=function(I){var N;N=this.length>I.length?I:this;for(var W=0;W<N.length;W++)this.words[W]=this.words[W]&I.words[W];return this.length=N.length,this.strip()},l.prototype.iand=function(I){return n((this.negative|I.negative)==0),this.iuand(I)},l.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},l.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},l.prototype.iuxor=function(I){var N,W;this.length>I.length?(N=this,W=I):(N=I,W=this);for(var F=0;F<W.length;F++)this.words[F]=N.words[F]^W.words[F];if(this!==N)for(;F<N.length;F++)this.words[F]=N.words[F];return this.length=N.length,this.strip()},l.prototype.ixor=function(I){return n((this.negative|I.negative)==0),this.iuxor(I)},l.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},l.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},l.prototype.inotn=function(I){n(typeof I=="number"&&I>=0);var N=0|Math.ceil(I/26),W=I%26;this._expand(N),W>0&&N--;for(var F=0;F<N;F++)this.words[F]=67108863&~this.words[F];return W>0&&(this.words[F]=~this.words[F]&67108863>>26-W),this.strip()},l.prototype.notn=function(I){return this.clone().inotn(I)},l.prototype.setn=function(I,N){n(typeof I=="number"&&I>=0);var W=I/26|0,F=I%26;return this._expand(W+1),this.words[W]=N?this.words[W]|1<<F:this.words[W]&~(1<<F),this.strip()},l.prototype.iadd=function(I){var N,W,F;if(this.negative!==0&&I.negative===0)return this.negative=0,N=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,N=this.isub(I),I.negative=1,N._normSign();this.length>I.length?(W=this,F=I):(W=I,F=this);for(var j=0,H=0;H<F.length;H++)N=(0|W.words[H])+(0|F.words[H])+j,this.words[H]=67108863&N,j=N>>>26;for(;j!==0&&H<W.length;H++)N=(0|W.words[H])+j,this.words[H]=67108863&N,j=N>>>26;if(this.length=W.length,j!==0)this.words[this.length]=j,this.length++;else if(W!==this)for(;H<W.length;H++)this.words[H]=W.words[H];return this},l.prototype.add=function(I){var N;return I.negative!==0&&this.negative===0?(I.negative=0,N=this.sub(I),I.negative^=1,N):I.negative===0&&this.negative!==0?(this.negative=0,N=I.sub(this),this.negative=1,N):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},l.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var N=this.iadd(I);return I.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var W,F,j=this.cmp(I);if(j===0)return this.negative=0,this.length=1,this.words[0]=0,this;j>0?(W=this,F=I):(W=I,F=this);for(var H=0,te=0;te<F.length;te++)H=(N=(0|W.words[te])-(0|F.words[te])+H)>>26,this.words[te]=67108863&N;for(;H!==0&&te<W.length;te++)H=(N=(0|W.words[te])+H)>>26,this.words[te]=67108863&N;if(H===0&&te<W.length&&W!==this)for(;te<W.length;te++)this.words[te]=W.words[te];return this.length=Math.max(this.length,te),W!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(I){return this.clone().isub(I)};var m=function(I,N,W){var F,j,H,te=I.words,Q=N.words,$=W.words,K=0,X=0|te[0],Y=8191&X,re=X>>>13,se=0|te[1],ae=8191&se,ce=se>>>13,fe=0|te[2],he=8191&fe,ve=fe>>>13,ye=0|te[3],me=8191&ye,Me=ye>>>13,Pe=0|te[4],ge=8191&Pe,oe=Pe>>>13,ie=0|te[5],de=8191&ie,Se=ie>>>13,_e=0|te[6],we=8191&_e,Ae=_e>>>13,Oe=0|te[7],ze=8191&Oe,pe=Oe>>>13,be=0|te[8],ke=8191&be,Ie=be>>>13,Ee=0|te[9],Be=8191&Ee,Ve=Ee>>>13,Ze=0|Q[0],rt=8191&Ze,it=Ze>>>13,dt=0|Q[1],vt=8191&dt,ht=dt>>>13,Qe=0|Q[2],Je=8191&Qe,Tt=Qe>>>13,Ot=0|Q[3],Pt=8191&Ot,Mt=Ot>>>13,He=0|Q[4],Ye=8191&He,Ne=He>>>13,We=0|Q[5],ot=8191&We,tt=We>>>13,Re=0|Q[6],Fe=8191&Re,nt=Re>>>13,Ge=0|Q[7],ct=8191&Ge,pt=Ge>>>13,gt=0|Q[8],ut=8191&gt,kt=gt>>>13,mt=0|Q[9],At=8191&mt,Lt=mt>>>13;W.negative=I.negative^N.negative,W.length=19;var Ct=(K+(F=Math.imul(Y,rt))|0)+((8191&(j=(j=Math.imul(Y,it))+Math.imul(re,rt)|0))<<13)|0;K=((H=Math.imul(re,it))+(j>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,F=Math.imul(ae,rt),j=(j=Math.imul(ae,it))+Math.imul(ce,rt)|0,H=Math.imul(ce,it);var zt=(K+(F=F+Math.imul(Y,vt)|0)|0)+((8191&(j=(j=j+Math.imul(Y,ht)|0)+Math.imul(re,vt)|0))<<13)|0;K=((H=H+Math.imul(re,ht)|0)+(j>>>13)|0)+(zt>>>26)|0,zt&=67108863,F=Math.imul(he,rt),j=(j=Math.imul(he,it))+Math.imul(ve,rt)|0,H=Math.imul(ve,it),F=F+Math.imul(ae,vt)|0,j=(j=j+Math.imul(ae,ht)|0)+Math.imul(ce,vt)|0,H=H+Math.imul(ce,ht)|0;var Gt=(K+(F=F+Math.imul(Y,Je)|0)|0)+((8191&(j=(j=j+Math.imul(Y,Tt)|0)+Math.imul(re,Je)|0))<<13)|0;K=((H=H+Math.imul(re,Tt)|0)+(j>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,F=Math.imul(me,rt),j=(j=Math.imul(me,it))+Math.imul(Me,rt)|0,H=Math.imul(Me,it),F=F+Math.imul(he,vt)|0,j=(j=j+Math.imul(he,ht)|0)+Math.imul(ve,vt)|0,H=H+Math.imul(ve,ht)|0,F=F+Math.imul(ae,Je)|0,j=(j=j+Math.imul(ae,Tt)|0)+Math.imul(ce,Je)|0,H=H+Math.imul(ce,Tt)|0;var rn=(K+(F=F+Math.imul(Y,Pt)|0)|0)+((8191&(j=(j=j+Math.imul(Y,Mt)|0)+Math.imul(re,Pt)|0))<<13)|0;K=((H=H+Math.imul(re,Mt)|0)+(j>>>13)|0)+(rn>>>26)|0,rn&=67108863,F=Math.imul(ge,rt),j=(j=Math.imul(ge,it))+Math.imul(oe,rt)|0,H=Math.imul(oe,it),F=F+Math.imul(me,vt)|0,j=(j=j+Math.imul(me,ht)|0)+Math.imul(Me,vt)|0,H=H+Math.imul(Me,ht)|0,F=F+Math.imul(he,Je)|0,j=(j=j+Math.imul(he,Tt)|0)+Math.imul(ve,Je)|0,H=H+Math.imul(ve,Tt)|0,F=F+Math.imul(ae,Pt)|0,j=(j=j+Math.imul(ae,Mt)|0)+Math.imul(ce,Pt)|0,H=H+Math.imul(ce,Mt)|0;var Nt=(K+(F=F+Math.imul(Y,Ye)|0)|0)+((8191&(j=(j=j+Math.imul(Y,Ne)|0)+Math.imul(re,Ye)|0))<<13)|0;K=((H=H+Math.imul(re,Ne)|0)+(j>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,F=Math.imul(de,rt),j=(j=Math.imul(de,it))+Math.imul(Se,rt)|0,H=Math.imul(Se,it),F=F+Math.imul(ge,vt)|0,j=(j=j+Math.imul(ge,ht)|0)+Math.imul(oe,vt)|0,H=H+Math.imul(oe,ht)|0,F=F+Math.imul(me,Je)|0,j=(j=j+Math.imul(me,Tt)|0)+Math.imul(Me,Je)|0,H=H+Math.imul(Me,Tt)|0,F=F+Math.imul(he,Pt)|0,j=(j=j+Math.imul(he,Mt)|0)+Math.imul(ve,Pt)|0,H=H+Math.imul(ve,Mt)|0,F=F+Math.imul(ae,Ye)|0,j=(j=j+Math.imul(ae,Ne)|0)+Math.imul(ce,Ye)|0,H=H+Math.imul(ce,Ne)|0;var Wt=(K+(F=F+Math.imul(Y,ot)|0)|0)+((8191&(j=(j=j+Math.imul(Y,tt)|0)+Math.imul(re,ot)|0))<<13)|0;K=((H=H+Math.imul(re,tt)|0)+(j>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,F=Math.imul(we,rt),j=(j=Math.imul(we,it))+Math.imul(Ae,rt)|0,H=Math.imul(Ae,it),F=F+Math.imul(de,vt)|0,j=(j=j+Math.imul(de,ht)|0)+Math.imul(Se,vt)|0,H=H+Math.imul(Se,ht)|0,F=F+Math.imul(ge,Je)|0,j=(j=j+Math.imul(ge,Tt)|0)+Math.imul(oe,Je)|0,H=H+Math.imul(oe,Tt)|0,F=F+Math.imul(me,Pt)|0,j=(j=j+Math.imul(me,Mt)|0)+Math.imul(Me,Pt)|0,H=H+Math.imul(Me,Mt)|0,F=F+Math.imul(he,Ye)|0,j=(j=j+Math.imul(he,Ne)|0)+Math.imul(ve,Ye)|0,H=H+Math.imul(ve,Ne)|0,F=F+Math.imul(ae,ot)|0,j=(j=j+Math.imul(ae,tt)|0)+Math.imul(ce,ot)|0,H=H+Math.imul(ce,tt)|0;var Rt=(K+(F=F+Math.imul(Y,Fe)|0)|0)+((8191&(j=(j=j+Math.imul(Y,nt)|0)+Math.imul(re,Fe)|0))<<13)|0;K=((H=H+Math.imul(re,nt)|0)+(j>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,F=Math.imul(ze,rt),j=(j=Math.imul(ze,it))+Math.imul(pe,rt)|0,H=Math.imul(pe,it),F=F+Math.imul(we,vt)|0,j=(j=j+Math.imul(we,ht)|0)+Math.imul(Ae,vt)|0,H=H+Math.imul(Ae,ht)|0,F=F+Math.imul(de,Je)|0,j=(j=j+Math.imul(de,Tt)|0)+Math.imul(Se,Je)|0,H=H+Math.imul(Se,Tt)|0,F=F+Math.imul(ge,Pt)|0,j=(j=j+Math.imul(ge,Mt)|0)+Math.imul(oe,Pt)|0,H=H+Math.imul(oe,Mt)|0,F=F+Math.imul(me,Ye)|0,j=(j=j+Math.imul(me,Ne)|0)+Math.imul(Me,Ye)|0,H=H+Math.imul(Me,Ne)|0,F=F+Math.imul(he,ot)|0,j=(j=j+Math.imul(he,tt)|0)+Math.imul(ve,ot)|0,H=H+Math.imul(ve,tt)|0,F=F+Math.imul(ae,Fe)|0,j=(j=j+Math.imul(ae,nt)|0)+Math.imul(ce,Fe)|0,H=H+Math.imul(ce,nt)|0;var Ln=(K+(F=F+Math.imul(Y,ct)|0)|0)+((8191&(j=(j=j+Math.imul(Y,pt)|0)+Math.imul(re,ct)|0))<<13)|0;K=((H=H+Math.imul(re,pt)|0)+(j>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,F=Math.imul(ke,rt),j=(j=Math.imul(ke,it))+Math.imul(Ie,rt)|0,H=Math.imul(Ie,it),F=F+Math.imul(ze,vt)|0,j=(j=j+Math.imul(ze,ht)|0)+Math.imul(pe,vt)|0,H=H+Math.imul(pe,ht)|0,F=F+Math.imul(we,Je)|0,j=(j=j+Math.imul(we,Tt)|0)+Math.imul(Ae,Je)|0,H=H+Math.imul(Ae,Tt)|0,F=F+Math.imul(de,Pt)|0,j=(j=j+Math.imul(de,Mt)|0)+Math.imul(Se,Pt)|0,H=H+Math.imul(Se,Mt)|0,F=F+Math.imul(ge,Ye)|0,j=(j=j+Math.imul(ge,Ne)|0)+Math.imul(oe,Ye)|0,H=H+Math.imul(oe,Ne)|0,F=F+Math.imul(me,ot)|0,j=(j=j+Math.imul(me,tt)|0)+Math.imul(Me,ot)|0,H=H+Math.imul(Me,tt)|0,F=F+Math.imul(he,Fe)|0,j=(j=j+Math.imul(he,nt)|0)+Math.imul(ve,Fe)|0,H=H+Math.imul(ve,nt)|0,F=F+Math.imul(ae,ct)|0,j=(j=j+Math.imul(ae,pt)|0)+Math.imul(ce,ct)|0,H=H+Math.imul(ce,pt)|0;var bn=(K+(F=F+Math.imul(Y,ut)|0)|0)+((8191&(j=(j=j+Math.imul(Y,kt)|0)+Math.imul(re,ut)|0))<<13)|0;K=((H=H+Math.imul(re,kt)|0)+(j>>>13)|0)+(bn>>>26)|0,bn&=67108863,F=Math.imul(Be,rt),j=(j=Math.imul(Be,it))+Math.imul(Ve,rt)|0,H=Math.imul(Ve,it),F=F+Math.imul(ke,vt)|0,j=(j=j+Math.imul(ke,ht)|0)+Math.imul(Ie,vt)|0,H=H+Math.imul(Ie,ht)|0,F=F+Math.imul(ze,Je)|0,j=(j=j+Math.imul(ze,Tt)|0)+Math.imul(pe,Je)|0,H=H+Math.imul(pe,Tt)|0,F=F+Math.imul(we,Pt)|0,j=(j=j+Math.imul(we,Mt)|0)+Math.imul(Ae,Pt)|0,H=H+Math.imul(Ae,Mt)|0,F=F+Math.imul(de,Ye)|0,j=(j=j+Math.imul(de,Ne)|0)+Math.imul(Se,Ye)|0,H=H+Math.imul(Se,Ne)|0,F=F+Math.imul(ge,ot)|0,j=(j=j+Math.imul(ge,tt)|0)+Math.imul(oe,ot)|0,H=H+Math.imul(oe,tt)|0,F=F+Math.imul(me,Fe)|0,j=(j=j+Math.imul(me,nt)|0)+Math.imul(Me,Fe)|0,H=H+Math.imul(Me,nt)|0,F=F+Math.imul(he,ct)|0,j=(j=j+Math.imul(he,pt)|0)+Math.imul(ve,ct)|0,H=H+Math.imul(ve,pt)|0,F=F+Math.imul(ae,ut)|0,j=(j=j+Math.imul(ae,kt)|0)+Math.imul(ce,ut)|0,H=H+Math.imul(ce,kt)|0;var hn=(K+(F=F+Math.imul(Y,At)|0)|0)+((8191&(j=(j=j+Math.imul(Y,Lt)|0)+Math.imul(re,At)|0))<<13)|0;K=((H=H+Math.imul(re,Lt)|0)+(j>>>13)|0)+(hn>>>26)|0,hn&=67108863,F=Math.imul(Be,vt),j=(j=Math.imul(Be,ht))+Math.imul(Ve,vt)|0,H=Math.imul(Ve,ht),F=F+Math.imul(ke,Je)|0,j=(j=j+Math.imul(ke,Tt)|0)+Math.imul(Ie,Je)|0,H=H+Math.imul(Ie,Tt)|0,F=F+Math.imul(ze,Pt)|0,j=(j=j+Math.imul(ze,Mt)|0)+Math.imul(pe,Pt)|0,H=H+Math.imul(pe,Mt)|0,F=F+Math.imul(we,Ye)|0,j=(j=j+Math.imul(we,Ne)|0)+Math.imul(Ae,Ye)|0,H=H+Math.imul(Ae,Ne)|0,F=F+Math.imul(de,ot)|0,j=(j=j+Math.imul(de,tt)|0)+Math.imul(Se,ot)|0,H=H+Math.imul(Se,tt)|0,F=F+Math.imul(ge,Fe)|0,j=(j=j+Math.imul(ge,nt)|0)+Math.imul(oe,Fe)|0,H=H+Math.imul(oe,nt)|0,F=F+Math.imul(me,ct)|0,j=(j=j+Math.imul(me,pt)|0)+Math.imul(Me,ct)|0,H=H+Math.imul(Me,pt)|0,F=F+Math.imul(he,ut)|0,j=(j=j+Math.imul(he,kt)|0)+Math.imul(ve,ut)|0,H=H+Math.imul(ve,kt)|0;var Kt=(K+(F=F+Math.imul(ae,At)|0)|0)+((8191&(j=(j=j+Math.imul(ae,Lt)|0)+Math.imul(ce,At)|0))<<13)|0;K=((H=H+Math.imul(ce,Lt)|0)+(j>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,F=Math.imul(Be,Je),j=(j=Math.imul(Be,Tt))+Math.imul(Ve,Je)|0,H=Math.imul(Ve,Tt),F=F+Math.imul(ke,Pt)|0,j=(j=j+Math.imul(ke,Mt)|0)+Math.imul(Ie,Pt)|0,H=H+Math.imul(Ie,Mt)|0,F=F+Math.imul(ze,Ye)|0,j=(j=j+Math.imul(ze,Ne)|0)+Math.imul(pe,Ye)|0,H=H+Math.imul(pe,Ne)|0,F=F+Math.imul(we,ot)|0,j=(j=j+Math.imul(we,tt)|0)+Math.imul(Ae,ot)|0,H=H+Math.imul(Ae,tt)|0,F=F+Math.imul(de,Fe)|0,j=(j=j+Math.imul(de,nt)|0)+Math.imul(Se,Fe)|0,H=H+Math.imul(Se,nt)|0,F=F+Math.imul(ge,ct)|0,j=(j=j+Math.imul(ge,pt)|0)+Math.imul(oe,ct)|0,H=H+Math.imul(oe,pt)|0,F=F+Math.imul(me,ut)|0,j=(j=j+Math.imul(me,kt)|0)+Math.imul(Me,ut)|0,H=H+Math.imul(Me,kt)|0;var on=(K+(F=F+Math.imul(he,At)|0)|0)+((8191&(j=(j=j+Math.imul(he,Lt)|0)+Math.imul(ve,At)|0))<<13)|0;K=((H=H+Math.imul(ve,Lt)|0)+(j>>>13)|0)+(on>>>26)|0,on&=67108863,F=Math.imul(Be,Pt),j=(j=Math.imul(Be,Mt))+Math.imul(Ve,Pt)|0,H=Math.imul(Ve,Mt),F=F+Math.imul(ke,Ye)|0,j=(j=j+Math.imul(ke,Ne)|0)+Math.imul(Ie,Ye)|0,H=H+Math.imul(Ie,Ne)|0,F=F+Math.imul(ze,ot)|0,j=(j=j+Math.imul(ze,tt)|0)+Math.imul(pe,ot)|0,H=H+Math.imul(pe,tt)|0,F=F+Math.imul(we,Fe)|0,j=(j=j+Math.imul(we,nt)|0)+Math.imul(Ae,Fe)|0,H=H+Math.imul(Ae,nt)|0,F=F+Math.imul(de,ct)|0,j=(j=j+Math.imul(de,pt)|0)+Math.imul(Se,ct)|0,H=H+Math.imul(Se,pt)|0,F=F+Math.imul(ge,ut)|0,j=(j=j+Math.imul(ge,kt)|0)+Math.imul(oe,ut)|0,H=H+Math.imul(oe,kt)|0;var $t=(K+(F=F+Math.imul(me,At)|0)|0)+((8191&(j=(j=j+Math.imul(me,Lt)|0)+Math.imul(Me,At)|0))<<13)|0;K=((H=H+Math.imul(Me,Lt)|0)+(j>>>13)|0)+($t>>>26)|0,$t&=67108863,F=Math.imul(Be,Ye),j=(j=Math.imul(Be,Ne))+Math.imul(Ve,Ye)|0,H=Math.imul(Ve,Ne),F=F+Math.imul(ke,ot)|0,j=(j=j+Math.imul(ke,tt)|0)+Math.imul(Ie,ot)|0,H=H+Math.imul(Ie,tt)|0,F=F+Math.imul(ze,Fe)|0,j=(j=j+Math.imul(ze,nt)|0)+Math.imul(pe,Fe)|0,H=H+Math.imul(pe,nt)|0,F=F+Math.imul(we,ct)|0,j=(j=j+Math.imul(we,pt)|0)+Math.imul(Ae,ct)|0,H=H+Math.imul(Ae,pt)|0,F=F+Math.imul(de,ut)|0,j=(j=j+Math.imul(de,kt)|0)+Math.imul(Se,ut)|0,H=H+Math.imul(Se,kt)|0;var ln=(K+(F=F+Math.imul(ge,At)|0)|0)+((8191&(j=(j=j+Math.imul(ge,Lt)|0)+Math.imul(oe,At)|0))<<13)|0;K=((H=H+Math.imul(oe,Lt)|0)+(j>>>13)|0)+(ln>>>26)|0,ln&=67108863,F=Math.imul(Be,ot),j=(j=Math.imul(Be,tt))+Math.imul(Ve,ot)|0,H=Math.imul(Ve,tt),F=F+Math.imul(ke,Fe)|0,j=(j=j+Math.imul(ke,nt)|0)+Math.imul(Ie,Fe)|0,H=H+Math.imul(Ie,nt)|0,F=F+Math.imul(ze,ct)|0,j=(j=j+Math.imul(ze,pt)|0)+Math.imul(pe,ct)|0,H=H+Math.imul(pe,pt)|0,F=F+Math.imul(we,ut)|0,j=(j=j+Math.imul(we,kt)|0)+Math.imul(Ae,ut)|0,H=H+Math.imul(Ae,kt)|0;var mn=(K+(F=F+Math.imul(de,At)|0)|0)+((8191&(j=(j=j+Math.imul(de,Lt)|0)+Math.imul(Se,At)|0))<<13)|0;K=((H=H+Math.imul(Se,Lt)|0)+(j>>>13)|0)+(mn>>>26)|0,mn&=67108863,F=Math.imul(Be,Fe),j=(j=Math.imul(Be,nt))+Math.imul(Ve,Fe)|0,H=Math.imul(Ve,nt),F=F+Math.imul(ke,ct)|0,j=(j=j+Math.imul(ke,pt)|0)+Math.imul(Ie,ct)|0,H=H+Math.imul(Ie,pt)|0,F=F+Math.imul(ze,ut)|0,j=(j=j+Math.imul(ze,kt)|0)+Math.imul(pe,ut)|0,H=H+Math.imul(pe,kt)|0;var xn=(K+(F=F+Math.imul(we,At)|0)|0)+((8191&(j=(j=j+Math.imul(we,Lt)|0)+Math.imul(Ae,At)|0))<<13)|0;K=((H=H+Math.imul(Ae,Lt)|0)+(j>>>13)|0)+(xn>>>26)|0,xn&=67108863,F=Math.imul(Be,ct),j=(j=Math.imul(Be,pt))+Math.imul(Ve,ct)|0,H=Math.imul(Ve,pt),F=F+Math.imul(ke,ut)|0,j=(j=j+Math.imul(ke,kt)|0)+Math.imul(Ie,ut)|0,H=H+Math.imul(Ie,kt)|0;var Mn=(K+(F=F+Math.imul(ze,At)|0)|0)+((8191&(j=(j=j+Math.imul(ze,Lt)|0)+Math.imul(pe,At)|0))<<13)|0;K=((H=H+Math.imul(pe,Lt)|0)+(j>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,F=Math.imul(Be,ut),j=(j=Math.imul(Be,kt))+Math.imul(Ve,ut)|0,H=Math.imul(Ve,kt);var Sn=(K+(F=F+Math.imul(ke,At)|0)|0)+((8191&(j=(j=j+Math.imul(ke,Lt)|0)+Math.imul(Ie,At)|0))<<13)|0;K=((H=H+Math.imul(Ie,Lt)|0)+(j>>>13)|0)+(Sn>>>26)|0,Sn&=67108863;var Tn=(K+(F=Math.imul(Be,At))|0)+((8191&(j=(j=Math.imul(Be,Lt))+Math.imul(Ve,At)|0))<<13)|0;return K=((H=Math.imul(Ve,Lt))+(j>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,$[0]=Ct,$[1]=zt,$[2]=Gt,$[3]=rn,$[4]=Nt,$[5]=Wt,$[6]=Rt,$[7]=Ln,$[8]=bn,$[9]=hn,$[10]=Kt,$[11]=on,$[12]=$t,$[13]=ln,$[14]=mn,$[15]=xn,$[16]=Mn,$[17]=Sn,$[18]=Tn,K!==0&&($[19]=K,W.length++),W};function b(I,N,W){return new f().mulp(I,N,W)}function f(I,N){this.x=I,this.y=N}Math.imul||(m=y),l.prototype.mulTo=function(I,N){var W,F=this.length+I.length;return W=this.length===10&&I.length===10?m(this,I,N):F<63?y(this,I,N):F<1024?function(j,H,te){te.negative=H.negative^j.negative,te.length=j.length+H.length;for(var Q=0,$=0,K=0;K<te.length-1;K++){var X=$;$=0;for(var Y=67108863&Q,re=Math.min(K,H.length-1),se=Math.max(0,K-j.length+1);se<=re;se++){var ae=K-se,ce=(0|j.words[ae])*(0|H.words[se]),fe=67108863&ce;Y=67108863&(fe=fe+Y|0),$+=(X=(X=X+(ce/67108864|0)|0)+(fe>>>26)|0)>>>26,X&=67108863}te.words[K]=Y,Q=X,X=$}return Q!==0?te.words[K]=Q:te.length--,te.strip()}(this,I,N):b(this,I,N),W},f.prototype.makeRBT=function(I){for(var N=new Array(I),W=l.prototype._countBits(I)-1,F=0;F<I;F++)N[F]=this.revBin(F,W,I);return N},f.prototype.revBin=function(I,N,W){if(I===0||I===W-1)return I;for(var F=0,j=0;j<N;j++)F|=(1&I)<<N-j-1,I>>=1;return F},f.prototype.permute=function(I,N,W,F,j,H){for(var te=0;te<H;te++)F[te]=N[I[te]],j[te]=W[I[te]]},f.prototype.transform=function(I,N,W,F,j,H){this.permute(H,I,N,W,F,j);for(var te=1;te<j;te<<=1)for(var Q=te<<1,$=Math.cos(2*Math.PI/Q),K=Math.sin(2*Math.PI/Q),X=0;X<j;X+=Q)for(var Y=$,re=K,se=0;se<te;se++){var ae=W[X+se],ce=F[X+se],fe=W[X+se+te],he=F[X+se+te],ve=Y*fe-re*he;he=Y*he+re*fe,fe=ve,W[X+se]=ae+fe,F[X+se]=ce+he,W[X+se+te]=ae-fe,F[X+se+te]=ce-he,se!==Q&&(ve=$*Y-K*re,re=$*re+K*Y,Y=ve)}},f.prototype.guessLen13b=function(I,N){var W=1|Math.max(N,I),F=1&W,j=0;for(W=W/2|0;W;W>>>=1)j++;return 1<<j+1+F},f.prototype.conjugate=function(I,N,W){if(!(W<=1))for(var F=0;F<W/2;F++){var j=I[F];I[F]=I[W-F-1],I[W-F-1]=j,j=N[F],N[F]=-N[W-F-1],N[W-F-1]=-j}},f.prototype.normalize13b=function(I,N){for(var W=0,F=0;F<N/2;F++){var j=8192*Math.round(I[2*F+1]/N)+Math.round(I[2*F]/N)+W;I[F]=67108863&j,W=j<67108864?0:j/67108864|0}return I},f.prototype.convert13b=function(I,N,W,F){for(var j=0,H=0;H<N;H++)j+=0|I[H],W[2*H]=8191&j,j>>>=13,W[2*H+1]=8191&j,j>>>=13;for(H=2*N;H<F;++H)W[H]=0;n(j===0),n((-8192&j)==0)},f.prototype.stub=function(I){for(var N=new Array(I),W=0;W<I;W++)N[W]=0;return N},f.prototype.mulp=function(I,N,W){var F=2*this.guessLen13b(I.length,N.length),j=this.makeRBT(F),H=this.stub(F),te=new Array(F),Q=new Array(F),$=new Array(F),K=new Array(F),X=new Array(F),Y=new Array(F),re=W.words;re.length=F,this.convert13b(I.words,I.length,te,F),this.convert13b(N.words,N.length,K,F),this.transform(te,H,Q,$,F,j),this.transform(K,H,X,Y,F,j);for(var se=0;se<F;se++){var ae=Q[se]*X[se]-$[se]*Y[se];$[se]=Q[se]*Y[se]+$[se]*X[se],Q[se]=ae}return this.conjugate(Q,$,F),this.transform(Q,$,re,H,F,j),this.conjugate(re,H,F),this.normalize13b(re,F),W.negative=I.negative^N.negative,W.length=I.length+N.length,W.strip()},l.prototype.mul=function(I){var N=new l(null);return N.words=new Array(this.length+I.length),this.mulTo(I,N)},l.prototype.mulf=function(I){var N=new l(null);return N.words=new Array(this.length+I.length),b(this,I,N)},l.prototype.imul=function(I){return this.clone().mulTo(I,this)},l.prototype.imuln=function(I){n(typeof I=="number"),n(I<67108864);for(var N=0,W=0;W<this.length;W++){var F=(0|this.words[W])*I,j=(67108863&F)+(67108863&N);N>>=26,N+=F/67108864|0,N+=j>>>26,this.words[W]=67108863&j}return N!==0&&(this.words[W]=N,this.length++),this},l.prototype.muln=function(I){return this.clone().imuln(I)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(I){var N=function(H){for(var te=new Array(H.bitLength()),Q=0;Q<te.length;Q++){var $=Q/26|0,K=Q%26;te[Q]=(H.words[$]&1<<K)>>>K}return te}(I);if(N.length===0)return new l(1);for(var W=this,F=0;F<N.length&&N[F]===0;F++,W=W.sqr());if(++F<N.length)for(var j=W.sqr();F<N.length;F++,j=j.sqr())N[F]!==0&&(W=W.mul(j));return W},l.prototype.iushln=function(I){n(typeof I=="number"&&I>=0);var N,W=I%26,F=(I-W)/26,j=67108863>>>26-W<<26-W;if(W!==0){var H=0;for(N=0;N<this.length;N++){var te=this.words[N]&j,Q=(0|this.words[N])-te<<W;this.words[N]=Q|H,H=te>>>26-W}H&&(this.words[N]=H,this.length++)}if(F!==0){for(N=this.length-1;N>=0;N--)this.words[N+F]=this.words[N];for(N=0;N<F;N++)this.words[N]=0;this.length+=F}return this.strip()},l.prototype.ishln=function(I){return n(this.negative===0),this.iushln(I)},l.prototype.iushrn=function(I,N,W){var F;n(typeof I=="number"&&I>=0),F=N?(N-N%26)/26:0;var j=I%26,H=Math.min((I-j)/26,this.length),te=67108863^67108863>>>j<<j,Q=W;if(F-=H,F=Math.max(0,F),Q){for(var $=0;$<H;$++)Q.words[$]=this.words[$];Q.length=H}if(H!==0)if(this.length>H)for(this.length-=H,$=0;$<this.length;$++)this.words[$]=this.words[$+H];else this.words[0]=0,this.length=1;var K=0;for($=this.length-1;$>=0&&(K!==0||$>=F);$--){var X=0|this.words[$];this.words[$]=K<<26-j|X>>>j,K=X&te}return Q&&K!==0&&(Q.words[Q.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(I,N,W){return n(this.negative===0),this.iushrn(I,N,W)},l.prototype.shln=function(I){return this.clone().ishln(I)},l.prototype.ushln=function(I){return this.clone().iushln(I)},l.prototype.shrn=function(I){return this.clone().ishrn(I)},l.prototype.ushrn=function(I){return this.clone().iushrn(I)},l.prototype.testn=function(I){n(typeof I=="number"&&I>=0);var N=I%26,W=(I-N)/26,F=1<<N;return!(this.length<=W||!(this.words[W]&F))},l.prototype.imaskn=function(I){n(typeof I=="number"&&I>=0);var N=I%26,W=(I-N)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(N!==0&&W++,this.length=Math.min(W,this.length),N!==0){var F=67108863^67108863>>>N<<N;this.words[this.length-1]&=F}return this.strip()},l.prototype.maskn=function(I){return this.clone().imaskn(I)},l.prototype.iaddn=function(I){return n(typeof I=="number"),n(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(0|this.words[0])<I?(this.words[0]=I-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},l.prototype._iaddn=function(I){this.words[0]+=I;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},l.prototype.isubn=function(I){if(n(typeof I=="number"),n(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},l.prototype.addn=function(I){return this.clone().iaddn(I)},l.prototype.subn=function(I){return this.clone().isubn(I)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(I,N,W){var F,j,H=I.length+W;this._expand(H);var te=0;for(F=0;F<I.length;F++){j=(0|this.words[F+W])+te;var Q=(0|I.words[F])*N;te=((j-=67108863&Q)>>26)-(Q/67108864|0),this.words[F+W]=67108863&j}for(;F<this.length-W;F++)te=(j=(0|this.words[F+W])+te)>>26,this.words[F+W]=67108863&j;if(te===0)return this.strip();for(n(te===-1),te=0,F=0;F<this.length;F++)te=(j=-(0|this.words[F])+te)>>26,this.words[F]=67108863&j;return this.negative=1,this.strip()},l.prototype._wordDiv=function(I,N){var W=(this.length,I.length),F=this.clone(),j=I,H=0|j.words[j.length-1];(W=26-this._countBits(H))!=0&&(j=j.ushln(W),F.iushln(W),H=0|j.words[j.length-1]);var te,Q=F.length-j.length;if(N!=="mod"){(te=new l(null)).length=Q+1,te.words=new Array(te.length);for(var $=0;$<te.length;$++)te.words[$]=0}var K=F.clone()._ishlnsubmul(j,1,Q);K.negative===0&&(F=K,te&&(te.words[Q]=1));for(var X=Q-1;X>=0;X--){var Y=67108864*(0|F.words[j.length+X])+(0|F.words[j.length+X-1]);for(Y=Math.min(Y/H|0,67108863),F._ishlnsubmul(j,Y,X);F.negative!==0;)Y--,F.negative=0,F._ishlnsubmul(j,1,X),F.isZero()||(F.negative^=1);te&&(te.words[X]=Y)}return te&&te.strip(),F.strip(),N!=="div"&&W!==0&&F.iushrn(W),{div:te||null,mod:F}},l.prototype.divmod=function(I,N,W){return n(!I.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&I.negative===0?(H=this.neg().divmod(I,N),N!=="mod"&&(F=H.div.neg()),N!=="div"&&(j=H.mod.neg(),W&&j.negative!==0&&j.iadd(I)),{div:F,mod:j}):this.negative===0&&I.negative!==0?(H=this.divmod(I.neg(),N),N!=="mod"&&(F=H.div.neg()),{div:F,mod:H.mod}):this.negative&I.negative?(H=this.neg().divmod(I.neg(),N),N!=="div"&&(j=H.mod.neg(),W&&j.negative!==0&&j.isub(I)),{div:H.div,mod:j}):I.length>this.length||this.cmp(I)<0?{div:new l(0),mod:this}:I.length===1?N==="div"?{div:this.divn(I.words[0]),mod:null}:N==="mod"?{div:null,mod:new l(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new l(this.modn(I.words[0]))}:this._wordDiv(I,N);var F,j,H},l.prototype.div=function(I){return this.divmod(I,"div",!1).div},l.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},l.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},l.prototype.divRound=function(I){var N=this.divmod(I);if(N.mod.isZero())return N.div;var W=N.div.negative!==0?N.mod.isub(I):N.mod,F=I.ushrn(1),j=I.andln(1),H=W.cmp(F);return H<0||j===1&&H===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},l.prototype.modn=function(I){n(I<=67108863);for(var N=67108864%I,W=0,F=this.length-1;F>=0;F--)W=(N*W+(0|this.words[F]))%I;return W},l.prototype.idivn=function(I){n(I<=67108863);for(var N=0,W=this.length-1;W>=0;W--){var F=(0|this.words[W])+67108864*N;this.words[W]=F/I|0,N=F%I}return this.strip()},l.prototype.divn=function(I){return this.clone().idivn(I)},l.prototype.egcd=function(I){n(I.negative===0),n(!I.isZero());var N=this,W=I.clone();N=N.negative!==0?N.umod(I):N.clone();for(var F=new l(1),j=new l(0),H=new l(0),te=new l(1),Q=0;N.isEven()&&W.isEven();)N.iushrn(1),W.iushrn(1),++Q;for(var $=W.clone(),K=N.clone();!N.isZero();){for(var X=0,Y=1;!(N.words[0]&Y)&&X<26;++X,Y<<=1);if(X>0)for(N.iushrn(X);X-- >0;)(F.isOdd()||j.isOdd())&&(F.iadd($),j.isub(K)),F.iushrn(1),j.iushrn(1);for(var re=0,se=1;!(W.words[0]&se)&&re<26;++re,se<<=1);if(re>0)for(W.iushrn(re);re-- >0;)(H.isOdd()||te.isOdd())&&(H.iadd($),te.isub(K)),H.iushrn(1),te.iushrn(1);N.cmp(W)>=0?(N.isub(W),F.isub(H),j.isub(te)):(W.isub(N),H.isub(F),te.isub(j))}return{a:H,b:te,gcd:W.iushln(Q)}},l.prototype._invmp=function(I){n(I.negative===0),n(!I.isZero());var N=this,W=I.clone();N=N.negative!==0?N.umod(I):N.clone();for(var F,j=new l(1),H=new l(0),te=W.clone();N.cmpn(1)>0&&W.cmpn(1)>0;){for(var Q=0,$=1;!(N.words[0]&$)&&Q<26;++Q,$<<=1);if(Q>0)for(N.iushrn(Q);Q-- >0;)j.isOdd()&&j.iadd(te),j.iushrn(1);for(var K=0,X=1;!(W.words[0]&X)&&K<26;++K,X<<=1);if(K>0)for(W.iushrn(K);K-- >0;)H.isOdd()&&H.iadd(te),H.iushrn(1);N.cmp(W)>=0?(N.isub(W),j.isub(H)):(W.isub(N),H.isub(j))}return(F=N.cmpn(1)===0?j:H).cmpn(0)<0&&F.iadd(I),F},l.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var N=this.clone(),W=I.clone();N.negative=0,W.negative=0;for(var F=0;N.isEven()&&W.isEven();F++)N.iushrn(1),W.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;W.isEven();)W.iushrn(1);var j=N.cmp(W);if(j<0){var H=N;N=W,W=H}else if(j===0||W.cmpn(1)===0)break;N.isub(W)}return W.iushln(F)},l.prototype.invm=function(I){return this.egcd(I).a.umod(I)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(I){return this.words[0]&I},l.prototype.bincn=function(I){n(typeof I=="number");var N=I%26,W=(I-N)/26,F=1<<N;if(this.length<=W)return this._expand(W+1),this.words[W]|=F,this;for(var j=F,H=W;j!==0&&H<this.length;H++){var te=0|this.words[H];j=(te+=j)>>>26,te&=67108863,this.words[H]=te}return j!==0&&(this.words[H]=j,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(I){var N,W=I<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;if(this.strip(),this.length>1)N=1;else{W&&(I=-I),n(I<=67108863,"Number is too big");var F=0|this.words[0];N=F===I?0:F<I?-1:1}return this.negative!==0?0|-N:N},l.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var N=this.ucmp(I);return this.negative!==0?0|-N:N},l.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var N=0,W=this.length-1;W>=0;W--){var F=0|this.words[W],j=0|I.words[W];if(F!==j){F<j?N=-1:F>j&&(N=1);break}}return N},l.prototype.gtn=function(I){return this.cmpn(I)===1},l.prototype.gt=function(I){return this.cmp(I)===1},l.prototype.gten=function(I){return this.cmpn(I)>=0},l.prototype.gte=function(I){return this.cmp(I)>=0},l.prototype.ltn=function(I){return this.cmpn(I)===-1},l.prototype.lt=function(I){return this.cmp(I)===-1},l.prototype.lten=function(I){return this.cmpn(I)<=0},l.prototype.lte=function(I){return this.cmp(I)<=0},l.prototype.eqn=function(I){return this.cmpn(I)===0},l.prototype.eq=function(I){return this.cmp(I)===0},l.red=function(I){return new D(I)},l.prototype.toRed=function(I){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},l.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(I){return this.red=I,this},l.prototype.forceRed=function(I){return n(!this.red,"Already a number in reduction context"),this._forceRed(I)},l.prototype.redAdd=function(I){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},l.prototype.redIAdd=function(I){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},l.prototype.redSub=function(I){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},l.prototype.redISub=function(I){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},l.prototype.redShl=function(I){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},l.prototype.redMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},l.prototype.redIMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},l.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(I){return n(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var S={k256:null,p224:null,p192:null,p25519:null};function w(I,N){this.name=I,this.p=new l(N,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function O(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function D(I){if(typeof I=="string"){var N=l._prime(I);this.m=N.p,this.prime=N}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}function U(I){D.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var I=new l(null);return I.words=new Array(Math.ceil(this.n/13)),I},w.prototype.ireduce=function(I){var N,W=I;do this.split(W,this.tmp),N=(W=(W=this.imulK(W)).iadd(this.tmp)).bitLength();while(N>this.n);var F=N<this.n?-1:W.ucmp(this.p);return F===0?(W.words[0]=0,W.length=1):F>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},w.prototype.split=function(I,N){I.iushrn(this.n,0,N)},w.prototype.imulK=function(I){return I.imul(this.k)},a(E,w),E.prototype.split=function(I,N){for(var W=4194303,F=Math.min(I.length,9),j=0;j<F;j++)N.words[j]=I.words[j];if(N.length=F,I.length<=9)return I.words[0]=0,void(I.length=1);var H=I.words[9];for(N.words[N.length++]=H&W,j=10;j<I.length;j++){var te=0|I.words[j];I.words[j-10]=(te&W)<<4|H>>>22,H=te}H>>>=22,I.words[j-10]=H,H===0&&I.length>10?I.length-=10:I.length-=9},E.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var N=0,W=0;W<I.length;W++){var F=0|I.words[W];N+=977*F,I.words[W]=67108863&N,N=64*F+(N/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I},a(O,w),a(C,w),a(P,w),P.prototype.imulK=function(I){for(var N=0,W=0;W<I.length;W++){var F=19*(0|I.words[W])+N,j=67108863&F;F>>>=26,I.words[W]=j,N=F}return N!==0&&(I.words[I.length++]=N),I},l._prime=function(I){if(S[I])return S[I];var N;if(I==="k256")N=new E;else if(I==="p224")N=new O;else if(I==="p192")N=new C;else{if(I!=="p25519")throw new Error("Unknown prime "+I);N=new P}return S[I]=N,N},D.prototype._verify1=function(I){n(I.negative===0,"red works only with positives"),n(I.red,"red works only with red numbers")},D.prototype._verify2=function(I,N){n((I.negative|N.negative)==0,"red works only with positives"),n(I.red&&I.red===N.red,"red works only with red numbers")},D.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},D.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},D.prototype.add=function(I,N){this._verify2(I,N);var W=I.add(N);return W.cmp(this.m)>=0&&W.isub(this.m),W._forceRed(this)},D.prototype.iadd=function(I,N){this._verify2(I,N);var W=I.iadd(N);return W.cmp(this.m)>=0&&W.isub(this.m),W},D.prototype.sub=function(I,N){this._verify2(I,N);var W=I.sub(N);return W.cmpn(0)<0&&W.iadd(this.m),W._forceRed(this)},D.prototype.isub=function(I,N){this._verify2(I,N);var W=I.isub(N);return W.cmpn(0)<0&&W.iadd(this.m),W},D.prototype.shl=function(I,N){return this._verify1(I),this.imod(I.ushln(N))},D.prototype.imul=function(I,N){return this._verify2(I,N),this.imod(I.imul(N))},D.prototype.mul=function(I,N){return this._verify2(I,N),this.imod(I.mul(N))},D.prototype.isqr=function(I){return this.imul(I,I.clone())},D.prototype.sqr=function(I){return this.mul(I,I)},D.prototype.sqrt=function(I){if(I.isZero())return I.clone();var N=this.m.andln(3);if(n(N%2==1),N===3){var W=this.m.add(new l(1)).iushrn(2);return this.pow(I,W)}for(var F=this.m.subn(1),j=0;!F.isZero()&&F.andln(1)===0;)j++,F.iushrn(1);n(!F.isZero());var H=new l(1).toRed(this),te=H.redNeg(),Q=this.m.subn(1).iushrn(1),$=this.m.bitLength();for($=new l(2*$*$).toRed(this);this.pow($,Q).cmp(te)!==0;)$.redIAdd(te);for(var K=this.pow($,F),X=this.pow(I,F.addn(1).iushrn(1)),Y=this.pow(I,F),re=j;Y.cmp(H)!==0;){for(var se=Y,ae=0;se.cmp(H)!==0;ae++)se=se.redSqr();n(ae<re);var ce=this.pow(K,new l(1).iushln(re-ae-1));X=X.redMul(ce),K=ce.redSqr(),Y=Y.redMul(K),re=ae}return X},D.prototype.invm=function(I){var N=I._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},D.prototype.pow=function(I,N){if(N.isZero())return new l(1).toRed(this);if(N.cmpn(1)===0)return I.clone();var W=new Array(16);W[0]=new l(1).toRed(this),W[1]=I;for(var F=2;F<W.length;F++)W[F]=this.mul(W[F-1],I);var j=W[0],H=0,te=0,Q=N.bitLength()%26;for(Q===0&&(Q=26),F=N.length-1;F>=0;F--){for(var $=N.words[F],K=Q-1;K>=0;K--){var X=$>>K&1;j!==W[0]&&(j=this.sqr(j)),X!==0||H!==0?(H<<=1,H|=X,(++te==4||F===0&&K===0)&&(j=this.mul(j,W[H]),te=0,H=0)):te=0}Q=26}return j},D.prototype.convertTo=function(I){var N=I.umod(this.m);return N===I?N.clone():N},D.prototype.convertFrom=function(I){var N=I.clone();return N.red=null,N},l.mont=function(I){return new U(I)},a(U,D),U.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},U.prototype.convertFrom=function(I){var N=this.imod(I.mul(this.rinv));return N.red=null,N},U.prototype.imul=function(I,N){if(I.isZero()||N.isZero())return I.words[0]=0,I.length=1,I;var W=I.imul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=W.isub(F).iushrn(this.shift),H=j;return j.cmp(this.m)>=0?H=j.isub(this.m):j.cmpn(0)<0&&(H=j.iadd(this.m)),H._forceRed(this)},U.prototype.mul=function(I,N){if(I.isZero()||N.isZero())return new l(0)._forceRed(this);var W=I.mul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=W.isub(F).iushrn(this.shift),H=j;return j.cmp(this.m)>=0?H=j.isub(this.m):j.cmpn(0)<0&&(H=j.iadd(this.m)),H._forceRed(this)},U.prototype.invm=function(I){return this.imod(I._invmp(this.m).mul(this.r2))._forceRed(this)}})(p=t.nmd(p),this)},6204:function(p){p.exports=function(s){var t,i,r,n=s.length,a=0;for(t=0;t<n;++t)a+=s[t].length;var l=new Array(a),u=0;for(t=0;t<n;++t){var h=s[t],c=h.length;for(i=0;i<c;++i){var x=l[u++]=new Array(c-1),d=0;for(r=0;r<c;++r)r!==i&&(x[d++]=h[r]);if(1&i){var v=x[1];x[1]=x[0],x[0]=v}}}return l}},6867:function(p,s,t){p.exports=function(x,d,v){switch(arguments.length){case 1:return i=[],h(g=x,g,c,!0),i;case 2:return typeof d=="function"?h(x,x,d,!0):function(y,m){return i=[],h(y,m,c,!1),i}(x,d);case 3:return h(x,d,v,!1);default:throw new Error("box-intersect: Invalid arguments")}var g};var i,r=t(1888),n=t(855),a=t(7150);function l(x,d){for(var v=0;v<x;++v)if(!(d[v]<=d[v+x]))return!0;return!1}function u(x,d,v,g){for(var y=0,m=0,b=0,f=x.length;b<f;++b){var S=x[b];if(!l(d,S)){for(var w=0;w<2*d;++w)v[y++]=S[w];g[m++]=b}}return m}function h(x,d,v,g){var y=x.length,m=d.length;if(!(y<=0||m<=0)){var b=x[0].length>>>1;if(!(b<=0)){var f,S=r.mallocDouble(2*b*y),w=r.mallocInt32(y);if((y=u(x,b,S,w))>0){if(b===1&&g)n.init(y),f=n.sweepComplete(b,v,0,y,S,w,0,y,S,w);else{var E=r.mallocDouble(2*b*m),O=r.mallocInt32(m);(m=u(d,b,E,O))>0&&(n.init(y+m),f=b===1?n.sweepBipartite(b,v,0,y,S,w,0,m,E,O):a(b,v,g,y,S,w,m,E,O),r.free(E),r.free(O))}r.free(S),r.free(w)}return f}}}function c(x,d){i.push([x,d])}},2455:function(p,s){function t(i){return i?function(r,n,a,l,u,h,c,x,d,v,g){return u-l>d-x?function(y,m,b,f,S,w,E,O,C,P,D){for(var U=2*y,I=f,N=U*f;I<S;++I,N+=U){var W=w[m+N],F=w[m+N+y],j=E[I];e:for(var H=O,te=U*O;H<C;++H,te+=U){var Q=P[m+te],$=P[m+te+y],K=D[H];if(!($<W||F<Q)){for(var X=m+1;X<y;++X){var Y=w[X+N],re=w[X+y+N],se=P[X+te],ae=P[X+y+te];if(re<se||ae<Y)continue e}var ce=b(j,K);if(ce!==void 0)return ce}}}}(r,n,a,l,u,h,c,x,d,v,g):function(y,m,b,f,S,w,E,O,C,P,D){for(var U=2*y,I=O,N=U*O;I<C;++I,N+=U){var W=P[m+N],F=P[m+N+y],j=D[I];e:for(var H=f,te=U*f;H<S;++H,te+=U){var Q=w[m+te],$=w[m+te+y],K=E[H];if(!(F<Q||$<W)){for(var X=m+1;X<y;++X){var Y=w[X+te],re=w[X+y+te],se=P[X+N],ae=P[X+y+N];if(re<se||ae<Y)continue e}var ce=b(K,j);if(ce!==void 0)return ce}}}}(r,n,a,l,u,h,c,x,d,v,g)}:function(r,n,a,l,u,h,c,x,d,v,g,y){return h-u>v-d?l?function(m,b,f,S,w,E,O,C,P,D,U){for(var I=2*m,N=S,W=I*S;N<w;++N,W+=I){var F=E[b+W],j=E[b+W+m],H=O[N];e:for(var te=C,Q=I*C;te<P;++te,Q+=I){var $=D[b+Q],K=U[te];if(!($<=F||j<$)){for(var X=b+1;X<m;++X){var Y=E[X+W],re=E[X+m+W],se=D[X+Q],ae=D[X+m+Q];if(re<se||ae<Y)continue e}var ce=f(K,H);if(ce!==void 0)return ce}}}}(r,n,a,u,h,c,x,d,v,g,y):function(m,b,f,S,w,E,O,C,P,D,U){for(var I=2*m,N=S,W=I*S;N<w;++N,W+=I){var F=E[b+W],j=E[b+W+m],H=O[N];e:for(var te=C,Q=I*C;te<P;++te,Q+=I){var $=D[b+Q],K=U[te];if(!($<F||j<$)){for(var X=b+1;X<m;++X){var Y=E[X+W],re=E[X+m+W],se=D[X+Q],ae=D[X+m+Q];if(re<se||ae<Y)continue e}var ce=f(H,K);if(ce!==void 0)return ce}}}}(r,n,a,u,h,c,x,d,v,g,y):l?function(m,b,f,S,w,E,O,C,P,D,U){for(var I=2*m,N=C,W=I*C;N<P;++N,W+=I){var F=D[b+W],j=U[N];e:for(var H=S,te=I*S;H<w;++H,te+=I){var Q=E[b+te],$=E[b+te+m],K=O[H];if(!(F<=Q||$<F)){for(var X=b+1;X<m;++X){var Y=E[X+te],re=E[X+m+te],se=D[X+W],ae=D[X+m+W];if(re<se||ae<Y)continue e}var ce=f(j,K);if(ce!==void 0)return ce}}}}(r,n,a,u,h,c,x,d,v,g,y):function(m,b,f,S,w,E,O,C,P,D,U){for(var I=2*m,N=C,W=I*C;N<P;++N,W+=I){var F=D[b+W],j=U[N];e:for(var H=S,te=I*S;H<w;++H,te+=I){var Q=E[b+te],$=E[b+te+m],K=O[H];if(!(F<Q||$<F)){for(var X=b+1;X<m;++X){var Y=E[X+te],re=E[X+m+te],se=D[X+W],ae=D[X+m+W];if(re<se||ae<Y)continue e}var ce=f(K,j);if(ce!==void 0)return ce}}}}(r,n,a,u,h,c,x,d,v,g,y)}}s.partial=t(!1),s.full=t(!0)},7150:function(p,s,t){p.exports=function(I,N,W,F,j,H,te,Q,$){(function(Ie,Ee){var Be=8*r.log2(Ee+1)*(Ie+1)|0,Ve=r.nextPow2(w*Be);O.length<Ve&&(i.free(O),O=i.mallocInt32(Ve));var Ze=r.nextPow2(E*Be);C.length<Ze&&(i.free(C),C=i.mallocDouble(Ze))})(I,F+te);var K,X=0,Y=2*I;for(P(X++,0,0,F,0,te,W?16:0,-1/0,1/0),W||P(X++,0,0,te,0,F,1,-1/0,1/0);X>0;){var re=(X-=1)*w,se=O[re],ae=O[re+1],ce=O[re+2],fe=O[re+3],he=O[re+4],ve=O[re+5],ye=X*E,me=C[ye],Me=C[ye+1],Pe=1&ve,ge=!!(16&ve),oe=j,ie=H,de=Q,Se=$;if(Pe&&(oe=Q,ie=$,de=j,Se=H),!(2&ve&&ae>=(ce=m(I,se,ae,ce,oe,ie,Me))||4&ve&&(ae=b(I,se,ae,ce,oe,ie,me))>=ce)){var _e=ce-ae,we=he-fe;if(ge){if(I*_e*(_e+we)<v){if((K=u.scanComplete(I,se,N,ae,ce,oe,ie,fe,he,de,Se))!==void 0)return K;continue}}else{if(I*Math.min(_e,we)<x){if((K=a(I,se,N,Pe,ae,ce,oe,ie,fe,he,de,Se))!==void 0)return K;continue}if(I*_e*we<d){if((K=u.scanBipartite(I,se,N,Pe,ae,ce,oe,ie,fe,he,de,Se))!==void 0)return K;continue}}var Ae=g(I,se,ae,ce,oe,ie,me,Me);if(ae<Ae)if(I*(Ae-ae)<x){if((K=l(I,se+1,N,ae,Ae,oe,ie,fe,he,de,Se))!==void 0)return K}else if(se===I-2){if((K=Pe?u.sweepBipartite(I,N,fe,he,de,Se,ae,Ae,oe,ie):u.sweepBipartite(I,N,ae,Ae,oe,ie,fe,he,de,Se))!==void 0)return K}else P(X++,se+1,ae,Ae,fe,he,Pe,-1/0,1/0),P(X++,se+1,fe,he,ae,Ae,1^Pe,-1/0,1/0);if(Ae<ce){var Oe=h(I,se,fe,he,de,Se),ze=de[Y*Oe+se],pe=y(I,se,Oe,he,de,Se,ze);if(pe<he&&P(X++,se,Ae,ce,pe,he,(4|Pe)+(ge?16:0),ze,Me),fe<Oe&&P(X++,se,Ae,ce,fe,Oe,(2|Pe)+(ge?16:0),me,ze),Oe+1===pe){if((K=ge?U(I,se,N,Ae,ce,oe,ie,Oe,de,Se[Oe]):D(I,se,N,Pe,Ae,ce,oe,ie,Oe,de,Se[Oe]))!==void 0)return K}else if(Oe<pe){var be;if(ge){if(Ae<(be=f(I,se,Ae,ce,oe,ie,ze))){var ke=y(I,se,Ae,be,oe,ie,ze);if(se===I-2){if(Ae<ke&&(K=u.sweepComplete(I,N,Ae,ke,oe,ie,Oe,pe,de,Se))!==void 0||ke<be&&(K=u.sweepBipartite(I,N,ke,be,oe,ie,Oe,pe,de,Se))!==void 0)return K}else Ae<ke&&P(X++,se+1,Ae,ke,Oe,pe,16,-1/0,1/0),ke<be&&(P(X++,se+1,ke,be,Oe,pe,0,-1/0,1/0),P(X++,se+1,Oe,pe,ke,be,1,-1/0,1/0))}}else Ae<(be=Pe?S(I,se,Ae,ce,oe,ie,ze):f(I,se,Ae,ce,oe,ie,ze))&&(se===I-2?K=Pe?u.sweepBipartite(I,N,Oe,pe,de,Se,Ae,be,oe,ie):u.sweepBipartite(I,N,Ae,be,oe,ie,Oe,pe,de,Se):(P(X++,se+1,Ae,be,Oe,pe,Pe,-1/0,1/0),P(X++,se+1,Oe,pe,Ae,be,1^Pe,-1/0,1/0)))}}}}};var i=t(1888),r=t(8828),n=t(2455),a=n.partial,l=n.full,u=t(855),h=t(3545),c=t(8105),x=128,d=1<<22,v=1<<22,g=c("!(lo>=p0)&&!(p1>=hi)"),y=c("lo===p0"),m=c("lo<p0"),b=c("hi<=p0"),f=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),w=6,E=2,O=i.mallocInt32(1024),C=i.mallocDouble(1024);function P(I,N,W,F,j,H,te,Q,$){var K=w*I;O[K]=N,O[K+1]=W,O[K+2]=F,O[K+3]=j,O[K+4]=H,O[K+5]=te;var X=E*I;C[X]=Q,C[X+1]=$}function D(I,N,W,F,j,H,te,Q,$,K,X){var Y=2*I,re=$*Y,se=K[re+N];e:for(var ae=j,ce=j*Y;ae<H;++ae,ce+=Y){var fe=te[ce+N],he=te[ce+N+I];if(!(se<fe||he<se||F&&se===fe)){for(var ve,ye=Q[ae],me=N+1;me<I;++me){fe=te[ce+me],he=te[ce+me+I];var Me=K[re+me],Pe=K[re+me+I];if(he<Me||Pe<fe)continue e}if((ve=F?W(X,ye):W(ye,X))!==void 0)return ve}}}function U(I,N,W,F,j,H,te,Q,$,K){var X=2*I,Y=Q*X,re=$[Y+N];e:for(var se=F,ae=F*X;se<j;++se,ae+=X){var ce=te[se];if(ce!==K){var fe=H[ae+N],he=H[ae+N+I];if(!(re<fe||he<re)){for(var ve=N+1;ve<I;++ve){fe=H[ae+ve],he=H[ae+ve+I];var ye=$[Y+ve],me=$[Y+ve+I];if(he<ye||me<fe)continue e}var Me=W(ce,K);if(Me!==void 0)return Me}}}}},3545:function(p,s,t){p.exports=function(a,l,u,h,c,x){if(h<=u+1)return u;for(var d=u,v=h,g=h+u>>>1,y=2*a,m=g,b=c[y*g+l];d<v;){if(v-d<r){n(a,l,d,v,c,x),b=c[y*g+l];break}var f=v-d,S=Math.random()*f+d|0,w=c[y*S+l],E=Math.random()*f+d|0,O=c[y*E+l],C=Math.random()*f+d|0,P=c[y*C+l];w<=O?P>=O?(m=E,b=O):w>=P?(m=S,b=w):(m=C,b=P):O>=P?(m=E,b=O):P>=w?(m=S,b=w):(m=C,b=P);for(var D=y*(v-1),U=y*m,I=0;I<y;++I,++D,++U){var N=c[D];c[D]=c[U],c[U]=N}var W=x[v-1];for(x[v-1]=x[m],x[m]=W,D=y*(v-1),U=y*(m=i(a,l,d,v-1,c,x,b)),I=0;I<y;++I,++D,++U)N=c[D],c[D]=c[U],c[U]=N;if(W=x[v-1],x[v-1]=x[m],x[m]=W,g<m){for(v=m-1;d<v&&c[y*(v-1)+l]===b;)v-=1;v+=1}else{if(!(m<g))break;for(d=m+1;d<v&&c[y*d+l]===b;)d+=1}}return i(a,l,u,g,c,x,c[y*g+l])};var i=t(8105)("lo<p0"),r=8;function n(a,l,u,h,c,x){for(var d=2*a,v=d*(u+1)+l,g=u+1;g<h;++g,v+=d)for(var y=c[v],m=g,b=d*(g-1);m>u&&c[b+l]>y;--m,b-=d){for(var f=b,S=b+d,w=0;w<d;++w,++f,++S){var E=c[f];c[f]=c[S],c[S]=E}var O=x[m];x[m]=x[m-1],x[m-1]=O}}},8105:function(p){p.exports=function(t){return s[t]};var s={"lo===p0":function(t,i,r,n,a,l,u){for(var h=2*t,c=h*r,x=c,d=r,v=i,g=r;n>g;++g,c+=h)if(a[c+v]===u)if(d===g)d+=1,x+=h;else{for(var y=0;h>y;++y){var m=a[c+y];a[c+y]=a[x],a[x++]=m}var b=l[g];l[g]=l[d],l[d++]=b}return d},"lo<p0":function(t,i,r,n,a,l,u){for(var h=2*t,c=h*r,x=c,d=r,v=i,g=r;n>g;++g,c+=h)if(a[c+v]<u)if(d===g)d+=1,x+=h;else{for(var y=0;h>y;++y){var m=a[c+y];a[c+y]=a[x],a[x++]=m}var b=l[g];l[g]=l[d],l[d++]=b}return d},"lo<=p0":function(t,i,r,n,a,l,u){for(var h=2*t,c=h*r,x=c,d=r,v=t+i,g=r;n>g;++g,c+=h)if(a[c+v]<=u)if(d===g)d+=1,x+=h;else{for(var y=0;h>y;++y){var m=a[c+y];a[c+y]=a[x],a[x++]=m}var b=l[g];l[g]=l[d],l[d++]=b}return d},"hi<=p0":function(t,i,r,n,a,l,u){for(var h=2*t,c=h*r,x=c,d=r,v=t+i,g=r;n>g;++g,c+=h)if(a[c+v]<=u)if(d===g)d+=1,x+=h;else{for(var y=0;h>y;++y){var m=a[c+y];a[c+y]=a[x],a[x++]=m}var b=l[g];l[g]=l[d],l[d++]=b}return d},"lo<p0&&p0<=hi":function(t,i,r,n,a,l,u){for(var h=2*t,c=h*r,x=c,d=r,v=i,g=t+i,y=r;n>y;++y,c+=h){var m=a[c+v],b=a[c+g];if(m<u&&u<=b)if(d===y)d+=1,x+=h;else{for(var f=0;h>f;++f){var S=a[c+f];a[c+f]=a[x],a[x++]=S}var w=l[y];l[y]=l[d],l[d++]=w}}return d},"lo<=p0&&p0<=hi":function(t,i,r,n,a,l,u){for(var h=2*t,c=h*r,x=c,d=r,v=i,g=t+i,y=r;n>y;++y,c+=h){var m=a[c+v],b=a[c+g];if(m<=u&&u<=b)if(d===y)d+=1,x+=h;else{for(var f=0;h>f;++f){var S=a[c+f];a[c+f]=a[x],a[x++]=S}var w=l[y];l[y]=l[d],l[d++]=w}}return d},"!(lo>=p0)&&!(p1>=hi)":function(t,i,r,n,a,l,u,h){for(var c=2*t,x=c*r,d=x,v=r,g=i,y=t+i,m=r;n>m;++m,x+=c){var b=a[x+g],f=a[x+y];if(!(b>=u||h>=f))if(v===m)v+=1,d+=c;else{for(var S=0;c>S;++S){var w=a[x+S];a[x+S]=a[d],a[d++]=w}var E=l[m];l[m]=l[v],l[v++]=E}}return v}}},1811:function(p){p.exports=function(c,x){x<=4*s?t(0,x-1,c):h(0,x-1,c)};var s=32;function t(c,x,d){for(var v=2*(c+1),g=c+1;g<=x;++g){for(var y=d[v++],m=d[v++],b=g,f=v-2;b-- >c;){var S=d[f-2],w=d[f-1];if(S<y||S===y&&w<m)break;d[f]=S,d[f+1]=w,f-=2}d[f]=y,d[f+1]=m}}function i(c,x,d){x*=2;var v=d[c*=2],g=d[c+1];d[c]=d[x],d[c+1]=d[x+1],d[x]=v,d[x+1]=g}function r(c,x,d){x*=2,d[c*=2]=d[x],d[c+1]=d[x+1]}function n(c,x,d,v){x*=2,d*=2;var g=v[c*=2],y=v[c+1];v[c]=v[x],v[c+1]=v[x+1],v[x]=v[d],v[x+1]=v[d+1],v[d]=g,v[d+1]=y}function a(c,x,d,v,g){x*=2,g[c*=2]=g[x],g[x]=d,g[c+1]=g[x+1],g[x+1]=v}function l(c,x,d){x*=2;var v=d[c*=2],g=d[x];return!(v<g)&&(v!==g||d[c+1]>d[x+1])}function u(c,x,d,v){var g=v[c*=2];return g<x||g===x&&v[c+1]<d}function h(c,x,d){var v=(x-c+1)/6|0,g=c+v,y=x-v,m=c+x>>1,b=m-v,f=m+v,S=g,w=b,E=m,O=f,C=y,P=c+1,D=x-1,U=0;l(S,w,d)&&(U=S,S=w,w=U),l(O,C,d)&&(U=O,O=C,C=U),l(S,E,d)&&(U=S,S=E,E=U),l(w,E,d)&&(U=w,w=E,E=U),l(S,O,d)&&(U=S,S=O,O=U),l(E,O,d)&&(U=E,E=O,O=U),l(w,C,d)&&(U=w,w=C,C=U),l(w,E,d)&&(U=w,w=E,E=U),l(O,C,d)&&(U=O,O=C,C=U);for(var I=d[2*w],N=d[2*w+1],W=d[2*O],F=d[2*O+1],j=2*S,H=2*E,te=2*C,Q=2*g,$=2*m,K=2*y,X=0;X<2;++X){var Y=d[j+X],re=d[H+X],se=d[te+X];d[Q+X]=Y,d[$+X]=re,d[K+X]=se}r(b,c,d),r(f,x,d);for(var ae=P;ae<=D;++ae)if(u(ae,I,N,d))ae!==P&&i(ae,P,d),++P;else if(!u(ae,W,F,d))for(;;){if(u(D,W,F,d)){u(D,I,N,d)?(n(ae,P,D,d),++P,--D):(i(ae,D,d),--D);break}if(--D<ae)break}a(c,P-1,I,N,d),a(x,D+1,W,F,d),P-2-c<=s?t(c,P-2,d):h(c,P-2,d),x-(D+2)<=s?t(D+2,x,d):h(D+2,x,d),D-P<=s?t(P,D,d):h(P,D,d)}},855:function(p,s,t){p.exports={init:function(b){var f=r.nextPow2(b);u.length<f&&(i.free(u),u=i.mallocInt32(f)),h.length<f&&(i.free(h),h=i.mallocInt32(f)),c.length<f&&(i.free(c),c=i.mallocInt32(f)),x.length<f&&(i.free(x),x=i.mallocInt32(f)),d.length<f&&(i.free(d),d=i.mallocInt32(f)),v.length<f&&(i.free(v),v=i.mallocInt32(f));var S=8*f;g.length<S&&(i.free(g),g=i.mallocDouble(S))},sweepBipartite:function(b,f,S,w,E,O,C,P,D,U){for(var I=0,N=2*b,W=b-1,F=N-1,j=S;j<w;++j){var H=O[j],te=N*j;g[I++]=E[te+W],g[I++]=-(H+1),g[I++]=E[te+F],g[I++]=H}for(j=C;j<P;++j){H=U[j]+a;var Q=N*j;g[I++]=D[Q+W],g[I++]=-H,g[I++]=D[Q+F],g[I++]=H}var $=I>>>1;n(g,$);var K=0,X=0;for(j=0;j<$;++j){var Y=0|g[2*j+1];if(Y>=a)y(c,x,X--,Y=Y-a|0);else if(Y>=0)y(u,h,K--,Y);else if(Y<=-a){Y=-Y-a|0;for(var re=0;re<K;++re)if((se=f(u[re],Y))!==void 0)return se;m(c,x,X++,Y)}else{for(Y=-Y-1|0,re=0;re<X;++re){var se;if((se=f(Y,c[re]))!==void 0)return se}m(u,h,K++,Y)}}},sweepComplete:function(b,f,S,w,E,O,C,P,D,U){for(var I=0,N=2*b,W=b-1,F=N-1,j=S;j<w;++j){var H=O[j]+1<<1,te=N*j;g[I++]=E[te+W],g[I++]=-H,g[I++]=E[te+F],g[I++]=H}for(j=C;j<P;++j){H=U[j]+1<<1;var Q=N*j;g[I++]=D[Q+W],g[I++]=1|-H,g[I++]=D[Q+F],g[I++]=1|H}var $=I>>>1;n(g,$);var K=0,X=0,Y=0;for(j=0;j<$;++j){var re=0|g[2*j+1],se=1&re;if(j<$-1&&re>>1==g[2*j+3]>>1&&(se=2,j+=1),re<0){for(var ae=-(re>>1)-1,ce=0;ce<Y;++ce)if((fe=f(d[ce],ae))!==void 0)return fe;if(se!==0){for(ce=0;ce<K;++ce)if((fe=f(u[ce],ae))!==void 0)return fe}if(se!==1)for(ce=0;ce<X;++ce){var fe;if((fe=f(c[ce],ae))!==void 0)return fe}se===0?m(u,h,K++,ae):se===1?m(c,x,X++,ae):se===2&&m(d,v,Y++,ae)}else ae=(re>>1)-1,se===0?y(u,h,K--,ae):se===1?y(c,x,X--,ae):se===2&&y(d,v,Y--,ae)}},scanBipartite:function(b,f,S,w,E,O,C,P,D,U,I,N){var W=0,F=2*b,j=f,H=f+b,te=1,Q=1;w?Q=a:te=a;for(var $=E;$<O;++$){var K=$+te,X=F*$;g[W++]=C[X+j],g[W++]=-K,g[W++]=C[X+H],g[W++]=K}for($=D;$<U;++$){K=$+Q;var Y=F*$;g[W++]=I[Y+j],g[W++]=-K}var re=W>>>1;n(g,re);var se=0;for($=0;$<re;++$){var ae=0|g[2*$+1];if(ae<0){var ce=!1;if((K=-ae)>=a?(ce=!w,K-=a):(ce=!!w,K-=1),ce)m(u,h,se++,K);else{var fe=N[K],he=F*K,ve=I[he+f+1],ye=I[he+f+1+b];e:for(var me=0;me<se;++me){var Me=u[me],Pe=F*Me;if(!(ye<C[Pe+f+1]||C[Pe+f+1+b]<ve)){for(var ge=f+2;ge<b;++ge)if(I[he+ge+b]<C[Pe+ge]||C[Pe+ge+b]<I[he+ge])continue e;var oe,ie=P[Me];if((oe=w?S(fe,ie):S(ie,fe))!==void 0)return oe}}}}else y(u,h,se--,ae-te)}},scanComplete:function(b,f,S,w,E,O,C,P,D,U,I){for(var N=0,W=2*b,F=f,j=f+b,H=w;H<E;++H){var te=H+a,Q=W*H;g[N++]=O[Q+F],g[N++]=-te,g[N++]=O[Q+j],g[N++]=te}for(H=P;H<D;++H){te=H+1;var $=W*H;g[N++]=U[$+F],g[N++]=-te}var K=N>>>1;n(g,K);var X=0;for(H=0;H<K;++H){var Y=0|g[2*H+1];if(Y<0)if((te=-Y)>=a)u[X++]=te-a;else{var re=I[te-=1],se=W*te,ae=U[se+f+1],ce=U[se+f+1+b];e:for(var fe=0;fe<X;++fe){var he=u[fe],ve=C[he];if(ve===re)break;var ye=W*he;if(!(ce<O[ye+f+1]||O[ye+f+1+b]<ae)){for(var me=f+2;me<b;++me)if(U[se+me+b]<O[ye+me]||O[ye+me+b]<U[se+me])continue e;var Me=S(ve,re);if(Me!==void 0)return Me}}}else{for(te=Y-a,fe=X-1;fe>=0;--fe)if(u[fe]===te){for(me=fe+1;me<X;++me)u[me-1]=u[me];break}--X}}}};var i=t(1888),r=t(8828),n=t(1811),a=1<<28,l=1024,u=i.mallocInt32(l),h=i.mallocInt32(l),c=i.mallocInt32(l),x=i.mallocInt32(l),d=i.mallocInt32(l),v=i.mallocInt32(l),g=i.mallocDouble(8192);function y(b,f,S,w){var E=f[w],O=b[S-1];b[E]=O,f[O]=E}function m(b,f,S,w){b[S]=w,f[w]=S}},2538:function(p,s,t){var i=t(8902),r=t(5542),n=t(2272),a=t(5023);function l(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,x){return c[0]-x[0]||c[1]-x[1]}function h(c,x,d){return x in c?c[x]:d}p.exports=function(c,x,d){Array.isArray(x)?(d=d||{},x=x||[]):(d=x||{},x=[]);var v=!!h(d,"delaunay",!0),g=!!h(d,"interior",!0),y=!!h(d,"exterior",!0),m=!!h(d,"infinity",!1);if(!g&&!y||c.length===0)return[];var b=i(c,x);if(v||g!==y||m){for(var f=r(c.length,function(E){return E.map(l).sort(u)}(x)),S=0;S<b.length;++S){var w=b[S];f.addTriangle(w[0],w[1],w[2])}return v&&n(c,f),y?g?m?a(f,0,m):f.cells():a(f,1,m):a(f,-1)}return b}},2272:function(p,s,t){var i=t(2646)[4];function r(n,a,l,u,h,c){var x=a.opposite(u,h);if(!(x<0)){if(h<u){var d=u;u=h,h=d,d=c,c=x,x=d}a.isConstraint(u,h)||i(n[u],n[h],n[c],n[x])<0&&l.push(u,h)}}t(2478),p.exports=function(n,a){for(var l=[],u=n.length,h=a.stars,c=0;c<u;++c)for(var x=h[c],d=1;d<x.length;d+=2)if(!((m=x[d])<c||a.isConstraint(c,m))){for(var v=x[d-1],g=-1,y=1;y<x.length;y+=2)if(x[y-1]===m){g=x[y];break}g<0||i(n[c],n[m],n[v],n[g])<0&&l.push(c,m)}for(;l.length>0;){for(var m=l.pop(),b=(v=-1,g=-1,x=h[c=l.pop()],1);b<x.length;b+=2){var f=x[b-1],S=x[b];f===m?g=S:S===m&&(v=f)}v<0||g<0||i(n[c],n[m],n[v],n[g])>=0||(a.flip(c,m),r(n,a,l,v,c,g),r(n,a,l,c,g,v),r(n,a,l,g,m,v),r(n,a,l,m,v,g))}}},5023:function(p,s,t){var i,r=t(2478);function n(l,u,h,c,x,d,v){this.cells=l,this.neighbor=u,this.flags=c,this.constraint=h,this.active=x,this.next=d,this.boundary=v}function a(l,u){return l[0]-u[0]||l[1]-u[1]||l[2]-u[2]}p.exports=function(l,u,h){var c=function(C,P){for(var D=C.cells(),U=D.length,I=0;I<U;++I){var N=(Y=D[I])[0],W=Y[1],F=Y[2];W<F?W<N&&(Y[0]=W,Y[1]=F,Y[2]=N):F<N&&(Y[0]=F,Y[1]=N,Y[2]=W)}D.sort(a);var j=new Array(U);for(I=0;I<j.length;++I)j[I]=0;var H=[],te=[],Q=new Array(3*U),$=new Array(3*U),K=null;P&&(K=[]);var X=new n(D,Q,$,j,H,te,K);for(I=0;I<U;++I)for(var Y=D[I],re=0;re<3;++re){N=Y[re],W=Y[(re+1)%3];var se=Q[3*I+re]=X.locate(W,N,C.opposite(W,N)),ae=$[3*I+re]=C.isConstraint(N,W);se<0&&(ae?te.push(I):(H.push(I),j[I]=1),P&&K.push([W,N,-1]))}return X}(l,h);if(u===0)return h?c.cells.concat(c.boundary):c.cells;for(var x=1,d=c.active,v=c.next,g=c.flags,y=c.cells,m=c.constraint,b=c.neighbor;d.length>0||v.length>0;){for(;d.length>0;){var f=d.pop();if(g[f]!==-x){g[f]=x,y[f];for(var S=0;S<3;++S){var w=b[3*f+S];w>=0&&g[w]===0&&(m[3*f+S]?v.push(w):(d.push(w),g[w]=x))}}}var E=v;v=d,d=E,v.length=0,x=-x}var O=function(C,P,D){for(var U=0,I=0;I<C.length;++I)P[I]===D&&(C[U++]=C[I]);return C.length=U,C}(y,g,u);return h?O.concat(c.boundary):O},n.prototype.locate=(i=[0,0,0],function(l,u,h){var c=l,x=u,d=h;return u<h?u<l&&(c=u,x=h,d=l):h<l&&(c=h,x=l,d=u),c<0?-1:(i[0]=c,i[1]=x,i[2]=d,r.eq(this.cells,i,a))})},8902:function(p,s,t){var i=t(2478),r=t(3250)[3];function n(v,g,y,m,b){this.a=v,this.b=g,this.idx=y,this.lowerIds=m,this.upperIds=b}function a(v,g,y,m){this.a=v,this.b=g,this.type=y,this.idx=m}function l(v,g){var y=v.a[0]-g.a[0]||v.a[1]-g.a[1]||v.type-g.type;return y||(v.type!==0&&(y=r(v.a,v.b,g.b))?y:v.idx-g.idx)}function u(v,g){return r(v.a,v.b,g)}function h(v,g,y,m,b){for(var f=i.lt(g,m,u),S=i.gt(g,m,u),w=f;w<S;++w){for(var E=g[w],O=E.lowerIds,C=O.length;C>1&&r(y[O[C-2]],y[O[C-1]],m)>0;)v.push([O[C-1],O[C-2],b]),C-=1;O.length=C,O.push(b);var P=E.upperIds;for(C=P.length;C>1&&r(y[P[C-2]],y[P[C-1]],m)<0;)v.push([P[C-2],P[C-1],b]),C-=1;P.length=C,P.push(b)}}function c(v,g){var y;return(y=v.a[0]<g.a[0]?r(v.a,v.b,g.a):r(g.b,g.a,v.a))?y:(y=g.b[0]<v.b[0]?r(v.a,v.b,g.b):r(g.b,g.a,v.b))||v.idx-g.idx}function x(v,g,y){var m=i.le(v,y,c),b=v[m],f=b.upperIds,S=f[f.length-1];b.upperIds=[S],v.splice(m+1,0,new n(y.a,y.b,y.idx,[S],f))}function d(v,g,y){var m=y.a;y.a=y.b,y.b=m;var b=i.eq(v,y,c),f=v[b];v[b-1].upperIds=f.upperIds,v.splice(b,1)}p.exports=function(v,g){for(var y=v.length,m=g.length,b=[],f=0;f<y;++f)b.push(new a(v[f],null,0,f));for(f=0;f<m;++f){var S=g[f],w=v[S[0]],E=v[S[1]];w[0]<E[0]?b.push(new a(w,E,2,f),new a(E,w,1,f)):w[0]>E[0]&&b.push(new a(E,w,2,f),new a(w,E,1,f))}b.sort(l);for(var O=b[0].a[0]-(1+Math.abs(b[0].a[0]))*Math.pow(2,-52),C=[new n([O,1],[O,0],-1,[],[])],P=[],D=(f=0,b.length);f<D;++f){var U=b[f],I=U.type;I===0?h(P,C,v,U.a,U.idx):I===2?x(C,0,U):d(C,0,U)}return P}},5542:function(p,s,t){var i=t(2478);function r(l,u){this.stars=l,this.edges=u}p.exports=function(l,u){for(var h=new Array(l),c=0;c<l;++c)h[c]=[];return new r(h,u)};var n=r.prototype;function a(l,u,h){for(var c=1,x=l.length;c<x;c+=2)if(l[c-1]===u&&l[c]===h)return l[c-1]=l[x-2],l[c]=l[x-1],void(l.length=x-2)}n.isConstraint=function(){var l=[0,0];function u(h,c){return h[0]-c[0]||h[1]-c[1]}return function(h,c){return l[0]=Math.min(h,c),l[1]=Math.max(h,c),i.eq(this.edges,l,u)>=0}}(),n.removeTriangle=function(l,u,h){var c=this.stars;a(c[l],u,h),a(c[u],h,l),a(c[h],l,u)},n.addTriangle=function(l,u,h){var c=this.stars;c[l].push(u,h),c[u].push(h,l),c[h].push(l,u)},n.opposite=function(l,u){for(var h=this.stars[u],c=1,x=h.length;c<x;c+=2)if(h[c]===l)return h[c-1];return-1},n.flip=function(l,u){var h=this.opposite(l,u),c=this.opposite(u,l);this.removeTriangle(l,u,h),this.removeTriangle(u,l,c),this.addTriangle(l,c,h),this.addTriangle(u,h,c)},n.edges=function(){for(var l=this.stars,u=[],h=0,c=l.length;h<c;++h)for(var x=l[h],d=0,v=x.length;d<v;d+=2)u.push([x[d],x[d+1]]);return u},n.cells=function(){for(var l=this.stars,u=[],h=0,c=l.length;h<c;++h)for(var x=l[h],d=0,v=x.length;d<v;d+=2){var g=x[d],y=x[d+1];h<Math.min(g,y)&&u.push([h,g,y])}return u}},2419:function(p){p.exports=function(s){for(var t=1,i=1;i<s.length;++i)for(var r=0;r<i;++r)if(s[i]<s[r])t=-t;else if(s[r]===s[i])return 0;return t}},3628:function(p,s,t){var i=t(1338),r=t(727);function n(u,h){for(var c=0,x=u.length,d=0;d<x;++d)c+=u[d]*h[d];return c}function a(u){var h=u.length;if(h===0)return[];u[0].length;var c=i([u.length+1,u.length+1],1),x=i([u.length+1],1);c[h][h]=0;for(var d=0;d<h;++d){for(var v=0;v<=d;++v)c[v][d]=c[d][v]=2*n(u[d],u[v]);x[d]=n(u[d],u[d])}var g=r(c,x),y=0,m=g[h+1];for(d=0;d<m.length;++d)y+=m[d];var b=new Array(h);for(d=0;d<h;++d){m=g[d];var f=0;for(v=0;v<m.length;++v)f+=m[v];b[d]=f/y}return b}function l(u){if(u.length===0)return[];for(var h=u[0].length,c=i([h]),x=a(u),d=0;d<u.length;++d)for(var v=0;v<h;++v)c[v]+=u[d][v]*x[d];return c}l.barycenetric=a,p.exports=l},6037:function(p,s,t){p.exports=function(r){for(var n=i(r),a=0,l=0;l<r.length;++l)for(var u=r[l],h=0;h<n.length;++h)a+=Math.pow(u[h]-n[h],2);return Math.sqrt(a/r.length)};var i=t(3628)},332:function(p,s,t){p.exports=function(S,w,E){var O;if(E){O=w;for(var C=new Array(w.length),P=0;P<w.length;++P){var D=w[P];C[P]=[D[0],D[1],E[P]]}w=C}for(var U=function(I,N,W){var F=g(I,[],v(I));return b(N,F,W),!!F}(S,w,!!E);f(S,w,!!E);)U=!0;if(E&&U)for(O.length=0,E.length=0,P=0;P<w.length;++P)D=w[P],O.push([D[0],D[1]]),E.push(D[2]);return U};var i=t(1755),r=t(6867),n=t(1125),a=t(7842),l=t(1318),u=t(946),h=t(5838),c=t(1278),x=t(3637);function d(S){var w=u(S);return[c(w,-1/0),c(w,1/0)]}function v(S){for(var w=new Array(S.length),E=0;E<S.length;++E){var O=S[E];w[E]=[c(O[0],-1/0),c(O[1],-1/0),c(O[0],1/0),c(O[1],1/0)]}return w}function g(S,w,E){for(var O=w.length,C=new i(O),P=[],D=0;D<w.length;++D){var U=w[D],I=d(U[0]),N=d(U[1]);P.push([c(I[0],-1/0),c(N[0],-1/0),c(I[1],1/0),c(N[1],1/0)])}r(P,function(te,Q){C.link(te,Q)});var W=!0,F=new Array(O);for(D=0;D<O;++D)(H=C.find(D))!==D&&(W=!1,S[H]=[Math.min(S[D][0],S[H][0]),Math.min(S[D][1],S[H][1])]);if(W)return null;var j=0;for(D=0;D<O;++D){var H;(H=C.find(D))===D?(F[D]=j,S[j++]=S[D]):F[D]=-1}for(S.length=j,D=0;D<O;++D)F[D]<0&&(F[D]=F[C.find(D)]);return F}function y(S,w){return S[0]-w[0]||S[1]-w[1]}function m(S,w){return S[0]-w[0]||S[1]-w[1]||(S[2]<w[2]?-1:S[2]>w[2]?1:0)}function b(S,w,E){if(S.length!==0){if(w)for(var O=0;O<S.length;++O){var C=w[(D=S[O])[0]],P=w[D[1]];D[0]=Math.min(C,P),D[1]=Math.max(C,P)}else for(O=0;O<S.length;++O){var D;C=(D=S[O])[0],P=D[1],D[0]=Math.min(C,P),D[1]=Math.max(C,P)}E?S.sort(m):S.sort(y);var U=1;for(O=1;O<S.length;++O){var I=S[O-1],N=S[O];(N[0]!==I[0]||N[1]!==I[1]||E&&N[2]!==I[2])&&(S[U++]=N)}S.length=U}}function f(S,w,E){var O=function(I,N){for(var W=new Array(N.length),F=0;F<N.length;++F){var j=N[F],H=I[j[0]],te=I[j[1]];W[F]=[c(Math.min(H[0],te[0]),-1/0),c(Math.min(H[1],te[1]),-1/0),c(Math.max(H[0],te[0]),1/0),c(Math.max(H[1],te[1]),1/0)]}return W}(S,w),C=function(I,N,W){var F=[];return r(W,function(j,H){var te=N[j],Q=N[H];if(te[0]!==Q[0]&&te[0]!==Q[1]&&te[1]!==Q[0]&&te[1]!==Q[1]){var $=I[te[0]],K=I[te[1]],X=I[Q[0]],Y=I[Q[1]];n($,K,X,Y)&&F.push([j,H])}}),F}(S,w,O),P=function(I,N,W,F){var j=[];return r(W,F,function(H,te){var Q=N[H];if(Q[0]!==te&&Q[1]!==te){var $=I[te],K=I[Q[0]],X=I[Q[1]];n(K,X,$,$)&&j.push([H,te])}}),j}(S,w,O,v(S)),D=function(I,N,W,F,j){var H,te,Q=I.map(function(oe){return[a(oe[0]),a(oe[1])]});for(H=0;H<W.length;++H){var $=W[H];te=$[0];var K=$[1],X=N[te],Y=N[K],re=x(h(I[X[0]]),h(I[X[1]]),h(I[Y[0]]),h(I[Y[1]]));if(re){var se=I.length;I.push([u(re[0]),u(re[1])]),Q.push(re),F.push([te,se],[K,se])}}for(F.sort(function(oe,ie){if(oe[0]!==ie[0])return oe[0]-ie[0];var de=Q[oe[1]],Se=Q[ie[1]];return l(de[0],Se[0])||l(de[1],Se[1])}),H=F.length-1;H>=0;--H){var ae=N[te=(Pe=F[H])[0]],ce=ae[0],fe=ae[1],he=I[ce],ve=I[fe];if((he[0]-ve[0]||he[1]-ve[1])<0){var ye=ce;ce=fe,fe=ye}ae[0]=ce;var me,Me=ae[1]=Pe[1];for(j&&(me=ae[2]);H>0&&F[H-1][0]===te;){var Pe,ge=(Pe=F[--H])[1];j?N.push([Me,ge,me]):N.push([Me,ge]),Me=ge}j?N.push([Me,fe,me]):N.push([Me,fe])}return Q}(S,w,C,P,E),U=g(S,D);return b(w,U,E),!!U||C.length>0||P.length>0}},3637:function(p,s,t){p.exports=function(x,d,v,g){var y=l(d,x),m=l(g,v),b=c(y,m);if(a(b)===0)return null;var f=c(m,l(x,v)),S=r(f,b),w=h(y,S);return u(x,w)};var i=t(6504),r=t(8697),n=t(5572),a=t(7721),l=t(544),u=t(2653),h=t(8987);function c(x,d){return n(i(x[0],d[1]),i(x[1],d[0]))}},3642:function(p){p.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(p,s,t){var i=t(3642),r=t(395);function n(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function a(u){for(var h,c="#",x=0;x<3;++x)c+=("00"+(h=(h=u[x]).toString(16))).substr(h.length);return c}function l(u){return"rgba("+u.join(",")+")"}p.exports=function(u){var h,c,x,d,v,g,y,m,b,f;if(u||(u={}),m=(u.nshades||72)-1,y=u.format||"hex",(g=u.colormap)||(g="jet"),typeof g=="string"){if(g=g.toLowerCase(),!i[g])throw Error(g+" not a supported colorscale");v=i[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);v=g.slice()}if(v.length>m+1)throw new Error(g+" map requires nshades to be at least size "+v.length);b=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],h=v.map(function(C){return Math.round(C.index*m)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var S=v.map(function(C,P){var D=v[P].index,U=v[P].rgb.slice();return U.length===4&&U[3]>=0&&U[3]<=1||(U[3]=b[0]+(b[1]-b[0])*D),U}),w=[];for(f=0;f<h.length-1;++f){d=h[f+1]-h[f],c=S[f],x=S[f+1];for(var E=0;E<d;E++){var O=E/d;w.push([Math.round(r(c[0],x[0],O)),Math.round(r(c[1],x[1],O)),Math.round(r(c[2],x[2],O)),r(c[3],x[3],O)])}}return w.push(v[v.length-1].rgb.concat(b[1])),y==="hex"?w=w.map(a):y==="rgbaString"?w=w.map(l):y==="float"&&(w=w.map(n)),w}},3140:function(p,s,t){p.exports=function(h,c,x,d){var v=i(c,x,d);if(v===0){var g=r(i(h,c,x)),y=r(i(h,c,d));if(g===y){if(g===0){var m=u(h,c,x);return m===u(h,c,d)?0:m?1:-1}return 0}return y===0?g>0||u(h,c,d)?-1:1:g===0?y>0||u(h,c,x)?1:-1:r(y-g)}var b=i(h,c,x);return b>0?v>0&&i(h,c,d)>0?1:-1:b<0?v>0||i(h,c,d)>0?1:-1:i(h,c,d)>0||u(h,c,x)?1:-1};var i=t(3250),r=t(8572),n=t(9362),a=t(5382),l=t(8210);function u(h,c,x){var d=n(h[0],-c[0]),v=n(h[1],-c[1]),g=n(x[0],-c[0]),y=n(x[1],-c[1]),m=l(a(d,g),a(v,y));return m[m.length-1]>=0}},8572:function(p){p.exports=function(s){return s<0?-1:s>0?1:0}},8507:function(p){p.exports=function(i,r){var n=i.length,a=i.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return i[0]+i[1]-r[0]-r[1]||s(i[0],i[1])-s(r[0],r[1]);case 3:var l=i[0]+i[1],u=r[0]+r[1];if(a=l+i[2]-(u+r[2]))return a;var h=s(i[0],i[1]),c=s(r[0],r[1]);return s(h,i[2])-s(c,r[2])||s(h+i[2],l)-s(c+r[2],u);case 4:var x=i[0],d=i[1],v=i[2],g=i[3],y=r[0],m=r[1],b=r[2],f=r[3];return x+d+v+g-(y+m+b+f)||s(x,d,v,g)-s(y,m,b,f,y)||s(x+d,x+v,x+g,d+v,d+g,v+g)-s(y+m,y+b,y+f,m+b,m+f,b+f)||s(x+d+v,x+d+g,x+v+g,d+v+g)-s(y+m+b,y+m+f,y+b+f,m+b+f);default:for(var S=i.slice().sort(t),w=r.slice().sort(t),E=0;E<n;++E)if(a=S[E]-w[E])return a;return 0}};var s=Math.min;function t(i,r){return i-r}},3788:function(p,s,t){var i=t(8507),r=t(2419);p.exports=function(n,a){return i(n,a)||r(n)-r(a)}},7352:function(p,s,t){var i=t(5721),r=t(4750),n=t(2690);p.exports=function(a){var l=a.length;if(l===0)return[];if(l===1)return[[0]];var u=a[0].length;return u===0?[]:u===1?i(a):u===2?r(a):n(a,u)}},5721:function(p){p.exports=function(s){for(var t=0,i=0,r=1;r<s.length;++r)s[r][0]<s[t][0]&&(t=r),s[r][0]>s[i][0]&&(i=r);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},4750:function(p,s,t){p.exports=function(r){var n=i(r),a=n.length;if(a<=2)return[];for(var l=new Array(a),u=n[a-1],h=0;h<a;++h){var c=n[h];l[h]=[u,c],u=c}return l};var i=t(3090)},2690:function(p,s,t){p.exports=function(n,a){try{return i(n,!0)}catch{var l=r(n);if(l.length<=a)return[];var u=function(c,x){for(var d=c.length,v=new Array(d),g=0;g<x.length;++g)v[g]=c[x[g]];var y=x.length;for(g=0;g<d;++g)x.indexOf(g)<0&&(v[y++]=c[g]);return v}(n,l);return function(c,x){for(var d=c.length,v=x.length,g=0;g<d;++g)for(var y=c[g],m=0;m<y.length;++m){var b=y[m];if(b<v)y[m]=x[b];else{b-=v;for(var f=0;f<v;++f)b>=x[f]&&(b+=1);y[m]=b}}return c}(i(u,!0),l)}};var i=t(8954),r=t(3952)},4769:function(p){p.exports=function(s,t,i,r,n,a){var l=n-1,u=n*n,h=l*l,c=(1+2*n)*h,x=n*h,d=u*(3-2*n),v=u*l;if(s.length){a||(a=new Array(s.length));for(var g=s.length-1;g>=0;--g)a[g]=c*s[g]+x*t[g]+d*i[g]+v*r[g];return a}return c*s+x*t+d*i+v*r},p.exports.derivative=function(s,t,i,r,n,a){var l=6*n*n-6*n,u=3*n*n-4*n+1,h=-6*n*n+6*n,c=3*n*n-2*n;if(s.length){a||(a=new Array(s.length));for(var x=s.length-1;x>=0;--x)a[x]=l*s[x]+u*t[x]+h*i[x]+c*r[x];return a}return l*s+u*t+h*i[x]+c*r}},7642:function(p,s,t){var i=t(8954),r=t(1682);function n(l,u){this.point=l,this.index=u}function a(l,u){for(var h=l.point,c=u.point,x=h.length,d=0;d<x;++d){var v=c[d]-h[d];if(v)return v}return 0}p.exports=function(l,u){var h=l.length;if(h===0)return[];var c=l[0].length;if(c<1)return[];if(c===1)return function(D,U,I){if(D===1)return I?[[-1,0]]:[];var N=U.map(function(te,Q){return[te[0],Q]});N.sort(function(te,Q){return te[0]-Q[0]});for(var W=new Array(D-1),F=1;F<D;++F){var j=N[F-1],H=N[F];W[F-1]=[j[1],H[1]]}return I&&W.push([-1,W[0][1]],[W[D-1][1],-1]),W}(h,l,u);for(var x=new Array(h),d=1,v=0;v<h;++v){for(var g=l[v],y=new Array(c+1),m=0,b=0;b<c;++b){var f=g[b];y[b]=f,m+=f*f}y[c]=m,x[v]=new n(y,v),d=Math.max(m,d)}r(x,a),h=x.length;var S=new Array(h+c+1),w=new Array(h+c+1),E=(c+1)*(c+1)*d,O=new Array(c+1);for(v=0;v<=c;++v)O[v]=0;for(O[c]=E,S[0]=O.slice(),w[0]=-1,v=0;v<=c;++v)(y=O.slice())[v]=1,S[v+1]=y,w[v+1]=-1;for(v=0;v<h;++v){var C=x[v];S[v+c+1]=C.point,w[v+c+1]=C.index}var P=i(S,!1);if(P=u?P.filter(function(D){for(var U=0,I=0;I<=c;++I){var N=w[D[I]];if(N<0&&++U>=2)return!1;D[I]=N}return!0}):P.filter(function(D){for(var U=0;U<=c;++U){var I=w[D[U]];if(I<0)return!1;D[U]=I}return!0}),1&c)for(v=0;v<P.length;++v)y=(C=P[v])[0],C[0]=C[1],C[1]=y;return P}},2361:function(p){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,s=!0,i[1]===1072693248?(p.exports=function(n){return t[0]=n,[i[0],i[1]]},p.exports.pack=function(n,a){return i[0]=n,i[1]=a,t[0]},p.exports.lo=function(n){return t[0]=n,i[0]},p.exports.hi=function(n){return t[0]=n,i[1]}):i[0]===1072693248?(p.exports=function(n){return t[0]=n,[i[1],i[0]]},p.exports.pack=function(n,a){return i[1]=n,i[0]=a,t[0]},p.exports.lo=function(n){return t[0]=n,i[1]},p.exports.hi=function(n){return t[0]=n,i[0]}):s=!1}if(!s){var r=new Buffer(8);p.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},p.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},p.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},p.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}p.exports.sign=function(n){return p.exports.hi(n)>>>31},p.exports.exponent=function(n){return(p.exports.hi(n)<<1>>>21)-1023},p.exports.fraction=function(n){var a=p.exports.lo(n),l=p.exports.hi(n),u=1048575&l;return 2146435072&l&&(u+=1048576),[a,u]},p.exports.denormalized=function(n){return!(2146435072&p.exports.hi(n))}},1338:function(p){function s(t,i,r){var n=0|t[r];if(n<=0)return[];var a,l=new Array(n);if(r===t.length-1)for(a=0;a<n;++a)l[a]=i;else for(a=0;a<n;++a)l[a]=s(t,i,r+1);return l}p.exports=function(t,i){switch(i===void 0&&(i=0),typeof t){case"number":if(t>0)return function(r,n){var a,l;for(a=new Array(r),l=0;l<r;++l)a[l]=n;return a}(0|t,i);break;case"object":if(typeof t.length=="number")return s(t,i,0)}return[]}},3134:function(p,s,t){p.exports=function(r,n){var a=r.length;if(typeof n!="number"){n=0;for(var l=0;l<a;++l){var u=r[l];n=Math.max(n,u[0],u[1])}n=1+(0|n)}n|=0;var h=new Array(n);for(l=0;l<n;++l)h[l]=[];for(l=0;l<a;++l)h[(u=r[l])[0]].push(u[1]),h[u[1]].push(u[0]);for(var c=0;c<n;++c)i(h[c],function(x,d){return x-d});return h};var i=t(1682)},5033:function(p){p.exports=function(s,t,i){var r=t||0,n=i||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},9215:function(p,s,t){p.exports=function(h,c,x){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof h=="number"?new a(d=u(h),d,0):new a(h,u(h.length),0);case 2:var d;if(typeof c=="number")return new a(h,d=u(h.length),+c);x=0;case 3:if(h.length!==c.length)throw new Error("state and velocity lengths must match");return new a(h,c,x)}};var i=t(4769),r=t(2478);function n(h,c,x){return Math.min(c,Math.max(h,x))}function a(h,c,x){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=h.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[x],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var l=a.prototype;function u(h){for(var c=new Array(h),x=0;x<h;++x)c[x]=0;return c}l.flush=function(h){var c=r.gt(this._time,h)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},l.curve=function(h){var c=this._time,x=c.length,d=r.le(c,h),v=this._scratch[0],g=this._state,y=this._velocity,m=this.dimension,b=this.bounds;if(d<0)for(var f=m-1,S=0;S<m;++S,--f)v[S]=g[f];else if(d>=x-1){f=g.length-1;var w=h-c[x-1];for(S=0;S<m;++S,--f)v[S]=g[f]+w*y[f]}else{f=m*(d+1)-1;var E=c[d],O=c[d+1]-E||1,C=this._scratch[1],P=this._scratch[2],D=this._scratch[3],U=this._scratch[4],I=!0;for(S=0;S<m;++S,--f)C[S]=g[f],D[S]=y[f]*O,P[S]=g[f+m],U[S]=y[f+m]*O,I=I&&C[S]===P[S]&&D[S]===U[S]&&D[S]===0;if(I)for(S=0;S<m;++S)v[S]=C[S];else i(C,D,P,U,(h-E)/O,v)}var N=b[0],W=b[1];for(S=0;S<m;++S)v[S]=n(N[S],W[S],v[S]);return v},l.dcurve=function(h){var c=this._time,x=c.length,d=r.le(c,h),v=this._scratch[0],g=this._state,y=this._velocity,m=this.dimension;if(d>=x-1)for(var b=g.length-1,f=(c[x-1],0);f<m;++f,--b)v[f]=y[b];else{b=m*(d+1)-1;var S=c[d],w=c[d+1]-S||1,E=this._scratch[1],O=this._scratch[2],C=this._scratch[3],P=this._scratch[4],D=!0;for(f=0;f<m;++f,--b)E[f]=g[b],C[f]=y[b]*w,O[f]=g[b+m],P[f]=y[b+m]*w,D=D&&E[f]===O[f]&&C[f]===P[f]&&C[f]===0;if(D)for(f=0;f<m;++f)v[f]=0;else for(i.derivative(E,C,O,P,(h-S)/w,v),f=0;f<m;++f)v[f]/=w}return v},l.lastT=function(){var h=this._time;return h[h.length-1]},l.stable=function(){for(var h=this._velocity,c=h.length,x=this.dimension-1;x>=0;--x)if(h[--c])return!1;return!0},l.jump=function(h){var c=this.lastT(),x=this.dimension;if(!(h<c||arguments.length!==x+1)){var d=this._state,v=this._velocity,g=d.length-this.dimension,y=this.bounds,m=y[0],b=y[1];this._time.push(c,h);for(var f=0;f<2;++f)for(var S=0;S<x;++S)d.push(d[g++]),v.push(0);for(this._time.push(h),S=x;S>0;--S)d.push(n(m[S-1],b[S-1],arguments[S])),v.push(0)}},l.push=function(h){var c=this.lastT(),x=this.dimension;if(!(h<c||arguments.length!==x+1)){var d=this._state,v=this._velocity,g=d.length-this.dimension,y=h-c,m=this.bounds,b=m[0],f=m[1],S=y>1e-6?1/y:0;this._time.push(h);for(var w=x;w>0;--w){var E=n(b[w-1],f[w-1],arguments[w]);d.push(E),v.push((E-d[g++])*S)}}},l.set=function(h){var c=this.dimension;if(!(h<this.lastT()||arguments.length!==c+1)){var x=this._state,d=this._velocity,v=this.bounds,g=v[0],y=v[1];this._time.push(h);for(var m=c;m>0;--m)x.push(n(g[m-1],y[m-1],arguments[m])),d.push(0)}},l.move=function(h){var c=this.lastT(),x=this.dimension;if(!(h<=c||arguments.length!==x+1)){var d=this._state,v=this._velocity,g=d.length-this.dimension,y=this.bounds,m=y[0],b=y[1],f=h-c,S=f>1e-6?1/f:0;this._time.push(h);for(var w=x;w>0;--w){var E=arguments[w];d.push(n(m[w-1],b[w-1],d[g++]+E)),v.push(E*S)}}},l.idle=function(h){var c=this.lastT();if(!(h<c)){var x=this.dimension,d=this._state,v=this._velocity,g=d.length-x,y=this.bounds,m=y[0],b=y[1],f=h-c;this._time.push(h);for(var S=x-1;S>=0;--S)d.push(n(m[S],b[S],d[g]+f*v[g])),v.push(0),g+=1}}},3840:function(p){function s(g,y,m,b,f,S){this._color=g,this.key=y,this.value=m,this.left=b,this.right=f,this._count=S}function t(g){return new s(g._color,g.key,g.value,g.left,g.right,g._count)}function i(g,y){return new s(g,y.key,y.value,y.left,y.right,y._count)}function r(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function n(g,y){this._compare=g,this.root=y}p.exports=function(g){return new n(g||v,null)};var a=n.prototype;function l(g,y){var m;return y.left&&(m=l(g,y.left))?m:(m=g(y.key,y.value))||(y.right?l(g,y.right):void 0)}function u(g,y,m,b){if(y(g,b.key)<=0){var f;if(b.left&&(f=u(g,y,m,b.left))||(f=m(b.key,b.value)))return f}if(b.right)return u(g,y,m,b.right)}function h(g,y,m,b,f){var S,w=m(g,f.key),E=m(y,f.key);if(w<=0&&(f.left&&(S=h(g,y,m,b,f.left))||E>0&&(S=b(f.key,f.value))))return S;if(E>0&&f.right)return h(g,y,m,b,f.right)}function c(g,y){this.tree=g,this._stack=y}Object.defineProperty(a,"keys",{get:function(){var g=[];return this.forEach(function(y,m){g.push(y)}),g}}),Object.defineProperty(a,"values",{get:function(){var g=[];return this.forEach(function(y,m){g.push(m)}),g}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(g,y){for(var m=this._compare,b=this.root,f=[],S=[];b;){var w=m(g,b.key);f.push(b),S.push(w),b=w<=0?b.left:b.right}f.push(new s(0,g,y,null,null,1));for(var E=f.length-2;E>=0;--E)b=f[E],S[E]<=0?f[E]=new s(b._color,b.key,b.value,f[E+1],b.right,b._count+1):f[E]=new s(b._color,b.key,b.value,b.left,f[E+1],b._count+1);for(E=f.length-1;E>1;--E){var O=f[E-1];if(b=f[E],O._color===1||b._color===1)break;var C=f[E-2];if(C.left===O)if(O.left===b){if(!(P=C.right)||P._color!==0){C._color=0,C.left=O.right,O._color=1,O.right=C,f[E-2]=O,f[E-1]=b,r(C),r(O),E>=3&&((D=f[E-3]).left===C?D.left=O:D.right=O);break}O._color=1,C.right=i(1,P),C._color=0,E-=1}else{if(!(P=C.right)||P._color!==0){O.right=b.left,C._color=0,C.left=b.right,b._color=1,b.left=O,b.right=C,f[E-2]=b,f[E-1]=O,r(C),r(O),r(b),E>=3&&((D=f[E-3]).left===C?D.left=b:D.right=b);break}O._color=1,C.right=i(1,P),C._color=0,E-=1}else if(O.right===b){if(!(P=C.left)||P._color!==0){C._color=0,C.right=O.left,O._color=1,O.left=C,f[E-2]=O,f[E-1]=b,r(C),r(O),E>=3&&((D=f[E-3]).right===C?D.right=O:D.left=O);break}O._color=1,C.left=i(1,P),C._color=0,E-=1}else{var P;if(!(P=C.left)||P._color!==0){var D;O.left=b.right,C._color=0,C.right=b.left,b._color=1,b.right=O,b.left=C,f[E-2]=b,f[E-1]=O,r(C),r(O),r(b),E>=3&&((D=f[E-3]).right===C?D.right=b:D.left=b);break}O._color=1,C.left=i(1,P),C._color=0,E-=1}}return f[0]._color=1,new n(m,f[0])},a.forEach=function(g,y,m){if(this.root)switch(arguments.length){case 1:return l(g,this.root);case 2:return u(y,this._compare,g,this.root);case 3:return this._compare(y,m)>=0?void 0:h(y,m,this._compare,g,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var g=[],y=this.root;y;)g.push(y),y=y.left;return new c(this,g)}}),Object.defineProperty(a,"end",{get:function(){for(var g=[],y=this.root;y;)g.push(y),y=y.right;return new c(this,g)}}),a.at=function(g){if(g<0)return new c(this,[]);for(var y=this.root,m=[];;){if(m.push(y),y.left){if(g<y.left._count){y=y.left;continue}g-=y.left._count}if(!g)return new c(this,m);if(g-=1,!y.right||g>=y.right._count)break;y=y.right}return new c(this,[])},a.ge=function(g){for(var y=this._compare,m=this.root,b=[],f=0;m;){var S=y(g,m.key);b.push(m),S<=0&&(f=b.length),m=S<=0?m.left:m.right}return b.length=f,new c(this,b)},a.gt=function(g){for(var y=this._compare,m=this.root,b=[],f=0;m;){var S=y(g,m.key);b.push(m),S<0&&(f=b.length),m=S<0?m.left:m.right}return b.length=f,new c(this,b)},a.lt=function(g){for(var y=this._compare,m=this.root,b=[],f=0;m;){var S=y(g,m.key);b.push(m),S>0&&(f=b.length),m=S<=0?m.left:m.right}return b.length=f,new c(this,b)},a.le=function(g){for(var y=this._compare,m=this.root,b=[],f=0;m;){var S=y(g,m.key);b.push(m),S>=0&&(f=b.length),m=S<0?m.left:m.right}return b.length=f,new c(this,b)},a.find=function(g){for(var y=this._compare,m=this.root,b=[];m;){var f=y(g,m.key);if(b.push(m),f===0)return new c(this,b);m=f<=0?m.left:m.right}return new c(this,[])},a.remove=function(g){var y=this.find(g);return y?y.remove():this},a.get=function(g){for(var y=this._compare,m=this.root;m;){var b=y(g,m.key);if(b===0)return m.value;m=b<=0?m.left:m.right}};var x=c.prototype;function d(g,y){g.key=y.key,g.value=y.value,g.left=y.left,g.right=y.right,g._color=y._color,g._count=y._count}function v(g,y){return g<y?-1:g>y?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new c(this.tree,this._stack.slice())},x.remove=function(){var g=this._stack;if(g.length===0)return this.tree;var y=new Array(g.length),m=g[g.length-1];y[y.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var b=g.length-2;b>=0;--b)(m=g[b]).left===g[b+1]?y[b]=new s(m._color,m.key,m.value,y[b+1],m.right,m._count):y[b]=new s(m._color,m.key,m.value,m.left,y[b+1],m._count);if((m=y[y.length-1]).left&&m.right){var f=y.length;for(m=m.left;m.right;)y.push(m),m=m.right;var S=y[f-1];for(y.push(new s(m._color,S.key,S.value,m.left,m.right,m._count)),y[f-1].key=m.key,y[f-1].value=m.value,b=y.length-2;b>=f;--b)m=y[b],y[b]=new s(m._color,m.key,m.value,m.left,y[b+1],m._count);y[f-1].left=y[f]}if((m=y[y.length-1])._color===0){var w=y[y.length-2];for(w.left===m?w.left=null:w.right===m&&(w.right=null),y.pop(),b=0;b<y.length;++b)y[b]._count--;return new n(this.tree._compare,y[0])}if(m.left||m.right){for(m.left?d(m,m.left):m.right&&d(m,m.right),m._color=1,b=0;b<y.length-1;++b)y[b]._count--;return new n(this.tree._compare,y[0])}if(y.length===1)return new n(this.tree._compare,null);for(b=0;b<y.length;++b)y[b]._count--;var E=y[y.length-2];return function(O){for(var C,P,D,U,I=O.length-1;I>=0;--I){if(C=O[I],I===0)return void(C._color=1);if((P=O[I-1]).left===C){if((D=P.right).right&&D.right._color===0)return U=(D=P.right=t(D)).right=t(D.right),P.right=D.left,D.left=P,D.right=U,D._color=P._color,C._color=1,P._color=1,U._color=1,r(P),r(D),I>1&&((N=O[I-2]).left===P?N.left=D:N.right=D),void(O[I-1]=D);if(D.left&&D.left._color===0)return U=(D=P.right=t(D)).left=t(D.left),P.right=U.left,D.left=U.right,U.left=P,U.right=D,U._color=P._color,P._color=1,D._color=1,C._color=1,r(P),r(D),r(U),I>1&&((N=O[I-2]).left===P?N.left=U:N.right=U),void(O[I-1]=U);if(D._color===1){if(P._color===0)return P._color=1,void(P.right=i(0,D));P.right=i(0,D);continue}D=t(D),P.right=D.left,D.left=P,D._color=P._color,P._color=0,r(P),r(D),I>1&&((N=O[I-2]).left===P?N.left=D:N.right=D),O[I-1]=D,O[I]=P,I+1<O.length?O[I+1]=C:O.push(C),I+=2}else{if((D=P.left).left&&D.left._color===0)return U=(D=P.left=t(D)).left=t(D.left),P.left=D.right,D.right=P,D.left=U,D._color=P._color,C._color=1,P._color=1,U._color=1,r(P),r(D),I>1&&((N=O[I-2]).right===P?N.right=D:N.left=D),void(O[I-1]=D);if(D.right&&D.right._color===0)return U=(D=P.left=t(D)).right=t(D.right),P.left=U.right,D.right=U.left,U.right=P,U.left=D,U._color=P._color,P._color=1,D._color=1,C._color=1,r(P),r(D),r(U),I>1&&((N=O[I-2]).right===P?N.right=U:N.left=U),void(O[I-1]=U);if(D._color===1){if(P._color===0)return P._color=1,void(P.left=i(0,D));P.left=i(0,D);continue}var N;D=t(D),P.left=D.right,D.right=P,D._color=P._color,P._color=0,r(P),r(D),I>1&&((N=O[I-2]).right===P?N.right=D:N.left=D),O[I-1]=D,O[I]=P,I+1<O.length?O[I+1]=C:O.push(C),I+=2}}}(y),E.left===m?E.left=null:E.right=null,new n(this.tree._compare,y[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var g=0,y=this._stack;if(y.length===0){var m=this.tree.root;return m?m._count:0}y[y.length-1].left&&(g=y[y.length-1].left._count);for(var b=y.length-2;b>=0;--b)y[b+1]===y[b].right&&(++g,y[b].left&&(g+=y[b].left._count));return g},enumerable:!0}),x.next=function(){var g=this._stack;if(g.length!==0){var y=g[g.length-1];if(y.right)for(y=y.right;y;)g.push(y),y=y.left;else for(g.pop();g.length>0&&g[g.length-1].right===y;)y=g[g.length-1],g.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var g=this._stack;if(g.length===0)return!1;if(g[g.length-1].right)return!0;for(var y=g.length-1;y>0;--y)if(g[y-1].left===g[y])return!0;return!1}}),x.update=function(g){var y=this._stack;if(y.length===0)throw new Error("Can't update empty node!");var m=new Array(y.length),b=y[y.length-1];m[m.length-1]=new s(b._color,b.key,g,b.left,b.right,b._count);for(var f=y.length-2;f>=0;--f)(b=y[f]).left===y[f+1]?m[f]=new s(b._color,b.key,b.value,m[f+1],b.right,b._count):m[f]=new s(b._color,b.key,b.value,b.left,m[f+1],b._count);return new n(this.tree._compare,m[0])},x.prev=function(){var g=this._stack;if(g.length!==0){var y=g[g.length-1];if(y.left)for(y=y.left;y;)g.push(y),y=y.right;else for(g.pop();g.length>0&&g[g.length-1].left===y;)y=g[g.length-1],g.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var g=this._stack;if(g.length===0)return!1;if(g[g.length-1].left)return!0;for(var y=g.length-1;y>0;--y)if(g[y-1].right===g[y])return!0;return!1}})},3837:function(p,s,t){p.exports=function(C,P){var D=new v(C);return D.update(P),D};var i=t(4935),r=t(501),n=t(5304),a=t(6429),l=t(6444),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=ArrayBuffer,c=DataView;function x(C){return Array.isArray(C)||function(P){return h.isView(P)&&!(P instanceof c)}(C)}function d(C,P){return C[0]=P[0],C[1]=P[1],C[2]=P[2],C}function v(C){this.gl=C,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(C)}var g=v.prototype;function y(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}g.update=function(C){function P(Y,re,se){if(se in C){var ae,ce=C[se],fe=this[se];(Y?x(ce)&&x(ce[0]):x(ce))?this[se]=ae=[re(ce[0]),re(ce[1]),re(ce[2])]:this[se]=ae=[re(ce),re(ce),re(ce)];for(var he=0;he<3;++he)if(ae[he]!==fe[he])return!0}return!1}C=C||{};var D,U=P.bind(this,!1,Number),I=P.bind(this,!1,Boolean),N=P.bind(this,!1,String),W=P.bind(this,!0,function(Y){if(x(Y)){if(Y.length===3)return[+Y[0],+Y[1],+Y[2],1];if(Y.length===4)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),F=!1,j=!1;if("bounds"in C)for(var H=C.bounds,te=0;te<2;++te)for(var Q=0;Q<3;++Q)H[te][Q]!==this.bounds[te][Q]&&(j=!0),this.bounds[te][Q]=H[te][Q];if("ticks"in C)for(D=C.ticks,F=!0,this.autoTicks=!1,te=0;te<3;++te)this.tickSpacing[te]=0;else U("tickSpacing")&&(this.autoTicks=!0,j=!0);if(this._firstInit&&("ticks"in C||"tickSpacing"in C||(this.autoTicks=!0),j=!0,F=!0,this._firstInit=!1),j&&this.autoTicks&&(D=l.create(this.bounds,this.tickSpacing),F=!0),F){for(te=0;te<3;++te)D[te].sort(function(Y,re){return Y.x-re.x});l.equal(D,this.ticks)?F=!1:this.ticks=D}I("tickEnable"),N("tickFont")&&(F=!0),N("tickFontStyle")&&(F=!0),N("tickFontWeight")&&(F=!0),N("tickFontVariant")&&(F=!0),U("tickSize"),U("tickAngle"),U("tickPad"),W("tickColor");var $=N("labels");N("labelFont")&&($=!0),N("labelFontStyle")&&($=!0),N("labelFontWeight")&&($=!0),N("labelFontVariant")&&($=!0),I("labelEnable"),U("labelSize"),U("labelPad"),W("labelColor"),I("lineEnable"),I("lineMirror"),U("lineWidth"),W("lineColor"),I("lineTickEnable"),I("lineTickMirror"),U("lineTickLength"),U("lineTickWidth"),W("lineTickColor"),I("gridEnable"),U("gridWidth"),W("gridColor"),I("zeroEnable"),W("zeroLineColor"),U("zeroLineWidth"),I("backgroundEnable"),W("backgroundColor");var K=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],X=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&($||F)&&this._text.update(this.bounds,this.labels,K,this.ticks,X):this._text=i(this.gl,this.bounds,this.labels,K,this.ticks,X),this._lines&&F&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var m=[new y,new y,new y];function b(C,P,D,U,I){for(var N=C.primalOffset,W=C.primalMinor,F=C.mirrorOffset,j=C.mirrorMinor,H=U[P],te=0;te<3;++te)if(P!==te){var Q=N,$=F,K=W,X=j;H&1<<te&&(Q=F,$=N,K=j,X=W),Q[te]=D[0][te],$[te]=D[1][te],I[te]>0?(K[te]=-1,X[te]=0):(K[te]=0,X[te]=1)}}var f=[0,0,0],S={model:u,view:u,projection:u,_ortho:!1};g.isOpaque=function(){return!0},g.isTransparent=function(){return!1},g.drawTransparent=function(C){};var w=[0,0,0],E=[0,0,0],O=[0,0,0];g.draw=function(C){C=C||S;for(var P=this.gl,D=C.model||u,U=C.view||u,I=C.projection||u,N=this.bounds,W=C._ortho||!1,F=a(D,U,I,N,W),j=F.cubeEdges,H=F.axis,te=U[12],Q=U[13],$=U[14],K=U[15],X=(W?2:1)*this.pixelRatio*(I[3]*te+I[7]*Q+I[11]*$+I[15]*K)/P.drawingBufferHeight,Y=0;Y<3;++Y)this.lastCubeProps.cubeEdges[Y]=j[Y],this.lastCubeProps.axis[Y]=H[Y];var re=m;for(Y=0;Y<3;++Y)b(m[Y],Y,this.bounds,j,H);P=this.gl;var se,ae,ce,fe=f;for(Y=0;Y<3;++Y)this.backgroundEnable[Y]?fe[Y]=H[Y]:fe[Y]=0;for(this._background.draw(D,U,I,N,fe,this.backgroundColor),this._lines.bind(D,U,I,this),Y=0;Y<3;++Y){var he=[0,0,0];H[Y]>0?he[Y]=N[1][Y]:he[Y]=N[0][Y];for(var ve=0;ve<2;++ve){var ye=(Y+1+ve)%3,me=(Y+1+(1^ve))%3;this.gridEnable[ye]&&this._lines.drawGrid(ye,me,this.bounds,he,this.gridColor[ye],this.gridWidth[ye]*this.pixelRatio)}for(ve=0;ve<2;++ve)ye=(Y+1+ve)%3,me=(Y+1+(1^ve))%3,this.zeroEnable[me]&&Math.min(N[0][me],N[1][me])<=0&&Math.max(N[0][me],N[1][me])>=0&&this._lines.drawZero(ye,me,this.bounds,he,this.zeroLineColor[me],this.zeroLineWidth[me]*this.pixelRatio)}for(Y=0;Y<3;++Y){this.lineEnable[Y]&&this._lines.drawAxisLine(Y,this.bounds,re[Y].primalOffset,this.lineColor[Y],this.lineWidth[Y]*this.pixelRatio),this.lineMirror[Y]&&this._lines.drawAxisLine(Y,this.bounds,re[Y].mirrorOffset,this.lineColor[Y],this.lineWidth[Y]*this.pixelRatio);var Me=d(w,re[Y].primalMinor),Pe=d(E,re[Y].mirrorMinor),ge=this.lineTickLength;for(ve=0;ve<3;++ve){var oe=X/D[5*ve];Me[ve]*=ge[ve]*oe,Pe[ve]*=ge[ve]*oe}this.lineTickEnable[Y]&&this._lines.drawAxisTicks(Y,re[Y].primalOffset,Me,this.lineTickColor[Y],this.lineTickWidth[Y]*this.pixelRatio),this.lineTickMirror[Y]&&this._lines.drawAxisTicks(Y,re[Y].mirrorOffset,Pe,this.lineTickColor[Y],this.lineTickWidth[Y]*this.pixelRatio)}function ie(Oe){(ce=[0,0,0])[Oe]=1}function de(Oe,ze,pe){var be=(Oe+1)%3,ke=(Oe+2)%3,Ie=ze[be],Ee=ze[ke],Be=pe[be],Ve=pe[ke];Ie>0&&Ve>0||Ie>0&&Ve<0||Ie<0&&Ve>0||Ie<0&&Ve<0?ie(be):(Ee>0&&Be>0||Ee>0&&Be<0||Ee<0&&Be>0||Ee<0&&Be<0)&&ie(ke)}for(this._lines.unbind(),this._text.bind(D,U,I,this.pixelRatio),Y=0;Y<3;++Y){var Se=re[Y].primalMinor,_e=re[Y].mirrorMinor,we=d(O,re[Y].primalOffset);for(ve=0;ve<3;++ve)this.lineTickEnable[Y]&&(we[ve]+=X*Se[ve]*Math.max(this.lineTickLength[ve],0)/D[5*ve]);var Ae=[0,0,0];if(Ae[Y]=1,this.tickEnable[Y]){for(this.tickAngle[Y]===-3600?(this.tickAngle[Y]=0,this.tickAlign[Y]="auto"):this.tickAlign[Y]=-1,ae=1,(se=[this.tickAlign[Y],.5,ae])[0]==="auto"?se[0]=0:se[0]=parseInt(""+se[0]),ce=[0,0,0],de(Y,Se,_e),ve=0;ve<3;++ve)we[ve]+=X*Se[ve]*this.tickPad[ve]/D[5*ve];this._text.drawTicks(Y,this.tickSize[Y],this.tickAngle[Y],we,this.tickColor[Y],Ae,ce,se)}if(this.labelEnable[Y]){for(ae=0,ce=[0,0,0],this.labels[Y].length>4&&(ie(Y),ae=1),(se=[this.labelAlign[Y],.5,ae])[0]==="auto"?se[0]=0:se[0]=parseInt(""+se[0]),ve=0;ve<3;++ve)we[ve]+=X*Se[ve]*this.labelPad[ve]/D[5*ve];we[Y]+=.5*(N[0][Y]+N[1][Y]),this._text.drawLabel(Y,this.labelSize[Y],this.labelAngle[Y],we,this.labelColor[Y],[0,0,0],ce,se)}}this._text.unbind()},g.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(p,s,t){p.exports=function(u){for(var h=[],c=[],x=0,d=0;d<3;++d)for(var v=(d+1)%3,g=(d+2)%3,y=[0,0,0],m=[0,0,0],b=-1;b<=1;b+=2){c.push(x,x+2,x+1,x+1,x+2,x+3),y[d]=b,m[d]=b;for(var f=-1;f<=1;f+=2){y[v]=f;for(var S=-1;S<=1;S+=2)y[g]=S,h.push(y[0],y[1],y[2],m[0],m[1],m[2]),x+=1}var w=v;v=g,g=w}var E=i(u,new Float32Array(h)),O=i(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),C=r(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],O),P=n(u);return P.attributes.position.location=0,P.attributes.normal.location=1,new a(u,E,C,P)};var i=t(2762),r=t(8116),n=t(1879).bg;function a(u,h,c,x){this.gl=u,this.buffer=h,this.vao=c,this.shader=x}var l=a.prototype;l.draw=function(u,h,c,x,d,v){for(var g=!1,y=0;y<3;++y)g=g||d[y];if(g){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:h,projection:c,bounds:x,enable:d,colors:v},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(p,s,t){p.exports=function(f,S,w,E,O){r(l,S,f),r(l,w,l);for(var C=0,P=0;P<2;++P){c[2]=E[P][2];for(var D=0;D<2;++D){c[1]=E[D][1];for(var U=0;U<2;++U)c[0]=E[U][0],d(u[C],c,l),C+=1}}var I=-1;for(P=0;P<8;++P){for(var N=u[P][3],W=0;W<3;++W)h[P][W]=u[P][W]/N;O&&(h[P][2]*=-1),N<0&&(I<0||h[P][2]<h[I][2])&&(I=P)}if(I<0){I=0;for(var F=0;F<3;++F){for(var j=(F+2)%3,H=(F+1)%3,te=-1,Q=-1,$=0;$<2;++$){var K=(Y=$<<F)+($<<j)+(1-$<<H),X=Y+(1-$<<j)+($<<H);a(h[Y],h[K],h[X],x)<0||($?te=1:Q=1)}if(te<0||Q<0)Q>te&&(I|=1<<F);else{for($=0;$<2;++$){K=(Y=$<<F)+($<<j)+(1-$<<H),X=Y+(1-$<<j)+($<<H);var Y,re=g([u[Y],u[K],u[X],u[Y+(1<<j)+(1<<H)]]);$?te=re:Q=re}Q>te&&(I|=1<<F)}}}var se=7^I,ae=-1;for(P=0;P<8;++P)P!==I&&P!==se&&(ae<0||h[ae][1]>h[P][1])&&(ae=P);var ce=-1;for(P=0;P<3;++P)(he=ae^1<<P)!==I&&he!==se&&(ce<0&&(ce=he),(H=h[he])[0]<h[ce][0]&&(ce=he));var fe=-1;for(P=0;P<3;++P){var he;(he=ae^1<<P)!==I&&he!==se&&he!==ce&&(fe<0&&(fe=he),(H=h[he])[0]>h[fe][0]&&(fe=he))}var ve=y;ve[0]=ve[1]=ve[2]=0,ve[i.log2(ce^ae)]=ae&ce,ve[i.log2(ae^fe)]=ae&fe;var ye=7^fe;ye===I||ye===se?(ye=7^ce,ve[i.log2(fe^ye)]=ye&fe):ve[i.log2(ce^ye)]=ye&ce;var me=m,Me=I;for(F=0;F<3;++F)me[F]=Me&1<<F?-1:1;return b};var i=t(8828),r=t(6760),n=t(5202),a=t(3250),l=new Array(16),u=new Array(8),h=new Array(8),c=new Array(3),x=[0,0,0];function d(f,S,w){for(var E=0;E<4;++E){f[E]=w[12+E];for(var O=0;O<3;++O)f[E]+=S[O]*w[4*O+E]}}(function(){for(var f=0;f<8;++f)u[f]=[1,1,1,1],h[f]=[1,1,1]})();var v=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(f){for(var S=0;S<v.length;++S)if((f=n.positive(f,v[S])).length<3)return 0;var w=f[0],E=w[0]/w[3],O=w[1]/w[3],C=0;for(S=1;S+1<f.length;++S){var P=f[S],D=f[S+1],U=P[0]/P[3]-E,I=P[1]/P[3]-O,N=D[0]/D[3]-E,W=D[1]/D[3]-O;C+=Math.abs(U*W-I*N)}return C}var y=[1,1,1],m=[0,0,0],b={cubeEdges:y,axis:m}},501:function(p,s,t){p.exports=function(y,m,b){var f=[],S=[0,0,0],w=[0,0,0],E=[0,0,0],O=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var P=f.length/3|0,D=0;D<b[C].length;++D){var U=+b[C][D].x;f.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var I=f.length/3|0;S[C]=P,w[C]=I-P,P=f.length/3|0;for(var N=0;N<b[C].length;++N)U=+b[C][N].x,f.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);I=f.length/3|0,E[C]=P,O[C]=I-P}var W=i(y,new Float32Array(f)),F=r(y,[{buffer:W,type:y.FLOAT,size:3,stride:0,offset:0}]),j=n(y);return j.attributes.position.location=0,new v(y,W,F,j,w,S,O,E)};var i=t(2762),r=t(8116),n=t(1879).n,a=[0,0,0],l=[0,0,0],u=[0,0,0],h=[0,0,0],c=[1,1];function x(y){return y[0]=y[1]=y[2]=0,y}function d(y,m){return y[0]=m[0],y[1]=m[1],y[2]=m[2],y}function v(y,m,b,f,S,w,E,O){this.gl=y,this.vertBuffer=m,this.vao=b,this.shader=f,this.tickCount=S,this.tickOffset=w,this.gridCount=E,this.gridOffset=O}var g=v.prototype;g.bind=function(y,m,b){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=m,this.shader.uniforms.projection=b,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(y,m,b,f,S){var w=x(l);this.shader.uniforms.majorAxis=l,w[y]=m[1][y]-m[0][y],this.shader.uniforms.minorAxis=w;var E,O=d(h,b);O[y]+=m[0][y],this.shader.uniforms.offset=O,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=f,(E=x(u))[(y+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(u))[(y+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(y,m,b,f,S){if(this.tickCount[y]){var w=x(a);w[y]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=S;var E=x(u);E[y]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},g.drawGrid=function(y,m,b,f,S,w){if(this.gridCount[y]){var E=x(l);E[m]=b[1][m]-b[0][m],this.shader.uniforms.minorAxis=E;var O=d(h,f);O[m]+=b[0][m],this.shader.uniforms.offset=O;var C=x(a);C[y]=1,this.shader.uniforms.majorAxis=C;var P=x(u);P[y]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},g.drawZero=function(y,m,b,f,S,w){var E=x(l);this.shader.uniforms.majorAxis=E,E[y]=b[1][y]-b[0][y],this.shader.uniforms.minorAxis=E;var O=d(h,f);O[y]+=b[0][y],this.shader.uniforms.offset=O;var C=x(u);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(p,s,t){var i=t(3236),r=t(9405),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.n=function(x){return r(x,n,a,null,[{name:"position",type:"vec3"}])};var l=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.Q=function(x){return r(x,l,u,null,[{name:"position",type:"vec3"}])};var h=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(x){return r(x,h,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(p,s,t){p.exports=function(d,v,g,y,m,b){var f=i(d),S=r(d,[{buffer:f,size:3}]),w=a(d);w.attributes.position.location=0;var E=new h(d,w,f,S);return E.update(v,g,y,m,b),E};var i=t(2762),r=t(8116),n=t(4359),a=t(1879).Q,l=window||M.global||{},u=l.__TEXT_CACHE||{};function h(d,v,g,y){this.gl=d,this.shader=v,this.buffer=g,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var c=h.prototype,x=[0,0];c.bind=function(d,v,g,y){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=d,m.view=v,m.projection=g,m.pixelScale=y,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},c.unbind=function(){this.vao.unbind()},c.update=function(d,v,g,y,m){var b=[];function f(I,N,W,F,j,H){var te=[W.style,W.weight,W.variant,W.family].join("_"),Q=u[te];Q||(Q=u[te]={});var $=Q[N];$||($=Q[N]=function(he,ve){try{return n(he,ve)}catch(ye){return console.warn('error vectorizing text:"'+he+'" error:',ye),{cells:[],positions:[]}}}(N,{triangles:!0,font:W.family,fontStyle:W.style,fontWeight:W.weight,fontVariant:W.variant,textAlign:"center",textBaseline:"middle",lineSpacing:j,styletags:H}));for(var K=(F||12)/12,X=$.positions,Y=$.cells,re=0,se=Y.length;re<se;++re)for(var ae=Y[re],ce=2;ce>=0;--ce){var fe=X[ae[ce]];b.push(K*fe[0],-K*fe[1],I)}}for(var S=[0,0,0],w=[0,0,0],E=[0,0,0],O=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=b.length/3|0,f(.5*(d[0][P]+d[1][P]),v[P],g[P],12,1.25,C),O[P]=(b.length/3|0)-E[P],S[P]=b.length/3|0;for(var D=0;D<y[P].length;++D)if(y[P][D].text){var U={family:y[P][D].font||m[P].family,style:m[P].fontStyle||m[P].style,weight:m[P].fontWeight||m[P].weight,variant:m[P].fontVariant||m[P].variant};f(y[P][D].x,y[P][D].text,U,y[P][D].fontSize||12,1.25,C)}w[P]=(b.length/3|0)-S[P]}this.buffer.update(b),this.tickOffset=S,this.tickCount=w,this.labelOffset=E,this.labelCount=O},c.drawTicks=function(d,v,g,y,m,b,f,S){this.tickCount[d]&&(this.shader.uniforms.axis=b,this.shader.uniforms.color=m,this.shader.uniforms.angle=g,this.shader.uniforms.scale=v,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))},c.drawLabel=function(d,v,g,y,m,b,f,S){this.labelCount[d]&&(this.shader.uniforms.axis=b,this.shader.uniforms.color=m,this.shader.uniforms.angle=g,this.shader.uniforms.scale=v,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(p,s){function t(i,r){var n=i+"",a=n.indexOf("."),l=0;a>=0&&(l=n.length-a-1);var u=Math.pow(10,l),h=Math.round(i*r*u),c=h+"";if(c.indexOf("e")>=0)return c;var x=h/u,d=h%u;h<0?(x=0|-Math.ceil(x),d=0|-d):(x=0|Math.floor(x),d|=0);var v=""+x;if(h<0&&(v="-"+v),l){for(var g=""+d;g.length<l;)g="0"+g;return v+"."+g}return v}s.create=function(i,r){for(var n=[],a=0;a<3;++a){for(var l=[],u=(i[0][a],i[1][a],0);u*r[a]<=i[1][a];++u)l.push({x:u*r[a],text:t(r[a],u)});for(u=-1;u*r[a]>=i[0][a];--u)l.push({x:u*r[a],text:t(r[a],u)});n.push(l)}return n},s.equal=function(i,r){for(var n=0;n<3;++n){if(i[n].length!==r[n].length)return!1;for(var a=0;a<i[n].length;++a){var l=i[n][a],u=r[n][a];if(l.x!==u.x||l.text!==u.text||l.font!==u.font||l.fontColor!==u.fontColor||l.fontSize!==u.fontSize||l.dx!==u.dx||l.dy!==u.dy)return!1}}return!0}},5445:function(p,s,t){p.exports=function(b,f,S,w,E){var O=f.model||h,C=f.view||h,P=f.projection||h,D=f._ortho||!1,U=b.bounds,I=(E=E||n(O,C,P,U,D)).axis;a(c,C,O),a(c,P,c);for(var N=y,W=0;W<3;++W)N[W].lo=1/0,N[W].hi=-1/0,N[W].pixelsPerDataUnit=1/0;var F=i(l(c,c));l(c,c);for(var j=0;j<3;++j){var H=(j+1)%3,te=(j+2)%3,Q=m;e:for(W=0;W<2;++W){var $=[];if(I[j]<0!=!!W){Q[j]=U[W][j];for(var K=0;K<2;++K){Q[H]=U[K^W][H];for(var X=0;X<2;++X)Q[te]=U[X^K^W][te],$.push(Q.slice())}var Y=D?5:4;for(K=Y;K===Y;++K){if($.length===0)continue e;$=r.positive($,F[K])}for(K=0;K<$.length;++K){te=$[K];var re=g(m,c,te,S,w);for(X=0;X<3;++X)N[X].lo=Math.min(N[X].lo,te[X]),N[X].hi=Math.max(N[X].hi,te[X]),X!==j&&(N[X].pixelsPerDataUnit=Math.min(N[X].pixelsPerDataUnit,Math.abs(re[X])))}}}}return N};var i=t(5033),r=t(5202),n=t(6429),a=t(6760),l=t(5665),u=t(5352),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function x(b,f,S){this.lo=b,this.hi=f,this.pixelsPerDataUnit=S}var d=[0,0,0,1],v=[0,0,0,1];function g(b,f,S,w,E){for(var O=0;O<3;++O){for(var C=d,P=v,D=0;D<3;++D)P[D]=C[D]=S[D];P[3]=C[3]=1,P[O]+=1,u(P,P,f),P[3]<0&&(b[O]=1/0),C[O]-=1,u(C,C,f),C[3]<0&&(b[O]=1/0);var U=(C[0]/C[3]-P[0]/P[3])*w,I=(C[1]/C[3]-P[1]/P[3])*E;b[O]=.25*Math.sqrt(U*U+I*I)}return b}var y=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],m=[0,0,0]},2762:function(p,s,t){var i=t(1888),r=t(5298),n=t(9618),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(x,d,v,g,y){this.gl=x,this.type=d,this.handle=v,this.length=g,this.usage=y}var u=l.prototype;function h(x,d,v,g,y,m){var b=y.length*y.BYTES_PER_ELEMENT;if(m<0)return x.bufferData(d,y,g),b;if(b+m>v)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(d,m,y),v}function c(x,d){for(var v=i.malloc(x.length,d),g=x.length,y=0;y<g;++y)v[y]=x[y];return v}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(x,d){if(typeof d!="number"&&(d=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var v=x.dtype;if(a.indexOf(v)<0&&(v="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(v=gl.getExtension("OES_element_index_uint")&&v!=="uint16"?"uint32":"uint16"),v===x.dtype&&function(b,f){for(var S=1,w=f.length-1;w>=0;--w){if(f[w]!==S)return!1;S*=b[w]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=h(this.gl,this.type,this.length,this.usage,x.data,d):this.length=h(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),d);else{var g=i.malloc(x.size,v),y=n(g,x.shape);r.assign(y,x),this.length=h(this.gl,this.type,this.length,this.usage,d<0?g:g.subarray(0,x.size),d),i.free(g)}}else if(Array.isArray(x)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(x,"uint16"):c(x,"float32"),this.length=h(this.gl,this.type,this.length,this.usage,d<0?m:m.subarray(0,x.length),d),i.free(m)}else if(typeof x=="object"&&typeof x.length=="number")this.length=h(this.gl,this.type,this.length,this.usage,x,d);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(d>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},p.exports=function(x,d,v,g){if(v=v||x.ARRAY_BUFFER,g=g||x.DYNAMIC_DRAW,v!==x.ARRAY_BUFFER&&v!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==x.DYNAMIC_DRAW&&g!==x.STATIC_DRAW&&g!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=x.createBuffer(),m=new l(x,v,y,0,g);return m.update(d),m}},6405:function(p,s,t){var i=t(2931);p.exports=function(n,a){var l=n.positions,u=n.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var c=0,x=1/0,d=-1/0,v=1/0,g=-1/0,y=1/0,m=-1/0,b=null,f=null,S=[],w=1/0,E=!1,O=n.coneSizemode==="raw",C=0;C<l.length;C++){var P=l[C];x=Math.min(P[0],x),d=Math.max(P[0],d),v=Math.min(P[1],v),g=Math.max(P[1],g),y=Math.min(P[2],y),m=Math.max(P[2],m);var D=u[C];if(i.length(D)>c&&(c=i.length(D)),C&&!O){var U=2*i.distance(b,P)/(i.length(f)+i.length(D));U?(w=Math.min(w,U),E=!1):E=!0}E||(b=P,f=D),S.push(D)}var I=[x,v,y],N=[d,g,m];a&&(a[0]=I,a[1]=N),c===0&&(c=1);var W=1/c;isFinite(w)||(w=1),h.vectorScale=w;var F=n.coneSize||(O?1:.5);n.absoluteConeSize&&(F=n.absoluteConeSize*W),h.coneScale=F,C=0;for(var j=0;C<l.length;C++)for(var H=(P=l[C])[0],te=P[1],Q=P[2],$=S[C],K=i.length($)*W,X=0;X<8;X++){h.positions.push([H,te,Q,j++]),h.positions.push([H,te,Q,j++]),h.positions.push([H,te,Q,j++]),h.positions.push([H,te,Q,j++]),h.positions.push([H,te,Q,j++]),h.positions.push([H,te,Q,j++]),h.vectors.push($),h.vectors.push($),h.vectors.push($),h.vectors.push($),h.vectors.push($),h.vectors.push($),h.vertexIntensity.push(K,K,K),h.vertexIntensity.push(K,K,K);var Y=h.positions.length;h.cells.push([Y-6,Y-5,Y-4],[Y-3,Y-2,Y-1])}return h};var r=t(614);p.exports.createMesh=t(9060),p.exports.createConeMesh=function(n,a){return p.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},9060:function(p,s,t){var i=t(9405),r=t(2762),n=t(8116),a=t(7766),l=t(6760),u=t(7608),h=t(9618),c=t(6729),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(g,y,m,b,f,S,w,E,O,C,P){this.gl=g,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=y,this.dirty=!0,this.triShader=m,this.pickShader=b,this.trianglePositions=f,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=O,this.triangleIds=w,this.triangleVAO=C,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var v=d.prototype;v.isOpaque=function(){return this.opacity>=1},v.isTransparent=function(){return this.opacity<1},v.pickSlots=1,v.setPickBase=function(g){this.pickId=g},v.update=function(g){g=g||{};var y=this.gl;this.dirty=!0,"lightPosition"in g&&(this.lightPosition=g.lightPosition),"opacity"in g&&(this.opacity=g.opacity),"ambient"in g&&(this.ambientLight=g.ambient),"diffuse"in g&&(this.diffuseLight=g.diffuse),"specular"in g&&(this.specularLight=g.specular),"roughness"in g&&(this.roughness=g.roughness),"fresnel"in g&&(this.fresnel=g.fresnel),g.tubeScale!==void 0&&(this.tubeScale=g.tubeScale),g.vectorScale!==void 0&&(this.vectorScale=g.vectorScale),g.coneScale!==void 0&&(this.coneScale=g.coneScale),g.coneOffset!==void 0&&(this.coneOffset=g.coneOffset),g.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=y.LINEAR,this.texture.setPixels(function(re){for(var se=c({colormap:re,nshades:256,format:"rgba"}),ae=new Uint8Array(1024),ce=0;ce<256;++ce){for(var fe=se[ce],he=0;he<3;++he)ae[4*ce+he]=fe[he];ae[4*ce+3]=255*fe[3]}return h(ae,[256,256,4],[4,0,1])}(g.colormap)),this.texture.generateMipmap());var m=g.cells,b=g.positions,f=g.vectors;if(b&&m&&f){var S=[],w=[],E=[],O=[],C=[];this.cells=m,this.positions=b,this.vectors=f;var P=g.meshColor||[1,1,1,1],D=g.vertexIntensity,U=1/0,I=-1/0;if(D)if(g.vertexIntensityBounds)U=+g.vertexIntensityBounds[0],I=+g.vertexIntensityBounds[1];else for(var N=0;N<D.length;++N){var W=D[N];U=Math.min(U,W),I=Math.max(I,W)}else for(N=0;N<b.length;++N)W=b[N][2],U=Math.min(U,W),I=Math.max(I,W);for(this.intensity=D||function(re){for(var se=re.length,ae=new Array(se),ce=0;ce<se;++ce)ae[ce]=re[ce][2];return ae}(b),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<b.length;++N)for(var F=b[N],j=0;j<3;++j)!isNaN(F[j])&&isFinite(F[j])&&(this.bounds[0][j]=Math.min(this.bounds[0][j],F[j]),this.bounds[1][j]=Math.max(this.bounds[1][j],F[j]));var H=0;e:for(N=0;N<m.length;++N){var te=m[N];if(te.length===3){for(j=0;j<3;++j){F=b[$=te[j]];for(var Q=0;Q<3;++Q)if(isNaN(F[Q])||!isFinite(F[Q]))continue e}for(j=0;j<3;++j){var $;F=b[$=te[2-j]],S.push(F[0],F[1],F[2],F[3]);var K=f[$];w.push(K[0],K[1],K[2],K[3]||0);var X,Y=P;Y.length===3?E.push(Y[0],Y[1],Y[2],1):E.push(Y[0],Y[1],Y[2],Y[3]),X=D?[(D[$]-U)/(I-U),0]:[(F[2]-U)/(I-U),0],O.push(X[0],X[1]),C.push(N)}H+=1}}this.triangleCount=H,this.trianglePositions.update(S),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(C))}},v.drawTransparent=v.draw=function(g){g=g||{};for(var y=this.gl,m=g.model||x,b=g.view||x,f=g.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);var E={model:m,view:b,projection:f,inverseModel:x.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),y.disable(y.CULL_FACE),this.texture.bind(0);var O=new Array(16);for(l(O,E.view,E.model),l(O,E.projection,O),u(O,O),w=0;w<3;++w)E.eyePosition[w]=O[12+w]/O[15];var C=O[15];for(w=0;w<3;++w)C+=this.lightPosition[w]*O[4*w+3];for(w=0;w<3;++w){for(var P=O[12+w],D=0;D<3;++D)P+=O[4*D+w]*this.lightPosition[D];E.lightPosition[w]=P/C}if(this.triangleCount>0){var U=this.triShader;U.bind(),U.uniforms=E,this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},v.drawPick=function(g){g=g||{};for(var y=this.gl,m=g.model||x,b=g.view||x,f=g.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);this._model=[].slice.call(m),this._view=[].slice.call(b),this._projection=[].slice.call(f),this._resolution=[y.drawingBufferWidth,y.drawingBufferHeight];var E={model:m,view:b,projection:f,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},v.pick=function(g){if(!g||g.id!==this.pickId)return null;var y=g.value[0]+256*g.value[1]+65536*g.value[2],m=this.cells[y],b=this.positions[m[1]].slice(0,3),f={position:b,dataCoordinate:b,index:Math.floor(m[1]/48)};return this.traceType==="cone"?f.index=Math.floor(m[1]/48):this.traceType==="streamtube"&&(f.intensity=this.intensity[m[1]],f.velocity=this.vectors[m[1]].slice(0,3),f.divergence=this.vectors[m[1]][3],f.index=y),f},v.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},p.exports=function(g,y,m){var b=m.shaders;arguments.length===1&&(g=(y=g).gl);var f=function(I,N){var W=i(I,N.meshShader.vertex,N.meshShader.fragment,null,N.meshShader.attributes);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.vector.location=4,W}(g,b),S=function(I,N){var W=i(I,N.pickShader.vertex,N.pickShader.fragment,null,N.pickShader.attributes);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.vector.location=4,W}(g,b),w=a(g,h(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=g.LINEAR_MIPMAP_LINEAR,w.magFilter=g.LINEAR;var E=r(g),O=r(g),C=r(g),P=r(g),D=r(g),U=new d(g,w,f,S,E,O,D,C,P,n(g,[{buffer:E,type:g.FLOAT,size:4},{buffer:D,type:g.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:g.FLOAT,size:4},{buffer:P,type:g.FLOAT,size:2},{buffer:O,type:g.FLOAT,size:4}]),m.traceType||"cone");return U.update(y),U}},614:function(p,s,t){var i=t(3236),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(p){p.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(p,s,t){var i=t(737);p.exports=function(r){return i[r]}},9165:function(p,s,t){p.exports=function(d){var v=d.gl,g=i(v),y=r(v,[{buffer:g,type:v.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:v.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:v.FLOAT,size:3,offset:28,stride:40}]),m=n(v);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var b=new l(v,g,y,m);return b.update(d),b};var i=t(2762),r=t(8116),n=t(3436),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(d,v,g,y){this.gl=d,this.shader=y,this.buffer=v,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=l.prototype;function h(d,v){for(var g=0;g<3;++g)d[0][g]=Math.min(d[0][g],v[g]),d[1][g]=Math.max(d[1][g],v[g])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(d){var v=this.gl,g=this.shader.uniforms;this.shader.bind();var y=g.view=d.view||a,m=g.projection=d.projection||a;g.model=d.model||a,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var b=y[12],f=y[13],S=y[14],w=y[15],E=(d._ortho?2:1)*this.pixelRatio*(m[3]*b+m[7]*f+m[11]*S+m[15]*w)/v.drawingBufferHeight;this.vao.bind();for(var O=0;O<3;++O)v.lineWidth(this.lineWidth[O]*this.pixelRatio),g.capSize=this.capSize[O]*E,this.lineCount[O]&&v.drawArrays(v.LINES,this.lineOffset[O],this.lineCount[O]);this.vao.unbind()};var c=function(){for(var d=new Array(3),v=0;v<3;++v){for(var g=[],y=1;y<=2;++y)for(var m=-1;m<=1;m+=2){var b=[0,0,0];b[(y+v)%3]=m,g.push(b)}d[v]=g}return d}();function x(d,v,g,y){for(var m=c[y],b=0;b<m.length;++b){var f=m[b];d.push(v[0],v[1],v[2],g[0],g[1],g[2],g[3],f[0],f[1],f[2])}return m.length}u.update=function(d){"lineWidth"in(d=d||{})&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var v=d.color||[[0,0,0],[0,0,0],[0,0,0]],g=d.position,y=d.error;if(Array.isArray(v[0])||(v=[v,v,v]),g&&y){var m=[],b=g.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=f;e:for(var w=0;w<b;++w){for(var E=g[w],O=0;O<3;++O)if(isNaN(E[O])||!isFinite(E[O]))continue e;var C,P=y[w],D=v[S];Array.isArray(D[0])&&(D=v[w]),D.length===3?D=[D[0],D[1],D[2],1]:D.length===4&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),!isNaN(P[0][S])&&!isNaN(P[1][S])&&(P[0][S]<0&&((C=E.slice())[S]+=P[0][S],m.push(E[0],E[1],E[2],D[0],D[1],D[2],D[3],0,0,0,C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0),h(this.bounds,C),f+=2+x(m,C,D,S)),P[1][S]>0&&((C=E.slice())[S]+=P[1][S],m.push(E[0],E[1],E[2],D[0],D[1],D[2],D[3],0,0,0,C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0),h(this.bounds,C),f+=2+x(m,C,D,S)))}this.lineCount[S]=f-this.lineOffset[S]}this.buffer.update(m)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(p,s,t){var i=t(3236),r=t(9405),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);p.exports=function(l){return r(l,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(p,s,t){var i=t(7766);p.exports=function(b,f,S,w){r||(r=b.FRAMEBUFFER_UNSUPPORTED,n=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=b.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(N,W){var F=N.getParameter(W.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(F+1);for(var j=0;j<=F;++j){for(var H=new Array(F),te=0;te<j;++te)H[te]=N.COLOR_ATTACHMENT0+te;for(te=j;te<F;++te)H[te]=N.NONE;u[j]=H}}(b,E),Array.isArray(f)&&(w=S,S=0|f[1],f=0|f[0]),typeof f!="number")throw new Error("gl-fbo: Missing shape parameter");var O=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(f<0||f>O||S<0||S>O)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(w=w||{})){if((C=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>b.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var P=b.UNSIGNED_BYTE,D=b.getExtension("OES_texture_float");if(w.float&&C>0){if(!D)throw new Error("gl-fbo: Context does not support floating point textures");P=b.FLOAT}else w.preferFloat&&C>0&&D&&(P=b.FLOAT);var U=!0;"depth"in w&&(U=!!w.depth);var I=!1;return"stencil"in w&&(I=!!w.stencil),new g(b,f,S,P,C,U,I,E)};var r,n,a,l,u=null;function h(b){return[b.getParameter(b.FRAMEBUFFER_BINDING),b.getParameter(b.RENDERBUFFER_BINDING),b.getParameter(b.TEXTURE_BINDING_2D)]}function c(b,f){b.bindFramebuffer(b.FRAMEBUFFER,f[0]),b.bindRenderbuffer(b.RENDERBUFFER,f[1]),b.bindTexture(b.TEXTURE_2D,f[2])}function x(b){switch(b){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(b,f,S,w,E,O){if(!w)return null;var C=i(b,f,S,E,w);return C.magFilter=b.NEAREST,C.minFilter=b.NEAREST,C.mipSamples=1,C.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,O,b.TEXTURE_2D,C.handle,0),C}function v(b,f,S,w,E){var O=b.createRenderbuffer();return b.bindRenderbuffer(b.RENDERBUFFER,O),b.renderbufferStorage(b.RENDERBUFFER,w,f,S),b.framebufferRenderbuffer(b.FRAMEBUFFER,E,b.RENDERBUFFER,O),O}function g(b,f,S,w,E,O,C,P){this.gl=b,this._shape=[0|f,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var D=0;D<E;++D)this.color[D]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=O,this._useStencil=C;var U=this,I=[0|f,0|S];Object.defineProperties(I,{0:{get:function(){return U._shape[0]},set:function(N){return U.width=N}},1:{get:function(){return U._shape[1]},set:function(N){return U.height=N}}}),this._shapeVector=I,function(N){var W=h(N.gl),F=N.gl,j=N.handle=F.createFramebuffer(),H=N._shape[0],te=N._shape[1],Q=N.color.length,$=N._ext,K=N._useStencil,X=N._useDepth,Y=N._colorType;F.bindFramebuffer(F.FRAMEBUFFER,j);for(var re=0;re<Q;++re)N.color[re]=d(F,H,te,Y,F.RGBA,F.COLOR_ATTACHMENT0+re);Q===0?(N._color_rb=v(F,H,te,F.RGBA4,F.COLOR_ATTACHMENT0),$&&$.drawBuffersWEBGL(u[0])):Q>1&&$.drawBuffersWEBGL(u[Q]);var se=F.getExtension("WEBGL_depth_texture");se?K?N.depth=d(F,H,te,se.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):X&&(N.depth=d(F,H,te,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):X&&K?N._depth_rb=v(F,H,te,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):X?N._depth_rb=v(F,H,te,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):K&&(N._depth_rb=v(F,H,te,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var ae=F.checkFramebufferStatus(F.FRAMEBUFFER);if(ae!==F.FRAMEBUFFER_COMPLETE){for(N._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(N.handle),N.handle=null,N.depth&&(N.depth.dispose(),N.depth=null),N._depth_rb&&(F.deleteRenderbuffer(N._depth_rb),N._depth_rb=null),re=0;re<N.color.length;++re)N.color[re].dispose(),N.color[re]=null;N._color_rb&&(F.deleteRenderbuffer(N._color_rb),N._color_rb=null),c(F,W),x(ae)}c(F,W)}(this)}var y=g.prototype;function m(b,f,S){if(b._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(b._shape[0]!==f||b._shape[1]!==S){var w=b.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=f,b._shape[1]=S;for(var O=h(w),C=0;C<b.color.length;++C)b.color[C].shape=b._shape;b._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,b._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,b._shape[0],b._shape[1])),b.depth&&(b.depth.shape=b._shape),b._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,b._shape[0],b._shape[1]):b._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,b._shape[0],b._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,b.handle);var P=w.checkFramebufferStatus(w.FRAMEBUFFER);P!==w.FRAMEBUFFER_COMPLETE&&(b.dispose(),c(w,O),x(P)),c(w,O)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){if(Array.isArray(b)||(b=[0|b,0|b]),b.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|b[0],S=0|b[1];return m(this,f,S),[f,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){return m(this,b|=0,this._shape[1]),b},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){return b|=0,m(this,this._shape[0],b),b},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle),b.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(p,s,t){var i=t(3387).sprintf,r=t(5171),n=t(1848),a=t(1085);p.exports=function(l,u,h){var c=n(u)||"of unknown name (see npm glsl-shader-name)",x="unknown type";h!==void 0&&(x=h===r.FRAGMENT_SHADER?"fragment":"vertex");for(var d=i(`Error compiling %s shader %s:
`,x,c),v=i("%s%s",d,l),g=l.split(`
`),y={},m=0;m<g.length;m++){var b=g[m];if(b!==""&&b!=="\0"){var f=parseInt(b.split(":")[2]);if(isNaN(f))throw new Error(i("Could not parse error: %s",b));y[f]=b}}var S=a(u).split(`
`);for(m=0;m<S.length;m++)if((y[m+3]||y[m+2]||y[m+1])&&(d+=S[m]+`
`,y[m+1])){var w=y[m+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),d+=i(`^^^ %s

`,w)}return{long:d.trim(),short:v.trim()}}},2510:function(p,s,t){p.exports=function(v,g){var y=v.gl,m=new h(v,a(y,u.vertex,u.fragment),a(y,u.pickVertex,u.pickFragment),l(y),l(y),l(y),l(y));return m.update(g),v.addObject(m),m};var i=t(2478),r=t(7762),n=t(1888),a=t(9405),l=t(2762),u=t(6768);function h(v,g,y,m,b,f,S){this.plot=v,this.shader=g,this.pickShader=y,this.positionBuffer=m,this.weightBuffer=b,this.colorBuffer=f,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,x=h.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var v=this.plot,g=this.shader,y=this.bounds,m=this.numVertices;if(!(m<=0)){var b=v.gl,f=v.dataBox,S=y[2]-y[0],w=y[3]-y[1],E=f[2]-f[0],O=f[3]-f[1];c[0]=2*S/E,c[4]=2*w/O,c[6]=2*(y[0]-f[0])/E-1,c[7]=2*(y[1]-f[1])/O-1,g.bind();var C=g.uniforms;C.viewTransform=c,C.shape=this.shape;var P=g.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,m)}}),x.drawPick=function(){var v=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(y){var m=this.plot,b=this.pickShader,f=this.bounds,S=this.numVertices;if(!(S<=0)){var w=m.gl,E=m.dataBox,O=f[2]-f[0],C=f[3]-f[1],P=E[2]-E[0],D=E[3]-E[1];v[0]=2*O/P,v[4]=2*C/D,v[6]=2*(f[0]-E[0])/P-1,v[7]=2*(f[1]-E[1])/D-1;for(var U=0;U<4;++U)g[U]=y>>8*U&255;this.pickOffset=y,b.bind();var I=b.uniforms;I.viewTransform=v,I.pickOffset=g,I.shape=this.shape;var N=b.attributes;return this.positionBuffer.bind(),N.position.pointer(),this.weightBuffer.bind(),N.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),N.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,S),y+this.shape[0]*this.shape[1]}}}(),x.pick=function(v,g,y){var m=this.pickOffset,b=this.shape[0]*this.shape[1];if(y<m||y>=m+b)return null;var f=y-m,S=this.xData,w=this.yData;return{object:this,pointId:f,dataCoord:[S[f%this.shape[0]],w[f/this.shape[0]|0]]}},x.update=function(v){var g=(v=v||{}).shape||[0,0],y=v.x||r(g[0]),m=v.y||r(g[1]),b=v.z||new Float32Array(g[0]*g[1]),f=v.zsmooth!==!1;this.xData=y,this.yData=m;var S,w,E,O,C=v.colorLevels||[0],P=v.colorValues||[0,0,0,1],D=C.length,U=this.bounds;f?(S=U[0]=y[0],w=U[1]=m[0],E=U[2]=y[y.length-1],O=U[3]=m[m.length-1]):(S=U[0]=y[0]+(y[1]-y[0])/2,w=U[1]=m[0]+(m[1]-m[0])/2,E=U[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,O=U[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var I=1/(E-S),N=1/(O-w),W=g[0],F=g[1];this.shape=[W,F];var j=(f?(W-1)*(F-1):W*F)*(d.length>>>1);this.numVertices=j;for(var H=n.mallocUint8(4*j),te=n.mallocFloat32(2*j),Q=n.mallocUint8(2*j),$=n.mallocUint32(j),K=0,X=f?W-1:W,Y=f?F-1:F,re=0;re<Y;++re){var se,ae;f?(se=N*(m[re]-w),ae=N*(m[re+1]-w)):(se=re<F-1?N*(m[re]-(m[re+1]-m[re])/2-w):N*(m[re]-(m[re]-m[re-1])/2-w),ae=re<F-1?N*(m[re]+(m[re+1]-m[re])/2-w):N*(m[re]+(m[re]-m[re-1])/2-w));for(var ce=0;ce<X;++ce){var fe,he;f?(fe=I*(y[ce]-S),he=I*(y[ce+1]-S)):(fe=ce<W-1?I*(y[ce]-(y[ce+1]-y[ce])/2-S):I*(y[ce]-(y[ce]-y[ce-1])/2-S),he=ce<W-1?I*(y[ce]+(y[ce+1]-y[ce])/2-S):I*(y[ce]+(y[ce]-y[ce-1])/2-S));for(var ve=0;ve<d.length;ve+=2){var ye,me,Me,Pe,ge=d[ve],oe=d[ve+1],ie=b[f?(re+oe)*W+(ce+ge):re*W+ce],de=i.le(C,ie);if(de<0)ye=P[0],me=P[1],Me=P[2],Pe=P[3];else if(de===D-1)ye=P[4*D-4],me=P[4*D-3],Me=P[4*D-2],Pe=P[4*D-1];else{var Se=(ie-C[de])/(C[de+1]-C[de]),_e=1-Se,we=4*de,Ae=4*(de+1);ye=_e*P[we]+Se*P[Ae],me=_e*P[we+1]+Se*P[Ae+1],Me=_e*P[we+2]+Se*P[Ae+2],Pe=_e*P[we+3]+Se*P[Ae+3]}H[4*K]=255*ye,H[4*K+1]=255*me,H[4*K+2]=255*Me,H[4*K+3]=255*Pe,te[2*K]=.5*fe+.5*he,te[2*K+1]=.5*se+.5*ae,Q[2*K]=ge,Q[2*K+1]=oe,$[K]=re*W+ce,K+=1}}}this.positionBuffer.update(te),this.weightBuffer.update(Q),this.colorBuffer.update(H),this.idBuffer.update($),n.free(te),n.free(H),n.free(Q),n.free($)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(p,s,t){var i=t(3236);p.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(p,s,t){var i=t(3236),r=t(9405),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(h){return r(h,n,a,null,u)},s.createPickShader=function(h){return r(h,n,l,null,u)}},5714:function(p,s,t){p.exports=function(S){var w=S.gl||S.scene&&S.scene.gl,E=x(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var O=d(w);O.attributes.position.location=0,O.attributes.nextPosition.location=1,O.attributes.arcLength.location=2,O.attributes.lineWidth.location=3,O.attributes.color.location=4;for(var C=i(w),P=r(w,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),D=h(new Array(1024),[256,1,4]),U=0;U<1024;++U)D.data[U]=255;var I=n(w,D);I.wrap=w.REPEAT;var N=new b(w,E,O,C,P,I);return N.update(S),N};var i=t(2762),r=t(8116),n=t(7766),a=new Uint8Array(4),l=new Float32Array(a.buffer),u=t(2478),h=t(9618),c=t(7319),x=c.createShader,d=c.createPickShader,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(S,w){for(var E=0,O=0;O<3;++O){var C=S[O]-w[O];E+=C*C}return Math.sqrt(E)}function y(S){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(S[0][E],w[0][E]),w[1][E]=Math.min(S[1][E],w[1][E]);return w}function m(S,w,E,O){this.arcLength=S,this.position=w,this.index=E,this.dataCoordinate=O}function b(S,w,E,O,C,P){this.gl=S,this.shader=w,this.pickShader=E,this.buffer=O,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=b.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(S){this.pickId=S},f.drawTransparent=f.draw=function(S){if(this.vertexCount){var w=this.gl,E=this.shader,O=this.vao;E.bind(),E.uniforms={model:S.model||v,view:S.view||v,projection:S.projection||v,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},O.bind(),O.draw(w.TRIANGLE_STRIP,this.vertexCount),O.unbind()}},f.drawPick=function(S){if(this.vertexCount){var w=this.gl,E=this.pickShader,O=this.vao;E.bind(),E.uniforms={model:S.model||v,view:S.view||v,projection:S.projection||v,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},O.bind(),O.draw(w.TRIANGLE_STRIP,this.vertexCount),O.unbind()}},f.update=function(S){var w,E;this.dirty=!0;var O=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],P=[],D=[],U=0,I=0,N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],W=S.position||S.positions;if(W){var F=S.color||S.colors||[0,0,0,1],j=S.lineWidth||1,H=!1;e:for(w=1;w<W.length;++w){var te,Q,$,K=W[w-1],X=W[w];for(P.push(U),D.push(K.slice()),E=0;E<3;++E){if(isNaN(K[E])||isNaN(X[E])||!isFinite(K[E])||!isFinite(X[E])){if(!O&&C.length>0){for(var Y=0;Y<24;++Y)C.push(C[C.length-12]);I+=2,H=!0}continue e}N[0][E]=Math.min(N[0][E],K[E],X[E]),N[1][E]=Math.max(N[1][E],K[E],X[E])}Array.isArray(F[0])?(te=F.length>w-1?F[w-1]:F.length>0?F[F.length-1]:[0,0,0,1],Q=F.length>w?F[w]:F.length>0?F[F.length-1]:[0,0,0,1]):te=Q=F,te.length===3&&(te=[te[0],te[1],te[2],1]),Q.length===3&&(Q=[Q[0],Q[1],Q[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),$=Array.isArray(j)?j.length>w-1?j[w-1]:j.length>0?j[j.length-1]:[0,0,0,1]:j;var re=U;if(U+=g(K,X),H){for(E=0;E<2;++E)C.push(K[0],K[1],K[2],X[0],X[1],X[2],re,$,te[0],te[1],te[2],te[3]);I+=2,H=!1}C.push(K[0],K[1],K[2],X[0],X[1],X[2],re,$,te[0],te[1],te[2],te[3],K[0],K[1],K[2],X[0],X[1],X[2],re,-$,te[0],te[1],te[2],te[3],X[0],X[1],X[2],K[0],K[1],K[2],U,-$,Q[0],Q[1],Q[2],Q[3],X[0],X[1],X[2],K[0],K[1],K[2],U,$,Q[0],Q[1],Q[2],Q[3]),I+=4}}if(this.buffer.update(C),P.push(U),D.push(W[W.length-1].slice()),this.bounds=N,this.vertexCount=I,this.points=D,this.arcLength=P,"dashes"in S){var se=S.dashes.slice();for(se.unshift(0),w=1;w<se.length;++w)se[w]=se[w-1]+se[w];var ae=h(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)ae.set(w,0,E,0);1&u.le(se,se[se.length-1]*w/255)?ae.set(w,0,0,0):ae.set(w,0,0,255)}this.texture.setPixels(ae)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(S){if(!S||S.id!==this.pickId)return null;var w=function(W,F,j,H){return a[0]=0,a[1]=j,a[2]=F,a[3]=W,l[0]}(S.value[0],S.value[1],S.value[2]),E=u.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var O=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],P=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),D=1-P,U=[0,0,0],I=0;I<3;++I)U[I]=D*O[I]+P*C[I];var N=Math.min(P<.5?E:E+1,this.points.length-1);return new m(w,U,N,this.points[N])}},1903:function(p){p.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},6864:function(p){p.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},9921:function(p){p.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3],a=s[4],l=s[5],u=s[6],h=s[7],c=s[8],x=s[9],d=s[10],v=s[11],g=s[12],y=s[13],m=s[14],b=s[15];return(t*l-i*a)*(d*b-v*m)-(t*u-r*a)*(x*b-v*y)+(t*h-n*a)*(x*m-d*y)+(i*u-r*l)*(c*b-v*g)-(i*h-n*l)*(c*m-d*g)+(r*h-n*u)*(c*y-x*g)}},7399:function(p){p.exports=function(s,t){var i=t[0],r=t[1],n=t[2],a=t[3],l=i+i,u=r+r,h=n+n,c=i*l,x=r*l,d=r*u,v=n*l,g=n*u,y=n*h,m=a*l,b=a*u,f=a*h;return s[0]=1-d-y,s[1]=x+f,s[2]=v-b,s[3]=0,s[4]=x-f,s[5]=1-c-y,s[6]=g+m,s[7]=0,s[8]=v+b,s[9]=g-m,s[10]=1-c-d,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},6743:function(p){p.exports=function(s,t,i){var r=t[0],n=t[1],a=t[2],l=t[3],u=r+r,h=n+n,c=a+a,x=r*u,d=r*h,v=r*c,g=n*h,y=n*c,m=a*c,b=l*u,f=l*h,S=l*c;return s[0]=1-(g+m),s[1]=d+S,s[2]=v-f,s[3]=0,s[4]=d-S,s[5]=1-(x+m),s[6]=y+b,s[7]=0,s[8]=v+f,s[9]=y-b,s[10]=1-(x+g),s[11]=0,s[12]=i[0],s[13]=i[1],s[14]=i[2],s[15]=1,s}},7894:function(p){p.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7608:function(p){p.exports=function(s,t){var i=t[0],r=t[1],n=t[2],a=t[3],l=t[4],u=t[5],h=t[6],c=t[7],x=t[8],d=t[9],v=t[10],g=t[11],y=t[12],m=t[13],b=t[14],f=t[15],S=i*u-r*l,w=i*h-n*l,E=i*c-a*l,O=r*h-n*u,C=r*c-a*u,P=n*c-a*h,D=x*m-d*y,U=x*b-v*y,I=x*f-g*y,N=d*b-v*m,W=d*f-g*m,F=v*f-g*b,j=S*F-w*W+E*N+O*I-C*U+P*D;return j?(j=1/j,s[0]=(u*F-h*W+c*N)*j,s[1]=(n*W-r*F-a*N)*j,s[2]=(m*P-b*C+f*O)*j,s[3]=(v*C-d*P-g*O)*j,s[4]=(h*I-l*F-c*U)*j,s[5]=(i*F-n*I+a*U)*j,s[6]=(b*E-y*P-f*w)*j,s[7]=(x*P-v*E+g*w)*j,s[8]=(l*W-u*I+c*D)*j,s[9]=(r*I-i*W-a*D)*j,s[10]=(y*C-m*E+f*S)*j,s[11]=(d*E-x*C-g*S)*j,s[12]=(u*U-l*N-h*D)*j,s[13]=(i*N-r*U+n*D)*j,s[14]=(m*w-y*O-b*S)*j,s[15]=(x*O-d*w+v*S)*j,s):null}},6582:function(p,s,t){var i=t(7894);p.exports=function(r,n,a,l){var u,h,c,x,d,v,g,y,m,b,f=n[0],S=n[1],w=n[2],E=l[0],O=l[1],C=l[2],P=a[0],D=a[1],U=a[2];return Math.abs(f-P)<1e-6&&Math.abs(S-D)<1e-6&&Math.abs(w-U)<1e-6?i(r):(g=f-P,y=S-D,m=w-U,u=O*(m*=b=1/Math.sqrt(g*g+y*y+m*m))-C*(y*=b),h=C*(g*=b)-E*m,c=E*y-O*g,(b=Math.sqrt(u*u+h*h+c*c))?(u*=b=1/b,h*=b,c*=b):(u=0,h=0,c=0),x=y*c-m*h,d=m*u-g*c,v=g*h-y*u,(b=Math.sqrt(x*x+d*d+v*v))?(x*=b=1/b,d*=b,v*=b):(x=0,d=0,v=0),r[0]=u,r[1]=x,r[2]=g,r[3]=0,r[4]=h,r[5]=d,r[6]=y,r[7]=0,r[8]=c,r[9]=v,r[10]=m,r[11]=0,r[12]=-(u*f+h*S+c*w),r[13]=-(x*f+d*S+v*w),r[14]=-(g*f+y*S+m*w),r[15]=1,r)}},6760:function(p){p.exports=function(s,t,i){var r=t[0],n=t[1],a=t[2],l=t[3],u=t[4],h=t[5],c=t[6],x=t[7],d=t[8],v=t[9],g=t[10],y=t[11],m=t[12],b=t[13],f=t[14],S=t[15],w=i[0],E=i[1],O=i[2],C=i[3];return s[0]=w*r+E*u+O*d+C*m,s[1]=w*n+E*h+O*v+C*b,s[2]=w*a+E*c+O*g+C*f,s[3]=w*l+E*x+O*y+C*S,w=i[4],E=i[5],O=i[6],C=i[7],s[4]=w*r+E*u+O*d+C*m,s[5]=w*n+E*h+O*v+C*b,s[6]=w*a+E*c+O*g+C*f,s[7]=w*l+E*x+O*y+C*S,w=i[8],E=i[9],O=i[10],C=i[11],s[8]=w*r+E*u+O*d+C*m,s[9]=w*n+E*h+O*v+C*b,s[10]=w*a+E*c+O*g+C*f,s[11]=w*l+E*x+O*y+C*S,w=i[12],E=i[13],O=i[14],C=i[15],s[12]=w*r+E*u+O*d+C*m,s[13]=w*n+E*h+O*v+C*b,s[14]=w*a+E*c+O*g+C*f,s[15]=w*l+E*x+O*y+C*S,s}},4040:function(p){p.exports=function(s,t,i,r,n,a,l){var u=1/(t-i),h=1/(r-n),c=1/(a-l);return s[0]=-2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(t+i)*u,s[13]=(n+r)*h,s[14]=(l+a)*c,s[15]=1,s}},4772:function(p){p.exports=function(s,t,i,r,n){var a=1/Math.tan(t/2),l=1/(r-n);return s[0]=a/i,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*l,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*l,s[15]=0,s}},6079:function(p){p.exports=function(s,t,i,r){var n,a,l,u,h,c,x,d,v,g,y,m,b,f,S,w,E,O,C,P,D,U,I,N,W=r[0],F=r[1],j=r[2],H=Math.sqrt(W*W+F*F+j*j);return Math.abs(H)<1e-6?null:(W*=H=1/H,F*=H,j*=H,n=Math.sin(i),l=1-(a=Math.cos(i)),u=t[0],h=t[1],c=t[2],x=t[3],d=t[4],v=t[5],g=t[6],y=t[7],m=t[8],b=t[9],f=t[10],S=t[11],w=W*W*l+a,E=F*W*l+j*n,O=j*W*l-F*n,C=W*F*l-j*n,P=F*F*l+a,D=j*F*l+W*n,U=W*j*l+F*n,I=F*j*l-W*n,N=j*j*l+a,s[0]=u*w+d*E+m*O,s[1]=h*w+v*E+b*O,s[2]=c*w+g*E+f*O,s[3]=x*w+y*E+S*O,s[4]=u*C+d*P+m*D,s[5]=h*C+v*P+b*D,s[6]=c*C+g*P+f*D,s[7]=x*C+y*P+S*D,s[8]=u*U+d*I+m*N,s[9]=h*U+v*I+b*N,s[10]=c*U+g*I+f*N,s[11]=x*U+y*I+S*N,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},5567:function(p){p.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[4],l=t[5],u=t[6],h=t[7],c=t[8],x=t[9],d=t[10],v=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=a*n+c*r,s[5]=l*n+x*r,s[6]=u*n+d*r,s[7]=h*n+v*r,s[8]=c*n-a*r,s[9]=x*n-l*r,s[10]=d*n-u*r,s[11]=v*n-h*r,s}},2408:function(p){p.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],l=t[1],u=t[2],h=t[3],c=t[8],x=t[9],d=t[10],v=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n-c*r,s[1]=l*n-x*r,s[2]=u*n-d*r,s[3]=h*n-v*r,s[8]=a*r+c*n,s[9]=l*r+x*n,s[10]=u*r+d*n,s[11]=h*r+v*n,s}},7089:function(p){p.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],l=t[1],u=t[2],h=t[3],c=t[4],x=t[5],d=t[6],v=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n+c*r,s[1]=l*n+x*r,s[2]=u*n+d*r,s[3]=h*n+v*r,s[4]=c*n-a*r,s[5]=x*n-l*r,s[6]=d*n-u*r,s[7]=v*n-h*r,s}},2504:function(p){p.exports=function(s,t,i){var r=i[0],n=i[1],a=i[2];return s[0]=t[0]*r,s[1]=t[1]*r,s[2]=t[2]*r,s[3]=t[3]*r,s[4]=t[4]*n,s[5]=t[5]*n,s[6]=t[6]*n,s[7]=t[7]*n,s[8]=t[8]*a,s[9]=t[9]*a,s[10]=t[10]*a,s[11]=t[11]*a,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},7656:function(p){p.exports=function(s,t,i){var r,n,a,l,u,h,c,x,d,v,g,y,m=i[0],b=i[1],f=i[2];return t===s?(s[12]=t[0]*m+t[4]*b+t[8]*f+t[12],s[13]=t[1]*m+t[5]*b+t[9]*f+t[13],s[14]=t[2]*m+t[6]*b+t[10]*f+t[14],s[15]=t[3]*m+t[7]*b+t[11]*f+t[15]):(r=t[0],n=t[1],a=t[2],l=t[3],u=t[4],h=t[5],c=t[6],x=t[7],d=t[8],v=t[9],g=t[10],y=t[11],s[0]=r,s[1]=n,s[2]=a,s[3]=l,s[4]=u,s[5]=h,s[6]=c,s[7]=x,s[8]=d,s[9]=v,s[10]=g,s[11]=y,s[12]=r*m+u*b+d*f+t[12],s[13]=n*m+h*b+v*f+t[13],s[14]=a*m+c*b+g*f+t[14],s[15]=l*m+x*b+y*f+t[15]),s}},5665:function(p){p.exports=function(s,t){if(s===t){var i=t[1],r=t[2],n=t[3],a=t[6],l=t[7],u=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=i,s[6]=t[9],s[7]=t[13],s[8]=r,s[9]=a,s[11]=t[14],s[12]=n,s[13]=l,s[14]=u}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},7626:function(p,s,t){var i=t(2642),r=t(9346);function n(u,h){for(var c=[0,0,0,0],x=0;x<4;++x)for(var d=0;d<4;++d)c[d]+=u[4*x+d]*h[x];return c}function a(u,h,c,x,d){for(var v=n(x,n(c,n(h,[u[0],u[1],u[2],1]))),g=0;g<3;++g)v[g]/=v[3];return[.5*d[0]*(1+v[0]),.5*d[1]*(1-v[1])]}function l(u,h){for(var c=[0,0,0],x=0;x<u.length;++x)for(var d=u[x],v=h[x],g=0;g<3;++g)c[g]+=v*d[g];return c}p.exports=function(u,h,c,x,d,v){if(u.length===1)return[0,u[0].slice()];for(var g=new Array(u.length),y=0;y<u.length;++y)g[y]=a(u[y],c,x,d,v);var m=0,b=1/0;for(y=0;y<g.length;++y){for(var f=0,S=0;S<2;++S)f+=Math.pow(g[y][S]-h[S],2);f<b&&(b=f,m=y)}var w=function(O,C){if(O.length===2){for(var P=0,D=0,U=0;U<2;++U)P+=Math.pow(C[U]-O[0][U],2),D+=Math.pow(C[U]-O[1][U],2);return(P=Math.sqrt(P))+(D=Math.sqrt(D))<1e-6?[1,0]:[D/(P+D),P/(D+P)]}if(O.length===3){var I=[0,0];return r(O[0],O[1],O[2],C,I),i(O,I)}return[]}(g,h),E=0;for(y=0;y<3;++y){if(w[y]<-.001||w[y]>1.0001)return null;E+=w[y]}return Math.abs(E-1)>.001?null:[m,l(u,w),w]}},840:function(p,s,t){var i=t(3236),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),h=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),x=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),d=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),v=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),g=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:u,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:c,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:d,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:v,fragment:g,attributes:[{name:"position",type:"vec3"}]}},7201:function(p,s,t){var i=t(9405),r=t(2762),n=t(8116),a=t(7766),l=t(8406),u=t(6760),h=t(7608),c=t(9618),x=t(6729),d=t(7765),v=t(1888),g=t(840),y=t(7626),m=g.meshShader,b=g.wireShader,f=g.pointShader,S=g.pickShader,w=g.pointPickShader,E=g.contourShader,O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(F,j,H,te,Q,$,K,X,Y,re,se,ae,ce,fe,he,ve,ye,me,Me,Pe,ge,oe,ie,de,Se,_e,we){this.gl=F,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=j,this.dirty=!0,this.triShader=H,this.lineShader=te,this.pointShader=Q,this.pickShader=$,this.pointPickShader=K,this.contourShader=X,this.trianglePositions=Y,this.triangleColors=se,this.triangleNormals=ce,this.triangleUVs=ae,this.triangleIds=re,this.triangleVAO=fe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=he,this.edgeColors=ye,this.edgeUVs=me,this.edgeIds=ve,this.edgeVAO=Me,this.edgeCount=0,this.pointPositions=Pe,this.pointColors=oe,this.pointUVs=ie,this.pointSizes=de,this.pointIds=ge,this.pointVAO=Se,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=_e,this.contourVAO=we,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=O,this._view=O,this._projection=O,this._resolution=[1,1]}var P=C.prototype;function D(F,j){if(!j||!j.length)return 1;for(var H=0;H<j.length;++H){if(j.length<2)return 1;if(j[H][0]===F)return j[H][1];if(j[H][0]>F&&H>0){var te=(j[H][0]-F)/(j[H][0]-j[H-1][0]);return j[H][1]*(1-te)+te*j[H-1][1]}}return 1}function U(F){var j=i(F,f.vertex,f.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.pointSize.location=4,j}function I(F){var j=i(F,S.vertex,S.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j}function N(F){var j=i(F,w.vertex,w.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j.attributes.pointSize.location=4,j}function W(F){var j=i(F,E.vertex,E.fragment);return j.attributes.position.location=0,j}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(F){this.pickId=F},P.highlight=function(F){if(F&&this.contourEnable){for(var j=d(this.cells,this.intensity,F.intensity),H=j.cells,te=j.vertexIds,Q=j.vertexWeights,$=H.length,K=v.mallocFloat32(6*$),X=0,Y=0;Y<$;++Y)for(var re=H[Y],se=0;se<2;++se){var ae=re[0];re.length===2&&(ae=re[se]);for(var ce=te[ae][0],fe=te[ae][1],he=Q[ae],ve=1-he,ye=this.positions[ce],me=this.positions[fe],Me=0;Me<3;++Me)K[X++]=he*ye[Me]+ve*me[Me]}this.contourCount=X/3|0,this.contourPositions.update(K.subarray(0,X)),v.free(K)}else this.contourCount=0},P.update=function(F){F=F||{};var j=this.gl;this.dirty=!0,"contourEnable"in F&&(this.contourEnable=F.contourEnable),"contourColor"in F&&(this.contourColor=F.contourColor),"lineWidth"in F&&(this.lineWidth=F.lineWidth),"lightPosition"in F&&(this.lightPosition=F.lightPosition),this.hasAlpha=!1,"opacity"in F&&(this.opacity=F.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in F&&(this.opacityscale=F.opacityscale,this.hasAlpha=!0),"ambient"in F&&(this.ambientLight=F.ambient),"diffuse"in F&&(this.diffuseLight=F.diffuse),"specular"in F&&(this.specularLight=F.specular),"roughness"in F&&(this.roughness=F.roughness),"fresnel"in F&&(this.fresnel=F.fresnel),F.texture?(this.texture.dispose(),this.texture=a(j,F.texture)):F.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=j.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=j.LINEAR,this.texture.setPixels(function(Ot,Pt){for(var Mt=x({colormap:Ot,nshades:256,format:"rgba"}),He=new Uint8Array(1024),Ye=0;Ye<256;++Ye){for(var Ne=Mt[Ye],We=0;We<3;++We)He[4*Ye+We]=Ne[We];He[4*Ye+3]=Pt?255*D(Ye/255,Pt):255*Ne[3]}return c(He,[256,256,4],[4,0,1])}(F.colormap,this.opacityscale)),this.texture.generateMipmap());var H=F.cells,te=F.positions;if(te&&H){var Q=[],$=[],K=[],X=[],Y=[],re=[],se=[],ae=[],ce=[],fe=[],he=[],ve=[],ye=[],me=[];this.cells=H,this.positions=te;var Me=F.vertexNormals,Pe=F.cellNormals,ge=F.vertexNormalsEpsilon===void 0?1e-6:F.vertexNormalsEpsilon,oe=F.faceNormalsEpsilon===void 0?1e-6:F.faceNormalsEpsilon;F.useFacetNormals&&!Pe&&(Pe=l.faceNormals(H,te,oe)),Pe||Me||(Me=l.vertexNormals(H,te,ge));var ie=F.vertexColors,de=F.cellColors,Se=F.meshColor||[1,1,1,1],_e=F.vertexUVs,we=F.vertexIntensity,Ae=F.cellUVs,Oe=F.cellIntensity,ze=1/0,pe=-1/0;if(!_e&&!Ae)if(we)if(F.vertexIntensityBounds)ze=+F.vertexIntensityBounds[0],pe=+F.vertexIntensityBounds[1];else for(var be=0;be<we.length;++be){var ke=we[be];ze=Math.min(ze,ke),pe=Math.max(pe,ke)}else if(Oe)if(F.cellIntensityBounds)ze=+F.cellIntensityBounds[0],pe=+F.cellIntensityBounds[1];else for(be=0;be<Oe.length;++be)ke=Oe[be],ze=Math.min(ze,ke),pe=Math.max(pe,ke);else for(be=0;be<te.length;++be)ke=te[be][2],ze=Math.min(ze,ke),pe=Math.max(pe,ke);this.intensity=we||Oe||function(Ot){for(var Pt=Ot.length,Mt=new Array(Pt),He=0;He<Pt;++He)Mt[He]=Ot[He][2];return Mt}(te),this.pickVertex=!(Oe||de);var Ie=F.pointSizes,Ee=F.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],be=0;be<te.length;++be)for(var Be=te[be],Ve=0;Ve<3;++Ve)!isNaN(Be[Ve])&&isFinite(Be[Ve])&&(this.bounds[0][Ve]=Math.min(this.bounds[0][Ve],Be[Ve]),this.bounds[1][Ve]=Math.max(this.bounds[1][Ve],Be[Ve]));var Ze=0,rt=0,it=0;e:for(be=0;be<H.length;++be){var dt=H[be];switch(dt.length){case 1:for(Be=te[ht=dt[0]],Ve=0;Ve<3;++Ve)if(isNaN(Be[Ve])||!isFinite(Be[Ve]))continue e;fe.push(Be[0],Be[1],Be[2]),Qe=ie?ie[ht]:de?de[be]:Se,this.opacityscale&&we?$.push(Qe[0],Qe[1],Qe[2],this.opacity*D((we[ht]-ze)/(pe-ze),this.opacityscale)):Qe.length===3?he.push(Qe[0],Qe[1],Qe[2],this.opacity):(he.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)),Je=_e?_e[ht]:we?[(we[ht]-ze)/(pe-ze),0]:Ae?Ae[be]:Oe?[(Oe[be]-ze)/(pe-ze),0]:[(Be[2]-ze)/(pe-ze),0],ve.push(Je[0],Je[1]),Ie?ye.push(Ie[ht]):ye.push(Ee),me.push(be),it+=1;break;case 2:for(Ve=0;Ve<2;++Ve){Be=te[ht=dt[Ve]];for(var vt=0;vt<3;++vt)if(isNaN(Be[vt])||!isFinite(Be[vt]))continue e}for(Ve=0;Ve<2;++Ve)Be=te[ht=dt[Ve]],re.push(Be[0],Be[1],Be[2]),Qe=ie?ie[ht]:de?de[be]:Se,this.opacityscale&&we?$.push(Qe[0],Qe[1],Qe[2],this.opacity*D((we[ht]-ze)/(pe-ze),this.opacityscale)):Qe.length===3?se.push(Qe[0],Qe[1],Qe[2],this.opacity):(se.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)),Je=_e?_e[ht]:we?[(we[ht]-ze)/(pe-ze),0]:Ae?Ae[be]:Oe?[(Oe[be]-ze)/(pe-ze),0]:[(Be[2]-ze)/(pe-ze),0],ae.push(Je[0],Je[1]),ce.push(be);rt+=1;break;case 3:for(Ve=0;Ve<3;++Ve)for(Be=te[ht=dt[Ve]],vt=0;vt<3;++vt)if(isNaN(Be[vt])||!isFinite(Be[vt]))continue e;for(Ve=0;Ve<3;++Ve){var ht,Qe,Je,Tt;Be=te[ht=dt[2-Ve]],Q.push(Be[0],Be[1],Be[2]),(Qe=ie?ie[ht]:de?de[be]:Se)?this.opacityscale&&we?$.push(Qe[0],Qe[1],Qe[2],this.opacity*D((we[ht]-ze)/(pe-ze),this.opacityscale)):Qe.length===3?$.push(Qe[0],Qe[1],Qe[2],this.opacity):($.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)):$.push(.5,.5,.5,1),Je=_e?_e[ht]:we?[(we[ht]-ze)/(pe-ze),0]:Ae?Ae[be]:Oe?[(Oe[be]-ze)/(pe-ze),0]:[(Be[2]-ze)/(pe-ze),0],X.push(Je[0],Je[1]),Tt=Me?Me[ht]:Pe[be],K.push(Tt[0],Tt[1],Tt[2]),Y.push(be)}Ze+=1}}this.pointCount=it,this.edgeCount=rt,this.triangleCount=Ze,this.pointPositions.update(fe),this.pointColors.update(he),this.pointUVs.update(ve),this.pointSizes.update(ye),this.pointIds.update(new Uint32Array(me)),this.edgePositions.update(re),this.edgeColors.update(se),this.edgeUVs.update(ae),this.edgeIds.update(new Uint32Array(ce)),this.trianglePositions.update(Q),this.triangleColors.update($),this.triangleUVs.update(X),this.triangleNormals.update(K),this.triangleIds.update(new Uint32Array(Y))}},P.drawTransparent=P.draw=function(F){F=F||{};for(var j=this.gl,H=F.model||O,te=F.view||O,Q=F.projection||O,$=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)$[0][K]=Math.max($[0][K],this.clipBounds[0][K]),$[1][K]=Math.min($[1][K],this.clipBounds[1][K]);var X={model:H,view:te,projection:Q,inverseModel:O.slice(),clipBounds:$,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};X.inverseModel=h(X.inverseModel,X.model),j.disable(j.CULL_FACE),this.texture.bind(0);var Y=new Array(16);for(u(Y,X.view,X.model),u(Y,X.projection,Y),h(Y,Y),K=0;K<3;++K)X.eyePosition[K]=Y[12+K]/Y[15];var re,se=Y[15];for(K=0;K<3;++K)se+=this.lightPosition[K]*Y[4*K+3];for(K=0;K<3;++K){for(var ae=Y[12+K],ce=0;ce<3;++ce)ae+=Y[4*ce+K]*this.lightPosition[ce];X.lightPosition[K]=ae/se}this.triangleCount>0&&((re=this.triShader).bind(),re.uniforms=X,this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((re=this.lineShader).bind(),re.uniforms=X,this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((re=this.pointShader).bind(),re.uniforms=X,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((re=this.contourShader).bind(),re.uniforms=X,this.contourVAO.bind(),j.drawArrays(j.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(F){F=F||{};for(var j=this.gl,H=F.model||O,te=F.view||O,Q=F.projection||O,$=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)$[0][K]=Math.max($[0][K],this.clipBounds[0][K]),$[1][K]=Math.min($[1][K],this.clipBounds[1][K]);this._model=[].slice.call(H),this._view=[].slice.call(te),this._projection=[].slice.call(Q),this._resolution=[j.drawingBufferWidth,j.drawingBufferHeight];var X,Y={model:H,view:te,projection:Q,clipBounds:$,pickId:this.pickId/255};(X=this.pickShader).bind(),X.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((X=this.pointPickShader).bind(),X.uniforms=Y,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(F){if(!F||F.id!==this.pickId)return null;for(var j=F.value[0]+256*F.value[1]+65536*F.value[2],H=this.cells[j],te=this.positions,Q=new Array(H.length),$=0;$<H.length;++$)Q[$]=te[H[$]];var K=F.coord[0],X=F.coord[1];if(!this.pickVertex){var Y=this.positions[H[0]],re=this.positions[H[1]],se=this.positions[H[2]],ae=[(Y[0]+re[0]+se[0])/3,(Y[1]+re[1]+se[1])/3,(Y[2]+re[2]+se[2])/3];return{_cellCenter:!0,position:[K,X],index:j,cell:H,cellId:j,intensity:this.intensity[j],dataCoordinate:ae}}var ce=y(Q,[K*this.pixelRatio,this._resolution[1]-X*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ce)return null;var fe=ce[2],he=0;for($=0;$<H.length;++$)he+=fe[$]*this.intensity[H[$]];return{position:ce[1],index:H[ce[0]],cell:H,cellId:j,intensity:he,dataCoordinate:this.positions[H[ce[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},p.exports=function(F,j){if(arguments.length===1&&(F=(j=F).gl),!(F.getExtension("OES_standard_derivatives")||F.getExtension("MOZ_OES_standard_derivatives")||F.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var H=function(Oe){var ze=i(Oe,m.vertex,m.fragment);return ze.attributes.position.location=0,ze.attributes.color.location=2,ze.attributes.uv.location=3,ze.attributes.normal.location=4,ze}(F),te=function(Oe){var ze=i(Oe,b.vertex,b.fragment);return ze.attributes.position.location=0,ze.attributes.color.location=2,ze.attributes.uv.location=3,ze}(F),Q=U(F),$=I(F),K=N(F),X=W(F),Y=a(F,c(new Uint8Array([255,255,255,255]),[1,1,4]));Y.generateMipmap(),Y.minFilter=F.LINEAR_MIPMAP_LINEAR,Y.magFilter=F.LINEAR;var re=r(F),se=r(F),ae=r(F),ce=r(F),fe=r(F),he=n(F,[{buffer:re,type:F.FLOAT,size:3},{buffer:fe,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:F.FLOAT,size:4},{buffer:ae,type:F.FLOAT,size:2},{buffer:ce,type:F.FLOAT,size:3}]),ve=r(F),ye=r(F),me=r(F),Me=r(F),Pe=n(F,[{buffer:ve,type:F.FLOAT,size:3},{buffer:Me,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ye,type:F.FLOAT,size:4},{buffer:me,type:F.FLOAT,size:2}]),ge=r(F),oe=r(F),ie=r(F),de=r(F),Se=r(F),_e=n(F,[{buffer:ge,type:F.FLOAT,size:3},{buffer:Se,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:F.FLOAT,size:4},{buffer:ie,type:F.FLOAT,size:2},{buffer:de,type:F.FLOAT,size:1}]),we=r(F),Ae=new C(F,Y,H,te,Q,$,K,X,re,fe,se,ae,ce,he,ve,Me,ye,me,Pe,ge,Se,oe,ie,de,_e,we,n(F,[{buffer:we,type:F.FLOAT,size:3}]));return Ae.update(j),Ae}},8120:function(p,s,t){p.exports=function(c){var x=c.gl;return new a(c,i(x,[0,0,0,1,1,0,1,1]),r(x,n.boxVert,n.lineFrag))};var i=t(2762),r=t(9405),n=t(3603);function a(c,x,d){this.plot=c,this.vbo=x,this.shader=d}var l,u,h=a.prototype;h.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},h.drawBox=(l=[0,0],u=[0,0],function(c,x,d,v,g){var y=this.plot,m=this.shader,b=y.gl;l[0]=c,l[1]=x,u[0]=d,u[1]=v,m.uniforms.lo=l,m.uniforms.hi=u,m.uniforms.color=g,b.drawArrays(b.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(p,s,t){p.exports=function(y){var m=y.gl;return new l(y,i(m),r(m,a.gridVert,a.gridFrag),r(m,a.tickVert,a.gridFrag))};var i=t(2762),r=t(9405),n=t(2478),a=t(3603);function l(y,m,b,f){this.plot=y,this.vbo=m,this.shader=b,this.tickShader=f,this.ticks=[[],[]]}function u(y,m){return y-m}var h,c,x,d,v,g=l.prototype;g.draw=(h=[0,0],c=[0,0],x=[0,0],function(){for(var y=this.plot,m=this.vbo,b=this.shader,f=this.ticks,S=y.gl,w=y._tickBounds,E=y.dataBox,O=y.viewBox,C=y.gridLineWidth,P=y.gridLineColor,D=y.gridLineEnable,U=y.pixelRatio,I=0;I<2;++I){var N=w[I],W=w[I+2]-N,F=.5*(E[I+2]+E[I]),j=E[I+2]-E[I];c[I]=2*W/j,h[I]=2*(N-F)/j}b.bind(),m.bind(),b.attributes.dataCoord.pointer(),b.uniforms.dataShift=h,b.uniforms.dataScale=c;var H=0;for(I=0;I<2;++I){x[0]=x[1]=0,x[I]=1,b.uniforms.dataAxis=x,b.uniforms.lineWidth=C[I]/(O[I+2]-O[I])*U,b.uniforms.color=P[I];var te=6*f[I].length;D[I]&&te&&S.drawArrays(S.TRIANGLES,H,te),H+=te}}),g.drawTickMarks=function(){var y=[0,0],m=[0,0],b=[1,0],f=[0,1],S=[0,0],w=[0,0];return function(){for(var E=this.plot,O=this.vbo,C=this.tickShader,P=this.ticks,D=E.gl,U=E._tickBounds,I=E.dataBox,N=E.viewBox,W=E.pixelRatio,F=E.screenBox,j=F[2]-F[0],H=F[3]-F[1],te=N[2]-N[0],Q=N[3]-N[1],$=0;$<2;++$){var K=U[$],X=U[$+2]-K,Y=.5*(I[$+2]+I[$]),re=I[$+2]-I[$];m[$]=2*X/re,y[$]=2*(K-Y)/re}m[0]*=te/j,y[0]*=te/j,m[1]*=Q/H,y[1]*=Q/H,C.bind(),O.bind(),C.attributes.dataCoord.pointer();var se=C.uniforms;se.dataShift=y,se.dataScale=m;var ae=E.tickMarkLength,ce=E.tickMarkWidth,fe=E.tickMarkColor,he=6*P[0].length,ve=Math.min(n.ge(P[0],(I[0]-U[0])/(U[2]-U[0]),u),P[0].length),ye=Math.min(n.gt(P[0],(I[2]-U[0])/(U[2]-U[0]),u),P[0].length),me=0+6*ve,Me=6*Math.max(0,ye-ve),Pe=Math.min(n.ge(P[1],(I[1]-U[1])/(U[3]-U[1]),u),P[1].length),ge=Math.min(n.gt(P[1],(I[3]-U[1])/(U[3]-U[1]),u),P[1].length),oe=he+6*Pe,ie=6*Math.max(0,ge-Pe);S[0]=2*(N[0]-ae[1])/j-1,S[1]=(N[3]+N[1])/H-1,w[0]=ae[1]*W/j,w[1]=ce[1]*W/H,ie&&(se.color=fe[1],se.tickScale=w,se.dataAxis=f,se.screenOffset=S,D.drawArrays(D.TRIANGLES,oe,ie)),S[0]=(N[2]+N[0])/j-1,S[1]=2*(N[1]-ae[0])/H-1,w[0]=ce[0]*W/j,w[1]=ae[0]*W/H,Me&&(se.color=fe[0],se.tickScale=w,se.dataAxis=b,se.screenOffset=S,D.drawArrays(D.TRIANGLES,me,Me)),S[0]=2*(N[2]+ae[3])/j-1,S[1]=(N[3]+N[1])/H-1,w[0]=ae[3]*W/j,w[1]=ce[3]*W/H,ie&&(se.color=fe[3],se.tickScale=w,se.dataAxis=f,se.screenOffset=S,D.drawArrays(D.TRIANGLES,oe,ie)),S[0]=(N[2]+N[0])/j-1,S[1]=2*(N[3]+ae[2])/H-1,w[0]=ce[2]*W/j,w[1]=ae[2]*W/H,Me&&(se.color=fe[2],se.tickScale=w,se.dataAxis=b,se.screenOffset=S,D.drawArrays(D.TRIANGLES,me,Me))}}(),g.update=(d=[1,1,-1,-1,1,-1],v=[1,-1,1,1,-1,-1],function(y){for(var m=y.ticks,b=y.bounds,f=new Float32Array(18*(m[0].length+m[1].length)),S=(this.plot.zeroLineEnable,0),w=[[],[]],E=0;E<2;++E)for(var O=w[E],C=m[E],P=b[E],D=b[E+2],U=0;U<C.length;++U){var I=(C[U].x-P)/(D-P);O.push(I);for(var N=0;N<6;++N)f[S++]=I,f[S++]=d[N],f[S++]=v[N]}this.ticks=w,this.vbo.update(f)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(p,s,t){p.exports=function(c){var x=c.gl;return new a(c,i(x,[-1,-1,-1,1,1,-1,1,1]),r(x,n.lineVert,n.lineFrag))};var i=t(2762),r=t(9405),n=t(3603);function a(c,x,d){this.plot=c,this.vbo=x,this.shader=d}var l,u,h=a.prototype;h.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},h.drawLine=(l=[0,0],u=[0,0],function(c,x,d,v,g,y){var m=this.plot,b=this.shader,f=m.gl;l[0]=c,l[1]=x,u[0]=d,u[1]=v,b.uniforms.start=l,b.uniforms.end=u,b.uniforms.width=g*m.pixelRatio,b.uniforms.color=y,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(p,s,t){var i=t(3236),r=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);p.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(p,s,t){p.exports=function(m){var b=m.gl;return new u(m,i(b),r(b,l.textVert,l.textFrag))};var i=t(2762),r=t(9405),n=t(529),a=t(2478),l=t(3603);function u(m,b,f){this.plot=m,this.vbo=b,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,c,x,d,v,g,y=u.prototype;y.drawTicks=(h=[0,0],c=[0,0],x=[0,0],function(m){var b=this.plot,f=this.shader,S=this.tickX[m],w=this.tickOffset[m],E=b.gl,O=b.viewBox,C=b.dataBox,P=b.screenBox,D=b.pixelRatio,U=b.tickEnable,I=b.tickPad,N=b.tickColor,W=b.tickAngle,F=b.labelEnable,j=b.labelPad,H=b.labelColor,te=b.labelAngle,Q=this.labelOffset[m],$=this.labelCount[m],K=a.lt(S,C[m]),X=a.le(S,C[m+2]);h[0]=h[1]=0,h[m]=1,c[m]=(O[2+m]+O[m])/(P[2+m]-P[m])-1;var Y=2/P[2+(1^m)]-P[1^m];c[1^m]=Y*O[1^m]-1,U[m]&&(c[1^m]-=Y*D*I[m],K<X&&w[X]>w[K]&&(f.uniforms.dataAxis=h,f.uniforms.screenOffset=c,f.uniforms.color=N[m],f.uniforms.angle=W[m],E.drawArrays(E.TRIANGLES,w[K],w[X]-w[K]))),F[m]&&$&&(c[1^m]-=Y*D*j[m],f.uniforms.dataAxis=x,f.uniforms.screenOffset=c,f.uniforms.color=H[m],f.uniforms.angle=te[m],E.drawArrays(E.TRIANGLES,Q,$)),c[1^m]=Y*O[2+(1^m)]-1,U[m+2]&&(c[1^m]+=Y*D*I[m+2],K<X&&w[X]>w[K]&&(f.uniforms.dataAxis=h,f.uniforms.screenOffset=c,f.uniforms.color=N[m+2],f.uniforms.angle=W[m+2],E.drawArrays(E.TRIANGLES,w[K],w[X]-w[K]))),F[m+2]&&$&&(c[1^m]+=Y*D*j[m+2],f.uniforms.dataAxis=x,f.uniforms.screenOffset=c,f.uniforms.color=H[m+2],f.uniforms.angle=te[m+2],E.drawArrays(E.TRIANGLES,Q,$))}),y.drawTitle=function(){var m=[0,0],b=[0,0];return function(){var f=this.plot,S=this.shader,w=f.gl,E=f.screenBox,O=f.titleCenter,C=f.titleAngle,P=f.titleColor,D=f.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)b[U]=2*(O[U]*D-E[U])/(E[2+U]-E[U])-1;S.bind(),S.uniforms.dataAxis=m,S.uniforms.screenOffset=b,S.uniforms.angle=C,S.uniforms.color=P,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}}(),y.bind=(d=[0,0],v=[0,0],g=[0,0],function(){var m=this.plot,b=this.shader,f=m._tickBounds,S=m.dataBox,w=m.screenBox,E=m.viewBox;b.bind();for(var O=0;O<2;++O){var C=f[O],P=f[O+2]-C,D=.5*(S[O+2]+S[O]),U=S[O+2]-S[O],I=E[O],N=E[O+2]-I,W=w[O],F=w[O+2]-W;v[O]=2*P/U*N/F,d[O]=2*(C-D)/U*N/F}g[1]=2*m.pixelRatio/(w[3]-w[1]),g[0]=g[1]*(w[3]-w[1])/(w[2]-w[0]),b.uniforms.dataScale=v,b.uniforms.dataShift=d,b.uniforms.textScale=g,this.vbo.bind(),b.attributes.textCoordinate.pointer()}),y.update=function(m){var b,f,S,w,E,O=[],C=m.ticks,P=m.bounds;for(E=0;E<2;++E){var D=[Math.floor(O.length/3)],U=[-1/0],I=C[E];for(b=0;b<I.length;++b){var N=I[b],W=N.x,F=N.text,j=N.font||"sans-serif",H=N.fontStyle||"normal",te=N.fontWeight||"normal",Q=N.fontVariant||"normal";w=N.fontSize||12;for(var $=1/(P[E+2]-P[E]),K=P[E],X=F.split(`
`),Y=0;Y<X.length;Y++)for(S=n(j,X[Y],{fontStyle:H,fontWeight:te,fontVariant:Q}).data,f=0;f<S.length;f+=2)O.push(S[f]*w,-S[f+1]*w-Y*w*1.2,(W-K)*$);D.push(Math.floor(O.length/3)),U.push(W)}this.tickOffset[E]=D,this.tickX[E]=U}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(O.length/3),S=n(m.labelFont[E],m.labels[E],{fontStyle:m.labelFontStyle[E],fontWeight:m.labelFontWeight[E],fontVariant:m.labelFontVariant[E],textAlign:"center"}).data,w=m.labelSize[E],b=0;b<S.length;b+=2)O.push(S[b]*w,-S[b+1]*w,0);this.labelCount[E]=Math.floor(O.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(O.length/3),S=n(m.titleFont,m.title,{fontStyle:m.titleFontStyle,fontWeight:m.titleFontWeight,fontVariant:m.titleFontVariant}).data,w=m.titleSize,b=0;b<S.length;b+=2)O.push(S[b]*w,-S[b+1]*w,0);this.titleCount=Math.floor(O.length/3)-this.titleOffset,this.vbo.update(O)},y.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(p,s,t){p.exports=function(d){var v=d.gl,g=new u(v,i(v,[v.drawingBufferWidth,v.drawingBufferHeight]));return g.grid=r(g),g.text=n(g),g.line=a(g),g.box=l(g),g.update(d),g};var i=t(3589),r=t(1913),n=t(2142),a=t(4747),l=t(8120);function u(d,v){this.gl=d,this.pickBuffer=v,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=u.prototype;function c(d){for(var v=d.slice(),g=0;g<v.length;++g)v[g]=v[g].slice();return v}function x(d,v){return d.x-v.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var d=this.gl,v=this.screenBox,g=this.viewBox,y=this.dataBox,m=this.pixelRatio,b=this.grid,f=this.line,S=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]);var E=this.borderColor;d.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),d.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var O=this.backgroundColor;d.clearColor(O[0]*O[3],O[1]*O[3],O[2]*O[3],O[3]),d.clear(d.COLOR_BUFFER_BIT),b.draw();var C=this.zeroLineEnable,P=this.zeroLineColor,D=this.zeroLineWidth;if(C[0]||C[1]){f.bind();for(var U=0;U<2;++U)if(C[U]&&y[U]<=0&&y[U+2]>=0){var I=v[U]-y[U]*(v[U+2]-v[U])/(y[U+2]-y[U]);U===0?f.drawLine(I,v[1],I,v[3],D[U],P[U]):f.drawLine(v[0],I,v[2],I,D[U],P[U])}}for(U=0;U<w.length;++U)w[U].draw();d.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]),d.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),this.grid.drawTickMarks(),f.bind();var N=this.borderLineEnable,W=this.borderLineWidth,F=this.borderLineColor;for(N[1]&&f.drawLine(g[0],g[1]-.5*W[1]*m,g[0],g[3]+.5*W[3]*m,W[1],F[1]),N[0]&&f.drawLine(g[0]-.5*W[0]*m,g[1],g[2]+.5*W[2]*m,g[1],W[0],F[0]),N[3]&&f.drawLine(g[2],g[1]-.5*W[1]*m,g[2],g[3]+.5*W[3]*m,W[3],F[3]),N[2]&&f.drawLine(g[0]-.5*W[0]*m,g[3],g[2]+.5*W[2]*m,g[3],W[2],F[2]),S.bind(),U=0;U<2;++U)S.drawTicks(U);this.titleEnable&&S.drawTitle();var j=this.overlays;for(U=0;U<j.length;++U)j[U].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}},h.drawPick=function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var v=1,g=this.objects,y=0;y<g.length;++y)v=g[y].drawPick(v);d.end()}},h.pick=function(d,v){if(!this.static){var g=this.pixelRatio,y=this.pickPixelRatio,m=this.viewBox,b=0|Math.round((d-m[0]/g)*y),f=0|Math.round((v-m[1]/g)*y),S=this.pickBuffer.query(b,f,this.pickRadius);if(!S)return null;for(var w=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,O=0;O<E.length;++O){var C=E[O].pick(b,f,w);if(C)return C}return null}},h.setScreenBox=function(d){var v=this.screenBox,g=this.pixelRatio;v[0]=0|Math.round(d[0]*g),v[1]=0|Math.round(d[1]*g),v[2]=0|Math.round(d[2]*g),v[3]=0|Math.round(d[3]*g),this.setDirty()},h.setDataBox=function(d){var v=this.dataBox;(v[0]!==d[0]||v[1]!==d[1]||v[2]!==d[2]||v[3]!==d[3])&&(v[0]=d[0],v[1]=d[1],v[2]=d[2],v[3]=d[3],this.setDirty())},h.setViewBox=function(d){var v=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(d[0]*v),g[1]=0|Math.round(d[1]*v),g[2]=0|Math.round(d[2]*v),g[3]=0|Math.round(d[3]*v);var y=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((d[2]-d[0])*y),0|Math.round((d[3]-d[1])*y)],this.setDirty()},h.update=function(d){d=d||{};var v=this.gl;this.pixelRatio=d.pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(d.screenBox||[0,0,v.drawingBufferWidth/g,v.drawingBufferHeight/g]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var y=this.viewBox,m=(y[2]-y[0])/(y[3]-y[1]);this.setDataBox(d.dataBox||[-10,-10/m,10,10/m]),this.borderColor=d.borderColor!==!1&&(d.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(y[0]+y[2])/g,(y[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=d.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var S=0;S<2;++S){var w=b[S].slice(0);w.length!==0&&(w.sort(x),f[S]=Math.min(f[S],w[0].x),f[S+2]=Math.max(f[S+2],w[w.length-1].x))}this.grid.update({bounds:f,ticks:b}),this.text.update({bounds:f,ticks:b,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],labelFontStyle:d.labelFontStyle||["normal","normal"],labelFontWeight:d.labelFontWeight||["normal","normal"],labelFontVariant:d.labelFontVariant||["normal","normal"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif",titleFontStyle:d.titleFontStyle||"normal",titleFontWeight:d.titleFontWeight||"normal",titleFontVariant:d.titleFontVariant||"normal"}),this.static=!!d.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();for(this.objects.length=0,d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},h.removeObject=function(d){for(var v=this.objects,g=0;g<v.length;++g)if(v[g]===d){v.splice(g,1),this.setDirty();break}},h.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},h.removeOverlay=function(d){for(var v=this.overlays,g=0;g<v.length;++g)if(v[g]===d){v.splice(g,1),this.setOverlayDirty();break}}},4437:function(p,s,t){p.exports=function(h,c){h=h||document.body;var x=[.01,1/0];"distanceLimits"in(c=c||{})&&(x[0]=c.distanceLimits[0],x[1]=c.distanceLimits[1]),"zoomMin"in c&&(x[0]=c.zoomMin),"zoomMax"in c&&(x[1]=c.zoomMax);var d=r({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:x}),v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,y=h.clientWidth,m=h.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:d,element:h,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:d.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var f=i(),S=this.delay,w=f-2*S;d.idle(f-S),d.recalcMatrix(w),d.flush(f-(100+2*S));for(var E=!0,O=d.computedMatrix,C=0;C<16;++C)E=E&&v[C]===O[C],v[C]=O[C];var P=h.clientWidth===y&&h.clientHeight===m;return y=h.clientWidth,m=h.clientHeight,E?!P:(g=Math.exp(d.computedRadius[0]),!0)},lookAt:function(f,S,w){d.lookAt(d.lastT(),f,S,w)},rotate:function(f,S,w){d.rotate(d.lastT(),f,S,w)},pan:function(f,S,w){d.pan(d.lastT(),f,S,w)},translate:function(f,S,w){d.translate(d.lastT(),f,S,w)}};return Object.defineProperties(b,{matrix:{get:function(){return d.computedMatrix},set:function(f){return d.setMatrix(d.lastT(),f),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(f){var S=d.computedUp.slice(),w=d.computedEye.slice(),E=d.computedCenter.slice();if(d.setMode(f),f==="turntable"){var O=i();d._active.lookAt(O,w,E,S),d._active.lookAt(O+500,w,E,[0,0,1]),d._active.flush(O)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(f){return d.lookAt(d.lastT(),null,f),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(f){return d.lookAt(d.lastT(),f),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(f){return d.lookAt(d.lastT(),null,null,f),d.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(f){return d.setDistance(d.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(x)},set:function(f){return d.setDistanceLimits(f),f},enumerable:!0}}),h.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){function f(S,w,E,O){var C=b.keyBindingMode;if(C!==!1){var P=C==="rotate",D=C==="pan",U=C==="zoom",I=!!O.control,N=!!O.alt,W=!!O.shift,F=!!(1&S),j=!!(2&S),H=!!(4&S),te=1/h.clientHeight,Q=te*(w-b._lastX),$=te*(E-b._lastY),K=b.flipX?1:-1,X=b.flipY?1:-1,Y=Math.PI*b.rotateSpeed,re=i();if(b._lastX!==-1&&b._lastY!==-1&&((P&&F&&!I&&!N&&!W||F&&!I&&!N&&W)&&d.rotate(re,K*Y*Q,-X*Y*$,0),(D&&F&&!I&&!N&&!W||j||F&&I&&!N&&!W)&&d.pan(re,-b.translateSpeed*Q*g,b.translateSpeed*$*g,0),U&&F&&!I&&!N&&!W||H||F&&!I&&N&&!W)){var se=-b.zoomSpeed*$/window.innerHeight*(re-d.lastT())*100;d.pan(re,0,0,g*(Math.exp(se)-1))}return b._lastX=w,b._lastY=E,b._lastMods=O,!0}}b.mouseListener=n(h,f),h.addEventListener("touchstart",function(S){var w=l(S.changedTouches[0],h);f(0,w[0],w[1],b._lastMods),f(1,w[0],w[1],b._lastMods)},!!u&&{passive:!0}),h.addEventListener("touchmove",function(S){var w=l(S.changedTouches[0],h);f(1,w[0],w[1],b._lastMods),S.preventDefault()},!!u&&{passive:!1}),h.addEventListener("touchend",function(S){f(0,b._lastX,b._lastY,b._lastMods)},!!u&&{passive:!0}),b.wheelListener=a(h,function(S,w){if(b.keyBindingMode!==!1&&b.enableWheel){var E=b.flipX?1:-1,O=b.flipY?1:-1,C=i();if(Math.abs(S)>Math.abs(w))d.rotate(C,0,0,-S*E*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var P=-b.zoomSpeed*O*w/window.innerHeight*(C-d.lastT())/20;d.pan(C,0,0,g*(Math.exp(P)-1))}}},!0)},b.enableMouseListeners(),b};var i=t(3025),r=t(6296),n=t(351),a=t(8512),l=t(24),u=t(7520)},799:function(p,s,t){var i=t(3236),r=t(9405),n=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);p.exports=function(l){return r(l,n,a,null,[{name:"position",type:"vec2"}])}},4100:function(p,s,t){var i=t(4437),r=t(3837),n=t(5445),a=t(4449),l=t(3589),u=t(2260),h=t(7169),c=t(351),x=t(4772),d=t(4040),v=t(799),g=t(9216)({tablet:!0,featureDetect:!0});function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(f){var S=Math.round(Math.log(Math.abs(f))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(f*w)/w}return S>0?(w=Math.round(Math.pow(10,S)),Math.ceil(f/w)*w):Math.ceil(f)}function b(f){return typeof f!="boolean"||f}p.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var S=f.canvas;S||(S=document.createElement("canvas"),f.container?f.container.appendChild(S):document.body.appendChild(S));var w=f.gl;if(w||(f.glOptions&&(g=!!f.glOptions.preserveDrawingBuffer),w=function(Me,Pe){var ge=null;try{(ge=Me.getContext("webgl",Pe))||(ge=Me.getContext("experimental-webgl",Pe))}catch{return null}return ge}(S,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!w)throw new Error("webgl not supported");var E=f.bounds||[[-10,-10,-10],[10,10,10]],O=new y,C=u(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!g}),P=v(w),D=f.cameraObject&&f.cameraObject._ortho===!0||f.camera.projection&&f.camera.projection.type==="orthographic"||!1,U={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:D},I=f.axes||{},N=r(w,I);N.enable=!I.disable;var W=f.spikes||{},F=a(w,W),j=[],H=[],te=[],Q=[],$=!0,K=!0,X={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Y=(K=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),re=f.cameraObject||i(S,U),se={gl:w,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:S,selection:O,camera:re,axes:N,axesPixels:null,spikes:F,bounds:E,objects:j,shape:Y,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:b(f.autoResize),autoBounds:b(f.autoBounds),autoScale:!!f.autoScale,autoCenter:b(f.autoCenter),clipToBounds:b(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:X,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Me){this.aspect[0]=Me.x,this.aspect[1]=Me.y,this.aspect[2]=Me.z,K=!0},setBounds:function(Me,Pe){this.bounds[0][Me]=Pe.min,this.bounds[1][Me]=Pe.max},setClearColor:function(Me){this.clearColor=Me},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[w.drawingBufferWidth/se.pixelRatio|0,w.drawingBufferHeight/se.pixelRatio|0];function ce(){if(!se._stopped&&se.autoResize){var Me=S.parentNode,Pe=1,ge=1;Me&&Me!==document.body?(Pe=Me.clientWidth,ge=Me.clientHeight):(Pe=window.innerWidth,ge=window.innerHeight);var oe=0|Math.ceil(Pe*se.pixelRatio),ie=0|Math.ceil(ge*se.pixelRatio);if(oe!==S.width||ie!==S.height){S.width=oe,S.height=ie;var de=S.style;de.position=de.position||"absolute",de.left="0px",de.top="0px",de.width=Pe+"px",de.height=ge+"px",$=!0}}}function fe(){for(var Me=j.length,Pe=Q.length,ge=0;ge<Pe;++ge)te[ge]=0;e:for(ge=0;ge<Me;++ge){var oe=j[ge],ie=oe.pickSlots;if(ie){for(var de=0;de<Pe;++de)if(te[de]+ie<255){H[ge]=de,oe.setPickBase(te[de]+1),te[de]+=ie;continue e}var Se=l(w,Y);H[ge]=Pe,Q.push(Se),te.push(ie),oe.setPickBase(1),Pe+=1}else H[ge]=-1}for(;Pe>0&&te[Pe-1]===0;)te.pop(),Q.pop().dispose()}function he(){if(se.contextLost)return!0;w.isContextLost()&&(se.contextLost=!0,se.mouseListener.enabled=!1,se.selection.object=null,se.oncontextloss&&se.oncontextloss())}se.autoResize&&ce(),window.addEventListener("resize",ce),se.update=function(Me){se._stopped||($=!0,K=!0)},se.add=function(Me){se._stopped||(Me.axes=N,j.push(Me),H.push(-1),$=!0,K=!0,fe())},se.remove=function(Me){if(!se._stopped){var Pe=j.indexOf(Me);Pe<0||(j.splice(Pe,1),H.pop(),$=!0,K=!0,fe())}},se.dispose=function(){if(!se._stopped&&(se._stopped=!0,window.removeEventListener("resize",ce),S.removeEventListener("webglcontextlost",he),se.mouseListener.enabled=!1,!se.contextLost)){N.dispose(),F.dispose();for(var Me=0;Me<j.length;++Me)j[Me].dispose();for(C.dispose(),Me=0;Me<Q.length;++Me)Q[Me].dispose();P.dispose(),w=null,N=null,F=null,j=[]}},se._mouseRotating=!1,se._prevButtons=0,se.enableMouseListeners=function(){se.mouseListener=c(S,function(Me,Pe,ge){if(!se._stopped){var oe=Q.length,ie=j.length,de=O.object;O.distance=1/0,O.mouse[0]=Pe,O.mouse[1]=ge,O.object=null,O.screen=null,O.dataCoordinate=O.dataPosition=null;var Se=!1;if(Me&&se._prevButtons)se._mouseRotating=!0;else{se._mouseRotating&&(K=!0),se._mouseRotating=!1;for(var _e=0;_e<oe;++_e){var we=Q[_e].query(Pe,ae[1]-ge-1,se.pickRadius);if(we){if(we.distance>O.distance)continue;for(var Ae=0;Ae<ie;++Ae){var Oe=j[Ae];if(H[Ae]===_e){var ze=Oe.pick(we);ze&&(O.buttons=Me,O.screen=we.coord,O.distance=we.distance,O.object=Oe,O.index=ze.distance,O.dataPosition=ze.position,O.dataCoordinate=ze.dataCoordinate,O.data=ze,Se=!0)}}}}}de&&de!==O.object&&(de.highlight&&de.highlight(null),$=!0),O.object&&(O.object.highlight&&O.object.highlight(O.data),$=!0),(Se=Se||O.object!==de)&&se.onselect&&se.onselect(O),1&Me&&!(1&se._prevButtons)&&se.onclick&&se.onclick(O),se._prevButtons=Me}})},S.addEventListener("webglcontextlost",he);var ve=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ye=[ve[0].slice(),ve[1].slice()];function me(){if(!he()){ce();var Me=se.camera.tick();X.view=se.camera.matrix,$=$||Me,K=K||Me,N.pixelRatio=se.pixelRatio,F.pixelRatio=se.pixelRatio;var Pe=j.length,ge=ve[0],oe=ve[1];ge[0]=ge[1]=ge[2]=1/0,oe[0]=oe[1]=oe[2]=-1/0;for(var ie=0;ie<Pe;++ie){(Ee=j[ie]).pixelRatio=se.pixelRatio,Ee.axes=se.axes,$=$||!!Ee.dirty,K=K||!!Ee.dirty;var de=Ee.bounds;if(de)for(var Se=de[0],_e=de[1],we=0;we<3;++we)ge[we]=Math.min(ge[we],Se[we]),oe[we]=Math.max(oe[we],_e[we])}var Ae=se.bounds;if(se.autoBounds)for(we=0;we<3;++we){if(oe[we]<ge[we])ge[we]=-1,oe[we]=1;else{ge[we]===oe[we]&&(ge[we]-=1,oe[we]+=1);var Oe=.05*(oe[we]-ge[we]);ge[we]=ge[we]-Oe,oe[we]=oe[we]+Oe}Ae[0][we]=ge[we],Ae[1][we]=oe[we]}var ze=!1;for(we=0;we<3;++we)ze=ze||ye[0][we]!==Ae[0][we]||ye[1][we]!==Ae[1][we],ye[0][we]=Ae[0][we],ye[1][we]=Ae[1][we];if(K=K||ze,$=$||ze){if(ze){var pe=[0,0,0];for(ie=0;ie<3;++ie)pe[ie]=m((Ae[1][ie]-Ae[0][ie])/10);N.autoTicks?N.update({bounds:Ae,tickSpacing:pe}):N.update({bounds:Ae})}var be=w.drawingBufferWidth,ke=w.drawingBufferHeight;for(Y[0]=be,Y[1]=ke,ae[0]=0|Math.max(be/se.pixelRatio,1),ae[1]=0|Math.max(ke/se.pixelRatio,1),function(Be,Ve){var Ze=Be.bounds,rt=Be.cameraParams,it=rt.projection,dt=rt.model,vt=Be.gl.drawingBufferWidth,ht=Be.gl.drawingBufferHeight,Qe=Be.zNear,Je=Be.zFar,Tt=Be.fovy,Ot=vt/ht;Ve?(d(it,-Ot,Ot,-1,1,Qe,Je),rt._ortho=!0):(x(it,Tt,Ot,Qe,Je),rt._ortho=!1);for(var Pt=0;Pt<16;++Pt)dt[Pt]=0;dt[15]=1;var Mt=0;for(Pt=0;Pt<3;++Pt)Mt=Math.max(Mt,Ze[1][Pt]-Ze[0][Pt]);for(Pt=0;Pt<3;++Pt)Be.autoScale?dt[5*Pt]=Be.aspect[Pt]/(Ze[1][Pt]-Ze[0][Pt]):dt[5*Pt]=1/Mt,Be.autoCenter&&(dt[12+Pt]=.5*-dt[5*Pt]*(Ze[0][Pt]+Ze[1][Pt]))}(se,D),ie=0;ie<Pe;++ie)(Ee=j[ie]).axesBounds=Ae,se.clipToBounds&&(Ee.clipBounds=Ae);O.object&&(se.snapToData?F.position=O.dataCoordinate:F.position=O.dataPosition,F.bounds=Ae),K&&(K=!1,function(){if(!he()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var Be=j.length,Ve=Q.length,Ze=0;Ze<Ve;++Ze){var rt=Q[Ze];rt.shape=ae,rt.begin();for(var it=0;it<Be;++it)if(H[it]===Ze){var dt=j[it];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(X))}rt.end()}}}()),se.axesPixels=n(se.axes,X,be,ke),se.onrender&&se.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,be,ke),se.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var Ie=!1;for(N.enable&&(Ie=Ie||N.isTransparent(),N.draw(X)),F.axes=N,O.object&&F.draw(X),w.disable(w.CULL_FACE),ie=0;ie<Pe;++ie)(Ee=j[ie]).axes=N,Ee.pixelRatio=se.pixelRatio,Ee.isOpaque&&Ee.isOpaque()&&Ee.draw(X),Ee.isTransparent&&Ee.isTransparent()&&(Ie=!0);if(Ie){for(C.shape=Y,C.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),N.enable&&N.isTransparent()&&N.drawTransparent(X),ie=0;ie<Pe;++ie)(Ee=j[ie]).isOpaque&&Ee.isOpaque()&&Ee.draw(X);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),N.isTransparent()&&N.drawTransparent(X),ie=0;ie<Pe;++ie){var Ee;(Ee=j[ie]).isTransparent&&Ee.isTransparent()&&Ee.drawTransparent(X)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),P.bind(),C.color[0].bind(0),P.uniforms.accumBuffer=0,h(w),w.disable(w.BLEND)}for($=!1,ie=0;ie<Pe;++ie)j[ie].dirty=!1}}}return se.enableMouseListeners(),function Me(){se._stopped||se.contextLost||(me(),requestAnimationFrame(Me))}(),se.redraw=function(){se._stopped||($=!0,me())},se},createCamera:i}},6640:function(p,s,t){var i=t(3236);s.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(p,s,t){var i=t(9405),r=t(2762),n=t(1888),a=t(6640);function l(x,d,v,g,y){this.plot=x,this.offsetBuffer=d,this.pickBuffer=v,this.shader=g,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}p.exports=function(x,d){var v=x.gl,g=new l(x,r(v),r(v),i(v,a.pointVertex,a.pointFragment),i(v,a.pickVertex,a.pickFragment));return g.update(d),x.addObject(g),g};var u,h,c=l.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(x){var d;function v(w,E){return w in x?x[w]:E}x=x||{},this.sizeMin=v("sizeMin",.5),this.sizeMax=v("sizeMax",20),this.color=v("color",[1,0,0,1]).slice(),this.areaRatio=v("areaRatio",1),this.borderColor=v("borderColor",[0,0,0,1]).slice(),this.blend=v("blend",!1);var g=x.positions.length>>>1,y=x.positions instanceof Float32Array,m=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=g,b=x.positions,f=y?b:n.mallocFloat32(b.length),S=m?x.idToIndex:n.mallocInt32(g);if(y||f.set(b),!m)for(f.set(b),d=0;d<g;d++)S[d]=d;this.points=b,this.offsetBuffer.update(f),this.pickBuffer.update(S),y||n.free(f),m||n.free(S),this.pointCount=g,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(x){var d=x!==void 0,v=d?this.pickShader:this.shader,g=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return x;var m=y[2]-y[0],b=y[3]-y[1],f=function(O,C){var P,D=0,U=O.length>>>1;for(P=0;P<U;P++){var I=O[2*P],N=O[2*P+1];I>=C[0]&&I<=C[2]&&N>=C[1]&&N<=C[3]&&D++}return D}(this.points,y),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));u[0]=2/m,u[4]=2/b,u[6]=-2*y[0]/m-1,u[7]=-2*y[1]/b-1,this.offsetBuffer.bind(),v.bind(),v.attributes.position.pointer(),v.uniforms.matrix=u,v.uniforms.color=this.color,v.uniforms.borderColor=this.borderColor,v.uniforms.pointCloud=S<5,v.uniforms.pointSize=S,v.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(h[0]=255&x,h[1]=x>>8&255,h[2]=x>>16&255,h[3]=x>>24&255,this.pickBuffer.bind(),v.attributes.pickId.pointer(g.UNSIGNED_BYTE),v.uniforms.pickOffset=h,this.pickOffset=x);var w=g.getParameter(g.BLEND),E=g.getParameter(g.DITHER);return w&&!this.blend&&g.disable(g.BLEND),E&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),w&&!this.blend&&g.enable(g.BLEND),E&&g.enable(g.DITHER),x+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(x,d,v){var g=this.pickOffset,y=this.pointCount;if(v<g||v>=g+y)return null;var m=v-g,b=this.points;return{object:this,pointId:m,dataCoord:[b[2*m],b[2*m+1]]}}},783:function(p){p.exports=function(s,t,i,r){var n,a,l,u,h,c=t[0],x=t[1],d=t[2],v=t[3],g=i[0],y=i[1],m=i[2],b=i[3];return(a=c*g+x*y+d*m+v*b)<0&&(a=-a,g=-g,y=-y,m=-m,b=-b),1-a>1e-6?(n=Math.acos(a),l=Math.sin(n),u=Math.sin((1-r)*n)/l,h=Math.sin(r*n)/l):(u=1-r,h=r),s[0]=u*c+h*g,s[1]=u*x+h*y,s[2]=u*d+h*m,s[3]=u*v+h*b,s}},5964:function(p){p.exports=function(s){return s||s===0?s.toString():""}},9366:function(p,s,t){var i=t(4359);p.exports=function(n,a,l){var u=[a.style,a.weight,a.variant,a.family].join("_"),h=r[u];if(h||(h=r[u]={}),n in h)return h[n];var c={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a.family,fontStyle:a.style,fontWeight:a.weight,fontVariant:a.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},x=i(n,c);c.triangles=!1;var d,v,g=i(n,c);if(l&&l!==1){for(d=0;d<x.positions.length;++d)for(v=0;v<x.positions[d].length;++v)x.positions[d][v]/=l;for(d=0;d<g.positions.length;++d)for(v=0;v<g.positions[d].length;++v)g.positions[d][v]/=l}var y=[[1/0,1/0],[-1/0,-1/0]],m=g.positions.length;for(d=0;d<m;++d){var b=g.positions[d];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],b[v]),y[1][v]=Math.max(y[1][v],b[v])}return h[n]=[x,g,y]};var r={}},1283:function(p,s,t){var i=t(9405),r=t(3236),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:n,fragment:u,attributes:c},d={vertex:a,fragment:u,attributes:c},v={vertex:l,fragment:u,attributes:c},g={vertex:n,fragment:h,attributes:c},y={vertex:a,fragment:h,attributes:c},m={vertex:l,fragment:h,attributes:c};function b(f,S){var w=i(f,S),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}s.createPerspective=function(f){return b(f,x)},s.createOrtho=function(f){return b(f,d)},s.createProject=function(f){return b(f,v)},s.createPickPerspective=function(f){return b(f,g)},s.createPickOrtho=function(f){return b(f,y)},s.createPickProject=function(f){return b(f,m)}},8418:function(p,s,t){var i=t(5219),r=t(2762),n=t(8116),a=t(1888),l=t(6760),u=t(1283),h=t(9366),c=t(5964),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=ArrayBuffer,v=DataView;function g($){return Array.isArray($)||function(K){return d.isView(K)&&!(K instanceof v)}($)}function y($,K){var X=$[0],Y=$[1],re=$[2],se=$[3];return $[0]=K[0]*X+K[4]*Y+K[8]*re+K[12]*se,$[1]=K[1]*X+K[5]*Y+K[9]*re+K[13]*se,$[2]=K[2]*X+K[6]*Y+K[10]*re+K[14]*se,$[3]=K[3]*X+K[7]*Y+K[11]*re+K[15]*se,$}function m($,K,X,Y){return y(Y,Y),y(Y,Y),y(Y,Y)}function b($,K){this.index=$,this.dataCoordinate=this.position=K}function f($){return $===!0||$>1?1:$}function S($,K,X,Y,re,se,ae,ce,fe,he,ve,ye){this.gl=$,this.pixelRatio=1,this.shader=K,this.orthoShader=X,this.projectShader=Y,this.pointBuffer=re,this.colorBuffer=se,this.glyphBuffer=ae,this.idBuffer=ce,this.vao=fe,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=he,this.pickOrthoShader=ve,this.pickProjectShader=ye,this.points=[],this._selectResult=new b(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}p.exports=function($){var K=$.gl,X=u.createPerspective(K),Y=u.createOrtho(K),re=u.createProject(K),se=u.createPickPerspective(K),ae=u.createPickOrtho(K),ce=u.createPickProject(K),fe=r(K),he=r(K),ve=r(K),ye=r(K),me=new S(K,X,Y,re,fe,he,ve,ye,n(K,[{buffer:fe,size:3,type:K.FLOAT},{buffer:he,size:4,type:K.FLOAT},{buffer:ve,size:2,type:K.FLOAT},{buffer:ye,size:4,type:K.UNSIGNED_BYTE,normalized:!0}]),se,ae,ce);return me.update($),me};var w=S.prototype;w.pickSlots=1,w.setPickBase=function($){this.pickId=$},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var $=0;$<3;++$)if(this.axesProject[$]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var $=0;$<3;++$)if(this.axesProject[$]&&!this.projectHasAlpha)return!0;return!1};var E=[0,0],O=[0,0,0],C=[0,0,0],P=[0,0,0,1],D=[0,0,0,1],U=x.slice(),I=[0,0,0],N=[[0,0,0],[0,0,0]];function W($){return $[0]=$[1]=$[2]=0,$}function F($,K){return $[0]=K[0],$[1]=K[1],$[2]=K[2],$[3]=1,$}function j($,K,X,Y){return $[0]=K[0],$[1]=K[1],$[2]=K[2],$[X]=Y,$}var H=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function te($,K,X,Y,re,se,ae){var ce=X.gl;if((se===X.projectHasAlpha||ae)&&function(he,ve,ye,me){var Me,Pe=ve.axesProject,ge=ve.gl,oe=he.uniforms,ie=ye.model||x,de=ye.view||x,Se=ye.projection||x,_e=ve.axesBounds,we=function(dt){for(var vt=N,ht=0;ht<2;++ht)for(var Qe=0;Qe<3;++Qe)vt[ht][Qe]=Math.max(Math.min(dt[ht][Qe],1e8),-1e8);return vt}(ve.clipBounds);Me=ve.axes&&ve.axes.lastCubeProps?ve.axes.lastCubeProps.axis:[1,1,1],E[0]=2/ge.drawingBufferWidth,E[1]=2/ge.drawingBufferHeight,he.bind(),oe.view=de,oe.projection=Se,oe.screenSize=E,oe.highlightId=ve.highlightId,oe.highlightScale=ve.highlightScale,oe.clipBounds=we,oe.pickGroup=ve.pickId/255,oe.pixelRatio=me;for(var Ae=0;Ae<3;++Ae)if(Pe[Ae]){oe.scale=ve.projectScale[Ae],oe.opacity=ve.projectOpacity[Ae];for(var Oe=U,ze=0;ze<16;++ze)Oe[ze]=0;for(ze=0;ze<4;++ze)Oe[5*ze]=1;Oe[5*Ae]=0,Me[Ae]<0?Oe[12+Ae]=_e[0][Ae]:Oe[12+Ae]=_e[1][Ae],l(Oe,ie,Oe),oe.model=Oe;var pe=(Ae+1)%3,be=(Ae+2)%3,ke=W(O),Ie=W(C);ke[pe]=1,Ie[be]=1;var Ee=m(0,0,0,F(P,ke)),Be=m(0,0,0,F(D,Ie));if(Math.abs(Ee[1])>Math.abs(Be[1])){var Ve=Ee;Ee=Be,Be=Ve,Ve=ke,ke=Ie,Ie=Ve;var Ze=pe;pe=be,be=Ze}Ee[0]<0&&(ke[pe]=-1),Be[1]>0&&(Ie[be]=-1);var rt=0,it=0;for(ze=0;ze<4;++ze)rt+=Math.pow(ie[4*pe+ze],2),it+=Math.pow(ie[4*be+ze],2);ke[pe]/=Math.sqrt(rt),Ie[be]/=Math.sqrt(it),oe.axes[0]=ke,oe.axes[1]=Ie,oe.fragClipBounds[0]=j(I,we[0],Ae,-1e8),oe.fragClipBounds[1]=j(I,we[1],Ae,1e8),ve.vao.bind(),ve.vao.draw(ge.TRIANGLES,ve.vertexCount),ve.lineWidth>0&&(ge.lineWidth(ve.lineWidth*me),ve.vao.draw(ge.LINES,ve.lineVertexCount,ve.vertexCount)),ve.vao.unbind()}}(K,X,Y,re),se===X.hasAlpha||ae){$.bind();var fe=$.uniforms;fe.model=Y.model||x,fe.view=Y.view||x,fe.projection=Y.projection||x,E[0]=2/ce.drawingBufferWidth,E[1]=2/ce.drawingBufferHeight,fe.screenSize=E,fe.highlightId=X.highlightId,fe.highlightScale=X.highlightScale,fe.fragClipBounds=H,fe.clipBounds=X.axes.bounds,fe.opacity=X.opacity,fe.pickGroup=X.pickId/255,fe.pixelRatio=re,X.vao.bind(),X.vao.draw(ce.TRIANGLES,X.vertexCount),X.lineWidth>0&&(ce.lineWidth(X.lineWidth*re),X.vao.draw(ce.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}function Q($,K,X,Y){var re;re=g($)?K<$.length?$[K]:void 0:$,re=c(re);var se=!0;i(re)&&(re="▼",se=!1),X||(X={});var ae=X.family;g(ae)&&(ae=ae[K]),ae||(ae="normal");var ce=X.weight;g(ce)&&(ce=ce[K]),ce||(ce="normal");var fe=X.style;g(fe)&&(fe=fe[K]),fe||(fe="normal");var he=X.variant;g(he)&&(he=he[K]),he||(he="normal");var ve=h(re,{family:ae,weight:ce,style:fe,variant:he},Y);return{mesh:(ve=h(re,X,Y))[0],lines:ve[1],bounds:ve[2],visible:se}}w.draw=function($){te(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,$,this.pixelRatio,!1,!1)},w.drawTransparent=function($){te(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,$,this.pixelRatio,!0,!1)},w.drawPick=function($){te(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,$,1,!0,!0)},w.pick=function($){if(!$||$.id!==this.pickId)return null;var K=$.value[2]+($.value[1]<<8)+($.value[0]<<16);if(K>=this.pointCount||K<0)return null;var X=this.points[K],Y=this._selectResult;Y.index=K;for(var re=0;re<3;++re)Y.position[re]=Y.dataCoordinate[re]=X[re];return Y},w.highlight=function($){if($){var K=$.index,X=255&K,Y=K>>8&255,re=K>>16&255;this.highlightId=[X/255,Y/255,re/255,0]}else this.highlightId=[1,1,1,1]},w.update=function($){if("perspective"in($=$||{})&&(this.useOrtho=!$.perspective),"orthographic"in $&&(this.useOrtho=!!$.orthographic),"lineWidth"in $&&(this.lineWidth=$.lineWidth),"project"in $)if(g($.project))this.axesProject=$.project;else{var K=!!$.project;this.axesProject=[K,K,K]}if("projectScale"in $)if(g($.projectScale))this.projectScale=$.projectScale.slice();else{var X=+$.projectScale;this.projectScale=[X,X,X]}if(this.projectHasAlpha=!1,"projectOpacity"in $){g($.projectOpacity)?this.projectOpacity=$.projectOpacity.slice():(X=+$.projectOpacity,this.projectOpacity=[X,X,X]);for(var Y=0;Y<3;++Y)this.projectOpacity[Y]=f(this.projectOpacity[Y]),this.projectOpacity[Y]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in $&&(this.opacity=f($.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var re,se,ae=$.position,ce={family:$.font||"normal",style:$.fontStyle||"normal",weight:$.fontWeight||"normal",variant:$.fontVariant||"normal"},fe=$.alignment||[0,0];if(fe.length===2)re=fe[0],se=fe[1];else for(re=[],se=[],Y=0;Y<fe.length;++Y)re[Y]=fe[Y][0],se[Y]=fe[Y][1];var he=[1/0,1/0,1/0],ve=[-1/0,-1/0,-1/0],ye=$.glyph,me=$.color,Me=$.size,Pe=$.angle,ge=$.lineColor,oe=-1,ie=0,de=0,Se=0;if(ae.length){Se=ae.length;e:for(Y=0;Y<Se;++Y){for(var _e=ae[Y],we=0;we<3;++we)if(isNaN(_e[we])||!isFinite(_e[we]))continue e;var Ae=(vt=Q(ye,Y,ce,this.pixelRatio)).mesh,Oe=vt.lines,ze=vt.bounds;ie+=3*Ae.cells.length,de+=2*Oe.edges.length}}var pe=ie+de,be=a.mallocFloat(3*pe),ke=a.mallocFloat(4*pe),Ie=a.mallocFloat(2*pe),Ee=a.mallocUint32(pe);if(pe>0){var Be=0,Ve=ie,Ze=[0,0,0,1],rt=[0,0,0,1],it=g(me)&&g(me[0]),dt=g(ge)&&g(ge[0]);e:for(Y=0;Y<Se;++Y){for(oe+=1,_e=ae[Y],we=0;we<3;++we){if(isNaN(_e[we])||!isFinite(_e[we]))continue e;ve[we]=Math.max(ve[we],_e[we]),he[we]=Math.min(he[we],_e[we])}Ae=(vt=Q(ye,Y,ce,this.pixelRatio)).mesh,Oe=vt.lines,ze=vt.bounds;var vt,ht=vt.visible;if(ht)if(g(me)){if((Qe=it?Y<me.length?me[Y]:[0,0,0,0]:me).length===3){for(we=0;we<3;++we)Ze[we]=Qe[we];Ze[3]=1}else if(Qe.length===4){for(we=0;we<4;++we)Ze[we]=Qe[we];!this.hasAlpha&&Qe[3]<1&&(this.hasAlpha=!0)}}else Ze[0]=Ze[1]=Ze[2]=0,Ze[3]=1;else Ze=[1,1,1,0];if(ht)if(g(ge)){var Qe;if((Qe=dt?Y<ge.length?ge[Y]:[0,0,0,0]:ge).length===3){for(we=0;we<3;++we)rt[we]=Qe[we];rt[we]=1}else if(Qe.length===4){for(we=0;we<4;++we)rt[we]=Qe[we];!this.hasAlpha&&Qe[3]<1&&(this.hasAlpha=!0)}}else rt[0]=rt[1]=rt[2]=0,rt[3]=1;else rt=[1,1,1,0];var Je=.5;ht?g(Me)?Je=Y<Me.length?+Me[Y]:12:Me?Je=+Me:this.useOrtho&&(Je=12):Je=0;var Tt=0;g(Pe)?Tt=Y<Pe.length?+Pe[Y]:0:Pe&&(Tt=+Pe);var Ot=Math.cos(Tt),Pt=Math.sin(Tt);for(_e=ae[Y],we=0;we<3;++we)ve[we]=Math.max(ve[we],_e[we]),he[we]=Math.min(he[we],_e[we]);var Mt=re,He=se;Mt=0,g(re)?Mt=Y<re.length?re[Y]:0:re&&(Mt=re),He=0,g(se)?He=Y<se.length?se[Y]:0:se&&(He=se);var Ye=[Mt*=Mt>0?1-ze[0][0]:Mt<0?1+ze[1][0]:1,He*=He>0?1-ze[0][1]:He<0?1+ze[1][1]:1],Ne=Ae.cells||[],We=Ae.positions||[];for(we=0;we<Ne.length;++we)for(var ot=Ne[we],tt=0;tt<3;++tt){for(var Re=0;Re<3;++Re)be[3*Be+Re]=_e[Re];for(Re=0;Re<4;++Re)ke[4*Be+Re]=Ze[Re];Ee[Be]=oe;var Fe=We[ot[tt]];Ie[2*Be]=Je*(Ot*Fe[0]-Pt*Fe[1]+Ye[0]),Ie[2*Be+1]=Je*(Pt*Fe[0]+Ot*Fe[1]+Ye[1]),Be+=1}for(Ne=Oe.edges,We=Oe.positions,we=0;we<Ne.length;++we)for(ot=Ne[we],tt=0;tt<2;++tt){for(Re=0;Re<3;++Re)be[3*Ve+Re]=_e[Re];for(Re=0;Re<4;++Re)ke[4*Ve+Re]=rt[Re];Ee[Ve]=oe,Fe=We[ot[tt]],Ie[2*Ve]=Je*(Ot*Fe[0]-Pt*Fe[1]+Ye[0]),Ie[2*Ve+1]=Je*(Pt*Fe[0]+Ot*Fe[1]+Ye[1]),Ve+=1}}}this.bounds=[he,ve],this.points=ae,this.pointCount=ae.length,this.vertexCount=ie,this.lineVertexCount=de,this.pointBuffer.update(be),this.colorBuffer.update(ke),this.glyphBuffer.update(Ie),this.idBuffer.update(Ee),a.free(be),a.free(ke),a.free(Ie),a.free(Ee)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(p,s,t){var i=t(3236);s.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(p,s,t){var i=t(9405),r=t(2762),n=t(4298);function a(u,h,c){this.plot=u,this.boxBuffer=h,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}p.exports=function(u,h){var c=u.gl,x=new a(u,r(c,[0,0,0,1,1,0,1,1]),i(c,n.boxVertex,n.boxFragment));return x.update(h),u.addOverlay(x),x};var l=a.prototype;l.draw=function(){if(this.enabled){var u=this.plot,h=this.selectBox,c=this.borderWidth,x=(this.innerFill,this.innerColor),d=(this.outerFill,this.outerColor),v=this.borderColor,g=u.box,y=u.screenBox,m=u.dataBox,b=u.viewBox,f=u.pixelRatio,S=(h[0]-m[0])*(b[2]-b[0])/(m[2]-m[0])+b[0],w=(h[1]-m[1])*(b[3]-b[1])/(m[3]-m[1])+b[1],E=(h[2]-m[0])*(b[2]-b[0])/(m[2]-m[0])+b[0],O=(h[3]-m[1])*(b[3]-b[1])/(m[3]-m[1])+b[1];if(S=Math.max(S,b[0]),w=Math.max(w,b[1]),E=Math.min(E,b[2]),O=Math.min(O,b[3]),!(E<S||O<w)){g.bind();var C=y[2]-y[0],P=y[3]-y[1];if(this.outerFill&&(g.drawBox(0,0,C,w,d),g.drawBox(0,w,S,O,d),g.drawBox(0,O,C,P,d),g.drawBox(E,w,C,O,d)),this.innerFill&&g.drawBox(S,w,E,O,x),c>0){var D=c*f;g.drawBox(S-D,w-D,E+D,w+D,v),g.drawBox(S-D,O-D,E+D,O+D,v),g.drawBox(S-D,w-D,S+D,O+D,v),g.drawBox(E-D,w-D,E+D,O+D,v)}}}},l.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(p,s,t){p.exports=function(c,x){var d=x[0],v=x[1];return new u(c,i(c,d,v,{}),r.mallocUint8(d*v*4))};var i=t(2260),r=t(1888),n=t(9618),a=t(8828).nextPow2;function l(c,x,d,v,g){this.coord=[c,x],this.id=d,this.value=v,this.distance=g}function u(c,x,d){this.gl=c,this.fbo=x,this.buffer=d,this._readTimeout=null;var v=this;this._readCallback=function(){v.gl&&(x.bind(),c.readPixels(0,0,x.shape[0],x.shape[1],c.RGBA,c.UNSIGNED_BYTE,v.buffer),v._readTimeout=null)}}var h=u.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var x=this.fbo.shape[0],d=this.fbo.shape[1];if(d*x*4>this.buffer.length){r.free(this.buffer);for(var v=this.buffer=r.mallocUint8(a(d*x*4)),g=0;g<d*x*4;++g)v[g]=255}return c}}}),h.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},h.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(c,x,d){if(!this.gl)return null;var v=this.fbo.shape.slice();c|=0,x|=0,typeof d!="number"&&(d=1);var g=0|Math.min(Math.max(c-d,0),v[0]),y=0|Math.min(Math.max(c+d,0),v[0]),m=0|Math.min(Math.max(x-d,0),v[1]),b=0|Math.min(Math.max(x+d,0),v[1]);if(y<=g||b<=m)return null;var f=[y-g,b-m],S=n(this.buffer,[f[0],f[1],4],[4,4*v[0],1],4*(g+v[0]*m)),w=function(C,P,D){for(var U=1e8,I=-1,N=-1,W=C.shape[0],F=C.shape[1],j=0;j<W;j++)for(var H=0;H<F;H++){var te=C.get(j,H,0),Q=C.get(j,H,1),$=C.get(j,H,2),K=C.get(j,H,3);if(te<255||Q<255||$<255||K<255){var X=P-j,Y=D-H,re=X*X+Y*Y;re<U&&(U=re,I=j,N=H)}}return[I,N,U]}(S.hi(f[0],f[1],1),d,d),E=w[0],O=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new l(E+g|0,O+m|0,S.get(E,O,0),[S.get(E,O,1),S.get(E,O,2),S.get(E,O,3)],Math.sqrt(w[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(p,s,t){var i=t(3327),r=t(8731),n=t(216),a=t(5091),l=t(2145),u=t(8866);function h(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=h.prototype;function x(d,v){return d.name<v.name?-1:1}c.bind=function(){var d;this.program||this._relink();var v=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(v>g)for(d=g;d<v;d++)this.gl.enableVertexAttribArray(d);else if(g>v)for(d=v;d<g;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=v,this.gl.useProgram(this.program)},c.dispose=function(){for(var d=this.gl.lastAttribCount,v=0;v<d;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(d,v,g,y){if(!v||arguments.length===1){var m=d;d=m.vertex,v=m.fragment,g=m.uniforms,y=m.attributes}var b=this,f=b.gl,S=b._vref;b._vref=a.shader(f,f.VERTEX_SHADER,d),S&&S.dispose(),b.vertShader=b._vref.shader;var w=this._fref;if(b._fref=a.shader(f,f.FRAGMENT_SHADER,v),w&&w.dispose(),b.fragShader=b._fref.shader,!g||!y){var E=f.createProgram();if(f.attachShader(E,b.fragShader),f.attachShader(E,b.vertShader),f.linkProgram(E),!f.getProgramParameter(E,f.LINK_STATUS)){var O=f.getProgramInfoLog(E);throw new u(O,"Error linking program:"+O)}g=g||l.uniforms(f,E),y=y||l.attributes(f,E),f.deleteProgram(E)}(y=y.slice()).sort(x);var C,P=[],D=[],U=[];for(C=0;C<y.length;++C){var I=y[C];if(I.type.indexOf("mat")>=0){for(var N=0|I.type.charAt(I.type.length-1),W=new Array(N),F=0;F<N;++F)W[F]=U.length,D.push(I.name+"["+F+"]"),typeof I.location=="number"?U.push(I.location+F):Array.isArray(I.location)&&I.location.length===N&&typeof I.location[F]=="number"?U.push(0|I.location[F]):U.push(-1);P.push({name:I.name,type:I.type,locations:W})}else P.push({name:I.name,type:I.type,locations:[U.length]}),D.push(I.name),typeof I.location=="number"?U.push(0|I.location):U.push(-1)}var j=0;for(C=0;C<U.length;++C)if(U[C]<0){for(;U.indexOf(j)>=0;)j+=1;U[C]=j}var H=new Array(g.length);function te(){b.program=a.program(f,b._vref,b._fref,D,U);for(var Q=0;Q<g.length;++Q)H[Q]=f.getUniformLocation(b.program,g[Q].name)}te(),b._relink=te,b.types={uniforms:n(g),attributes:n(y)},b.attributes=r(f,b,P,U),Object.defineProperty(b,"uniforms",i(f,b,g,H))},p.exports=function(d,v,g,y,m){var b=new h(d);return b.update(v,g,y,m),b}},8866:function(p){function s(t,i,r){this.shortMessage=i||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,p.exports=s},8731:function(p,s,t){p.exports=function(h,c,x,d){for(var v={},g=0,y=x.length;g<y;++g){var m=x[g],b=m.name,f=m.type,S=m.locations;switch(f){case"bool":case"int":case"float":l(h,c,S[0],d,1,v,b);break;default:if(f.indexOf("vec")>=0){if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+b+": "+f);l(h,c,S[0],d,w,v,b)}else{if(!(f.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+b+": "+f);var w;if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+b+": "+f);u(h,c,S,d,w,v,b)}}}return v};var i=t(8866);function r(h,c,x,d,v,g){this._gl=h,this._wrapper=c,this._index=x,this._locations=d,this._dimension=v,this._constFunc=g}var n=r.prototype;n.pointer=function(h,c,x,d){var v=this,g=v._gl,y=v._locations[v._index];g.vertexAttribPointer(y,v._dimension,h||g.FLOAT,!!c,x||0,d||0),g.enableVertexAttribArray(y)},n.set=function(h,c,x,d){return this._constFunc(this._locations[this._index],h,c,x,d)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,c,x){return x.length===void 0?h.vertexAttrib1f(c,x):h.vertexAttrib1fv(c,x)},function(h,c,x,d){return x.length===void 0?h.vertexAttrib2f(c,x,d):h.vertexAttrib2fv(c,x)},function(h,c,x,d,v){return x.length===void 0?h.vertexAttrib3f(c,x,d,v):h.vertexAttrib3fv(c,x)},function(h,c,x,d,v,g){return x.length===void 0?h.vertexAttrib4f(c,x,d,v,g):h.vertexAttrib4fv(c,x)}];function l(h,c,x,d,v,g,y){var m=a[v],b=new r(h,c,x,d,v,m);Object.defineProperty(g,y,{set:function(f){return h.disableVertexAttribArray(d[x]),m(h,d[x],f),f},get:function(){return b},enumerable:!0})}function u(h,c,x,d,v,g,y){for(var m=new Array(v),b=new Array(v),f=0;f<v;++f)l(h,c,x[f],d,v,m,f),b[f]=m[f];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var O=0;O<v;++O)b[O].location=E[O];else for(O=0;O<v;++O)b[O].location=E+O;return E},get:function(){for(var E=new Array(v),O=0;O<v;++O)E[O]=d[x[O]];return E},enumerable:!0}),m.pointer=function(E,O,C,P){E=E||h.FLOAT,O=!!O,C=C||v*v,P=P||0;for(var D=0;D<v;++D){var U=d[x[D]];h.vertexAttribPointer(U,v,E,O,C,P+D*v),h.enableVertexAttribArray(U)}};var S=new Array(v),w=h["vertexAttrib"+v+"fv"];Object.defineProperty(g,y,{set:function(E){for(var O=0;O<v;++O){var C=d[x[O]];if(h.disableVertexAttribArray(C),Array.isArray(E[0]))w.call(h,C,E[O]);else{for(var P=0;P<v;++P)S[P]=E[v*O+P];w.call(h,C,S)}}return E},get:function(){return m},enumerable:!0})}},3327:function(p,s,t){var i=t(216),r=t(8866);function n(l){return function(){return l}}function a(l,u){for(var h=new Array(l),c=0;c<l;++c)h[c]=u;return h}p.exports=function(l,u,h,c){function x(m){return function(b){for(var f=d("",m),S=0;S<f.length;++S){var w=f[S],E=w[0],O=w[1];if(c[O]){var C=b;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var P=E;if(E.indexOf(".")===0&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var D=P.indexOf("["),U=P.slice(0,D),I=P.slice(D+1,P.length-1);C=U?b[U][I]:b[I]}else C=b[P]}var N,W=h[O].type;switch(W){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(c[O],C);break;case"float":l.uniform1f(c[O],C);break;default:var F=W.indexOf("vec");if(!(0<=F&&F<=1&&W.length===4+F)){if(W.indexOf("mat")===0&&W.length===4){if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+W);l["uniformMatrix"+N+"fv"](c[O],!1,C);break}throw new r("","Unknown uniform data type for "+name+": "+W)}if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new r("","Invalid data type");switch(W.charAt(0)){case"b":case"i":l["uniform"+N+"iv"](c[O],C);break;case"v":l["uniform"+N+"fv"](c[O],C);break;default:throw new r("","Unrecognized data type for vector "+name+": "+W)}}}}}}function d(m,b){if(typeof b!="object")return[[m,b]];var f=[];for(var S in b){var w=b[S],E=m;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof w=="object"?f.push.apply(f,d(E,w)):f.push([E,w])}return f}function v(m,b,f){if(typeof f=="object"){var S=g(f);Object.defineProperty(m,b,{get:n(S),set:x(f),enumerable:!0,configurable:!1})}else c[f]?Object.defineProperty(m,b,{get:(w=f,function(E,O,C){return E.getUniform(O.program,C[w])}),set:x(f),enumerable:!0,configurable:!1}):m[b]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var O=E.indexOf("vec");if(0<=O&&O<=1&&E.length===4+O){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid data type");return E.charAt(0)==="b"?a(C,!1):a(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(h[f].type);var w}function g(m){var b;if(Array.isArray(m)){b=new Array(m.length);for(var f=0;f<m.length;++f)v(b,f,m[f])}else for(var S in b={},m)v(b,S,m[S]);return b}var y=i(h,!0);return{get:n(g(y)),set:x(y),enumerable:!0,configurable:!0}}},216:function(p){p.exports=function(s,t){for(var i={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),a=i,l=0;l<n.length;++l){var u=n[l].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var h=1;h<u.length;++h){var c=parseInt(u[h]);h<u.length-1||l<n.length-1?(c in a||(h<u.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?r:s[r].type}}else l<n.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):a[u[0]]=t?r:s[r].type}return i}},2145:function(p,s){s.uniforms=function(n,a){for(var l=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),u=[],h=0;h<l;++h){var c=n.getActiveUniform(a,h);if(c){var x=r(n,c.type);if(c.size>1)for(var d=0;d<c.size;++d)u.push({name:c.name.replace("[0]","["+d+"]"),type:x});else u.push({name:c.name,type:x})}}return u},s.attributes=function(n,a){for(var l=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),u=[],h=0;h<l;++h){var c=n.getActiveAttrib(a,h);c&&u.push({name:c.name,type:r(n,c.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function r(n,a){if(!i){var l=Object.keys(t);i={};for(var u=0;u<l.length;++u){var h=l[u];i[n[h]]=t[h]}}return i[a]}},5091:function(p,s,t){s.shader=function(x,d,v){return c(x).getShaderReference(d,v)},s.program=function(x,d,v,g,y){return c(x).getProgram(d,v,g,y)};var i=t(8866),r=t(2992),n=new(typeof WeakMap>"u"?t(606):WeakMap),a=0;function l(x,d,v,g,y,m,b){this.id=x,this.src=d,this.type=v,this.shader=g,this.count=m,this.programs=[],this.cache=b}function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,d=x.gl,v=this.programs,g=0,y=v.length;g<y;++g){var m=x.programs[v[g]];m&&(delete x.programs[g],d.deleteProgram(m))}d.deleteShader(this.shader),delete x.shaders[this.type===d.FRAGMENT_SHADER|0][this.src]}};var h=u.prototype;function c(x){var d=n.get(x);return d||(d=new u(x),n.set(x,d)),d}h.getShaderReference=function(x,d){var v=this.gl,g=this.shaders[x===v.FRAGMENT_SHADER|0],y=g[d];if(y&&v.isShader(y.shader))y.count+=1;else{var m=function(b,f,S){var w=b.createShader(f);if(b.shaderSource(w,S),b.compileShader(w),!b.getShaderParameter(w,b.COMPILE_STATUS)){var E=b.getShaderInfoLog(w);try{var O=r(E,S,f)}catch(C){throw console.warn("Failed to format compiler error: "+C),new i(E,`Error compiling shader:
`+E)}throw new i(E,O.short,O.long)}return w}(v,x,d);y=g[d]=new l(a++,d,x,m,[],1,this)}return y},h.getProgram=function(x,d,v,g){var y=[x.id,d.id,v.join(":"),g.join(":")].join("@"),m=this.programs[y];return m&&this.gl.isProgram(m)||(this.programs[y]=m=function(b,f,S,w,E){var O=b.createProgram();b.attachShader(O,f),b.attachShader(O,S);for(var C=0;C<w.length;++C)b.bindAttribLocation(O,E[C],w[C]);if(b.linkProgram(O),!b.getProgramParameter(O,b.LINK_STATUS)){var P=b.getProgramInfoLog(O);throw new i(P,"Error linking program: "+P)}return O}(this.gl,x.shader,d.shader,v,g),x.programs.push(y),d.programs.push(y)),m}},4098:function(p){function s(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}p.exports=function(i,r){var n=new s(i);return n.update(r),i.addOverlay(n),n};var t=s.prototype;t.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,r=this.width,n=this.color,a=this.center,l=this.plot,u=l.line,h=l.dataBox,c=l.viewBox;if(u.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var x=c[0]+(a[0]-h[0])/(h[2]-h[0])*(c[2]-c[0]),d=c[1]+(a[1]-h[1])/(h[3]-h[1])*(c[3]-c[1]);i[0]&&u.drawLine(x,d,c[0],d,r[0],n[0]),i[1]&&u.drawLine(x,d,x,c[1],r[1],n[1]),i[2]&&u.drawLine(x,d,c[2],d,r[2],n[2]),i[3]&&u.drawLine(x,d,x,c[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(p,s,t){var i=t(3236),r=t(9405),n=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);p.exports=function(l){return r(l,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(p,s,t){var i=t(2762),r=t(8116),n=t(1493);p.exports=function(d,v){var g=[];function y(w,E,O,C,P,D){var U=[w,E,O,0,0,0,1];U[C+3]=1,U[C]=P,g.push.apply(g,U),U[6]=-1,g.push.apply(g,U),U[C]=D,g.push.apply(g,U),g.push.apply(g,U),U[6]=1,g.push.apply(g,U),U[C]=P,g.push.apply(g,U)}y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var m=i(d,g),b=r(d,[{type:d.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:m,size:1,offset:24,stride:28}]),f=n(d);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var S=new l(d,m,b,f);return S.update(v),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(d,v,g,y){this.gl=d,this.buffer=v,this.vao=g,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=l.prototype,h=[0,0,0],c=[0,0,0],x=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(d){},u.draw=function(d){var v=this.gl,g=this.vao,y=this.shader;g.bind(),y.bind();var m,b=d.model||a,f=d.view||a,S=d.projection||a;this.axes&&(m=this.axes.lastCubeProps.axis);for(var w=h,E=c,O=0;O<3;++O)m&&m[O]<0?(w[O]=this.bounds[0][O],E[O]=this.bounds[1][O]):(w[O]=this.bounds[1][O],E[O]=this.bounds[0][O]);for(x[0]=v.drawingBufferWidth,x[1]=v.drawingBufferHeight,y.uniforms.model=b,y.uniforms.view=f,y.uniforms.projection=S,y.uniforms.coordinates=[this.position,w,E],y.uniforms.colors=this.colors,y.uniforms.screenShape=x,O=0;O<3;++O)y.uniforms.lineWidth=this.lineWidth[O]*this.pixelRatio,this.enabled[O]&&(g.draw(v.TRIANGLES,6,6*O),this.drawSides[O]&&g.draw(v.TRIANGLES,12,18+12*O));g.unbind()},u.update=function(d){d&&("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(p,s,t){var i=t(3236),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(p,s,t){var i=t(2931),r=t(9970),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(x,d){var v,g=x.length;for(v=0;v<g;v++){var y=x[v];if(y===d)return v;if(y>d)return v-1}return v},l=function(x,d,v){return x<d?d:x>v?v:x},u=function(x){var d=1/0;x.sort(function(m,b){return m-b});for(var v=x.length,g=1;g<v;g++){var y=Math.abs(x[g]-x[g-1]);y<d&&(d=y)}return d};p.exports=function(x,d){var v=x.startingPositions,g=x.maxLength||1e3,y=x.tubeSize||1,m=x.absoluteTubeSize,b=x.gridFill||"+x+y+z",f={};b.indexOf("-x")!==-1&&(f.reversedX=!0),b.indexOf("-y")!==-1&&(f.reversedY=!0),b.indexOf("-z")!==-1&&(f.reversedZ=!0),f.filled=n.indexOf(b.replace(/-/g,"").replace(/\+/g,""));var S=x.getVelocity||function(me){return function(Me,Pe,ge){var oe=Pe.vectors,ie=Pe.meshgrid,de=Me[0],Se=Me[1],_e=Me[2],we=ie[0].length,Ae=ie[1].length,Oe=ie[2].length,ze=a(ie[0],de),pe=a(ie[1],Se),be=a(ie[2],_e),ke=ze+1,Ie=pe+1,Ee=be+1;if(ze=l(ze,0,we-1),ke=l(ke,0,we-1),pe=l(pe,0,Ae-1),Ie=l(Ie,0,Ae-1),be=l(be,0,Oe-1),Ee=l(Ee,0,Oe-1),ze<0||pe<0||be<0||ke>we-1||Ie>Ae-1||Ee>Oe-1)return i.create();var Be,Ve,Ze,rt,it,dt,vt=ie[0][ze],ht=ie[0][ke],Qe=ie[1][pe],Je=ie[1][Ie],Tt=ie[2][be],Ot=(de-vt)/(ht-vt),Pt=(Se-Qe)/(Je-Qe),Mt=(_e-Tt)/(ie[2][Ee]-Tt);switch(isFinite(Ot)||(Ot=.5),isFinite(Pt)||(Pt=.5),isFinite(Mt)||(Mt=.5),ge.reversedX&&(ze=we-1-ze,ke=we-1-ke),ge.reversedY&&(pe=Ae-1-pe,Ie=Ae-1-Ie),ge.reversedZ&&(be=Oe-1-be,Ee=Oe-1-Ee),ge.filled){case 5:it=be,dt=Ee,Ze=pe*Oe,rt=Ie*Oe,Be=ze*Oe*Ae,Ve=ke*Oe*Ae;break;case 4:it=be,dt=Ee,Be=ze*Oe,Ve=ke*Oe,Ze=pe*Oe*we,rt=Ie*Oe*we;break;case 3:Ze=pe,rt=Ie,it=be*Ae,dt=Ee*Ae,Be=ze*Ae*Oe,Ve=ke*Ae*Oe;break;case 2:Ze=pe,rt=Ie,Be=ze*Ae,Ve=ke*Ae,it=be*Ae*we,dt=Ee*Ae*we;break;case 1:Be=ze,Ve=ke,it=be*we,dt=Ee*we,Ze=pe*we*Oe,rt=Ie*we*Oe;break;default:Be=ze,Ve=ke,Ze=pe*we,rt=Ie*we,it=be*we*Ae,dt=Ee*we*Ae}var He=oe[Be+Ze+it],Ye=oe[Be+Ze+dt],Ne=oe[Be+rt+it],We=oe[Be+rt+dt],ot=oe[Ve+Ze+it],tt=oe[Ve+Ze+dt],Re=oe[Ve+rt+it],Fe=oe[Ve+rt+dt],nt=i.create(),Ge=i.create(),ct=i.create(),pt=i.create();i.lerp(nt,He,ot,Ot),i.lerp(Ge,Ye,tt,Ot),i.lerp(ct,Ne,Re,Ot),i.lerp(pt,We,Fe,Ot);var gt=i.create(),ut=i.create();i.lerp(gt,nt,ct,Pt),i.lerp(ut,Ge,pt,Pt);var kt=i.create();return i.lerp(kt,gt,ut,Mt),kt}(me,x,f)},w=x.getDivergence||function(me,Me){var Pe=i.create(),ge=1e-4;i.add(Pe,me,[ge,0,0]);var oe=S(Pe);i.subtract(oe,oe,Me),i.scale(oe,oe,1/ge),i.add(Pe,me,[0,ge,0]);var ie=S(Pe);i.subtract(ie,ie,Me),i.scale(ie,ie,1/ge),i.add(Pe,me,[0,0,ge]);var de=S(Pe);return i.subtract(de,de,Me),i.scale(de,de,1/ge),i.add(Pe,oe,ie),i.add(Pe,Pe,de),Pe},E=[],O=d[0][0],C=d[0][1],P=d[0][2],D=d[1][0],U=d[1][1],I=d[1][2],N=function(me){var Me=me[0],Pe=me[1],ge=me[2];return!(Me<O||Me>D||Pe<C||Pe>U||ge<P||ge>I)},W=10*i.distance(d[0],d[1])/g,F=W*W,j=1,H=0,te=v.length;te>1&&(j=function(me){for(var Me=[],Pe=[],ge=[],oe={},ie={},de={},Se=me.length,_e=0;_e<Se;_e++){var we=me[_e],Ae=we[0],Oe=we[1],ze=we[2];oe[Ae]||(Me.push(Ae),oe[Ae]=!0),ie[Oe]||(Pe.push(Oe),ie[Oe]=!0),de[ze]||(ge.push(ze),de[ze]=!0)}var pe=u(Me),be=u(Pe),ke=u(ge),Ie=Math.min(pe,be,ke);return isFinite(Ie)?Ie:1}(v));for(var Q=0;Q<te;Q++){var $=i.create();i.copy($,v[Q]);var K=[$],X=[],Y=S($),re=$;X.push(Y);var se=[],ae=w($,Y),ce=i.length(ae);isFinite(ce)&&ce>H&&(H=ce),se.push(ce),E.push({points:K,velocities:X,divergences:se});for(var fe=0;fe<100*g&&K.length<g&&N($);){fe++;var he=i.clone(Y),ve=i.squaredLength(he);if(ve===0)break;ve>F&&i.scale(he,he,W/Math.sqrt(ve)),i.add(he,he,$),Y=S(he),i.squaredDistance(re,he)-F>-1e-4*F&&(K.push(he),re=he,X.push(Y),ae=w(he,Y),ce=i.length(ae),isFinite(ce)&&ce>H&&(H=ce),se.push(ce)),$=he}}var ye=function(me,Me,Pe,ge){for(var oe=0,ie=0;ie<me.length;ie++)for(var de=me[ie].velocities,Se=0;Se<de.length;Se++)oe=Math.max(oe,i.length(de[Se]));var _e=me.map(function(Be){return function(Ve,Ze,rt,it){for(var dt=Ve.points,vt=Ve.velocities,ht=Ve.divergences,Qe=[],Je=[],Tt=[],Ot=[],Pt=[],Mt=[],He=0,Ye=0,Ne=r.create(),We=r.create(),ot=0;ot<dt.length;ot++){var tt=dt[ot],Re=vt[ot],Fe=ht[ot];Ze===0&&(Fe=.05*rt),Ye=i.length(Re)/it,Ne=r.create(),i.copy(Ne,Re),Ne[3]=Fe;for(var nt=0;nt<8;nt++)Pt[nt]=[tt[0],tt[1],tt[2],nt];if(Ot.length>0)for(nt=0;nt<8;nt++){var Ge=(nt+1)%8;Qe.push(Ot[nt],Pt[nt],Pt[Ge],Pt[Ge],Ot[Ge],Ot[nt]),Tt.push(We,Ne,Ne,Ne,We,We),Mt.push(He,Ye,Ye,Ye,He,He);var ct=Qe.length;Je.push([ct-6,ct-5,ct-4],[ct-3,ct-2,ct-1])}var pt=Ot;Ot=Pt,Pt=pt;var gt=We;We=Ne,Ne=gt;var ut=He;He=Ye,Ye=ut}return{positions:Qe,cells:Je,vectors:Tt,vertexIntensity:Mt}}(Be,Pe,ge,oe)}),we=[],Ae=[],Oe=[],ze=[];for(ie=0;ie<_e.length;ie++){var pe=_e[ie],be=we.length;for(we=we.concat(pe.positions),Oe=Oe.concat(pe.vectors),ze=ze.concat(pe.vertexIntensity),Se=0;Se<pe.cells.length;Se++){var ke=pe.cells[Se],Ie=[];Ae.push(Ie);for(var Ee=0;Ee<ke.length;Ee++)Ie.push(ke[Ee]+be)}}return{positions:we,cells:Ae,vectors:Oe,vertexIntensity:ze,colormap:Me}}(E,x.colormap,H,j);return m?ye.tubeScale=m:(H===0&&(H=1),ye.tubeScale=.5*y*j/H),ye};var h=t(6740),c=t(6405).createMesh;p.exports.createTubeMesh=function(x,d){return c(x,d,{shaders:h,traceType:"streamtube"})}},990:function(p,s,t){var i=t(9405),r=t(3236),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color — in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(h){var c=i(h,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createPickShader=function(h){var c=i(h,n,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createContourShader=function(h){var c=i(h,l,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},s.createPickContourShader=function(h){var c=i(h,l,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},9499:function(p,s,t){p.exports=function(ae){var ce=ae.gl,fe=f(ce),he=w(ce),ve=S(ce),ye=E(ce),me=r(ce),Me=n(ce,[{buffer:me,size:4,stride:O,offset:0},{buffer:me,size:3,stride:O,offset:16},{buffer:me,size:3,stride:O,offset:28}]),Pe=r(ce),ge=n(ce,[{buffer:Pe,size:4,stride:20,offset:0},{buffer:Pe,size:1,stride:20,offset:16}]),oe=r(ce),ie=n(ce,[{buffer:oe,size:2,type:ce.FLOAT}]),de=a(ce,1,I,ce.RGBA,ce.UNSIGNED_BYTE);de.minFilter=ce.LINEAR,de.magFilter=ce.LINEAR;var Se=new N(ce,[0,0],[[0,0,0],[0,0,0]],fe,he,me,Me,de,ve,ye,Pe,ge,oe,ie,[0,0,0]),_e={levels:[[],[],[]]};for(var we in ae)_e[we]=ae[we];return _e.colormap=_e.colormap||"jet",Se.update(_e),Se};var i=t(8828),r=t(2762),n=t(8116),a=t(7766),l=t(1888),u=t(6729),h=t(5298),c=t(9994),x=t(9618),d=t(3711),v=t(6760),g=t(7608),y=t(2478),m=t(6199),b=t(990),f=b.createShader,S=b.createContourShader,w=b.createPickShader,E=b.createPickContourShader,O=40,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function U(ae,ce,fe,he,ve){this.position=ae,this.index=ce,this.uv=fe,this.level=he,this.dataCoordinate=ve}(function(){for(var ae=0;ae<3;++ae){var ce=D[ae],fe=(ae+2)%3;ce[(ae+1)%3+0]=1,ce[fe+3]=1,ce[ae+6]=1}})();var I=256;function N(ae,ce,fe,he,ve,ye,me,Me,Pe,ge,oe,ie,de,Se,_e){this.gl=ae,this.shape=ce,this.bounds=fe,this.objectOffset=_e,this.intensityBounds=[],this._shader=he,this._pickShader=ve,this._coordinateBuffer=ye,this._vao=me,this._colorMap=Me,this._contourShader=Pe,this._contourPickShader=ge,this._contourBuffer=oe,this._contourVAO=ie,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new U([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=Se,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var W=N.prototype;W.genColormap=function(ae,ce){var fe=!1,he=c([u({colormap:ae,nshades:I,format:"rgba"}).map(function(ve,ye){var me=ce?function(Me,Pe){if(!Pe||!Pe.length)return 1;for(var ge=0;ge<Pe.length;++ge){if(Pe.length<2)return 1;if(Pe[ge][0]===Me)return Pe[ge][1];if(Pe[ge][0]>Me&&ge>0){var oe=(Pe[ge][0]-Me)/(Pe[ge][0]-Pe[ge-1][0]);return Pe[ge][1]*(1-oe)+oe*Pe[ge-1][1]}}return 1}(ye/255,ce):ve[3];return me<1&&(fe=!0),[ve[0],ve[1],ve[2],255*me]})]);return h.divseq(he,255),this.hasAlphaScale=fe,he},W.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},W.isOpaque=function(){return!this.isTransparent()},W.pickSlots=1,W.setPickBase=function(ae){this.pickId=ae};var F=[0,0,0],j={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function H(ae,ce){var fe,he,ve,ye=ce.axes&&ce.axes.lastCubeProps.axis||F,me=ce.showSurface,Me=ce.showContour;for(fe=0;fe<3;++fe)for(me=me||ce.surfaceProject[fe],he=0;he<3;++he)Me=Me||ce.contourProject[fe][he];for(fe=0;fe<3;++fe){var Pe=j.projections[fe];for(he=0;he<16;++he)Pe[he]=0;for(he=0;he<4;++he)Pe[5*he]=1;Pe[5*fe]=0,Pe[12+fe]=ce.axesBounds[+(ye[fe]>0)][fe],v(Pe,ae.model,Pe);var ge=j.clipBounds[fe];for(ve=0;ve<2;++ve)for(he=0;he<3;++he)ge[ve][he]=ae.clipBounds[ve][he];ge[0][fe]=-1e8,ge[1][fe]=1e8}return j.showSurface=me,j.showContour=Me,j}var te={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Q=C.slice(),$=[1,0,0,0,1,0,0,0,1];function K(ae,ce){ae=ae||{};var fe=this.gl;fe.disable(fe.CULL_FACE),this._colorMap.bind(0);var he=te;he.model=ae.model||C,he.view=ae.view||C,he.projection=ae.projection||C,he.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],he.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],he.objectOffset=this.objectOffset,he.contourColor=this.contourColor[0],he.inverseModel=g(he.inverseModel,he.model);for(var ve=0;ve<2;++ve)for(var ye=he.clipBounds[ve],me=0;me<3;++me)ye[me]=Math.min(Math.max(this.clipBounds[ve][me],-1e8),1e8);he.kambient=this.ambientLight,he.kdiffuse=this.diffuseLight,he.kspecular=this.specularLight,he.roughness=this.roughness,he.fresnel=this.fresnel,he.opacity=this.opacity,he.height=0,he.permutation=$,he.vertexColor=this.vertexColor;var Me=Q;for(v(Me,he.view,he.model),v(Me,he.projection,Me),g(Me,Me),ve=0;ve<3;++ve)he.eyePosition[ve]=Me[12+ve]/Me[15];var Pe=Me[15];for(ve=0;ve<3;++ve)Pe+=this.lightPosition[ve]*Me[4*ve+3];for(ve=0;ve<3;++ve){var ge=Me[12+ve];for(me=0;me<3;++me)ge+=Me[4*me+ve]*this.lightPosition[me];he.lightPosition[ve]=ge/Pe}var oe=H(he,this);if(oe.showSurface){for(this._shader.bind(),this._shader.uniforms=he,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(fe.TRIANGLES,this._vertexCount),ve=0;ve<3;++ve)this.surfaceProject[ve]&&this.vertexCount&&(this._shader.uniforms.model=oe.projections[ve],this._shader.uniforms.clipBounds=oe.clipBounds[ve],this._vao.draw(fe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(oe.showContour){var ie=this._contourShader;he.kambient=1,he.kdiffuse=0,he.kspecular=0,he.opacity=1,ie.bind(),ie.uniforms=he;var de=this._contourVAO;for(de.bind(),ve=0;ve<3;++ve)for(ie.uniforms.permutation=D[ve],fe.lineWidth(this.contourWidth[ve]*this.pixelRatio),me=0;me<this.contourLevels[ve].length;++me)me===this.highlightLevel[ve]?(ie.uniforms.contourColor=this.highlightColor[ve],ie.uniforms.contourTint=this.highlightTint[ve]):me!==0&&me-1!==this.highlightLevel[ve]||(ie.uniforms.contourColor=this.contourColor[ve],ie.uniforms.contourTint=this.contourTint[ve]),this._contourCounts[ve][me]&&(ie.uniforms.height=this.contourLevels[ve][me],de.draw(fe.LINES,this._contourCounts[ve][me],this._contourOffsets[ve][me]));for(ve=0;ve<3;++ve)for(ie.uniforms.model=oe.projections[ve],ie.uniforms.clipBounds=oe.clipBounds[ve],me=0;me<3;++me)if(this.contourProject[ve][me]){ie.uniforms.permutation=D[me],fe.lineWidth(this.contourWidth[me]*this.pixelRatio);for(var Se=0;Se<this.contourLevels[me].length;++Se)Se===this.highlightLevel[me]?(ie.uniforms.contourColor=this.highlightColor[me],ie.uniforms.contourTint=this.highlightTint[me]):Se!==0&&Se-1!==this.highlightLevel[me]||(ie.uniforms.contourColor=this.contourColor[me],ie.uniforms.contourTint=this.contourTint[me]),this._contourCounts[me][Se]&&(ie.uniforms.height=this.contourLevels[me][Se],de.draw(fe.LINES,this._contourCounts[me][Se],this._contourOffsets[me][Se]))}for(de.unbind(),(de=this._dynamicVAO).bind(),ve=0;ve<3;++ve)if(this._dynamicCounts[ve]!==0)for(ie.uniforms.model=he.model,ie.uniforms.clipBounds=he.clipBounds,ie.uniforms.permutation=D[ve],fe.lineWidth(this.dynamicWidth[ve]*this.pixelRatio),ie.uniforms.contourColor=this.dynamicColor[ve],ie.uniforms.contourTint=this.dynamicTint[ve],ie.uniforms.height=this.dynamicLevel[ve],de.draw(fe.LINES,this._dynamicCounts[ve],this._dynamicOffsets[ve]),me=0;me<3;++me)this.contourProject[me][ve]&&(ie.uniforms.model=oe.projections[me],ie.uniforms.clipBounds=oe.clipBounds[me],de.draw(fe.LINES,this._dynamicCounts[ve],this._dynamicOffsets[ve]));de.unbind()}}W.draw=function(ae){return K.call(this,ae,!1)},W.drawTransparent=function(ae){return K.call(this,ae,!0)};var X={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Y(ae,ce){return Array.isArray(ae)?[ce(ae[0]),ce(ae[1]),ce(ae[2])]:[ce(ae),ce(ae),ce(ae)]}function re(ae){return Array.isArray(ae)?ae.length===3?[ae[0],ae[1],ae[2],1]:[ae[0],ae[1],ae[2],ae[3]]:[0,0,0,1]}function se(ae){if(Array.isArray(ae)){if(Array.isArray(ae))return[re(ae[0]),re(ae[1]),re(ae[2])];var ce=re(ae);return[ce.slice(),ce.slice(),ce.slice()]}}W.drawPick=function(ae){ae=ae||{};var ce=this.gl;ce.disable(ce.CULL_FACE);var fe=X;fe.model=ae.model||C,fe.view=ae.view||C,fe.projection=ae.projection||C,fe.shape=this._field[2].shape,fe.pickId=this.pickId/255,fe.lowerBound=this.bounds[0],fe.upperBound=this.bounds[1],fe.objectOffset=this.objectOffset,fe.permutation=$;for(var he=0;he<2;++he)for(var ve=fe.clipBounds[he],ye=0;ye<3;++ye)ve[ye]=Math.min(Math.max(this.clipBounds[he][ye],-1e8),1e8);var me=H(fe,this);if(me.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=fe,this._vao.bind(),this._vao.draw(ce.TRIANGLES,this._vertexCount),he=0;he<3;++he)this.surfaceProject[he]&&(this._pickShader.uniforms.model=me.projections[he],this._pickShader.uniforms.clipBounds=me.clipBounds[he],this._vao.draw(ce.TRIANGLES,this._vertexCount));this._vao.unbind()}if(me.showContour){var Me=this._contourPickShader;Me.bind(),Me.uniforms=fe;var Pe=this._contourVAO;for(Pe.bind(),ye=0;ye<3;++ye)for(ce.lineWidth(this.contourWidth[ye]*this.pixelRatio),Me.uniforms.permutation=D[ye],he=0;he<this.contourLevels[ye].length;++he)this._contourCounts[ye][he]&&(Me.uniforms.height=this.contourLevels[ye][he],Pe.draw(ce.LINES,this._contourCounts[ye][he],this._contourOffsets[ye][he]));for(he=0;he<3;++he)for(Me.uniforms.model=me.projections[he],Me.uniforms.clipBounds=me.clipBounds[he],ye=0;ye<3;++ye)if(this.contourProject[he][ye]){Me.uniforms.permutation=D[ye],ce.lineWidth(this.contourWidth[ye]*this.pixelRatio);for(var ge=0;ge<this.contourLevels[ye].length;++ge)this._contourCounts[ye][ge]&&(Me.uniforms.height=this.contourLevels[ye][ge],Pe.draw(ce.LINES,this._contourCounts[ye][ge],this._contourOffsets[ye][ge]))}Pe.unbind()}},W.pick=function(ae){if(!ae||ae.id!==this.pickId)return null;var ce=this._field[2].shape,fe=this._pickResult,he=ce[0]*(ae.value[0]+(ae.value[2]>>4)/16)/255,ve=Math.floor(he),ye=he-ve,me=ce[1]*(ae.value[1]+(15&ae.value[2])/16)/255,Me=Math.floor(me),Pe=me-Me;ve+=1,Me+=1;var ge=fe.position;ge[0]=ge[1]=ge[2]=0;for(var oe=0;oe<2;++oe)for(var ie=oe?ye:1-ye,de=0;de<2;++de)for(var Se=ve+oe,_e=Me+de,we=ie*(de?Pe:1-Pe),Ae=0;Ae<3;++Ae)ge[Ae]+=this._field[Ae].get(Se,_e)*we;for(var Oe=this._pickResult.level,ze=0;ze<3;++ze)if(Oe[ze]=y.le(this.contourLevels[ze],ge[ze]),Oe[ze]<0)this.contourLevels[ze].length>0&&(Oe[ze]=0);else if(Oe[ze]<this.contourLevels[ze].length-1){var pe=this.contourLevels[ze][Oe[ze]],be=this.contourLevels[ze][Oe[ze]+1];Math.abs(pe-ge[ze])>Math.abs(be-ge[ze])&&(Oe[ze]+=1)}for(fe.index[0]=ye<.5?ve:ve+1,fe.index[1]=Pe<.5?Me:Me+1,fe.uv[0]=he/ce[0],fe.uv[1]=me/ce[1],Ae=0;Ae<3;++Ae)fe.dataCoordinate[Ae]=this._field[Ae].get(fe.index[0],fe.index[1]);return fe},W.padField=function(ae,ce){var fe=ce.shape.slice(),he=ae.shape.slice();h.assign(ae.lo(1,1).hi(fe[0],fe[1]),ce),h.assign(ae.lo(1).hi(fe[0],1),ce.hi(fe[0],1)),h.assign(ae.lo(1,he[1]-1).hi(fe[0],1),ce.lo(0,fe[1]-1).hi(fe[0],1)),h.assign(ae.lo(0,1).hi(1,fe[1]),ce.hi(1)),h.assign(ae.lo(he[0]-1,1).hi(1,fe[1]),ce.lo(fe[0]-1)),ae.set(0,0,ce.get(0,0)),ae.set(0,he[1]-1,ce.get(0,fe[1]-1)),ae.set(he[0]-1,0,ce.get(fe[0]-1,0)),ae.set(he[0]-1,he[1]-1,ce.get(fe[0]-1,fe[1]-1))},W.update=function(ae){ae=ae||{},this.objectOffset=ae.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ae&&(this.contourWidth=Y(ae.contourWidth,Number)),"showContour"in ae&&(this.showContour=Y(ae.showContour,Boolean)),"showSurface"in ae&&(this.showSurface=!!ae.showSurface),"contourTint"in ae&&(this.contourTint=Y(ae.contourTint,Boolean)),"contourColor"in ae&&(this.contourColor=se(ae.contourColor)),"contourProject"in ae&&(this.contourProject=Y(ae.contourProject,function(on){return Y(on,Boolean)})),"surfaceProject"in ae&&(this.surfaceProject=ae.surfaceProject),"dynamicColor"in ae&&(this.dynamicColor=se(ae.dynamicColor)),"dynamicTint"in ae&&(this.dynamicTint=Y(ae.dynamicTint,Number)),"dynamicWidth"in ae&&(this.dynamicWidth=Y(ae.dynamicWidth,Number)),"opacity"in ae&&(this.opacity=ae.opacity),"opacityscale"in ae&&(this.opacityscale=ae.opacityscale),"colorBounds"in ae&&(this.colorBounds=ae.colorBounds),"vertexColor"in ae&&(this.vertexColor=ae.vertexColor?1:0),"colormap"in ae&&this._colorMap.setPixels(this.genColormap(ae.colormap,this.opacityscale));var ce=ae.field||ae.coords&&ae.coords[2]||null,fe=!1;if(ce||(ce=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ae||"coords"in ae){var he=(ce.shape[0]+2)*(ce.shape[1]+2);he>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(i.nextPow2(he))),this._field[2]=x(this._field[2].data,[ce.shape[0]+2,ce.shape[1]+2]),this.padField(this._field[2],ce),this.shape=ce.shape.slice();for(var ve=this.shape,ye=0;ye<2;++ye)this._field[2].size>this._field[ye].data.length&&(l.freeFloat(this._field[ye].data),this._field[ye].data=l.mallocFloat(this._field[2].size)),this._field[ye]=x(this._field[ye].data,[ve[0]+2,ve[1]+2]);if(ae.coords){var me=ae.coords;if(!Array.isArray(me)||me.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(ye=0;ye<2;++ye){var Me=me[ye];for(de=0;de<2;++de)if(Me.shape[de]!==ve[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ye],Me)}}else if(ae.ticks){var Pe=ae.ticks;if(!Array.isArray(Pe)||Pe.length!==2)throw new Error("gl-surface: invalid ticks");for(ye=0;ye<2;++ye){var ge=Pe[ye];if((Array.isArray(ge)||ge.length)&&(ge=x(ge)),ge.shape[0]!==ve[ye])throw new Error("gl-surface: invalid tick length");var oe=x(ge.data,ve);oe.stride[ye]=ge.stride[0],oe.stride[1^ye]=0,this.padField(this._field[ye],oe)}}else{for(ye=0;ye<2;++ye){var ie=[0,0];ie[ye]=1,this._field[ye]=x(this._field[ye].data,[ve[0]+2,ve[1]+2],ie,0)}this._field[0].set(0,0,0);for(var de=0;de<ve[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set(ve[0]+1,0,ve[0]-1),this._field[1].set(0,0,0),de=0;de<ve[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,ve[1]+1,ve[1]-1)}var Se=this._field,_e=x(l.mallocFloat(3*Se[2].size*2),[3,ve[0]+2,ve[1]+2,2]);for(ye=0;ye<3;++ye)m(_e.pick(ye),Se[ye],"mirror");var we=x(l.mallocFloat(3*Se[2].size),[ve[0]+2,ve[1]+2,3]);for(ye=0;ye<ve[0]+2;++ye)for(de=0;de<ve[1]+2;++de){var Ae=_e.get(0,ye,de,0),Oe=_e.get(0,ye,de,1),ze=_e.get(1,ye,de,0),pe=_e.get(1,ye,de,1),be=_e.get(2,ye,de,0),ke=_e.get(2,ye,de,1),Ie=ze*ke-pe*be,Ee=be*Oe-ke*Ae,Be=Ae*pe-Oe*ze,Ve=Math.sqrt(Ie*Ie+Ee*Ee+Be*Be);Ve<1e-8?(Ve=Math.max(Math.abs(Ie),Math.abs(Ee),Math.abs(Be)))<1e-8?(Be=1,Ee=Ie=0,Ve=1):Ve=1/Ve:Ve=1/Math.sqrt(Ve),we.set(ye,de,0,Ie*Ve),we.set(ye,de,1,Ee*Ve),we.set(ye,de,2,Be*Ve)}l.free(_e.data);var Ze=[1/0,1/0,1/0],rt=[-1/0,-1/0,-1/0],it=1/0,dt=-1/0,vt=(ve[0]-1)*(ve[1]-1)*6,ht=l.mallocFloat(i.nextPow2(10*vt)),Qe=0,Je=0;for(ye=0;ye<ve[0]-1;++ye)e:for(de=0;de<ve[1]-1;++de){for(var Tt=0;Tt<2;++Tt)for(var Ot=0;Ot<2;++Ot)for(var Pt=0;Pt<3;++Pt){var Mt=this._field[Pt].get(1+ye+Tt,1+de+Ot);if(isNaN(Mt)||!isFinite(Mt))continue e}for(Pt=0;Pt<6;++Pt){var He=ye+P[Pt][0],Ye=de+P[Pt][1],Ne=this._field[0].get(He+1,Ye+1),We=this._field[1].get(He+1,Ye+1);Mt=this._field[2].get(He+1,Ye+1),Ie=we.get(He+1,Ye+1,0),Ee=we.get(He+1,Ye+1,1),Be=we.get(He+1,Ye+1,2),ae.intensity&&(ot=ae.intensity.get(He,Ye));var ot=ae.intensity?ae.intensity.get(He,Ye):Mt+this.objectOffset[2];ht[Qe++]=He,ht[Qe++]=Ye,ht[Qe++]=Ne,ht[Qe++]=We,ht[Qe++]=Mt,ht[Qe++]=0,ht[Qe++]=ot,ht[Qe++]=Ie,ht[Qe++]=Ee,ht[Qe++]=Be,Ze[0]=Math.min(Ze[0],Ne+this.objectOffset[0]),Ze[1]=Math.min(Ze[1],We+this.objectOffset[1]),Ze[2]=Math.min(Ze[2],Mt+this.objectOffset[2]),it=Math.min(it,ot),rt[0]=Math.max(rt[0],Ne+this.objectOffset[0]),rt[1]=Math.max(rt[1],We+this.objectOffset[1]),rt[2]=Math.max(rt[2],Mt+this.objectOffset[2]),dt=Math.max(dt,ot),Je+=1}}for(ae.intensityBounds&&(it=+ae.intensityBounds[0],dt=+ae.intensityBounds[1]),ye=6;ye<Qe;ye+=10)ht[ye]=(ht[ye]-it)/(dt-it);this._vertexCount=Je,this._coordinateBuffer.update(ht.subarray(0,Qe)),l.freeFloat(ht),l.free(we.data),this.bounds=[Ze,rt],this.intensity=ae.intensity||this._field[2],this.intensityBounds[0]===it&&this.intensityBounds[1]===dt||(fe=!0),this.intensityBounds=[it,dt]}if("levels"in ae){var tt=ae.levels;for(tt=Array.isArray(tt[0])?tt.slice():[[],[],tt],ye=0;ye<3;++ye)tt[ye]=tt[ye].slice(),tt[ye].sort(function(on,$t){return on-$t});for(ye=0;ye<3;++ye)for(de=0;de<tt[ye].length;++de)tt[ye][de]-=this.objectOffset[ye];e:for(ye=0;ye<3;++ye){if(tt[ye].length!==this.contourLevels[ye].length){fe=!0;break}for(de=0;de<tt[ye].length;++de)if(tt[ye][de]!==this.contourLevels[ye][de]){fe=!0;break e}}this.contourLevels=tt}if(fe){Se=this._field,ve=this.shape;for(var Re=[],Fe=0;Fe<3;++Fe){var nt=this.contourLevels[Fe],Ge=[],ct=[],pt=[0,0,0];for(ye=0;ye<nt.length;++ye){var gt=d(this._field[Fe],nt[ye]);Ge.push(Re.length/5|0),Je=0;e:for(de=0;de<gt.cells.length;++de){var ut=gt.cells[de];for(Pt=0;Pt<2;++Pt){var kt=gt.positions[ut[Pt]],mt=kt[0],At=0|Math.floor(mt),Lt=mt-At,Ct=kt[1],zt=0|Math.floor(Ct),Gt=Ct-zt,rn=!1;t:for(var Nt=0;Nt<3;++Nt){pt[Nt]=0;var Wt=(Fe+Nt+1)%3;for(Tt=0;Tt<2;++Tt){var Rt=Tt?Lt:1-Lt;for(He=0|Math.min(Math.max(At+Tt,0),ve[0]),Ot=0;Ot<2;++Ot){var Ln=Ot?Gt:1-Gt;if(Ye=0|Math.min(Math.max(zt+Ot,0),ve[1]),Mt=Nt<2?this._field[Wt].get(He,Ye):(this.intensity.get(He,Ye)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Mt)||isNaN(Mt)){rn=!0;break t}var bn=Rt*Ln;pt[Nt]+=bn*Mt}}}if(rn){if(Pt>0){for(var hn=0;hn<5;++hn)Re.pop();Je-=1}continue e}Re.push(pt[0],pt[1],kt[0],kt[1],pt[2]),Je+=1}}ct.push(Je)}this._contourOffsets[Fe]=Ge,this._contourCounts[Fe]=ct}var Kt=l.mallocFloat(Re.length);for(ye=0;ye<Re.length;++ye)Kt[ye]=Re[ye];this._contourBuffer.update(Kt),l.freeFloat(Kt)}},W.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ae=0;ae<3;++ae)l.freeFloat(this._field[ae].data)},W.highlight=function(ae){var ce,fe;if(!ae)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ce=0;ce<3;++ce)this.enableHighlight[ce]?this.highlightLevel[ce]=ae.level[ce]:this.highlightLevel[ce]=-1;for(fe=this.snapToData?ae.dataCoordinate:ae.position,ce=0;ce<3;++ce)fe[ce]-=this.objectOffset[ce];if(this.enableDynamic[0]&&fe[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&fe[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&fe[2]!==this.dynamicLevel[2]){for(var he=0,ve=this.shape,ye=l.mallocFloat(12*ve[0]*ve[1]),me=0;me<3;++me)if(this.enableDynamic[me]){this.dynamicLevel[me]=fe[me];var Me=(me+1)%3,Pe=(me+2)%3,ge=this._field[me],oe=this._field[Me],ie=this._field[Pe],de=d(ge,fe[me]),Se=de.cells,_e=de.positions;for(this._dynamicOffsets[me]=he,ce=0;ce<Se.length;++ce)for(var we=Se[ce],Ae=0;Ae<2;++Ae){var Oe=_e[we[Ae]],ze=+Oe[0],pe=0|ze,be=0|Math.min(pe+1,ve[0]),ke=ze-pe,Ie=1-ke,Ee=+Oe[1],Be=0|Ee,Ve=0|Math.min(Be+1,ve[1]),Ze=Ee-Be,rt=1-Ze,it=Ie*rt,dt=Ie*Ze,vt=ke*rt,ht=ke*Ze,Qe=it*oe.get(pe,Be)+dt*oe.get(pe,Ve)+vt*oe.get(be,Be)+ht*oe.get(be,Ve),Je=it*ie.get(pe,Be)+dt*ie.get(pe,Ve)+vt*ie.get(be,Be)+ht*ie.get(be,Ve);if(isNaN(Qe)||isNaN(Je)){Ae&&(he-=1);break}ye[2*he+0]=Qe,ye[2*he+1]=Je,he+=1}this._dynamicCounts[me]=he-this._dynamicOffsets[me]}else this.dynamicLevel[me]=NaN,this._dynamicCounts[me]=0;this._dynamicBuffer.update(ye.subarray(0,2*he)),l.freeFloat(ye)}}},7766:function(p,s,t){var i=t(9618),r=t(5298),n=t(1888);p.exports=function(b){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||function(w){a=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],l=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],u=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}(b),typeof arguments[1]=="number")return m(b,arguments[1],arguments[2],arguments[3]||b.RGBA,arguments[4]||b.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(b,0|arguments[1][0],0|arguments[1][1],arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var f=arguments[1],S=h(f)?f:f.raw;if(S)return function(w,E,O,C,P,D){var U=y(w);return w.texImage2D(w.TEXTURE_2D,0,P,P,D,E),new d(w,U,O,C,P,D)}(b,S,0|f.width,0|f.height,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(f.shape&&f.data&&f.stride)return function(w,E){var O=E.dtype,C=E.shape.slice(),P=w.getParameter(w.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>P||C[1]<0||C[1]>P)throw new Error("gl-texture2d: Invalid texture size");var D=g(C,E.stride.slice()),U=0;O==="float32"?U=w.FLOAT:O==="float64"?(U=w.FLOAT,D=!1,O="float32"):O==="uint8"?U=w.UNSIGNED_BYTE:(U=w.UNSIGNED_BYTE,D=!1,O="uint8");var I,N,W=0;if(C.length===2)W=w.LUMINANCE,C=[C[0],C[1],1],E=i(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)W=w.ALPHA;else if(C[2]===2)W=w.LUMINANCE_ALPHA;else if(C[2]===3)W=w.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");W=w.RGBA}}U!==w.FLOAT||w.getExtension("OES_texture_float")||(U=w.UNSIGNED_BYTE,D=!1);var F=E.size;if(D)I=E.offset===0&&E.data.length===F?E.data:E.data.subarray(E.offset,E.offset+F);else{var j=[C[2],C[2]*C[0],1];N=n.malloc(F,O);var H=i(N,C,j,0);O!=="float32"&&O!=="float64"||U!==w.UNSIGNED_BYTE?r.assign(H,E):c(H,E),I=N.subarray(0,F)}var te=y(w);return w.texImage2D(w.TEXTURE_2D,0,W,C[0],C[1],0,W,U,I),D||n.free(N),new d(w,te,C[0],C[1],W,U)}(b,f)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,l=null,u=null;function h(b){return typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&b instanceof HTMLVideoElement||typeof ImageData<"u"&&b instanceof ImageData}var c=function(b,f){r.muls(b,f,255)};function x(b,f,S){var w=b.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return b._shape=[f,S],b.bind(),w.texImage2D(w.TEXTURE_2D,0,b.format,f,S,0,b.format,b.type,null),b._mipLevels=[0],b}function d(b,f,S,w,E,O){this.gl=b,this.handle=f,this.format=E,this.type=O,this._shape=[S,w],this._mipLevels=[0],this._magFilter=b.NEAREST,this._minFilter=b.NEAREST,this._wrapS=b.CLAMP_TO_EDGE,this._wrapT=b.CLAMP_TO_EDGE,this._anisoSamples=1;var C=this,P=[this._wrapS,this._wrapT];Object.defineProperties(P,[{get:function(){return C._wrapS},set:function(U){return C.wrapS=U}},{get:function(){return C._wrapT},set:function(U){return C.wrapT=U}}]),this._wrapVector=P;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return C._shape[0]},set:function(U){return C.width=U}},{get:function(){return C._shape[1]},set:function(U){return C.height=U}}]),this._shapeVector=D}var v=d.prototype;function g(b,f){return b.length===3?f[2]===1&&f[1]===b[0]*b[2]&&f[0]===b[2]:f[0]===1&&f[1]===b[0]}function y(b){var f=b.createTexture();return b.bindTexture(b.TEXTURE_2D,f),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),f}function m(b,f,S,w,E){var O=b.getParameter(b.MAX_TEXTURE_SIZE);if(f<0||f>O||S<0||S>O)throw new Error("gl-texture2d: Invalid texture shape");if(E===b.FLOAT&&!b.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var C=y(b);return b.texImage2D(b.TEXTURE_2D,0,w,f,S,0,w,E,null),new d(b,C,f,S,w,E)}Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var f=this.gl;if(this.type===f.FLOAT&&a.indexOf(b)>=0&&(f.getExtension("OES_texture_float_linear")||(b=f.NEAREST)),l.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,b),this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var f=this.gl;if(this.type===f.FLOAT&&a.indexOf(b)>=0&&(f.getExtension("OES_texture_float_linear")||(b=f.NEAREST)),l.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,b),this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var f=this._anisoSamples;if(this._anisoSamples=0|Math.max(b,1),f!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){if(this.bind(),u.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b),this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){if(this.bind(),u.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b),this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){if(Array.isArray(b)||(b=[b,b]),b.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var f=0;f<2;++f)if(u.indexOf(b[f])<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0],this._wrapT=b[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),b}},shape:{get:function(){return this._shapeVector},set:function(b){if(Array.isArray(b)){if(b.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else b=[0|b,0|b];return x(this,0|b[0],0|b[1]),[0|b[0],0|b[1]]}},width:{get:function(){return this._shape[0]},set:function(b){return x(this,b|=0,this._shape[1]),b}},height:{get:function(){return this._shape[1]},set:function(b){return b|=0,x(this,this._shape[0],b),b}}}),v.bind=function(b){var f=this.gl;return b!==void 0&&f.activeTexture(f.TEXTURE0+(0|b)),f.bindTexture(f.TEXTURE_2D,this.handle),b!==void 0?0|b:f.getParameter(f.ACTIVE_TEXTURE)-f.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],this._shape[1]),f=0;b>0;++f,b>>>=1)this._mipLevels.indexOf(f)<0&&this._mipLevels.push(f)},v.setPixels=function(b,f,S,w){var E=this.gl;this.bind(),Array.isArray(f)?(w=S,S=0|f[1],f=0|f[0]):(f=f||0,S=S||0),w=w||0;var O=h(b)?b:b.raw;if(O)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,f,S,this.format,this.type,O);else{if(!(b.shape&&b.stride&&b.data))throw new Error("gl-texture2d: Unsupported data type");if(b.shape.length<2||f+b.shape[1]>this._shape[1]>>>w||S+b.shape[0]>this._shape[0]>>>w||f<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(C,P,D,U,I,N,W,F){var j=F.dtype,H=F.shape.slice();if(H.length<2||H.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,Q=0,$=g(H,F.stride.slice());if(j==="float32"?te=C.FLOAT:j==="float64"?(te=C.FLOAT,$=!1,j="float32"):j==="uint8"?te=C.UNSIGNED_BYTE:(te=C.UNSIGNED_BYTE,$=!1,j="uint8"),H.length===2)Q=C.LUMINANCE,H=[H[0],H[1],1],F=i(F.data,H,[F.stride[0],F.stride[1],1],F.offset);else{if(H.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(H[2]===1)Q=C.ALPHA;else if(H[2]===2)Q=C.LUMINANCE_ALPHA;else if(H[2]===3)Q=C.RGB;else{if(H[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");Q=C.RGBA}H[2]}if(Q!==C.LUMINANCE&&Q!==C.ALPHA||I!==C.LUMINANCE&&I!==C.ALPHA||(Q=I),Q!==I)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var K=F.size,X=W.indexOf(U)<0;if(X&&W.push(U),te===N&&$)F.offset===0&&F.data.length===K?X?C.texImage2D(C.TEXTURE_2D,U,I,H[0],H[1],0,I,N,F.data):C.texSubImage2D(C.TEXTURE_2D,U,P,D,H[0],H[1],I,N,F.data):X?C.texImage2D(C.TEXTURE_2D,U,I,H[0],H[1],0,I,N,F.data.subarray(F.offset,F.offset+K)):C.texSubImage2D(C.TEXTURE_2D,U,P,D,H[0],H[1],I,N,F.data.subarray(F.offset,F.offset+K));else{var Y;Y=N===C.FLOAT?n.mallocFloat32(K):n.mallocUint8(K);var re=i(Y,H,[H[2],H[2]*H[0],1]);te===C.FLOAT&&N===C.UNSIGNED_BYTE?c(re,F):r.assign(re,F),X?C.texImage2D(C.TEXTURE_2D,U,I,H[0],H[1],0,I,N,Y.subarray(0,K)):C.texSubImage2D(C.TEXTURE_2D,U,P,D,H[0],H[1],I,N,Y.subarray(0,K)),N===C.FLOAT?n.freeFloat32(Y):n.freeUint8(Y)}})(E,f,S,w,this.format,this.type,this._mipLevels,b)}}},1433:function(p){p.exports=function(s,t,i){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(i){if(i.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<i.length;++n){var a=i[n];if(a.buffer){var l=a.buffer,u=a.size||4,h=a.type||s.FLOAT,c=!!a.normalized,x=a.stride||0,d=a.offset||0;l.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,u,h,c,x,d)}else{if(typeof a=="number")s.vertexAttrib1f(n,a);else if(a.length===1)s.vertexAttrib1f(n,a[0]);else if(a.length===2)s.vertexAttrib2f(n,a[0],a[1]);else if(a.length===3)s.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},870:function(p,s,t){var i=t(1433);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,l){this._elements=a,this._attributes=n,this._elementsType=l||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,l){l=l||0;var u=this.gl;this._elements?u.drawElements(n,a,this._elementsType,l):u.drawArrays(n,l,a)},p.exports=function(n){return new r(n)}},7518:function(p,s,t){var i=t(1433);function r(a,l,u,h,c,x){this.location=a,this.dimension=l,this.a=u,this.b=h,this.c=c,this.d=x}function n(a,l,u){this.gl=a,this._ext=l,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,l,u){if(this.bind(),i(this.gl,l,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var c=a[h];typeof c=="number"?this._attribs.push(new r(h,1,c)):Array.isArray(c)&&this._attribs.push(new r(h,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!l,this._elementsType=u||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,l,u){u=u||0;var h=this.gl;this._useElements?h.drawElements(a,l,this._elementsType,u):h.drawArrays(a,u,l)},p.exports=function(a,l){return new n(a,l,l.createVertexArrayOES())}},8116:function(p,s,t){var i=t(7518),r=t(870);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}p.exports=function(a,l,u,h){var c,x=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(c=x?i(a,x):r(a)).update(l,u,h),c}},5632:function(p){p.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s}},8192:function(p,s,t){p.exports=function(a,l){var u=i(a[0],a[1],a[2]),h=i(l[0],l[1],l[2]);r(u,u),r(h,h);var c=n(u,h);return c>1?0:Math.acos(c)};var i=t(2825),r=t(3536),n=t(244)},9226:function(p){p.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},3126:function(p){p.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},3990:function(p){p.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},1091:function(p){p.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},5911:function(p){p.exports=function(s,t,i){var r=t[0],n=t[1],a=t[2],l=i[0],u=i[1],h=i[2];return s[0]=n*h-a*u,s[1]=a*l-r*h,s[2]=r*u-n*l,s}},5455:function(p,s,t){p.exports=t(7056)},7056:function(p){p.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return Math.sqrt(i*i+r*r+n*n)}},4008:function(p,s,t){p.exports=t(6690)},6690:function(p){p.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s}},244:function(p){p.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},2613:function(p){p.exports=1e-6},9922:function(p,s,t){p.exports=function(r,n){var a=r[0],l=r[1],u=r[2],h=n[0],c=n[1],x=n[2];return Math.abs(a-h)<=i*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(l-c)<=i*Math.max(1,Math.abs(l),Math.abs(c))&&Math.abs(u-x)<=i*Math.max(1,Math.abs(u),Math.abs(x))};var i=t(2613)},9265:function(p){p.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},2681:function(p){p.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},5137:function(p,s,t){p.exports=function(r,n,a,l,u,h){var c,x;for(n||(n=3),a||(a=0),x=l?Math.min(l*n+a,r.length):r.length,c=a;c<x;c+=n)i[0]=r[c],i[1]=r[c+1],i[2]=r[c+2],u(i,i,h),r[c]=i[0],r[c+1]=i[1],r[c+2]=i[2];return r};var i=t(1091)()},2825:function(p){p.exports=function(s,t,i){var r=new Float32Array(3);return r[0]=s,r[1]=t,r[2]=i,r}},2931:function(p,s,t){p.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(p){p.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},868:function(p,s,t){p.exports=t(1387)},1387:function(p){p.exports=function(s){var t=s[0],i=s[1],r=s[2];return Math.sqrt(t*t+i*i+r*r)}},6658:function(p){p.exports=function(s,t,i,r){var n=t[0],a=t[1],l=t[2];return s[0]=n+r*(i[0]-n),s[1]=a+r*(i[1]-a),s[2]=l+r*(i[2]-l),s}},7417:function(p){p.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s}},8107:function(p){p.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s}},4505:function(p,s,t){p.exports=t(5847)},5847:function(p){p.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s}},5093:function(p){p.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},3536:function(p){p.exports=function(s,t){var i=t[0],r=t[1],n=t[2],a=i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a),s}},7636:function(p){p.exports=function(s,t){t=t||1;var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return s[0]=Math.cos(i)*n,s[1]=Math.sin(i)*n,s[2]=r*t,s}},6894:function(p){p.exports=function(s,t,i,r){var n=i[1],a=i[2],l=t[1]-n,u=t[2]-a,h=Math.sin(r),c=Math.cos(r);return s[0]=t[0],s[1]=n+l*c-u*h,s[2]=a+l*h+u*c,s}},109:function(p){p.exports=function(s,t,i,r){var n=i[0],a=i[2],l=t[0]-n,u=t[2]-a,h=Math.sin(r),c=Math.cos(r);return s[0]=n+u*h+l*c,s[1]=t[1],s[2]=a+u*c-l*h,s}},8692:function(p){p.exports=function(s,t,i,r){var n=i[0],a=i[1],l=t[0]-n,u=t[1]-a,h=Math.sin(r),c=Math.cos(r);return s[0]=n+l*c-u*h,s[1]=a+l*h+u*c,s[2]=t[2],s}},2447:function(p){p.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},6621:function(p){p.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s}},8489:function(p){p.exports=function(s,t,i,r){return s[0]=t[0]+i[0]*r,s[1]=t[1]+i[1]*r,s[2]=t[2]+i[2]*r,s}},1463:function(p){p.exports=function(s,t,i,r){return s[0]=t,s[1]=i,s[2]=r,s}},6141:function(p,s,t){p.exports=t(2953)},5486:function(p,s,t){p.exports=t(3066)},2953:function(p){p.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return i*i+r*r+n*n}},3066:function(p){p.exports=function(s){var t=s[0],i=s[1],r=s[2];return t*t+i*i+r*r}},2229:function(p,s,t){p.exports=t(6843)},6843:function(p){p.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s}},492:function(p){p.exports=function(s,t,i){var r=t[0],n=t[1],a=t[2];return s[0]=r*i[0]+n*i[3]+a*i[6],s[1]=r*i[1]+n*i[4]+a*i[7],s[2]=r*i[2]+n*i[5]+a*i[8],s}},5673:function(p){p.exports=function(s,t,i){var r=t[0],n=t[1],a=t[2],l=i[3]*r+i[7]*n+i[11]*a+i[15];return l=l||1,s[0]=(i[0]*r+i[4]*n+i[8]*a+i[12])/l,s[1]=(i[1]*r+i[5]*n+i[9]*a+i[13])/l,s[2]=(i[2]*r+i[6]*n+i[10]*a+i[14])/l,s}},264:function(p){p.exports=function(s,t,i){var r=t[0],n=t[1],a=t[2],l=i[0],u=i[1],h=i[2],c=i[3],x=c*r+u*a-h*n,d=c*n+h*r-l*a,v=c*a+l*n-u*r,g=-l*r-u*n-h*a;return s[0]=x*c+g*-l+d*-h-v*-u,s[1]=d*c+g*-u+v*-l-x*-h,s[2]=v*c+g*-h+x*-u-d*-l,s}},4361:function(p){p.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s[3]=t[3]+i[3],s}},2335:function(p){p.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},2933:function(p){p.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},7536:function(p){p.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},4691:function(p){p.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return Math.sqrt(i*i+r*r+n*n+a*a)}},1373:function(p){p.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s[3]=t[3]/i[3],s}},3750:function(p){p.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},3390:function(p){p.exports=function(s,t,i,r){var n=new Float32Array(4);return n[0]=s,n[1]=t,n[2]=i,n[3]=r,n}},9970:function(p,s,t){p.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(p){p.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},6808:function(p){p.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3];return Math.sqrt(t*t+i*i+r*r+n*n)}},2573:function(p){p.exports=function(s,t,i,r){var n=t[0],a=t[1],l=t[2],u=t[3];return s[0]=n+r*(i[0]-n),s[1]=a+r*(i[1]-a),s[2]=l+r*(i[2]-l),s[3]=u+r*(i[3]-u),s}},160:function(p){p.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s[3]=Math.max(t[3],i[3]),s}},2334:function(p){p.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s[3]=Math.min(t[3],i[3]),s}},3576:function(p){p.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s[3]=t[3]*i[3],s}},1498:function(p){p.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},5177:function(p){p.exports=function(s,t){var i=t[0],r=t[1],n=t[2],a=t[3],l=i*i+r*r+n*n+a*a;return l>0&&(l=1/Math.sqrt(l),s[0]=i*l,s[1]=r*l,s[2]=n*l,s[3]=a*l),s}},9131:function(p,s,t){var i=t(5177),r=t(9288);p.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),i(n,n),r(n,n,a),n}},9288:function(p){p.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s[3]=t[3]*i,s}},4844:function(p){p.exports=function(s,t,i,r){return s[0]=t[0]+i[0]*r,s[1]=t[1]+i[1]*r,s[2]=t[2]+i[2]*r,s[3]=t[3]+i[3]*r,s}},4578:function(p){p.exports=function(s,t,i,r,n){return s[0]=t,s[1]=i,s[2]=r,s[3]=n,s}},7960:function(p){p.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return i*i+r*r+n*n+a*a}},483:function(p){p.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3];return t*t+i*i+r*r+n*n}},6860:function(p){p.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s[3]=t[3]-i[3],s}},5352:function(p){p.exports=function(s,t,i){var r=t[0],n=t[1],a=t[2],l=t[3];return s[0]=i[0]*r+i[4]*n+i[8]*a+i[12]*l,s[1]=i[1]*r+i[5]*n+i[9]*a+i[13]*l,s[2]=i[2]*r+i[6]*n+i[10]*a+i[14]*l,s[3]=i[3]*r+i[7]*n+i[11]*a+i[15]*l,s}},4041:function(p){p.exports=function(s,t,i){var r=t[0],n=t[1],a=t[2],l=i[0],u=i[1],h=i[2],c=i[3],x=c*r+u*a-h*n,d=c*n+h*r-l*a,v=c*a+l*n-u*r,g=-l*r-u*n-h*a;return s[0]=x*c+g*-l+d*-h-v*-u,s[1]=d*c+g*-u+v*-l-x*-h,s[2]=v*c+g*-h+x*-u-d*-l,s[3]=t[3],s}},1848:function(p,s,t){var i=t(4905),r=t(6468);p.exports=function(n){for(var a=Array.isArray(n)?n:i(n),l=0;l<a.length;l++){var u=a[l];if(u.type==="preprocessor"){var h=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var c=h[1],x=h[2];return(c?r(x):x).trim()}}}}},5874:function(p,s,t){p.exports=function(C){var P,D,U,I=0,N=0,W=u,F=[],j=[],H=1,te=0,Q=0,$=!1,K=!1,X="",Y=n,re=i;(C=C||{}).version==="300 es"&&(Y=l,re=a);var se={},ae={};for(I=0;I<Y.length;I++)se[Y[I]]=!0;for(I=0;I<re.length;I++)ae[re[I]]=!0;return function(de){return j=[],de!==null?function(Se){var _e;for(I=0,Se.toString&&(Se=Se.toString()),X+=Se.replace(/\r\n/g,`
`),U=X.length;P=X[I],I<U;){switch(_e=I,W){case c:I=ye();break;case x:case d:I=ve();break;case v:I=me();break;case g:I=ge();break;case E:I=Pe();break;case y:I=oe();break;case h:I=ie();break;case S:I=he();break;case u:I=fe()}_e!==I&&(X[_e]===`
`?(te=0,++H):++te)}return N+=I,X=X.slice(I),j}(de):(F.length&&ce(F.join("")),W=w,ce("(eof)"),j)};function ce(de){de.length&&j.push({type:O[W],data:de,position:Q,line:H,column:te})}function fe(){return F=F.length?[]:F,D==="/"&&P==="*"?(Q=N+I-1,W=c,D=P,I+1):D==="/"&&P==="/"?(Q=N+I-1,W=x,D=P,I+1):P==="#"?(W=d,Q=N+I,I):/\s/.test(P)?(W=S,Q=N+I,I):($=/\d/.test(P),K=/[^\w_]/.test(P),Q=N+I,W=$?g:K?v:h,I)}function he(){return/[^\s]/g.test(P)?(ce(F.join("")),W=u,I):(F.push(P),D=P,I+1)}function ve(){return P!=="\r"&&P!==`
`||D==="\\"?(F.push(P),D=P,I+1):(ce(F.join("")),W=u,I)}function ye(){return P==="/"&&D==="*"?(F.push(P),ce(F.join("")),W=u,I+1):(F.push(P),D=P,I+1)}function me(){if(D==="."&&/\d/.test(P))return W=y,I;if(D==="/"&&P==="*")return W=c,I;if(D==="/"&&P==="/")return W=x,I;if(P==="."&&F.length){for(;Me(F););return W=y,I}if(P===";"||P===")"||P==="("){if(F.length)for(;Me(F););return ce(P),W=u,I+1}var de=F.length===2&&P!=="=";if(/[\w_\d\s]/.test(P)||de){for(;Me(F););return W=u,I}return F.push(P),D=P,I+1}function Me(de){for(var Se,_e,we=0;;){if(Se=r.indexOf(de.slice(0,de.length+we).join("")),_e=r[Se],Se===-1){if(we--+de.length>0)continue;_e=de.slice(0,1).join("")}return ce(_e),Q+=_e.length,(F=F.slice(_e.length)).length}}function Pe(){return/[^a-fA-F0-9]/.test(P)?(ce(F.join("")),W=u,I):(F.push(P),D=P,I+1)}function ge(){return P==="."||/[eE]/.test(P)?(F.push(P),W=y,D=P,I+1):P==="x"&&F.length===1&&F[0]==="0"?(W=E,F.push(P),D=P,I+1):/[^\d]/.test(P)?(ce(F.join("")),W=u,I):(F.push(P),D=P,I+1)}function oe(){return P==="f"&&(F.push(P),D=P,I+=1),/[eE]/.test(P)?(F.push(P),D=P,I+1):(P!=="-"&&P!=="+"||!/[eE]/.test(D))&&/[^\d]/.test(P)?(ce(F.join("")),W=u,I):(F.push(P),D=P,I+1)}function ie(){if(/[^\d\w_]/.test(P)){var de=F.join("");return W=ae[de]?f:se[de]?b:m,ce(F.join("")),W=u,I}return F.push(P),D=P,I+1}};var i=t(620),r=t(7827),n=t(6852),a=t(7932),l=t(3508),u=999,h=9999,c=0,x=1,d=2,v=3,g=4,y=5,m=6,b=7,f=8,S=9,w=10,E=11,O=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(p,s,t){var i=t(6852);i=i.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),p.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(p){p.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(p,s,t){var i=t(620);p.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(p){p.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(p){p.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(p,s,t){var i=t(5874);p.exports=function(r,n){var a=i(n),l=[];return(l=l.concat(a(r))).concat(a(null))}},3236:function(p){p.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),i=[],r=0;r<s.length-1;r++)i.push(s[r],t[r]||"");return i.push(s[r]),i.join("")}},7520:function(p,s,t){var i=t(9507);p.exports=i&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},3778:function(p,s){s.read=function(t,i,r,n,a){var l,u,h=8*a-n-1,c=(1<<h)-1,x=c>>1,d=-7,v=r?a-1:0,g=r?-1:1,y=t[i+v];for(v+=g,l=y&(1<<-d)-1,y>>=-d,d+=h;d>0;l=256*l+t[i+v],v+=g,d-=8);for(u=l&(1<<-d)-1,l>>=-d,d+=n;d>0;u=256*u+t[i+v],v+=g,d-=8);if(l===0)l=1-x;else{if(l===c)return u?NaN:1/0*(y?-1:1);u+=Math.pow(2,n),l-=x}return(y?-1:1)*u*Math.pow(2,l-n)},s.write=function(t,i,r,n,a,l){var u,h,c,x=8*l-a-1,d=(1<<x)-1,v=d>>1,g=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:l-1,m=n?1:-1,b=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,u=d):(u=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-u))<1&&(u--,c*=2),(i+=u+v>=1?g/c:g*Math.pow(2,1-v))*c>=2&&(u++,c/=2),u+v>=d?(h=0,u=d):u+v>=1?(h=(i*c-1)*Math.pow(2,a),u+=v):(h=i*Math.pow(2,v-1)*Math.pow(2,a),u=0));a>=8;t[r+y]=255&h,y+=m,h/=256,a-=8);for(u=u<<a|h,x+=a;x>0;t[r+y]=255&u,y+=m,u/=256,x-=8);t[r+y-m]|=128*b}},8954:function(p,s,t){p.exports=function(x,d){var v=x.length;if(v===0)throw new Error("Must have at least d+1 points");var g=x[0].length;if(v<=g)throw new Error("Must input at least d+1 points");var y=x.slice(0,g+1),m=i.apply(void 0,y);if(m===0)throw new Error("Input not in general position");for(var b=new Array(g+1),f=0;f<=g;++f)b[f]=f;m<0&&(b[0]=1,b[1]=0);var S=new n(b,new Array(g+1),!1),w=S.adjacent,E=new Array(g+2);for(f=0;f<=g;++f){for(var O=b.slice(),C=0;C<=g;++C)C===f&&(O[C]=-1);var P=O[0];O[0]=O[1],O[1]=P;var D=new n(O,new Array(g+1),!0);w[f]=D,E[f]=D}for(E[g+1]=S,f=0;f<=g;++f){O=w[f].vertices;var U=w[f].adjacent;for(C=0;C<=g;++C){var I=O[C];if(I<0)U[C]=S;else for(var N=0;N<=g;++N)w[N].vertices.indexOf(I)<0&&(U[C]=w[N])}}var W=new h(g,y,E),F=!!d;for(f=g+1;f<v;++f)W.insert(x[f],F);return W.boundary()};var i=t(3250),r=t(6803).Fw;function n(x,d,v){this.vertices=x,this.adjacent=d,this.boundary=v,this.lastVisited=-1}function a(x,d,v){this.vertices=x,this.cell=d,this.index=v}function l(x,d){return r(x.vertices,d.vertices)}n.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var d=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=d};var u=[];function h(x,d,v){this.dimension=x,this.vertices=d,this.simplices=v,this.interior=v.filter(function(b){return!b.boundary}),this.tuple=new Array(x+1);for(var g=0;g<=x;++g)this.tuple[g]=this.vertices[g];var y,m=u[x];m||(m=u[x]=((y=i[x+1])||(y=i),function(b){return function(){var f=this.tuple;return b.apply(this,f)}}(y))),this.orient=m}var c=h.prototype;c.handleBoundaryDegeneracy=function(x,d){var v=this.dimension,g=this.vertices.length-1,y=this.tuple,m=this.vertices,b=[x];for(x.lastVisited=-g;b.length>0;)for(var f=(x=b.pop()).adjacent,S=0;S<=v;++S){var w=f[S];if(w.boundary&&!(w.lastVisited<=-g)){for(var E=w.vertices,O=0;O<=v;++O){var C=E[O];y[O]=C<0?d:m[C]}var P=this.orient();if(P>0)return w;w.lastVisited=-g,P===0&&b.push(w)}}return null},c.walk=function(x,d){var v=this.vertices.length-1,g=this.dimension,y=this.vertices,m=this.tuple,b=d?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[b];e:for(;!f.boundary;){for(var S=f.vertices,w=f.adjacent,E=0;E<=g;++E)m[E]=y[S[E]];for(f.lastVisited=v,E=0;E<=g;++E){var O=w[E];if(!(O.lastVisited>=v)){var C=m[E];m[E]=x;var P=this.orient();if(m[E]=C,P<0){f=O;continue e}O.boundary?O.lastVisited=-v:O.lastVisited=v}}return}return f},c.addPeaks=function(x,d){var v=this.vertices.length-1,g=this.dimension,y=this.vertices,m=this.tuple,b=this.interior,f=this.simplices,S=[d];d.lastVisited=v,d.vertices[d.vertices.indexOf(-1)]=v,d.boundary=!1,b.push(d);for(var w=[];S.length>0;){var E=(d=S.pop()).vertices,O=d.adjacent,C=E.indexOf(v);if(!(C<0)){for(var P=0;P<=g;++P)if(P!==C){var D=O[P];if(D.boundary&&!(D.lastVisited>=v)){var U=D.vertices;if(D.lastVisited!==-v){for(var I=0,N=0;N<=g;++N)U[N]<0?(I=N,m[N]=x):m[N]=y[U[N]];if(this.orient()>0){U[I]=v,D.boundary=!1,b.push(D),S.push(D),D.lastVisited=v;continue}D.lastVisited=-v}var W=D.adjacent,F=E.slice(),j=O.slice(),H=new n(F,j,!0);f.push(H);var te=W.indexOf(d);if(!(te<0))for(W[te]=H,j[C]=D,F[P]=-1,j[P]=d,O[P]=H,H.flip(),N=0;N<=g;++N){var Q=F[N];if(!(Q<0||Q===v)){for(var $=new Array(g-1),K=0,X=0;X<=g;++X){var Y=F[X];Y<0||X===N||($[K++]=Y)}w.push(new a($,H,N))}}}}}}for(w.sort(l),P=0;P+1<w.length;P+=2){var re=w[P],se=w[P+1],ae=re.index,ce=se.index;ae<0||ce<0||(re.cell.adjacent[re.index]=se.cell,se.cell.adjacent[se.index]=re.cell)}},c.insert=function(x,d){var v=this.vertices;v.push(x);var g=this.walk(x,d);if(g){for(var y=this.dimension,m=this.tuple,b=0;b<=y;++b){var f=g.vertices[b];m[b]=f<0?x:v[f]}var S=this.orient(m);S<0||(S!==0||(g=this.handleBoundaryDegeneracy(g,x)))&&this.addPeaks(x,g)}},c.boundary=function(){for(var x=this.dimension,d=[],v=this.simplices,g=v.length,y=0;y<g;++y){var m=v[y];if(m.boundary){for(var b=new Array(x),f=m.vertices,S=0,w=0,E=0;E<=x;++E)f[E]>=0?b[S++]=f[E]:w=1&E;if(w===(1&x)){var O=b[0];b[0]=b[1],b[1]=O}d.push(b)}}return d}},3352:function(p,s,t){var i=t(2478);function r(S,w,E,O,C){this.mid=S,this.left=w,this.right=E,this.leftPoints=O,this.rightPoints=C,this.count=(w?w.count:0)+(E?E.count:0)+O.length}p.exports=function(S){return S&&S.length!==0?new b(m(S)):new b(null)};var n=r.prototype;function a(S,w){S.mid=w.mid,S.left=w.left,S.right=w.right,S.leftPoints=w.leftPoints,S.rightPoints=w.rightPoints,S.count=w.count}function l(S,w){var E=m(w);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,w){var E=S.intervals([]);E.push(w),l(S,E)}function h(S,w){var E=S.intervals([]),O=E.indexOf(w);return O<0?0:(E.splice(O,1),l(S,E),1)}function c(S,w,E){for(var O=0;O<S.length&&S[O][0]<=w;++O){var C=E(S[O]);if(C)return C}}function x(S,w,E){for(var O=S.length-1;O>=0&&S[O][1]>=w;--O){var C=E(S[O]);if(C)return C}}function d(S,w){for(var E=0;E<S.length;++E){var O=w(S[E]);if(O)return O}}function v(S,w){return S-w}function g(S,w){return S[0]-w[0]||S[1]-w[1]}function y(S,w){return S[1]-w[1]||S[0]-w[0]}function m(S){if(S.length===0)return null;for(var w=[],E=0;E<S.length;++E)w.push(S[E][0],S[E][1]);w.sort(v);var O=w[w.length>>1],C=[],P=[],D=[];for(E=0;E<S.length;++E){var U=S[E];U[1]<O?C.push(U):O<U[0]?P.push(U):D.push(U)}var I=D,N=D.slice();return I.sort(g),N.sort(y),new r(O,m(C),m(P),I,N)}function b(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var w=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?u(this,S):this.left.insert(S):this.left=m([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?u(this,S):this.right.insert(S):this.right=m([S]);else{var E=i.ge(this.leftPoints,S,g),O=i.ge(this.rightPoints,S,y);this.leftPoints.splice(E,0,S),this.rightPoints.splice(O,0,S)}},n.remove=function(S){var w=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?h(this,S):(P=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?h(this,S):(P=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,O=this.left;O.right;)E=O,O=O.right;if(E===this)O.right=this.right;else{var C=this.left,P=this.right;E.count-=O.count,E.right=O.left,O.left=C,O.right=P}a(this,O),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(C=i.ge(this.leftPoints,S,g);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S){for(this.count-=1,this.leftPoints.splice(C,1),P=i.ge(this.rightPoints,S,y);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1}return 0},n.queryPoint=function(S,w){return S<this.mid?this.left&&(E=this.left.queryPoint(S,w))?E:c(this.leftPoints,S,w):S>this.mid?this.right&&(E=this.right.queryPoint(S,w))?E:x(this.rightPoints,S,w):d(this.leftPoints,w);var E},n.queryInterval=function(S,w,E){var O;return S<this.mid&&this.left&&(O=this.left.queryInterval(S,w,E))||w>this.mid&&this.right&&(O=this.right.queryInterval(S,w,E))?O:w<this.mid?c(this.leftPoints,w,E):S>this.mid?x(this.rightPoints,S,E):d(this.leftPoints,E)};var f=b.prototype;f.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},f.remove=function(S){if(this.root){var w=this.root.remove(S);return w===2&&(this.root=null),w!==0}return!1},f.queryPoint=function(S,w){if(this.root)return this.root.queryPoint(S,w)},f.queryInterval=function(S,w,E){if(S<=w&&this.root)return this.root.queryInterval(S,w,E)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(p){p.exports=function(s){for(var t=new Array(s),i=0;i<s;++i)t[i]=i;return t}},9507:function(p){p.exports=!0},7163:function(p){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}p.exports=function(t){return t!=null&&(s(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&s(i.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(p){p.exports=function(s){for(var t,i=s.length,r=0;r<i;r++)if(((t=s.charCodeAt(r))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},395:function(p){p.exports=function(s,t,i){return s*(1-i)+t*i}},2652:function(p,s,t){var i=t(4335),r=t(6864),n=t(1903),a=t(9921),l=t(7608),u=t(5665),h={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},c=r(),x=r(),d=[0,0,0,0],v=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function y(m,b,f,S,w){m[0]=b[0]*S+f[0]*w,m[1]=b[1]*S+f[1]*w,m[2]=b[2]*S+f[2]*w}p.exports=function(m,b,f,S,w,E){if(b||(b=[0,0,0]),f||(f=[0,0,0]),S||(S=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(c,m)||(n(x,c),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var O,C,P,D,U,I,N,W=c[3],F=c[7],j=c[11],H=c[12],te=c[13],Q=c[14],$=c[15];if(W!==0||F!==0||j!==0){if(d[0]=W,d[1]=F,d[2]=j,d[3]=$,!l(x,x))return!1;u(x,x),O=w,P=x,D=(C=d)[0],U=C[1],I=C[2],N=C[3],O[0]=P[0]*D+P[4]*U+P[8]*I+P[12]*N,O[1]=P[1]*D+P[5]*U+P[9]*I+P[13]*N,O[2]=P[2]*D+P[6]*U+P[10]*I+P[14]*N,O[3]=P[3]*D+P[7]*U+P[11]*I+P[15]*N}else w[0]=w[1]=w[2]=0,w[3]=1;if(b[0]=H,b[1]=te,b[2]=Q,function(X,Y){X[0][0]=Y[0],X[0][1]=Y[1],X[0][2]=Y[2],X[1][0]=Y[4],X[1][1]=Y[5],X[1][2]=Y[6],X[2][0]=Y[8],X[2][1]=Y[9],X[2][2]=Y[10]}(v,c),f[0]=h.length(v[0]),h.normalize(v[0],v[0]),S[0]=h.dot(v[0],v[1]),y(v[1],v[1],v[0],1,-S[0]),f[1]=h.length(v[1]),h.normalize(v[1],v[1]),S[0]/=f[1],S[1]=h.dot(v[0],v[2]),y(v[2],v[2],v[0],1,-S[1]),S[2]=h.dot(v[1],v[2]),y(v[2],v[2],v[1],1,-S[2]),f[2]=h.length(v[2]),h.normalize(v[2],v[2]),S[1]/=f[2],S[2]/=f[2],h.cross(g,v[1],v[2]),h.dot(v[0],g)<0)for(var K=0;K<3;K++)f[K]*=-1,v[K][0]*=-1,v[K][1]*=-1,v[K][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+v[0][0]-v[1][1]-v[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-v[0][0]+v[1][1]-v[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-v[0][0]-v[1][1]+v[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+v[0][0]+v[1][1]+v[2][2],0)),v[2][1]>v[1][2]&&(E[0]=-E[0]),v[0][2]>v[2][0]&&(E[1]=-E[1]),v[1][0]>v[0][1]&&(E[2]=-E[2]),!0}},4335:function(p){p.exports=function(s,t){var i=t[15];if(i===0)return!1;for(var r=1/i,n=0;n<16;n++)s[n]=t[n]*r;return!0}},7442:function(p,s,t){var i=t(6658),r=t(7182),n=t(2652),a=t(9921),l=t(8648),u=x(),h=x(),c=x();function x(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(v){return[v||0,v||0,v||0]}p.exports=function(v,g,y,m){if(a(g)===0||a(y)===0)return!1;var b=n(g,u.translate,u.scale,u.skew,u.perspective,u.quaternion),f=n(y,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!b||!f||(i(c.translate,u.translate,h.translate,m),i(c.skew,u.skew,h.skew,m),i(c.scale,u.scale,h.scale,m),i(c.perspective,u.perspective,h.perspective,m),l(c.quaternion,u.quaternion,h.quaternion,m),r(v,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},7182:function(p,s,t){var i={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},r=(i.create(),i.create());p.exports=function(n,a,l,u,h,c){return i.identity(n),i.fromRotationTranslation(n,c,a),n[3]=h[0],n[7]=h[1],n[11]=h[2],n[15]=h[3],i.identity(r),u[2]!==0&&(r[9]=u[2],i.multiply(n,n,r)),u[1]!==0&&(r[9]=0,r[8]=u[1],i.multiply(n,n,r)),u[0]!==0&&(r[8]=0,r[4]=u[0],i.multiply(n,n,r)),i.scale(n,n,l),n}},4192:function(p,s,t){var i=t(2478),r=t(7442),n=t(7608),a=t(5567),l=t(2408),u=t(7089),h=t(6582),c=t(7656),x=(t(2504),t(3536)),d=[0,0,0];function v(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}p.exports=function(m){return new v((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=v.prototype;g.recalcMatrix=function(m){var b=this._time,f=i.le(b,m),S=this.computedMatrix;if(!(f<0)){var w=this._components;if(f===b.length-1)for(var E=16*f,O=0;O<16;++O)S[O]=w[E++];else{var C=b[f+1]-b[f],P=(E=16*f,this.prevMatrix),D=!0;for(O=0;O<16;++O)P[O]=w[E++];var U=this.nextMatrix;for(O=0;O<16;++O)U[O]=w[E++],D=D&&P[O]===U[O];if(C<1e-6||D)for(O=0;O<16;++O)S[O]=P[O];else r(S,P,U,(m-b[f])/C)}var I=this.computedUp;I[0]=S[1],I[1]=S[5],I[2]=S[9],x(I,I);var N=this.computedInverse;n(N,S);var W=this.computedEye,F=N[15];W[0]=N[12]/F,W[1]=N[13]/F,W[2]=N[14]/F;var j=this.computedCenter,H=Math.exp(this.computedRadius[0]);for(O=0;O<3;++O)j[O]=W[O]-S[2+4*O]*H}},g.idle=function(m){if(!(m<this.lastT())){for(var b=this._components,f=b.length-16,S=0;S<16;++S)b.push(b[f++]);this._time.push(m)}},g.flush=function(m){var b=i.gt(this._time,m)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(m,b,f,S){this.recalcMatrix(m),b=b||this.computedEye,f=f||d,S=S||this.computedUp,this.setMatrix(m,h(this.computedMatrix,b,f,S));for(var w=0,E=0;E<3;++E)w+=Math.pow(f[E]-b[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},g.rotate=function(m,b,f,S){this.recalcMatrix(m);var w=this.computedInverse;b&&l(w,w,b),f&&a(w,w,f),S&&u(w,w,S),this.setMatrix(m,n(this.computedMatrix,w))};var y=[0,0,0];g.pan=function(m,b,f,S){y[0]=-(b||0),y[1]=-(f||0),y[2]=-(S||0),this.recalcMatrix(m);var w=this.computedInverse;c(w,w,y),this.setMatrix(m,n(w,w))},g.translate=function(m,b,f,S){y[0]=b||0,y[1]=f||0,y[2]=S||0,this.recalcMatrix(m);var w=this.computedMatrix;c(w,w,y),this.setMatrix(m,w)},g.setMatrix=function(m,b){if(!(m<this.lastT())){this._time.push(m);for(var f=0;f<16;++f)this._components.push(b[f])}},g.setDistance=function(m,b){this.computedRadius[0]=b},g.setDistanceLimits=function(m,b){var f=this._limits;f[0]=m,f[1]=b},g.getDistanceLimits=function(m){var b=this._limits;return m?(m[0]=b[0],m[1]=b[1],m):b}},3090:function(p,s,t){p.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),l=0;l<n;++l)a[l]=l;return n===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var u=new Array(n);for(l=0;l<n;++l)u[l]=l;u.sort(function(b,f){return r[b][0]-r[f][0]||r[b][1]-r[f][1]});var h=[u[0],u[1]],c=[u[0],u[1]];for(l=2;l<n;++l){for(var x=u[l],d=r[x],v=h.length;v>1&&i(r[h[v-2]],r[h[v-1]],d)<=0;)v-=1,h.pop();for(h.push(x),v=c.length;v>1&&i(r[c[v-2]],r[c[v-1]],d)>=0;)v-=1,c.pop();c.push(x)}a=new Array(c.length+h.length-2);for(var g=0,y=(l=0,h.length);l<y;++l)a[g++]=h[l];for(var m=c.length-2;m>0;--m)a[g++]=c[m];return a};var i=t(3250)[3]},351:function(p,s,t){p.exports=function(r,n){n||(n=r,r=window);var a=0,l=0,u=0,h={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function x(E){var O=!1;return"altKey"in E&&(O=O||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(O=O||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(O=O||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(O=O||E.metaKey!==h.meta,h.meta=!!E.metaKey),O}function d(E,O){var C=i.x(O),P=i.y(O);"buttons"in O&&(E=0|O.buttons),(E!==a||C!==l||P!==u||x(O))&&(a=0|E,l=C||0,u=P||0,n&&n(a,l,u,h))}function v(E){d(0,E)}function g(){(a||l||u||h.shift||h.alt||h.meta||h.control)&&(l=u=0,a=0,h.shift=h.alt=h.control=h.meta=!1,n&&n(0,0,0,h))}function y(E){x(E)&&n&&n(a,l,u,h)}function m(E){i.buttons(E)===0?d(0,E):d(a,E)}function b(E){d(a|i.buttons(E),E)}function f(E){d(a&~i.buttons(E),E)}function S(){c||(c=!0,r.addEventListener("mousemove",m),r.addEventListener("mousedown",b),r.addEventListener("mouseup",f),r.addEventListener("mouseleave",v),r.addEventListener("mouseenter",v),r.addEventListener("mouseout",v),r.addEventListener("mouseover",v),r.addEventListener("blur",g),r.addEventListener("keyup",y),r.addEventListener("keydown",y),r.addEventListener("keypress",y),r!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}S();var w={element:r};return Object.defineProperties(w,{enabled:{get:function(){return c},set:function(E){E?S():c&&(c=!1,r.removeEventListener("mousemove",m),r.removeEventListener("mousedown",b),r.removeEventListener("mouseup",f),r.removeEventListener("mouseleave",v),r.removeEventListener("mouseenter",v),r.removeEventListener("mouseout",v),r.removeEventListener("mouseover",v),r.removeEventListener("blur",g),r.removeEventListener("keyup",y),r.removeEventListener("keydown",y),r.removeEventListener("keypress",y),r!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),w};var i=t(4687)},24:function(p){var s={left:0,top:0};p.exports=function(t,i,r){i=i||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=t.clientX||0,l=t.clientY||0,u=(n=i)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=a-u.left,r[1]=l-u.top,r}},4687:function(p,s){function t(i){return i.target||i.srcElement||window}s.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((r=i.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in i){var r;if((r=i.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=t,s.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var r=t(i).getBoundingClientRect();return i.clientX-r.left}return 0},s.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var r=t(i).getBoundingClientRect();return i.clientY-r.top}return 0}},8512:function(p,s,t){var i=t(665);p.exports=function(r,n,a){typeof r=="function"&&(a=!!n,n=r,r=window);var l=i("ex",r),u=function(h){a&&h.preventDefault();var c=h.deltaX||0,x=h.deltaY||0,d=h.deltaZ||0,v=1;switch(h.deltaMode){case 1:v=l;break;case 2:v=window.innerHeight}if(x*=v,d*=v,(c*=v)||x||d)return n(c,x,d,h)};return r.addEventListener("wheel",u),u}},2640:function(p,s,t){var i=t(1888);p.exports=function(n){function a(d){throw new Error("ndarray-extract-contour: "+d)}typeof n!="object"&&a("Must specify arguments");var l=n.order;Array.isArray(l)||a("Must specify order");var u=n.arrayArguments||1;u<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof n.vertex!="function"&&a("Must specify vertex creation function"),typeof n.cell!="function"&&a("Must specify cell creation function"),typeof n.phase!="function"&&a("Must specify phase function");for(var h=n.getters||[],c=new Array(u),x=0;x<u;++x)h.indexOf(x)>=0?c[x]=!0:c[x]=!1;return function(d,v,g,y,m,b){var f=[b,m].join(",");return(0,r[f])(d,v,g,i.mallocUint32,i.freeUint32)}(n.vertex,n.cell,n.phase,0,l,c)};var r={"false,0,1":function(n,a,l,u,h){return function(c,x,d,v){var g,y=0|c.shape[0],m=0|c.shape[1],b=c.data,f=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=f,O=0|-S,C=0,P=0|-w,D=0,U=-S-w|0,I=0,N=0|S,W=w-S*y|0,F=0,j=0,H=0,te=2*y|0,Q=u(te),$=u(te),K=0,X=0,Y=-1,re=-1,se=0,ae=0|-y,ce=0|y,fe=0,he=-y-1|0,ve=y-1|0,ye=0,me=0,Me=0;for(F=0;F<y;++F)Q[K++]=l(b[E],x,d,v),E+=N;if(E+=W,m>0){if(j=1,Q[K++]=l(b[E],x,d,v),E+=N,y>0)for(F=1,g=b[E],X=Q[K]=l(g,x,d,v),se=Q[K+Y],fe=Q[K+ae],ye=Q[K+he],X===se&&X===fe&&X===ye||(C=b[E+O],D=b[E+P],I=b[E+U],n(F,j,g,C,D,I,X,se,fe,ye,x,d,v),me=$[K]=H++),K+=1,E+=N,F=2;F<y;++F)g=b[E],X=Q[K]=l(g,x,d,v),se=Q[K+Y],fe=Q[K+ae],ye=Q[K+he],X===se&&X===fe&&X===ye||(C=b[E+O],D=b[E+P],I=b[E+U],n(F,j,g,C,D,I,X,se,fe,ye,x,d,v),me=$[K]=H++,ye!==se&&a($[K+Y],me,I,C,ye,se,x,d,v)),K+=1,E+=N;for(E+=W,K=0,Me=Y,Y=re,re=Me,Me=ae,ae=ce,ce=Me,Me=he,he=ve,ve=Me,j=2;j<m;++j){if(Q[K++]=l(b[E],x,d,v),E+=N,y>0)for(F=1,g=b[E],X=Q[K]=l(g,x,d,v),se=Q[K+Y],fe=Q[K+ae],ye=Q[K+he],X===se&&X===fe&&X===ye||(C=b[E+O],D=b[E+P],I=b[E+U],n(F,j,g,C,D,I,X,se,fe,ye,x,d,v),me=$[K]=H++,ye!==fe&&a($[K+ae],me,D,I,fe,ye,x,d,v)),K+=1,E+=N,F=2;F<y;++F)g=b[E],X=Q[K]=l(g,x,d,v),se=Q[K+Y],fe=Q[K+ae],ye=Q[K+he],X===se&&X===fe&&X===ye||(C=b[E+O],D=b[E+P],I=b[E+U],n(F,j,g,C,D,I,X,se,fe,ye,x,d,v),me=$[K]=H++,ye!==fe&&a($[K+ae],me,D,I,fe,ye,x,d,v),ye!==se&&a($[K+Y],me,I,C,ye,se,x,d,v)),K+=1,E+=N;1&j&&(K=0),Me=Y,Y=re,re=Me,Me=ae,ae=ce,ce=Me,Me=he,he=ve,ve=Me,E+=W}}h($),h(Q)}},"false,1,0":function(n,a,l,u,h){return function(c,x,d,v){var g,y=0|c.shape[0],m=0|c.shape[1],b=c.data,f=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=f,O=0|-S,C=0,P=0|-w,D=0,U=-S-w|0,I=0,N=0|w,W=S-w*m|0,F=0,j=0,H=0,te=2*m|0,Q=u(te),$=u(te),K=0,X=0,Y=-1,re=-1,se=0,ae=0|-m,ce=0|m,fe=0,he=-m-1|0,ve=m-1|0,ye=0,me=0,Me=0;for(j=0;j<m;++j)Q[K++]=l(b[E],x,d,v),E+=N;if(E+=W,y>0){if(F=1,Q[K++]=l(b[E],x,d,v),E+=N,m>0)for(j=1,g=b[E],X=Q[K]=l(g,x,d,v),fe=Q[K+ae],se=Q[K+Y],ye=Q[K+he],X===fe&&X===se&&X===ye||(C=b[E+O],D=b[E+P],I=b[E+U],n(F,j,g,C,D,I,X,fe,se,ye,x,d,v),me=$[K]=H++),K+=1,E+=N,j=2;j<m;++j)g=b[E],X=Q[K]=l(g,x,d,v),fe=Q[K+ae],se=Q[K+Y],ye=Q[K+he],X===fe&&X===se&&X===ye||(C=b[E+O],D=b[E+P],I=b[E+U],n(F,j,g,C,D,I,X,fe,se,ye,x,d,v),me=$[K]=H++,ye!==se&&a($[K+Y],me,D,I,se,ye,x,d,v)),K+=1,E+=N;for(E+=W,K=0,Me=ae,ae=ce,ce=Me,Me=Y,Y=re,re=Me,Me=he,he=ve,ve=Me,F=2;F<y;++F){if(Q[K++]=l(b[E],x,d,v),E+=N,m>0)for(j=1,g=b[E],X=Q[K]=l(g,x,d,v),fe=Q[K+ae],se=Q[K+Y],ye=Q[K+he],X===fe&&X===se&&X===ye||(C=b[E+O],D=b[E+P],I=b[E+U],n(F,j,g,C,D,I,X,fe,se,ye,x,d,v),me=$[K]=H++,ye!==fe&&a($[K+ae],me,I,C,ye,fe,x,d,v)),K+=1,E+=N,j=2;j<m;++j)g=b[E],X=Q[K]=l(g,x,d,v),fe=Q[K+ae],se=Q[K+Y],ye=Q[K+he],X===fe&&X===se&&X===ye||(C=b[E+O],D=b[E+P],I=b[E+U],n(F,j,g,C,D,I,X,fe,se,ye,x,d,v),me=$[K]=H++,ye!==se&&a($[K+Y],me,D,I,se,ye,x,d,v),ye!==fe&&a($[K+ae],me,I,C,ye,fe,x,d,v)),K+=1,E+=N;1&F&&(K=0),Me=ae,ae=ce,ce=Me,Me=Y,Y=re,re=Me,Me=he,he=ve,ve=Me,E+=W}}h($),h(Q)}}}},6199:function(p,s,t){var i=t(1338),r={zero:function(y,m,b,f){var S=y[0];f|=0;var w=0,E=b[0];for(w=0;w<S;++w)m[f]=0,f+=E},fdTemplate1:function(y,m,b,f,S,w,E){var O=y[0],C=b[0],P=-1*C,D=C;f|=0,E|=0;var U=0,I=C,N=w[0];for(U=0;U<O;++U)S[E]=.5*(m[f+P]-m[f+D]),f+=I,E+=N},fdTemplate2:function(y,m,b,f,S,w,E,O,C,P){var D=y[0],U=y[1],I=b[0],N=b[1],W=w[0],F=w[1],j=C[0],H=C[1],te=-1*I,Q=I,$=-1*N,K=N;f|=0,E|=0,P|=0;var X=0,Y=0,re=N,se=I-U*N,ae=F,ce=W-U*F,fe=H,he=j-U*H;for(Y=0;Y<D;++Y){for(X=0;X<U;++X)S[E]=.5*(m[f+te]-m[f+Q]),O[P]=.5*(m[f+$]-m[f+K]),f+=re,E+=ae,P+=fe;f+=se,E+=ce,P+=he}}},n={cdiff:function(y){var m={};return function(b,f,S){var w=b.dtype,E=b.order,O=f.dtype,C=f.order,P=S.dtype,D=S.order,U=[w,E.join(),O,C.join(),P,D.join()].join(),I=m[U];return I||(m[U]=I=y([w,E,O,C,P,D])),I(b.shape.slice(0),b.data,b.stride,0|b.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}},zero:function(y){var m={};return function(b){var f=b.dtype,S=b.order,w=[f,S.join()].join(),E=m[w];return E||(m[w]=E=y([f,S])),E(b.shape.slice(0),b.data,b.stride,0|b.offset)}},fdTemplate1:function(y){var m={};return function(b,f){var S=b.dtype,w=b.order,E=f.dtype,O=f.order,C=[S,w.join(),E,O.join()].join(),P=m[C];return P||(m[C]=P=y([S,w,E,O])),P(b.shape.slice(0),b.data,b.stride,0|b.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(y){var m={};return function(b,f,S){var w=b.dtype,E=b.order,O=f.dtype,C=f.order,P=S.dtype,D=S.order,U=[w,E.join(),O,C.join(),P,D.join()].join(),I=m[U];return I||(m[U]=I=y([w,E,O,C,P,D])),I(b.shape.slice(0),b.data,b.stride,0|b.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}}};function a(y){return(0,n[y.funcName])(l.bind(void 0,y))}function l(y){return r[y.funcName]}function u(y){return a({funcName:y.funcName})}var h={},c={},x=u({funcName:"cdiff"}),d=u({funcName:"zero"});function v(y){return y in h?h[y]:h[y]=u({funcName:"fdTemplate"+y})}function g(y,m,b,f){return function(S,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&f(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(b(w.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),m(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(b(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(b(w.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),m(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(b(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}p.exports=function(y,m,b){return Array.isArray(b)||(b=i(m.dimension,typeof b=="string"?b:"clamp")),m.size===0?y:m.dimension===0?(y.set(0),y):function(f){var S=f.join();if(C=c[S])return C;for(var w=f.length,E=[x,d],O=1;O<=w;++O)E.push(v(O));var C=g.apply(void 0,E);return c[S]=C,C}(b)(y,m)}},4317:function(p){function s(n,a){var l=Math.floor(a),u=a-l,h=0<=l&&l<n.shape[0],c=0<=l+1&&l+1<n.shape[0];return(1-u)*(h?+n.get(l):0)+u*(c?+n.get(l+1):0)}function t(n,a,l){var u=Math.floor(a),h=a-u,c=0<=u&&u<n.shape[0],x=0<=u+1&&u+1<n.shape[0],d=Math.floor(l),v=l-d,g=0<=d&&d<n.shape[1],y=0<=d+1&&d+1<n.shape[1],m=c&&g?n.get(u,d):0,b=c&&y?n.get(u,d+1):0;return(1-v)*((1-h)*m+h*(x&&g?n.get(u+1,d):0))+v*((1-h)*b+h*(x&&y?n.get(u+1,d+1):0))}function i(n,a,l,u){var h=Math.floor(a),c=a-h,x=0<=h&&h<n.shape[0],d=0<=h+1&&h+1<n.shape[0],v=Math.floor(l),g=l-v,y=0<=v&&v<n.shape[1],m=0<=v+1&&v+1<n.shape[1],b=Math.floor(u),f=u-b,S=0<=b&&b<n.shape[2],w=0<=b+1&&b+1<n.shape[2],E=x&&y&&S?n.get(h,v,b):0,O=x&&m&&S?n.get(h,v+1,b):0,C=d&&y&&S?n.get(h+1,v,b):0,P=d&&m&&S?n.get(h+1,v+1,b):0,D=x&&y&&w?n.get(h,v,b+1):0,U=x&&m&&w?n.get(h,v+1,b+1):0;return(1-f)*((1-g)*((1-c)*E+c*C)+g*((1-c)*O+c*P))+f*((1-g)*((1-c)*D+c*(d&&y&&w?n.get(h+1,v,b+1):0))+g*((1-c)*U+c*(d&&m&&w?n.get(h+1,v+1,b+1):0)))}function r(n){var a,l,u=0|n.shape.length,h=new Array(u),c=new Array(u),x=new Array(u),d=new Array(u);for(a=0;a<u;++a)l=+arguments[a+1],h[a]=Math.floor(l),c[a]=l-h[a],x[a]=0<=h[a]&&h[a]<n.shape[a],d[a]=0<=h[a]+1&&h[a]+1<n.shape[a];var v,g,y,m=0;e:for(a=0;a<1<<u;++a){for(g=1,y=n.offset,v=0;v<u;++v)if(a&1<<v){if(!d[v])continue e;g*=c[v],y+=n.stride[v]*(h[v]+1)}else{if(!x[v])continue e;g*=1-c[v],y+=n.stride[v]*h[v]}m+=g*n.data[y]}return m}p.exports=function(n,a,l,u){switch(n.shape.length){case 0:return 0;case 1:return s(n,a);case 2:return t(n,a,l);case 3:return i(n,a,l,u);default:return r.apply(void 0,arguments)}},p.exports.d1=s,p.exports.d2=t,p.exports.d3=i},5298:function(p,s){var t={"float64,2,1,0":function(){return function(l,u,h,c,x){var d=l[0],v=l[1],g=l[2],y=h[0],m=h[1],b=h[2];c|=0;var f=0,S=0,w=0,E=b,O=m-g*b,C=y-v*m;for(w=0;w<d;++w){for(S=0;S<v;++S){for(f=0;f<g;++f)u[c]/=x,c+=E;c+=O}c+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,u,h,c,x,d,v,g){for(var y=l[0],m=l[1],b=l[2],f=h[0],S=h[1],w=h[2],E=d[0],O=d[1],C=d[2],P=c|=0,D=v|=0,U=0|l[0];U>0;){U<64?(y=U,U=0):(y=64,U-=64);for(var I=0|l[1];I>0;){I<64?(m=I,I=0):(m=64,I-=64),c=P+U*f+I*S,v=D+U*E+I*O;var N=0,W=0,F=0,j=w,H=f-b*w,te=S-y*f,Q=C,$=E-b*C,K=O-y*E;for(F=0;F<m;++F){for(W=0;W<y;++W){for(N=0;N<b;++N)u[c]=x[v]*g,c+=j,v+=Q;c+=H,v+=$}c+=te,v+=K}}}}},"float32,1,0,float32,1,0":function(){return function(l,u,h,c,x,d,v){var g=l[0],y=l[1],m=h[0],b=h[1],f=d[0],S=d[1];c|=0,v|=0;var w=0,E=0,O=b,C=m-y*b,P=S,D=f-y*S;for(E=0;E<g;++E){for(w=0;w<y;++w)u[c]=x[v],c+=O,v+=P;c+=C,v+=D}}},"float32,1,0,float32,0,1":function(){return function(l,u,h,c,x,d,v){for(var g=l[0],y=l[1],m=h[0],b=h[1],f=d[0],S=d[1],w=c|=0,E=v|=0,O=0|l[1];O>0;){O<64?(y=O,O=0):(y=64,O-=64);for(var C=0|l[0];C>0;){C<64?(g=C,C=0):(g=64,C-=64),c=w+O*b+C*m,v=E+O*S+C*f;var P=0,D=0,U=b,I=m-y*b,N=S,W=f-y*S;for(D=0;D<g;++D){for(P=0;P<y;++P)u[c]=x[v],c+=U,v+=N;c+=I,v+=W}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,u,h,c,x,d,v){for(var g=l[0],y=l[1],m=l[2],b=h[0],f=h[1],S=h[2],w=d[0],E=d[1],O=d[2],C=c|=0,P=v|=0,D=0|l[2];D>0;){D<64?(m=D,D=0):(m=64,D-=64);for(var U=0|l[0];U>0;){U<64?(g=U,U=0):(g=64,U-=64);for(var I=0|l[1];I>0;){I<64?(y=I,I=0):(y=64,I-=64),c=C+D*S+U*b+I*f,v=P+D*O+U*w+I*E;var N=0,W=0,F=0,j=S,H=b-m*S,te=f-g*b,Q=O,$=w-m*O,K=E-g*w;for(F=0;F<y;++F){for(W=0;W<g;++W){for(N=0;N<m;++N)u[c]=x[v],c+=j,v+=Q;c+=H,v+=$}c+=te,v+=K}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,u,h,c,x,d,v){var g=l[0],y=l[1],m=l[2],b=h[0],f=h[1],S=h[2],w=d[0],E=d[1],O=d[2];c|=0,v|=0;var C=0,P=0,D=0,U=S,I=b-m*S,N=f-g*b,W=O,F=w-m*O,j=E-g*w;for(D=0;D<y;++D){for(P=0;P<g;++P){for(C=0;C<m;++C)u[c]=x[v],c+=U,v+=W;c+=I,v+=F}c+=N,v+=j}}}},i=function(l,u){var h=u.join(",");return(0,t[h])()},r={mul:function(l){var u={};return function(h,c,x){var d=h.dtype,v=h.order,g=c.dtype,y=c.order,m=x.dtype,b=x.order,f=[d,v.join(),g,y.join(),m,b.join()].join(),S=u[f];return S||(u[f]=S=l([d,v,g,y,m,b])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},muls:function(l){var u={};return function(h,c,x){var d=h.dtype,v=h.order,g=c.dtype,y=c.order,m=[d,v.join(),g,y.join()].join(),b=u[m];return b||(u[m]=b=l([d,v,g,y])),b(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset,x)}},mulseq:function(l){var u={};return function(h,c){var x=h.dtype,d=h.order,v=[x,d.join()].join(),g=u[v];return g||(u[v]=g=l([x,d])),g(h.shape.slice(0),h.data,h.stride,0|h.offset,c)}},div:function(l){var u={};return function(h,c,x){var d=h.dtype,v=h.order,g=c.dtype,y=c.order,m=x.dtype,b=x.order,f=[d,v.join(),g,y.join(),m,b.join()].join(),S=u[f];return S||(u[f]=S=l([d,v,g,y,m,b])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},divs:function(l){var u={};return function(h,c,x){var d=h.dtype,v=h.order,g=c.dtype,y=c.order,m=[d,v.join(),g,y.join()].join(),b=u[m];return b||(u[m]=b=l([d,v,g,y])),b(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset,x)}},divseq:function(l){var u={};return function(h,c){var x=h.dtype,d=h.order,v=[x,d.join()].join(),g=u[v];return g||(u[v]=g=l([x,d])),g(h.shape.slice(0),h.data,h.stride,0|h.offset,c)}},assign:function(l){var u={};return function(h,c){var x=h.dtype,d=h.order,v=c.dtype,g=c.order,y=[x,d.join(),v,g.join()].join(),m=u[y];return m||(u[y]=m=l([x,d,v,g])),m(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset)}}};function n(l){return u={funcName:l.funcName},(0,r[u.funcName])(i.bind(void 0,u));var u}var a={mul:"*",div:"/"};(function(){for(var l in a)s[l]=n({funcName:l}),s[l+"s"]=n({funcName:l+"s"}),s[l+"seq"]=n({funcName:l+"seq"})})(),s.assign=n({funcName:"assign"})},9994:function(p,s,t){var i=t(9618),r=t(8277);p.exports=function(n,a){for(var l=[],u=n,h=1;Array.isArray(u);)l.push(u.length),h*=u.length,u=u[0];return l.length===0?i():(a||(a=i(new Float64Array(h),l)),r(a,n),a)}},8277:function(p){p.exports=function(s){var t={};return function(i,r){var n=i.dtype,a=i.order,l=[n,a.join()].join(),u=t[l];return u||(t[l]=u=s([n,a])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,r)}}((function(){return function(s,t,i,r,n){var a=s[0],l=s[1],u=s[2],h=i[0],c=i[1],x=i[2],d=[0,0,0];r|=0;var v=0,g=0,y=0,m=x,b=c-u*x,f=h-l*c;for(y=0;y<a;++y){for(g=0;g<l;++g){for(v=0;v<u;++v){var S,w=n;for(S=0;S<d.length-1;++S)w=w[d[S]];t[r]=w[d[d.length-1]],r+=m,++d[2]}r+=b,d[2]-=u,++d[1]}r+=f,d[1]-=l,++d[0]}}}).bind(void 0,{funcName:"convert"}))},7640:function(p,s,t){var i=t(1888);function r(u){return u==="uint32"?[i.mallocUint32,i.freeUint32]:null}var n={"uint32,1,0":function(u,h){return function(c,x,d,v,g,y,m,b,f,S,w){var E,O,C,P,D,U,I,N,W=c*g+v,F=u(b);for(E=c+1;E<=x;++E){for(O=E,C=W+=g,D=0,U=W,P=0;P<b;++P)F[D++]=d[U],U+=f;e:for(;O-- >c;){D=0,U=C-g;t:for(P=0;P<b;++P){if((I=d[U])<(N=F[D]))break e;if(I>N)break t;U+=S,D+=w}for(D=C,U=C-g,P=0;P<b;++P)d[D]=d[U],D+=f,U+=f;C-=g}for(D=C,U=0,P=0;P<b;++P)d[D]=F[U++],D+=f}h(F)}}},a={"uint32,1,0":function(u,h,c){return function x(d,v,g,y,m,b,f,S,w,E,O){var C,P,D,U,I,N,W,F,j,H,te,Q,$,K,X,Y,re,se,ae,ce,fe,he,ve,ye,me,Me=(v-d+1)/6|0,Pe=d+Me,ge=v-Me,oe=d+v>>1,ie=oe-Me,de=oe+Me,Se=Pe,_e=ie,we=oe,Ae=de,Oe=ge,ze=d+1,pe=v-1,be=!0,ke=0,Ie=0,Ee=0,Be=S,Ve=h(Be),Ze=h(Be);te=m*Se,Q=m*_e,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=Se,Se=_e,_e=P;break e}if(Ee<0)break e;me+=E}te=m*Ae,Q=m*Oe,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=Ae,Ae=Oe,Oe=P;break e}if(Ee<0)break e;me+=E}te=m*Se,Q=m*we,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=Se,Se=we,we=P;break e}if(Ee<0)break e;me+=E}te=m*_e,Q=m*we,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=_e,_e=we,we=P;break e}if(Ee<0)break e;me+=E}te=m*Se,Q=m*Ae,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=Se,Se=Ae,Ae=P;break e}if(Ee<0)break e;me+=E}te=m*we,Q=m*Ae,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=we,we=Ae,Ae=P;break e}if(Ee<0)break e;me+=E}te=m*_e,Q=m*Oe,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=_e,_e=Oe,Oe=P;break e}if(Ee<0)break e;me+=E}te=m*_e,Q=m*we,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=_e,_e=we,we=P;break e}if(Ee<0)break e;me+=E}te=m*Ae,Q=m*Oe,me=y;e:for(H=0;H<S;++H){if(F=Q+me,(Ee=g[W=te+me]-g[F])>0){P=Ae,Ae=Oe,Oe=P;break e}if(Ee<0)break e;me+=E}for(te=m*Se,Q=m*_e,$=m*we,K=m*Ae,X=m*Oe,Y=m*Pe,re=m*oe,se=m*ge,ye=0,me=y,H=0;H<S;++H)W=te+me,F=Q+me,j=$+me,ae=K+me,ce=X+me,fe=Y+me,he=re+me,ve=se+me,Ve[ye]=g[F],Ze[ye]=g[ae],be=be&&Ve[ye]===Ze[ye],D=g[W],U=g[j],I=g[ce],g[fe]=D,g[he]=U,g[ve]=I,++ye,me+=w;for(te=m*ie,Q=m*d,me=y,H=0;H<S;++H)F=Q+me,g[W=te+me]=g[F],me+=w;for(te=m*de,Q=m*v,me=y,H=0;H<S;++H)F=Q+me,g[W=te+me]=g[F],me+=w;if(be)for(N=ze;N<=pe;++N){for(W=y+N*m,ye=0,H=0;H<S&&(Ee=g[W]-Ve[ye])==0;++H)ye+=O,W+=E;if(Ee!==0)if(Ee<0){if(N!==ze)for(te=m*N,Q=m*ze,me=y,H=0;H<S;++H)F=Q+me,C=g[W=te+me],g[W]=g[F],g[F]=C,me+=w;++ze}else for(;;){for(W=y+pe*m,ye=0,H=0;H<S&&(Ee=g[W]-Ve[ye])==0;++H)ye+=O,W+=E;if(!(Ee>0)){if(Ee<0){for(te=m*N,Q=m*ze,$=m*pe,me=y,H=0;H<S;++H)F=Q+me,j=$+me,C=g[W=te+me],g[W]=g[F],g[F]=g[j],g[j]=C,me+=w;++ze,--pe;break}for(te=m*N,Q=m*pe,me=y,H=0;H<S;++H)F=Q+me,C=g[W=te+me],g[W]=g[F],g[F]=C,me+=w;--pe;break}pe--}}else for(N=ze;N<=pe;++N){for(W=y+N*m,ye=0,H=0;H<S&&(ke=g[W]-Ve[ye])==0;++H)ye+=O,W+=E;if(ke<0){if(N!==ze)for(te=m*N,Q=m*ze,me=y,H=0;H<S;++H)F=Q+me,C=g[W=te+me],g[W]=g[F],g[F]=C,me+=w;++ze}else{for(W=y+N*m,ye=0,H=0;H<S&&(Ie=g[W]-Ze[ye])==0;++H)ye+=O,W+=E;if(Ie>0)for(;;){for(W=y+pe*m,ye=0,H=0;H<S&&(Ee=g[W]-Ze[ye])==0;++H)ye+=O,W+=E;if(!(Ee>0)){for(W=y+pe*m,ye=0,H=0;H<S&&(Ee=g[W]-Ve[ye])==0;++H)ye+=O,W+=E;if(Ee<0){for(te=m*N,Q=m*ze,$=m*pe,me=y,H=0;H<S;++H)F=Q+me,j=$+me,C=g[W=te+me],g[W]=g[F],g[F]=g[j],g[j]=C,me+=w;++ze,--pe}else{for(te=m*N,Q=m*pe,me=y,H=0;H<S;++H)F=Q+me,C=g[W=te+me],g[W]=g[F],g[F]=C,me+=w;--pe}break}if(--pe<N)break}}}for(te=m*d,Q=m*(ze-1),ye=0,me=y,H=0;H<S;++H)F=Q+me,g[W=te+me]=g[F],g[F]=Ve[ye],++ye,me+=w;for(te=m*v,Q=m*(pe+1),ye=0,me=y,H=0;H<S;++H)F=Q+me,g[W=te+me]=g[F],g[F]=Ze[ye],++ye,me+=w;if(ze-2-d<=32?u(d,ze-2,g,y,m,b,f,S,w,E,O):x(d,ze-2,g,y,m,b,f,S,w,E,O),v-(pe+2)<=32?u(pe+2,v,g,y,m,b,f,S,w,E,O):x(pe+2,v,g,y,m,b,f,S,w,E,O),be)return c(Ve),void c(Ze);if(ze<Pe&&pe>ge){e:for(;;){for(W=y+ze*m,ye=0,me=y,H=0;H<S;++H){if(g[W]!==Ve[ye])break e;++ye,W+=w}++ze}e:for(;;){for(W=y+pe*m,ye=0,me=y,H=0;H<S;++H){if(g[W]!==Ze[ye])break e;++ye,W+=w}--pe}for(N=ze;N<=pe;++N){for(W=y+N*m,ye=0,H=0;H<S&&(ke=g[W]-Ve[ye])==0;++H)ye+=O,W+=E;if(ke===0){if(N!==ze)for(te=m*N,Q=m*ze,me=y,H=0;H<S;++H)F=Q+me,C=g[W=te+me],g[W]=g[F],g[F]=C,me+=w;++ze}else{for(W=y+N*m,ye=0,H=0;H<S&&(Ie=g[W]-Ze[ye])==0;++H)ye+=O,W+=E;if(Ie===0)for(;;){for(W=y+pe*m,ye=0,H=0;H<S&&(Ee=g[W]-Ze[ye])==0;++H)ye+=O,W+=E;if(Ee!==0){for(W=y+pe*m,ye=0,H=0;H<S&&(Ee=g[W]-Ve[ye])==0;++H)ye+=O,W+=E;if(Ee<0){for(te=m*N,Q=m*ze,$=m*pe,me=y,H=0;H<S;++H)F=Q+me,j=$+me,C=g[W=te+me],g[W]=g[F],g[F]=g[j],g[j]=C,me+=w;++ze,--pe}else{for(te=m*N,Q=m*pe,me=y,H=0;H<S;++H)F=Q+me,C=g[W=te+me],g[W]=g[F],g[F]=C,me+=w;--pe}break}if(--pe<N)break}}}}c(Ve),c(Ze),pe-ze<=32?u(ze,pe,g,y,m,b,f,S,w,E,O):x(ze,pe,g,y,m,b,f,S,w,E,O)}}},l={"uint32,1,0":function(u,h){return function(c){var x=c.data,d=0|c.offset,v=c.shape,g=c.stride,y=0|g[0],m=0|v[0],b=0|g[1],f=0|v[1],S=b,w=b;m<=32?u(0,m-1,x,d,y,b,m,f,S,w,1):h(0,m-1,x,d,y,b,m,f,S,w,1)}}};p.exports=function(u,h){var c=[h,u].join(","),x=l[c],d=function(g,y){var m=r(y),b=[y,g].join(","),f=n[b];return m?f(m[0],m[1]):f()}(u,h),v=function(g,y,m){var b=r(y),f=[y,g].join(","),S=a[f];return g.length>1&&b?S(m,b[0],b[1]):S(m)}(u,h,d);return x(d,v)}},446:function(p,s,t){var i=t(7640),r={};p.exports=function(n){var a=n.order,l=n.dtype,u=[a,l].join(":"),h=r[u];return h||(r[u]=h=i(a,l)),h(n),n}},9618:function(p,s,t){var i=t(7163),r=typeof Float64Array<"u";function n(c,x){return c[0]-x[0]}function a(){var c,x=this.stride,d=new Array(x.length);for(c=0;c<d.length;++c)d[c]=[Math.abs(x[c]),c];d.sort(n);var v=new Array(d.length);for(c=0;c<v.length;++c)v[c]=d[c][1];return v}var l={T:function(c){function x(v){this.data=v}var d=x.prototype;return d.dtype=c,d.index=function(){return-1},d.size=0,d.dimension=-1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new x(this.data)},d.get=d.set=function(){},d.pick=function(){return null},function(v){return new x(v)}},0:function(c,x){function d(g,y){this.data=g,this.offset=y}var v=d.prototype;return v.dtype=c,v.index=function(){return this.offset},v.dimension=0,v.size=1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new d(this.data,this.offset)},v.pick=function(){return x(this.data)},v.valueOf=v.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},v.set=function(g){return c==="generic"?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,y,m,b){return new d(g,b)}},1:function(c,x,d){function v(y,m,b,f){this.data=y,this.shape=[m],this.stride=[b],this.offset=0|f}var g=v.prototype;return g.dtype=c,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(y,m){return c==="generic"?this.data.set(this.offset+this.stride[0]*y,m):this.data[this.offset+this.stride[0]*y]=m},g.get=function(y){return c==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},g.index=function(y){return this.offset+this.stride[0]*y},g.hi=function(y){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,this.stride[0],this.offset)},g.lo=function(y){var m=this.offset,b=0,f=this.shape[0],S=this.stride[0];return typeof y=="number"&&y>=0&&(m+=S*(b=0|y),f-=b),new v(this.data,f,S,m)},g.step=function(y){var m=this.shape[0],b=this.stride[0],f=this.offset,S=0,w=Math.ceil;return typeof y=="number"&&((S=0|y)<0?(f+=b*(m-1),m=w(-m/S)):m=w(m/S),b*=S),new v(this.data,m,b,f)},g.transpose=function(y){y=y===void 0?0:0|y;var m=this.shape,b=this.stride;return new v(this.data,m[y],b[y],this.offset)},g.pick=function(y){var m=[],b=[],f=this.offset;return typeof y=="number"&&y>=0?f=f+this.stride[0]*y|0:(m.push(this.shape[0]),b.push(this.stride[0])),(0,x[m.length+1])(this.data,m,b,f)},function(y,m,b,f){return new v(y,m[0],b[0],f)}},2:function(c,x,d){function v(y,m,b,f,S,w){this.data=y,this.shape=[m,b],this.stride=[f,S],this.offset=0|w}var g=v.prototype;return g.dtype=c,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(y,m,b){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m,b):this.data[this.offset+this.stride[0]*y+this.stride[1]*m]=b},g.get=function(y,m){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m):this.data[this.offset+this.stride[0]*y+this.stride[1]*m]},g.index=function(y,m){return this.offset+this.stride[0]*y+this.stride[1]*m},g.hi=function(y,m){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},g.lo=function(y,m){var b=this.offset,f=0,S=this.shape[0],w=this.shape[1],E=this.stride[0],O=this.stride[1];return typeof y=="number"&&y>=0&&(b+=E*(f=0|y),S-=f),typeof m=="number"&&m>=0&&(b+=O*(f=0|m),w-=f),new v(this.data,S,w,E,O,b)},g.step=function(y,m){var b=this.shape[0],f=this.shape[1],S=this.stride[0],w=this.stride[1],E=this.offset,O=0,C=Math.ceil;return typeof y=="number"&&((O=0|y)<0?(E+=S*(b-1),b=C(-b/O)):b=C(b/O),S*=O),typeof m=="number"&&((O=0|m)<0?(E+=w*(f-1),f=C(-f/O)):f=C(f/O),w*=O),new v(this.data,b,f,S,w,E)},g.transpose=function(y,m){y=y===void 0?0:0|y,m=m===void 0?1:0|m;var b=this.shape,f=this.stride;return new v(this.data,b[y],b[m],f[y],f[m],this.offset)},g.pick=function(y,m){var b=[],f=[],S=this.offset;return typeof y=="number"&&y>=0?S=S+this.stride[0]*y|0:(b.push(this.shape[0]),f.push(this.stride[0])),typeof m=="number"&&m>=0?S=S+this.stride[1]*m|0:(b.push(this.shape[1]),f.push(this.stride[1])),(0,x[b.length+1])(this.data,b,f,S)},function(y,m,b,f){return new v(y,m[0],m[1],b[0],b[1],f)}},3:function(c,x,d){function v(y,m,b,f,S,w,E,O){this.data=y,this.shape=[m,b,f],this.stride=[S,w,E],this.offset=0|O}var g=v.prototype;return g.dtype=c,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var y=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),b=Math.abs(this.stride[2]);return y>m?m>b?[2,1,0]:y>b?[1,2,0]:[1,0,2]:y>b?[2,0,1]:b>m?[0,1,2]:[0,2,1]}}),g.set=function(y,m,b,f){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b,f):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b]=f},g.get=function(y,m,b){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b]},g.index=function(y,m,b){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b},g.hi=function(y,m,b){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof b!="number"||b<0?this.shape[2]:0|b,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(y,m,b){var f=this.offset,S=0,w=this.shape[0],E=this.shape[1],O=this.shape[2],C=this.stride[0],P=this.stride[1],D=this.stride[2];return typeof y=="number"&&y>=0&&(f+=C*(S=0|y),w-=S),typeof m=="number"&&m>=0&&(f+=P*(S=0|m),E-=S),typeof b=="number"&&b>=0&&(f+=D*(S=0|b),O-=S),new v(this.data,w,E,O,C,P,D,f)},g.step=function(y,m,b){var f=this.shape[0],S=this.shape[1],w=this.shape[2],E=this.stride[0],O=this.stride[1],C=this.stride[2],P=this.offset,D=0,U=Math.ceil;return typeof y=="number"&&((D=0|y)<0?(P+=E*(f-1),f=U(-f/D)):f=U(f/D),E*=D),typeof m=="number"&&((D=0|m)<0?(P+=O*(S-1),S=U(-S/D)):S=U(S/D),O*=D),typeof b=="number"&&((D=0|b)<0?(P+=C*(w-1),w=U(-w/D)):w=U(w/D),C*=D),new v(this.data,f,S,w,E,O,C,P)},g.transpose=function(y,m,b){y=y===void 0?0:0|y,m=m===void 0?1:0|m,b=b===void 0?2:0|b;var f=this.shape,S=this.stride;return new v(this.data,f[y],f[m],f[b],S[y],S[m],S[b],this.offset)},g.pick=function(y,m,b){var f=[],S=[],w=this.offset;return typeof y=="number"&&y>=0?w=w+this.stride[0]*y|0:(f.push(this.shape[0]),S.push(this.stride[0])),typeof m=="number"&&m>=0?w=w+this.stride[1]*m|0:(f.push(this.shape[1]),S.push(this.stride[1])),typeof b=="number"&&b>=0?w=w+this.stride[2]*b|0:(f.push(this.shape[2]),S.push(this.stride[2])),(0,x[f.length+1])(this.data,f,S,w)},function(y,m,b,f){return new v(y,m[0],m[1],m[2],b[0],b[1],b[2],f)}},4:function(c,x,d){function v(y,m,b,f,S,w,E,O,C,P){this.data=y,this.shape=[m,b,f,S],this.stride=[w,E,O,C],this.offset=0|P}var g=v.prototype;return g.dtype=c,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:d}),g.set=function(y,m,b,f,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f,S):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f]=S},g.get=function(y,m,b,f){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f]},g.index=function(y,m,b,f){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f},g.hi=function(y,m,b,f){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof b!="number"||b<0?this.shape[2]:0|b,typeof f!="number"||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(y,m,b,f){var S=this.offset,w=0,E=this.shape[0],O=this.shape[1],C=this.shape[2],P=this.shape[3],D=this.stride[0],U=this.stride[1],I=this.stride[2],N=this.stride[3];return typeof y=="number"&&y>=0&&(S+=D*(w=0|y),E-=w),typeof m=="number"&&m>=0&&(S+=U*(w=0|m),O-=w),typeof b=="number"&&b>=0&&(S+=I*(w=0|b),C-=w),typeof f=="number"&&f>=0&&(S+=N*(w=0|f),P-=w),new v(this.data,E,O,C,P,D,U,I,N,S)},g.step=function(y,m,b,f){var S=this.shape[0],w=this.shape[1],E=this.shape[2],O=this.shape[3],C=this.stride[0],P=this.stride[1],D=this.stride[2],U=this.stride[3],I=this.offset,N=0,W=Math.ceil;return typeof y=="number"&&((N=0|y)<0?(I+=C*(S-1),S=W(-S/N)):S=W(S/N),C*=N),typeof m=="number"&&((N=0|m)<0?(I+=P*(w-1),w=W(-w/N)):w=W(w/N),P*=N),typeof b=="number"&&((N=0|b)<0?(I+=D*(E-1),E=W(-E/N)):E=W(E/N),D*=N),typeof f=="number"&&((N=0|f)<0?(I+=U*(O-1),O=W(-O/N)):O=W(O/N),U*=N),new v(this.data,S,w,E,O,C,P,D,U,I)},g.transpose=function(y,m,b,f){y=y===void 0?0:0|y,m=m===void 0?1:0|m,b=b===void 0?2:0|b,f=f===void 0?3:0|f;var S=this.shape,w=this.stride;return new v(this.data,S[y],S[m],S[b],S[f],w[y],w[m],w[b],w[f],this.offset)},g.pick=function(y,m,b,f){var S=[],w=[],E=this.offset;return typeof y=="number"&&y>=0?E=E+this.stride[0]*y|0:(S.push(this.shape[0]),w.push(this.stride[0])),typeof m=="number"&&m>=0?E=E+this.stride[1]*m|0:(S.push(this.shape[1]),w.push(this.stride[1])),typeof b=="number"&&b>=0?E=E+this.stride[2]*b|0:(S.push(this.shape[2]),w.push(this.stride[2])),typeof f=="number"&&f>=0?E=E+this.stride[3]*f|0:(S.push(this.shape[3]),w.push(this.stride[3])),(0,x[S.length+1])(this.data,S,w,E)},function(y,m,b,f){return new v(y,m[0],m[1],m[2],m[3],b[0],b[1],b[2],b[3],f)}},5:function(c,x,d){function v(y,m,b,f,S,w,E,O,C,P,D,U){this.data=y,this.shape=[m,b,f,S,w],this.stride=[E,O,C,P,D],this.offset=0|U}var g=v.prototype;return g.dtype=c,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:d}),g.set=function(y,m,b,f,S,w){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f+this.stride[4]*S,w):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f+this.stride[4]*S]=w},g.get=function(y,m,b,f,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f+this.stride[4]*S):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f+this.stride[4]*S]},g.index=function(y,m,b,f,S){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*b+this.stride[3]*f+this.stride[4]*S},g.hi=function(y,m,b,f,S){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof b!="number"||b<0?this.shape[2]:0|b,typeof f!="number"||f<0?this.shape[3]:0|f,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(y,m,b,f,S){var w=this.offset,E=0,O=this.shape[0],C=this.shape[1],P=this.shape[2],D=this.shape[3],U=this.shape[4],I=this.stride[0],N=this.stride[1],W=this.stride[2],F=this.stride[3],j=this.stride[4];return typeof y=="number"&&y>=0&&(w+=I*(E=0|y),O-=E),typeof m=="number"&&m>=0&&(w+=N*(E=0|m),C-=E),typeof b=="number"&&b>=0&&(w+=W*(E=0|b),P-=E),typeof f=="number"&&f>=0&&(w+=F*(E=0|f),D-=E),typeof S=="number"&&S>=0&&(w+=j*(E=0|S),U-=E),new v(this.data,O,C,P,D,U,I,N,W,F,j,w)},g.step=function(y,m,b,f,S){var w=this.shape[0],E=this.shape[1],O=this.shape[2],C=this.shape[3],P=this.shape[4],D=this.stride[0],U=this.stride[1],I=this.stride[2],N=this.stride[3],W=this.stride[4],F=this.offset,j=0,H=Math.ceil;return typeof y=="number"&&((j=0|y)<0?(F+=D*(w-1),w=H(-w/j)):w=H(w/j),D*=j),typeof m=="number"&&((j=0|m)<0?(F+=U*(E-1),E=H(-E/j)):E=H(E/j),U*=j),typeof b=="number"&&((j=0|b)<0?(F+=I*(O-1),O=H(-O/j)):O=H(O/j),I*=j),typeof f=="number"&&((j=0|f)<0?(F+=N*(C-1),C=H(-C/j)):C=H(C/j),N*=j),typeof S=="number"&&((j=0|S)<0?(F+=W*(P-1),P=H(-P/j)):P=H(P/j),W*=j),new v(this.data,w,E,O,C,P,D,U,I,N,W,F)},g.transpose=function(y,m,b,f,S){y=y===void 0?0:0|y,m=m===void 0?1:0|m,b=b===void 0?2:0|b,f=f===void 0?3:0|f,S=S===void 0?4:0|S;var w=this.shape,E=this.stride;return new v(this.data,w[y],w[m],w[b],w[f],w[S],E[y],E[m],E[b],E[f],E[S],this.offset)},g.pick=function(y,m,b,f,S){var w=[],E=[],O=this.offset;return typeof y=="number"&&y>=0?O=O+this.stride[0]*y|0:(w.push(this.shape[0]),E.push(this.stride[0])),typeof m=="number"&&m>=0?O=O+this.stride[1]*m|0:(w.push(this.shape[1]),E.push(this.stride[1])),typeof b=="number"&&b>=0?O=O+this.stride[2]*b|0:(w.push(this.shape[2]),E.push(this.stride[2])),typeof f=="number"&&f>=0?O=O+this.stride[3]*f|0:(w.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?O=O+this.stride[4]*S|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,x[w.length+1])(this.data,w,E,O)},function(y,m,b,f){return new v(y,m[0],m[1],m[2],m[3],m[4],b[0],b[1],b[2],b[3],b[4],f)}}};function u(c,x){var d=x===-1?"T":String(x),v=l[d];return x===-1?v(c):x===0?v(c,h[c][0]):v(c,h[c],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};p.exports=function(c,x,d,v){if(c===void 0)return(0,h.array[0])([]);typeof c=="number"&&(c=[c]),x===void 0&&(x=[c.length]);var g=x.length;if(d===void 0){d=new Array(g);for(var y=g-1,m=1;y>=0;--y)d[y]=m,m*=x[y]}if(v===void 0)for(v=0,y=0;y<g;++y)d[y]<0&&(v-=(x[y]-1)*d[y]);for(var b=function(S){if(i(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),f=h[b];f.length<=g+1;)f.push(u(b,f.length-1));return(0,f[g+1])(c,x,d,v)}},1278:function(p,s,t){var i=t(2361),r=Math.pow(2,-1074),n=-1>>>0;p.exports=function(a,l){if(isNaN(a)||isNaN(l))return NaN;if(a===l)return a;if(a===0)return l<0?-r:r;var u=i.hi(a),h=i.lo(a);return l>a==a>0?h===n?(u+=1,h=0):h+=1:h===0?(h=n,u-=1):h-=1,i.pack(h,u)}},8406:function(p,s){s.vertexNormals=function(t,i,r){for(var n=i.length,a=new Array(n),l=r===void 0?1e-6:r,u=0;u<n;++u)a[u]=[0,0,0];for(u=0;u<t.length;++u)for(var h=t[u],c=0,x=h[h.length-1],d=h[0],v=0;v<h.length;++v){c=x,x=d,d=h[(v+1)%h.length];for(var g=i[c],y=i[x],m=i[d],b=new Array(3),f=0,S=new Array(3),w=0,E=0;E<3;++E)b[E]=g[E]-y[E],f+=b[E]*b[E],S[E]=m[E]-y[E],w+=S[E]*S[E];if(f*w>l){var O=a[x],C=1/Math.sqrt(f*w);for(E=0;E<3;++E){var P=(E+1)%3,D=(E+2)%3;O[E]+=C*(S[P]*b[D]-S[D]*b[P])}}}for(u=0;u<n;++u){O=a[u];var U=0;for(E=0;E<3;++E)U+=O[E]*O[E];if(U>l)for(C=1/Math.sqrt(U),E=0;E<3;++E)O[E]*=C;else for(E=0;E<3;++E)O[E]=0}return a},s.faceNormals=function(t,i,r){for(var n=t.length,a=new Array(n),l=r===void 0?1e-6:r,u=0;u<n;++u){for(var h=t[u],c=new Array(3),x=0;x<3;++x)c[x]=i[h[x]];var d=new Array(3),v=new Array(3);for(x=0;x<3;++x)d[x]=c[1][x]-c[0][x],v[x]=c[2][x]-c[0][x];var g=new Array(3),y=0;for(x=0;x<3;++x){var m=(x+1)%3,b=(x+2)%3;g[x]=d[m]*v[b]-d[b]*v[m],y+=g[x]*g[x]}for(y=y>l?1/Math.sqrt(y):0,x=0;x<3;++x)g[x]*=y;a[u]=g}return a}},4081:function(p){p.exports=function(s,t,i,r,n,a,l,u,h,c){var x=t+a+c;if(d>0){var d=Math.sqrt(x+1);s[0]=.5*(l-h)/d,s[1]=.5*(u-r)/d,s[2]=.5*(i-a)/d,s[3]=.5*d}else{var v=Math.max(t,a,c);d=Math.sqrt(2*v-x+1),t>=v?(s[0]=.5*d,s[1]=.5*(n+i)/d,s[2]=.5*(u+r)/d,s[3]=.5*(l-h)/d):a>=v?(s[0]=.5*(i+n)/d,s[1]=.5*d,s[2]=.5*(h+l)/d,s[3]=.5*(u-r)/d):(s[0]=.5*(r+u)/d,s[1]=.5*(l+h)/d,s[2]=.5*d,s[3]=.5*(i-n)/d)}return s}},9977:function(p,s,t){p.exports=function(v){var g=(v=v||{}).center||[0,0,0],y=v.rotation||[0,0,0,1],m=v.radius||1;g=[].slice.call(g,0,3),c(y=[].slice.call(y,0,4),y);var b=new x(y,g,Math.log(m));return b.setDistanceLimits(v.zoomMin,v.zoomMax),("eye"in v||"up"in v)&&b.lookAt(0,v.eye,v.center,v.up),b};var i=t(9215),r=t(6582),n=t(7399),a=t(7608),l=t(4081);function u(v,g,y){return Math.sqrt(Math.pow(v,2)+Math.pow(g,2)+Math.pow(y,2))}function h(v,g,y,m){return Math.sqrt(Math.pow(v,2)+Math.pow(g,2)+Math.pow(y,2)+Math.pow(m,2))}function c(v,g){var y=g[0],m=g[1],b=g[2],f=g[3],S=h(y,m,b,f);S>1e-6?(v[0]=y/S,v[1]=m/S,v[2]=b/S,v[3]=f/S):(v[0]=v[1]=v[2]=0,v[3]=1)}function x(v,g,y){this.radius=i([y]),this.center=i(g),this.rotation=i(v),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=x.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(v){this.radius.curve(v),this.center.curve(v),this.rotation.curve(v);var g=this.computedRotation;c(g,g);var y=this.computedMatrix;n(y,g);var m=this.computedCenter,b=this.computedEye,f=this.computedUp,S=Math.exp(this.computedRadius[0]);b[0]=m[0]+S*y[2],b[1]=m[1]+S*y[6],b[2]=m[2]+S*y[10],f[0]=y[1],f[1]=y[5],f[2]=y[9];for(var w=0;w<3;++w){for(var E=0,O=0;O<3;++O)E+=y[w+4*O]*b[O];y[12+w]=-E}},d.getMatrix=function(v,g){this.recalcMatrix(v);var y=this.computedMatrix;if(g){for(var m=0;m<16;++m)g[m]=y[m];return g}return y},d.idle=function(v){this.center.idle(v),this.radius.idle(v),this.rotation.idle(v)},d.flush=function(v){this.center.flush(v),this.radius.flush(v),this.rotation.flush(v)},d.pan=function(v,g,y,m){g=g||0,y=y||0,m=m||0,this.recalcMatrix(v);var b=this.computedMatrix,f=b[1],S=b[5],w=b[9],E=u(f,S,w);f/=E,S/=E,w/=E;var O=b[0],C=b[4],P=b[8],D=O*f+C*S+P*w,U=u(O-=f*D,C-=S*D,P-=w*D);O/=U,C/=U,P/=U,b[2],b[6],b[10];var I=O*g+f*y,N=C*g+S*y,W=P*g+w*y;this.center.move(v,I,N,W);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+m),this.radius.set(v,Math.log(F))},d.rotate=function(v,g,y,m){this.recalcMatrix(v),g=g||0,y=y||0;var b=this.computedMatrix,f=b[0],S=b[4],w=b[8],E=b[1],O=b[5],C=b[9],P=b[2],D=b[6],U=b[10],I=g*f+y*E,N=g*S+y*O,W=g*w+y*C,F=-(D*W-U*N),j=-(U*I-P*W),H=-(P*N-D*I),te=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(j,2)-Math.pow(H,2))),Q=h(F,j,H,te);Q>1e-6?(F/=Q,j/=Q,H/=Q,te/=Q):(F=j=H=0,te=1);var $=this.computedRotation,K=$[0],X=$[1],Y=$[2],re=$[3],se=K*te+re*F+X*H-Y*j,ae=X*te+re*j+Y*F-K*H,ce=Y*te+re*H+K*j-X*F,fe=re*te-K*F-X*j-Y*H;if(m){F=P,j=D,H=U;var he=Math.sin(m)/u(F,j,H);F*=he,j*=he,H*=he,fe=fe*(te=Math.cos(g))-(se=se*te+fe*F+ae*H-ce*j)*F-(ae=ae*te+fe*j+ce*F-se*H)*j-(ce=ce*te+fe*H+se*j-ae*F)*H}var ve=h(se,ae,ce,fe);ve>1e-6?(se/=ve,ae/=ve,ce/=ve,fe/=ve):(se=ae=ce=0,fe=1),this.rotation.set(v,se,ae,ce,fe)},d.lookAt=function(v,g,y,m){this.recalcMatrix(v),y=y||this.computedCenter,g=g||this.computedEye,m=m||this.computedUp;var b=this.computedMatrix;r(b,g,y,m);var f=this.computedRotation;l(f,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),c(f,f),this.rotation.set(v,f[0],f[1],f[2],f[3]);for(var S=0,w=0;w<3;++w)S+=Math.pow(y[w]-g[w],2);this.radius.set(v,.5*Math.log(Math.max(S,1e-6))),this.center.set(v,y[0],y[1],y[2])},d.translate=function(v,g,y,m){this.center.move(v,g||0,y||0,m||0)},d.setMatrix=function(v,g){var y=this.computedRotation;l(y,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),c(y,y),this.rotation.set(v,y[0],y[1],y[2],y[3]);var m=this.computedMatrix;a(m,g);var b=m[15];if(Math.abs(b)>1e-6){var f=m[12]/b,S=m[13]/b,w=m[14]/b;this.recalcMatrix(v);var E=Math.exp(this.computedRadius[0]);this.center.set(v,f-m[2]*E,S-m[6]*E,w-m[10]*E),this.radius.idle(v)}else this.center.idle(v),this.radius.idle(v)},d.setDistance=function(v,g){g>0&&this.radius.set(v,Math.log(g))},d.setDistanceLimits=function(v,g){v=v>0?Math.log(v):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=g},d.getDistanceLimits=function(v){var g=this.radius.bounds;return v?(v[0]=Math.exp(g[0][0]),v[1]=Math.exp(g[1][0]),v):[Math.exp(g[0][0]),Math.exp(g[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(v){var g=this.lastT(),y=v.center;y&&this.center.set(g,y[0],y[1],y[2]);var m=v.rotation;m&&this.rotation.set(g,m[0],m[1],m[2],m[3]);var b=v.distance;b&&b>0&&this.radius.set(g,Math.log(b)),this.setDistanceLimits(v.zoomMin,v.zoomMax)}},1371:function(p,s,t){var i=t(3233);p.exports=function(r,n,a){return i(a=a!==void 0?a+"":" ",n)+r}},3202:function(p){p.exports=function(s,t){t||(t=[0,""]),s=String(s);var i=parseFloat(s,10);return t[0]=i,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(p,s,t){p.exports=function(r,n){for(var a=0|n.length,l=r.length,u=[new Array(a),new Array(a)],h=0;h<a;++h)u[0][h]=[],u[1][h]=[];for(h=0;h<l;++h){var c=r[h];u[0][c[0]].push(c),u[1][c[1]].push(c)}var x=[];for(h=0;h<a;++h)u[0][h].length+u[1][h].length===0&&x.push([h]);function d(S,w){var E=u[w][S[w]];E.splice(E.indexOf(S),1)}function v(S,w,E){for(var O,C,P,D=0;D<2;++D)if(u[D][w].length>0){O=u[D][w][0],P=D;break}C=O[1^P];for(var U=0;U<2;++U)for(var I=u[U][w],N=0;N<I.length;++N){var W=I[N],F=W[1^U];i(n[S],n[w],n[C],n[F])>0&&(O=W,C=F,P=U)}return E||O&&d(O,P),C}function g(S,w){var E=u[w][S][0],O=[S];d(E,w);for(var C=E[1^w];;){for(;C!==S;)O.push(C),C=v(O[O.length-2],C,!1);if(u[0][S].length+u[1][S].length===0)break;var P=O[O.length-1],D=S,U=O[1],I=v(P,D,!0);if(i(n[P],n[D],n[U],n[I])<0)break;O.push(S),C=v(P,D)}return O}function y(S,w){return w[1]===w[w.length-1]}for(h=0;h<a;++h)for(var m=0;m<2;++m){for(var b=[];u[m][h].length>0;){u[0][h].length;var f=g(h,m);y(0,f)?b.push.apply(b,f):(b.length>0&&x.push(b),b=f)}b.length>0&&x.push(b)}return x};var i=t(3140)},5609:function(p,s,t){p.exports=function(r,n){for(var a=i(r,n.length),l=new Array(n.length),u=new Array(n.length),h=[],c=0;c<n.length;++c){var x=a[c].length;u[c]=x,l[c]=!0,x<=1&&h.push(c)}for(;h.length>0;){l[m=h.pop()]=!1;var d=a[m];for(c=0;c<d.length;++c){var v=d[c];--u[v]==0&&h.push(v)}}var g=new Array(n.length),y=[];for(c=0;c<n.length;++c)if(l[c]){var m=y.length;g[c]=m,y.push(n[c])}else g[c]=-1;var b=[];for(c=0;c<r.length;++c){var f=r[c];l[f[0]]&&l[f[1]]&&b.push([g[f[0]],g[f[1]]])}return[b,y]};var i=t(3134)},2095:function(p,s,t){p.exports=function(x,d){var v=h(x,d);x=v[0];for(var g=(d=v[1]).length,y=(x.length,i(x,d.length)),m=0;m<g;++m)if(y[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var b=r(x,d),f=(b=b.filter(function(Me){for(var Pe=Me.length,ge=[0],oe=0;oe<Pe;++oe){var ie=d[Me[oe]],de=d[Me[(oe+1)%Pe]],Se=a(-ie[0],ie[1]),_e=a(-ie[0],de[1]),we=a(de[0],ie[1]),Ae=a(de[0],de[1]);ge=l(ge,l(l(Se,_e),l(we,Ae)))}return ge[ge.length-1]>0})).length,S=new Array(f),w=new Array(f);for(m=0;m<f;++m){S[m]=m;var E=new Array(f),O=b[m].map(function(Me){return d[Me]}),C=n([O]),P=0;e:for(var D=0;D<f;++D)if(E[D]=0,m!==D){for(var U=(ye=b[D]).length,I=0;I<U;++I){var N=C(d[ye[I]]);if(N!==0){N<0&&(E[D]=1,P+=1);continue e}}E[D]=1,P+=1}w[m]=[P,m,E]}for(w.sort(function(Me,Pe){return Pe[0]-Me[0]}),m=0;m<f;++m){var W=(E=w[m])[1],F=E[2];for(D=0;D<f;++D)F[D]&&(S[D]=W)}var j=function(Me){for(var Pe=new Array(Me),ge=0;ge<Me;++ge)Pe[ge]=[];return Pe}(f);for(m=0;m<f;++m)j[m].push(S[m]),j[S[m]].push(m);var H={},te=c(g,!1);for(m=0;m<f;++m)for(U=(ye=b[m]).length,D=0;D<U;++D){var Q=ye[D],$=ye[(D+1)%U],K=Math.min(Q,$)+":"+Math.max(Q,$);if(K in H){var X=H[K];j[X].push(m),j[m].push(X),te[Q]=te[$]=!0}else H[K]=m}function Y(Me){for(var Pe=Me.length,ge=0;ge<Pe;++ge)if(!te[Me[ge]])return!1;return!0}var re=[],se=c(f,-1);for(m=0;m<f;++m)S[m]!==m||Y(b[m])?se[m]=-1:(re.push(m),se[m]=0);for(v=[];re.length>0;){var ae=re.pop(),ce=j[ae];u(ce,function(Me,Pe){return Me-Pe});var fe,he=ce.length,ve=se[ae];for(ve===0&&(fe=[ye=b[ae]]),m=0;m<he;++m){var ye,me=ce[m];se[me]>=0||(se[me]=1^ve,re.push(me),ve===0&&(Y(ye=b[me])||(ye.reverse(),fe.push(ye))))}ve===0&&v.push(fe)}return v};var i=t(3134),r=t(3088),n=t(5085),a=t(5250),l=t(8210),u=t(1682),h=t(5609);function c(x,d){for(var v=new Array(x),g=0;g<x;++g)v[g]=d;return v}},5085:function(p,s,t){p.exports=function(c){for(var x=c.length,d=[],v=[],g=0;g<x;++g)for(var y=c[g],m=y.length,b=m-1,f=0;f<m;b=f++){var S=y[b],w=y[f];S[0]===w[0]?v.push([S,w]):d.push([S,w])}if(d.length===0)return v.length===0?h:(E=u(v),function(P){return E(P[0],P[1])?0:1});var E,O=r(d),C=function(P,D){return function(U){var I=a.le(D,U[0]);if(I<0)return 1;var N=P[I];if(!N){if(!(I>0&&D[I]===U[0]))return 1;N=P[I-1]}for(var W=1;N;){var F=N.key,j=i(U,F[0],F[1]);if(F[0][0]<F[1][0])if(j<0)N=N.left;else{if(!(j>0))return 0;W=-1,N=N.right}else if(j>0)N=N.left;else{if(!(j<0))return 0;W=1,N=N.right}}return W}}(O.slabs,O.coordinates);return v.length===0?C:function(P,D){return function(U){return P(U[0],U[1])?0:D(U)}}(u(v),C)};var i=t(3250)[3],r=t(4209),n=t(3352),a=t(2478);function l(){return!0}function u(c){for(var x={},d=0;d<c.length;++d){var v=c[d],g=v[0][0],y=v[0][1],m=v[1][1],b=[Math.min(y,m),Math.max(y,m)];g in x?x[g].push(b):x[g]=[b]}var f={},S=Object.keys(x);for(d=0;d<S.length;++d){var w=x[S[d]];f[S[d]]=n(w)}return function(E){return function(O,C){var P=E[O];return!!P&&!!P.queryPoint(C,l)}}(f)}function h(c){return 1}},9346:function(p){var s=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);p.exports=function(r,n,a,l,u){s.length<l.length&&(s=new Float64Array(l.length),t=new Float64Array(l.length),i=new Float64Array(l.length));for(var h=0;h<l.length;++h)s[h]=r[h]-l[h],t[h]=n[h]-r[h],i[h]=a[h]-r[h];var c=0,x=0,d=0,v=0,g=0,y=0;for(h=0;h<l.length;++h){var m=t[h],b=i[h],f=s[h];c+=m*m,x+=m*b,d+=b*b,v+=f*m,g+=f*b,y+=f*f}var S,w,E,O,C,P=Math.abs(c*d-x*x),D=x*g-d*v,U=x*v-c*g;if(D+U<=P)if(D<0)U<0&&v<0?(U=0,-v>=c?(D=1,S=c+2*v+y):S=v*(D=-v/c)+y):(D=0,g>=0?(U=0,S=y):-g>=d?(U=1,S=d+2*g+y):S=g*(U=-g/d)+y);else if(U<0)U=0,v>=0?(D=0,S=y):-v>=c?(D=1,S=c+2*v+y):S=v*(D=-v/c)+y;else{var I=1/P;S=(D*=I)*(c*D+x*(U*=I)+2*v)+U*(x*D+d*U+2*g)+y}else D<0?(E=d+g)>(w=x+v)?(O=E-w)>=(C=c-2*x+d)?(D=1,U=0,S=c+2*v+y):S=(D=O/C)*(c*D+x*(U=1-D)+2*v)+U*(x*D+d*U+2*g)+y:(D=0,E<=0?(U=1,S=d+2*g+y):g>=0?(U=0,S=y):S=g*(U=-g/d)+y):U<0?(E=c+v)>(w=x+g)?(O=E-w)>=(C=c-2*x+d)?(U=1,D=0,S=d+2*g+y):S=(D=1-(U=O/C))*(c*D+x*U+2*v)+U*(x*D+d*U+2*g)+y:(U=0,E<=0?(D=1,S=c+2*v+y):v>=0?(D=0,S=y):S=v*(D=-v/c)+y):(O=d+g-x-v)<=0?(D=0,U=1,S=d+2*g+y):O>=(C=c-2*x+d)?(D=1,U=0,S=c+2*v+y):S=(D=O/C)*(c*D+x*(U=1-D)+2*v)+U*(x*D+d*U+2*g)+y;var N=1-D-U;for(h=0;h<l.length;++h)u[h]=N*r[h]+D*n[h]+U*a[h];return S<0?0:S}},8648:function(p,s,t){p.exports=t(783)},2653:function(p,s,t){var i=t(3865);p.exports=function(r,n){for(var a=r.length,l=new Array(a),u=0;u<a;++u)l[u]=i(r[u],n[u]);return l}},5838:function(p,s,t){p.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=i(r[a]);return n};var i=t(7842)},8987:function(p,s,t){var i=t(7842),r=t(6504);p.exports=function(n,a){for(var l=i(a),u=n.length,h=new Array(u),c=0;c<u;++c)h[c]=r(n[c],l);return h}},544:function(p,s,t){var i=t(5572);p.exports=function(r,n){for(var a=r.length,l=new Array(a),u=0;u<a;++u)l[u]=i(r[u],n[u]);return l}},5771:function(p,s,t){var i=t(8507),r=t(3788),n=t(2419);p.exports=function(a){a.sort(r);for(var l=a.length,u=0,h=0;h<l;++h){var c=a[h],x=n(c);if(x!==0){if(u>0){var d=a[u-1];if(i(c,d)===0&&n(d)!==x){u-=1;continue}}a[u++]=c}}return a.length=u,a}},3233:function(p){var s,t="";p.exports=function(i,r){if(typeof i!="string")throw new TypeError("expected a string");if(r===1)return i;if(r===2)return i+i;var n=i.length*r;if(s!==i||s===void 0)s=i,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=i),r>>=1,i+=i;return t=(t+=i).substr(0,n)}},3025:function(p,s,t){p.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(p){p.exports=function(s){for(var t=s.length,i=s[s.length-1],r=t,n=t-2;n>=0;--n){var a=i;(h=(u=s[n])-((i=a+u)-a))&&(s[--r]=i,i=h)}var l=0;for(n=r;n<t;++n){var u,h;(h=(u=i)-((i=(a=s[n])+u)-a))&&(s[l++]=h)}return s[l++]=i,s.length=l,s}},2962:function(p,s,t){var i=t(5250),r=t(8210),n=t(3012),a=t(7004);function l(g,y,m,b){return function(f){return b(g(m(f[0][0],f[1][1]),m(-f[0][1],f[1][0])))}}function u(g,y,m,b){return function(f){return b(g(y(g(m(f[1][1],f[2][2]),m(-f[1][2],f[2][1])),f[0][0]),g(y(g(m(f[1][0],f[2][2]),m(-f[1][2],f[2][0])),-f[0][1]),y(g(m(f[1][0],f[2][1]),m(-f[1][1],f[2][0])),f[0][2]))))}}function h(g,y,m,b){return function(f){return b(g(g(y(g(y(g(m(f[2][2],f[3][3]),m(-f[2][3],f[3][2])),f[1][1]),g(y(g(m(f[2][1],f[3][3]),m(-f[2][3],f[3][1])),-f[1][2]),y(g(m(f[2][1],f[3][2]),m(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),y(g(y(g(m(f[2][2],f[3][3]),m(-f[2][3],f[3][2])),f[1][0]),g(y(g(m(f[2][0],f[3][3]),m(-f[2][3],f[3][0])),-f[1][2]),y(g(m(f[2][0],f[3][2]),m(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),g(y(g(y(g(m(f[2][1],f[3][3]),m(-f[2][3],f[3][1])),f[1][0]),g(y(g(m(f[2][0],f[3][3]),m(-f[2][3],f[3][0])),-f[1][1]),y(g(m(f[2][0],f[3][1]),m(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),y(g(y(g(m(f[2][1],f[3][2]),m(-f[2][2],f[3][1])),f[1][0]),g(y(g(m(f[2][0],f[3][2]),m(-f[2][2],f[3][0])),-f[1][1]),y(g(m(f[2][0],f[3][1]),m(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function c(g,y,m,b){return function(f){return b(g(g(y(g(g(y(g(y(g(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][2]),g(y(g(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),-f[2][3]),y(g(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),y(g(y(g(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][1]),g(y(g(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][3]),y(g(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),g(y(g(y(g(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][1]),g(y(g(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][2]),y(g(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),y(g(y(g(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][1]),g(y(g(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),-f[2][2]),y(g(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),y(g(g(y(g(y(g(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][2]),g(y(g(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),-f[2][3]),y(g(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),y(g(y(g(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][0]),g(y(g(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][3]),y(g(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),g(y(g(y(g(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][0]),g(y(g(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][2]),y(g(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),y(g(y(g(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][0]),g(y(g(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][2]),y(g(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),g(y(g(g(y(g(y(g(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][1]),g(y(g(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][3]),y(g(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),y(g(y(g(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][0]),g(y(g(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][3]),y(g(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),g(y(g(y(g(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),f[2][0]),g(y(g(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][1]),y(g(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),y(g(y(g(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][0]),g(y(g(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][1]),y(g(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),g(y(g(g(y(g(y(g(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][1]),g(y(g(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][2]),y(g(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),y(g(y(g(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][0]),g(y(g(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][2]),y(g(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),g(y(g(y(g(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),f[2][0]),g(y(g(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][1]),y(g(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),y(g(y(g(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][0]),g(y(g(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),-f[2][1]),y(g(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),y(g(g(y(g(y(g(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][1]),g(y(g(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),-f[2][2]),y(g(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),y(g(y(g(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][0]),g(y(g(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][2]),y(g(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),g(y(g(y(g(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][0]),g(y(g(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][1]),y(g(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),y(g(y(g(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][0]),g(y(g(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),-f[2][1]),y(g(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function x(g){return(g===2?l:g===3?u:g===4?h:g===5?c:void 0)(r,n,i,a)}var d=[function(){return[0]},function(g){return[g[0][0]]}];function v(g,y,m,b,f,S,w,E){return function(O){switch(O.length){case 0:return g(O);case 1:return y(O);case 2:return m(O);case 3:return b(O);case 4:return f(O);case 5:return S(O)}var C=w[O.length];return C||(C=w[O.length]=E(O.length)),C(O)}}(function(){for(;d.length<6;)d.push(x(d.length));p.exports=v.apply(void 0,d.concat([d,x]));for(var g=0;g<d.length;++g)p.exports[g]=d[g]})()},1944:function(p,s,t){var i=t(5250),r=t(8210);p.exports=function(n,a){for(var l=i(n[0],a[0]),u=1;u<n.length;++u)l=r(l,i(n[u],a[u]));return l}},2646:function(p,s,t){var i=t(5250),r=t(8210),n=t(8545),a=t(3012);function l(y){return(y===3?u:y===4?h:y===5?c:x)(r,n,i,a)}function u(y,m,b,f){return function(S,w,E){var O=b(S[0],S[0]),C=f(O,w[0]),P=f(O,E[0]),D=b(w[0],w[0]),U=f(D,S[0]),I=f(D,E[0]),N=b(E[0],E[0]),W=f(N,S[0]),F=f(N,w[0]),j=y(m(F,I),m(U,C)),H=m(W,P),te=m(j,H);return te[te.length-1]}}function h(y,m,b,f){return function(S,w,E,O){var C=y(b(S[0],S[0]),b(S[1],S[1])),P=f(C,w[0]),D=f(C,E[0]),U=f(C,O[0]),I=y(b(w[0],w[0]),b(w[1],w[1])),N=f(I,S[0]),W=f(I,E[0]),F=f(I,O[0]),j=y(b(E[0],E[0]),b(E[1],E[1])),H=f(j,S[0]),te=f(j,w[0]),Q=f(j,O[0]),$=y(b(O[0],O[0]),b(O[1],O[1])),K=f($,S[0]),X=f($,w[0]),Y=f($,E[0]),re=y(y(f(m(Y,Q),w[1]),y(f(m(X,F),-E[1]),f(m(te,W),O[1]))),y(f(m(X,F),S[1]),y(f(m(K,U),-w[1]),f(m(N,P),O[1])))),se=y(y(f(m(Y,Q),S[1]),y(f(m(K,U),-E[1]),f(m(H,D),O[1]))),y(f(m(te,W),S[1]),y(f(m(H,D),-w[1]),f(m(N,P),E[1])))),ae=m(re,se);return ae[ae.length-1]}}function c(y,m,b,f){return function(S,w,E,O,C){var P=y(b(S[0],S[0]),y(b(S[1],S[1]),b(S[2],S[2]))),D=f(P,w[0]),U=f(P,E[0]),I=f(P,O[0]),N=f(P,C[0]),W=y(b(w[0],w[0]),y(b(w[1],w[1]),b(w[2],w[2]))),F=f(W,S[0]),j=f(W,E[0]),H=f(W,O[0]),te=f(W,C[0]),Q=y(b(E[0],E[0]),y(b(E[1],E[1]),b(E[2],E[2]))),$=f(Q,S[0]),K=f(Q,w[0]),X=f(Q,O[0]),Y=f(Q,C[0]),re=y(b(O[0],O[0]),y(b(O[1],O[1]),b(O[2],O[2]))),se=f(re,S[0]),ae=f(re,w[0]),ce=f(re,E[0]),fe=f(re,C[0]),he=y(b(C[0],C[0]),y(b(C[1],C[1]),b(C[2],C[2]))),ve=f(he,S[0]),ye=f(he,w[0]),me=f(he,E[0]),Me=f(he,O[0]),Pe=y(y(y(f(y(f(m(Me,fe),E[1]),y(f(m(me,Y),-O[1]),f(m(ce,X),C[1]))),w[2]),y(f(y(f(m(Me,fe),w[1]),y(f(m(ye,te),-O[1]),f(m(ae,H),C[1]))),-E[2]),f(y(f(m(me,Y),w[1]),y(f(m(ye,te),-E[1]),f(m(K,j),C[1]))),O[2]))),y(f(y(f(m(ce,X),w[1]),y(f(m(ae,H),-E[1]),f(m(K,j),O[1]))),-C[2]),y(f(y(f(m(Me,fe),w[1]),y(f(m(ye,te),-O[1]),f(m(ae,H),C[1]))),S[2]),f(y(f(m(Me,fe),S[1]),y(f(m(ve,N),-O[1]),f(m(se,I),C[1]))),-w[2])))),y(y(f(y(f(m(ye,te),S[1]),y(f(m(ve,N),-w[1]),f(m(F,D),C[1]))),O[2]),y(f(y(f(m(ae,H),S[1]),y(f(m(se,I),-w[1]),f(m(F,D),O[1]))),-C[2]),f(y(f(m(ce,X),w[1]),y(f(m(ae,H),-E[1]),f(m(K,j),O[1]))),S[2]))),y(f(y(f(m(ce,X),S[1]),y(f(m(se,I),-E[1]),f(m($,U),O[1]))),-w[2]),y(f(y(f(m(ae,H),S[1]),y(f(m(se,I),-w[1]),f(m(F,D),O[1]))),E[2]),f(y(f(m(K,j),S[1]),y(f(m($,U),-w[1]),f(m(F,D),E[1]))),-O[2]))))),ge=y(y(y(f(y(f(m(Me,fe),E[1]),y(f(m(me,Y),-O[1]),f(m(ce,X),C[1]))),S[2]),f(y(f(m(Me,fe),S[1]),y(f(m(ve,N),-O[1]),f(m(se,I),C[1]))),-E[2])),y(f(y(f(m(me,Y),S[1]),y(f(m(ve,N),-E[1]),f(m($,U),C[1]))),O[2]),f(y(f(m(ce,X),S[1]),y(f(m(se,I),-E[1]),f(m($,U),O[1]))),-C[2]))),y(y(f(y(f(m(me,Y),w[1]),y(f(m(ye,te),-E[1]),f(m(K,j),C[1]))),S[2]),f(y(f(m(me,Y),S[1]),y(f(m(ve,N),-E[1]),f(m($,U),C[1]))),-w[2])),y(f(y(f(m(ye,te),S[1]),y(f(m(ve,N),-w[1]),f(m(F,D),C[1]))),E[2]),f(y(f(m(K,j),S[1]),y(f(m($,U),-w[1]),f(m(F,D),E[1]))),-C[2])))),oe=m(Pe,ge);return oe[oe.length-1]}}function x(y,m,b,f){return function(S,w,E,O,C,P){var D=y(y(b(S[0],S[0]),b(S[1],S[1])),y(b(S[2],S[2]),b(S[3],S[3]))),U=f(D,w[0]),I=f(D,E[0]),N=f(D,O[0]),W=f(D,C[0]),F=f(D,P[0]),j=y(y(b(w[0],w[0]),b(w[1],w[1])),y(b(w[2],w[2]),b(w[3],w[3]))),H=f(j,S[0]),te=f(j,E[0]),Q=f(j,O[0]),$=f(j,C[0]),K=f(j,P[0]),X=y(y(b(E[0],E[0]),b(E[1],E[1])),y(b(E[2],E[2]),b(E[3],E[3]))),Y=f(X,S[0]),re=f(X,w[0]),se=f(X,O[0]),ae=f(X,C[0]),ce=f(X,P[0]),fe=y(y(b(O[0],O[0]),b(O[1],O[1])),y(b(O[2],O[2]),b(O[3],O[3]))),he=f(fe,S[0]),ve=f(fe,w[0]),ye=f(fe,E[0]),me=f(fe,C[0]),Me=f(fe,P[0]),Pe=y(y(b(C[0],C[0]),b(C[1],C[1])),y(b(C[2],C[2]),b(C[3],C[3]))),ge=f(Pe,S[0]),oe=f(Pe,w[0]),ie=f(Pe,E[0]),de=f(Pe,O[0]),Se=f(Pe,P[0]),_e=y(y(b(P[0],P[0]),b(P[1],P[1])),y(b(P[2],P[2]),b(P[3],P[3]))),we=f(_e,S[0]),Ae=f(_e,w[0]),Oe=f(_e,E[0]),ze=f(_e,O[0]),pe=f(_e,C[0]),be=y(y(y(f(y(y(f(y(f(m(pe,Se),O[1]),y(f(m(ze,Me),-C[1]),f(m(de,me),P[1]))),E[2]),f(y(f(m(pe,Se),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),-O[2])),y(f(y(f(m(ze,Me),E[1]),y(f(m(Oe,ce),-O[1]),f(m(ye,se),P[1]))),C[2]),f(y(f(m(de,me),E[1]),y(f(m(ie,ae),-O[1]),f(m(ye,se),C[1]))),-P[2]))),w[3]),y(f(y(y(f(y(f(m(pe,Se),O[1]),y(f(m(ze,Me),-C[1]),f(m(de,me),P[1]))),w[2]),f(y(f(m(pe,Se),w[1]),y(f(m(Ae,K),-C[1]),f(m(oe,$),P[1]))),-O[2])),y(f(y(f(m(ze,Me),w[1]),y(f(m(Ae,K),-O[1]),f(m(ve,Q),P[1]))),C[2]),f(y(f(m(de,me),w[1]),y(f(m(oe,$),-O[1]),f(m(ve,Q),C[1]))),-P[2]))),-E[3]),f(y(y(f(y(f(m(pe,Se),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),w[2]),f(y(f(m(pe,Se),w[1]),y(f(m(Ae,K),-C[1]),f(m(oe,$),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),w[1]),y(f(m(Ae,K),-E[1]),f(m(re,te),P[1]))),C[2]),f(y(f(m(ie,ae),w[1]),y(f(m(oe,$),-E[1]),f(m(re,te),C[1]))),-P[2]))),O[3]))),y(y(f(y(y(f(y(f(m(ze,Me),E[1]),y(f(m(Oe,ce),-O[1]),f(m(ye,se),P[1]))),w[2]),f(y(f(m(ze,Me),w[1]),y(f(m(Ae,K),-O[1]),f(m(ve,Q),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),w[1]),y(f(m(Ae,K),-E[1]),f(m(re,te),P[1]))),O[2]),f(y(f(m(ye,se),w[1]),y(f(m(ve,Q),-E[1]),f(m(re,te),O[1]))),-P[2]))),-C[3]),f(y(y(f(y(f(m(de,me),E[1]),y(f(m(ie,ae),-O[1]),f(m(ye,se),C[1]))),w[2]),f(y(f(m(de,me),w[1]),y(f(m(oe,$),-O[1]),f(m(ve,Q),C[1]))),-E[2])),y(f(y(f(m(ie,ae),w[1]),y(f(m(oe,$),-E[1]),f(m(re,te),C[1]))),O[2]),f(y(f(m(ye,se),w[1]),y(f(m(ve,Q),-E[1]),f(m(re,te),O[1]))),-C[2]))),P[3])),y(f(y(y(f(y(f(m(pe,Se),O[1]),y(f(m(ze,Me),-C[1]),f(m(de,me),P[1]))),w[2]),f(y(f(m(pe,Se),w[1]),y(f(m(Ae,K),-C[1]),f(m(oe,$),P[1]))),-O[2])),y(f(y(f(m(ze,Me),w[1]),y(f(m(Ae,K),-O[1]),f(m(ve,Q),P[1]))),C[2]),f(y(f(m(de,me),w[1]),y(f(m(oe,$),-O[1]),f(m(ve,Q),C[1]))),-P[2]))),S[3]),f(y(y(f(y(f(m(pe,Se),O[1]),y(f(m(ze,Me),-C[1]),f(m(de,me),P[1]))),S[2]),f(y(f(m(pe,Se),S[1]),y(f(m(we,F),-C[1]),f(m(ge,W),P[1]))),-O[2])),y(f(y(f(m(ze,Me),S[1]),y(f(m(we,F),-O[1]),f(m(he,N),P[1]))),C[2]),f(y(f(m(de,me),S[1]),y(f(m(ge,W),-O[1]),f(m(he,N),C[1]))),-P[2]))),-w[3])))),y(y(y(f(y(y(f(y(f(m(pe,Se),w[1]),y(f(m(Ae,K),-C[1]),f(m(oe,$),P[1]))),S[2]),f(y(f(m(pe,Se),S[1]),y(f(m(we,F),-C[1]),f(m(ge,W),P[1]))),-w[2])),y(f(y(f(m(Ae,K),S[1]),y(f(m(we,F),-w[1]),f(m(H,U),P[1]))),C[2]),f(y(f(m(oe,$),S[1]),y(f(m(ge,W),-w[1]),f(m(H,U),C[1]))),-P[2]))),O[3]),f(y(y(f(y(f(m(ze,Me),w[1]),y(f(m(Ae,K),-O[1]),f(m(ve,Q),P[1]))),S[2]),f(y(f(m(ze,Me),S[1]),y(f(m(we,F),-O[1]),f(m(he,N),P[1]))),-w[2])),y(f(y(f(m(Ae,K),S[1]),y(f(m(we,F),-w[1]),f(m(H,U),P[1]))),O[2]),f(y(f(m(ve,Q),S[1]),y(f(m(he,N),-w[1]),f(m(H,U),O[1]))),-P[2]))),-C[3])),y(f(y(y(f(y(f(m(de,me),w[1]),y(f(m(oe,$),-O[1]),f(m(ve,Q),C[1]))),S[2]),f(y(f(m(de,me),S[1]),y(f(m(ge,W),-O[1]),f(m(he,N),C[1]))),-w[2])),y(f(y(f(m(oe,$),S[1]),y(f(m(ge,W),-w[1]),f(m(H,U),C[1]))),O[2]),f(y(f(m(ve,Q),S[1]),y(f(m(he,N),-w[1]),f(m(H,U),O[1]))),-C[2]))),P[3]),f(y(y(f(y(f(m(ze,Me),E[1]),y(f(m(Oe,ce),-O[1]),f(m(ye,se),P[1]))),w[2]),f(y(f(m(ze,Me),w[1]),y(f(m(Ae,K),-O[1]),f(m(ve,Q),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),w[1]),y(f(m(Ae,K),-E[1]),f(m(re,te),P[1]))),O[2]),f(y(f(m(ye,se),w[1]),y(f(m(ve,Q),-E[1]),f(m(re,te),O[1]))),-P[2]))),S[3]))),y(y(f(y(y(f(y(f(m(ze,Me),E[1]),y(f(m(Oe,ce),-O[1]),f(m(ye,se),P[1]))),S[2]),f(y(f(m(ze,Me),S[1]),y(f(m(we,F),-O[1]),f(m(he,N),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),S[1]),y(f(m(we,F),-E[1]),f(m(Y,I),P[1]))),O[2]),f(y(f(m(ye,se),S[1]),y(f(m(he,N),-E[1]),f(m(Y,I),O[1]))),-P[2]))),-w[3]),f(y(y(f(y(f(m(ze,Me),w[1]),y(f(m(Ae,K),-O[1]),f(m(ve,Q),P[1]))),S[2]),f(y(f(m(ze,Me),S[1]),y(f(m(we,F),-O[1]),f(m(he,N),P[1]))),-w[2])),y(f(y(f(m(Ae,K),S[1]),y(f(m(we,F),-w[1]),f(m(H,U),P[1]))),O[2]),f(y(f(m(ve,Q),S[1]),y(f(m(he,N),-w[1]),f(m(H,U),O[1]))),-P[2]))),E[3])),y(f(y(y(f(y(f(m(Oe,ce),w[1]),y(f(m(Ae,K),-E[1]),f(m(re,te),P[1]))),S[2]),f(y(f(m(Oe,ce),S[1]),y(f(m(we,F),-E[1]),f(m(Y,I),P[1]))),-w[2])),y(f(y(f(m(Ae,K),S[1]),y(f(m(we,F),-w[1]),f(m(H,U),P[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Y,I),-w[1]),f(m(H,U),E[1]))),-P[2]))),-O[3]),f(y(y(f(y(f(m(ye,se),w[1]),y(f(m(ve,Q),-E[1]),f(m(re,te),O[1]))),S[2]),f(y(f(m(ye,se),S[1]),y(f(m(he,N),-E[1]),f(m(Y,I),O[1]))),-w[2])),y(f(y(f(m(ve,Q),S[1]),y(f(m(he,N),-w[1]),f(m(H,U),O[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Y,I),-w[1]),f(m(H,U),E[1]))),-O[2]))),P[3]))))),ke=y(y(y(f(y(y(f(y(f(m(pe,Se),O[1]),y(f(m(ze,Me),-C[1]),f(m(de,me),P[1]))),E[2]),f(y(f(m(pe,Se),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),-O[2])),y(f(y(f(m(ze,Me),E[1]),y(f(m(Oe,ce),-O[1]),f(m(ye,se),P[1]))),C[2]),f(y(f(m(de,me),E[1]),y(f(m(ie,ae),-O[1]),f(m(ye,se),C[1]))),-P[2]))),S[3]),y(f(y(y(f(y(f(m(pe,Se),O[1]),y(f(m(ze,Me),-C[1]),f(m(de,me),P[1]))),S[2]),f(y(f(m(pe,Se),S[1]),y(f(m(we,F),-C[1]),f(m(ge,W),P[1]))),-O[2])),y(f(y(f(m(ze,Me),S[1]),y(f(m(we,F),-O[1]),f(m(he,N),P[1]))),C[2]),f(y(f(m(de,me),S[1]),y(f(m(ge,W),-O[1]),f(m(he,N),C[1]))),-P[2]))),-E[3]),f(y(y(f(y(f(m(pe,Se),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),S[2]),f(y(f(m(pe,Se),S[1]),y(f(m(we,F),-C[1]),f(m(ge,W),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),S[1]),y(f(m(we,F),-E[1]),f(m(Y,I),P[1]))),C[2]),f(y(f(m(ie,ae),S[1]),y(f(m(ge,W),-E[1]),f(m(Y,I),C[1]))),-P[2]))),O[3]))),y(y(f(y(y(f(y(f(m(ze,Me),E[1]),y(f(m(Oe,ce),-O[1]),f(m(ye,se),P[1]))),S[2]),f(y(f(m(ze,Me),S[1]),y(f(m(we,F),-O[1]),f(m(he,N),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),S[1]),y(f(m(we,F),-E[1]),f(m(Y,I),P[1]))),O[2]),f(y(f(m(ye,se),S[1]),y(f(m(he,N),-E[1]),f(m(Y,I),O[1]))),-P[2]))),-C[3]),f(y(y(f(y(f(m(de,me),E[1]),y(f(m(ie,ae),-O[1]),f(m(ye,se),C[1]))),S[2]),f(y(f(m(de,me),S[1]),y(f(m(ge,W),-O[1]),f(m(he,N),C[1]))),-E[2])),y(f(y(f(m(ie,ae),S[1]),y(f(m(ge,W),-E[1]),f(m(Y,I),C[1]))),O[2]),f(y(f(m(ye,se),S[1]),y(f(m(he,N),-E[1]),f(m(Y,I),O[1]))),-C[2]))),P[3])),y(f(y(y(f(y(f(m(pe,Se),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),w[2]),f(y(f(m(pe,Se),w[1]),y(f(m(Ae,K),-C[1]),f(m(oe,$),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),w[1]),y(f(m(Ae,K),-E[1]),f(m(re,te),P[1]))),C[2]),f(y(f(m(ie,ae),w[1]),y(f(m(oe,$),-E[1]),f(m(re,te),C[1]))),-P[2]))),S[3]),f(y(y(f(y(f(m(pe,Se),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),S[2]),f(y(f(m(pe,Se),S[1]),y(f(m(we,F),-C[1]),f(m(ge,W),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),S[1]),y(f(m(we,F),-E[1]),f(m(Y,I),P[1]))),C[2]),f(y(f(m(ie,ae),S[1]),y(f(m(ge,W),-E[1]),f(m(Y,I),C[1]))),-P[2]))),-w[3])))),y(y(y(f(y(y(f(y(f(m(pe,Se),w[1]),y(f(m(Ae,K),-C[1]),f(m(oe,$),P[1]))),S[2]),f(y(f(m(pe,Se),S[1]),y(f(m(we,F),-C[1]),f(m(ge,W),P[1]))),-w[2])),y(f(y(f(m(Ae,K),S[1]),y(f(m(we,F),-w[1]),f(m(H,U),P[1]))),C[2]),f(y(f(m(oe,$),S[1]),y(f(m(ge,W),-w[1]),f(m(H,U),C[1]))),-P[2]))),E[3]),f(y(y(f(y(f(m(Oe,ce),w[1]),y(f(m(Ae,K),-E[1]),f(m(re,te),P[1]))),S[2]),f(y(f(m(Oe,ce),S[1]),y(f(m(we,F),-E[1]),f(m(Y,I),P[1]))),-w[2])),y(f(y(f(m(Ae,K),S[1]),y(f(m(we,F),-w[1]),f(m(H,U),P[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Y,I),-w[1]),f(m(H,U),E[1]))),-P[2]))),-C[3])),y(f(y(y(f(y(f(m(ie,ae),w[1]),y(f(m(oe,$),-E[1]),f(m(re,te),C[1]))),S[2]),f(y(f(m(ie,ae),S[1]),y(f(m(ge,W),-E[1]),f(m(Y,I),C[1]))),-w[2])),y(f(y(f(m(oe,$),S[1]),y(f(m(ge,W),-w[1]),f(m(H,U),C[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Y,I),-w[1]),f(m(H,U),E[1]))),-C[2]))),P[3]),f(y(y(f(y(f(m(de,me),E[1]),y(f(m(ie,ae),-O[1]),f(m(ye,se),C[1]))),w[2]),f(y(f(m(de,me),w[1]),y(f(m(oe,$),-O[1]),f(m(ve,Q),C[1]))),-E[2])),y(f(y(f(m(ie,ae),w[1]),y(f(m(oe,$),-E[1]),f(m(re,te),C[1]))),O[2]),f(y(f(m(ye,se),w[1]),y(f(m(ve,Q),-E[1]),f(m(re,te),O[1]))),-C[2]))),S[3]))),y(y(f(y(y(f(y(f(m(de,me),E[1]),y(f(m(ie,ae),-O[1]),f(m(ye,se),C[1]))),S[2]),f(y(f(m(de,me),S[1]),y(f(m(ge,W),-O[1]),f(m(he,N),C[1]))),-E[2])),y(f(y(f(m(ie,ae),S[1]),y(f(m(ge,W),-E[1]),f(m(Y,I),C[1]))),O[2]),f(y(f(m(ye,se),S[1]),y(f(m(he,N),-E[1]),f(m(Y,I),O[1]))),-C[2]))),-w[3]),f(y(y(f(y(f(m(de,me),w[1]),y(f(m(oe,$),-O[1]),f(m(ve,Q),C[1]))),S[2]),f(y(f(m(de,me),S[1]),y(f(m(ge,W),-O[1]),f(m(he,N),C[1]))),-w[2])),y(f(y(f(m(oe,$),S[1]),y(f(m(ge,W),-w[1]),f(m(H,U),C[1]))),O[2]),f(y(f(m(ve,Q),S[1]),y(f(m(he,N),-w[1]),f(m(H,U),O[1]))),-C[2]))),E[3])),y(f(y(y(f(y(f(m(ie,ae),w[1]),y(f(m(oe,$),-E[1]),f(m(re,te),C[1]))),S[2]),f(y(f(m(ie,ae),S[1]),y(f(m(ge,W),-E[1]),f(m(Y,I),C[1]))),-w[2])),y(f(y(f(m(oe,$),S[1]),y(f(m(ge,W),-w[1]),f(m(H,U),C[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Y,I),-w[1]),f(m(H,U),E[1]))),-C[2]))),-O[3]),f(y(y(f(y(f(m(ye,se),w[1]),y(f(m(ve,Q),-E[1]),f(m(re,te),O[1]))),S[2]),f(y(f(m(ye,se),S[1]),y(f(m(he,N),-E[1]),f(m(Y,I),O[1]))),-w[2])),y(f(y(f(m(ve,Q),S[1]),y(f(m(he,N),-w[1]),f(m(H,U),O[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Y,I),-w[1]),f(m(H,U),E[1]))),-O[2]))),C[3]))))),Ie=m(be,ke);return Ie[Ie.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function v(y){var m=d[y.length];return m||(m=d[y.length]=l(y.length)),m.apply(void 0,y)}function g(y,m,b,f,S,w,E,O){return function(C,P,D,U,I,N){switch(arguments.length){case 0:case 1:return 0;case 2:return f(C,P);case 3:return S(C,P,D);case 4:return w(C,P,D,U);case 5:return E(C,P,D,U,I);case 6:return O(C,P,D,U,I,N)}for(var W=new Array(arguments.length),F=0;F<arguments.length;++F)W[F]=arguments[F];return y(W)}}(function(){for(;d.length<=6;)d.push(l(d.length));p.exports=g.apply(void 0,[v].concat(d));for(var y=0;y<=6;++y)p.exports[y]=d[y]})()},727:function(p,s,t){var i=t(2962);function r(d){return(d===2?n:d===3?a:d===4?l:d===5?u:h)(d<6?i[d]:i)}function n(d){return function(v,g){return[d([[+g[0],+v[0][1]],[+g[1],+v[1][1]]]),d([[+v[0][0],+g[0]],[+v[1][0],+g[1]]]),d(v)]}}function a(d){return function(v,g){return[d([[+g[0],+v[0][1],+v[0][2]],[+g[1],+v[1][1],+v[1][2]],[+g[2],+v[2][1],+v[2][2]]]),d([[+v[0][0],+g[0],+v[0][2]],[+v[1][0],+g[1],+v[1][2]],[+v[2][0],+g[2],+v[2][2]]]),d([[+v[0][0],+v[0][1],+g[0]],[+v[1][0],+v[1][1],+g[1]],[+v[2][0],+v[2][1],+g[2]]]),d(v)]}}function l(d){return function(v,g){return[d([[+g[0],+v[0][1],+v[0][2],+v[0][3]],[+g[1],+v[1][1],+v[1][2],+v[1][3]],[+g[2],+v[2][1],+v[2][2],+v[2][3]],[+g[3],+v[3][1],+v[3][2],+v[3][3]]]),d([[+v[0][0],+g[0],+v[0][2],+v[0][3]],[+v[1][0],+g[1],+v[1][2],+v[1][3]],[+v[2][0],+g[2],+v[2][2],+v[2][3]],[+v[3][0],+g[3],+v[3][2],+v[3][3]]]),d([[+v[0][0],+v[0][1],+g[0],+v[0][3]],[+v[1][0],+v[1][1],+g[1],+v[1][3]],[+v[2][0],+v[2][1],+g[2],+v[2][3]],[+v[3][0],+v[3][1],+g[3],+v[3][3]]]),d([[+v[0][0],+v[0][1],+v[0][2],+g[0]],[+v[1][0],+v[1][1],+v[1][2],+g[1]],[+v[2][0],+v[2][1],+v[2][2],+g[2]],[+v[3][0],+v[3][1],+v[3][2],+g[3]]]),d(v)]}}function u(d){return function(v,g){return[d([[+g[0],+v[0][1],+v[0][2],+v[0][3],+v[0][4]],[+g[1],+v[1][1],+v[1][2],+v[1][3],+v[1][4]],[+g[2],+v[2][1],+v[2][2],+v[2][3],+v[2][4]],[+g[3],+v[3][1],+v[3][2],+v[3][3],+v[3][4]],[+g[4],+v[4][1],+v[4][2],+v[4][3],+v[4][4]]]),d([[+v[0][0],+g[0],+v[0][2],+v[0][3],+v[0][4]],[+v[1][0],+g[1],+v[1][2],+v[1][3],+v[1][4]],[+v[2][0],+g[2],+v[2][2],+v[2][3],+v[2][4]],[+v[3][0],+g[3],+v[3][2],+v[3][3],+v[3][4]],[+v[4][0],+g[4],+v[4][2],+v[4][3],+v[4][4]]]),d([[+v[0][0],+v[0][1],+g[0],+v[0][3],+v[0][4]],[+v[1][0],+v[1][1],+g[1],+v[1][3],+v[1][4]],[+v[2][0],+v[2][1],+g[2],+v[2][3],+v[2][4]],[+v[3][0],+v[3][1],+g[3],+v[3][3],+v[3][4]],[+v[4][0],+v[4][1],+g[4],+v[4][3],+v[4][4]]]),d([[+v[0][0],+v[0][1],+v[0][2],+g[0],+v[0][4]],[+v[1][0],+v[1][1],+v[1][2],+g[1],+v[1][4]],[+v[2][0],+v[2][1],+v[2][2],+g[2],+v[2][4]],[+v[3][0],+v[3][1],+v[3][2],+g[3],+v[3][4]],[+v[4][0],+v[4][1],+v[4][2],+g[4],+v[4][4]]]),d([[+v[0][0],+v[0][1],+v[0][2],+v[0][3],+g[0]],[+v[1][0],+v[1][1],+v[1][2],+v[1][3],+g[1]],[+v[2][0],+v[2][1],+v[2][2],+v[2][3],+g[2]],[+v[3][0],+v[3][1],+v[3][2],+v[3][3],+g[3]],[+v[4][0],+v[4][1],+v[4][2],+v[4][3],+g[4]]]),d(v)]}}function h(d){return function(v,g){return[d([[+g[0],+v[0][1],+v[0][2],+v[0][3],+v[0][4],+v[0][5]],[+g[1],+v[1][1],+v[1][2],+v[1][3],+v[1][4],+v[1][5]],[+g[2],+v[2][1],+v[2][2],+v[2][3],+v[2][4],+v[2][5]],[+g[3],+v[3][1],+v[3][2],+v[3][3],+v[3][4],+v[3][5]],[+g[4],+v[4][1],+v[4][2],+v[4][3],+v[4][4],+v[4][5]],[+g[5],+v[5][1],+v[5][2],+v[5][3],+v[5][4],+v[5][5]]]),d([[+v[0][0],+g[0],+v[0][2],+v[0][3],+v[0][4],+v[0][5]],[+v[1][0],+g[1],+v[1][2],+v[1][3],+v[1][4],+v[1][5]],[+v[2][0],+g[2],+v[2][2],+v[2][3],+v[2][4],+v[2][5]],[+v[3][0],+g[3],+v[3][2],+v[3][3],+v[3][4],+v[3][5]],[+v[4][0],+g[4],+v[4][2],+v[4][3],+v[4][4],+v[4][5]],[+v[5][0],+g[5],+v[5][2],+v[5][3],+v[5][4],+v[5][5]]]),d([[+v[0][0],+v[0][1],+g[0],+v[0][3],+v[0][4],+v[0][5]],[+v[1][0],+v[1][1],+g[1],+v[1][3],+v[1][4],+v[1][5]],[+v[2][0],+v[2][1],+g[2],+v[2][3],+v[2][4],+v[2][5]],[+v[3][0],+v[3][1],+g[3],+v[3][3],+v[3][4],+v[3][5]],[+v[4][0],+v[4][1],+g[4],+v[4][3],+v[4][4],+v[4][5]],[+v[5][0],+v[5][1],+g[5],+v[5][3],+v[5][4],+v[5][5]]]),d([[+v[0][0],+v[0][1],+v[0][2],+g[0],+v[0][4],+v[0][5]],[+v[1][0],+v[1][1],+v[1][2],+g[1],+v[1][4],+v[1][5]],[+v[2][0],+v[2][1],+v[2][2],+g[2],+v[2][4],+v[2][5]],[+v[3][0],+v[3][1],+v[3][2],+g[3],+v[3][4],+v[3][5]],[+v[4][0],+v[4][1],+v[4][2],+g[4],+v[4][4],+v[4][5]],[+v[5][0],+v[5][1],+v[5][2],+g[5],+v[5][4],+v[5][5]]]),d([[+v[0][0],+v[0][1],+v[0][2],+v[0][3],+g[0],+v[0][5]],[+v[1][0],+v[1][1],+v[1][2],+v[1][3],+g[1],+v[1][5]],[+v[2][0],+v[2][1],+v[2][2],+v[2][3],+g[2],+v[2][5]],[+v[3][0],+v[3][1],+v[3][2],+v[3][3],+g[3],+v[3][5]],[+v[4][0],+v[4][1],+v[4][2],+v[4][3],+g[4],+v[4][5]],[+v[5][0],+v[5][1],+v[5][2],+v[5][3],+g[5],+v[5][5]]]),d([[+v[0][0],+v[0][1],+v[0][2],+v[0][3],+v[0][4],+g[0]],[+v[1][0],+v[1][1],+v[1][2],+v[1][3],+v[1][4],+g[1]],[+v[2][0],+v[2][1],+v[2][2],+v[2][3],+v[2][4],+g[2]],[+v[3][0],+v[3][1],+v[3][2],+v[3][3],+v[3][4],+g[3]],[+v[4][0],+v[4][1],+v[4][2],+v[4][3],+v[4][4],+g[4]],[+v[5][0],+v[5][1],+v[5][2],+v[5][3],+v[5][4],+g[5]]]),d(v)]}}var c=[function(){return[[0]]},function(d,v){return[[v[0]],[d[0][0]]]}];function x(d,v,g,y,m,b,f,S){return function(w,E){switch(w.length){case 0:return d(w,E);case 1:return v(w,E);case 2:return g(w,E);case 3:return y(w,E);case 4:return m(w,E);case 5:return b(w,E)}var O=f[w.length];return O||(O=f[w.length]=S(w.length)),O(w,E)}}(function(){for(;c.length<6;)c.push(r(c.length));p.exports=x.apply(void 0,c.concat([c,r]));for(var d=0;d<6;++d)p.exports[d]=c[d]})()},3250:function(p,s,t){var i=t(5250),r=t(8210),n=t(3012),a=t(8545);function l(m,b,f,S){return function(w,E,O){var C=m(m(b(E[1],O[0]),b(-O[1],E[0])),m(b(w[1],E[0]),b(-E[1],w[0]))),P=m(b(w[1],O[0]),b(-O[1],w[0])),D=S(C,P);return D[D.length-1]}}function u(m,b,f,S){return function(w,E,O,C){var P=m(m(f(m(b(O[1],C[0]),b(-C[1],O[0])),E[2]),m(f(m(b(E[1],C[0]),b(-C[1],E[0])),-O[2]),f(m(b(E[1],O[0]),b(-O[1],E[0])),C[2]))),m(f(m(b(E[1],C[0]),b(-C[1],E[0])),w[2]),m(f(m(b(w[1],C[0]),b(-C[1],w[0])),-E[2]),f(m(b(w[1],E[0]),b(-E[1],w[0])),C[2])))),D=m(m(f(m(b(O[1],C[0]),b(-C[1],O[0])),w[2]),m(f(m(b(w[1],C[0]),b(-C[1],w[0])),-O[2]),f(m(b(w[1],O[0]),b(-O[1],w[0])),C[2]))),m(f(m(b(E[1],O[0]),b(-O[1],E[0])),w[2]),m(f(m(b(w[1],O[0]),b(-O[1],w[0])),-E[2]),f(m(b(w[1],E[0]),b(-E[1],w[0])),O[2])))),U=S(P,D);return U[U.length-1]}}function h(m,b,f,S){return function(w,E,O,C,P){var D=m(m(m(f(m(f(m(b(C[1],P[0]),b(-P[1],C[0])),O[2]),m(f(m(b(O[1],P[0]),b(-P[1],O[0])),-C[2]),f(m(b(O[1],C[0]),b(-C[1],O[0])),P[2]))),E[3]),m(f(m(f(m(b(C[1],P[0]),b(-P[1],C[0])),E[2]),m(f(m(b(E[1],P[0]),b(-P[1],E[0])),-C[2]),f(m(b(E[1],C[0]),b(-C[1],E[0])),P[2]))),-O[3]),f(m(f(m(b(O[1],P[0]),b(-P[1],O[0])),E[2]),m(f(m(b(E[1],P[0]),b(-P[1],E[0])),-O[2]),f(m(b(E[1],O[0]),b(-O[1],E[0])),P[2]))),C[3]))),m(f(m(f(m(b(O[1],C[0]),b(-C[1],O[0])),E[2]),m(f(m(b(E[1],C[0]),b(-C[1],E[0])),-O[2]),f(m(b(E[1],O[0]),b(-O[1],E[0])),C[2]))),-P[3]),m(f(m(f(m(b(C[1],P[0]),b(-P[1],C[0])),E[2]),m(f(m(b(E[1],P[0]),b(-P[1],E[0])),-C[2]),f(m(b(E[1],C[0]),b(-C[1],E[0])),P[2]))),w[3]),f(m(f(m(b(C[1],P[0]),b(-P[1],C[0])),w[2]),m(f(m(b(w[1],P[0]),b(-P[1],w[0])),-C[2]),f(m(b(w[1],C[0]),b(-C[1],w[0])),P[2]))),-E[3])))),m(m(f(m(f(m(b(E[1],P[0]),b(-P[1],E[0])),w[2]),m(f(m(b(w[1],P[0]),b(-P[1],w[0])),-E[2]),f(m(b(w[1],E[0]),b(-E[1],w[0])),P[2]))),C[3]),m(f(m(f(m(b(E[1],C[0]),b(-C[1],E[0])),w[2]),m(f(m(b(w[1],C[0]),b(-C[1],w[0])),-E[2]),f(m(b(w[1],E[0]),b(-E[1],w[0])),C[2]))),-P[3]),f(m(f(m(b(O[1],C[0]),b(-C[1],O[0])),E[2]),m(f(m(b(E[1],C[0]),b(-C[1],E[0])),-O[2]),f(m(b(E[1],O[0]),b(-O[1],E[0])),C[2]))),w[3]))),m(f(m(f(m(b(O[1],C[0]),b(-C[1],O[0])),w[2]),m(f(m(b(w[1],C[0]),b(-C[1],w[0])),-O[2]),f(m(b(w[1],O[0]),b(-O[1],w[0])),C[2]))),-E[3]),m(f(m(f(m(b(E[1],C[0]),b(-C[1],E[0])),w[2]),m(f(m(b(w[1],C[0]),b(-C[1],w[0])),-E[2]),f(m(b(w[1],E[0]),b(-E[1],w[0])),C[2]))),O[3]),f(m(f(m(b(E[1],O[0]),b(-O[1],E[0])),w[2]),m(f(m(b(w[1],O[0]),b(-O[1],w[0])),-E[2]),f(m(b(w[1],E[0]),b(-E[1],w[0])),O[2]))),-C[3]))))),U=m(m(m(f(m(f(m(b(C[1],P[0]),b(-P[1],C[0])),O[2]),m(f(m(b(O[1],P[0]),b(-P[1],O[0])),-C[2]),f(m(b(O[1],C[0]),b(-C[1],O[0])),P[2]))),w[3]),f(m(f(m(b(C[1],P[0]),b(-P[1],C[0])),w[2]),m(f(m(b(w[1],P[0]),b(-P[1],w[0])),-C[2]),f(m(b(w[1],C[0]),b(-C[1],w[0])),P[2]))),-O[3])),m(f(m(f(m(b(O[1],P[0]),b(-P[1],O[0])),w[2]),m(f(m(b(w[1],P[0]),b(-P[1],w[0])),-O[2]),f(m(b(w[1],O[0]),b(-O[1],w[0])),P[2]))),C[3]),f(m(f(m(b(O[1],C[0]),b(-C[1],O[0])),w[2]),m(f(m(b(w[1],C[0]),b(-C[1],w[0])),-O[2]),f(m(b(w[1],O[0]),b(-O[1],w[0])),C[2]))),-P[3]))),m(m(f(m(f(m(b(O[1],P[0]),b(-P[1],O[0])),E[2]),m(f(m(b(E[1],P[0]),b(-P[1],E[0])),-O[2]),f(m(b(E[1],O[0]),b(-O[1],E[0])),P[2]))),w[3]),f(m(f(m(b(O[1],P[0]),b(-P[1],O[0])),w[2]),m(f(m(b(w[1],P[0]),b(-P[1],w[0])),-O[2]),f(m(b(w[1],O[0]),b(-O[1],w[0])),P[2]))),-E[3])),m(f(m(f(m(b(E[1],P[0]),b(-P[1],E[0])),w[2]),m(f(m(b(w[1],P[0]),b(-P[1],w[0])),-E[2]),f(m(b(w[1],E[0]),b(-E[1],w[0])),P[2]))),O[3]),f(m(f(m(b(E[1],O[0]),b(-O[1],E[0])),w[2]),m(f(m(b(w[1],O[0]),b(-O[1],w[0])),-E[2]),f(m(b(w[1],E[0]),b(-E[1],w[0])),O[2]))),-P[3])))),I=S(D,U);return I[I.length-1]}}function c(m){return(m===3?l:m===4?u:h)(r,i,n,a)}var x=c(3),d=c(4),v=[function(){return 0},function(){return 0},function(m,b){return b[0]-m[0]},function(m,b,f){var S,w=(m[1]-f[1])*(b[0]-f[0]),E=(m[0]-f[0])*(b[1]-f[1]),O=w-E;if(w>0){if(E<=0)return O;S=w+E}else{if(!(w<0)||E>=0)return O;S=-(w+E)}var C=33306690738754716e-32*S;return O>=C||O<=-C?O:x(m,b,f)},function(m,b,f,S){var w=m[0]-S[0],E=b[0]-S[0],O=f[0]-S[0],C=m[1]-S[1],P=b[1]-S[1],D=f[1]-S[1],U=m[2]-S[2],I=b[2]-S[2],N=f[2]-S[2],W=E*D,F=O*P,j=O*C,H=w*D,te=w*P,Q=E*C,$=U*(W-F)+I*(j-H)+N*(te-Q),K=7771561172376103e-31*((Math.abs(W)+Math.abs(F))*Math.abs(U)+(Math.abs(j)+Math.abs(H))*Math.abs(I)+(Math.abs(te)+Math.abs(Q))*Math.abs(N));return $>K||-$>K?$:d(m,b,f,S)}];function g(m){var b=v[m.length];return b||(b=v[m.length]=c(m.length)),b.apply(void 0,m)}function y(m,b,f,S,w,E,O){return function(C,P,D,U,I){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,P);case 3:return w(C,P,D);case 4:return E(C,P,D,U);case 5:return O(C,P,D,U,I)}for(var N=new Array(arguments.length),W=0;W<arguments.length;++W)N[W]=arguments[W];return m(N)}}(function(){for(;v.length<=5;)v.push(c(v.length));p.exports=y.apply(void 0,[g].concat(v));for(var m=0;m<=5;++m)p.exports[m]=v[m]})()},5382:function(p,s,t){var i=t(8210),r=t(3012);p.exports=function(n,a){if(n.length===1)return r(a,n[0]);if(a.length===1)return r(n,a[0]);if(n.length===0||a.length===0)return[0];var l=[0];if(n.length<a.length)for(var u=0;u<n.length;++u)l=i(l,r(a,n[u]));else for(u=0;u<a.length;++u)l=i(l,r(n,a[u]));return l}},3012:function(p,s,t){var i=t(5250),r=t(9362);p.exports=function(n,a){var l=n.length;if(l===1){var u=i(n[0],a);return u[0]?u:[u[1]]}var h=new Array(2*l),c=[.1,.1],x=[.1,.1],d=0;i(n[0],a,c),c[0]&&(h[d++]=c[0]);for(var v=1;v<l;++v){i(n[v],a,x);var g=c[1];r(g,x[0],c),c[0]&&(h[d++]=c[0]);var y=x[1],m=c[1],b=y+m,f=m-(b-y);c[1]=b,f&&(h[d++]=f)}return c[1]&&(h[d++]=c[1]),d===0&&(h[d++]=0),h.length=d,h}},1125:function(p,s,t){p.exports=function(r,n,a,l){var u=i(r,a,l),h=i(n,a,l);if(u>0&&h>0||u<0&&h<0)return!1;var c=i(a,r,n),x=i(l,r,n);return!(c>0&&x>0||c<0&&x<0)&&(u!==0||h!==0||c!==0||x!==0||function(d,v,g,y){for(var m=0;m<2;++m){var b=d[m],f=v[m],S=Math.min(b,f),w=Math.max(b,f),E=g[m],O=y[m],C=Math.min(E,O);if(Math.max(E,O)<S||w<C)return!1}return!0}(r,n,a,l))};var i=t(3250)[3]},8545:function(p){p.exports=function(s,t){var i=0|s.length,r=0|t.length;if(i===1&&r===1)return function(C,P){var D=C+P,U=D-C,I=C-(D-U)+(P-U);return I?[I,D]:[D]}(s[0],-t[0]);var n,a,l=new Array(i+r),u=0,h=0,c=0,x=Math.abs,d=s[h],v=x(d),g=-t[c],y=x(g);v<y?(a=d,(h+=1)<i&&(v=x(d=s[h]))):(a=g,(c+=1)<r&&(y=x(g=-t[c]))),h<i&&v<y||c>=r?(n=d,(h+=1)<i&&(v=x(d=s[h]))):(n=g,(c+=1)<r&&(y=x(g=-t[c])));for(var m,b,f=n+a,S=f-n,w=a-S,E=w,O=f;h<i&&c<r;)v<y?(n=d,(h+=1)<i&&(v=x(d=s[h]))):(n=g,(c+=1)<r&&(y=x(g=-t[c]))),(w=(a=E)-(S=(f=n+a)-n))&&(l[u++]=w),E=O-((m=O+f)-(b=m-O))+(f-b),O=m;for(;h<i;)(w=(a=E)-(S=(f=(n=d)+a)-n))&&(l[u++]=w),E=O-((m=O+f)-(b=m-O))+(f-b),O=m,(h+=1)<i&&(d=s[h]);for(;c<r;)(w=(a=E)-(S=(f=(n=g)+a)-n))&&(l[u++]=w),E=O-((m=O+f)-(b=m-O))+(f-b),O=m,(c+=1)<r&&(g=-t[c]);return E&&(l[u++]=E),O&&(l[u++]=O),u||(l[u++]=0),l.length=u,l}},8210:function(p){p.exports=function(s,t){var i=0|s.length,r=0|t.length;if(i===1&&r===1)return function(C,P){var D=C+P,U=D-C,I=C-(D-U)+(P-U);return I?[I,D]:[D]}(s[0],t[0]);var n,a,l=new Array(i+r),u=0,h=0,c=0,x=Math.abs,d=s[h],v=x(d),g=t[c],y=x(g);v<y?(a=d,(h+=1)<i&&(v=x(d=s[h]))):(a=g,(c+=1)<r&&(y=x(g=t[c]))),h<i&&v<y||c>=r?(n=d,(h+=1)<i&&(v=x(d=s[h]))):(n=g,(c+=1)<r&&(y=x(g=t[c])));for(var m,b,f=n+a,S=f-n,w=a-S,E=w,O=f;h<i&&c<r;)v<y?(n=d,(h+=1)<i&&(v=x(d=s[h]))):(n=g,(c+=1)<r&&(y=x(g=t[c]))),(w=(a=E)-(S=(f=n+a)-n))&&(l[u++]=w),E=O-((m=O+f)-(b=m-O))+(f-b),O=m;for(;h<i;)(w=(a=E)-(S=(f=(n=d)+a)-n))&&(l[u++]=w),E=O-((m=O+f)-(b=m-O))+(f-b),O=m,(h+=1)<i&&(d=s[h]);for(;c<r;)(w=(a=E)-(S=(f=(n=g)+a)-n))&&(l[u++]=w),E=O-((m=O+f)-(b=m-O))+(f-b),O=m,(c+=1)<r&&(g=t[c]);return E&&(l[u++]=E),O&&(l[u++]=O),u||(l[u++]=0),l.length=u,l}},9127:function(p,s,t){p.exports=function(n){return r(i(n))};var i=t(6204),r=t(5771)},7765:function(p,s,t){p.exports=function(l,u,h,c){if(h=h||0,c===void 0&&(c=function(f){for(var S=f.length,w=0,E=0;E<S;++E)w=0|Math.max(w,f[E].length);return w-1}(l)),l.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(f,S){for(var w=f.length,E=r.mallocUint8(w),O=0;O<w;++O)E[O]=f[O]<S|0;return E}(u,+h),d=function(f,S){for(var w=f.length,E=S*(S+1)/2*w|0,O=r.mallocUint32(2*E),C=0,P=0;P<w;++P)for(var D=f[P],U=(S=D.length,0);U<S;++U)for(var I=0;I<U;++I){var N=D[I],W=D[U];O[C++]=0|Math.min(N,W),O[C++]=0|Math.max(N,W)}n(i(O,[C/2|0,2]));var F=2;for(P=2;P<C;P+=2)O[P-2]===O[P]&&O[P-1]===O[P+1]||(O[F++]=O[P],O[F++]=O[P+1]);return i(O,[F/2|0,2])}(l,c),v=function(f,S,w,E){for(var O=f.data,C=f.shape[0],P=r.mallocDouble(C),D=0,U=0;U<C;++U){var I=O[2*U],N=O[2*U+1];if(w[I]!==w[N]){var W=S[I],F=S[N];O[2*D]=I,O[2*D+1]=N,P[D++]=(F-E)/(F-W)}}return f.shape[0]=D,i(P,[D])}(d,u,x,+h),g=function(f,S){var w=r.mallocInt32(2*S),E=f.shape[0],O=f.data;w[0]=0;for(var C=0,P=0;P<E;++P){var D=O[2*P];if(D!==C){for(w[2*C+1]=P;++C<D;)w[2*C]=P,w[2*C+1]=P;w[2*C]=P}}for(w[2*C+1]=E;++C<S;)w[2*C]=w[2*C+1]=E;return w}(d,0|u.length),y=a(c)(l,d.data,g,x),m=function(f){for(var S=0|f.shape[0],w=f.data,E=new Array(S),O=0;O<S;++O)E[O]=[w[2*O],w[2*O+1]];return E}(d),b=[].slice.call(v.data,0,v.shape[0]);return r.free(x),r.free(d.data),r.free(v.data),r.free(g),{cells:y,vertexIds:m,vertexWeights:b}};var i=t(9618),r=t(1888),n=t(446),a=t(1570)},1570:function(p){p.exports=function(t){return s[t]()};var s=[function(){return function(t,i,r,n){for(var a=t.length,l=0;l<a;++l)t[l].length;return[]}},function(){function t(i,r,n,a){for(var l=0|Math.min(n,a),u=0|Math.max(n,a),h=i[2*l],c=i[2*l+1];h<c;){var x=h+c>>1,d=r[2*x+1];if(d===u)return x;u<d?c=x:h=x+1}return h}return function(i,r,n,a){for(var l=i.length,u=[],h=0;h<l;++h){var c=i[h];if(c.length===2){var x=(a[c[0]]<<0)+(a[c[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}},function(){function t(i,r,n,a){for(var l=0|Math.min(n,a),u=0|Math.max(n,a),h=i[2*l],c=i[2*l+1];h<c;){var x=h+c>>1,d=r[2*x+1];if(d===u)return x;u<d?c=x:h=x+1}return h}return function(i,r,n,a){for(var l=i.length,u=[],h=0;h<l;++h){var c=i[h],x=c.length;if(x===3){if((d=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||d===7)continue;switch(d){case 0:case 7:break;case 1:u.push([t(n,r,c[0],c[2]),t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0]),t(n,r,c[1],c[2])]);break;case 3:u.push([t(n,r,c[0],c[2]),t(n,r,c[1],c[2])]);break;case 4:u.push([t(n,r,c[2],c[1]),t(n,r,c[2],c[0])]);break;case 5:u.push([t(n,r,c[2],c[1]),t(n,r,c[0],c[1])]);break;case 6:u.push([t(n,r,c[1],c[0]),t(n,r,c[2],c[0])])}}else if(x===2){var d;if((d=(a[c[0]]<<0)+(a[c[1]]<<1))==0||d===3)continue;switch(d){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}},function(){function t(i,r,n,a){for(var l=0|Math.min(n,a),u=0|Math.max(n,a),h=i[2*l],c=i[2*l+1];h<c;){var x=h+c>>1,d=r[2*x+1];if(d===u)return x;u<d?c=x:h=x+1}return h}return function(i,r,n,a){for(var l=i.length,u=[],h=0;h<l;++h){var c=i[h],x=c.length;if(x===4){if((d=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2)+(a[c[3]]<<3))==0||d===15)continue;switch(d){case 0:case 15:break;case 1:u.push([t(n,r,c[0],c[1]),t(n,r,c[0],c[2]),t(n,r,c[0],c[3])]);break;case 2:u.push([t(n,r,c[1],c[2]),t(n,r,c[1],c[0]),t(n,r,c[1],c[3])]);break;case 3:u.push([t(n,r,c[1],c[2]),t(n,r,c[0],c[2]),t(n,r,c[0],c[3])],[t(n,r,c[1],c[3]),t(n,r,c[1],c[2]),t(n,r,c[0],c[3])]);break;case 4:u.push([t(n,r,c[2],c[0]),t(n,r,c[2],c[1]),t(n,r,c[2],c[3])]);break;case 5:u.push([t(n,r,c[0],c[1]),t(n,r,c[2],c[1]),t(n,r,c[0],c[3])],[t(n,r,c[2],c[1]),t(n,r,c[2],c[3]),t(n,r,c[0],c[3])]);break;case 6:u.push([t(n,r,c[2],c[0]),t(n,r,c[1],c[0]),t(n,r,c[1],c[3])],[t(n,r,c[2],c[3]),t(n,r,c[2],c[0]),t(n,r,c[1],c[3])]);break;case 7:u.push([t(n,r,c[0],c[3]),t(n,r,c[1],c[3]),t(n,r,c[2],c[3])]);break;case 8:u.push([t(n,r,c[3],c[1]),t(n,r,c[3],c[0]),t(n,r,c[3],c[2])]);break;case 9:u.push([t(n,r,c[3],c[1]),t(n,r,c[0],c[1]),t(n,r,c[0],c[2])],[t(n,r,c[3],c[2]),t(n,r,c[3],c[1]),t(n,r,c[0],c[2])]);break;case 10:u.push([t(n,r,c[1],c[0]),t(n,r,c[3],c[0]),t(n,r,c[1],c[2])],[t(n,r,c[3],c[0]),t(n,r,c[3],c[2]),t(n,r,c[1],c[2])]);break;case 11:u.push([t(n,r,c[1],c[2]),t(n,r,c[0],c[2]),t(n,r,c[3],c[2])]);break;case 12:u.push([t(n,r,c[3],c[0]),t(n,r,c[2],c[0]),t(n,r,c[2],c[1])],[t(n,r,c[3],c[1]),t(n,r,c[3],c[0]),t(n,r,c[2],c[1])]);break;case 13:u.push([t(n,r,c[0],c[1]),t(n,r,c[2],c[1]),t(n,r,c[3],c[1])]);break;case 14:u.push([t(n,r,c[2],c[0]),t(n,r,c[1],c[0]),t(n,r,c[3],c[0])])}}else if(x===3){if((d=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||d===7)continue;switch(d){case 0:case 7:break;case 1:u.push([t(n,r,c[0],c[2]),t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0]),t(n,r,c[1],c[2])]);break;case 3:u.push([t(n,r,c[0],c[2]),t(n,r,c[1],c[2])]);break;case 4:u.push([t(n,r,c[2],c[1]),t(n,r,c[2],c[0])]);break;case 5:u.push([t(n,r,c[2],c[1]),t(n,r,c[0],c[1])]);break;case 6:u.push([t(n,r,c[1],c[0]),t(n,r,c[2],c[0])])}}else if(x===2){var d;if((d=(a[c[0]]<<0)+(a[c[1]]<<1))==0||d===3)continue;switch(d){case 0:case 3:break;case 1:u.push([t(n,r,c[0],c[1])]);break;case 2:u.push([t(n,r,c[1],c[0])])}}}return u}}]},6803:function(p,s,t){t(8828),t(1755);function i(r,n){var a=r.length,l=r.length-n.length,u=Math.min;if(l)return l;switch(a){case 0:return 0;case 1:return r[0]-n[0];case 2:return(x=r[0]+r[1]-n[0]-n[1])||u(r[0],r[1])-u(n[0],n[1]);case 3:var h=r[0]+r[1],c=n[0]+n[1];if(x=h+r[2]-(c+n[2]))return x;var x,d=u(r[0],r[1]),v=u(n[0],n[1]);return(x=u(d,r[2])-u(v,n[2]))||u(d+r[2],h)-u(v+n[2],c);default:var g=r.slice(0);g.sort();var y=n.slice(0);y.sort();for(var m=0;m<a;++m)if(l=g[m]-y[m])return l;return 0}}s.Fw=i},3105:function(p,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,l=n,u=7;for(a>>>=1;a;a>>>=1)l<<=1,l|=1&a,--u;r[n]=l<<u&255}})(i),s.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},2014:function(p,s,t){var i=t(3105),r=t(4623);function n(d,v){var g=d.length,y=d.length-v.length,m=Math.min;if(y)return y;switch(g){case 0:return 0;case 1:return d[0]-v[0];case 2:return(S=d[0]+d[1]-v[0]-v[1])||m(d[0],d[1])-m(v[0],v[1]);case 3:var b=d[0]+d[1],f=v[0]+v[1];if(S=b+d[2]-(f+v[2]))return S;var S,w=m(d[0],d[1]),E=m(v[0],v[1]);return(S=m(w,d[2])-m(E,v[2]))||m(w+d[2],b)-m(E+v[2],f);default:var O=d.slice(0);O.sort();var C=v.slice(0);C.sort();for(var P=0;P<g;++P)if(y=O[P]-C[P])return y;return 0}}function a(d,v){return n(d[0],v[0])}function l(d,v){if(v){for(var g=d.length,y=new Array(g),m=0;m<g;++m)y[m]=[d[m],v[m]];for(y.sort(a),m=0;m<g;++m)d[m]=y[m][0],v[m]=y[m][1];return d}return d.sort(n),d}function u(d){if(d.length===0)return[];for(var v=1,g=d.length,y=1;y<g;++y){var m=d[y];if(n(m,d[y-1])){if(y===v){v++;continue}d[v++]=m}}return d.length=v,d}function h(d,v){for(var g=0,y=d.length-1,m=-1;g<=y;){var b=g+y>>1,f=n(d[b],v);f<=0?(f===0&&(m=b),g=b+1):f>0&&(y=b-1)}return m}function c(d,v){for(var g=new Array(d.length),y=0,m=g.length;y<m;++y)g[y]=[];for(var b=[],f=(y=0,v.length);y<f;++y)for(var S=v[y],w=S.length,E=1,O=1<<w;E<O;++E){b.length=i.popCount(E);for(var C=0,P=0;P<w;++P)E&1<<P&&(b[C++]=S[P]);var D=h(d,b);if(!(D<0))for(;g[D++].push(y),!(D>=d.length||n(d[D],b)!==0););}return g}function x(d,v){if(v<0)return[];for(var g=[],y=(1<<v+1)-1,m=0;m<d.length;++m)for(var b=d[m],f=y;f<1<<b.length;f=i.nextCombination(f)){for(var S=new Array(v+1),w=0,E=0;E<b.length;++E)f&1<<E&&(S[w++]=b[E]);g.push(S)}return l(g)}s.dimension=function(d){for(var v=0,g=Math.max,y=0,m=d.length;y<m;++y)v=g(v,d[y].length);return v-1},s.countVertices=function(d){for(var v=-1,g=Math.max,y=0,m=d.length;y<m;++y)for(var b=d[y],f=0,S=b.length;f<S;++f)v=g(v,b[f]);return v+1},s.cloneCells=function(d){for(var v=new Array(d.length),g=0,y=d.length;g<y;++g)v[g]=d[g].slice(0);return v},s.compareCells=n,s.normalize=l,s.unique=u,s.findCell=h,s.incidence=c,s.dual=function(d,v){if(!v)return c(u(x(d,0)),d);for(var g=new Array(v),y=0;y<v;++y)g[y]=[];y=0;for(var m=d.length;y<m;++y)for(var b=d[y],f=0,S=b.length;f<S;++f)g[b[f]].push(y);return g},s.explode=function(d){for(var v=[],g=0,y=d.length;g<y;++g)for(var m=d[g],b=0|m.length,f=1,S=1<<b;f<S;++f){for(var w=[],E=0;E<b;++E)f>>>E&1&&w.push(m[E]);v.push(w)}return l(v)},s.skeleton=x,s.boundary=function(d){for(var v=[],g=0,y=d.length;g<y;++g)for(var m=d[g],b=0,f=m.length;b<f;++b){for(var S=new Array(m.length-1),w=0,E=0;w<f;++w)w!==b&&(S[E++]=m[w]);v.push(S)}return l(v)},s.connectedComponents=function(d,v){return v?function(g,y){for(var m=new r(y),b=0;b<g.length;++b)for(var f=g[b],S=0;S<f.length;++S)for(var w=S+1;w<f.length;++w)m.link(f[S],f[w]);var E=[],O=m.ranks;for(b=0;b<O.length;++b)O[b]=-1;for(b=0;b<g.length;++b){var C=m.find(g[b][0]);O[C]<0?(O[C]=E.length,E.push([g[b].slice(0)])):E[O[C]].push(g[b].slice(0))}return E}(d,v):function(g){for(var y=u(l(x(g,0))),m=new r(y.length),b=0;b<g.length;++b)for(var f=g[b],S=0;S<f.length;++S)for(var w=h(y,[f[S]]),E=S+1;E<f.length;++E)m.link(w,h(y,[f[E]]));var O=[],C=m.ranks;for(b=0;b<C.length;++b)C[b]=-1;for(b=0;b<g.length;++b){var P=m.find(h(y,[g[b][0]]));C[P]<0?(C[P]=O.length,O.push([g[b].slice(0)])):O[C[P]].push(g[b].slice(0))}return O}(d)}},4623:function(p){function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}p.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var r=i[t];i[t]=i[r],t=r}return t},s.prototype.link=function(t,i){var r=this.find(t),n=this.find(i);if(r!==n){var a=this.ranks,l=this.roots,u=a[r],h=a[n];u<h?l[r]=n:h<u?l[n]=r:(l[n]=r,++a[r])}}},5878:function(p,s,t){p.exports=function(n,a,l){for(var u=a.length,h=n.length,c=new Array(u),x=new Array(u),d=new Array(u),v=new Array(u),g=0;g<u;++g)c[g]=x[g]=-1,d[g]=1/0,v[g]=!1;for(g=0;g<h;++g){var y=n[g];if(y.length!==2)throw new Error("Input must be a graph");var m=y[1],b=y[0];x[b]!==-1?x[b]=-2:x[b]=m,c[m]!==-1?c[m]=-2:c[m]=b}function f(Q){if(v[Q])return 1/0;var $,K,X,Y=c[Q],re=x[Q];return Y<0||re<0?1/0:($=a[Q],K=a[Y],X=a[re],Math.abs(i($,K,X))/Math.sqrt(Math.pow(K[0]-X[0],2)+Math.pow(K[1]-X[1],2)))}function S(Q,$){var K=I[Q],X=I[$];I[Q]=X,I[$]=K,N[K]=$,N[X]=Q}function w(Q){return d[I[Q]]}function E(Q){return 1&Q?Q-1>>1:(Q>>1)-1}function O(Q){for(var $=w(Q);;){var K=$,X=2*Q+1,Y=2*(Q+1),re=Q;if(X<W){var se=w(X);se<K&&(re=X,K=se)}if(Y<W&&w(Y)<K&&(re=Y),re===Q)return Q;S(Q,re),Q=re}}function C(Q){for(var $=w(Q);Q>0;){var K=E(Q);if(!(K>=0&&$<w(K)))return Q;S(Q,K),Q=K}}function P(){if(W>0){var Q=I[0];return S(0,W-1),W-=1,O(0),Q}return-1}function D(Q,$){var K=I[Q];return d[K]===$?Q:(d[K]=-1/0,C(Q),P(),d[K]=$,C((W+=1)-1))}function U(Q){if(!v[Q]){v[Q]=!0;var $=c[Q],K=x[Q];c[K]>=0&&(c[K]=$),x[$]>=0&&(x[$]=K),N[$]>=0&&D(N[$],f($)),N[K]>=0&&D(N[K],f(K))}}var I=[],N=new Array(u);for(g=0;g<u;++g)(d[g]=f(g))<1/0?(N[g]=I.length,I.push(g)):N[g]=-1;var W=I.length;for(g=W>>1;g>=0;--g)O(g);for(;;){var F=P();if(F<0||d[F]>l)break;U(F)}var j=[];for(g=0;g<u;++g)v[g]||(N[g]=j.length,j.push(a[g].slice()));function H(Q,$){if(Q[$]<0)return $;var K=$,X=$;do{var Y=Q[X];if(!v[X]||Y<0||Y===X||(Y=Q[X=Y],!v[X]||Y<0||Y===X))break;X=Y,K=Q[K]}while(K!==X);for(var re=$;re!==X;re=Q[re])Q[re]=X;return X}j.length;var te=[];return n.forEach(function(Q){var $=H(c,Q[0]),K=H(x,Q[1]);if($>=0&&K>=0&&$!==K){var X=N[$],Y=N[K];X!==Y&&te.push([X,Y])}}),r.unique(r.normalize(te)),{positions:j,edges:te}};var i=t(3250),r=t(2014)},1303:function(p,s,t){p.exports=function(n,a){var l,u,h,c;if(a[0][0]<a[1][0])l=a[0],u=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);l=a[1],u=a[0]}if(n[0][0]<n[1][0])h=n[0],c=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);h=n[1],c=n[0]}var x=i(l,u,c),d=i(l,u,h);if(x<0){if(d<=0)return x}else if(x>0){if(d>=0)return x}else if(d)return d;if(x=i(c,h,u),d=i(c,h,l),x<0){if(d<=0)return x}else if(x>0){if(d>=0)return x}else if(d)return d;return u[0]-c[0]};var i=t(3250);function r(n,a){var l,u,h,c;if(a[0][0]<a[1][0])l=a[0],u=a[1];else{if(!(a[0][0]>a[1][0])){var x=Math.min(n[0][1],n[1][1]),d=Math.max(n[0][1],n[1][1]),v=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]);return d<v?d-v:x>g?x-g:d-g}l=a[1],u=a[0]}n[0][1]<n[1][1]?(h=n[0],c=n[1]):(h=n[1],c=n[0]);var y=i(u,l,h);return y||(y=i(u,l,c))||c-u}},4209:function(p,s,t){p.exports=function(d){for(var v=d.length,g=2*v,y=new Array(g),m=0;m<v;++m){var b=d[m],f=b[0][0]<b[1][0];y[2*m]=new x(b[0][0],b,f,m),y[2*m+1]=new x(b[1][0],b,!f,m)}y.sort(function(U,I){var N=U.x-I.x;return N||(N=U.create-I.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});var S=r(a),w=[],E=[],O=[];for(m=0;m<g;){for(var C=y[m].x,P=[];m<g;){var D=y[m];if(D.x!==C)break;m+=1,D.segment[0][0]===D.x&&D.segment[1][0]===D.x?D.create&&(D.segment[0][1]<D.segment[1][1]?(P.push(new c(D.segment[0][1],D.index,!0,!0)),P.push(new c(D.segment[1][1],D.index,!1,!1))):(P.push(new c(D.segment[1][1],D.index,!0,!1)),P.push(new c(D.segment[0][1],D.index,!1,!0)))):S=D.create?S.insert(D.segment,D.index):S.remove(D.segment)}w.push(S.root),E.push(C),O.push(P)}return new l(w,E,O)};var i=t(2478),r=t(3840),n=t(3250),a=t(1303);function l(d,v,g){this.slabs=d,this.coordinates=v,this.horizontal=g}function u(d,v){return d.y-v}function h(d,v){for(var g=null;d;){var y,m,b=d.key;b[0][0]<b[1][0]?(y=b[0],m=b[1]):(y=b[1],m=b[0]);var f=n(y,m,v);if(f<0)d=d.left;else if(f>0)if(v[0]!==b[1][0])g=d,d=d.right;else{if(S=h(d.right,v))return S;d=d.left}else{if(v[0]!==b[1][0])return d;var S;if(S=h(d.right,v))return S;d=d.left}}return g}function c(d,v,g,y){this.y=d,this.index=v,this.start=g,this.closed=y}function x(d,v,g,y){this.x=d,this.segment=v,this.create=g,this.index=y}l.prototype.castUp=function(d){var v=i.le(this.coordinates,d[0]);if(v<0)return-1;this.slabs[v];var g=h(this.slabs[v],d),y=-1;if(g&&(y=g.value),this.coordinates[v]===d[0]){var m=null;if(g&&(m=g.key),v>0){var b=h(this.slabs[v-1],d);b&&(m?a(b.key,m)>0&&(m=b.key,y=b.value):(y=b.value,m=b.key))}var f=this.horizontal[v];if(f.length>0){var S=i.ge(f,d[1],u);if(S<f.length){var w=f[S];if(d[1]===w.y){if(w.closed)return w.index;for(;S<f.length-1&&f[S+1].y===d[1];)if((w=f[S+=1]).closed)return w.index;if(w.y===d[1]&&!w.start){if((S+=1)>=f.length)return y;w=f[S]}}if(w.start)if(m){var E=n(m[0],m[1],[d[0],w.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(y=w.index)}else y=w.index;else w.y!==d[1]&&(y=w.index)}}}return y}},5202:function(p,s,t){var i=t(1944),r=t(8210);function n(l,u){var h=r(i(l,u),[u[u.length-1]]);return h[h.length-1]}function a(l,u,h,c){var x=-u/(c-u);x<0?x=0:x>1&&(x=1);for(var d=1-x,v=l.length,g=new Array(v),y=0;y<v;++y)g[y]=x*l[y]+d*h[y];return g}p.exports=function(l,u){for(var h=[],c=[],x=n(l[l.length-1],u),d=l[l.length-1],v=l[0],g=0;g<l.length;++g,d=v){var y=n(v=l[g],u);if(x<0&&y>0||x>0&&y<0){var m=a(d,y,v,x);h.push(m),c.push(m.slice())}y<0?c.push(v.slice()):y>0?h.push(v.slice()):(h.push(v.slice()),c.push(v.slice())),x=y}return{positive:h,negative:c}},p.exports.positive=function(l,u){for(var h=[],c=n(l[l.length-1],u),x=l[l.length-1],d=l[0],v=0;v<l.length;++v,x=d){var g=n(d=l[v],u);(c<0&&g>0||c>0&&g<0)&&h.push(a(x,g,d,c)),g>=0&&h.push(d.slice()),c=g}return h},p.exports.negative=function(l,u){for(var h=[],c=n(l[l.length-1],u),x=l[l.length-1],d=l[0],v=0;v<l.length;++v,x=d){var g=n(d=l[v],u);(c<0&&g>0||c>0&&g<0)&&h.push(a(x,g,d,c)),g<=0&&h.push(d.slice()),c=g}return h}},3387:function(p,s,t){var i;(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(u){return function(h,c){var x,d,v,g,y,m,b,f,S,w=1,E=h.length,O="";for(d=0;d<E;d++)if(typeof h[d]=="string")O+=h[d];else if(typeof h[d]=="object"){if((g=h[d]).keys)for(x=c[w],v=0;v<g.keys.length;v++){if(x==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[v],g.keys[v-1]));x=x[g.keys[v]]}else x=g.param_no?c[g.param_no]:c[w++];if(r.not_type.test(g.type)&&r.not_primitive.test(g.type)&&x instanceof Function&&(x=x()),r.numeric_arg.test(g.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(n("[sprintf] expecting number but found %T",x));switch(r.number.test(g.type)&&(f=x>=0),g.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,g.width?parseInt(g.width):0);break;case"e":x=g.precision?parseFloat(x).toExponential(g.precision):parseFloat(x).toExponential();break;case"f":x=g.precision?parseFloat(x).toFixed(g.precision):parseFloat(x);break;case"g":x=g.precision?String(Number(x.toPrecision(g.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=g.precision?x.substring(0,g.precision):x;break;case"t":x=String(!!x),x=g.precision?x.substring(0,g.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=g.precision?x.substring(0,g.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=g.precision?x.substring(0,g.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}r.json.test(g.type)?O+=x:(!r.number.test(g.type)||f&&!g.sign?S="":(S=f?"+":"-",x=x.toString().replace(r.sign,"")),m=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",b=g.width-(S+x).length,y=g.width&&b>0?m.repeat(b):"",O+=g.align?S+x+y:m==="0"?S+y+x:y+S+x)}return O}(function(h){if(l[h])return l[h];for(var c,x=h,d=[],v=0;x;){if((c=r.text.exec(x))!==null)d.push(c[0]);else if((c=r.modulo.exec(x))!==null)d.push("%");else{if((c=r.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){v|=1;var g=[],y=c[2],m=[];if((m=r.key.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(m[1]);(y=y.substring(m[0].length))!=="";)if((m=r.key_access.exec(y))!==null)g.push(m[1]);else{if((m=r.index_access.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(m[1])}c[2]=g}else v|=2;if(v===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}x=x.substring(c[0].length)}return l[h]=d}(u),arguments)}function a(u,h){return n.apply(null,[u].concat(h||[]))}var l=Object.create(null);s.sprintf=n,s.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,(i=(function(){return{sprintf:n,vsprintf:a}}).call(s,t,s,p))===void 0||(p.exports=i))})()},3711:function(p,s,t){p.exports=function(l,u){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(x,d){for(var v=r(x,d),g=v.length,y=new Array(g),m=new Array(g),b=0;b<g;++b)y[b]=[v[b]],m[b]=[b];return{positions:y,cells:m}}(l,u);var h=l.order.join()+"-"+l.dtype,c=a[h];return u=+u||0,c||(c=a[h]=function(x,d){var v=x.length+"d",g=n[v];if(g)return g(i,x,d)}(l.order,l.dtype)),c(l,u)};var i=t(2640),r=t(781),n={"2d":function(l,u,h){var c=l({order:u,scalarArguments:3,getters:h==="generic"?[0]:void 0,phase:function(x,d,v,g){return x>g|0},vertex:function(x,d,v,g,y,m,b,f,S,w,E,O,C){var P=(b<<0)+(f<<1)+(S<<2)+(w<<3)|0;if(P!==0&&P!==15)switch(P){case 0:case 15:E.push([x-.5,d-.5]);break;case 1:E.push([x-.25-.25*(g+v-2*C)/(v-g),d-.25-.25*(y+v-2*C)/(v-y)]);break;case 2:E.push([x-.75-.25*(-g-v+2*C)/(g-v),d-.25-.25*(m+g-2*C)/(g-m)]);break;case 3:E.push([x-.5,d-.5-.5*(y+v+m+g-4*C)/(v-y+g-m)]);break;case 4:E.push([x-.25-.25*(m+y-2*C)/(y-m),d-.75-.25*(-y-v+2*C)/(y-v)]);break;case 5:E.push([x-.5-.5*(g+v+m+y-4*C)/(v-g+y-m),d-.5]);break;case 6:E.push([x-.5-.25*(-g-v+m+y)/(g-v+y-m),d-.5-.25*(-y-v+m+g)/(y-v+g-m)]);break;case 7:E.push([x-.75-.25*(m+y-2*C)/(y-m),d-.75-.25*(m+g-2*C)/(g-m)]);break;case 8:E.push([x-.75-.25*(-m-y+2*C)/(m-y),d-.75-.25*(-m-g+2*C)/(m-g)]);break;case 9:E.push([x-.5-.25*(g+v+-m-y)/(v-g+m-y),d-.5-.25*(y+v+-m-g)/(v-y+m-g)]);break;case 10:E.push([x-.5-.5*(-g-v-m-y+4*C)/(g-v+m-y),d-.5]);break;case 11:E.push([x-.25-.25*(-m-y+2*C)/(m-y),d-.75-.25*(y+v-2*C)/(v-y)]);break;case 12:E.push([x-.5,d-.5-.5*(-y-v-m-g+4*C)/(y-v+m-g)]);break;case 13:E.push([x-.75-.25*(g+v-2*C)/(v-g),d-.25-.25*(-m-g+2*C)/(m-g)]);break;case 14:E.push([x-.25-.25*(-g-v+2*C)/(g-v),d-.25-.25*(-y-v+2*C)/(y-v)])}},cell:function(x,d,v,g,y,m,b,f,S){y?f.push([x,d]):f.push([d,x])}});return function(x,d){var v=[],g=[];return c(x,v,g,d),{positions:v,cells:g}}}},a={}},529:function(p,s,t){p.exports=function a(l,u,h){var c=(h=h||{}).fontStyle||"normal",x=h.fontWeight||"normal",d=h.fontVariant||"normal",v=[c,x,d,l].join("_"),g=n[v];g||(g=n[v]={" ":{data:new Float32Array(0),shape:.2}});var y=g[u];if(!y)if(u.length<=1||!/\d/.test(u))y=g[u]=function(U){for(var I=U.cells,N=U.positions,W=new Float32Array(6*I.length),F=0,j=0,H=0;H<I.length;++H)for(var te=I[H],Q=0;Q<3;++Q){var $=N[te[Q]];W[F++]=$[0],W[F++]=$[1]+1.4,j=Math.max($[0],j)}return{data:W,shape:j}}(i(u,{triangles:!0,font:l,fontStyle:c,fontWeight:x,fontVariant:d,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=u.split(/(\d|\s)/),b=new Array(m.length),f=0,S=0,w=0;w<m.length;++w)b[w]=a(l,m[w]),f+=b[w].data.length,S+=b[w].shape,w>0&&(S+=.02);var E=new Float32Array(f),O=0,C=-.5*S;for(w=0;w<b.length;++w){for(var P=b[w].data,D=0;D<P.length;D+=2)E[O++]=P[D]+C,E[O++]=P[D+1];C+=b[w].shape+.02}y=g[u]={data:E,shape:S}}return y};var i=t(4359),r=window||M.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},665:function(p,s,t){var i=t(3202);p.exports=a;var r=96;function n(l,u){var h=i(getComputedStyle(l).getPropertyValue(u));return h[0]*a(h[1],l)}function a(l,u){switch(u=u||document.body,l=(l||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),l){case"%":return u.clientHeight/100;case"ch":case"ex":return function(h,c){var x=document.createElement("div");x.style["font-size"]="128"+h,c.appendChild(x);var d=n(x,"font-size")/128;return c.removeChild(x),d}(l,u);case"em":return n(u,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},7261:function(p,s,t){p.exports=function(y){var m=(y=y||{}).center||[0,0,0],b=y.up||[0,1,0],f=y.right||x(b),S=y.radius||1,w=y.theta||0,E=y.phi||0;if(m=[].slice.call(m,0,3),b=[].slice.call(b,0,3),l(b,b),f=[].slice.call(f,0,3),l(f,f),"eye"in y){var O=y.eye,C=[O[0]-m[0],O[1]-m[1],O[2]-m[2]];a(f,C,b),h(f[0],f[1],f[2])<1e-6?f=x(b):l(f,f),S=h(C[0],C[1],C[2]);var P=u(b,C)/S,D=u(f,C)/S;E=Math.acos(P),w=Math.acos(D)}return S=Math.log(S),new d(y.zoomMin,y.zoomMax,m,b,f,S,w,E)};var i=t(9215),r=t(7608),n=t(6079),a=t(5911),l=t(3536),u=t(244);function h(y,m,b){return Math.sqrt(Math.pow(y,2)+Math.pow(m,2)+Math.pow(b,2))}function c(y){return Math.min(1,Math.max(-1,y))}function x(y){var m=Math.abs(y[0]),b=Math.abs(y[1]),f=Math.abs(y[2]),S=[0,0,0];m>Math.max(b,f)?S[2]=1:b>Math.max(m,f)?S[0]=1:S[1]=1;for(var w=0,E=0,O=0;O<3;++O)w+=y[O]*y[O],E+=S[O]*y[O];for(O=0;O<3;++O)S[O]-=E/w*y[O];return l(S,S),S}function d(y,m,b,f,S,w,E,O){this.center=i(b),this.up=i(f),this.right=i(S),this.radius=i([w]),this.angle=i([E,O]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var v=d.prototype;v.setDistanceLimits=function(y,m){y=y>0?Math.log(y):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=m},v.getDistanceLimits=function(y){var m=this.radius.bounds[0];return y?(y[0]=Math.exp(m[0][0]),y[1]=Math.exp(m[1][0]),y):[Math.exp(m[0][0]),Math.exp(m[1][0])]},v.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var m=this.computedUp,b=this.computedRight,f=0,S=0,w=0;w<3;++w)S+=m[w]*b[w],f+=m[w]*m[w];var E=Math.sqrt(f),O=0;for(w=0;w<3;++w)b[w]-=m[w]*S/f,O+=b[w]*b[w],m[w]/=E;var C=Math.sqrt(O);for(w=0;w<3;++w)b[w]/=C;var P=this.computedToward;a(P,m,b),l(P,P);var D=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],I=this.computedAngle[1],N=Math.cos(U),W=Math.sin(U),F=Math.cos(I),j=Math.sin(I),H=this.computedCenter,te=N*F,Q=W*F,$=j,K=-N*j,X=-W*j,Y=F,re=this.computedEye,se=this.computedMatrix;for(w=0;w<3;++w){var ae=te*b[w]+Q*P[w]+$*m[w];se[4*w+1]=K*b[w]+X*P[w]+Y*m[w],se[4*w+2]=ae,se[4*w+3]=0}var ce=se[1],fe=se[5],he=se[9],ve=se[2],ye=se[6],me=se[10],Me=fe*me-he*ye,Pe=he*ve-ce*me,ge=ce*ye-fe*ve,oe=h(Me,Pe,ge);for(Me/=oe,Pe/=oe,ge/=oe,se[0]=Me,se[4]=Pe,se[8]=ge,w=0;w<3;++w)re[w]=H[w]+se[2+4*w]*D;for(w=0;w<3;++w){O=0;for(var ie=0;ie<3;++ie)O+=se[w+4*ie]*re[ie];se[12+w]=-O}se[15]=1},v.getMatrix=function(y,m){this.recalcMatrix(y);var b=this.computedMatrix;if(m){for(var f=0;f<16;++f)m[f]=b[f];return m}return b};var g=[0,0,0];v.rotate=function(y,m,b,f){if(this.angle.move(y,m,b),f){this.recalcMatrix(y);var S=this.computedMatrix;g[0]=S[2],g[1]=S[6],g[2]=S[10];for(var w=this.computedUp,E=this.computedRight,O=this.computedToward,C=0;C<3;++C)S[4*C]=w[C],S[4*C+1]=E[C],S[4*C+2]=O[C];for(n(S,S,f,g),C=0;C<3;++C)w[C]=S[4*C],E[C]=S[4*C+1];this.up.set(y,w[0],w[1],w[2]),this.right.set(y,E[0],E[1],E[2])}},v.pan=function(y,m,b,f){m=m||0,b=b||0,f=f||0,this.recalcMatrix(y);var S=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],O=S[9],C=h(w,E,O);w/=C,E/=C,O/=C;var P=S[0],D=S[4],U=S[8],I=P*w+D*E+U*O,N=h(P-=w*I,D-=E*I,U-=O*I),W=(P/=N)*m+w*b,F=(D/=N)*m+E*b,j=(U/=N)*m+O*b;this.center.move(y,W,F,j);var H=Math.exp(this.computedRadius[0]);H=Math.max(1e-4,H+f),this.radius.set(y,Math.log(H))},v.translate=function(y,m,b,f){this.center.move(y,m||0,b||0,f||0)},v.setMatrix=function(y,m,b,f){var S=1;typeof b=="number"&&(S=0|b),(S<0||S>3)&&(S=1);var w=(S+2)%3;m||(this.recalcMatrix(y),m=this.computedMatrix);var E=m[S],O=m[S+4],C=m[S+8];if(f){var P=Math.abs(E),D=Math.abs(O),U=Math.abs(C),I=Math.max(P,D,U);P===I?(E=E<0?-1:1,O=C=0):U===I?(C=C<0?-1:1,E=O=0):(O=O<0?-1:1,E=C=0)}else{var N=h(E,O,C);E/=N,O/=N,C/=N}var W,F,j=m[w],H=m[w+4],te=m[w+8],Q=j*E+H*O+te*C,$=h(j-=E*Q,H-=O*Q,te-=C*Q),K=O*(te/=$)-C*(H/=$),X=C*(j/=$)-E*te,Y=E*H-O*j,re=h(K,X,Y);if(K/=re,X/=re,Y/=re,this.center.jump(y,we,Ae,Oe),this.radius.idle(y),this.up.jump(y,E,O,C),this.right.jump(y,j,H,te),S===2){var se=m[1],ae=m[5],ce=m[9],fe=se*j+ae*H+ce*te,he=se*K+ae*X+ce*Y;W=Me<0?-Math.PI/2:Math.PI/2,F=Math.atan2(he,fe)}else{var ve=m[2],ye=m[6],me=m[10],Me=ve*E+ye*O+me*C,Pe=ve*j+ye*H+me*te,ge=ve*K+ye*X+me*Y;W=Math.asin(c(Me)),F=Math.atan2(ge,Pe)}this.angle.jump(y,F,W),this.recalcMatrix(y);var oe=m[2],ie=m[6],de=m[10],Se=this.computedMatrix;r(Se,m);var _e=Se[15],we=Se[12]/_e,Ae=Se[13]/_e,Oe=Se[14]/_e,ze=Math.exp(this.computedRadius[0]);this.center.jump(y,we-oe*ze,Ae-ie*ze,Oe-de*ze)},v.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},v.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},v.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},v.setDistance=function(y,m){m>0&&this.radius.set(y,Math.log(m))},v.lookAt=function(y,m,b,f){this.recalcMatrix(y),m=m||this.computedEye,b=b||this.computedCenter;var S=(f=f||this.computedUp)[0],w=f[1],E=f[2],O=h(S,w,E);if(!(O<1e-6)){S/=O,w/=O,E/=O;var C=m[0]-b[0],P=m[1]-b[1],D=m[2]-b[2],U=h(C,P,D);if(!(U<1e-6)){C/=U,P/=U,D/=U;var I=this.computedRight,N=I[0],W=I[1],F=I[2],j=S*N+w*W+E*F,H=h(N-=j*S,W-=j*w,F-=j*E);if(!(H<.01&&(H=h(N=w*D-E*P,W=E*C-S*D,F=S*P-w*C))<1e-6)){N/=H,W/=H,F/=H,this.up.set(y,S,w,E),this.right.set(y,N,W,F),this.center.set(y,b[0],b[1],b[2]),this.radius.set(y,Math.log(U));var te=w*F-E*W,Q=E*N-S*F,$=S*W-w*N,K=h(te,Q,$),X=S*C+w*P+E*D,Y=N*C+W*P+F*D,re=(te/=K)*C+(Q/=K)*P+($/=K)*D,se=Math.asin(c(X)),ae=Math.atan2(re,Y),ce=this.angle._state,fe=ce[ce.length-1],he=ce[ce.length-2];fe%=2*Math.PI;var ve=Math.abs(fe+2*Math.PI-ae),ye=Math.abs(fe-ae),me=Math.abs(fe-2*Math.PI-ae);ve<ye&&(fe+=2*Math.PI),me<ye&&(fe-=2*Math.PI),this.angle.jump(this.angle.lastT(),fe,he),this.angle.set(y,ae,se)}}}}},5250:function(p){p.exports=function(t,i,r){var n=t*i,a=s*t,l=a-(a-t),u=t-l,h=s*i,c=h-(h-i),x=i-c,d=u*x-(n-l*c-u*c-l*x);return r?(r[0]=d,r[1]=n,r):[d,n]};var s=+(Math.pow(2,27)+1)},9362:function(p){p.exports=function(s,t,i){var r=s+t,n=r-s,a=t-n,l=s-(r-n);return i?(i[0]=l+a,i[1]=r,i):[l+a,r]}},1888:function(p,s,t){var i=t(8828),r=t(1338),n=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",l=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",h=t.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=r([32,0])),h.BIGUINT64||(h.BIGUINT64=r([32,0])),h.BIGINT64||(h.BIGINT64=r([32,0])),h.BUFFER||(h.BUFFER=r([32,0]));var c=h.DATA,x=h.BUFFER;function d(I){if(I){var N=I.length||I.byteLength,W=i.log2(N);c[W].push(I)}}function v(I){I=i.nextPow2(I);var N=i.log2(I),W=c[N];return W.length>0?W.pop():new ArrayBuffer(I)}function g(I){return new Uint8Array(v(I),0,I)}function y(I){return new Uint16Array(v(2*I),0,I)}function m(I){return new Uint32Array(v(4*I),0,I)}function b(I){return new Int8Array(v(I),0,I)}function f(I){return new Int16Array(v(2*I),0,I)}function S(I){return new Int32Array(v(4*I),0,I)}function w(I){return new Float32Array(v(4*I),0,I)}function E(I){return new Float64Array(v(8*I),0,I)}function O(I){return a?new Uint8ClampedArray(v(I),0,I):g(I)}function C(I){return l?new BigUint64Array(v(8*I),0,I):null}function P(I){return u?new BigInt64Array(v(8*I),0,I):null}function D(I){return new DataView(v(I),0,I)}function U(I){I=i.nextPow2(I);var N=i.log2(I),W=x[N];return W.length>0?W.pop():new n(I)}s.free=function(I){if(n.isBuffer(I))x[i.log2(I.length)].push(I);else{if(Object.prototype.toString.call(I)!=="[object ArrayBuffer]"&&(I=I.buffer),!I)return;var N=I.length||I.byteLength,W=0|i.log2(N);c[W].push(I)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(I){d(I.buffer)},s.freeArrayBuffer=d,s.freeBuffer=function(I){x[i.log2(I.length)].push(I)},s.malloc=function(I,N){if(N===void 0||N==="arraybuffer")return v(I);switch(N){case"uint8":return g(I);case"uint16":return y(I);case"uint32":return m(I);case"int8":return b(I);case"int16":return f(I);case"int32":return S(I);case"float":case"float32":return w(I);case"double":case"float64":return E(I);case"uint8_clamped":return O(I);case"bigint64":return P(I);case"biguint64":return C(I);case"buffer":return U(I);case"data":case"dataview":return D(I);default:return null}return null},s.mallocArrayBuffer=v,s.mallocUint8=g,s.mallocUint16=y,s.mallocUint32=m,s.mallocInt8=b,s.mallocInt16=f,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=w,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=O,s.mallocBigUint64=C,s.mallocBigInt64=P,s.mallocDataView=D,s.mallocBuffer=U,s.clearCache=function(){for(var I=0;I<32;++I)h.UINT8[I].length=0,h.UINT16[I].length=0,h.UINT32[I].length=0,h.INT8[I].length=0,h.INT16[I].length=0,h.INT32[I].length=0,h.FLOAT[I].length=0,h.DOUBLE[I].length=0,h.BIGUINT64[I].length=0,h.BIGINT64[I].length=0,h.UINT8C[I].length=0,c[I].length=0,x[I].length=0}},1755:function(p){function s(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}p.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var r=i,n=this.roots;n[i]!==i;)i=n[i];for(;n[r]!==i;){var a=n[r];n[r]=i,r=a}return i},t.link=function(i,r){var n=this.find(i),a=this.find(r);if(n!==a){var l=this.ranks,u=this.roots,h=l[n],c=l[a];h<c?u[n]=a:c<h?u[a]=n:(u[a]=n,++l[n])}}},1682:function(p){p.exports=function(s,t,i){return s.length===0?s:t?(i||s.sort(t),function(r,n){for(var a=1,l=r.length,u=r[0],h=r[0],c=1;c<l;++c)if(h=u,n(u=r[c],h)){if(c===a){a++;continue}r[a++]=u}return r.length=a,r}(s,t)):(i||s.sort(),function(r){for(var n=1,a=r.length,l=r[0],u=r[0],h=1;h<a;++h,u=l)if(u=l,(l=r[h])!==u){if(h===n){n++;continue}r[n++]=l}return r.length=n,r}(s))}},4359:function(p,s,t){p.exports=function(a,l){return typeof l=="object"&&l!==null||(l={}),i(a,l.canvas||r,l.context||n,l)};var i=t(7718),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},7718:function(p,s,t){p.exports=function(C,P,D,U){var I=64,N=1.25,W={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return U&&(U.size&&U.size>0&&(I=U.size),U.lineSpacing&&U.lineSpacing>0&&(N=U.lineSpacing),U.styletags&&U.styletags.breaklines&&(W.breaklines=!!U.styletags.breaklines),U.styletags&&U.styletags.bolds&&(W.bolds=!!U.styletags.bolds),U.styletags&&U.styletags.italics&&(W.italics=!!U.styletags.italics),U.styletags&&U.styletags.subscripts&&(W.subscripts=!!U.styletags.subscripts),U.styletags&&U.styletags.superscripts&&(W.superscripts=!!U.styletags.superscripts)),D.font=[U.fontStyle,U.fontVariant,U.fontWeight,I+"px",U.font].filter(function(F){return F}).join(" "),D.textAlign="start",D.textBaseline="alphabetic",D.direction="ltr",O(function(F,j,H,te,Q,$){H=H.replace(/\n/g,""),H=$.breaklines===!0?H.replace(/\<br\>/g,`
`):H.replace(/\<br\>/g," ");var K="",X=[];for(ae=0;ae<H.length;++ae)X[ae]=K;$.bolds===!0&&(X=S(h,c,H,X)),$.italics===!0&&(X=S(x,d,H,X)),$.superscripts===!0&&(X=S(v,y,H,X)),$.subscripts===!0&&(X=S(m,f,H,X));var Y=[],re="";for(ae=0;ae<H.length;++ae)X[ae]!==null&&(re+=H[ae],Y.push(X[ae]));var se,ae,ce,fe,he,ve=re.split(`
`),ye=ve.length,me=Math.round(Q*te),Me=te,Pe=2*te,ge=0,oe=ye*me+Pe;F.height<oe&&(F.height=oe),j.fillStyle="#000",j.fillRect(0,0,F.width,F.height),j.fillStyle="#fff";var ie=0,de="";function Se(){if(de!==""){var ke=j.measureText(de).width;j.fillText(de,Me+ce,Pe+fe),ce+=ke}}function _e(){return Math.round(he)+"px "}function we(ke,Ie){var Ee=""+j.font;if($.subscripts===!0){var Be=ke.indexOf(b),Ve=Ie.indexOf(b),Ze=Be>-1?parseInt(ke[1+Be]):0,rt=Ve>-1?parseInt(Ie[1+Ve]):0;Ze!==rt&&(Ee=Ee.replace(_e(),"?px "),he*=Math.pow(.75,rt-Ze),Ee=Ee.replace("?px ",_e())),fe+=.25*me*(rt-Ze)}if($.superscripts===!0){var it=ke.indexOf(g),dt=Ie.indexOf(g),vt=it>-1?parseInt(ke[1+it]):0,ht=dt>-1?parseInt(Ie[1+dt]):0;vt!==ht&&(Ee=Ee.replace(_e(),"?px "),he*=Math.pow(.75,ht-vt),Ee=Ee.replace("?px ",_e())),fe-=.25*me*(ht-vt)}if($.bolds===!0){var Qe=ke.indexOf(c)>-1,Je=Ie.indexOf(c)>-1;!Qe&&Je&&(Ee=Tt?Ee.replace("italic ","italic bold "):"bold "+Ee),Qe&&!Je&&(Ee=Ee.replace("bold ",""))}if($.italics===!0){var Tt=ke.indexOf(d)>-1,Ot=Ie.indexOf(d)>-1;!Tt&&Ot&&(Ee="italic "+Ee),Tt&&!Ot&&(Ee=Ee.replace("italic ",""))}j.font=Ee}for(se=0;se<ye;++se){var Ae=ve[se]+`
`;for(ce=0,fe=se*me,he=te,de="",ae=0;ae<Ae.length;++ae){var Oe=ae+ie<Y.length?Y[ae+ie]:Y[Y.length-1];K===Oe?de+=Ae[ae]:(Se(),de=Ae[ae],Oe!==void 0&&(we(K,Oe),K=Oe))}Se(),ie+=Ae.length;var ze=0|Math.round(ce+2*Me);ge<ze&&(ge=ze)}var pe=ge,be=Pe+me*ye;return r(j.getImageData(0,0,pe,be).data,[be,pe,4]).pick(-1,-1,0).transpose(1,0)}(P,D,C,I,N,W),U,I)},p.exports.processPixels=O;var i=t(3711),r=t(9618),n=t(5878),a=t(332),l=t(2538),u=t(2095),h="b",c="b|",x="i",d="i|",v="sup",g="+",y="+1",m="sub",b="-",f="-1";function S(C,P,D,U){for(var I="<"+C+">",N="</"+C+">",W=I.length,F=N.length,j=P[0]===g||P[0]===b,H=0,te=-F;H>-1&&(H=D.indexOf(I,H))!==-1&&(te=D.indexOf(N,H+W))!==-1&&!(te<=H);){for(var Q=H;Q<te+F;++Q)if(Q<H+W||Q>=te)U[Q]=null,D=D.substr(0,Q)+" "+D.substr(Q+1);else if(U[Q]!==null){var $=U[Q].indexOf(P[0]);$===-1?U[Q]+=P:j&&(U[Q]=U[Q].substr(0,$+1)+(1+parseInt(U[Q][$+1]))+U[Q].substr($+2))}var K=H+W,X=D.substr(K,te-K).indexOf(I);H=X!==-1?X:te+F}return U}function w(C,P){var D=i(C,128);return P?n(D.cells,D.positions,.25):{edges:D.cells,positions:D.positions}}function E(C,P,D,U){var I=w(C,U),N=function(se,ae,ce){for(var fe=ae.textAlign||"start",he=ae.textBaseline||"alphabetic",ve=[1<<30,1<<30],ye=[0,0],me=se.length,Me=0;Me<me;++Me)for(var Pe=se[Me],ge=0;ge<2;++ge)ve[ge]=0|Math.min(ve[ge],Pe[ge]),ye[ge]=0|Math.max(ye[ge],Pe[ge]);var oe=0;switch(fe){case"center":oe=-.5*(ve[0]+ye[0]);break;case"right":case"end":oe=-ye[0];break;case"left":case"start":oe=-ve[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+fe+"'")}var ie=0;switch(he){case"hanging":case"top":ie=-ve[1];break;case"middle":ie=-.5*(ve[1]+ye[1]);break;case"alphabetic":case"ideographic":ie=-3*ce;break;case"bottom":ie=-ye[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+he+"'")}var de=1/ce;return"lineHeight"in ae?de*=+ae.lineHeight:"width"in ae?de=ae.width/(ye[0]-ve[0]):"height"in ae&&(de=ae.height/(ye[1]-ve[1])),se.map(function(Se){return[de*(Se[0]+oe),de*(Se[1]+ie)]})}(I.positions,P,D),W=I.edges,F=P.orientation==="ccw";if(a(N,W),P.polygons||P.polygon||P.polyline){for(var j=u(W,N),H=new Array(j.length),te=0;te<j.length;++te){for(var Q=j[te],$=new Array(Q.length),K=0;K<Q.length;++K){for(var X=Q[K],Y=new Array(X.length),re=0;re<X.length;++re)Y[re]=N[X[re]].slice();F&&Y.reverse(),$[K]=Y}H[te]=$}return H}return P.triangles||P.triangulate||P.triangle?{cells:l(N,W,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:W,positions:N}}function O(C,P,D){try{return E(C,P,D,!0)}catch{}try{return E(C,P,D,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(p){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,r=Object.freeze({});if(i.set(r,1),i.get(r)===1)return void(p.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,l=Object.isExtensible,u="weakmap:",h=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),x=new Uint8Array(c);crypto.getRandomValues(x),h=u+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(b)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return d(E).filter(b)}})}(function(){var E=Object.freeze;a(Object,"freeze",{value:function(P){return f(P),E(P)}});var O=Object.seal;a(Object,"seal",{value:function(P){return f(P),O(P)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(P){return f(P),C(P)}})})();var v=!1,g=0,y=function(){this instanceof y||w();var E=[],O=[],C=g++;return Object.create(y.prototype,{get___:{value:S(function(P,D){var U,I=f(P);return I?C in I?I[C]:D:(U=E.indexOf(P))>=0?O[U]:D})},has___:{value:S(function(P){var D=f(P);return D?C in D:E.indexOf(P)>=0})},set___:{value:S(function(P,D){var U,I=f(P);return I?I[C]=D:(U=E.indexOf(P))>=0?O[U]=D:(U=E.length,O[U]=D,E[U]=P),this})},delete___:{value:S(function(P){var D,U,I=f(P);return I?C in I&&delete I[C]:!((D=E.indexOf(P))<0||(U=E.length-1,E[D]=void 0,O[D]=O[U],E[D]=E[U],E.length=U,O.length=U,0))})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(E,O){return this.get___(E,O)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,O){return this.set___(E,O)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof y||w();var O,C=new t,P=void 0,D=!1;return O=s?function(U,I){return C.set(U,I),C.has(U)||(P||(P=new y),P.set(U,I)),this}:function(U,I){if(D)try{C.set(U,I)}catch{P||(P=new y),P.set___(U,I)}else C.set(U,I);return this},Object.create(y.prototype,{get___:{value:S(function(U,I){return P?C.has(U)?C.get(U):P.get___(U,I):C.get(U,I)})},has___:{value:S(function(U){return C.has(U)||!!P&&P.has___(U)})},set___:{value:S(O)},delete___:{value:S(function(U){var I=!!C.delete(U);return P&&P.delete___(U)||I})},permitHostObjects___:{value:S(function(U){if(U!==m)throw new Error("bogus call to permitHostObjects___");D=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=y.prototype,p.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),p.exports=y)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function b(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function f(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var O=E[h];if(O&&O.key===E)return O;if(l(E)){O={key:E};try{return a(E,h,{value:O,writable:!1,enumerable:!1,configurable:!1}),O}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function w(){v||typeof console>"u"||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},236:function(p,s,t){var i=t(8284);p.exports=function(){var r={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:i(n,r)}}},8284:function(p){p.exports=function(s,t){var i={identity:t},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):i},writable:!0}),i}},606:function(p,s,t){var i=t(236);p.exports=function(){var r=i();return{get:function(n,a){var l=r(n);return l.hasOwnProperty("value")?l.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},3349:function(p){p.exports=function(s){var t={};return function(i,r,n){var a=i.dtype,l=i.order,u=[a,l.join()].join(),h=t[u];return h||(t[u]=h=s([a,l])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,r,n)}}((function(){return function(s,t,i,r,n,a){var l=s[0],u=i[0],h=[0],c=u;r|=0;var x=0,d=u;for(x=0;x<l;++x){var v=t[r]-a,g=t[r+c]-a;v>=0!=g>=0&&n.push(h[0]+.5+.5*(v+g)/(v-g)),r+=d,++h[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},781:function(p,s,t){p.exports=function(r,n){var a=[];return n=+n||0,i(r.hi(r.shape[0]-1),a,n),a};var i=t(3349)},7790:function(){}},o={};function T(p){var s=o[p];if(s!==void 0)return s.exports;var t=o[p]={id:p,loaded:!1,exports:{}};return k[p].call(t.exports,t,t.exports,T),t.loaded=!0,t.exports}T.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),T.nmd=function(p){return p.paths=[],p.children||(p.children=[]),p};var _=T(1964);ee.exports=_})()},33576:function(ee,R,e){function M(oe,ie){for(var de=0;de<ie.length;de++){var Se=ie[de];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(oe,(_e=function(we,Ae){if(_(we)!=="object"||we===null)return we;var Oe=we[Symbol.toPrimitive];if(Oe!==void 0){var ze=Oe.call(we,"string");if(_(ze)!=="object")return ze;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(we)}(Se.key),_(_e)==="symbol"?_e:String(_e)),Se)}var _e}function k(oe){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},k(oe)}function o(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function T(oe,ie){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(de,Se){return de.__proto__=Se,de},T(oe,ie)}function _(oe){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},_(oe)}var p=e(59968),s=e(35984),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;R.Buffer=n,R.SlowBuffer=function(oe){return+oe!=oe&&(oe=0),n.alloc(+oe)},R.INSPECT_MAX_BYTES=50;var i=2147483647;function r(oe){if(oe>i)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var ie=new Uint8Array(oe);return Object.setPrototypeOf(ie,n.prototype),ie}function n(oe,ie,de){if(typeof oe=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(oe)}return a(oe,ie,de)}function a(oe,ie,de){if(typeof oe=="string")return function(we,Ae){if(typeof Ae=="string"&&Ae!==""||(Ae="utf8"),!n.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);var Oe=0|d(we,Ae),ze=r(Oe),pe=ze.write(we,Ae);return pe!==Oe&&(ze=ze.slice(0,pe)),ze}(oe,ie);if(ArrayBuffer.isView(oe))return function(we){if(ye(we,Uint8Array)){var Ae=new Uint8Array(we);return c(Ae.buffer,Ae.byteOffset,Ae.byteLength)}return h(we)}(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_(oe));if(ye(oe,ArrayBuffer)||oe&&ye(oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(oe,SharedArrayBuffer)||oe&&ye(oe.buffer,SharedArrayBuffer)))return c(oe,ie,de);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Se=oe.valueOf&&oe.valueOf();if(Se!=null&&Se!==oe)return n.from(Se,ie,de);var _e=function(we){if(n.isBuffer(we)){var Ae=0|x(we.length),Oe=r(Ae);return Oe.length===0||we.copy(Oe,0,0,Ae),Oe}return we.length!==void 0?typeof we.length!="number"||me(we.length)?r(0):h(we):we.type==="Buffer"&&Array.isArray(we.data)?h(we.data):void 0}(oe);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return n.from(oe[Symbol.toPrimitive]("string"),ie,de);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_(oe))}function l(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function u(oe){return l(oe),r(oe<0?0:0|x(oe))}function h(oe){for(var ie=oe.length<0?0:0|x(oe.length),de=r(ie),Se=0;Se<ie;Se+=1)de[Se]=255&oe[Se];return de}function c(oe,ie,de){if(ie<0||oe.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<ie+(de||0))throw new RangeError('"length" is outside of buffer bounds');var Se;return Se=ie===void 0&&de===void 0?new Uint8Array(oe):de===void 0?new Uint8Array(oe,ie):new Uint8Array(oe,ie,de),Object.setPrototypeOf(Se,n.prototype),Se}function x(oe){if(oe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|oe}function d(oe,ie){if(n.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||ye(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_(oe));var de=oe.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&de===0)return 0;for(var _e=!1;;)switch(ie){case"ascii":case"latin1":case"binary":return de;case"utf8":case"utf-8":return fe(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*de;case"hex":return de>>>1;case"base64":return he(oe).length;default:if(_e)return Se?-1:fe(oe).length;ie=(""+ie).toLowerCase(),_e=!0}}function v(oe,ie,de){var Se=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((de===void 0||de>this.length)&&(de=this.length),de<=0)||(de>>>=0)<=(ie>>>=0))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return I(this,ie,de);case"utf8":case"utf-8":return C(this,ie,de);case"ascii":return D(this,ie,de);case"latin1":case"binary":return U(this,ie,de);case"base64":return O(this,ie,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,ie,de);default:if(Se)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),Se=!0}}function g(oe,ie,de){var Se=oe[ie];oe[ie]=oe[de],oe[de]=Se}function y(oe,ie,de,Se,_e){if(oe.length===0)return-1;if(typeof de=="string"?(Se=de,de=0):de>2147483647?de=2147483647:de<-2147483648&&(de=-2147483648),me(de=+de)&&(de=_e?0:oe.length-1),de<0&&(de=oe.length+de),de>=oe.length){if(_e)return-1;de=oe.length-1}else if(de<0){if(!_e)return-1;de=0}if(typeof ie=="string"&&(ie=n.from(ie,Se)),n.isBuffer(ie))return ie.length===0?-1:m(oe,ie,de,Se,_e);if(typeof ie=="number")return ie&=255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(oe,ie,de):Uint8Array.prototype.lastIndexOf.call(oe,ie,de):m(oe,[ie],de,Se,_e);throw new TypeError("val must be string, number or Buffer")}function m(oe,ie,de,Se,_e){var we,Ae=1,Oe=oe.length,ze=ie.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(oe.length<2||ie.length<2)return-1;Ae=2,Oe/=2,ze/=2,de/=2}function pe(Ee,Be){return Ae===1?Ee[Be]:Ee.readUInt16BE(Be*Ae)}if(_e){var be=-1;for(we=de;we<Oe;we++)if(pe(oe,we)===pe(ie,be===-1?0:we-be)){if(be===-1&&(be=we),we-be+1===ze)return be*Ae}else be!==-1&&(we-=we-be),be=-1}else for(de+ze>Oe&&(de=Oe-ze),we=de;we>=0;we--){for(var ke=!0,Ie=0;Ie<ze;Ie++)if(pe(oe,we+Ie)!==pe(ie,Ie)){ke=!1;break}if(ke)return we}return-1}function b(oe,ie,de,Se){de=Number(de)||0;var _e=oe.length-de;Se?(Se=Number(Se))>_e&&(Se=_e):Se=_e;var we,Ae=ie.length;for(Se>Ae/2&&(Se=Ae/2),we=0;we<Se;++we){var Oe=parseInt(ie.substr(2*we,2),16);if(me(Oe))return we;oe[de+we]=Oe}return we}function f(oe,ie,de,Se){return ve(fe(ie,oe.length-de),oe,de,Se)}function S(oe,ie,de,Se){return ve(function(_e){for(var we=[],Ae=0;Ae<_e.length;++Ae)we.push(255&_e.charCodeAt(Ae));return we}(ie),oe,de,Se)}function w(oe,ie,de,Se){return ve(he(ie),oe,de,Se)}function E(oe,ie,de,Se){return ve(function(_e,we){for(var Ae,Oe,ze,pe=[],be=0;be<_e.length&&!((we-=2)<0);++be)Oe=(Ae=_e.charCodeAt(be))>>8,ze=Ae%256,pe.push(ze),pe.push(Oe);return pe}(ie,oe.length-de),oe,de,Se)}function O(oe,ie,de){return ie===0&&de===oe.length?p.fromByteArray(oe):p.fromByteArray(oe.slice(ie,de))}function C(oe,ie,de){de=Math.min(oe.length,de);for(var Se=[],_e=ie;_e<de;){var we=oe[_e],Ae=null,Oe=we>239?4:we>223?3:we>191?2:1;if(_e+Oe<=de){var ze=void 0,pe=void 0,be=void 0,ke=void 0;switch(Oe){case 1:we<128&&(Ae=we);break;case 2:(192&(ze=oe[_e+1]))==128&&(ke=(31&we)<<6|63&ze)>127&&(Ae=ke);break;case 3:ze=oe[_e+1],pe=oe[_e+2],(192&ze)==128&&(192&pe)==128&&(ke=(15&we)<<12|(63&ze)<<6|63&pe)>2047&&(ke<55296||ke>57343)&&(Ae=ke);break;case 4:ze=oe[_e+1],pe=oe[_e+2],be=oe[_e+3],(192&ze)==128&&(192&pe)==128&&(192&be)==128&&(ke=(15&we)<<18|(63&ze)<<12|(63&pe)<<6|63&be)>65535&&ke<1114112&&(Ae=ke)}}Ae===null?(Ae=65533,Oe=1):Ae>65535&&(Ae-=65536,Se.push(Ae>>>10&1023|55296),Ae=56320|1023&Ae),Se.push(Ae),_e+=Oe}return function(Ie){var Ee=Ie.length;if(Ee<=P)return String.fromCharCode.apply(String,Ie);for(var Be="",Ve=0;Ve<Ee;)Be+=String.fromCharCode.apply(String,Ie.slice(Ve,Ve+=P));return Be}(Se)}R.kMaxLength=i,n.TYPED_ARRAY_SUPPORT=function(){try{var oe=new Uint8Array(1),ie={foo:function(){return 42}};return Object.setPrototypeOf(ie,Uint8Array.prototype),Object.setPrototypeOf(oe,ie),oe.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(oe,ie,de){return a(oe,ie,de)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(oe,ie,de){return function(Se,_e,we){return l(Se),Se<=0?r(Se):_e!==void 0?typeof we=="string"?r(Se).fill(_e,we):r(Se).fill(_e):r(Se)}(oe,ie,de)},n.allocUnsafe=function(oe){return u(oe)},n.allocUnsafeSlow=function(oe){return u(oe)},n.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==n.prototype},n.compare=function(oe,ie){if(ye(oe,Uint8Array)&&(oe=n.from(oe,oe.offset,oe.byteLength)),ye(ie,Uint8Array)&&(ie=n.from(ie,ie.offset,ie.byteLength)),!n.isBuffer(oe)||!n.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===ie)return 0;for(var de=oe.length,Se=ie.length,_e=0,we=Math.min(de,Se);_e<we;++_e)if(oe[_e]!==ie[_e]){de=oe[_e],Se=ie[_e];break}return de<Se?-1:Se<de?1:0},n.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(oe,ie){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return n.alloc(0);var de;if(ie===void 0)for(ie=0,de=0;de<oe.length;++de)ie+=oe[de].length;var Se=n.allocUnsafe(ie),_e=0;for(de=0;de<oe.length;++de){var we=oe[de];if(ye(we,Uint8Array))_e+we.length>Se.length?(n.isBuffer(we)||(we=n.from(we)),we.copy(Se,_e)):Uint8Array.prototype.set.call(Se,we,_e);else{if(!n.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(Se,_e)}_e+=we.length}return Se},n.byteLength=d,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ie=0;ie<oe;ie+=2)g(this,ie,ie+1);return this},n.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ie=0;ie<oe;ie+=4)g(this,ie,ie+3),g(this,ie+1,ie+2);return this},n.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ie=0;ie<oe;ie+=8)g(this,ie,ie+7),g(this,ie+1,ie+6),g(this,ie+2,ie+5),g(this,ie+3,ie+4);return this},n.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?C(this,0,oe):v.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(oe){if(!n.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe||n.compare(this,oe)===0},n.prototype.inspect=function(){var oe="",ie=R.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(oe+=" ... "),"<Buffer "+oe+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(oe,ie,de,Se,_e){if(ye(oe,Uint8Array)&&(oe=n.from(oe,oe.offset,oe.byteLength)),!n.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_(oe));if(ie===void 0&&(ie=0),de===void 0&&(de=oe?oe.length:0),Se===void 0&&(Se=0),_e===void 0&&(_e=this.length),ie<0||de>oe.length||Se<0||_e>this.length)throw new RangeError("out of range index");if(Se>=_e&&ie>=de)return 0;if(Se>=_e)return-1;if(ie>=de)return 1;if(this===oe)return 0;for(var we=(_e>>>=0)-(Se>>>=0),Ae=(de>>>=0)-(ie>>>=0),Oe=Math.min(we,Ae),ze=this.slice(Se,_e),pe=oe.slice(ie,de),be=0;be<Oe;++be)if(ze[be]!==pe[be]){we=ze[be],Ae=pe[be];break}return we<Ae?-1:Ae<we?1:0},n.prototype.includes=function(oe,ie,de){return this.indexOf(oe,ie,de)!==-1},n.prototype.indexOf=function(oe,ie,de){return y(this,oe,ie,de,!0)},n.prototype.lastIndexOf=function(oe,ie,de){return y(this,oe,ie,de,!1)},n.prototype.write=function(oe,ie,de,Se){if(ie===void 0)Se="utf8",de=this.length,ie=0;else if(de===void 0&&typeof ie=="string")Se=ie,de=this.length,ie=0;else{if(!isFinite(ie))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ie>>>=0,isFinite(de)?(de>>>=0,Se===void 0&&(Se="utf8")):(Se=de,de=void 0)}var _e=this.length-ie;if((de===void 0||de>_e)&&(de=_e),oe.length>0&&(de<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var we=!1;;)switch(Se){case"hex":return b(this,oe,ie,de);case"utf8":case"utf-8":return f(this,oe,ie,de);case"ascii":case"latin1":case"binary":return S(this,oe,ie,de);case"base64":return w(this,oe,ie,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,oe,ie,de);default:if(we)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),we=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function D(oe,ie,de){var Se="";de=Math.min(oe.length,de);for(var _e=ie;_e<de;++_e)Se+=String.fromCharCode(127&oe[_e]);return Se}function U(oe,ie,de){var Se="";de=Math.min(oe.length,de);for(var _e=ie;_e<de;++_e)Se+=String.fromCharCode(oe[_e]);return Se}function I(oe,ie,de){var Se=oe.length;(!ie||ie<0)&&(ie=0),(!de||de<0||de>Se)&&(de=Se);for(var _e="",we=ie;we<de;++we)_e+=Me[oe[we]];return _e}function N(oe,ie,de){for(var Se=oe.slice(ie,de),_e="",we=0;we<Se.length-1;we+=2)_e+=String.fromCharCode(Se[we]+256*Se[we+1]);return _e}function W(oe,ie,de){if(oe%1!=0||oe<0)throw new RangeError("offset is not uint");if(oe+ie>de)throw new RangeError("Trying to access beyond buffer length")}function F(oe,ie,de,Se,_e,we){if(!n.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>_e||ie<we)throw new RangeError('"value" argument is out of bounds');if(de+Se>oe.length)throw new RangeError("Index out of range")}function j(oe,ie,de,Se,_e){re(ie,Se,_e,oe,de,7);var we=Number(ie&BigInt(4294967295));oe[de++]=we,we>>=8,oe[de++]=we,we>>=8,oe[de++]=we,we>>=8,oe[de++]=we;var Ae=Number(ie>>BigInt(32)&BigInt(4294967295));return oe[de++]=Ae,Ae>>=8,oe[de++]=Ae,Ae>>=8,oe[de++]=Ae,Ae>>=8,oe[de++]=Ae,de}function H(oe,ie,de,Se,_e){re(ie,Se,_e,oe,de,7);var we=Number(ie&BigInt(4294967295));oe[de+7]=we,we>>=8,oe[de+6]=we,we>>=8,oe[de+5]=we,we>>=8,oe[de+4]=we;var Ae=Number(ie>>BigInt(32)&BigInt(4294967295));return oe[de+3]=Ae,Ae>>=8,oe[de+2]=Ae,Ae>>=8,oe[de+1]=Ae,Ae>>=8,oe[de]=Ae,de+8}function te(oe,ie,de,Se,_e,we){if(de+Se>oe.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("Index out of range")}function Q(oe,ie,de,Se,_e){return ie=+ie,de>>>=0,_e||te(oe,0,de,4),s.write(oe,ie,de,Se,23,4),de+4}function $(oe,ie,de,Se,_e){return ie=+ie,de>>>=0,_e||te(oe,0,de,8),s.write(oe,ie,de,Se,52,8),de+8}n.prototype.slice=function(oe,ie){var de=this.length;(oe=~~oe)<0?(oe+=de)<0&&(oe=0):oe>de&&(oe=de),(ie=ie===void 0?de:~~ie)<0?(ie+=de)<0&&(ie=0):ie>de&&(ie=de),ie<oe&&(ie=oe);var Se=this.subarray(oe,ie);return Object.setPrototypeOf(Se,n.prototype),Se},n.prototype.readUintLE=n.prototype.readUIntLE=function(oe,ie,de){oe>>>=0,ie>>>=0,de||W(oe,ie,this.length);for(var Se=this[oe],_e=1,we=0;++we<ie&&(_e*=256);)Se+=this[oe+we]*_e;return Se},n.prototype.readUintBE=n.prototype.readUIntBE=function(oe,ie,de){oe>>>=0,ie>>>=0,de||W(oe,ie,this.length);for(var Se=this[oe+--ie],_e=1;ie>0&&(_e*=256);)Se+=this[oe+--ie]*_e;return Se},n.prototype.readUint8=n.prototype.readUInt8=function(oe,ie){return oe>>>=0,ie||W(oe,1,this.length),this[oe]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(oe,ie){return oe>>>=0,ie||W(oe,2,this.length),this[oe]|this[oe+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(oe,ie){return oe>>>=0,ie||W(oe,2,this.length),this[oe]<<8|this[oe+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+16777216*this[oe+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),16777216*this[oe]+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},n.prototype.readBigUInt64LE=Pe(function(oe){se(oe>>>=0,"offset");var ie=this[oe],de=this[oe+7];ie!==void 0&&de!==void 0||ae(oe,this.length-8);var Se=ie+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24),_e=this[++oe]+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+de*Math.pow(2,24);return BigInt(Se)+(BigInt(_e)<<BigInt(32))}),n.prototype.readBigUInt64BE=Pe(function(oe){se(oe>>>=0,"offset");var ie=this[oe],de=this[oe+7];ie!==void 0&&de!==void 0||ae(oe,this.length-8);var Se=ie*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe],_e=this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+de;return(BigInt(Se)<<BigInt(32))+BigInt(_e)}),n.prototype.readIntLE=function(oe,ie,de){oe>>>=0,ie>>>=0,de||W(oe,ie,this.length);for(var Se=this[oe],_e=1,we=0;++we<ie&&(_e*=256);)Se+=this[oe+we]*_e;return Se>=(_e*=128)&&(Se-=Math.pow(2,8*ie)),Se},n.prototype.readIntBE=function(oe,ie,de){oe>>>=0,ie>>>=0,de||W(oe,ie,this.length);for(var Se=ie,_e=1,we=this[oe+--Se];Se>0&&(_e*=256);)we+=this[oe+--Se]*_e;return we>=(_e*=128)&&(we-=Math.pow(2,8*ie)),we},n.prototype.readInt8=function(oe,ie){return oe>>>=0,ie||W(oe,1,this.length),128&this[oe]?-1*(255-this[oe]+1):this[oe]},n.prototype.readInt16LE=function(oe,ie){oe>>>=0,ie||W(oe,2,this.length);var de=this[oe]|this[oe+1]<<8;return 32768&de?4294901760|de:de},n.prototype.readInt16BE=function(oe,ie){oe>>>=0,ie||W(oe,2,this.length);var de=this[oe+1]|this[oe]<<8;return 32768&de?4294901760|de:de},n.prototype.readInt32LE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},n.prototype.readInt32BE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},n.prototype.readBigInt64LE=Pe(function(oe){se(oe>>>=0,"offset");var ie=this[oe],de=this[oe+7];ie!==void 0&&de!==void 0||ae(oe,this.length-8);var Se=this[oe+4]+this[oe+5]*Math.pow(2,8)+this[oe+6]*Math.pow(2,16)+(de<<24);return(BigInt(Se)<<BigInt(32))+BigInt(ie+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24))}),n.prototype.readBigInt64BE=Pe(function(oe){se(oe>>>=0,"offset");var ie=this[oe],de=this[oe+7];ie!==void 0&&de!==void 0||ae(oe,this.length-8);var Se=(ie<<24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe];return(BigInt(Se)<<BigInt(32))+BigInt(this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+de)}),n.prototype.readFloatLE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),s.read(this,oe,!0,23,4)},n.prototype.readFloatBE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),s.read(this,oe,!1,23,4)},n.prototype.readDoubleLE=function(oe,ie){return oe>>>=0,ie||W(oe,8,this.length),s.read(this,oe,!0,52,8)},n.prototype.readDoubleBE=function(oe,ie){return oe>>>=0,ie||W(oe,8,this.length),s.read(this,oe,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(oe,ie,de,Se){oe=+oe,ie>>>=0,de>>>=0,Se||F(this,oe,ie,de,Math.pow(2,8*de)-1,0);var _e=1,we=0;for(this[ie]=255&oe;++we<de&&(_e*=256);)this[ie+we]=oe/_e&255;return ie+de},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(oe,ie,de,Se){oe=+oe,ie>>>=0,de>>>=0,Se||F(this,oe,ie,de,Math.pow(2,8*de)-1,0);var _e=de-1,we=1;for(this[ie+_e]=255&oe;--_e>=0&&(we*=256);)this[ie+_e]=oe/we&255;return ie+de},n.prototype.writeUint8=n.prototype.writeUInt8=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,1,255,0),this[ie]=255&oe,ie+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,2,65535,0),this[ie]=255&oe,this[ie+1]=oe>>>8,ie+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,2,65535,0),this[ie]=oe>>>8,this[ie+1]=255&oe,ie+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,4,4294967295,0),this[ie+3]=oe>>>24,this[ie+2]=oe>>>16,this[ie+1]=oe>>>8,this[ie]=255&oe,ie+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,4,4294967295,0),this[ie]=oe>>>24,this[ie+1]=oe>>>16,this[ie+2]=oe>>>8,this[ie+3]=255&oe,ie+4},n.prototype.writeBigUInt64LE=Pe(function(oe){return j(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Pe(function(oe){return H(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(oe,ie,de,Se){if(oe=+oe,ie>>>=0,!Se){var _e=Math.pow(2,8*de-1);F(this,oe,ie,de,_e-1,-_e)}var we=0,Ae=1,Oe=0;for(this[ie]=255&oe;++we<de&&(Ae*=256);)oe<0&&Oe===0&&this[ie+we-1]!==0&&(Oe=1),this[ie+we]=(oe/Ae>>0)-Oe&255;return ie+de},n.prototype.writeIntBE=function(oe,ie,de,Se){if(oe=+oe,ie>>>=0,!Se){var _e=Math.pow(2,8*de-1);F(this,oe,ie,de,_e-1,-_e)}var we=de-1,Ae=1,Oe=0;for(this[ie+we]=255&oe;--we>=0&&(Ae*=256);)oe<0&&Oe===0&&this[ie+we+1]!==0&&(Oe=1),this[ie+we]=(oe/Ae>>0)-Oe&255;return ie+de},n.prototype.writeInt8=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,1,127,-128),oe<0&&(oe=255+oe+1),this[ie]=255&oe,ie+1},n.prototype.writeInt16LE=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,2,32767,-32768),this[ie]=255&oe,this[ie+1]=oe>>>8,ie+2},n.prototype.writeInt16BE=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,2,32767,-32768),this[ie]=oe>>>8,this[ie+1]=255&oe,ie+2},n.prototype.writeInt32LE=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,4,2147483647,-2147483648),this[ie]=255&oe,this[ie+1]=oe>>>8,this[ie+2]=oe>>>16,this[ie+3]=oe>>>24,ie+4},n.prototype.writeInt32BE=function(oe,ie,de){return oe=+oe,ie>>>=0,de||F(this,oe,ie,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[ie]=oe>>>24,this[ie+1]=oe>>>16,this[ie+2]=oe>>>8,this[ie+3]=255&oe,ie+4},n.prototype.writeBigInt64LE=Pe(function(oe){return j(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Pe(function(oe){return H(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(oe,ie,de){return Q(this,oe,ie,!0,de)},n.prototype.writeFloatBE=function(oe,ie,de){return Q(this,oe,ie,!1,de)},n.prototype.writeDoubleLE=function(oe,ie,de){return $(this,oe,ie,!0,de)},n.prototype.writeDoubleBE=function(oe,ie,de){return $(this,oe,ie,!1,de)},n.prototype.copy=function(oe,ie,de,Se){if(!n.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(de||(de=0),Se||Se===0||(Se=this.length),ie>=oe.length&&(ie=oe.length),ie||(ie=0),Se>0&&Se<de&&(Se=de),Se===de||oe.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),oe.length-ie<Se-de&&(Se=oe.length-ie+de);var _e=Se-de;return this===oe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ie,de,Se):Uint8Array.prototype.set.call(oe,this.subarray(de,Se),ie),_e},n.prototype.fill=function(oe,ie,de,Se){if(typeof oe=="string"){if(typeof ie=="string"?(Se=ie,ie=0,de=this.length):typeof de=="string"&&(Se=de,de=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!n.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(oe.length===1){var _e=oe.charCodeAt(0);(Se==="utf8"&&_e<128||Se==="latin1")&&(oe=_e)}}else typeof oe=="number"?oe&=255:typeof oe=="boolean"&&(oe=Number(oe));if(ie<0||this.length<ie||this.length<de)throw new RangeError("Out of range index");if(de<=ie)return this;var we;if(ie>>>=0,de=de===void 0?this.length:de>>>0,oe||(oe=0),typeof oe=="number")for(we=ie;we<de;++we)this[we]=oe;else{var Ae=n.isBuffer(oe)?oe:n.from(oe,Se),Oe=Ae.length;if(Oe===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(we=0;we<de-ie;++we)this[we+ie]=Ae[we%Oe]}return this};var K={};function X(oe,ie,de){K[oe]=function(Se){function _e(){var Oe;return function(ze,pe){if(!(ze instanceof pe))throw new TypeError("Cannot call a class as a function")}(this,_e),Oe=function(ze,pe,be){return pe=k(pe),function(ke,Ie){if(Ie&&(_(Ie)==="object"||typeof Ie=="function"))return Ie;if(Ie!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(ke)}(ze,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(pe,[],k(ze).constructor):pe.apply(ze,be))}(this,_e),Object.defineProperty(o(Oe),"message",{value:ie.apply(o(Oe),arguments),writable:!0,configurable:!0}),Oe.name="".concat(Oe.name," [").concat(oe,"]"),Oe.stack,delete Oe.name,Oe}var we,Ae;return function(Oe,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function");Oe.prototype=Object.create(ze&&ze.prototype,{constructor:{value:Oe,writable:!0,configurable:!0}}),Object.defineProperty(Oe,"prototype",{writable:!1}),ze&&T(Oe,ze)}(_e,Se),we=_e,(Ae=[{key:"code",get:function(){return oe},set:function(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(oe,"]: ").concat(this.message)}}])&&M(we.prototype,Ae),Object.defineProperty(we,"prototype",{writable:!1}),_e}(de)}function Y(oe){for(var ie="",de=oe.length,Se=oe[0]==="-"?1:0;de>=Se+4;de-=3)ie="_".concat(oe.slice(de-3,de)).concat(ie);return"".concat(oe.slice(0,de)).concat(ie)}function re(oe,ie,de,Se,_e,we){if(oe>de||oe<ie){var Ae,Oe=typeof ie=="bigint"?"n":"";throw Ae=ie===0||ie===BigInt(0)?">= 0".concat(Oe," and < 2").concat(Oe," ** ").concat(8*(we+1)).concat(Oe):">= -(2".concat(Oe," ** ").concat(8*(we+1)-1).concat(Oe,") and < 2 ** ")+"".concat(8*(we+1)-1).concat(Oe),new K.ERR_OUT_OF_RANGE("value",Ae,oe)}(function(ze,pe,be){se(pe,"offset"),ze[pe]!==void 0&&ze[pe+be]!==void 0||ae(pe,ze.length-(be+1))})(Se,_e,we)}function se(oe,ie){if(typeof oe!="number")throw new K.ERR_INVALID_ARG_TYPE(ie,"number",oe)}function ae(oe,ie,de){throw Math.floor(oe)!==oe?(se(oe,de),new K.ERR_OUT_OF_RANGE("offset","an integer",oe)):ie<0?new K.ERR_BUFFER_OUT_OF_BOUNDS:new K.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(ie),oe)}X("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?"".concat(oe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),X("ERR_INVALID_ARG_TYPE",function(oe,ie){return'The "'.concat(oe,'" argument must be of type number. Received type ').concat(_(ie))},TypeError),X("ERR_OUT_OF_RANGE",function(oe,ie,de){var Se='The value of "'.concat(oe,'" is out of range.'),_e=de;return Number.isInteger(de)&&Math.abs(de)>Math.pow(2,32)?_e=Y(String(de)):typeof de=="bigint"&&(_e=String(de),(de>Math.pow(BigInt(2),BigInt(32))||de<-Math.pow(BigInt(2),BigInt(32)))&&(_e=Y(_e)),_e+="n"),Se+" It must be ".concat(ie,". Received ").concat(_e)},RangeError);var ce=/[^+/0-9A-Za-z-_]/g;function fe(oe,ie){var de;ie=ie||1/0;for(var Se=oe.length,_e=null,we=[],Ae=0;Ae<Se;++Ae){if((de=oe.charCodeAt(Ae))>55295&&de<57344){if(!_e){if(de>56319){(ie-=3)>-1&&we.push(239,191,189);continue}if(Ae+1===Se){(ie-=3)>-1&&we.push(239,191,189);continue}_e=de;continue}if(de<56320){(ie-=3)>-1&&we.push(239,191,189),_e=de;continue}de=65536+(_e-55296<<10|de-56320)}else _e&&(ie-=3)>-1&&we.push(239,191,189);if(_e=null,de<128){if((ie-=1)<0)break;we.push(de)}else if(de<2048){if((ie-=2)<0)break;we.push(de>>6|192,63&de|128)}else if(de<65536){if((ie-=3)<0)break;we.push(de>>12|224,de>>6&63|128,63&de|128)}else{if(!(de<1114112))throw new Error("Invalid code point");if((ie-=4)<0)break;we.push(de>>18|240,de>>12&63|128,de>>6&63|128,63&de|128)}}return we}function he(oe){return p.toByteArray(function(ie){if((ie=(ie=ie.split("=")[0]).trim().replace(ce,"")).length<2)return"";for(;ie.length%4!=0;)ie+="=";return ie}(oe))}function ve(oe,ie,de,Se){var _e;for(_e=0;_e<Se&&!(_e+de>=ie.length||_e>=oe.length);++_e)ie[_e+de]=oe[_e];return _e}function ye(oe,ie){return oe instanceof ie||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===ie.name}function me(oe){return oe!=oe}var Me=function(){for(var oe="0123456789abcdef",ie=new Array(256),de=0;de<16;++de)for(var Se=16*de,_e=0;_e<16;++_e)ie[Se+_e]=oe[de]+oe[_e];return ie}();function Pe(oe){return typeof BigInt>"u"?ge:oe}function ge(){throw new Error("BigInt not supported")}},25928:function(ee){ee.exports=k,ee.exports.isMobile=k,ee.exports.default=k;var R=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,M=/android|ipad|playbook|silk/i;function k(o){o||(o={});var T=o.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var _=R.test(T)&&!e.test(T)||!!o.tablet&&M.test(T);return!_&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(_=!0),_}},48932:function(ee,R,e){e.r(R),e.d(R,{sankeyCenter:function(){return r},sankeyCircular:function(){return O},sankeyJustify:function(){return i},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var M=e(84706),k=e(34712),o=e(10132),T=e(6688),_=e.n(T);function p(ve){return ve.target.depth}function s(ve){return ve.depth}function t(ve,ye){return ye-1-ve.height}function i(ve,ye){return ve.sourceLinks.length?ve.depth:ye-1}function r(ve){return ve.targetLinks.length?ve.depth:ve.sourceLinks.length?(0,M.SY)(ve.sourceLinks,p)-1:0}function n(ve){return function(){return ve}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve};function l(ve,ye){return h(ve.source,ye.source)||ve.index-ye.index}function u(ve,ye){return h(ve.target,ye.target)||ve.index-ye.index}function h(ve,ye){return ve.partOfCycle===ye.partOfCycle?ve.y0-ye.y0:ve.circularLinkType==="top"||ye.circularLinkType==="bottom"?-1:1}function c(ve){return ve.value}function x(ve){return(ve.y0+ve.y1)/2}function d(ve){return x(ve.source)}function v(ve){return x(ve.target)}function g(ve){return ve.index}function y(ve){return ve.nodes}function m(ve){return ve.links}function b(ve,ye){var me=ve.get(ye);if(!me)throw new Error("missing: "+ye);return me}function f(ve,ye){return ye(ve)}var S=25,w=10,E=.3;function O(){var ve,ye,me=0,Me=0,Pe=1,ge=1,oe=24,ie=g,de=i,Se=y,_e=m,we=32,Ae=2,Oe=null;function ze(){var be={nodes:Se.apply(null,arguments),links:_e.apply(null,arguments)};(function(Ie){Ie.nodes.forEach(function(Be,Ve){Be.index=Ve,Be.sourceLinks=[],Be.targetLinks=[]});var Ee=(0,k.kH)(Ie.nodes,ie);Ie.links.forEach(function(Be,Ve){Be.index=Ve;var Ze=Be.source,rt=Be.target;(Ze===void 0?"undefined":a(Ze))!=="object"&&(Ze=Be.source=b(Ee,Ze)),(rt===void 0?"undefined":a(rt))!=="object"&&(rt=Be.target=b(Ee,rt)),Ze.sourceLinks.push(Be),rt.targetLinks.push(Be)})})(be),function(Ie,Ee,Be){var Ve=0;if(Be===null){for(var Ze=[],rt=0;rt<Ie.links.length;rt++){var it=Ie.links[rt],dt=it.source.index,vt=it.target.index;Ze[dt]||(Ze[dt]=[]),Ze[vt]||(Ze[vt]=[]),Ze[dt].indexOf(vt)===-1&&Ze[dt].push(vt)}var ht=_()(Ze);ht.sort(function(Tt,Ot){return Tt.length-Ot.length});var Qe={};for(rt=0;rt<ht.length;rt++){var Je=ht[rt].slice(-2);Qe[Je[0]]||(Qe[Je[0]]={}),Qe[Je[0]][Je[1]]=!0}Ie.links.forEach(function(Tt){var Ot=Tt.target.index,Pt=Tt.source.index;Ot===Pt||Qe[Pt]&&Qe[Pt][Ot]?(Tt.circular=!0,Tt.circularLinkID=Ve,Ve+=1):Tt.circular=!1})}else Ie.links.forEach(function(Tt){Tt.source[Be]<Tt.target[Be]?Tt.circular=!1:(Tt.circular=!0,Tt.circularLinkID=Ve,Ve+=1)})}(be,0,Oe),function(Ie){Ie.nodes.forEach(function(Ee){Ee.partOfCycle=!1,Ee.value=Math.max((0,M.oh)(Ee.sourceLinks,c),(0,M.oh)(Ee.targetLinks,c)),Ee.sourceLinks.forEach(function(Be){Be.circular&&(Ee.partOfCycle=!0,Ee.circularLinkType=Be.circularLinkType)}),Ee.targetLinks.forEach(function(Be){Be.circular&&(Ee.partOfCycle=!0,Ee.circularLinkType=Be.circularLinkType)})})}(be),function(Ie){var Ee,Be,Ve;for(Ee=Ie.nodes,Be=[],Ve=0;Ee.length;++Ve,Ee=Be,Be=[])Ee.forEach(function(Ze){Ze.depth=Ve,Ze.sourceLinks.forEach(function(rt){Be.indexOf(rt.target)<0&&!rt.circular&&Be.push(rt.target)})});for(Ee=Ie.nodes,Be=[],Ve=0;Ee.length;++Ve,Ee=Be,Be=[])Ee.forEach(function(Ze){Ze.height=Ve,Ze.targetLinks.forEach(function(rt){Be.indexOf(rt.source)<0&&!rt.circular&&Be.push(rt.source)})});Ie.nodes.forEach(function(Ze){Ze.column=Math.floor(de.call(null,Ze,Ve))})}(be),C(be,ie),function(Ie,Ee,Be){var Ve=(0,k.UJ)().key(function(vt){return vt.column}).sortKeys(M.XE).entries(Ie.nodes).map(function(vt){return vt.values});(function(vt){if(ye){var ht=1/0;Ve.forEach(function(Ot){var Pt=ge*ye/(Ot.length+1);ht=Pt<ht?Pt:ht}),ve=ht}var Qe=(0,M.SY)(Ve,function(Ot){return(ge-Me-(Ot.length-1)*ve)/(0,M.oh)(Ot,c)});Qe*=E,Ie.links.forEach(function(Ot){Ot.width=Ot.value*Qe});var Je=function(Ot){var Pt=0,Mt=0,He=0,Ye=0,Ne=(0,M.kv)(Ot.nodes,function(We){return We.column});return Ot.links.forEach(function(We){We.circular&&(We.circularLinkType=="top"?Pt+=We.width:Mt+=We.width,We.target.column==0&&(Ye+=We.width),We.source.column==Ne&&(He+=We.width))}),{top:Pt=Pt>0?Pt+S+w:Pt,bottom:Mt=Mt>0?Mt+S+w:Mt,left:Ye=Ye>0?Ye+S+w:Ye,right:He=He>0?He+S+w:He}}(Ie),Tt=function(Ot,Pt){var Mt=(0,M.kv)(Ot.nodes,function(ot){return ot.column}),He=Pe-me,Ye=ge-Me,Ne=He/(He+Pt.right+Pt.left),We=Ye/(Ye+Pt.top+Pt.bottom);return me=me*Ne+Pt.left,Pe=Pt.right==0?Pe:Pe*Ne,Me=Me*We+Pt.top,ge*=We,Ot.nodes.forEach(function(ot){ot.x0=me+ot.column*((Pe-me-oe)/Mt),ot.x1=ot.x0+oe}),We}(Ie,Je);Qe*=Tt,Ie.links.forEach(function(Ot){Ot.width=Ot.value*Qe}),Ve.forEach(function(Ot){var Pt=Ot.length;Ot.forEach(function(Mt,He){Mt.depth==Ve.length-1&&Pt==1||Mt.depth==0&&Pt==1?(Mt.y0=ge/2-Mt.value*Qe,Mt.y1=Mt.y0+Mt.value*Qe):Mt.partOfCycle?D(Mt,vt)==0?(Mt.y0=ge/2+He,Mt.y1=Mt.y0+Mt.value*Qe):Mt.circularLinkType=="top"?(Mt.y0=Me+He,Mt.y1=Mt.y0+Mt.value*Qe):(Mt.y0=ge-Mt.value*Qe-He,Mt.y1=Mt.y0+Mt.value*Qe):Je.top==0||Je.bottom==0?(Mt.y0=(ge-Me)/Pt*He,Mt.y1=Mt.y0+Mt.value*Qe):(Mt.y0=(ge-Me)/2-Pt/2+He,Mt.y1=Mt.y0+Mt.value*Qe)})})})(Be),dt();for(var Ze=1,rt=Ee;rt>0;--rt)it(Ze*=.99,Be),dt();function it(vt,ht){var Qe=Ve.length;Ve.forEach(function(Je){var Tt=Je.length,Ot=Je[0].depth;Je.forEach(function(Pt){var Mt;if((Pt.sourceLinks.length||Pt.targetLinks.length)&&!(Pt.partOfCycle&&D(Pt,ht)>0))if(Ot==0&&Tt==1)Mt=Pt.y1-Pt.y0,Pt.y0=ge/2-Mt/2,Pt.y1=ge/2+Mt/2;else if(Ot==Qe-1&&Tt==1)Mt=Pt.y1-Pt.y0,Pt.y0=ge/2-Mt/2,Pt.y1=ge/2+Mt/2;else{var He=(0,M.mo)(Pt.sourceLinks,v),Ye=(0,M.mo)(Pt.targetLinks,d),Ne=((He&&Ye?(He+Ye)/2:He||Ye)-x(Pt))*vt;Pt.y0+=Ne,Pt.y1+=Ne}})})}function dt(){Ve.forEach(function(vt){var ht,Qe,Je,Tt=Me,Ot=vt.length;for(vt.sort(h),Je=0;Je<Ot;++Je)(Qe=Tt-(ht=vt[Je]).y0)>0&&(ht.y0+=Qe,ht.y1+=Qe),Tt=ht.y1+ve;if((Qe=Tt-ve-ge)>0)for(Tt=ht.y0-=Qe,ht.y1-=Qe,Je=Ot-2;Je>=0;--Je)(Qe=(ht=vt[Je]).y1+ve-Tt)>0&&(ht.y0-=Qe,ht.y1-=Qe),Tt=ht.y0})}}(be,we,ie),pe(be);for(var ke=0;ke<4;ke++)se(be,ge,ie),ae(be,0,ie),Y(be,Me,ge,ie),se(be,ge,ie),ae(be,0,ie);return function(Ie,Ee,Be){var Ve=Ie.nodes,Ze=Ie.links,rt=!1,it=!1;if(Ze.forEach(function(ht){ht.circularLinkType=="top"?rt=!0:ht.circularLinkType=="bottom"&&(it=!0)}),rt==0||it==0){var dt=(0,M.SY)(Ve,function(ht){return ht.y0}),vt=(Be-Ee)/((0,M.kv)(Ve,function(ht){return ht.y1})-dt);Ve.forEach(function(ht){var Qe=(ht.y1-ht.y0)*vt;ht.y0=(ht.y0-dt)*vt,ht.y1=ht.y0+Qe}),Ze.forEach(function(ht){ht.y0=(ht.y0-dt)*vt,ht.y1=(ht.y1-dt)*vt,ht.width=ht.width*vt})}}(be,Me,ge),N(be,Ae,ge,ie),be}function pe(be){be.nodes.forEach(function(ke){ke.sourceLinks.sort(u),ke.targetLinks.sort(l)}),be.nodes.forEach(function(ke){var Ie=ke.y0,Ee=Ie,Be=ke.y1,Ve=Be;ke.sourceLinks.forEach(function(Ze){Ze.circular?(Ze.y0=Be-Ze.width/2,Be-=Ze.width):(Ze.y0=Ie+Ze.width/2,Ie+=Ze.width)}),ke.targetLinks.forEach(function(Ze){Ze.circular?(Ze.y1=Ve-Ze.width/2,Ve-=Ze.width):(Ze.y1=Ee+Ze.width/2,Ee+=Ze.width)})})}return ze.nodeId=function(be){return arguments.length?(ie=typeof be=="function"?be:n(be),ze):ie},ze.nodeAlign=function(be){return arguments.length?(de=typeof be=="function"?be:n(be),ze):de},ze.nodeWidth=function(be){return arguments.length?(oe=+be,ze):oe},ze.nodePadding=function(be){return arguments.length?(ve=+be,ze):ve},ze.nodes=function(be){return arguments.length?(Se=typeof be=="function"?be:n(be),ze):Se},ze.links=function(be){return arguments.length?(_e=typeof be=="function"?be:n(be),ze):_e},ze.size=function(be){return arguments.length?(me=Me=0,Pe=+be[0],ge=+be[1],ze):[Pe-me,ge-Me]},ze.extent=function(be){return arguments.length?(me=+be[0][0],Pe=+be[1][0],Me=+be[0][1],ge=+be[1][1],ze):[[me,Me],[Pe,ge]]},ze.iterations=function(be){return arguments.length?(we=+be,ze):we},ze.circularLinkGap=function(be){return arguments.length?(Ae=+be,ze):Ae},ze.nodePaddingRatio=function(be){return arguments.length?(ye=+be,ze):ye},ze.sortNodes=function(be){return arguments.length?(Oe=be,ze):Oe},ze.update=function(be){return C(be,ie),pe(be),be.links.forEach(function(ke){ke.circular&&(ke.circularLinkType=ke.y0+ke.y1<ge?"top":"bottom",ke.source.circularLinkType=ke.circularLinkType,ke.target.circularLinkType=ke.circularLinkType)}),se(be,ge,ie,!1),ae(be,0,ie),N(be,Ae,ge,ie),be},ze}function C(ve,ye){var me=0,Me=0;ve.links.forEach(function(Pe){Pe.circular&&(Pe.source.circularLinkType||Pe.target.circularLinkType?Pe.circularLinkType=Pe.source.circularLinkType?Pe.source.circularLinkType:Pe.target.circularLinkType:Pe.circularLinkType=me<Me?"top":"bottom",Pe.circularLinkType=="top"?me+=1:Me+=1,ve.nodes.forEach(function(ge){f(ge,ye)!=f(Pe.source,ye)&&f(ge,ye)!=f(Pe.target,ye)||(ge.circularLinkType=Pe.circularLinkType)}))}),ve.links.forEach(function(Pe){Pe.circular&&(Pe.source.circularLinkType==Pe.target.circularLinkType&&(Pe.circularLinkType=Pe.source.circularLinkType),he(Pe,ye)&&(Pe.circularLinkType=Pe.source.circularLinkType))})}function P(ve){var ye=Math.abs(ve.y1-ve.y0),me=Math.abs(ve.target.x0-ve.source.x1);return Math.atan(me/ye)}function D(ve,ye){var me=0;ve.sourceLinks.forEach(function(Pe){me=Pe.circular&&!he(Pe,ye)?me+1:me});var Me=0;return ve.targetLinks.forEach(function(Pe){Me=Pe.circular&&!he(Pe,ye)?Me+1:Me}),me+Me}function U(ve){var ye=ve.source.sourceLinks,me=0;ye.forEach(function(ge){me=ge.circular?me+1:me});var Me=ve.target.targetLinks,Pe=0;return Me.forEach(function(ge){Pe=ge.circular?Pe+1:Pe}),!(me>1||Pe>1)}function I(ve,ye,me){return ve.sort(W),ve.forEach(function(Me,Pe){var ge,oe,ie=0;if(he(Me,me)&&U(Me))Me.circularPathData.verticalBuffer=ie+Me.width/2;else{for(var de=0;de<Pe;de++)if(ge=ve[Pe],oe=ve[de],!(ge.source.column<oe.target.column||ge.target.column>oe.source.column)){var Se=ve[de].circularPathData.verticalBuffer+ve[de].width/2+ye;ie=Se>ie?Se:ie}Me.circularPathData.verticalBuffer=ie+Me.width/2}}),ve}function N(ve,ye,me,Me){var Pe=(0,M.SY)(ve.links,function(ge){return ge.source.y0});ve.links.forEach(function(ge){ge.circular&&(ge.circularPathData={})}),I(ve.links.filter(function(ge){return ge.circularLinkType=="top"}),ye,Me),I(ve.links.filter(function(ge){return ge.circularLinkType=="bottom"}),ye,Me),ve.links.forEach(function(ge){if(ge.circular){if(ge.circularPathData.arcRadius=ge.width+w,ge.circularPathData.leftNodeBuffer=5,ge.circularPathData.rightNodeBuffer=5,ge.circularPathData.sourceWidth=ge.source.x1-ge.source.x0,ge.circularPathData.sourceX=ge.source.x0+ge.circularPathData.sourceWidth,ge.circularPathData.targetX=ge.target.x0,ge.circularPathData.sourceY=ge.y0,ge.circularPathData.targetY=ge.y1,he(ge,Me)&&U(ge))ge.circularPathData.leftSmallArcRadius=w+ge.width/2,ge.circularPathData.leftLargeArcRadius=w+ge.width/2,ge.circularPathData.rightSmallArcRadius=w+ge.width/2,ge.circularPathData.rightLargeArcRadius=w+ge.width/2,ge.circularLinkType=="bottom"?(ge.circularPathData.verticalFullExtent=ge.source.y1+S+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=ge.source.y0-S-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius);else{var oe=ge.source.column,ie=ge.circularLinkType,de=ve.links.filter(function(we){return we.source.column==oe&&we.circularLinkType==ie});ge.circularLinkType=="bottom"?de.sort(j):de.sort(F);var Se=0;de.forEach(function(we,Ae){we.circularLinkID==ge.circularLinkID&&(ge.circularPathData.leftSmallArcRadius=w+ge.width/2+Se,ge.circularPathData.leftLargeArcRadius=w+ge.width/2+Ae*ye+Se),Se+=we.width}),oe=ge.target.column,de=ve.links.filter(function(we){return we.target.column==oe&&we.circularLinkType==ie}),ge.circularLinkType=="bottom"?de.sort(te):de.sort(H),Se=0,de.forEach(function(we,Ae){we.circularLinkID==ge.circularLinkID&&(ge.circularPathData.rightSmallArcRadius=w+ge.width/2+Se,ge.circularPathData.rightLargeArcRadius=w+ge.width/2+Ae*ye+Se),Se+=we.width}),ge.circularLinkType=="bottom"?(ge.circularPathData.verticalFullExtent=Math.max(me,ge.source.y1,ge.target.y1)+S+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=Pe-S-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius)}ge.circularPathData.leftInnerExtent=ge.circularPathData.sourceX+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightInnerExtent=ge.circularPathData.targetX-ge.circularPathData.rightNodeBuffer,ge.circularPathData.leftFullExtent=ge.circularPathData.sourceX+ge.circularPathData.leftLargeArcRadius+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightFullExtent=ge.circularPathData.targetX-ge.circularPathData.rightLargeArcRadius-ge.circularPathData.rightNodeBuffer}if(ge.circular)ge.path=function(we){return we.circularLinkType=="top"?"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 0 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY-we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 0 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 0 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY-we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 0 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY:"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 1 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY+we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 1 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 1 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY+we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 1 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY}(ge);else{var _e=(0,o.ak)().source(function(we){return[we.source.x0+(we.source.x1-we.source.x0),we.y0]}).target(function(we){return[we.target.x0,we.y1]});ge.path=_e(ge)}})}function W(ve,ye){return Q(ve)==Q(ye)?ve.circularLinkType=="bottom"?j(ve,ye):F(ve,ye):Q(ye)-Q(ve)}function F(ve,ye){return ve.y0-ye.y0}function j(ve,ye){return ye.y0-ve.y0}function H(ve,ye){return ve.y1-ye.y1}function te(ve,ye){return ye.y1-ve.y1}function Q(ve){return ve.target.column-ve.source.column}function $(ve){return ve.target.x0-ve.source.x1}function K(ve,ye){var me=P(ve),Me=$(ye)/Math.tan(me);return fe(ve)=="up"?ve.y1+Me:ve.y1-Me}function X(ve,ye){var me=P(ve),Me=$(ye)/Math.tan(me);return fe(ve)=="up"?ve.y1-Me:ve.y1+Me}function Y(ve,ye,me,Me){ve.links.forEach(function(Pe){if(!Pe.circular&&Pe.target.column-Pe.source.column>1){var ge=Pe.source.column+1,oe=Pe.target.column-1,ie=1,de=oe-ge+1;for(ie=1;ge<=oe;ge++,ie++)ve.nodes.forEach(function(Se){if(Se.column==ge){var _e,we=ie/(de+1),Ae=Math.pow(1-we,3),Oe=3*we*Math.pow(1-we,2),ze=3*Math.pow(we,2)*(1-we),pe=Math.pow(we,3),be=Ae*Pe.y0+Oe*Pe.y0+ze*Pe.y1+pe*Pe.y1,ke=be-Pe.width/2,Ie=be+Pe.width/2;ke>Se.y0&&ke<Se.y1?(_e=Se.y1-ke+10,_e=Se.circularLinkType=="bottom"?_e:-_e,Se=re(Se,_e,ye,me),ve.nodes.forEach(function(Ee){var Be,Ve;f(Ee,Me)!=f(Se,Me)&&Ee.column==Se.column&&(Ve=Ee,(Be=Se).y0>Ve.y0&&Be.y0<Ve.y1||Be.y1>Ve.y0&&Be.y1<Ve.y1||Be.y0<Ve.y0&&Be.y1>Ve.y1)&&re(Ee,_e,ye,me)})):(Ie>Se.y0&&Ie<Se.y1||ke<Se.y0&&Ie>Se.y1)&&(_e=Ie-Se.y0+10,Se=re(Se,_e,ye,me),ve.nodes.forEach(function(Ee){f(Ee,Me)!=f(Se,Me)&&Ee.column==Se.column&&Ee.y0<Se.y1&&Ee.y1>Se.y1&&re(Ee,_e,ye,me)}))}})}})}function re(ve,ye,me,Me){return ve.y0+ye>=me&&ve.y1+ye<=Me&&(ve.y0=ve.y0+ye,ve.y1=ve.y1+ye,ve.targetLinks.forEach(function(Pe){Pe.y1=Pe.y1+ye}),ve.sourceLinks.forEach(function(Pe){Pe.y0=Pe.y0+ye})),ve}function se(ve,ye,me,Me){ve.nodes.forEach(function(Pe){Me&&Pe.y+(Pe.y1-Pe.y0)>ye&&(Pe.y=Pe.y-(Pe.y+(Pe.y1-Pe.y0)-ye));var ge=ve.links.filter(function(de){return f(de.source,me)==f(Pe,me)}),oe=ge.length;oe>1&&ge.sort(function(de,Se){if(!de.circular&&!Se.circular){if(de.target.column==Se.target.column||!ce(de,Se))return de.y1-Se.y1;if(de.target.column>Se.target.column){var _e=X(Se,de);return de.y1-_e}if(Se.target.column>de.target.column)return X(de,Se)-Se.y1}return de.circular&&!Se.circular?de.circularLinkType=="top"?-1:1:Se.circular&&!de.circular?Se.circularLinkType=="top"?1:-1:de.circular&&Se.circular?de.circularLinkType===Se.circularLinkType&&de.circularLinkType=="top"?de.target.column===Se.target.column?de.target.y1-Se.target.y1:Se.target.column-de.target.column:de.circularLinkType===Se.circularLinkType&&de.circularLinkType=="bottom"?de.target.column===Se.target.column?Se.target.y1-de.target.y1:de.target.column-Se.target.column:de.circularLinkType=="top"?-1:1:void 0});var ie=Pe.y0;ge.forEach(function(de){de.y0=ie+de.width/2,ie+=de.width}),ge.forEach(function(de,Se){if(de.circularLinkType=="bottom"){for(var _e=Se+1,we=0;_e<oe;_e++)we+=ge[_e].width;de.y0=Pe.y1-we-de.width/2}})})}function ae(ve,ye,me){ve.nodes.forEach(function(Me){var Pe=ve.links.filter(function(ie){return f(ie.target,me)==f(Me,me)}),ge=Pe.length;ge>1&&Pe.sort(function(ie,de){if(!ie.circular&&!de.circular){if(ie.source.column==de.source.column||!ce(ie,de))return ie.y0-de.y0;if(de.source.column<ie.source.column){var Se=K(de,ie);return ie.y0-Se}if(ie.source.column<de.source.column)return K(ie,de)-de.y0}return ie.circular&&!de.circular?ie.circularLinkType=="top"?-1:1:de.circular&&!ie.circular?de.circularLinkType=="top"?1:-1:ie.circular&&de.circular?ie.circularLinkType===de.circularLinkType&&ie.circularLinkType=="top"?ie.source.column===de.source.column?ie.source.y1-de.source.y1:ie.source.column-de.source.column:ie.circularLinkType===de.circularLinkType&&ie.circularLinkType=="bottom"?ie.source.column===de.source.column?ie.source.y1-de.source.y1:de.source.column-ie.source.column:ie.circularLinkType=="top"?-1:1:void 0});var oe=Me.y0;Pe.forEach(function(ie){ie.y1=oe+ie.width/2,oe+=ie.width}),Pe.forEach(function(ie,de){if(ie.circularLinkType=="bottom"){for(var Se=de+1,_e=0;Se<ge;Se++)_e+=Pe[Se].width;ie.y1=Me.y1-_e-ie.width/2}})})}function ce(ve,ye){return fe(ve)==fe(ye)}function fe(ve){return ve.y0-ve.y1>0?"up":"down"}function he(ve,ye){return f(ve.source,ye)==f(ve.target,ye)}},26800:function(ee,R,e){e.r(R),e.d(R,{sankey:function(){return g},sankeyCenter:function(){return s},sankeyJustify:function(){return p},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return f},sankeyRight:function(){return _}});var M=e(84706),k=e(34712);function o(S){return S.target.depth}function T(S){return S.depth}function _(S,w){return w-1-S.height}function p(S,w){return S.sourceLinks.length?S.depth:w-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,M.SY)(S.sourceLinks,o)-1:0}function t(S){return function(){return S}}function i(S,w){return n(S.source,w.source)||S.index-w.index}function r(S,w){return n(S.target,w.target)||S.index-w.index}function n(S,w){return S.y0-w.y0}function a(S){return S.value}function l(S){return(S.y0+S.y1)/2}function u(S){return l(S.source)*S.value}function h(S){return l(S.target)*S.value}function c(S){return S.index}function x(S){return S.nodes}function d(S){return S.links}function v(S,w){var E=S.get(w);if(!E)throw new Error("missing: "+w);return E}function g(){var S=0,w=0,E=1,O=1,C=24,P=8,D=c,U=p,I=x,N=d,W=32;function F(){var H={nodes:I.apply(null,arguments),links:N.apply(null,arguments)};return function(te){te.nodes.forEach(function($,K){$.index=K,$.sourceLinks=[],$.targetLinks=[]});var Q=(0,k.kH)(te.nodes,D);te.links.forEach(function($,K){$.index=K;var X=$.source,Y=$.target;typeof X!="object"&&(X=$.source=v(Q,X)),typeof Y!="object"&&(Y=$.target=v(Q,Y)),X.sourceLinks.push($),Y.targetLinks.push($)})}(H),function(te){te.nodes.forEach(function(Q){Q.value=Math.max((0,M.oh)(Q.sourceLinks,a),(0,M.oh)(Q.targetLinks,a))})}(H),function(te){var Q,$,K;for(Q=te.nodes,$=[],K=0;Q.length;++K,Q=$,$=[])Q.forEach(function(Y){Y.depth=K,Y.sourceLinks.forEach(function(re){$.indexOf(re.target)<0&&$.push(re.target)})});for(Q=te.nodes,$=[],K=0;Q.length;++K,Q=$,$=[])Q.forEach(function(Y){Y.height=K,Y.targetLinks.forEach(function(re){$.indexOf(re.source)<0&&$.push(re.source)})});var X=(E-S-C)/(K-1);te.nodes.forEach(function(Y){Y.x1=(Y.x0=S+Math.max(0,Math.min(K-1,Math.floor(U.call(null,Y,K))))*X)+C})}(H),function(te){var Q=(0,k.UJ)().key(function(se){return se.x0}).sortKeys(M.XE).entries(te.nodes).map(function(se){return se.values});(function(){var se=(0,M.kv)(Q,function(fe){return fe.length}),ae=.6666666666666666*(O-w)/(se-1);P>ae&&(P=ae);var ce=(0,M.SY)(Q,function(fe){return(O-w-(fe.length-1)*P)/(0,M.oh)(fe,a)});Q.forEach(function(fe){fe.forEach(function(he,ve){he.y1=(he.y0=ve)+he.value*ce})}),te.links.forEach(function(fe){fe.width=fe.value*ce})})(),re();for(var $=1,K=W;K>0;--K)Y($*=.99),re(),X($),re();function X(se){Q.forEach(function(ae){ae.forEach(function(ce){if(ce.targetLinks.length){var fe=((0,M.oh)(ce.targetLinks,u)/(0,M.oh)(ce.targetLinks,a)-l(ce))*se;ce.y0+=fe,ce.y1+=fe}})})}function Y(se){Q.slice().reverse().forEach(function(ae){ae.forEach(function(ce){if(ce.sourceLinks.length){var fe=((0,M.oh)(ce.sourceLinks,h)/(0,M.oh)(ce.sourceLinks,a)-l(ce))*se;ce.y0+=fe,ce.y1+=fe}})})}function re(){Q.forEach(function(se){var ae,ce,fe,he=w,ve=se.length;for(se.sort(n),fe=0;fe<ve;++fe)(ce=he-(ae=se[fe]).y0)>0&&(ae.y0+=ce,ae.y1+=ce),he=ae.y1+P;if((ce=he-P-O)>0)for(he=ae.y0-=ce,ae.y1-=ce,fe=ve-2;fe>=0;--fe)(ce=(ae=se[fe]).y1+P-he)>0&&(ae.y0-=ce,ae.y1-=ce),he=ae.y0})}}(H),j(H),H}function j(H){H.nodes.forEach(function(te){te.sourceLinks.sort(r),te.targetLinks.sort(i)}),H.nodes.forEach(function(te){var Q=te.y0,$=Q;te.sourceLinks.forEach(function(K){K.y0=Q+K.width/2,Q+=K.width}),te.targetLinks.forEach(function(K){K.y1=$+K.width/2,$+=K.width})})}return F.update=function(H){return j(H),H},F.nodeId=function(H){return arguments.length?(D=typeof H=="function"?H:t(H),F):D},F.nodeAlign=function(H){return arguments.length?(U=typeof H=="function"?H:t(H),F):U},F.nodeWidth=function(H){return arguments.length?(C=+H,F):C},F.nodePadding=function(H){return arguments.length?(P=+H,F):P},F.nodes=function(H){return arguments.length?(I=typeof H=="function"?H:t(H),F):I},F.links=function(H){return arguments.length?(N=typeof H=="function"?H:t(H),F):N},F.size=function(H){return arguments.length?(S=w=0,E=+H[0],O=+H[1],F):[E-S,O-w]},F.extent=function(H){return arguments.length?(S=+H[0][0],E=+H[1][0],w=+H[0][1],O=+H[1][1],F):[[S,w],[E,O]]},F.iterations=function(H){return arguments.length?(W=+H,F):W},F}var y=e(10132);function m(S){return[S.source.x1,S.y0]}function b(S){return[S.target.x0,S.y1]}function f(){return(0,y.ak)().source(m).target(b)}},33428:function(ee,R,e){var M,k;(function(){var o={version:"3.8.2"},T=[].slice,_=function(L){return T.call(L)},p=self.document;function s(L){return L&&(L.ownerDocument||L.document||L).documentElement}function t(L){return L&&(L.ownerDocument&&L.ownerDocument.defaultView||L.document&&L||L.defaultView)}if(p)try{_(p.documentElement.childNodes)[0].nodeType}catch{_=function(V){for(var J=V.length,ne=new Array(J);J--;)ne[J]=V[J];return ne}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,r=i.setAttribute,n=i.setAttributeNS,a=this.CSSStyleDeclaration.prototype,l=a.setProperty;i.setAttribute=function(V,J){r.call(this,V,J+"")},i.setAttributeNS=function(V,J,ne){n.call(this,V,J,ne+"")},a.setProperty=function(V,J,ne){l.call(this,V,J+"",ne)}}function u(L,V){return L<V?-1:L>V?1:L>=V?0:NaN}function h(L){return L===null?NaN:+L}function c(L){return!isNaN(L)}function x(L){return{left:function(V,J,ne,ue){for(arguments.length<3&&(ne=0),arguments.length<4&&(ue=V.length);ne<ue;){var xe=ne+ue>>>1;L(V[xe],J)<0?ne=xe+1:ue=xe}return ne},right:function(V,J,ne,ue){for(arguments.length<3&&(ne=0),arguments.length<4&&(ue=V.length);ne<ue;){var xe=ne+ue>>>1;L(V[xe],J)>0?ue=xe:ne=xe+1}return ne}}}o.ascending=u,o.descending=function(L,V){return V<L?-1:V>L?1:V>=L?0:NaN},o.min=function(L,V){var J,ne,ue=-1,xe=L.length;if(arguments.length===1){for(;++ue<xe;)if((ne=L[ue])!=null&&ne>=ne){J=ne;break}for(;++ue<xe;)(ne=L[ue])!=null&&J>ne&&(J=ne)}else{for(;++ue<xe;)if((ne=V.call(L,L[ue],ue))!=null&&ne>=ne){J=ne;break}for(;++ue<xe;)(ne=V.call(L,L[ue],ue))!=null&&J>ne&&(J=ne)}return J},o.max=function(L,V){var J,ne,ue=-1,xe=L.length;if(arguments.length===1){for(;++ue<xe;)if((ne=L[ue])!=null&&ne>=ne){J=ne;break}for(;++ue<xe;)(ne=L[ue])!=null&&ne>J&&(J=ne)}else{for(;++ue<xe;)if((ne=V.call(L,L[ue],ue))!=null&&ne>=ne){J=ne;break}for(;++ue<xe;)(ne=V.call(L,L[ue],ue))!=null&&ne>J&&(J=ne)}return J},o.extent=function(L,V){var J,ne,ue,xe=-1,Le=L.length;if(arguments.length===1){for(;++xe<Le;)if((ne=L[xe])!=null&&ne>=ne){J=ue=ne;break}for(;++xe<Le;)(ne=L[xe])!=null&&(J>ne&&(J=ne),ue<ne&&(ue=ne))}else{for(;++xe<Le;)if((ne=V.call(L,L[xe],xe))!=null&&ne>=ne){J=ue=ne;break}for(;++xe<Le;)(ne=V.call(L,L[xe],xe))!=null&&(J>ne&&(J=ne),ue<ne&&(ue=ne))}return[J,ue]},o.sum=function(L,V){var J,ne=0,ue=L.length,xe=-1;if(arguments.length===1)for(;++xe<ue;)c(J=+L[xe])&&(ne+=J);else for(;++xe<ue;)c(J=+V.call(L,L[xe],xe))&&(ne+=J);return ne},o.mean=function(L,V){var J,ne=0,ue=L.length,xe=-1,Le=ue;if(arguments.length===1)for(;++xe<ue;)c(J=h(L[xe]))?ne+=J:--Le;else for(;++xe<ue;)c(J=h(V.call(L,L[xe],xe)))?ne+=J:--Le;if(Le)return ne/Le},o.quantile=function(L,V){var J=(L.length-1)*V+1,ne=Math.floor(J),ue=+L[ne-1],xe=J-ne;return xe?ue+xe*(L[ne]-ue):ue},o.median=function(L,V){var J,ne=[],ue=L.length,xe=-1;if(arguments.length===1)for(;++xe<ue;)c(J=h(L[xe]))&&ne.push(J);else for(;++xe<ue;)c(J=h(V.call(L,L[xe],xe)))&&ne.push(J);if(ne.length)return o.quantile(ne.sort(u),.5)},o.variance=function(L,V){var J,ne,ue=L.length,xe=0,Le=0,De=-1,Ue=0;if(arguments.length===1)for(;++De<ue;)c(J=h(L[De]))&&(Le+=(ne=J-xe)*(J-(xe+=ne/++Ue)));else for(;++De<ue;)c(J=h(V.call(L,L[De],De)))&&(Le+=(ne=J-xe)*(J-(xe+=ne/++Ue)));if(Ue>1)return Le/(Ue-1)},o.deviation=function(){var L=o.variance.apply(this,arguments);return L&&Math.sqrt(L)};var d=x(u);function v(L){return L.length}o.bisectLeft=d.left,o.bisect=o.bisectRight=d.right,o.bisector=function(L){return x(L.length===1?function(V,J){return u(L(V),J)}:L)},o.shuffle=function(L,V,J){(xe=arguments.length)<3&&(J=L.length,xe<2&&(V=0));for(var ne,ue,xe=J-V;xe;)ue=Math.random()*xe--|0,ne=L[xe+V],L[xe+V]=L[ue+V],L[ue+V]=ne;return L},o.permute=function(L,V){for(var J=V.length,ne=new Array(J);J--;)ne[J]=L[V[J]];return ne},o.pairs=function(L){for(var V=0,J=L.length-1,ne=L[0],ue=new Array(J<0?0:J);V<J;)ue[V]=[ne,ne=L[++V]];return ue},o.transpose=function(L){if(!(ue=L.length))return[];for(var V=-1,J=o.min(L,v),ne=new Array(J);++V<J;)for(var ue,xe=-1,Le=ne[V]=new Array(ue);++xe<ue;)Le[xe]=L[xe][V];return ne},o.zip=function(){return o.transpose(arguments)},o.keys=function(L){var V=[];for(var J in L)V.push(J);return V},o.values=function(L){var V=[];for(var J in L)V.push(L[J]);return V},o.entries=function(L){var V=[];for(var J in L)V.push({key:J,value:L[J]});return V},o.merge=function(L){for(var V,J,ne,ue=L.length,xe=-1,Le=0;++xe<ue;)Le+=L[xe].length;for(J=new Array(Le);--ue>=0;)for(V=(ne=L[ue]).length;--V>=0;)J[--Le]=ne[V];return J};var g=Math.abs;function y(L,V){for(var J in V)Object.defineProperty(L.prototype,J,{value:V[J],enumerable:!1})}function m(){this._=Object.create(null)}o.range=function(L,V,J){if(arguments.length<3&&(J=1,arguments.length<2&&(V=L,L=0)),(V-L)/J==1/0)throw new Error("infinite range");var ne,ue=[],xe=function(De){for(var Ue=1;De*Ue%1;)Ue*=10;return Ue}(g(J)),Le=-1;if(L*=xe,V*=xe,(J*=xe)<0)for(;(ne=L+J*++Le)>V;)ue.push(ne/xe);else for(;(ne=L+J*++Le)<V;)ue.push(ne/xe);return ue},o.map=function(L,V){var J=new m;if(L instanceof m)L.forEach(function(De,Ue){J.set(De,Ue)});else if(Array.isArray(L)){var ne,ue=-1,xe=L.length;if(arguments.length===1)for(;++ue<xe;)J.set(ue,L[ue]);else for(;++ue<xe;)J.set(V.call(L,ne=L[ue],ue),ne)}else for(var Le in L)J.set(Le,L[Le]);return J};var b="__proto__",f="\0";function S(L){return(L+="")===b||L[0]===f?f+L:L}function w(L){return(L+="")[0]===f?L.slice(1):L}function E(L){return S(L)in this._}function O(L){return(L=S(L))in this._&&delete this._[L]}function C(){var L=[];for(var V in this._)L.push(w(V));return L}function P(){var L=0;for(var V in this._)++L;return L}function D(){for(var L in this._)return!1;return!0}function U(){this._=Object.create(null)}function I(L){return L}function N(L,V,J){return function(){var ne=J.apply(V,arguments);return ne===V?L:ne}}function W(L,V){if(V in L)return V;V=V.charAt(0).toUpperCase()+V.slice(1);for(var J=0,ne=F.length;J<ne;++J){var ue=F[J]+V;if(ue in L)return ue}}y(m,{has:E,get:function(L){return this._[S(L)]},set:function(L,V){return this._[S(L)]=V},remove:O,keys:C,values:function(){var L=[];for(var V in this._)L.push(this._[V]);return L},entries:function(){var L=[];for(var V in this._)L.push({key:w(V),value:this._[V]});return L},size:P,empty:D,forEach:function(L){for(var V in this._)L.call(this,w(V),this._[V])}}),o.nest=function(){var L,V,J={},ne=[],ue=[];function xe(De,Ue,qe){if(qe>=ne.length)return V?V.call(J,Ue):L?Ue.sort(L):Ue;for(var et,lt,ft,xt,St=-1,wt=Ue.length,Dt=ne[qe++],Et=new m;++St<wt;)(xt=Et.get(et=Dt(lt=Ue[St])))?xt.push(lt):Et.set(et,[lt]);return De?(lt=De(),ft=function(Yt,qt){lt.set(Yt,xe(De,qt,qe))}):(lt={},ft=function(Yt,qt){lt[Yt]=xe(De,qt,qe)}),Et.forEach(ft),lt}function Le(De,Ue){if(Ue>=ne.length)return De;var qe=[],et=ue[Ue++];return De.forEach(function(lt,ft){qe.push({key:lt,values:Le(ft,Ue)})}),et?qe.sort(function(lt,ft){return et(lt.key,ft.key)}):qe}return J.map=function(De,Ue){return xe(Ue,De,0)},J.entries=function(De){return Le(xe(o.map,De,0),0)},J.key=function(De){return ne.push(De),J},J.sortKeys=function(De){return ue[ne.length-1]=De,J},J.sortValues=function(De){return L=De,J},J.rollup=function(De){return V=De,J},J},o.set=function(L){var V=new U;if(L)for(var J=0,ne=L.length;J<ne;++J)V.add(L[J]);return V},y(U,{has:E,add:function(L){return this._[S(L+="")]=!0,L},remove:O,values:C,size:P,empty:D,forEach:function(L){for(var V in this._)L.call(this,w(V))}}),o.behavior={},o.rebind=function(L,V){for(var J,ne=1,ue=arguments.length;++ne<ue;)L[J=arguments[ne]]=N(L,V,V[J]);return L};var F=["webkit","ms","moz","Moz","o","O"];function j(){}function H(){}function te(L){var V=[],J=new m;function ne(){for(var ue,xe=V,Le=-1,De=xe.length;++Le<De;)(ue=xe[Le].on)&&ue.apply(this,arguments);return L}return ne.on=function(ue,xe){var Le,De=J.get(ue);return arguments.length<2?De&&De.on:(De&&(De.on=null,V=V.slice(0,Le=V.indexOf(De)).concat(V.slice(Le+1)),J.remove(ue)),xe&&V.push(J.set(ue,{on:xe})),L)},ne}function Q(){o.event.preventDefault()}function $(){for(var L,V=o.event;L=V.sourceEvent;)V=L;return V}function K(L){for(var V=new H,J=0,ne=arguments.length;++J<ne;)V[arguments[J]]=te(V);return V.of=function(ue,xe){return function(Le){try{var De=Le.sourceEvent=o.event;Le.target=L,o.event=Le,V[Le.type].apply(ue,xe)}finally{o.event=De}}},V}o.dispatch=function(){for(var L=new H,V=-1,J=arguments.length;++V<J;)L[arguments[V]]=te(L);return L},H.prototype.on=function(L,V){var J=L.indexOf("."),ne="";if(J>=0&&(ne=L.slice(J+1),L=L.slice(0,J)),L)return arguments.length<2?this[L].on(ne):this[L].on(ne,V);if(arguments.length===2){if(V==null)for(L in this)this.hasOwnProperty(L)&&this[L].on(ne,null);return this}},o.event=null,o.requote=function(L){return L.replace(X,"\\$&")};var X=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Y={}.__proto__?function(L,V){L.__proto__=V}:function(L,V){for(var J in V)L[J]=V[J]};function re(L){return Y(L,fe),L}var se=function(L,V){return V.querySelector(L)},ae=function(L,V){return V.querySelectorAll(L)},ce=function(L,V){var J=L.matches||L[W(L,"matchesSelector")];return ce=function(ne,ue){return J.call(ne,ue)},ce(L,V)};typeof Sizzle=="function"&&(se=function(L,V){return Sizzle(L,V)[0]||null},ae=Sizzle,ce=Sizzle.matchesSelector),o.selection=function(){return o.select(p.documentElement)};var fe=o.selection.prototype=[];function he(L){return typeof L=="function"?L:function(){return se(L,this)}}function ve(L){return typeof L=="function"?L:function(){return ae(L,this)}}fe.select=function(L){var V,J,ne,ue,xe=[];L=he(L);for(var Le=-1,De=this.length;++Le<De;){xe.push(V=[]),V.parentNode=(ne=this[Le]).parentNode;for(var Ue=-1,qe=ne.length;++Ue<qe;)(ue=ne[Ue])?(V.push(J=L.call(ue,ue.__data__,Ue,Le)),J&&"__data__"in ue&&(J.__data__=ue.__data__)):V.push(null)}return re(xe)},fe.selectAll=function(L){var V,J,ne=[];L=ve(L);for(var ue=-1,xe=this.length;++ue<xe;)for(var Le=this[ue],De=-1,Ue=Le.length;++De<Ue;)(J=Le[De])&&(ne.push(V=_(L.call(J,J.__data__,De,ue))),V.parentNode=J);return re(ne)};var ye="http://www.w3.org/1999/xhtml",me={svg:"http://www.w3.org/2000/svg",xhtml:ye,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Me(L,V){return L=o.ns.qualify(L),V==null?L.local?function(){this.removeAttributeNS(L.space,L.local)}:function(){this.removeAttribute(L)}:typeof V=="function"?L.local?function(){var J=V.apply(this,arguments);J==null?this.removeAttributeNS(L.space,L.local):this.setAttributeNS(L.space,L.local,J)}:function(){var J=V.apply(this,arguments);J==null?this.removeAttribute(L):this.setAttribute(L,J)}:L.local?function(){this.setAttributeNS(L.space,L.local,V)}:function(){this.setAttribute(L,V)}}function Pe(L){return L.trim().replace(/\s+/g," ")}function ge(L){return new RegExp("(?:^|\\s+)"+o.requote(L)+"(?:\\s+|$)","g")}function oe(L){return(L+"").trim().split(/^|\s+/)}function ie(L,V){var J=(L=oe(L).map(de)).length;return typeof V=="function"?function(){for(var ne=-1,ue=V.apply(this,arguments);++ne<J;)L[ne](this,ue)}:function(){for(var ne=-1;++ne<J;)L[ne](this,V)}}function de(L){var V=ge(L);return function(J,ne){if(ue=J.classList)return ne?ue.add(L):ue.remove(L);var ue=J.getAttribute("class")||"";ne?(V.lastIndex=0,V.test(ue)||J.setAttribute("class",Pe(ue+" "+L))):J.setAttribute("class",Pe(ue.replace(V," ")))}}function Se(L,V,J){return V==null?function(){this.style.removeProperty(L)}:typeof V=="function"?function(){var ne=V.apply(this,arguments);ne==null?this.style.removeProperty(L):this.style.setProperty(L,ne,J)}:function(){this.style.setProperty(L,V,J)}}function _e(L,V){return V==null?function(){delete this[L]}:typeof V=="function"?function(){var J=V.apply(this,arguments);J==null?delete this[L]:this[L]=J}:function(){this[L]=V}}function we(L){return typeof L=="function"?L:(L=o.ns.qualify(L)).local?function(){return this.ownerDocument.createElementNS(L.space,L.local)}:function(){var V=this.ownerDocument,J=this.namespaceURI;return J===ye&&V.documentElement.namespaceURI===ye?V.createElement(L):V.createElementNS(J,L)}}function Ae(){var L=this.parentNode;L&&L.removeChild(this)}function Oe(L){return{__data__:L}}function ze(L){return function(){return ce(this,L)}}function pe(L){return arguments.length||(L=u),function(V,J){return V&&J?L(V.__data__,J.__data__):!V-!J}}function be(L,V){for(var J=0,ne=L.length;J<ne;J++)for(var ue,xe=L[J],Le=0,De=xe.length;Le<De;Le++)(ue=xe[Le])&&V(ue,Le,J);return L}function ke(L){return Y(L,Ie),L}o.ns={prefix:me,qualify:function(L){var V=L.indexOf(":"),J=L;return V>=0&&(J=L.slice(0,V))!=="xmlns"&&(L=L.slice(V+1)),me.hasOwnProperty(J)?{space:me[J],local:L}:L}},fe.attr=function(L,V){if(arguments.length<2){if(typeof L=="string"){var J=this.node();return(L=o.ns.qualify(L)).local?J.getAttributeNS(L.space,L.local):J.getAttribute(L)}for(V in L)this.each(Me(V,L[V]));return this}return this.each(Me(L,V))},fe.classed=function(L,V){if(arguments.length<2){if(typeof L=="string"){var J=this.node(),ne=(L=oe(L)).length,ue=-1;if(V=J.classList){for(;++ue<ne;)if(!V.contains(L[ue]))return!1}else for(V=J.getAttribute("class");++ue<ne;)if(!ge(L[ue]).test(V))return!1;return!0}for(V in L)this.each(ie(V,L[V]));return this}return this.each(ie(L,V))},fe.style=function(L,V,J){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for(J in ne<2&&(V=""),L)this.each(Se(J,L[J],V));return this}if(ne<2){var ue=this.node();return t(ue).getComputedStyle(ue,null).getPropertyValue(L)}J=""}return this.each(Se(L,V,J))},fe.property=function(L,V){if(arguments.length<2){if(typeof L=="string")return this.node()[L];for(V in L)this.each(_e(V,L[V]));return this}return this.each(_e(L,V))},fe.text=function(L){return arguments.length?this.each(typeof L=="function"?function(){var V=L.apply(this,arguments);this.textContent=V??""}:L==null?function(){this.textContent=""}:function(){this.textContent=L}):this.node().textContent},fe.html=function(L){return arguments.length?this.each(typeof L=="function"?function(){var V=L.apply(this,arguments);this.innerHTML=V??""}:L==null?function(){this.innerHTML=""}:function(){this.innerHTML=L}):this.node().innerHTML},fe.append=function(L){return L=we(L),this.select(function(){return this.appendChild(L.apply(this,arguments))})},fe.insert=function(L,V){return L=we(L),V=he(V),this.select(function(){return this.insertBefore(L.apply(this,arguments),V.apply(this,arguments)||null)})},fe.remove=function(){return this.each(Ae)},fe.data=function(L,V){var J,ne,ue=-1,xe=this.length;if(!arguments.length){for(L=new Array(xe=(J=this[0]).length);++ue<xe;)(ne=J[ue])&&(L[ue]=ne.__data__);return L}function Le(et,lt){var ft,xt,St,wt=et.length,Dt=lt.length,Et=Math.min(wt,Dt),Yt=new Array(Dt),qt=new Array(Dt),Bt=new Array(wt);if(V){var fn,gn=new m,kn=new Array(wt);for(ft=-1;++ft<wt;)(xt=et[ft])&&(gn.has(fn=V.call(xt,xt.__data__,ft))?Bt[ft]=xt:gn.set(fn,xt),kn[ft]=fn);for(ft=-1;++ft<Dt;)(xt=gn.get(fn=V.call(lt,St=lt[ft],ft)))?xt!==!0&&(Yt[ft]=xt,xt.__data__=St):qt[ft]=Oe(St),gn.set(fn,!0);for(ft=-1;++ft<wt;)ft in kn&&gn.get(kn[ft])!==!0&&(Bt[ft]=et[ft])}else{for(ft=-1;++ft<Et;)xt=et[ft],St=lt[ft],xt?(xt.__data__=St,Yt[ft]=xt):qt[ft]=Oe(St);for(;ft<Dt;++ft)qt[ft]=Oe(lt[ft]);for(;ft<wt;++ft)Bt[ft]=et[ft]}qt.update=Yt,qt.parentNode=Yt.parentNode=Bt.parentNode=et.parentNode,De.push(qt),Ue.push(Yt),qe.push(Bt)}var De=ke([]),Ue=re([]),qe=re([]);if(typeof L=="function")for(;++ue<xe;)Le(J=this[ue],L.call(J,J.parentNode.__data__,ue));else for(;++ue<xe;)Le(J=this[ue],L);return Ue.enter=function(){return De},Ue.exit=function(){return qe},Ue},fe.datum=function(L){return arguments.length?this.property("__data__",L):this.property("__data__")},fe.filter=function(L){var V,J,ne,ue=[];typeof L!="function"&&(L=ze(L));for(var xe=0,Le=this.length;xe<Le;xe++){ue.push(V=[]),V.parentNode=(J=this[xe]).parentNode;for(var De=0,Ue=J.length;De<Ue;De++)(ne=J[De])&&L.call(ne,ne.__data__,De,xe)&&V.push(ne)}return re(ue)},fe.order=function(){for(var L=-1,V=this.length;++L<V;)for(var J,ne=this[L],ue=ne.length-1,xe=ne[ue];--ue>=0;)(J=ne[ue])&&(xe&&xe!==J.nextSibling&&xe.parentNode.insertBefore(J,xe),xe=J);return this},fe.sort=function(L){L=pe.apply(this,arguments);for(var V=-1,J=this.length;++V<J;)this[V].sort(L);return this.order()},fe.each=function(L){return be(this,function(V,J,ne){L.call(V,V.__data__,J,ne)})},fe.call=function(L){var V=_(arguments);return L.apply(V[0]=this,V),this},fe.empty=function(){return!this.node()},fe.node=function(){for(var L=0,V=this.length;L<V;L++)for(var J=this[L],ne=0,ue=J.length;ne<ue;ne++){var xe=J[ne];if(xe)return xe}return null},fe.size=function(){var L=0;return be(this,function(){++L}),L};var Ie=[];function Ee(L,V,J){var ne="__on"+L,ue=L.indexOf("."),xe=Ve;ue>0&&(L=L.slice(0,ue));var Le=Be.get(L);function De(){var Ue=this[ne];Ue&&(this.removeEventListener(L,Ue,Ue.$),delete this[ne])}return Le&&(L=Le,xe=Ze),ue?V?function(){var Ue=xe(V,_(arguments));De.call(this),this.addEventListener(L,this[ne]=Ue,Ue.$=J),Ue._=V}:De:V?j:function(){var Ue,qe=new RegExp("^__on([^.]+)"+o.requote(L)+"$");for(var et in this)if(Ue=et.match(qe)){var lt=this[et];this.removeEventListener(Ue[1],lt,lt.$),delete this[et]}}}o.selection.enter=ke,o.selection.enter.prototype=Ie,Ie.append=fe.append,Ie.empty=fe.empty,Ie.node=fe.node,Ie.call=fe.call,Ie.size=fe.size,Ie.select=function(L){for(var V,J,ne,ue,xe,Le=[],De=-1,Ue=this.length;++De<Ue;){ne=(ue=this[De]).update,Le.push(V=[]),V.parentNode=ue.parentNode;for(var qe=-1,et=ue.length;++qe<et;)(xe=ue[qe])?(V.push(ne[qe]=J=L.call(ue.parentNode,xe.__data__,qe,De)),J.__data__=xe.__data__):V.push(null)}return re(Le)},Ie.insert=function(L,V){var J,ne,ue;return arguments.length<2&&(J=this,V=function(xe,Le,De){var Ue,qe=J[De].update,et=qe.length;for(De!=ue&&(ue=De,ne=0),Le>=ne&&(ne=Le+1);!(Ue=qe[ne])&&++ne<et;);return Ue}),fe.insert.call(this,L,V)},o.select=function(L){var V;return typeof L=="string"?(V=[se(L,p)]).parentNode=p.documentElement:(V=[L]).parentNode=s(L),re([V])},o.selectAll=function(L){var V;return typeof L=="string"?(V=_(ae(L,p))).parentNode=p.documentElement:(V=_(L)).parentNode=null,re([V])},fe.on=function(L,V,J){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for(J in ne<2&&(V=!1),L)this.each(Ee(J,L[J],V));return this}if(ne<2)return(ne=this.node()["__on"+L])&&ne._;J=!1}return this.each(Ee(L,V,J))};var Be=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(L,V){return function(J){var ne=o.event;o.event=J,V[0]=this.__data__;try{L.apply(this,V)}finally{o.event=ne}}}function Ze(L,V){var J=Ve(L,V);return function(ne){var ue=this,xe=ne.relatedTarget;xe&&(xe===ue||8&xe.compareDocumentPosition(ue))||J.call(ue,ne)}}p&&Be.forEach(function(L){"on"+L in p&&Be.remove(L)});var rt,it=0;function dt(L){var V=".dragsuppress-"+ ++it,J="click"+V,ne=o.select(t(L)).on("touchmove"+V,Q).on("dragstart"+V,Q).on("selectstart"+V,Q);if(rt==null&&(rt=!("onselectstart"in L)&&W(L.style,"userSelect")),rt){var ue=s(L).style,xe=ue[rt];ue[rt]="none"}return function(Le){if(ne.on(V,null),rt&&(ue[rt]=xe),Le){var De=function(){ne.on(J,null)};ne.on(J,function(){Q(),De()},!0),setTimeout(De,0)}}}o.mouse=function(L){return ht(L,$())};var vt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ht(L,V){V.changedTouches&&(V=V.changedTouches[0]);var J=L.ownerSVGElement||L;if(J.createSVGPoint){var ne=J.createSVGPoint();if(vt<0){var ue=t(L);if(ue.scrollX||ue.scrollY){var xe=(J=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();vt=!(xe.f||xe.e),J.remove()}}return vt?(ne.x=V.pageX,ne.y=V.pageY):(ne.x=V.clientX,ne.y=V.clientY),[(ne=ne.matrixTransform(L.getScreenCTM().inverse())).x,ne.y]}var Le=L.getBoundingClientRect();return[V.clientX-Le.left-L.clientLeft,V.clientY-Le.top-L.clientTop]}function Qe(){return o.event.changedTouches[0].identifier}o.touch=function(L,V,J){if(arguments.length<3&&(J=V,V=$().changedTouches),V){for(var ne,ue=0,xe=V.length;ue<xe;++ue)if((ne=V[ue]).identifier===J)return ht(L,ne)}},o.behavior.drag=function(){var L=K(ue,"drag","dragstart","dragend"),V=null,J=xe(j,o.mouse,t,"mousemove","mouseup"),ne=xe(Qe,o.touch,I,"touchmove","touchend");function ue(){this.on("mousedown.drag",J).on("touchstart.drag",ne)}function xe(Le,De,Ue,qe,et){return function(){var lt,ft=this,xt=o.event.target.correspondingElement||o.event.target,St=ft.parentNode,wt=L.of(ft,arguments),Dt=0,Et=Le(),Yt=".drag"+(Et==null?"":"-"+Et),qt=o.select(Ue(xt)).on(qe+Yt,function(){var gn,kn,On=De(St,Et);On&&(gn=On[0]-fn[0],kn=On[1]-fn[1],Dt|=gn|kn,fn=On,wt({type:"drag",x:On[0]+lt[0],y:On[1]+lt[1],dx:gn,dy:kn}))}).on(et+Yt,function(){De(St,Et)&&(qt.on(qe+Yt,null).on(et+Yt,null),Bt(Dt),wt({type:"dragend"}))}),Bt=dt(xt),fn=De(St,Et);lt=V?[(lt=V.apply(ft,arguments)).x-fn[0],lt.y-fn[1]]:[0,0],wt({type:"dragstart"})}}return ue.origin=function(Le){return arguments.length?(V=Le,ue):V},o.rebind(ue,L,"on")},o.touches=function(L,V){return arguments.length<2&&(V=$().touches),V?_(V).map(function(J){var ne=ht(L,J);return ne.identifier=J.identifier,ne}):[]};var Je=1e-6,Tt=Je*Je,Ot=Math.PI,Pt=2*Ot,Mt=Pt-Je,He=Ot/2,Ye=Ot/180,Ne=180/Ot;function We(L){return L>1?He:L<-1?-He:Math.asin(L)}function ot(L){return((L=Math.exp(L))+1/L)/2}var tt=Math.SQRT2;o.interpolateZoom=function(L,V){var J,ne,ue=L[0],xe=L[1],Le=L[2],De=V[0],Ue=V[1],qe=V[2],et=De-ue,lt=Ue-xe,ft=et*et+lt*lt;if(ft<Tt)ne=Math.log(qe/Le)/tt,J=function(Yt){return[ue+Yt*et,xe+Yt*lt,Le*Math.exp(tt*Yt*ne)]};else{var xt=Math.sqrt(ft),St=(qe*qe-Le*Le+4*ft)/(2*Le*2*xt),wt=(qe*qe-Le*Le-4*ft)/(2*qe*2*xt),Dt=Math.log(Math.sqrt(St*St+1)-St),Et=Math.log(Math.sqrt(wt*wt+1)-wt);ne=(Et-Dt)/tt,J=function(Yt){var qt,Bt=Yt*ne,fn=ot(Dt),gn=Le/(2*xt)*(fn*(qt=tt*Bt+Dt,((qt=Math.exp(2*qt))-1)/(qt+1))-function(kn){return((kn=Math.exp(kn))-1/kn)/2}(Dt));return[ue+gn*et,xe+gn*lt,Le*fn/ot(tt*Bt+Dt)]}}return J.duration=1e3*ne,J},o.behavior.zoom=function(){var L,V,J,ne,ue,xe,Le,De,Ue,qe={x:0,y:0,k:1},et=[960,500],lt=nt,ft=250,xt=0,St="mousedown.zoom",wt="mousemove.zoom",Dt="mouseup.zoom",Et="touchstart.zoom",Yt=K(qt,"zoomstart","zoom","zoomend");function qt(Kn){Kn.on(St,Hn).on(Fe+".zoom",vr).on("dblclick.zoom",Ar).on(Et,ar)}function Bt(Kn){return[(Kn[0]-qe.x)/qe.k,(Kn[1]-qe.y)/qe.k]}function fn(Kn){qe.k=Math.max(lt[0],Math.min(lt[1],Kn))}function gn(Kn,ir){ir=function(br){return[br[0]*qe.k+qe.x,br[1]*qe.k+qe.y]}(ir),qe.x+=Kn[0]-ir[0],qe.y+=Kn[1]-ir[1]}function kn(Kn,ir,br,sr){Kn.__chart__={x:qe.x,y:qe.y,k:qe.k},fn(Math.pow(2,sr)),gn(V=ir,br),Kn=o.select(Kn),ft>0&&(Kn=Kn.transition().duration(ft)),Kn.call(qt.event)}function On(){Le&&Le.domain(xe.range().map(function(Kn){return(Kn-qe.x)/qe.k}).map(xe.invert)),Ue&&Ue.domain(De.range().map(function(Kn){return(Kn-qe.y)/qe.k}).map(De.invert))}function Nn(Kn){xt++||Kn({type:"zoomstart"})}function er(Kn){On(),Kn({type:"zoom",scale:qe.k,translate:[qe.x,qe.y]})}function or(Kn){--xt||(Kn({type:"zoomend"}),V=null)}function Hn(){var Kn=this,ir=Yt.of(Kn,arguments),br=0,sr=o.select(t(Kn)).on(wt,function(){br=1,gn(o.mouse(Kn),Tr),er(ir)}).on(Dt,function(){sr.on(wt,null).on(Dt,null),Er(br),or(ir)}),Tr=Bt(o.mouse(Kn)),Er=dt(Kn);Ta.call(Kn),Nn(ir)}function ar(){var Kn,ir=this,br=Yt.of(ir,arguments),sr={},Tr=0,Er=".zoom-"+o.event.changedTouches[0].identifier,Rr="touchmove"+Er,Fr="touchend"+Er,jr=[],qr=o.select(ir),ui=dt(ir);function Ai(){var gi=o.touches(ir);return Kn=qe.k,gi.forEach(function(Gr){Gr.identifier in sr&&(sr[Gr.identifier]=Bt(Gr))}),gi}function ia(){var gi=o.event.target;o.select(gi).on(Rr,Ni).on(Fr,Ji),jr.push(gi);for(var Gr=o.event.changedTouches,xi=0,ri=Gr.length;xi<ri;++xi)sr[Gr[xi].identifier]=null;var Zr=Ai(),bi=Date.now();if(Zr.length===1){if(bi-ue<500){var Mi=Zr[0];kn(ir,Mi,sr[Mi.identifier],Math.floor(Math.log(qe.k)/Math.LN2)+1),Q()}ue=bi}else if(Zr.length>1){Mi=Zr[0];var Ii=Zr[1],ms=Mi[0]-Ii[0],ys=Mi[1]-Ii[1];Tr=ms*ms+ys*ys}}function Ni(){var gi,Gr,xi,ri,Zr=o.touches(ir);Ta.call(ir);for(var bi=0,Mi=Zr.length;bi<Mi;++bi,ri=null)if(xi=Zr[bi],ri=sr[xi.identifier]){if(Gr)break;gi=xi,Gr=ri}if(ri){var Ii=(Ii=xi[0]-gi[0])*Ii+(Ii=xi[1]-gi[1])*Ii,ms=Tr&&Math.sqrt(Ii/Tr);gi=[(gi[0]+xi[0])/2,(gi[1]+xi[1])/2],Gr=[(Gr[0]+ri[0])/2,(Gr[1]+ri[1])/2],fn(ms*Kn)}ue=null,gn(gi,Gr),er(br)}function Ji(){if(o.event.touches.length){for(var gi=o.event.changedTouches,Gr=0,xi=gi.length;Gr<xi;++Gr)delete sr[gi[Gr].identifier];for(var ri in sr)return void Ai()}o.selectAll(jr).on(Er,null),qr.on(St,Hn).on(Et,ar),ui(),or(br)}ia(),Nn(br),qr.on(St,null).on(Et,ia)}function vr(){var Kn=Yt.of(this,arguments);ne?clearTimeout(ne):(Ta.call(this),L=Bt(V=J||o.mouse(this)),Nn(Kn)),ne=setTimeout(function(){ne=null,or(Kn)},50),Q(),fn(Math.pow(2,.002*Re())*qe.k),gn(V,L),er(Kn)}function Ar(){var Kn=o.mouse(this),ir=Math.log(qe.k)/Math.LN2;kn(this,Kn,Bt(Kn),o.event.shiftKey?Math.ceil(ir)-1:Math.floor(ir)+1)}return Fe||(Fe="onwheel"in p?(Re=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(Re=function(){return o.event.wheelDelta},"mousewheel"):(Re=function(){return-o.event.detail},"MozMousePixelScroll")),qt.event=function(Kn){Kn.each(function(){var ir=Yt.of(this,arguments),br=qe;Li?o.select(this).transition().each("start.zoom",function(){qe=this.__chart__||{x:0,y:0,k:1},Nn(ir)}).tween("zoom:zoom",function(){var sr=et[0],Tr=et[1],Er=V?V[0]:sr/2,Rr=V?V[1]:Tr/2,Fr=o.interpolateZoom([(Er-qe.x)/qe.k,(Rr-qe.y)/qe.k,sr/qe.k],[(Er-br.x)/br.k,(Rr-br.y)/br.k,sr/br.k]);return function(jr){var qr=Fr(jr),ui=sr/qr[2];this.__chart__=qe={x:Er-qr[0]*ui,y:Rr-qr[1]*ui,k:ui},er(ir)}}).each("interrupt.zoom",function(){or(ir)}).each("end.zoom",function(){or(ir)}):(this.__chart__=qe,Nn(ir),er(ir),or(ir))})},qt.translate=function(Kn){return arguments.length?(qe={x:+Kn[0],y:+Kn[1],k:qe.k},On(),qt):[qe.x,qe.y]},qt.scale=function(Kn){return arguments.length?(qe={x:qe.x,y:qe.y,k:null},fn(+Kn),On(),qt):qe.k},qt.scaleExtent=function(Kn){return arguments.length?(lt=Kn==null?nt:[+Kn[0],+Kn[1]],qt):lt},qt.center=function(Kn){return arguments.length?(J=Kn&&[+Kn[0],+Kn[1]],qt):J},qt.size=function(Kn){return arguments.length?(et=Kn&&[+Kn[0],+Kn[1]],qt):et},qt.duration=function(Kn){return arguments.length?(ft=+Kn,qt):ft},qt.x=function(Kn){return arguments.length?(Le=Kn,xe=Kn.copy(),qe={x:0,y:0,k:1},qt):Le},qt.y=function(Kn){return arguments.length?(Ue=Kn,De=Kn.copy(),qe={x:0,y:0,k:1},qt):Ue},o.rebind(qt,Yt,"on")};var Re,Fe,nt=[0,1/0];function Ge(){}function ct(L,V,J){return this instanceof ct?(this.h=+L,this.s=+V,void(this.l=+J)):arguments.length<2?L instanceof ct?new ct(L.h,L.s,L.l):ln(""+L,mn,ct):new ct(L,V,J)}o.color=Ge,Ge.prototype.toString=function(){return this.rgb()+""},o.hsl=ct;var pt=ct.prototype=new Ge;function gt(L,V,J){var ne,ue;function xe(Le){return Math.round(255*function(De){return De>360?De-=360:De<0&&(De+=360),De<60?ne+(ue-ne)*De/60:De<180?ue:De<240?ne+(ue-ne)*(240-De)/60:ne}(Le))}return L=isNaN(L)?0:(L%=360)<0?L+360:L,V=isNaN(V)||V<0?0:V>1?1:V,ne=2*(J=J<0?0:J>1?1:J)-(ue=J<=.5?J*(1+V):J+V-J*V),new bn(xe(L+120),xe(L),xe(L-120))}function ut(L,V,J){return this instanceof ut?(this.h=+L,this.c=+V,void(this.l=+J)):arguments.length<2?L instanceof ut?new ut(L.h,L.c,L.l):function(ne,ue,xe){return ne>0?new ut(Math.atan2(xe,ue)*Ne,Math.sqrt(ue*ue+xe*xe),ne):new ut(NaN,NaN,ne)}(L instanceof At?L.l:(L=xn((L=o.rgb(L)).r,L.g,L.b)).l,L.a,L.b):new ut(L,V,J)}pt.brighter=function(L){return L=Math.pow(.7,arguments.length?L:1),new ct(this.h,this.s,this.l/L)},pt.darker=function(L){return L=Math.pow(.7,arguments.length?L:1),new ct(this.h,this.s,L*this.l)},pt.rgb=function(){return gt(this.h,this.s,this.l)},o.hcl=ut;var kt=ut.prototype=new Ge;function mt(L,V,J){return isNaN(L)&&(L=0),isNaN(V)&&(V=0),new At(J,Math.cos(L*=Ye)*V,Math.sin(L)*V)}function At(L,V,J){return this instanceof At?(this.l=+L,this.a=+V,void(this.b=+J)):arguments.length<2?L instanceof At?new At(L.l,L.a,L.b):L instanceof ut?mt(L.h,L.c,L.l):xn((L=bn(L)).r,L.g,L.b):new At(L,V,J)}kt.brighter=function(L){return new ut(this.h,this.c,Math.min(100,this.l+Lt*(arguments.length?L:1)))},kt.darker=function(L){return new ut(this.h,this.c,Math.max(0,this.l-Lt*(arguments.length?L:1)))},kt.rgb=function(){return mt(this.h,this.c,this.l).rgb()},o.lab=At;var Lt=18,Ct=.95047,zt=1,Gt=1.08883,rn=At.prototype=new Ge;function Nt(L,V,J){var ne=(L+16)/116,ue=ne+V/500,xe=ne-J/200;return new bn(Ln(3.2404542*(ue=Wt(ue)*Ct)-1.5371385*(ne=Wt(ne)*zt)-.4985314*(xe=Wt(xe)*Gt)),Ln(-.969266*ue+1.8760108*ne+.041556*xe),Ln(.0556434*ue-.2040259*ne+1.0572252*xe))}function Wt(L){return L>.206893034?L*L*L:(L-.13793103448275862)/7.787037}function Rt(L){return L>.008856?Math.pow(L,.3333333333333333):7.787037*L+.13793103448275862}function Ln(L){return Math.round(255*(L<=.00304?12.92*L:1.055*Math.pow(L,.4166666666666667)-.055))}function bn(L,V,J){return this instanceof bn?(this.r=~~L,this.g=~~V,void(this.b=~~J)):arguments.length<2?L instanceof bn?new bn(L.r,L.g,L.b):ln(""+L,bn,gt):new bn(L,V,J)}function hn(L){return new bn(L>>16,L>>8&255,255&L)}function Kt(L){return hn(L)+""}rn.brighter=function(L){return new At(Math.min(100,this.l+Lt*(arguments.length?L:1)),this.a,this.b)},rn.darker=function(L){return new At(Math.max(0,this.l-Lt*(arguments.length?L:1)),this.a,this.b)},rn.rgb=function(){return Nt(this.l,this.a,this.b)},o.rgb=bn;var on=bn.prototype=new Ge;function $t(L){return L<16?"0"+Math.max(0,L).toString(16):Math.min(255,L).toString(16)}function ln(L,V,J){var ne,ue,xe,Le=0,De=0,Ue=0;if(ne=/([a-z]+)\((.*)\)/.exec(L=L.toLowerCase()))switch(ue=ne[2].split(","),ne[1]){case"hsl":return J(parseFloat(ue[0]),parseFloat(ue[1])/100,parseFloat(ue[2])/100);case"rgb":return V(Sn(ue[0]),Sn(ue[1]),Sn(ue[2]))}return(xe=Tn.get(L))?V(xe.r,xe.g,xe.b):(L==null||L.charAt(0)!=="#"||isNaN(xe=parseInt(L.slice(1),16))||(L.length===4?(Le=(3840&xe)>>4,Le|=Le>>4,De=240&xe,De|=De>>4,Ue=15&xe,Ue|=Ue<<4):L.length===7&&(Le=(16711680&xe)>>16,De=(65280&xe)>>8,Ue=255&xe)),V(Le,De,Ue))}function mn(L,V,J){var ne,ue,xe=Math.min(L/=255,V/=255,J/=255),Le=Math.max(L,V,J),De=Le-xe,Ue=(Le+xe)/2;return De?(ue=Ue<.5?De/(Le+xe):De/(2-Le-xe),ne=L==Le?(V-J)/De+(V<J?6:0):V==Le?(J-L)/De+2:(L-V)/De+4,ne*=60):(ne=NaN,ue=Ue>0&&Ue<1?0:ne),new ct(ne,ue,Ue)}function xn(L,V,J){var ne=Rt((.4124564*(L=Mn(L))+.3575761*(V=Mn(V))+.1804375*(J=Mn(J)))/Ct),ue=Rt((.2126729*L+.7151522*V+.072175*J)/zt);return At(116*ue-16,500*(ne-ue),200*(ue-Rt((.0193339*L+.119192*V+.9503041*J)/Gt)))}function Mn(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function Sn(L){var V=parseFloat(L);return L.charAt(L.length-1)==="%"?Math.round(2.55*V):V}on.brighter=function(L){L=Math.pow(.7,arguments.length?L:1);var V=this.r,J=this.g,ne=this.b,ue=30;return V||J||ne?(V&&V<ue&&(V=ue),J&&J<ue&&(J=ue),ne&&ne<ue&&(ne=ue),new bn(Math.min(255,V/L),Math.min(255,J/L),Math.min(255,ne/L))):new bn(ue,ue,ue)},on.darker=function(L){return new bn((L=Math.pow(.7,arguments.length?L:1))*this.r,L*this.g,L*this.b)},on.hsl=function(){return mn(this.r,this.g,this.b)},on.toString=function(){return"#"+$t(this.r)+$t(this.g)+$t(this.b)};var Tn=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Rn(L){return typeof L=="function"?L:function(){return L}}function Pn(L){return function(V,J,ne){return arguments.length===2&&typeof J=="function"&&(ne=J,J=null),jn(V,J,L,ne)}}function jn(L,V,J,ne){var ue={},xe=o.dispatch("beforesend","progress","load","error"),Le={},De=new XMLHttpRequest,Ue=null;function qe(){var et,lt=De.status;if(!lt&&function(ft){var xt=ft.responseType;return xt&&xt!=="text"?ft.response:ft.responseText}(De)||lt>=200&&lt<300||lt===304){try{et=J.call(ue,De)}catch(ft){return void xe.error.call(ue,ft)}xe.load.call(ue,et)}else xe.error.call(ue,De)}return self.XDomainRequest&&!("withCredentials"in De)&&/^(http(s)?:)?\/\//.test(L)&&(De=new XDomainRequest),"onload"in De?De.onload=De.onerror=qe:De.onreadystatechange=function(){De.readyState>3&&qe()},De.onprogress=function(et){var lt=o.event;o.event=et;try{xe.progress.call(ue,De)}finally{o.event=lt}},ue.header=function(et,lt){return et=(et+"").toLowerCase(),arguments.length<2?Le[et]:(lt==null?delete Le[et]:Le[et]=lt+"",ue)},ue.mimeType=function(et){return arguments.length?(V=et==null?null:et+"",ue):V},ue.responseType=function(et){return arguments.length?(Ue=et,ue):Ue},ue.response=function(et){return J=et,ue},["get","post"].forEach(function(et){ue[et]=function(){return ue.send.apply(ue,[et].concat(_(arguments)))}}),ue.send=function(et,lt,ft){if(arguments.length===2&&typeof lt=="function"&&(ft=lt,lt=null),De.open(et,L,!0),V==null||"accept"in Le||(Le.accept=V+",*/*"),De.setRequestHeader)for(var xt in Le)De.setRequestHeader(xt,Le[xt]);return V!=null&&De.overrideMimeType&&De.overrideMimeType(V),Ue!=null&&(De.responseType=Ue),ft!=null&&ue.on("error",ft).on("load",function(St){ft(null,St)}),xe.beforesend.call(ue,De),De.send(lt??null),ue},ue.abort=function(){return De.abort(),ue},o.rebind(ue,xe,"on"),ne==null?ue:ue.get(function(et){return et.length===1?function(lt,ft){et(lt==null?ft:null)}:et}(ne))}Tn.forEach(function(L,V){Tn.set(L,hn(V))}),o.functor=Rn,o.xhr=Pn(I),o.dsv=function(L,V){var J=new RegExp('["'+L+`
]`),ne=L.charCodeAt(0);function ue(qe,et,lt){arguments.length<3&&(lt=et,et=null);var ft=jn(qe,V,et==null?xe:Le(et),lt);return ft.row=function(xt){return arguments.length?ft.response((et=xt)==null?xe:Le(xt)):et},ft}function xe(qe){return ue.parse(qe.responseText)}function Le(qe){return function(et){return ue.parse(et.responseText,qe)}}function De(qe){return qe.map(Ue).join(L)}function Ue(qe){return J.test(qe)?'"'+qe.replace(/\"/g,'""')+'"':qe}return ue.parse=function(qe,et){var lt;return ue.parseRows(qe,function(ft,xt){if(lt)return lt(ft,xt-1);var St=function(wt){for(var Dt={},Et=ft.length,Yt=0;Yt<Et;++Yt)Dt[ft[Yt]]=wt[Yt];return Dt};lt=et?function(wt,Dt){return et(St(wt),Dt)}:St})},ue.parseRows=function(qe,et){var lt,ft,xt={},St={},wt=[],Dt=qe.length,Et=0,Yt=0;function qt(){if(Et>=Dt)return St;if(ft)return ft=!1,xt;var fn=Et;if(qe.charCodeAt(fn)===34){for(var gn=fn;gn++<Dt;)if(qe.charCodeAt(gn)===34){if(qe.charCodeAt(gn+1)!==34)break;++gn}return Et=gn+2,(kn=qe.charCodeAt(gn+1))===13?(ft=!0,qe.charCodeAt(gn+2)===10&&++Et):kn===10&&(ft=!0),qe.slice(fn+1,gn).replace(/""/g,'"')}for(;Et<Dt;){var kn,On=1;if((kn=qe.charCodeAt(Et++))===10)ft=!0;else if(kn===13)ft=!0,qe.charCodeAt(Et)===10&&(++Et,++On);else if(kn!==ne)continue;return qe.slice(fn,Et-On)}return qe.slice(fn)}for(;(lt=qt())!==St;){for(var Bt=[];lt!==xt&&lt!==St;)Bt.push(lt),lt=qt();et&&(Bt=et(Bt,Yt++))==null||wt.push(Bt)}return wt},ue.format=function(qe){if(Array.isArray(qe[0]))return ue.formatRows(qe);var et=new U,lt=[];return qe.forEach(function(ft){for(var xt in ft)et.has(xt)||lt.push(et.add(xt))}),[lt.map(Ue).join(L)].concat(qe.map(function(ft){return lt.map(function(xt){return Ue(ft[xt])}).join(L)})).join(`
`)},ue.formatRows=function(qe){return qe.map(De).join(`
`)},ue},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("	","text/tab-separated-values");var Jn,$n,Gn,lr,Jt=this[W(this,"requestAnimationFrame")]||function(L){setTimeout(L,17)};function Qt(L,V,J){var ne=arguments.length;ne<2&&(V=0),ne<3&&(J=Date.now());var ue={c:L,t:J+V,n:null};return $n?$n.n=ue:Jn=ue,$n=ue,Gn||(lr=clearTimeout(lr),Gn=1,Jt(En)),ue}function En(){var L=pn(),V=Cn()-L;V>24?(isFinite(V)&&(clearTimeout(lr),lr=setTimeout(En,V)),Gn=0):(Gn=1,Jt(En))}function pn(){for(var L=Date.now(),V=Jn;V;)L>=V.t&&V.c(L-V.t)&&(V.c=null),V=V.n;return L}function Cn(){for(var L,V=Jn,J=1/0;V;)V.c?(V.t<J&&(J=V.t),V=(L=V).n):V=L?L.n=V.n:Jn=V.n;return $n=L,J}function Vn(L){return L[0]}function Fn(L){return L[1]}function Yn(L){for(var V,J,ne,ue=L.length,xe=[0,1],Le=2,De=2;De<ue;De++){for(;Le>1&&(V=L[xe[Le-2]],J=L[xe[Le-1]],ne=L[De],(J[0]-V[0])*(ne[1]-V[1])-(J[1]-V[1])*(ne[0]-V[0])<=0);)--Le;xe[Le++]=De}return xe.slice(0,Le)}function fr(L,V){return L[0]-V[0]||L[1]-V[1]}o.timer=function(){Qt.apply(this,arguments)},o.timer.flush=function(){pn(),Cn()},o.round=function(L,V){return V?Math.round(L*(V=Math.pow(10,V)))/V:Math.round(L)},o.geom={},o.geom.hull=function(L){var V=Vn,J=Fn;if(arguments.length)return ne(L);function ne(ue){if(ue.length<3)return[];var xe,Le=Rn(V),De=Rn(J),Ue=ue.length,qe=[],et=[];for(xe=0;xe<Ue;xe++)qe.push([+Le.call(this,ue[xe],xe),+De.call(this,ue[xe],xe),xe]);for(qe.sort(fr),xe=0;xe<Ue;xe++)et.push([qe[xe][0],-qe[xe][1]]);var lt=Yn(qe),ft=Yn(et),xt=ft[0]===lt[0],St=ft[ft.length-1]===lt[lt.length-1],wt=[];for(xe=lt.length-1;xe>=0;--xe)wt.push(ue[qe[lt[xe]][2]]);for(xe=+xt;xe<ft.length-St;++xe)wt.push(ue[qe[ft[xe]][2]]);return wt}return ne.x=function(ue){return arguments.length?(V=ue,ne):V},ne.y=function(ue){return arguments.length?(J=ue,ne):J},ne},o.geom.polygon=function(L){return Y(L,Zt),L};var Zt=o.geom.polygon.prototype=[];function dn(L,V,J){return(J[0]-V[0])*(L[1]-V[1])<(J[1]-V[1])*(L[0]-V[0])}function bt(L,V,J,ne){var ue=L[0],xe=J[0],Le=V[0]-ue,De=ne[0]-xe,Ue=L[1],qe=J[1],et=V[1]-Ue,lt=ne[1]-qe,ft=(De*(Ue-qe)-lt*(ue-xe))/(lt*Le-De*et);return[ue+ft*Le,Ue+ft*et]}function Ut(L){var V=L[0],J=L[L.length-1];return!(V[0]-J[0]||V[1]-J[1])}Zt.area=function(){for(var L,V=-1,J=this.length,ne=this[J-1],ue=0;++V<J;)L=ne,ne=this[V],ue+=L[1]*ne[0]-L[0]*ne[1];return .5*ue},Zt.centroid=function(L){var V,J,ne=-1,ue=this.length,xe=0,Le=0,De=this[ue-1];for(arguments.length||(L=-1/(6*this.area()));++ne<ue;)V=De,De=this[ne],J=V[0]*De[1]-De[0]*V[1],xe+=(V[0]+De[0])*J,Le+=(V[1]+De[1])*J;return[xe*L,Le*L]},Zt.clip=function(L){for(var V,J,ne,ue,xe,Le,De=Ut(L),Ue=-1,qe=this.length-Ut(this),et=this[qe-1];++Ue<qe;){for(V=L.slice(),L.length=0,ue=this[Ue],xe=V[(ne=V.length-De)-1],J=-1;++J<ne;)dn(Le=V[J],et,ue)?(dn(xe,et,ue)||L.push(bt(xe,Le,et,ue)),L.push(Le)):dn(xe,et,ue)&&L.push(bt(xe,Le,et,ue)),xe=Le;De&&L.push(L[0]),et=ue}return L};var Xt,un,cn,vn,en,Vt=[],Ht=[];function tn(){ii(this),this.edge=this.site=this.circle=null}function sn(L){var V=Vt.pop()||new tn;return V.site=L,V}function wn(L){ur(L),cn.remove(L),Vt.push(L),ii(L)}function An(L){var V=L.circle,J=V.x,ne=V.cy,ue={x:J,y:ne},xe=L.P,Le=L.N,De=[L];wn(L);for(var Ue=xe;Ue.circle&&g(J-Ue.circle.x)<Je&&g(ne-Ue.circle.cy)<Je;)xe=Ue.P,De.unshift(Ue),wn(Ue),Ue=xe;De.unshift(Ue),ur(Ue);for(var qe=Le;qe.circle&&g(J-qe.circle.x)<Je&&g(ne-qe.circle.cy)<Je;)Le=qe.N,De.push(qe),wn(qe),qe=Le;De.push(qe),ur(qe);var et,lt=De.length;for(et=1;et<lt;++et)qe=De[et],Ue=De[et-1],gr(qe.edge,Ue.site,qe.site,ue);Ue=De[0],(qe=De[lt-1]).edge=rr(Ue.site,qe.site,null,ue),Zn(Ue),Zn(qe)}function Dn(L){for(var V,J,ne,ue,xe=L.x,Le=L.y,De=cn._;De;)if((ne=Bn(De,Le)-xe)>Je)De=De.L;else{if(!((ue=xe-Xn(De,Le))>Je)){ne>-Je?(V=De.P,J=De):ue>-Je?(V=De,J=De.N):V=J=De;break}if(!De.R){V=De;break}De=De.R}var Ue=sn(L);if(cn.insert(V,Ue),V||J){if(V===J)return ur(V),J=sn(V.site),cn.insert(Ue,J),Ue.edge=J.edge=rr(V.site,Ue.site),Zn(V),void Zn(J);if(J){ur(V),ur(J);var qe=V.site,et=qe.x,lt=qe.y,ft=L.x-et,xt=L.y-lt,St=J.site,wt=St.x-et,Dt=St.y-lt,Et=2*(ft*Dt-xt*wt),Yt=ft*ft+xt*xt,qt=wt*wt+Dt*Dt,Bt={x:(Dt*Yt-xt*qt)/Et+et,y:(ft*qt-wt*Yt)/Et+lt};gr(J.edge,qe,St,Bt),Ue.edge=rr(qe,L,null,Bt),J.edge=rr(L,St,null,Bt),Zn(V),Zn(J)}else Ue.edge=rr(V.site,Ue.site)}}function Bn(L,V){var J=L.site,ne=J.x,ue=J.y,xe=ue-V;if(!xe)return ne;var Le=L.P;if(!Le)return-1/0;var De=(J=Le.site).x,Ue=J.y,qe=Ue-V;if(!qe)return De;var et=De-ne,lt=1/xe-1/qe,ft=et/qe;return lt?(-ft+Math.sqrt(ft*ft-2*lt*(et*et/(-2*qe)-Ue+qe/2+ue-xe/2)))/lt+ne:(ne+De)/2}function Xn(L,V){var J=L.N;if(J)return Bn(J,V);var ne=L.site;return ne.y===V?ne.x:1/0}function Un(L){this.site=L,this.edges=[]}function tr(L,V){return V.angle-L.angle}function Qn(){ii(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zn(L){var V=L.P,J=L.N;if(V&&J){var ne=V.site,ue=L.site,xe=J.site;if(ne!==xe){var Le=ue.x,De=ue.y,Ue=ne.x-Le,qe=ne.y-De,et=xe.x-Le,lt=2*(Ue*(Dt=xe.y-De)-qe*et);if(!(lt>=-Tt)){var ft=Ue*Ue+qe*qe,xt=et*et+Dt*Dt,St=(Dt*ft-qe*xt)/lt,wt=(Ue*xt-et*ft)/lt,Dt=wt+De,Et=Ht.pop()||new Qn;Et.arc=L,Et.site=ue,Et.x=St+Le,Et.y=Dt+Math.sqrt(St*St+wt*wt),Et.cy=Dt,L.circle=Et;for(var Yt=null,qt=en._;qt;)if(Et.y<qt.y||Et.y===qt.y&&Et.x<=qt.x){if(!qt.L){Yt=qt.P;break}qt=qt.L}else{if(!qt.R){Yt=qt;break}qt=qt.R}en.insert(Yt,Et),Yt||(vn=Et)}}}}function ur(L){var V=L.circle;V&&(V.P||(vn=V.N),en.remove(V),Ht.push(V),ii(V),L.circle=null)}function mr(L,V){var J=L.b;if(J)return!0;var ne,ue,xe=L.a,Le=V[0][0],De=V[1][0],Ue=V[0][1],qe=V[1][1],et=L.l,lt=L.r,ft=et.x,xt=et.y,St=lt.x,wt=lt.y,Dt=(ft+St)/2,Et=(xt+wt)/2;if(wt===xt){if(Dt<Le||Dt>=De)return;if(ft>St){if(xe){if(xe.y>=qe)return}else xe={x:Dt,y:Ue};J={x:Dt,y:qe}}else{if(xe){if(xe.y<Ue)return}else xe={x:Dt,y:qe};J={x:Dt,y:Ue}}}else if(ue=Et-(ne=(ft-St)/(wt-xt))*Dt,ne<-1||ne>1)if(ft>St){if(xe){if(xe.y>=qe)return}else xe={x:(Ue-ue)/ne,y:Ue};J={x:(qe-ue)/ne,y:qe}}else{if(xe){if(xe.y<Ue)return}else xe={x:(qe-ue)/ne,y:qe};J={x:(Ue-ue)/ne,y:Ue}}else if(xt<wt){if(xe){if(xe.x>=De)return}else xe={x:Le,y:ne*Le+ue};J={x:De,y:ne*De+ue}}else{if(xe){if(xe.x<Le)return}else xe={x:De,y:ne*De+ue};J={x:Le,y:ne*Le+ue}}return L.a=xe,L.b=J,!0}function hr(L,V){this.l=L,this.r=V,this.a=this.b=null}function rr(L,V,J,ne){var ue=new hr(L,V);return Xt.push(ue),J&&gr(ue,L,V,J),ne&&gr(ue,V,L,ne),un[L.i].edges.push(new xr(ue,L,V)),un[V.i].edges.push(new xr(ue,V,L)),ue}function gr(L,V,J,ne){L.a||L.b?L.l===J?L.b=ne:L.a=ne:(L.a=ne,L.l=V,L.r=J)}function xr(L,V,J){var ne=L.a,ue=L.b;this.edge=L,this.site=V,this.angle=J?Math.atan2(J.y-V.y,J.x-V.x):L.l===V?Math.atan2(ue.x-ne.x,ne.y-ue.y):Math.atan2(ne.x-ue.x,ue.y-ne.y)}function Pr(){this._=null}function ii(L){L.U=L.C=L.L=L.R=L.P=L.N=null}function oi(L,V){var J=V,ne=V.R,ue=J.U;ue?ue.L===J?ue.L=ne:ue.R=ne:L._=ne,ne.U=ue,J.U=ne,J.R=ne.L,J.R&&(J.R.U=J),ne.L=J}function Vi(L,V){var J=V,ne=V.L,ue=J.U;ue?ue.L===J?ue.L=ne:ue.R=ne:L._=ne,ne.U=ue,J.U=ne,J.L=ne.R,J.L&&(J.L.U=J),ne.R=J}function ti(L){for(;L.L;)L=L.L;return L}function ki(L,V){var J,ne,ue,xe=L.sort(Or).pop();for(Xt=[],un=new Array(L.length),cn=new Pr,en=new Pr;;)if(ue=vn,xe&&(!ue||xe.y<ue.y||xe.y===ue.y&&xe.x<ue.x))xe.x===J&&xe.y===ne||(un[xe.i]=new Un(xe),Dn(xe),J=xe.x,ne=xe.y),xe=L.pop();else{if(!ue)break;An(ue.arc)}V&&(function(De){for(var Ue,qe,et,lt,ft,xt=Xt,St=(qe=De[0][0],et=De[0][1],lt=De[1][0],ft=De[1][1],function(Dt){var Et,Yt=Dt.a,qt=Dt.b,Bt=Yt.x,fn=Yt.y,gn=0,kn=1,On=qt.x-Bt,Nn=qt.y-fn;if(Et=qe-Bt,On||!(Et>0)){if(Et/=On,On<0){if(Et<gn)return;Et<kn&&(kn=Et)}else if(On>0){if(Et>kn)return;Et>gn&&(gn=Et)}if(Et=lt-Bt,On||!(Et<0)){if(Et/=On,On<0){if(Et>kn)return;Et>gn&&(gn=Et)}else if(On>0){if(Et<gn)return;Et<kn&&(kn=Et)}if(Et=et-fn,Nn||!(Et>0)){if(Et/=Nn,Nn<0){if(Et<gn)return;Et<kn&&(kn=Et)}else if(Nn>0){if(Et>kn)return;Et>gn&&(gn=Et)}if(Et=ft-fn,Nn||!(Et<0)){if(Et/=Nn,Nn<0){if(Et>kn)return;Et>gn&&(gn=Et)}else if(Nn>0){if(Et<gn)return;Et<kn&&(kn=Et)}return gn>0&&(Dt.a={x:Bt+gn*On,y:fn+gn*Nn}),kn<1&&(Dt.b={x:Bt+kn*On,y:fn+kn*Nn}),Dt}}}}}),wt=xt.length;wt--;)(!mr(Ue=xt[wt],De)||!St(Ue)||g(Ue.a.x-Ue.b.x)<Je&&g(Ue.a.y-Ue.b.y)<Je)&&(Ue.a=Ue.b=null,xt.splice(wt,1))}(V),function(De){for(var Ue,qe,et,lt,ft,xt,St,wt,Dt,Et,Yt=De[0][0],qt=De[1][0],Bt=De[0][1],fn=De[1][1],gn=un,kn=gn.length;kn--;)if((ft=gn[kn])&&ft.prepare())for(wt=(St=ft.edges).length,xt=0;xt<wt;)et=(Et=St[xt].end()).x,lt=Et.y,Ue=(Dt=St[++xt%wt].start()).x,qe=Dt.y,(g(et-Ue)>Je||g(lt-qe)>Je)&&(St.splice(xt,0,new xr((On=ft.site,Nn=Et,er=g(et-Yt)<Je&&fn-lt>Je?{x:Yt,y:g(Ue-Yt)<Je?qe:fn}:g(lt-fn)<Je&&qt-et>Je?{x:g(qe-fn)<Je?Ue:qt,y:fn}:g(et-qt)<Je&&lt-Bt>Je?{x:qt,y:g(Ue-qt)<Je?qe:Bt}:g(lt-Bt)<Je&&et-Yt>Je?{x:g(qe-Bt)<Je?Ue:Yt,y:Bt}:null,or=void 0,(or=new hr(On,null)).a=Nn,or.b=er,Xt.push(or),or),ft.site,null)),++wt);var On,Nn,er,or}(V));var Le={cells:un,edges:Xt};return cn=en=Xt=un=null,Le}function Or(L,V){return V.y-L.y||V.x-L.x}Un.prototype.prepare=function(){for(var L,V=this.edges,J=V.length;J--;)(L=V[J].edge).b&&L.a||V.splice(J,1);return V.sort(tr),V.length},xr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Pr.prototype={insert:function(L,V){var J,ne,ue;if(L){if(V.P=L,V.N=L.N,L.N&&(L.N.P=V),L.N=V,L.R){for(L=L.R;L.L;)L=L.L;L.L=V}else L.R=V;J=L}else this._?(L=ti(this._),V.P=null,V.N=L,L.P=L.L=V,J=L):(V.P=V.N=null,this._=V,J=null);for(V.L=V.R=null,V.U=J,V.C=!0,L=V;J&&J.C;)J===(ne=J.U).L?(ue=ne.R)&&ue.C?(J.C=ue.C=!1,ne.C=!0,L=ne):(L===J.R&&(oi(this,J),J=(L=J).U),J.C=!1,ne.C=!0,Vi(this,ne)):(ue=ne.L)&&ue.C?(J.C=ue.C=!1,ne.C=!0,L=ne):(L===J.L&&(Vi(this,J),J=(L=J).U),J.C=!1,ne.C=!0,oi(this,ne)),J=L.U;this._.C=!1},remove:function(L){L.N&&(L.N.P=L.P),L.P&&(L.P.N=L.N),L.N=L.P=null;var V,J,ne,ue=L.U,xe=L.L,Le=L.R;if(J=xe?Le?ti(Le):xe:Le,ue?ue.L===L?ue.L=J:ue.R=J:this._=J,xe&&Le?(ne=J.C,J.C=L.C,J.L=xe,xe.U=J,J!==Le?(ue=J.U,J.U=L.U,L=J.R,ue.L=L,J.R=Le,Le.U=J):(J.U=ue,ue=J,L=J.R)):(ne=L.C,L=J),L&&(L.U=ue),!ne)if(L&&L.C)L.C=!1;else{do{if(L===this._)break;if(L===ue.L){if((V=ue.R).C&&(V.C=!1,ue.C=!0,oi(this,ue),V=ue.R),V.L&&V.L.C||V.R&&V.R.C){V.R&&V.R.C||(V.L.C=!1,V.C=!0,Vi(this,V),V=ue.R),V.C=ue.C,ue.C=V.R.C=!1,oi(this,ue),L=this._;break}}else if((V=ue.L).C&&(V.C=!1,ue.C=!0,Vi(this,ue),V=ue.L),V.L&&V.L.C||V.R&&V.R.C){V.L&&V.L.C||(V.R.C=!1,V.C=!0,oi(this,V),V=ue.L),V.C=ue.C,ue.C=V.L.C=!1,Vi(this,ue),L=this._;break}V.C=!0,L=ue,ue=ue.U}while(!L.C);L&&(L.C=!1)}}},o.geom.voronoi=function(L){var V=Vn,J=Fn,ne=V,ue=J,xe=hi;if(L)return Le(L);function Le(Ue){var qe=new Array(Ue.length),et=xe[0][0],lt=xe[0][1],ft=xe[1][0],xt=xe[1][1];return ki(De(Ue),xe).cells.forEach(function(St,wt){var Dt=St.edges,Et=St.site;(qe[wt]=Dt.length?Dt.map(function(Yt){var qt=Yt.start();return[qt.x,qt.y]}):Et.x>=et&&Et.x<=ft&&Et.y>=lt&&Et.y<=xt?[[et,xt],[ft,xt],[ft,lt],[et,lt]]:[]).point=Ue[wt]}),qe}function De(Ue){return Ue.map(function(qe,et){return{x:Math.round(ne(qe,et)/Je)*Je,y:Math.round(ue(qe,et)/Je)*Je,i:et}})}return Le.links=function(Ue){return ki(De(Ue)).edges.filter(function(qe){return qe.l&&qe.r}).map(function(qe){return{source:Ue[qe.l.i],target:Ue[qe.r.i]}})},Le.triangles=function(Ue){var qe=[];return ki(De(Ue)).cells.forEach(function(et,lt){for(var ft,xt,St,wt,Dt=et.site,Et=et.edges.sort(tr),Yt=-1,qt=Et.length,Bt=Et[qt-1].edge,fn=Bt.l===Dt?Bt.r:Bt.l;++Yt<qt;)ft=fn,fn=(Bt=Et[Yt].edge).l===Dt?Bt.r:Bt.l,lt<ft.i&&lt<fn.i&&(St=ft,wt=fn,((xt=Dt).x-wt.x)*(St.y-xt.y)-(xt.x-St.x)*(wt.y-xt.y)<0)&&qe.push([Ue[lt],Ue[ft.i],Ue[fn.i]])}),qe},Le.x=function(Ue){return arguments.length?(ne=Rn(V=Ue),Le):V},Le.y=function(Ue){return arguments.length?(ue=Rn(J=Ue),Le):J},Le.clipExtent=function(Ue){return arguments.length?(xe=Ue??hi,Le):xe===hi?null:xe},Le.size=function(Ue){return arguments.length?Le.clipExtent(Ue&&[[0,0],Ue]):xe===hi?null:xe&&xe[1]},Le};var hi=[[-1e6,-1e6],[1e6,1e6]];function sa(L){return L.x}function Zi(L){return L.y}function uo(L,V,J,ne,ue,xe){if(!L(V,J,ne,ue,xe)){var Le=.5*(J+ue),De=.5*(ne+xe),Ue=V.nodes;Ue[0]&&uo(L,Ue[0],J,ne,Le,De),Ue[1]&&uo(L,Ue[1],Le,ne,ue,De),Ue[2]&&uo(L,Ue[2],J,De,Le,xe),Ue[3]&&uo(L,Ue[3],Le,De,ue,xe)}}function co(L,V){L=o.rgb(L),V=o.rgb(V);var J=L.r,ne=L.g,ue=L.b,xe=V.r-J,Le=V.g-ne,De=V.b-ue;return function(Ue){return"#"+$t(Math.round(J+xe*Ue))+$t(Math.round(ne+Le*Ue))+$t(Math.round(ue+De*Ue))}}function Xa(L,V){var J,ne={},ue={};for(J in L)J in V?ne[J]=Sa(L[J],V[J]):ue[J]=L[J];for(J in V)J in L||(ue[J]=V[J]);return function(xe){for(J in ne)ue[J]=ne[J](xe);return ue}}function Xi(L,V){return L=+L,V=+V,function(J){return L*(1-J)+V*J}}function Ka(L,V){var J,ne,ue,xe=Ao.lastIndex=Ho.lastIndex=0,Le=-1,De=[],Ue=[];for(L+="",V+="";(J=Ao.exec(L))&&(ne=Ho.exec(V));)(ue=ne.index)>xe&&(ue=V.slice(xe,ue),De[Le]?De[Le]+=ue:De[++Le]=ue),(J=J[0])===(ne=ne[0])?De[Le]?De[Le]+=ne:De[++Le]=ne:(De[++Le]=null,Ue.push({i:Le,x:Xi(J,ne)})),xe=Ho.lastIndex;return xe<V.length&&(ue=V.slice(xe),De[Le]?De[Le]+=ue:De[++Le]=ue),De.length<2?Ue[0]?(V=Ue[0].x,function(qe){return V(qe)+""}):function(){return V}:(V=Ue.length,function(qe){for(var et,lt=0;lt<V;++lt)De[(et=Ue[lt]).i]=et.x(qe);return De.join("")})}o.geom.delaunay=function(L){return o.geom.voronoi().triangles(L)},o.geom.quadtree=function(L,V,J,ne,ue){var xe,Le=Vn,De=Fn;if(xe=arguments.length)return Le=sa,De=Zi,xe===3&&(ue=J,ne=V,J=V=0),Ue(L);function Ue(qe){var et,lt,ft,xt,St,wt,Dt,Et,Yt,qt=Rn(Le),Bt=Rn(De);if(V!=null)wt=V,Dt=J,Et=ne,Yt=ue;else if(Et=Yt=-(wt=Dt=1/0),lt=[],ft=[],St=qe.length,xe)for(xt=0;xt<St;++xt)(et=qe[xt]).x<wt&&(wt=et.x),et.y<Dt&&(Dt=et.y),et.x>Et&&(Et=et.x),et.y>Yt&&(Yt=et.y),lt.push(et.x),ft.push(et.y);else for(xt=0;xt<St;++xt){var fn=+qt(et=qe[xt],xt),gn=+Bt(et,xt);fn<wt&&(wt=fn),gn<Dt&&(Dt=gn),fn>Et&&(Et=fn),gn>Yt&&(Yt=gn),lt.push(fn),ft.push(gn)}var kn=Et-wt,On=Yt-Dt;function Nn(Hn,ar,vr,Ar,Kn,ir,br,sr){if(!isNaN(vr)&&!isNaN(Ar))if(Hn.leaf){var Tr=Hn.x,Er=Hn.y;if(Tr!=null)if(g(Tr-vr)+g(Er-Ar)<.01)er(Hn,ar,vr,Ar,Kn,ir,br,sr);else{var Rr=Hn.point;Hn.x=Hn.y=Hn.point=null,er(Hn,Rr,Tr,Er,Kn,ir,br,sr),er(Hn,ar,vr,Ar,Kn,ir,br,sr)}else Hn.x=vr,Hn.y=Ar,Hn.point=ar}else er(Hn,ar,vr,Ar,Kn,ir,br,sr)}function er(Hn,ar,vr,Ar,Kn,ir,br,sr){var Tr=.5*(Kn+br),Er=.5*(ir+sr),Rr=vr>=Tr,Fr=Ar>=Er,jr=Fr<<1|Rr;Hn.leaf=!1,Rr?Kn=Tr:br=Tr,Fr?ir=Er:sr=Er,Nn(Hn=Hn.nodes[jr]||(Hn.nodes[jr]={leaf:!0,nodes:[],point:null,x:null,y:null}),ar,vr,Ar,Kn,ir,br,sr)}kn>On?Yt=Dt+kn:Et=wt+On;var or={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Hn){Nn(or,Hn,+qt(Hn,++xt),+Bt(Hn,xt),wt,Dt,Et,Yt)}};if(or.visit=function(Hn){uo(Hn,or,wt,Dt,Et,Yt)},or.find=function(Hn){return function(ar,vr,Ar,Kn,ir,br,sr){var Tr,Er=1/0;return function Rr(Fr,jr,qr,ui,Ai){if(!(jr>br||qr>sr||ui<Kn||Ai<ir)){if(ia=Fr.point){var ia,Ni=vr-Fr.x,Ji=Ar-Fr.y,gi=Ni*Ni+Ji*Ji;if(gi<Er){var Gr=Math.sqrt(Er=gi);Kn=vr-Gr,ir=Ar-Gr,br=vr+Gr,sr=Ar+Gr,Tr=ia}}for(var xi=Fr.nodes,ri=.5*(jr+ui),Zr=.5*(qr+Ai),bi=(Ar>=Zr)<<1|vr>=ri,Mi=bi+4;bi<Mi;++bi)if(Fr=xi[3&bi])switch(3&bi){case 0:Rr(Fr,jr,qr,ri,Zr);break;case 1:Rr(Fr,ri,qr,ui,Zr);break;case 2:Rr(Fr,jr,Zr,ri,Ai);break;case 3:Rr(Fr,ri,Zr,ui,Ai)}}}(ar,Kn,ir,br,sr),Tr}(or,Hn[0],Hn[1],wt,Dt,Et,Yt)},xt=-1,V==null){for(;++xt<St;)Nn(or,qe[xt],lt[xt],ft[xt],wt,Dt,Et,Yt);--xt}else qe.forEach(or.add);return lt=ft=qe=et=null,or}return Ue.x=function(qe){return arguments.length?(Le=qe,Ue):Le},Ue.y=function(qe){return arguments.length?(De=qe,Ue):De},Ue.extent=function(qe){return arguments.length?(qe==null?V=J=ne=ue=null:(V=+qe[0][0],J=+qe[0][1],ne=+qe[1][0],ue=+qe[1][1]),Ue):V==null?null:[[V,J],[ne,ue]]},Ue.size=function(qe){return arguments.length?(qe==null?V=J=ne=ue=null:(V=J=0,ne=+qe[0],ue=+qe[1]),Ue):V==null?null:[ne-V,ue-J]},Ue},o.interpolateRgb=co,o.interpolateObject=Xa,o.interpolateNumber=Xi,o.interpolateString=Ka;var Ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ho=new RegExp(Ao.source,"g");function Sa(L,V){for(var J,ne=o.interpolators.length;--ne>=0&&!(J=o.interpolators[ne](L,V)););return J}function Ea(L,V){var J,ne=[],ue=[],xe=L.length,Le=V.length,De=Math.min(L.length,V.length);for(J=0;J<De;++J)ne.push(Sa(L[J],V[J]));for(;J<xe;++J)ue[J]=L[J];for(;J<Le;++J)ue[J]=V[J];return function(Ue){for(J=0;J<De;++J)ue[J]=ne[J](Ue);return ue}}o.interpolate=Sa,o.interpolators=[function(L,V){var J=typeof V;return(J==="string"?Tn.has(V.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(V)?co:Ka:V instanceof Ge?co:Array.isArray(V)?Ea:J==="object"&&isNaN(V)?Xa:Xi)(L,V)}],o.interpolateArray=Ea;var Ja=function(){return I},pi=o.map({linear:Ja,poly:function(L){return function(V){return Math.pow(V,L)}},quad:function(){return Fa},cubic:function(){return Mo},sin:function(){return So},exp:function(){return ho},circle:function(){return Eo},elastic:function(L,V){var J;return arguments.length<2&&(V=.45),arguments.length?J=V/Pt*Math.asin(1/L):(L=1,J=V/4),function(ne){return 1+L*Math.pow(2,-10*ne)*Math.sin((ne-J)*Pt/V)}},back:function(L){return L||(L=1.70158),function(V){return V*V*((L+1)*V-L)}},bounce:function(){return eo}}),Ri=o.map({in:I,out:fo,"in-out":$a,"out-in":function(L){return $a(fo(L))}});function fo(L){return function(V){return 1-L(1-V)}}function $a(L){return function(V){return .5*(V<.5?L(2*V):2-L(2-2*V))}}function Fa(L){return L*L}function Mo(L){return L*L*L}function Qa(L){if(L<=0)return 0;if(L>=1)return 1;var V=L*L,J=V*L;return 4*(L<.5?J:3*(L-V)+J-.75)}function So(L){return 1-Math.cos(L*He)}function ho(L){return Math.pow(2,10*(L-1))}function Eo(L){return 1-Math.sqrt(1-L*L)}function eo(L){return L<.36363636363636365?7.5625*L*L:L<.7272727272727273?7.5625*(L-=.5454545454545454)*L+.75:L<.9090909090909091?7.5625*(L-=.8181818181818182)*L+.9375:7.5625*(L-=.9545454545454546)*L+.984375}function Ks(L,V){return V-=L,function(J){return Math.round(L+V*J)}}function Bs(L){var V,J,ne,ue=[L.a,L.b],xe=[L.c,L.d],Le=ol(ue),De=Go(ue,xe),Ue=ol(((V=xe)[0]+=(ne=-De)*(J=ue)[0],V[1]+=ne*J[1],V))||0;ue[0]*xe[1]<xe[0]*ue[1]&&(ue[0]*=-1,ue[1]*=-1,Le*=-1,De*=-1),this.rotate=(Le?Math.atan2(ue[1],ue[0]):Math.atan2(-xe[0],xe[1]))*Ne,this.translate=[L.e,L.f],this.scale=[Le,Ue],this.skew=Ue?Math.atan2(De,Ue)*Ne:0}function Go(L,V){return L[0]*V[0]+L[1]*V[1]}function ol(L){var V=Math.sqrt(Go(L,L));return V&&(L[0]/=V,L[1]/=V),V}o.ease=function(L){var V,J=L.indexOf("-"),ne=J>=0?L.slice(0,J):L,ue=J>=0?L.slice(J+1):"in";return ne=pi.get(ne)||Ja,ue=Ri.get(ue)||I,V=ue(ne.apply(null,T.call(arguments,1))),function(xe){return xe<=0?0:xe>=1?1:V(xe)}},o.interpolateHcl=function(L,V){L=o.hcl(L),V=o.hcl(V);var J=L.h,ne=L.c,ue=L.l,xe=V.h-J,Le=V.c-ne,De=V.l-ue;return isNaN(Le)&&(Le=0,ne=isNaN(ne)?V.c:ne),isNaN(xe)?(xe=0,J=isNaN(J)?V.h:J):xe>180?xe-=360:xe<-180&&(xe+=360),function(Ue){return mt(J+xe*Ue,ne+Le*Ue,ue+De*Ue)+""}},o.interpolateHsl=function(L,V){L=o.hsl(L),V=o.hsl(V);var J=L.h,ne=L.s,ue=L.l,xe=V.h-J,Le=V.s-ne,De=V.l-ue;return isNaN(Le)&&(Le=0,ne=isNaN(ne)?V.s:ne),isNaN(xe)?(xe=0,J=isNaN(J)?V.h:J):xe>180?xe-=360:xe<-180&&(xe+=360),function(Ue){return gt(J+xe*Ue,ne+Le*Ue,ue+De*Ue)+""}},o.interpolateLab=function(L,V){L=o.lab(L),V=o.lab(V);var J=L.l,ne=L.a,ue=L.b,xe=V.l-J,Le=V.a-ne,De=V.b-ue;return function(Ue){return Nt(J+xe*Ue,ne+Le*Ue,ue+De*Ue)+""}},o.interpolateRound=Ks,o.transform=function(L){var V=p.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(J){if(J!=null){V.setAttribute("transform",J);var ne=V.transform.baseVal.consolidate()}return new Bs(ne?ne.matrix:sl)})(L)},Bs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sl={a:1,b:0,c:0,d:1,e:0,f:0};function Wo(L){return L.length?L.pop()+",":""}function ll(L,V){var J=[],ne=[];return L=o.transform(L),V=o.transform(V),function(ue,xe,Le,De){if(ue[0]!==xe[0]||ue[1]!==xe[1]){var Ue=Le.push("translate(",null,",",null,")");De.push({i:Ue-4,x:Xi(ue[0],xe[0])},{i:Ue-2,x:Xi(ue[1],xe[1])})}else(xe[0]||xe[1])&&Le.push("translate("+xe+")")}(L.translate,V.translate,J,ne),function(ue,xe,Le,De){ue!==xe?(ue-xe>180?xe+=360:xe-ue>180&&(ue+=360),De.push({i:Le.push(Wo(Le)+"rotate(",null,")")-2,x:Xi(ue,xe)})):xe&&Le.push(Wo(Le)+"rotate("+xe+")")}(L.rotate,V.rotate,J,ne),function(ue,xe,Le,De){ue!==xe?De.push({i:Le.push(Wo(Le)+"skewX(",null,")")-2,x:Xi(ue,xe)}):xe&&Le.push(Wo(Le)+"skewX("+xe+")")}(L.skew,V.skew,J,ne),function(ue,xe,Le,De){if(ue[0]!==xe[0]||ue[1]!==xe[1]){var Ue=Le.push(Wo(Le)+"scale(",null,",",null,")");De.push({i:Ue-4,x:Xi(ue[0],xe[0])},{i:Ue-2,x:Xi(ue[1],xe[1])})}else xe[0]===1&&xe[1]===1||Le.push(Wo(Le)+"scale("+xe+")")}(L.scale,V.scale,J,ne),L=V=null,function(ue){for(var xe,Le=-1,De=ne.length;++Le<De;)J[(xe=ne[Le]).i]=xe.x(ue);return J.join("")}}function _l(L,V){return V=(V-=L=+L)||1/V,function(J){return(J-L)/V}}function wl(L,V){return V=(V-=L=+L)||1/V,function(J){return Math.max(0,Math.min(1,(J-L)/V))}}function Yo(L){for(var V=L.source,J=L.target,ne=function(Le,De){if(Le===De)return Le;for(var Ue=to(Le),qe=to(De),et=Ue.pop(),lt=qe.pop(),ft=null;et===lt;)ft=et,et=Ue.pop(),lt=qe.pop();return ft}(V,J),ue=[V];V!==ne;)V=V.parent,ue.push(V);for(var xe=ue.length;J!==ne;)ue.splice(xe,0,J),J=J.parent;return ue}function to(L){for(var V=[],J=L.parent;J!=null;)V.push(L),L=J,J=J.parent;return V.push(L),V}function as(L){L.fixed|=2}function Zo(L){L.fixed&=-7}function _s(L){L.fixed|=4,L.px=L.x,L.py=L.y}function Xo(L){L.fixed&=-5}function Ba(L,V,J){var ne=0,ue=0;if(L.charge=0,!L.leaf)for(var xe,Le=L.nodes,De=Le.length,Ue=-1;++Ue<De;)(xe=Le[Ue])!=null&&(Ba(xe,V,J),L.charge+=xe.charge,ne+=xe.charge*xe.cx,ue+=xe.charge*xe.cy);if(L.point){L.leaf||(L.point.x+=Math.random()-.5,L.point.y+=Math.random()-.5);var qe=V*J[L.point.index];L.charge+=L.pointCharge=qe,ne+=qe*L.point.x,ue+=qe*L.point.y}L.cx=ne/L.charge,L.cy=ue/L.charge}o.interpolateTransform=ll,o.layout={},o.layout.bundle=function(){return function(L){for(var V=[],J=-1,ne=L.length;++J<ne;)V.push(Yo(L[J]));return V}},o.layout.chord=function(){var L,V,J,ne,ue,xe,Le,De={},Ue=0;function qe(){var lt,ft,xt,St,wt,Dt={},Et=[],Yt=o.range(ne),qt=[];for(L=[],V=[],lt=0,St=-1;++St<ne;){for(ft=0,wt=-1;++wt<ne;)ft+=J[St][wt];Et.push(ft),qt.push(o.range(ne)),lt+=ft}for(ue&&Yt.sort(function(or,Hn){return ue(Et[or],Et[Hn])}),xe&&qt.forEach(function(or,Hn){or.sort(function(ar,vr){return xe(J[Hn][ar],J[Hn][vr])})}),lt=(Pt-Ue*ne)/lt,ft=0,St=-1;++St<ne;){for(xt=ft,wt=-1;++wt<ne;){var Bt=Yt[St],fn=qt[Bt][wt],gn=J[Bt][fn],kn=ft,On=ft+=gn*lt;Dt[Bt+"-"+fn]={index:Bt,subindex:fn,startAngle:kn,endAngle:On,value:gn}}V[Bt]={index:Bt,startAngle:xt,endAngle:ft,value:Et[Bt]},ft+=Ue}for(St=-1;++St<ne;)for(wt=St-1;++wt<ne;){var Nn=Dt[St+"-"+wt],er=Dt[wt+"-"+St];(Nn.value||er.value)&&L.push(Nn.value<er.value?{source:er,target:Nn}:{source:Nn,target:er})}Le&&et()}function et(){L.sort(function(lt,ft){return Le((lt.source.value+lt.target.value)/2,(ft.source.value+ft.target.value)/2)})}return De.matrix=function(lt){return arguments.length?(ne=(J=lt)&&J.length,L=V=null,De):J},De.padding=function(lt){return arguments.length?(Ue=lt,L=V=null,De):Ue},De.sortGroups=function(lt){return arguments.length?(ue=lt,L=V=null,De):ue},De.sortSubgroups=function(lt){return arguments.length?(xe=lt,L=null,De):xe},De.sortChords=function(lt){return arguments.length?(Le=lt,L&&et(),De):Le},De.chords=function(){return L||qe(),L},De.groups=function(){return V||qe(),V},De},o.layout.force=function(){var L,V,J,ne,ue,xe,Le={},De=o.dispatch("start","tick","end"),Ue=[1,1],qe=.9,et=Js,lt=Lo,ft=-30,xt=po,St=.1,wt=.64,Dt=[],Et=[];function Yt(Bt){return function(fn,gn,kn,On){if(fn.point!==Bt){var Nn=fn.cx-Bt.x,er=fn.cy-Bt.y,or=On-gn,Hn=Nn*Nn+er*er;if(or*or/wt<Hn){if(Hn<xt){var ar=fn.charge/Hn;Bt.px-=Nn*ar,Bt.py-=er*ar}return!0}fn.point&&Hn&&Hn<xt&&(ar=fn.pointCharge/Hn,Bt.px-=Nn*ar,Bt.py-=er*ar)}return!fn.charge}}function qt(Bt){Bt.px=o.event.x,Bt.py=o.event.y,Le.resume()}return Le.tick=function(){if((J*=.99)<.005)return L=null,De.end({type:"end",alpha:J=0}),!0;var Bt,fn,gn,kn,On,Nn,er,or,Hn,ar=Dt.length,vr=Et.length;for(fn=0;fn<vr;++fn)kn=(gn=Et[fn]).source,(Nn=(or=(On=gn.target).x-kn.x)*or+(Hn=On.y-kn.y)*Hn)&&(or*=Nn=J*ue[fn]*((Nn=Math.sqrt(Nn))-ne[fn])/Nn,Hn*=Nn,On.x-=or*(er=kn.weight+On.weight?kn.weight/(kn.weight+On.weight):.5),On.y-=Hn*er,kn.x+=or*(er=1-er),kn.y+=Hn*er);if((er=J*St)&&(or=Ue[0]/2,Hn=Ue[1]/2,fn=-1,er))for(;++fn<ar;)(gn=Dt[fn]).x+=(or-gn.x)*er,gn.y+=(Hn-gn.y)*er;if(ft)for(Ba(Bt=o.geom.quadtree(Dt),J,xe),fn=-1;++fn<ar;)(gn=Dt[fn]).fixed||Bt.visit(Yt(gn));for(fn=-1;++fn<ar;)(gn=Dt[fn]).fixed?(gn.x=gn.px,gn.y=gn.py):(gn.x-=(gn.px-(gn.px=gn.x))*qe,gn.y-=(gn.py-(gn.py=gn.y))*qe);De.tick({type:"tick",alpha:J})},Le.nodes=function(Bt){return arguments.length?(Dt=Bt,Le):Dt},Le.links=function(Bt){return arguments.length?(Et=Bt,Le):Et},Le.size=function(Bt){return arguments.length?(Ue=Bt,Le):Ue},Le.linkDistance=function(Bt){return arguments.length?(et=typeof Bt=="function"?Bt:+Bt,Le):et},Le.distance=Le.linkDistance,Le.linkStrength=function(Bt){return arguments.length?(lt=typeof Bt=="function"?Bt:+Bt,Le):lt},Le.friction=function(Bt){return arguments.length?(qe=+Bt,Le):qe},Le.charge=function(Bt){return arguments.length?(ft=typeof Bt=="function"?Bt:+Bt,Le):ft},Le.chargeDistance=function(Bt){return arguments.length?(xt=Bt*Bt,Le):Math.sqrt(xt)},Le.gravity=function(Bt){return arguments.length?(St=+Bt,Le):St},Le.theta=function(Bt){return arguments.length?(wt=Bt*Bt,Le):Math.sqrt(wt)},Le.alpha=function(Bt){return arguments.length?(Bt=+Bt,J?Bt>0?J=Bt:(L.c=null,L.t=NaN,L=null,De.end({type:"end",alpha:J=0})):Bt>0&&(De.start({type:"start",alpha:J=Bt}),L=Qt(Le.tick)),Le):J},Le.start=function(){var Bt,fn,gn,kn=Dt.length,On=Et.length,Nn=Ue[0],er=Ue[1];for(Bt=0;Bt<kn;++Bt)(gn=Dt[Bt]).index=Bt,gn.weight=0;for(Bt=0;Bt<On;++Bt)typeof(gn=Et[Bt]).source=="number"&&(gn.source=Dt[gn.source]),typeof gn.target=="number"&&(gn.target=Dt[gn.target]),++gn.source.weight,++gn.target.weight;for(Bt=0;Bt<kn;++Bt)gn=Dt[Bt],isNaN(gn.x)&&(gn.x=or("x",Nn)),isNaN(gn.y)&&(gn.y=or("y",er)),isNaN(gn.px)&&(gn.px=gn.x),isNaN(gn.py)&&(gn.py=gn.y);if(ne=[],typeof et=="function")for(Bt=0;Bt<On;++Bt)ne[Bt]=+et.call(this,Et[Bt],Bt);else for(Bt=0;Bt<On;++Bt)ne[Bt]=et;if(ue=[],typeof lt=="function")for(Bt=0;Bt<On;++Bt)ue[Bt]=+lt.call(this,Et[Bt],Bt);else for(Bt=0;Bt<On;++Bt)ue[Bt]=lt;if(xe=[],typeof ft=="function")for(Bt=0;Bt<kn;++Bt)xe[Bt]=+ft.call(this,Dt[Bt],Bt);else for(Bt=0;Bt<kn;++Bt)xe[Bt]=ft;function or(Hn,ar){if(!fn){for(fn=new Array(kn),ir=0;ir<kn;++ir)fn[ir]=[];for(ir=0;ir<On;++ir){var vr=Et[ir];fn[vr.source.index].push(vr.target),fn[vr.target.index].push(vr.source)}}for(var Ar,Kn=fn[Bt],ir=-1,br=Kn.length;++ir<br;)if(!isNaN(Ar=Kn[ir][Hn]))return Ar;return Math.random()*ar}return Le.resume()},Le.resume=function(){return Le.alpha(.1)},Le.stop=function(){return Le.alpha(0)},Le.drag=function(){if(V||(V=o.behavior.drag().origin(I).on("dragstart.force",as).on("drag.force",qt).on("dragend.force",Zo)),!arguments.length)return V;this.on("mouseover.force",_s).on("mouseout.force",Xo).call(V)},o.rebind(Le,De,"on")};var Js=20,Lo=1,po=1/0;function go(L,V){return o.rebind(L,V,"sort","children","value"),L.nodes=L,L.links=ss,L}function Co(L,V){for(var J=[L];(L=J.pop())!=null;)if(V(L),(ue=L.children)&&(ne=ue.length))for(var ne,ue;--ne>=0;)J.push(ue[ne])}function Ur(L,V){for(var J=[L],ne=[];(L=J.pop())!=null;)if(ne.push(L),(xe=L.children)&&(ue=xe.length))for(var ue,xe,Le=-1;++Le<ue;)J.push(xe[Le]);for(;(L=ne.pop())!=null;)V(L)}function os(L){return L.children}function Tl(L){return L.value}function Ns(L,V){return V.value-L.value}function ss(L){return o.merge(L.map(function(V){return(V.children||[]).map(function(J){return{source:V,target:J}})}))}o.layout.hierarchy=function(){var L=Ns,V=os,J=Tl;function ne(ue){var xe,Le=[ue],De=[];for(ue.depth=0;(xe=Le.pop())!=null;)if(De.push(xe),(qe=V.call(ne,xe,xe.depth))&&(Ue=qe.length)){for(var Ue,qe,et;--Ue>=0;)Le.push(et=qe[Ue]),et.parent=xe,et.depth=xe.depth+1;J&&(xe.value=0),xe.children=qe}else J&&(xe.value=+J.call(ne,xe,xe.depth)||0),delete xe.children;return Ur(ue,function(lt){var ft,xt;L&&(ft=lt.children)&&ft.sort(L),J&&(xt=lt.parent)&&(xt.value+=lt.value)}),De}return ne.sort=function(ue){return arguments.length?(L=ue,ne):L},ne.children=function(ue){return arguments.length?(V=ue,ne):V},ne.value=function(ue){return arguments.length?(J=ue,ne):J},ne.revalue=function(ue){return J&&(Co(ue,function(xe){xe.children&&(xe.value=0)}),Ur(ue,function(xe){var Le;xe.children||(xe.value=+J.call(ne,xe,xe.depth)||0),(Le=xe.parent)&&(Le.value+=xe.value)})),ue},ne},o.layout.partition=function(){var L=o.layout.hierarchy(),V=[1,1];function J(xe,Le,De,Ue){var qe=xe.children;if(xe.x=Le,xe.y=xe.depth*Ue,xe.dx=De,xe.dy=Ue,qe&&(et=qe.length)){var et,lt,ft,xt=-1;for(De=xe.value?De/xe.value:0;++xt<et;)J(lt=qe[xt],Le,ft=lt.value*De,Ue),Le+=ft}}function ne(xe){var Le=xe.children,De=0;if(Le&&(Ue=Le.length))for(var Ue,qe=-1;++qe<Ue;)De=Math.max(De,ne(Le[qe]));return 1+De}function ue(xe,Le){var De=L.call(this,xe,Le);return J(De[0],0,V[0],V[1]/ne(De[0])),De}return ue.size=function(xe){return arguments.length?(V=xe,ue):V},go(ue,L)},o.layout.pie=function(){var L=Number,V=ul,J=0,ne=Pt,ue=0;function xe(Le){var De,Ue=Le.length,qe=Le.map(function(Yt,qt){return+L.call(xe,Yt,qt)}),et=+(typeof J=="function"?J.apply(this,arguments):J),lt=(typeof ne=="function"?ne.apply(this,arguments):ne)-et,ft=Math.min(Math.abs(lt)/Ue,+(typeof ue=="function"?ue.apply(this,arguments):ue)),xt=ft*(lt<0?-1:1),St=o.sum(qe),wt=St?(lt-Ue*xt)/St:0,Dt=o.range(Ue),Et=[];return V!=null&&Dt.sort(V===ul?function(Yt,qt){return qe[qt]-qe[Yt]}:function(Yt,qt){return V(Le[Yt],Le[qt])}),Dt.forEach(function(Yt){Et[Yt]={data:Le[Yt],value:De=qe[Yt],startAngle:et,endAngle:et+=De*wt+xt,padAngle:ft}}),Et}return xe.value=function(Le){return arguments.length?(L=Le,xe):L},xe.sort=function(Le){return arguments.length?(V=Le,xe):V},xe.startAngle=function(Le){return arguments.length?(J=Le,xe):J},xe.endAngle=function(Le){return arguments.length?(ne=Le,xe):ne},xe.padAngle=function(Le){return arguments.length?(ue=Le,xe):ue},xe};var ul={};function kl(L){return L.x}function js(L){return L.y}function Al(L,V,J){L.y0=V,L.y=J}o.layout.stack=function(){var L=I,V=vo,J=Na,ne=Al,ue=kl,xe=js;function Le(De,Ue){if(!(ft=De.length))return De;var qe=De.map(function(Yt,qt){return L.call(Le,Yt,qt)}),et=qe.map(function(Yt){return Yt.map(function(qt,Bt){return[ue.call(Le,qt,Bt),xe.call(Le,qt,Bt)]})}),lt=V.call(Le,et,Ue);qe=o.permute(qe,lt),et=o.permute(et,lt);var ft,xt,St,wt,Dt=J.call(Le,et,Ue),Et=qe[0].length;for(St=0;St<Et;++St)for(ne.call(Le,qe[0][St],wt=Dt[St],et[0][St][1]),xt=1;xt<ft;++xt)ne.call(Le,qe[xt][St],wt+=et[xt-1][St][1],et[xt][St][1]);return De}return Le.values=function(De){return arguments.length?(L=De,Le):L},Le.order=function(De){return arguments.length?(V=typeof De=="function"?De:Oo.get(De)||vo,Le):V},Le.offset=function(De){return arguments.length?(J=typeof De=="function"?De:Ko.get(De)||Na,Le):J},Le.x=function(De){return arguments.length?(ue=De,Le):ue},Le.y=function(De){return arguments.length?(xe=De,Le):xe},Le.out=function(De){return arguments.length?(ne=De,Le):ne},Le};var Oo=o.map({"inside-out":function(L){var V,J,ne=L.length,ue=L.map(ls),xe=L.map(cl),Le=o.range(ne).sort(function(lt,ft){return ue[lt]-ue[ft]}),De=0,Ue=0,qe=[],et=[];for(V=0;V<ne;++V)J=Le[V],De<Ue?(De+=xe[J],qe.push(J)):(Ue+=xe[J],et.push(J));return et.reverse().concat(qe)},reverse:function(L){return o.range(L.length).reverse()},default:vo}),Ko=o.map({silhouette:function(L){var V,J,ne,ue=L.length,xe=L[0].length,Le=[],De=0,Ue=[];for(J=0;J<xe;++J){for(V=0,ne=0;V<ue;V++)ne+=L[V][J][1];ne>De&&(De=ne),Le.push(ne)}for(J=0;J<xe;++J)Ue[J]=(De-Le[J])/2;return Ue},wiggle:function(L){var V,J,ne,ue,xe,Le,De,Ue,qe,et=L.length,lt=L[0],ft=lt.length,xt=[];for(xt[0]=Ue=qe=0,J=1;J<ft;++J){for(V=0,ue=0;V<et;++V)ue+=L[V][J][1];for(V=0,xe=0,De=lt[J][0]-lt[J-1][0];V<et;++V){for(ne=0,Le=(L[V][J][1]-L[V][J-1][1])/(2*De);ne<V;++ne)Le+=(L[ne][J][1]-L[ne][J-1][1])/De;xe+=Le*L[V][J][1]}xt[J]=Ue-=ue?xe/ue*De:0,Ue<qe&&(qe=Ue)}for(J=0;J<ft;++J)xt[J]-=qe;return xt},expand:function(L){var V,J,ne,ue=L.length,xe=L[0].length,Le=1/ue,De=[];for(J=0;J<xe;++J){for(V=0,ne=0;V<ue;V++)ne+=L[V][J][1];if(ne)for(V=0;V<ue;V++)L[V][J][1]/=ne;else for(V=0;V<ue;V++)L[V][J][1]=Le}for(J=0;J<xe;++J)De[J]=0;return De},zero:Na});function vo(L){return o.range(L.length)}function Na(L){for(var V=-1,J=L[0].length,ne=[];++V<J;)ne[V]=0;return ne}function ls(L){for(var V,J=1,ne=0,ue=L[0][1],xe=L.length;J<xe;++J)(V=L[J][1])>ue&&(ne=J,ue=V);return ne}function cl(L){return L.reduce(ws,0)}function ws(L,V){return L+V[1]}function Us(L,V){return _a(L,Math.ceil(Math.log(V.length)/Math.LN2+1))}function _a(L,V){for(var J=-1,ne=+L[0],ue=(L[1]-ne)/V,xe=[];++J<=V;)xe[J]=ue*J+ne;return xe}function Vs(L){return[o.min(L),o.max(L)]}function fl(L,V){return L.value-V.value}function us(L,V){var J=L._pack_next;L._pack_next=V,V._pack_prev=L,V._pack_next=J,J._pack_prev=V}function Jo(L,V){L._pack_next=V,V._pack_prev=L}function cs(L,V){var J=V.x-L.x,ne=V.y-L.y,ue=L.r+V.r;return .999*ue*ue>J*J+ne*ne}function $o(L){if((V=L.children)&&(Ue=V.length)){var V,J,ne,ue,xe,Le,De,Ue,qe=1/0,et=-1/0,lt=1/0,ft=-1/0;if(V.forEach(Qo),(J=V[0]).x=-J.r,J.y=0,qt(J),Ue>1&&((ne=V[1]).x=ne.r,ne.y=0,qt(ne),Ue>2))for($r(J,ne,ue=V[2]),qt(ue),us(J,ue),J._pack_prev=ue,us(ue,ne),ne=J._pack_next,xe=3;xe<Ue;xe++){$r(J,ne,ue=V[xe]);var xt=0,St=1,wt=1;for(Le=ne._pack_next;Le!==ne;Le=Le._pack_next,St++)if(cs(Le,ue)){xt=1;break}if(xt==1)for(De=J._pack_prev;De!==Le._pack_prev&&!cs(De,ue);De=De._pack_prev,wt++);xt?(St<wt||St==wt&&ne.r<J.r?Jo(J,ne=Le):Jo(J=De,ne),xe--):(us(J,ue),ne=ue,qt(ue))}var Dt=(qe+et)/2,Et=(lt+ft)/2,Yt=0;for(xe=0;xe<Ue;xe++)(ue=V[xe]).x-=Dt,ue.y-=Et,Yt=Math.max(Yt,ue.r+Math.sqrt(ue.x*ue.x+ue.y*ue.y));L.r=Yt,V.forEach(Ts)}function qt(Bt){qe=Math.min(Bt.x-Bt.r,qe),et=Math.max(Bt.x+Bt.r,et),lt=Math.min(Bt.y-Bt.r,lt),ft=Math.max(Bt.y+Bt.r,ft)}}function Qo(L){L._pack_next=L._pack_prev=L}function Ts(L){delete L._pack_next,delete L._pack_prev}function qs(L,V,J,ne){var ue=L.children;if(L.x=V+=ne*L.x,L.y=J+=ne*L.y,L.r*=ne,ue)for(var xe=-1,Le=ue.length;++xe<Le;)qs(ue[xe],V,J,ne)}function $r(L,V,J){var ne=L.r+J.r,ue=V.x-L.x,xe=V.y-L.y;if(ne&&(ue||xe)){var Le=V.r+J.r,De=ue*ue+xe*xe,Ue=.5+((ne*=ne)-(Le*=Le))/(2*De),qe=Math.sqrt(Math.max(0,2*Le*(ne+De)-(ne-=De)*ne-Le*Le))/(2*De);J.x=L.x+Ue*ue+qe*xe,J.y=L.y+Ue*xe-qe*ue}else J.x=L.x+ne,J.y=L.y}function Po(L,V){return L.parent==V.parent?1:2}function Ki(L){var V=L.children;return V.length?V[0]:L.t}function ja(L){var V,J=L.children;return(V=J.length)?J[V-1]:L.t}function Wr(L,V,J){var ne=J/(V.i-L.i);V.c-=ne,V.s+=J,L.c+=ne,V.z+=J,V.m+=J}function Jr(L,V,J){return L.a.parent===V.parent?L.a:J}function wa(L){var V=L.children;return V&&V.length?wa(V[0]):L}function fs(L){var V,J=L.children;return J&&(V=J.length)?fs(J[V-1]):L}function ks(L){return{x:L.x,y:L.y,dx:L.dx,dy:L.dy}}function Hs(L,V){var J=L.x+V[3],ne=L.y+V[0],ue=L.dx-V[1]-V[3],xe=L.dy-V[0]-V[2];return ue<0&&(J+=ue/2,ue=0),xe<0&&(ne+=xe/2,xe=0),{x:J,y:ne,dx:ue,dy:xe}}function As(L){var V=L[0],J=L[L.length-1];return V<J?[V,J]:[J,V]}function Ms(L){return L.rangeExtent?L.rangeExtent():As(L.range())}function La(L,V,J,ne){var ue=J(L[0],L[1]),xe=ne(V[0],V[1]);return function(Le){return xe(ue(Le))}}function Io(L,V){var J,ne=0,ue=L.length-1,xe=L[ne],Le=L[ue];return Le<xe&&(J=ne,ne=ue,ue=J,J=xe,xe=Le,Le=J),L[ne]=V.floor(xe),L[ue]=V.ceil(Le),L}function zo(L){return L?{floor:function(V){return Math.floor(V/L)*L},ceil:function(V){return Math.ceil(V/L)*L}}:na}o.layout.histogram=function(){var L=!0,V=Number,J=Vs,ne=Us;function ue(xe,Le){for(var De,Ue,qe=[],et=xe.map(V,this),lt=J.call(this,et,Le),ft=ne.call(this,lt,et,Le),xt=(Le=-1,et.length),St=ft.length-1,wt=L?1:1/xt;++Le<St;)(De=qe[Le]=[]).dx=ft[Le+1]-(De.x=ft[Le]),De.y=0;if(St>0)for(Le=-1;++Le<xt;)(Ue=et[Le])>=lt[0]&&Ue<=lt[1]&&((De=qe[o.bisect(ft,Ue,1,St)-1]).y+=wt,De.push(xe[Le]));return qe}return ue.value=function(xe){return arguments.length?(V=xe,ue):V},ue.range=function(xe){return arguments.length?(J=Rn(xe),ue):J},ue.bins=function(xe){return arguments.length?(ne=typeof xe=="number"?function(Le){return _a(Le,xe)}:Rn(xe),ue):ne},ue.frequency=function(xe){return arguments.length?(L=!!xe,ue):L},ue},o.layout.pack=function(){var L,V=o.layout.hierarchy().sort(fl),J=0,ne=[1,1];function ue(xe,Le){var De=V.call(this,xe,Le),Ue=De[0],qe=ne[0],et=ne[1],lt=L==null?Math.sqrt:typeof L=="function"?L:function(){return L};if(Ue.x=Ue.y=0,Ur(Ue,function(xt){xt.r=+lt(xt.value)}),Ur(Ue,$o),J){var ft=J*(L?1:Math.max(2*Ue.r/qe,2*Ue.r/et))/2;Ur(Ue,function(xt){xt.r+=ft}),Ur(Ue,$o),Ur(Ue,function(xt){xt.r-=ft})}return qs(Ue,qe/2,et/2,L?1:1/Math.max(2*Ue.r/qe,2*Ue.r/et)),De}return ue.size=function(xe){return arguments.length?(ne=xe,ue):ne},ue.radius=function(xe){return arguments.length?(L=xe==null||typeof xe=="function"?xe:+xe,ue):L},ue.padding=function(xe){return arguments.length?(J=+xe,ue):J},go(ue,V)},o.layout.tree=function(){var L=o.layout.hierarchy().sort(null).value(null),V=Po,J=[1,1],ne=null;function ue(Ue,qe){var et=L.call(this,Ue,qe),lt=et[0],ft=function(qt){for(var Bt,fn={A:null,children:[qt]},gn=[fn];(Bt=gn.pop())!=null;)for(var kn,On=Bt.children,Nn=0,er=On.length;Nn<er;++Nn)gn.push((On[Nn]=kn={_:On[Nn],parent:Bt,children:(kn=On[Nn].children)&&kn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Nn}).a=kn);return fn.children[0]}(lt);if(Ur(ft,xe),ft.parent.m=-ft.z,Co(ft,Le),ne)Co(lt,De);else{var xt=lt,St=lt,wt=lt;Co(lt,function(qt){qt.x<xt.x&&(xt=qt),qt.x>St.x&&(St=qt),qt.depth>wt.depth&&(wt=qt)});var Dt=V(xt,St)/2-xt.x,Et=J[0]/(St.x+V(St,xt)/2+Dt),Yt=J[1]/(wt.depth||1);Co(lt,function(qt){qt.x=(qt.x+Dt)*Et,qt.y=qt.depth*Yt})}return et}function xe(Ue){var qe=Ue.children,et=Ue.parent.children,lt=Ue.i?et[Ue.i-1]:null;if(qe.length){(function(xt){for(var St,wt=0,Dt=0,Et=xt.children,Yt=Et.length;--Yt>=0;)(St=Et[Yt]).z+=wt,St.m+=wt,wt+=St.s+(Dt+=St.c)})(Ue);var ft=(qe[0].z+qe[qe.length-1].z)/2;lt?(Ue.z=lt.z+V(Ue._,lt._),Ue.m=Ue.z-ft):Ue.z=ft}else lt&&(Ue.z=lt.z+V(Ue._,lt._));Ue.parent.A=function(xt,St,wt){if(St){for(var Dt,Et=xt,Yt=xt,qt=St,Bt=Et.parent.children[0],fn=Et.m,gn=Yt.m,kn=qt.m,On=Bt.m;qt=ja(qt),Et=Ki(Et),qt&&Et;)Bt=Ki(Bt),(Yt=ja(Yt)).a=xt,(Dt=qt.z+kn-Et.z-fn+V(qt._,Et._))>0&&(Wr(Jr(qt,xt,wt),xt,Dt),fn+=Dt,gn+=Dt),kn+=qt.m,fn+=Et.m,On+=Bt.m,gn+=Yt.m;qt&&!ja(Yt)&&(Yt.t=qt,Yt.m+=kn-gn),Et&&!Ki(Bt)&&(Bt.t=Et,Bt.m+=fn-On,wt=xt)}return wt}(Ue,lt,Ue.parent.A||et[0])}function Le(Ue){Ue._.x=Ue.z+Ue.parent.m,Ue.m+=Ue.parent.m}function De(Ue){Ue.x*=J[0],Ue.y=Ue.depth*J[1]}return ue.separation=function(Ue){return arguments.length?(V=Ue,ue):V},ue.size=function(Ue){return arguments.length?(ne=(J=Ue)==null?De:null,ue):ne?null:J},ue.nodeSize=function(Ue){return arguments.length?(ne=(J=Ue)==null?null:De,ue):ne?J:null},go(ue,L)},o.layout.cluster=function(){var L=o.layout.hierarchy().sort(null).value(null),V=Po,J=[1,1],ne=!1;function ue(xe,Le){var De,Ue=L.call(this,xe,Le),qe=Ue[0],et=0;Ur(qe,function(wt){var Dt=wt.children;Dt&&Dt.length?(wt.x=function(Et){return Et.reduce(function(Yt,qt){return Yt+qt.x},0)/Et.length}(Dt),wt.y=function(Et){return 1+o.max(Et,function(Yt){return Yt.y})}(Dt)):(wt.x=De?et+=V(wt,De):0,wt.y=0,De=wt)});var lt=wa(qe),ft=fs(qe),xt=lt.x-V(lt,ft)/2,St=ft.x+V(ft,lt)/2;return Ur(qe,ne?function(wt){wt.x=(wt.x-qe.x)*J[0],wt.y=(qe.y-wt.y)*J[1]}:function(wt){wt.x=(wt.x-xt)/(St-xt)*J[0],wt.y=(1-(qe.y?wt.y/qe.y:1))*J[1]}),Ue}return ue.separation=function(xe){return arguments.length?(V=xe,ue):V},ue.size=function(xe){return arguments.length?(ne=(J=xe)==null,ue):ne?null:J},ue.nodeSize=function(xe){return arguments.length?(ne=(J=xe)!=null,ue):ne?J:null},go(ue,L)},o.layout.treemap=function(){var L,V=o.layout.hierarchy(),J=Math.round,ne=[1,1],ue=null,xe=ks,Le=!1,De="squarify",Ue=.5*(1+Math.sqrt(5));function qe(wt,Dt){for(var Et,Yt,qt=-1,Bt=wt.length;++qt<Bt;)Yt=(Et=wt[qt]).value*(Dt<0?0:Dt),Et.area=isNaN(Yt)||Yt<=0?0:Yt}function et(wt){var Dt=wt.children;if(Dt&&Dt.length){var Et,Yt,qt,Bt=xe(wt),fn=[],gn=Dt.slice(),kn=1/0,On=De==="slice"?Bt.dx:De==="dice"?Bt.dy:De==="slice-dice"?1&wt.depth?Bt.dy:Bt.dx:Math.min(Bt.dx,Bt.dy);for(qe(gn,Bt.dx*Bt.dy/wt.value),fn.area=0;(qt=gn.length)>0;)fn.push(Et=gn[qt-1]),fn.area+=Et.area,De!=="squarify"||(Yt=ft(fn,On))<=kn?(gn.pop(),kn=Yt):(fn.area-=fn.pop().area,xt(fn,On,Bt,!1),On=Math.min(Bt.dx,Bt.dy),fn.length=fn.area=0,kn=1/0);fn.length&&(xt(fn,On,Bt,!0),fn.length=fn.area=0),Dt.forEach(et)}}function lt(wt){var Dt=wt.children;if(Dt&&Dt.length){var Et,Yt=xe(wt),qt=Dt.slice(),Bt=[];for(qe(qt,Yt.dx*Yt.dy/wt.value),Bt.area=0;Et=qt.pop();)Bt.push(Et),Bt.area+=Et.area,Et.z!=null&&(xt(Bt,Et.z?Yt.dx:Yt.dy,Yt,!qt.length),Bt.length=Bt.area=0);Dt.forEach(lt)}}function ft(wt,Dt){for(var Et,Yt=wt.area,qt=0,Bt=1/0,fn=-1,gn=wt.length;++fn<gn;)(Et=wt[fn].area)&&(Et<Bt&&(Bt=Et),Et>qt&&(qt=Et));return Dt*=Dt,(Yt*=Yt)?Math.max(Dt*qt*Ue/Yt,Yt/(Dt*Bt*Ue)):1/0}function xt(wt,Dt,Et,Yt){var qt,Bt=-1,fn=wt.length,gn=Et.x,kn=Et.y,On=Dt?J(wt.area/Dt):0;if(Dt==Et.dx){for((Yt||On>Et.dy)&&(On=Et.dy);++Bt<fn;)(qt=wt[Bt]).x=gn,qt.y=kn,qt.dy=On,gn+=qt.dx=Math.min(Et.x+Et.dx-gn,On?J(qt.area/On):0);qt.z=!0,qt.dx+=Et.x+Et.dx-gn,Et.y+=On,Et.dy-=On}else{for((Yt||On>Et.dx)&&(On=Et.dx);++Bt<fn;)(qt=wt[Bt]).x=gn,qt.y=kn,qt.dx=On,kn+=qt.dy=Math.min(Et.y+Et.dy-kn,On?J(qt.area/On):0);qt.z=!1,qt.dy+=Et.y+Et.dy-kn,Et.x+=On,Et.dx-=On}}function St(wt){var Dt=L||V(wt),Et=Dt[0];return Et.x=Et.y=0,Et.value?(Et.dx=ne[0],Et.dy=ne[1]):Et.dx=Et.dy=0,L&&V.revalue(Et),qe([Et],Et.dx*Et.dy/Et.value),(L?lt:et)(Et),Le&&(L=Dt),Dt}return St.size=function(wt){return arguments.length?(ne=wt,St):ne},St.padding=function(wt){if(!arguments.length)return ue;function Dt(Yt){return Hs(Yt,wt)}var Et;return xe=(ue=wt)==null?ks:(Et=typeof wt)=="function"?function(Yt){var qt=wt.call(St,Yt,Yt.depth);return qt==null?ks(Yt):Hs(Yt,typeof qt=="number"?[qt,qt,qt,qt]:qt)}:(Et==="number"&&(wt=[wt,wt,wt,wt]),Dt),St},St.round=function(wt){return arguments.length?(J=wt?Math.round:Number,St):J!=Number},St.sticky=function(wt){return arguments.length?(Le=wt,L=null,St):Le},St.ratio=function(wt){return arguments.length?(Ue=wt,St):Ue},St.mode=function(wt){return arguments.length?(De=wt+"",St):De},go(St,V)},o.random={normal:function(L,V){var J=arguments.length;return J<2&&(V=1),J<1&&(L=0),function(){var ne,ue,xe;do xe=(ne=2*Math.random()-1)*ne+(ue=2*Math.random()-1)*ue;while(!xe||xe>1);return L+V*ne*Math.sqrt(-2*Math.log(xe)/xe)}},logNormal:function(){var L=o.random.normal.apply(o,arguments);return function(){return Math.exp(L())}},bates:function(L){var V=o.random.irwinHall(L);return function(){return V()/L}},irwinHall:function(L){return function(){for(var V=0,J=0;J<L;J++)V+=Math.random();return V}}},o.scale={};var na={floor:I,ceil:I};function Ss(L,V,J,ne){var ue=[],xe=[],Le=0,De=Math.min(L.length,V.length)-1;for(L[De]<L[0]&&(L=L.slice().reverse(),V=V.slice().reverse());++Le<=De;)ue.push(J(L[Le-1],L[Le])),xe.push(ne(V[Le-1],V[Le]));return function(Ue){var qe=o.bisect(L,Ue,1,De)-1;return xe[qe](ue[qe](Ue))}}function Ca(L,V,J,ne){var ue,xe;function Le(){var Ue=Math.min(L.length,V.length)>2?Ss:La,qe=ne?wl:_l;return ue=Ue(L,V,qe,J),xe=Ue(V,L,qe,Sa),De}function De(Ue){return ue(Ue)}return De.invert=function(Ue){return xe(Ue)},De.domain=function(Ue){return arguments.length?(L=Ue.map(Number),Le()):L},De.range=function(Ue){return arguments.length?(V=Ue,Le()):V},De.rangeRound=function(Ue){return De.range(Ue).interpolate(Ks)},De.clamp=function(Ue){return arguments.length?(ne=Ue,Le()):ne},De.interpolate=function(Ue){return arguments.length?(J=Ue,Le()):J},De.ticks=function(Ue){return Hi(L,Ue)},De.tickFormat=function(Ue,qe){return d3_scale_linearTickFormat(L,Ue,qe)},De.nice=function(Ue){return qi(L,Ue),Le()},De.copy=function(){return Ca(L,V,J,ne)},Le()}function Fi(L,V){return o.rebind(L,V,"range","rangeRound","interpolate","clamp")}function qi(L,V){return Io(L,zo(ai(L,V)[2])),Io(L,zo(ai(L,V)[2])),L}function ai(L,V){V==null&&(V=10);var J=As(L),ne=J[1]-J[0],ue=Math.pow(10,Math.floor(Math.log(ne/V)/Math.LN10)),xe=V/ne*ue;return xe<=.15?ue*=10:xe<=.35?ue*=5:xe<=.75&&(ue*=2),J[0]=Math.ceil(J[0]/ue)*ue,J[1]=Math.floor(J[1]/ue)*ue+.5*ue,J[2]=ue,J}function Hi(L,V){return o.range.apply(o,ai(L,V))}function no(L,V,J,ne){function ue(De){return(J?Math.log(De<0?0:De):-Math.log(De>0?0:-De))/Math.log(V)}function xe(De){return J?Math.pow(V,De):-Math.pow(V,-De)}function Le(De){return L(ue(De))}return Le.invert=function(De){return xe(L.invert(De))},Le.domain=function(De){return arguments.length?(J=De[0]>=0,L.domain((ne=De.map(Number)).map(ue)),Le):ne},Le.base=function(De){return arguments.length?(V=+De,L.domain(ne.map(ue)),Le):V},Le.nice=function(){var De=Io(ne.map(ue),J?Math:es);return L.domain(De),ne=De.map(xe),Le},Le.ticks=function(){var De=As(ne),Ue=[],qe=De[0],et=De[1],lt=Math.floor(ue(qe)),ft=Math.ceil(ue(et)),xt=V%1?2:V;if(isFinite(ft-lt)){if(J){for(;lt<ft;lt++)for(var St=1;St<xt;St++)Ue.push(xe(lt)*St);Ue.push(xe(lt))}else for(Ue.push(xe(lt));lt++<ft;)for(St=xt-1;St>0;St--)Ue.push(xe(lt)*St);for(lt=0;Ue[lt]<qe;lt++);for(ft=Ue.length;Ue[ft-1]>et;ft--);Ue=Ue.slice(lt,ft)}return Ue},Le.copy=function(){return no(L.copy(),V,J,ne)},Fi(Le,L)}o.scale.linear=function(){return Ca([0,1],[0,1],Sa,!1)},o.scale.log=function(){return no(o.scale.linear().domain([0,1]),10,!0,[1,10])};var es={floor:function(L){return-Math.ceil(-L)},ceil:function(L){return-Math.floor(-L)}};function Ua(L,V,J){var ne=Do(V),ue=Do(1/V);function xe(Le){return L(ne(Le))}return xe.invert=function(Le){return ue(L.invert(Le))},xe.domain=function(Le){return arguments.length?(L.domain((J=Le.map(Number)).map(ne)),xe):J},xe.ticks=function(Le){return Hi(J,Le)},xe.tickFormat=function(Le,De){return d3_scale_linearTickFormat(J,Le,De)},xe.nice=function(Le){return xe.domain(qi(J,Le))},xe.exponent=function(Le){return arguments.length?(ne=Do(V=Le),ue=Do(1/V),L.domain(J.map(ne)),xe):V},xe.copy=function(){return Ua(L.copy(),V,J)},Fi(xe,L)}function Do(L){return function(V){return V<0?-Math.pow(-V,L):Math.pow(V,L)}}function la(L,V){var J,ne,ue;function xe(De){return ne[((J.get(De)||(V.t==="range"?J.set(De,L.push(De)):NaN))-1)%ne.length]}function Le(De,Ue){return o.range(L.length).map(function(qe){return De+Ue*qe})}return xe.domain=function(De){if(!arguments.length)return L;L=[],J=new m;for(var Ue,qe=-1,et=De.length;++qe<et;)J.has(Ue=De[qe])||J.set(Ue,L.push(Ue));return xe[V.t].apply(xe,V.a)},xe.range=function(De){return arguments.length?(ne=De,ue=0,V={t:"range",a:arguments},xe):ne},xe.rangePoints=function(De,Ue){arguments.length<2&&(Ue=0);var qe=De[0],et=De[1],lt=L.length<2?(qe=(qe+et)/2,0):(et-qe)/(L.length-1+Ue);return ne=Le(qe+lt*Ue/2,lt),ue=0,V={t:"rangePoints",a:arguments},xe},xe.rangeRoundPoints=function(De,Ue){arguments.length<2&&(Ue=0);var qe=De[0],et=De[1],lt=L.length<2?(qe=et=Math.round((qe+et)/2),0):(et-qe)/(L.length-1+Ue)|0;return ne=Le(qe+Math.round(lt*Ue/2+(et-qe-(L.length-1+Ue)*lt)/2),lt),ue=0,V={t:"rangeRoundPoints",a:arguments},xe},xe.rangeBands=function(De,Ue,qe){arguments.length<2&&(Ue=0),arguments.length<3&&(qe=Ue);var et=De[1]<De[0],lt=De[et-0],ft=(De[1-et]-lt)/(L.length-Ue+2*qe);return ne=Le(lt+ft*qe,ft),et&&ne.reverse(),ue=ft*(1-Ue),V={t:"rangeBands",a:arguments},xe},xe.rangeRoundBands=function(De,Ue,qe){arguments.length<2&&(Ue=0),arguments.length<3&&(qe=Ue);var et=De[1]<De[0],lt=De[et-0],ft=De[1-et],xt=Math.floor((ft-lt)/(L.length-Ue+2*qe));return ne=Le(lt+Math.round((ft-lt-(L.length-Ue)*xt)/2),xt),et&&ne.reverse(),ue=Math.round(xt*(1-Ue)),V={t:"rangeRoundBands",a:arguments},xe},xe.rangeBand=function(){return ue},xe.rangeExtent=function(){return As(V.a[0])},xe.copy=function(){return la(L,V)},xe.domain(L)}o.scale.pow=function(){return Ua(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return la([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(ts)},o.scale.category20=function(){return o.scale.ordinal().range(mo)},o.scale.category20b=function(){return o.scale.ordinal().range(Oa)},o.scale.category20c=function(){return o.scale.ordinal().range(Pa)};var ts=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Kt),mo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Kt),Oa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Kt),Pa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Kt);function si(L,V){var J;function ne(){var xe=0,Le=V.length;for(J=[];++xe<Le;)J[xe-1]=o.quantile(L,xe/Le);return ue}function ue(xe){if(!isNaN(xe=+xe))return V[o.bisect(J,xe)]}return ue.domain=function(xe){return arguments.length?(L=xe.map(h).filter(c).sort(u),ne()):L},ue.range=function(xe){return arguments.length?(V=xe,ne()):V},ue.quantiles=function(){return J},ue.invertExtent=function(xe){return(xe=V.indexOf(xe))<0?[NaN,NaN]:[xe>0?J[xe-1]:L[0],xe<J.length?J[xe]:L[L.length-1]]},ue.copy=function(){return si(L,V)},ne()}function Va(L,V,J){var ne,ue;function xe(De){return J[Math.max(0,Math.min(ue,Math.floor(ne*(De-L))))]}function Le(){return ne=J.length/(V-L),ue=J.length-1,xe}return xe.domain=function(De){return arguments.length?(L=+De[0],V=+De[De.length-1],Le()):[L,V]},xe.range=function(De){return arguments.length?(J=De,Le()):J},xe.invertExtent=function(De){return[De=(De=J.indexOf(De))<0?NaN:De/ne+L,De+1/ne]},xe.copy=function(){return Va(L,V,J)},Le()}function wr(L,V){function J(ne){if(ne<=ne)return V[o.bisect(L,ne)]}return J.domain=function(ne){return arguments.length?(L=ne,J):L},J.range=function(ne){return arguments.length?(V=ne,J):V},J.invertExtent=function(ne){return ne=V.indexOf(ne),[L[ne-1],L[ne]]},J.copy=function(){return wr(L,V)},J}function Es(L){function V(J){return+J}return V.invert=V,V.domain=V.range=function(J){return arguments.length?(L=J.map(V),V):L},V.ticks=function(J){return Hi(L,J)},V.tickFormat=function(J,ne){return d3_scale_linearTickFormat(L,J,ne)},V.copy=function(){return Es(L)},V}function $s(){return 0}o.scale.quantile=function(){return si([],[])},o.scale.quantize=function(){return Va(0,1,[0,1])},o.scale.threshold=function(){return wr([.5],[0,1])},o.scale.identity=function(){return Es([0,1])},o.svg={},o.svg.arc=function(){var L=Fo,V=ns,J=$s,ne=Ro,ue=hs,xe=dr,Le=Ls;function De(){var qe=Math.max(0,+L.apply(this,arguments)),et=Math.max(0,+V.apply(this,arguments)),lt=ue.apply(this,arguments)-He,ft=xe.apply(this,arguments)-He,xt=Math.abs(ft-lt),St=lt>ft?0:1;if(et<qe&&(wt=et,et=qe,qe=wt),xt>=Mt)return Ue(et,St)+(qe?Ue(qe,1-St):"")+"Z";var wt,Dt,Et,Yt,qt,Bt,fn,gn,kn,On,Nn,er,or=0,Hn=0,ar=[];if((Yt=(+Le.apply(this,arguments)||0)/2)&&(Et=ne===Ro?Math.sqrt(qe*qe+et*et):+ne.apply(this,arguments),St||(Hn*=-1),et&&(Hn=We(Et/et*Math.sin(Yt))),qe&&(or=We(Et/qe*Math.sin(Yt)))),et){qt=et*Math.cos(lt+Hn),Bt=et*Math.sin(lt+Hn),fn=et*Math.cos(ft-Hn),gn=et*Math.sin(ft-Hn);var vr=Math.abs(ft-lt-2*Hn)<=Ot?0:1;if(Hn&&yo(qt,Bt,fn,gn)===St^vr){var Ar=(lt+ft)/2;qt=et*Math.cos(Ar),Bt=et*Math.sin(Ar),fn=gn=null}}else qt=Bt=0;if(qe){kn=qe*Math.cos(ft-or),On=qe*Math.sin(ft-or),Nn=qe*Math.cos(lt+or),er=qe*Math.sin(lt+or);var Kn=Math.abs(lt-ft+2*or)<=Ot?0:1;if(or&&yo(kn,On,Nn,er)===1-St^Kn){var ir=(lt+ft)/2;kn=qe*Math.cos(ir),On=qe*Math.sin(ir),Nn=er=null}}else kn=On=0;if(xt>Je&&(wt=Math.min(Math.abs(et-qe)/2,+J.apply(this,arguments)))>.001){Dt=qe<et^St?0:1;var br=wt,sr=wt;if(xt<Ot){var Tr=Nn==null?[kn,On]:fn==null?[qt,Bt]:bt([qt,Bt],[Nn,er],[fn,gn],[kn,On]),Er=qt-Tr[0],Rr=Bt-Tr[1],Fr=fn-Tr[0],jr=gn-Tr[1],qr=1/Math.sin(Math.acos((Er*Fr+Rr*jr)/(Math.sqrt(Er*Er+Rr*Rr)*Math.sqrt(Fr*Fr+jr*jr)))/2),ui=Math.sqrt(Tr[0]*Tr[0]+Tr[1]*Tr[1]);sr=Math.min(wt,(qe-ui)/(qr-1)),br=Math.min(wt,(et-ui)/(qr+1))}if(fn!=null){var Ai=Bi(Nn==null?[kn,On]:[Nn,er],[qt,Bt],et,br,St),ia=Bi([fn,gn],[kn,On],et,br,St);wt===br?ar.push("M",Ai[0],"A",br,",",br," 0 0,",Dt," ",Ai[1],"A",et,",",et," 0 ",1-St^yo(Ai[1][0],Ai[1][1],ia[1][0],ia[1][1]),",",St," ",ia[1],"A",br,",",br," 0 0,",Dt," ",ia[0]):ar.push("M",Ai[0],"A",br,",",br," 0 1,",Dt," ",ia[0])}else ar.push("M",qt,",",Bt);if(Nn!=null){var Ni=Bi([qt,Bt],[Nn,er],qe,-sr,St),Ji=Bi([kn,On],fn==null?[qt,Bt]:[fn,gn],qe,-sr,St);wt===sr?ar.push("L",Ji[0],"A",sr,",",sr," 0 0,",Dt," ",Ji[1],"A",qe,",",qe," 0 ",St^yo(Ji[1][0],Ji[1][1],Ni[1][0],Ni[1][1]),",",1-St," ",Ni[1],"A",sr,",",sr," 0 0,",Dt," ",Ni[0]):ar.push("L",Ji[0],"A",sr,",",sr," 0 0,",Dt," ",Ni[0])}else ar.push("L",kn,",",On)}else ar.push("M",qt,",",Bt),fn!=null&&ar.push("A",et,",",et," 0 ",vr,",",St," ",fn,",",gn),ar.push("L",kn,",",On),Nn!=null&&ar.push("A",qe,",",qe," 0 ",Kn,",",1-St," ",Nn,",",er);return ar.push("Z"),ar.join("")}function Ue(qe,et){return"M0,"+qe+"A"+qe+","+qe+" 0 1,"+et+" 0,"+-qe+"A"+qe+","+qe+" 0 1,"+et+" 0,"+qe}return De.innerRadius=function(qe){return arguments.length?(L=Rn(qe),De):L},De.outerRadius=function(qe){return arguments.length?(V=Rn(qe),De):V},De.cornerRadius=function(qe){return arguments.length?(J=Rn(qe),De):J},De.padRadius=function(qe){return arguments.length?(ne=qe==Ro?Ro:Rn(qe),De):ne},De.startAngle=function(qe){return arguments.length?(ue=Rn(qe),De):ue},De.endAngle=function(qe){return arguments.length?(xe=Rn(qe),De):xe},De.padAngle=function(qe){return arguments.length?(Le=Rn(qe),De):Le},De.centroid=function(){var qe=(+L.apply(this,arguments)+ +V.apply(this,arguments))/2,et=(+ue.apply(this,arguments)+ +xe.apply(this,arguments))/2-He;return[Math.cos(et)*qe,Math.sin(et)*qe]},De};var Ro="auto";function Fo(L){return L.innerRadius}function ns(L){return L.outerRadius}function hs(L){return L.startAngle}function dr(L){return L.endAngle}function Ls(L){return L&&L.padAngle}function yo(L,V,J,ne){return(L-J)*V-(V-ne)*L>0?0:1}function Bi(L,V,J,ne,ue){var xe=L[0]-V[0],Le=L[1]-V[1],De=(ue?ne:-ne)/Math.sqrt(xe*xe+Le*Le),Ue=De*Le,qe=-De*xe,et=L[0]+Ue,lt=L[1]+qe,ft=V[0]+Ue,xt=V[1]+qe,St=(et+ft)/2,wt=(lt+xt)/2,Dt=ft-et,Et=xt-lt,Yt=Dt*Dt+Et*Et,qt=J-ne,Bt=et*xt-ft*lt,fn=(Et<0?-1:1)*Math.sqrt(Math.max(0,qt*qt*Yt-Bt*Bt)),gn=(Bt*Et-Dt*fn)/Yt,kn=(-Bt*Dt-Et*fn)/Yt,On=(Bt*Et+Dt*fn)/Yt,Nn=(-Bt*Dt+Et*fn)/Yt,er=gn-St,or=kn-wt,Hn=On-St,ar=Nn-wt;return er*er+or*or>Hn*Hn+ar*ar&&(gn=On,kn=Nn),[[gn-Ue,kn-qe],[gn*J/qt,kn*J/qt]]}function Bo(){return!0}function qa(L){var V=Vn,J=Fn,ne=Bo,ue=ra,xe=ue.key,Le=.7;function De(Ue){var qe,et=[],lt=[],ft=-1,xt=Ue.length,St=Rn(V),wt=Rn(J);function Dt(){et.push("M",ue(L(lt),Le))}for(;++ft<xt;)ne.call(this,qe=Ue[ft],ft)?lt.push([+St.call(this,qe,ft),+wt.call(this,qe,ft)]):lt.length&&(Dt(),lt=[]);return lt.length&&Dt(),et.length?et.join(""):null}return De.x=function(Ue){return arguments.length?(V=Ue,De):V},De.y=function(Ue){return arguments.length?(J=Ue,De):J},De.defined=function(Ue){return arguments.length?(ne=Ue,De):ne},De.interpolate=function(Ue){return arguments.length?(xe=typeof Ue=="function"?ue=Ue:(ue=Ia.get(Ue)||ra).key,De):xe},De.tension=function(Ue){return arguments.length?(Le=Ue,De):Le},De}o.svg.line=function(){return qa(I)};var Ia=o.map({linear:ra,"linear-closed":ro,step:function(L){for(var V=0,J=L.length,ne=L[0],ue=[ne[0],",",ne[1]];++V<J;)ue.push("H",(ne[0]+(ne=L[V])[0])/2,"V",ne[1]);return J>1&&ue.push("H",ne[0]),ue.join("")},"step-before":za,"step-after":xo,basis:Hr,"basis-open":function(L){if(L.length<4)return ra(L);for(var V,J=[],ne=-1,ue=L.length,xe=[0],Le=[0];++ne<3;)V=L[ne],xe.push(V[0]),Le.push(V[1]);for(J.push(Gi(ca,xe)+","+Gi(ca,Le)),--ne;++ne<ue;)V=L[ne],xe.shift(),xe.push(V[0]),Le.shift(),Le.push(V[1]),ps(J,xe,Le);return J.join("")},"basis-closed":function(L){for(var V,J,ne=-1,ue=L.length,xe=ue+4,Le=[],De=[];++ne<4;)J=L[ne%ue],Le.push(J[0]),De.push(J[1]);for(V=[Gi(ca,Le),",",Gi(ca,De)],--ne;++ne<xe;)J=L[ne%ue],Le.shift(),Le.push(J[0]),De.shift(),De.push(J[1]),ps(V,Le,De);return V.join("")},bundle:function(L,V){var J=L.length-1;if(J)for(var ne,ue,xe=L[0][0],Le=L[0][1],De=L[J][0]-xe,Ue=L[J][1]-Le,qe=-1;++qe<=J;)ue=qe/J,(ne=L[qe])[0]=V*ne[0]+(1-V)*(xe+ue*De),ne[1]=V*ne[1]+(1-V)*(Le+ue*Ue);return Hr(L)},cardinal:function(L,V){return L.length<3?ra(L):L[0]+Cs(L,No(L,V))},"cardinal-open":function(L,V){return L.length<4?ra(L):L[1]+Cs(L.slice(1,-1),No(L,V))},"cardinal-closed":function(L,V){return L.length<3?ro(L):L[0]+Cs((L.push(L[0]),L),No([L[L.length-2]].concat(L,[L[1]]),V))},monotone:function(L){return L.length<3?ra(L):L[0]+Cs(L,function(V){for(var J,ne,ue,xe,Le=[],De=function(et){for(var lt=0,ft=et.length-1,xt=[],St=et[0],wt=et[1],Dt=xt[0]=ds(St,wt);++lt<ft;)xt[lt]=(Dt+(Dt=ds(St=wt,wt=et[lt+1])))/2;return xt[lt]=Dt,xt}(V),Ue=-1,qe=V.length-1;++Ue<qe;)J=ds(V[Ue],V[Ue+1]),g(J)<Je?De[Ue]=De[Ue+1]=0:(xe=(ne=De[Ue]/J)*ne+(ue=De[Ue+1]/J)*ue)>9&&(xe=3*J/Math.sqrt(xe),De[Ue]=xe*ne,De[Ue+1]=xe*ue);for(Ue=-1;++Ue<=qe;)xe=(V[Math.min(qe,Ue+1)][0]-V[Math.max(0,Ue-1)][0])/(6*(1+De[Ue]*De[Ue])),Le.push([xe||0,De[Ue]*xe||0]);return Le}(L))}});function ra(L){return L.length>1?L.join("L"):L+"Z"}function ro(L){return L.join("L")+"Z"}function za(L){for(var V=0,J=L.length,ne=L[0],ue=[ne[0],",",ne[1]];++V<J;)ue.push("V",(ne=L[V])[1],"H",ne[0]);return ue.join("")}function xo(L){for(var V=0,J=L.length,ne=L[0],ue=[ne[0],",",ne[1]];++V<J;)ue.push("H",(ne=L[V])[0],"V",ne[1]);return ue.join("")}function Cs(L,V){if(V.length<1||L.length!=V.length&&L.length!=V.length+2)return ra(L);var J=L.length!=V.length,ne="",ue=L[0],xe=L[1],Le=V[0],De=Le,Ue=1;if(J&&(ne+="Q"+(xe[0]-2*Le[0]/3)+","+(xe[1]-2*Le[1]/3)+","+xe[0]+","+xe[1],ue=L[1],Ue=2),V.length>1){De=V[1],xe=L[Ue],Ue++,ne+="C"+(ue[0]+Le[0])+","+(ue[1]+Le[1])+","+(xe[0]-De[0])+","+(xe[1]-De[1])+","+xe[0]+","+xe[1];for(var qe=2;qe<V.length;qe++,Ue++)xe=L[Ue],De=V[qe],ne+="S"+(xe[0]-De[0])+","+(xe[1]-De[1])+","+xe[0]+","+xe[1]}if(J){var et=L[Ue];ne+="Q"+(xe[0]+2*De[0]/3)+","+(xe[1]+2*De[1]/3)+","+et[0]+","+et[1]}return ne}function No(L,V){for(var J,ne=[],ue=(1-V)/2,xe=L[0],Le=L[1],De=1,Ue=L.length;++De<Ue;)J=xe,xe=Le,Le=L[De],ne.push([ue*(Le[0]-J[0]),ue*(Le[1]-J[1])]);return ne}function Hr(L){if(L.length<3)return ra(L);var V=1,J=L.length,ne=L[0],ue=ne[0],xe=ne[1],Le=[ue,ue,ue,(ne=L[1])[0]],De=[xe,xe,xe,ne[1]],Ue=[ue,",",xe,"L",Gi(ca,Le),",",Gi(ca,De)];for(L.push(L[J-1]);++V<=J;)ne=L[V],Le.shift(),Le.push(ne[0]),De.shift(),De.push(ne[1]),ps(Ue,Le,De);return L.pop(),Ue.push("L",ne),Ue.join("")}function Gi(L,V){return L[0]*V[0]+L[1]*V[1]+L[2]*V[2]+L[3]*V[3]}Ia.forEach(function(L,V){V.key=L,V.closed=/-closed$/.test(L)});var ua=[0,2/3,1/3,0],io=[0,1/3,2/3,0],ca=[0,1/6,2/3,1/6];function ps(L,V,J){L.push("C",Gi(ua,V),",",Gi(ua,J),",",Gi(io,V),",",Gi(io,J),",",Gi(ca,V),",",Gi(ca,J))}function ds(L,V){return(V[1]-L[1])/(V[0]-L[0])}function fa(L){for(var V,J,ne,ue=-1,xe=L.length;++ue<xe;)J=(V=L[ue])[0],ne=V[1]-He,V[0]=J*Math.cos(ne),V[1]=J*Math.sin(ne);return L}function Vr(L){var V=Vn,J=Vn,ne=0,ue=Fn,xe=Bo,Le=ra,De=Le.key,Ue=Le,qe="L",et=.7;function lt(ft){var xt,St,wt,Dt=[],Et=[],Yt=[],qt=-1,Bt=ft.length,fn=Rn(V),gn=Rn(ne),kn=V===J?function(){return St}:Rn(J),On=ne===ue?function(){return wt}:Rn(ue);function Nn(){Dt.push("M",Le(L(Yt),et),qe,Ue(L(Et.reverse()),et),"Z")}for(;++qt<Bt;)xe.call(this,xt=ft[qt],qt)?(Et.push([St=+fn.call(this,xt,qt),wt=+gn.call(this,xt,qt)]),Yt.push([+kn.call(this,xt,qt),+On.call(this,xt,qt)])):Et.length&&(Nn(),Et=[],Yt=[]);return Et.length&&Nn(),Dt.length?Dt.join(""):null}return lt.x=function(ft){return arguments.length?(V=J=ft,lt):J},lt.x0=function(ft){return arguments.length?(V=ft,lt):V},lt.x1=function(ft){return arguments.length?(J=ft,lt):J},lt.y=function(ft){return arguments.length?(ne=ue=ft,lt):ue},lt.y0=function(ft){return arguments.length?(ne=ft,lt):ne},lt.y1=function(ft){return arguments.length?(ue=ft,lt):ue},lt.defined=function(ft){return arguments.length?(xe=ft,lt):xe},lt.interpolate=function(ft){return arguments.length?(De=typeof ft=="function"?Le=ft:(Le=Ia.get(ft)||ra).key,Ue=Le.reverse||Le,qe=Le.closed?"M":"L",lt):De},lt.tension=function(ft){return arguments.length?(et=ft,lt):et},lt}function ao(L){return L.source}function rs(L){return L.target}function Ha(L){return L.radius}function gs(L){return[L.x,L.y]}function vs(){return 64}function Ga(){return"circle"}function li(L){var V=Math.sqrt(L/Ot);return"M0,"+V+"A"+V+","+V+" 0 1,1 0,"+-V+"A"+V+","+V+" 0 1,1 0,"+V+"Z"}o.svg.line.radial=function(){var L=qa(fa);return L.radius=L.x,delete L.x,L.angle=L.y,delete L.y,L},za.reverse=xo,xo.reverse=za,o.svg.area=function(){return Vr(I)},o.svg.area.radial=function(){var L=Vr(fa);return L.radius=L.x,delete L.x,L.innerRadius=L.x0,delete L.x0,L.outerRadius=L.x1,delete L.x1,L.angle=L.y,delete L.y,L.startAngle=L.y0,delete L.y0,L.endAngle=L.y1,delete L.y1,L},o.svg.chord=function(){var L=ao,V=rs,J=Ha,ne=hs,ue=dr;function xe(qe,et){var lt,ft,xt=Le(this,L,qe,et),St=Le(this,V,qe,et);return"M"+xt.p0+De(xt.r,xt.p1,xt.a1-xt.a0)+(ft=St,((lt=xt).a0==ft.a0&&lt.a1==ft.a1?Ue(xt.r,xt.p1,xt.r,xt.p0):Ue(xt.r,xt.p1,St.r,St.p0)+De(St.r,St.p1,St.a1-St.a0)+Ue(St.r,St.p1,xt.r,xt.p0))+"Z")}function Le(qe,et,lt,ft){var xt=et.call(qe,lt,ft),St=J.call(qe,xt,ft),wt=ne.call(qe,xt,ft)-He,Dt=ue.call(qe,xt,ft)-He;return{r:St,a0:wt,a1:Dt,p0:[St*Math.cos(wt),St*Math.sin(wt)],p1:[St*Math.cos(Dt),St*Math.sin(Dt)]}}function De(qe,et,lt){return"A"+qe+","+qe+" 0 "+ +(lt>Ot)+",1 "+et}function Ue(qe,et,lt,ft){return"Q 0,0 "+ft}return xe.radius=function(qe){return arguments.length?(J=Rn(qe),xe):J},xe.source=function(qe){return arguments.length?(L=Rn(qe),xe):L},xe.target=function(qe){return arguments.length?(V=Rn(qe),xe):V},xe.startAngle=function(qe){return arguments.length?(ne=Rn(qe),xe):ne},xe.endAngle=function(qe){return arguments.length?(ue=Rn(qe),xe):ue},xe},o.svg.diagonal=function(){var L=ao,V=rs,J=gs;function ne(ue,xe){var Le=L.call(this,ue,xe),De=V.call(this,ue,xe),Ue=(Le.y+De.y)/2,qe=[Le,{x:Le.x,y:Ue},{x:De.x,y:Ue},De];return"M"+(qe=qe.map(J))[0]+"C"+qe[1]+" "+qe[2]+" "+qe[3]}return ne.source=function(ue){return arguments.length?(L=Rn(ue),ne):L},ne.target=function(ue){return arguments.length?(V=Rn(ue),ne):V},ne.projection=function(ue){return arguments.length?(J=ue,ne):J},ne},o.svg.diagonal.radial=function(){var L=o.svg.diagonal(),V=gs,J=L.projection;return L.projection=function(ne){return arguments.length?J(function(ue){return function(){var xe=ue.apply(this,arguments),Le=xe[0],De=xe[1]-He;return[Le*Math.cos(De),Le*Math.sin(De)]}}(V=ne)):V},L},o.svg.symbol=function(){var L=Ga,V=vs;function J(ne,ue){return(is.get(L.call(this,ne,ue))||li)(V.call(this,ne,ue))}return J.type=function(ne){return arguments.length?(L=Rn(ne),J):L},J.size=function(ne){return arguments.length?(V=Rn(ne),J):V},J};var is=o.map({circle:li,cross:function(L){var V=Math.sqrt(L/5)/2;return"M"+-3*V+","+-V+"H"+-V+"V"+-3*V+"H"+V+"V"+-V+"H"+3*V+"V"+V+"H"+V+"V"+3*V+"H"+-V+"V"+V+"H"+-3*V+"Z"},diamond:function(L){var V=Math.sqrt(L/(2*Cr)),J=V*Cr;return"M0,"+-V+"L"+J+",0 0,"+V+" "+-J+",0Z"},square:function(L){var V=Math.sqrt(L)/2;return"M"+-V+","+-V+"L"+V+","+-V+" "+V+","+V+" "+-V+","+V+"Z"},"triangle-down":function(L){var V=Math.sqrt(L/kr),J=V*kr/2;return"M0,"+J+"L"+V+","+-J+" "+-V+","+-J+"Z"},"triangle-up":function(L){var V=Math.sqrt(L/kr),J=V*kr/2;return"M0,"+-J+"L"+V+","+J+" "+-V+","+J+"Z"}});o.svg.symbolTypes=is.keys();var kr=Math.sqrt(3),Cr=Math.tan(30*Ye);fe.transition=function(L){for(var V,J,ne=Li||++hl,ue=di(L),xe=[],Le=so||{time:Date.now(),ease:Qa,delay:0,duration:250},De=-1,Ue=this.length;++De<Ue;){xe.push(V=[]);for(var qe=this[De],et=-1,lt=qe.length;++et<lt;)(J=qe[et])&&va(J,et,ue,ne,Le),V.push(J)}return bo(xe,ue,ne)},fe.interrupt=function(L){return this.each(L==null?Ta:oo(di(L)))};var Ta=oo(di());function oo(L){return function(){var V,J,ne;(V=this[L])&&(ne=V[J=V.active])&&(ne.timer.c=null,ne.timer.t=NaN,--V.count?delete V[J]:delete this[L],V.active+=.5,ne.event&&ne.event.interrupt.call(this,this.__data__,ne.index))}}function bo(L,V,J){return Y(L,Qr),L.namespace=V,L.id=J,L}var Li,so,Qr=[],hl=0;function ka(L,V,J,ne){var ue=L.id,xe=L.namespace;return be(L,typeof J=="function"?function(Le,De,Ue){Le[xe][ue].tween.set(V,ne(J.call(Le,Le.__data__,De,Ue)))}:(J=ne(J),function(Le){Le[xe][ue].tween.set(V,J)}))}function ni(L){return L==null&&(L=""),function(){this.textContent=L}}function di(L){return L==null?"__transition__":"__transition_"+L+"__"}function va(L,V,J,ne,ue){var xe,Le,De,Ue,qe,et=L[J]||(L[J]={active:0,count:0}),lt=et[ne];function ft(St){var wt=et.active,Dt=et[wt];for(var Et in Dt&&(Dt.timer.c=null,Dt.timer.t=NaN,--et.count,delete et[wt],Dt.event&&Dt.event.interrupt.call(L,L.__data__,Dt.index)),et)if(+Et<ne){var Yt=et[Et];Yt.timer.c=null,Yt.timer.t=NaN,--et.count,delete et[Et]}Le.c=xt,Qt(function(){return Le.c&&xt(St||1)&&(Le.c=null,Le.t=NaN),1},0,xe),et.active=ne,lt.event&&lt.event.start.call(L,L.__data__,V),qe=[],lt.tween.forEach(function(qt,Bt){(Bt=Bt.call(L,L.__data__,V))&&qe.push(Bt)}),Ue=lt.ease,De=lt.duration}function xt(St){for(var wt=St/De,Dt=Ue(wt),Et=qe.length;Et>0;)qe[--Et].call(L,Dt);if(wt>=1)return lt.event&&lt.event.end.call(L,L.__data__,V),--et.count?delete et[ne]:delete L[J],1}lt||(xe=ue.time,Le=Qt(function(St){var wt=lt.delay;if(Le.t=wt+xe,wt<=St)return ft(St-wt);Le.c=ft},0,xe),lt=et[ne]={tween:new m,time:xe,timer:Le,delay:ue.delay,duration:ue.duration,ease:ue.ease,index:V},ue=null,++et.count)}Qr.call=fe.call,Qr.empty=fe.empty,Qr.node=fe.node,Qr.size=fe.size,o.transition=function(L,V){return L&&L.transition?Li?L.transition(V):L:o.selection().transition(L)},o.transition.prototype=Qr,Qr.select=function(L){var V,J,ne,ue=this.id,xe=this.namespace,Le=[];L=he(L);for(var De=-1,Ue=this.length;++De<Ue;){Le.push(V=[]);for(var qe=this[De],et=-1,lt=qe.length;++et<lt;)(ne=qe[et])&&(J=L.call(ne,ne.__data__,et,De))?("__data__"in ne&&(J.__data__=ne.__data__),va(J,et,xe,ue,ne[xe][ue]),V.push(J)):V.push(null)}return bo(Le,xe,ue)},Qr.selectAll=function(L){var V,J,ne,ue,xe,Le=this.id,De=this.namespace,Ue=[];L=ve(L);for(var qe=-1,et=this.length;++qe<et;)for(var lt=this[qe],ft=-1,xt=lt.length;++ft<xt;)if(ne=lt[ft]){xe=ne[De][Le],J=L.call(ne,ne.__data__,ft,qe),Ue.push(V=[]);for(var St=-1,wt=J.length;++St<wt;)(ue=J[St])&&va(ue,St,De,Le,xe),V.push(ue)}return bo(Ue,De,Le)},Qr.filter=function(L){var V,J,ne=[];typeof L!="function"&&(L=ze(L));for(var ue=0,xe=this.length;ue<xe;ue++){ne.push(V=[]);for(var Le,De=0,Ue=(Le=this[ue]).length;De<Ue;De++)(J=Le[De])&&L.call(J,J.__data__,De,ue)&&V.push(J)}return bo(ne,this.namespace,this.id)},Qr.tween=function(L,V){var J=this.id,ne=this.namespace;return arguments.length<2?this.node()[ne][J].tween.get(L):be(this,V==null?function(ue){ue[ne][J].tween.remove(L)}:function(ue){ue[ne][J].tween.set(L,V)})},Qr.attr=function(L,V){if(arguments.length<2){for(V in L)this.attr(V,L[V]);return this}var J=L=="transform"?ll:Sa,ne=o.ns.qualify(L);function ue(){this.removeAttribute(ne)}function xe(){this.removeAttributeNS(ne.space,ne.local)}return ka(this,"attr."+L,V,ne.local?function(Le){return Le==null?xe:(Le+="",function(){var De,Ue=this.getAttributeNS(ne.space,ne.local);return Ue!==Le&&(De=J(Ue,Le),function(qe){this.setAttributeNS(ne.space,ne.local,De(qe))})})}:function(Le){return Le==null?ue:(Le+="",function(){var De,Ue=this.getAttribute(ne);return Ue!==Le&&(De=J(Ue,Le),function(qe){this.setAttribute(ne,De(qe))})})})},Qr.attrTween=function(L,V){var J=o.ns.qualify(L);return this.tween("attr."+L,J.local?function(ne,ue){var xe=V.call(this,ne,ue,this.getAttributeNS(J.space,J.local));return xe&&function(Le){this.setAttributeNS(J.space,J.local,xe(Le))}}:function(ne,ue){var xe=V.call(this,ne,ue,this.getAttribute(J));return xe&&function(Le){this.setAttribute(J,xe(Le))}})},Qr.style=function(L,V,J){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for(J in ne<2&&(V=""),L)this.style(J,L[J],V);return this}J=""}function ue(){this.style.removeProperty(L)}return ka(this,"style."+L,V,function(xe){return xe==null?ue:(xe+="",function(){var Le,De=t(this).getComputedStyle(this,null).getPropertyValue(L);return De!==xe&&(Le=Sa(De,xe),function(Ue){this.style.setProperty(L,Le(Ue),J)})})})},Qr.styleTween=function(L,V,J){return arguments.length<3&&(J=""),this.tween("style."+L,function(ne,ue){var xe=V.call(this,ne,ue,t(this).getComputedStyle(this,null).getPropertyValue(L));return xe&&function(Le){this.style.setProperty(L,xe(Le),J)}})},Qr.text=function(L){return ka(this,"text",L,ni)},Qr.remove=function(){var L=this.namespace;return this.each("end.transition",function(){var V;this[L].count<2&&(V=this.parentNode)&&V.removeChild(this)})},Qr.ease=function(L){var V=this.id,J=this.namespace;return arguments.length<1?this.node()[J][V].ease:(typeof L!="function"&&(L=o.ease.apply(o,arguments)),be(this,function(ne){ne[J][V].ease=L}))},Qr.delay=function(L){var V=this.id,J=this.namespace;return arguments.length<1?this.node()[J][V].delay:be(this,typeof L=="function"?function(ne,ue,xe){ne[J][V].delay=+L.call(ne,ne.__data__,ue,xe)}:(L=+L,function(ne){ne[J][V].delay=L}))},Qr.duration=function(L){var V=this.id,J=this.namespace;return arguments.length<1?this.node()[J][V].duration:be(this,typeof L=="function"?function(ne,ue,xe){ne[J][V].duration=Math.max(1,L.call(ne,ne.__data__,ue,xe))}:(L=Math.max(1,L),function(ne){ne[J][V].duration=L}))},Qr.each=function(L,V){var J=this.id,ne=this.namespace;if(arguments.length<2){var ue=so,xe=Li;try{Li=J,be(this,function(Le,De,Ue){so=Le[ne][J],L.call(Le,Le.__data__,De,Ue)})}finally{so=ue,Li=xe}}else be(this,function(Le){var De=Le[ne][J];(De.event||(De.event=o.dispatch("start","end","interrupt"))).on(L,V)});return this},Qr.transition=function(){for(var L,V,J,ne=this.id,ue=++hl,xe=this.namespace,Le=[],De=0,Ue=this.length;De<Ue;De++){Le.push(L=[]);for(var qe,et=0,lt=(qe=this[De]).length;et<lt;et++)(V=qe[et])&&va(V,et,xe,ue,{time:(J=V[xe][ne]).time,ease:J.ease,delay:J.delay+J.duration,duration:J.duration}),L.push(V)}return bo(Le,xe,ue)},o.svg.axis=function(){var L,V=o.scale.linear(),J=jo,ne=6,ue=6,xe=3,Le=[10],De=null;function Ue(qe){qe.each(function(){var et,lt=o.select(this),ft=this.__chart__||V,xt=this.__chart__=V.copy(),St=De??(xt.ticks?xt.ticks.apply(xt,Le):xt.domain()),wt=L??(xt.tickFormat?xt.tickFormat.apply(xt,Le):I),Dt=lt.selectAll(".tick").data(St,xt),Et=Dt.enter().insert("g",".domain").attr("class","tick").style("opacity",Je),Yt=o.transition(Dt.exit()).style("opacity",Je).remove(),qt=o.transition(Dt.order()).style("opacity",1),Bt=Math.max(ne,0)+xe,fn=Ms(xt),gn=lt.selectAll(".domain").data([0]),kn=(gn.enter().append("path").attr("class","domain"),o.transition(gn));Et.append("line"),Et.append("text");var On,Nn,er,or,Hn=Et.select("line"),ar=qt.select("line"),vr=Dt.select("text").text(wt),Ar=Et.select("text"),Kn=qt.select("text"),ir=J==="top"||J==="left"?-1:1;if(J==="bottom"||J==="top"?(et=Xe,On="x",er="y",Nn="x2",or="y2",vr.attr("dy",ir<0?"0em":".71em").style("text-anchor","middle"),kn.attr("d","M"+fn[0]+","+ir*ue+"V0H"+fn[1]+"V"+ir*ue)):(et=$e,On="y",er="x",Nn="y2",or="x2",vr.attr("dy",".32em").style("text-anchor",ir<0?"end":"start"),kn.attr("d","M"+ir*ue+","+fn[0]+"H0V"+fn[1]+"H"+ir*ue)),Hn.attr(or,ir*ne),Ar.attr(er,ir*Bt),ar.attr(Nn,0).attr(or,ir*ne),Kn.attr(On,0).attr(er,ir*Bt),xt.rangeBand){var br=xt,sr=br.rangeBand()/2;ft=xt=function(Tr){return br(Tr)+sr}}else ft.rangeBand?ft=xt:Yt.call(et,xt,ft);Et.call(et,ft,xt),qt.call(et,xt,xt)})}return Ue.scale=function(qe){return arguments.length?(V=qe,Ue):V},Ue.orient=function(qe){return arguments.length?(J=qe in Qs?qe+"":jo,Ue):J},Ue.ticks=function(){return arguments.length?(Le=_(arguments),Ue):Le},Ue.tickValues=function(qe){return arguments.length?(De=qe,Ue):De},Ue.tickFormat=function(qe){return arguments.length?(L=qe,Ue):L},Ue.tickSize=function(qe){var et=arguments.length;return et?(ne=+qe,ue=+arguments[et-1],Ue):ne},Ue.innerTickSize=function(qe){return arguments.length?(ne=+qe,Ue):ne},Ue.outerTickSize=function(qe){return arguments.length?(ue=+qe,Ue):ue},Ue.tickPadding=function(qe){return arguments.length?(xe=+qe,Ue):xe},Ue.tickSubdivide=function(){return arguments.length&&Ue},Ue};var jo="bottom",Qs={top:1,right:1,bottom:1,left:1};function Xe(L,V,J){L.attr("transform",function(ne){var ue=V(ne);return"translate("+(isFinite(ue)?ue:J(ne))+",0)"})}function $e(L,V,J){L.attr("transform",function(ne){var ue=V(ne);return"translate(0,"+(isFinite(ue)?ue:J(ne))+")"})}o.svg.brush=function(){var L,V,J=K(et,"brushstart","brush","brushend"),ne=null,ue=null,xe=[0,0],Le=[0,0],De=!0,Ue=!0,qe=B[0];function et(wt){wt.each(function(){var Dt=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",St).on("touchstart.brush",St),Et=Dt.selectAll(".background").data([0]);Et.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Dt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Yt=Dt.selectAll(".resize").data(qe,I);Yt.exit().remove(),Yt.enter().append("g").attr("class",function(gn){return"resize "+gn}).style("cursor",function(gn){return at[gn]}).append("rect").attr("x",function(gn){return/[ew]$/.test(gn)?-3:null}).attr("y",function(gn){return/^[ns]/.test(gn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Yt.style("display",et.empty()?"none":null);var qt,Bt=o.transition(Dt),fn=o.transition(Et);ne&&(qt=Ms(ne),fn.attr("x",qt[0]).attr("width",qt[1]-qt[0]),ft(Bt)),ue&&(qt=Ms(ue),fn.attr("y",qt[0]).attr("height",qt[1]-qt[0]),xt(Bt)),lt(Bt)})}function lt(wt){wt.selectAll(".resize").attr("transform",function(Dt){return"translate("+xe[+/e$/.test(Dt)]+","+Le[+/^s/.test(Dt)]+")"})}function ft(wt){wt.select(".extent").attr("x",xe[0]),wt.selectAll(".extent,.n>rect,.s>rect").attr("width",xe[1]-xe[0])}function xt(wt){wt.select(".extent").attr("y",Le[0]),wt.selectAll(".extent,.e>rect,.w>rect").attr("height",Le[1]-Le[0])}function St(){var wt,Dt,Et=this,Yt=o.select(o.event.target),qt=J.of(Et,arguments),Bt=o.select(Et),fn=Yt.datum(),gn=!/^(n|s)$/.test(fn)&&ne,kn=!/^(e|w)$/.test(fn)&&ue,On=Yt.classed("extent"),Nn=dt(Et),er=o.mouse(Et),or=o.select(t(Et)).on("keydown.brush",function(){o.event.keyCode==32&&(On||(wt=null,er[0]-=xe[1],er[1]-=Le[1],On=2),Q())}).on("keyup.brush",function(){o.event.keyCode==32&&On==2&&(er[0]+=xe[1],er[1]+=Le[1],On=0,Q())});if(o.event.changedTouches?or.on("touchmove.brush",vr).on("touchend.brush",Kn):or.on("mousemove.brush",vr).on("mouseup.brush",Kn),Bt.interrupt().selectAll("*").interrupt(),On)er[0]=xe[0]-er[0],er[1]=Le[0]-er[1];else if(fn){var Hn=+/w$/.test(fn),ar=+/^n/.test(fn);Dt=[xe[1-Hn]-er[0],Le[1-ar]-er[1]],er[0]=xe[Hn],er[1]=Le[ar]}else o.event.altKey&&(wt=er.slice());function vr(){var ir=o.mouse(Et),br=!1;Dt&&(ir[0]+=Dt[0],ir[1]+=Dt[1]),On||(o.event.altKey?(wt||(wt=[(xe[0]+xe[1])/2,(Le[0]+Le[1])/2]),er[0]=xe[+(ir[0]<wt[0])],er[1]=Le[+(ir[1]<wt[1])]):wt=null),gn&&Ar(ir,ne,0)&&(ft(Bt),br=!0),kn&&Ar(ir,ue,1)&&(xt(Bt),br=!0),br&&(lt(Bt),qt({type:"brush",mode:On?"move":"resize"}))}function Ar(ir,br,sr){var Tr,Er,Rr=Ms(br),Fr=Rr[0],jr=Rr[1],qr=er[sr],ui=sr?Le:xe,Ai=ui[1]-ui[0];if(On&&(Fr-=qr,jr-=Ai+qr),Tr=(sr?Ue:De)?Math.max(Fr,Math.min(jr,ir[sr])):ir[sr],On?Er=(Tr+=qr)+Ai:(wt&&(qr=Math.max(Fr,Math.min(jr,2*wt[sr]-Tr))),qr<Tr?(Er=Tr,Tr=qr):Er=qr),ui[0]!=Tr||ui[1]!=Er)return sr?V=null:L=null,ui[0]=Tr,ui[1]=Er,!0}function Kn(){vr(),Bt.style("pointer-events","all").selectAll(".resize").style("display",et.empty()?"none":null),o.select("body").style("cursor",null),or.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Nn(),qt({type:"brushend"})}Bt.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",Yt.style("cursor")),qt({type:"brushstart"}),vr()}return et.event=function(wt){wt.each(function(){var Dt=J.of(this,arguments),Et={x:xe,y:Le,i:L,j:V},Yt=this.__chart__||Et;this.__chart__=Et,Li?o.select(this).transition().each("start.brush",function(){L=Yt.i,V=Yt.j,xe=Yt.x,Le=Yt.y,Dt({type:"brushstart"})}).tween("brush:brush",function(){var qt=Ea(xe,Et.x),Bt=Ea(Le,Et.y);return L=V=null,function(fn){xe=Et.x=qt(fn),Le=Et.y=Bt(fn),Dt({type:"brush",mode:"resize"})}}).each("end.brush",function(){L=Et.i,V=Et.j,Dt({type:"brush",mode:"resize"}),Dt({type:"brushend"})}):(Dt({type:"brushstart"}),Dt({type:"brush",mode:"resize"}),Dt({type:"brushend"}))})},et.x=function(wt){return arguments.length?(qe=B[!(ne=wt)<<1|!ue],et):ne},et.y=function(wt){return arguments.length?(qe=B[!ne<<1|!(ue=wt)],et):ue},et.clamp=function(wt){return arguments.length?(ne&&ue?(De=!!wt[0],Ue=!!wt[1]):ne?De=!!wt:ue&&(Ue=!!wt),et):ne&&ue?[De,Ue]:ne?De:ue?Ue:null},et.extent=function(wt){var Dt,Et,Yt,qt,Bt;return arguments.length?(ne&&(Dt=wt[0],Et=wt[1],ue&&(Dt=Dt[0],Et=Et[0]),L=[Dt,Et],ne.invert&&(Dt=ne(Dt),Et=ne(Et)),Et<Dt&&(Bt=Dt,Dt=Et,Et=Bt),Dt==xe[0]&&Et==xe[1]||(xe=[Dt,Et])),ue&&(Yt=wt[0],qt=wt[1],ne&&(Yt=Yt[1],qt=qt[1]),V=[Yt,qt],ue.invert&&(Yt=ue(Yt),qt=ue(qt)),qt<Yt&&(Bt=Yt,Yt=qt,qt=Bt),Yt==Le[0]&&qt==Le[1]||(Le=[Yt,qt])),et):(ne&&(L?(Dt=L[0],Et=L[1]):(Dt=xe[0],Et=xe[1],ne.invert&&(Dt=ne.invert(Dt),Et=ne.invert(Et)),Et<Dt&&(Bt=Dt,Dt=Et,Et=Bt))),ue&&(V?(Yt=V[0],qt=V[1]):(Yt=Le[0],qt=Le[1],ue.invert&&(Yt=ue.invert(Yt),qt=ue.invert(qt)),qt<Yt&&(Bt=Yt,Yt=qt,qt=Bt))),ne&&ue?[[Dt,Yt],[Et,qt]]:ne?[Dt,Et]:ue&&[Yt,qt])},et.clear=function(){return et.empty()||(xe=[0,0],Le=[0,0],L=V=null),et},et.empty=function(){return!!ne&&xe[0]==xe[1]||!!ue&&Le[0]==Le[1]},o.rebind(et,J,"on")};var at={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},B=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function G(L){return JSON.parse(L.responseText)}function q(L){var V=p.createRange();return V.selectNode(p.body),V.createContextualFragment(L.responseText)}o.text=Pn(function(L){return L.responseText}),o.json=function(L,V){return jn(L,"application/json",G,V)},o.html=function(L,V){return jn(L,"text/html",q,V)},o.xml=Pn(function(L){return L.responseXML}),(k=typeof(M=o)=="function"?M.call(R,e,R,ee):M)===void 0||(ee.exports=k)}).apply(self)},3480:function(ee){ee.exports=function(){var R,e,M;function k(o,T){if(R)if(e){var _="var sharedChunk = {}; ("+R+")(sharedChunk); ("+e+")(sharedChunk);",p={};R(p),M=T(p),typeof window<"u"&&(M.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}else e=T;else R=T}return k(0,function(o){function T(A,z){return A(z={exports:{}},z.exports),z.exports}var _="1.13.4",p=s;function s(A,z,Z,le){this.cx=3*A,this.bx=3*(Z-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(le-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=le,this.p2x=Z,this.p2y=le}s.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},s.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},s.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},s.prototype.solveCurveX=function(A,z){var Z,le,Te,Ce,je;for(z===void 0&&(z=1e-6),Te=A,je=0;je<8;je++){if(Ce=this.sampleCurveX(Te)-A,Math.abs(Ce)<z)return Te;var Ke=this.sampleCurveDerivativeX(Te);if(Math.abs(Ke)<1e-6)break;Te-=Ce/Ke}if((Te=A)<(Z=0))return Z;if(Te>(le=1))return le;for(;Z<le;){if(Ce=this.sampleCurveX(Te),Math.abs(Ce-A)<z)return Te;A>Ce?Z=Te:le=Te,Te=.5*(le-Z)+Z}return Te},s.prototype.solve=function(A,z){return this.sampleCurveY(this.solveCurveX(A,z))};var t=i;function i(A,z){this.x=A,this.y=z}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,z){return this.clone()._rotateAround(A,z)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var z=A.x-this.x,Z=A.y-this.y;return z*z+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,z){return Math.atan2(this.x*z-this.y*A,this.x*A+this.y*z)},_matMult:function(A){var z=A[0]*this.x+A[1]*this.y,Z=A[2]*this.x+A[3]*this.y;return this.x=z,this.y=Z,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var z=Math.cos(A),Z=Math.sin(A),le=z*this.x-Z*this.y,Te=Z*this.x+z*this.y;return this.x=le,this.y=Te,this},_rotateAround:function(A,z){var Z=Math.cos(A),le=Math.sin(A),Te=z.x+Z*(this.x-z.x)-le*(this.y-z.y),Ce=z.y+le*(this.x-z.x)+Z*(this.y-z.y);return this.x=Te,this.y=Ce,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(A){return A instanceof i?A:Array.isArray(A)?new i(A[0],A[1]):A};var r=typeof self<"u"?self:{},n=Math.pow(2,53)-1;function a(A,z,Z,le){var Te=new p(A,z,Z,le);return function(Ce){return Te.solve(Ce)}}var l=a(.25,.1,.25,1);function u(A,z,Z){return Math.min(Z,Math.max(z,A))}function h(A,z,Z){var le=Z-z,Te=((A-z)%le+le)%le+z;return Te===z?Z:Te}function c(A){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];for(var le=0,Te=z;le<Te.length;le+=1){var Ce=Te[le];for(var je in Ce)A[je]=Ce[je]}return A}var x=1;function d(){return x++}function v(){return function A(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function g(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function y(A,z){A.forEach(function(Z){z[Z]&&(z[Z]=z[Z].bind(z))})}function m(A,z){return A.indexOf(z,A.length-z.length)!==-1}function b(A,z,Z){var le={};for(var Te in A)le[Te]=z.call(Z||this,A[Te],Te,A);return le}function f(A,z,Z){var le={};for(var Te in A)z.call(Z||this,A[Te],Te,A)&&(le[Te]=A[Te]);return le}function S(A){return Array.isArray(A)?A.map(S):typeof A=="object"&&A?b(A,S):A}var w={};function E(A){w[A]||(typeof console<"u"&&console.warn(A),w[A]=!0)}function O(A,z,Z){return(Z.y-A.y)*(z.x-A.x)>(z.y-A.y)*(Z.x-A.x)}function C(A){for(var z=0,Z=0,le=A.length,Te=le-1,Ce=void 0,je=void 0;Z<le;Te=Z++)Ce=A[Z],z+=((je=A[Te]).x-Ce.x)*(Ce.y+je.y);return z}function P(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function D(A){var z={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,Te,Ce,je){var Ke=Ce||je;return z[Te]=!Ke||Ke.toLowerCase(),""}),z["max-age"]){var Z=parseInt(z["max-age"],10);isNaN(Z)?delete z["max-age"]:z["max-age"]=Z}return z}var U=null;function I(A){if(U==null){var z=A.navigator?A.navigator.userAgent:null;U=!!A.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return U}function N(A){try{var z=r[A];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch{return!1}}var W,F,j,H,te=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),Q=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,$=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame,K={now:te,frame:function(A){var z=Q(A);return{cancel:function(){return $(z)}}},getImageData:function(A,z){z===void 0&&(z=0);var Z=r.document.createElement("canvas"),le=Z.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return Z.width=A.width,Z.height=A.height,le.drawImage(A,0,0,A.width,A.height),le.getImageData(-z,-z,A.width+2*z,A.height+2*z)},resolveURL:function(A){return W||(W=r.document.createElement("a")),W.href=A,W.href},hardwareConcurrency:r.navigator&&r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(F==null&&(F=r.matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}},X={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Y={supported:!1,testSupport:function(A){!re&&H&&(se?ae(A):j=A)}},re=!1,se=!1;function ae(A){var z=A.createTexture();A.bindTexture(A.TEXTURE_2D,z);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,H),A.isContextLost())return;Y.supported=!0}catch{}A.deleteTexture(z),re=!0}r.document&&((H=r.document.createElement("img")).onload=function(){j&&ae(j),j=null,se=!0},H.onerror=function(){re=!0,j=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ce="01",fe=function(A,z){this._transformRequestFn=A,this._customAccessToken=z,this._createSkuToken()};function he(A){return A.indexOf("mapbox:")===0}fe.prototype._createSkuToken=function(){var A=function(){for(var z="",Z=0;Z<10;Z++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ce,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},fe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},fe.prototype.transformRequest=function(A,z){return this._transformRequestFn&&this._transformRequestFn(A,z)||{url:A}},fe.prototype.normalizeStyleURL=function(A,z){if(!he(A))return A;var Z=Me(A);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||z)},fe.prototype.normalizeGlyphsURL=function(A,z){if(!he(A))return A;var Z=Me(A);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||z)},fe.prototype.normalizeSourceURL=function(A,z){if(!he(A))return A;var Z=Me(A);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||z)},fe.prototype.normalizeSpriteURL=function(A,z,Z,le){var Te=Me(A);return he(A)?(Te.path="/styles/v1"+Te.path+"/sprite"+z+Z,this._makeAPIURL(Te,this._customAccessToken||le)):(Te.path+=""+z+Z,Pe(Te))},fe.prototype.normalizeTileURL=function(A,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!he(A))return A;var Z=Me(A),le=K.devicePixelRatio>=2||z===512?"@2x":"",Te=Y.supported?".webp":"$1";Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+le+Te),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var Ce=this._customAccessToken||function(je){for(var Ke=0,st=je;Ke<st.length;Ke+=1){var yt=st[Ke].match(/^access_token=(.*)$/);if(yt)return yt[1]}return null}(Z.params)||X.ACCESS_TOKEN;return X.REQUIRE_ACCESS_TOKEN&&Ce&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,Ce)},fe.prototype.canonicalizeTileURL=function(A,z){var Z=Me(A);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return A;var le="mapbox://tiles/";le+=Z.path.replace("/v4/","");var Te=Z.params;return z&&(Te=Te.filter(function(Ce){return!Ce.match(/^access_token=/)})),Te.length&&(le+="?"+Te.join("&")),le},fe.prototype.canonicalizeTileset=function(A,z){for(var Z=!!z&&he(z),le=[],Te=0,Ce=A.tiles||[];Te<Ce.length;Te+=1){var je=Ce[Te];ye(je)?le.push(this.canonicalizeTileURL(je,Z)):le.push(je)}return le},fe.prototype._makeAPIURL=function(A,z){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=Me(X.API_URL);if(A.protocol=le.protocol,A.authority=le.authority,A.protocol==="http"){var Te=A.params.indexOf("secure");Te>=0&&A.params.splice(Te,1)}if(le.path!=="/"&&(A.path=""+le.path+A.path),!X.REQUIRE_ACCESS_TOKEN)return Pe(A);if(!(z=z||X.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(z[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return A.params=A.params.filter(function(Ce){return Ce.indexOf("access_token")===-1}),A.params.push("access_token="+z),Pe(A)};var ve=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ye(A){return ve.test(A)}var me=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Me(A){var z=A.match(me);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function Pe(A){var z=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+z}var ge="mapbox.eventData";function oe(A){if(!A)return null;var z,Z=A.split(".");if(!Z||Z.length!==3)return null;try{return JSON.parse((z=Z[1],decodeURIComponent(r.atob(z).split("").map(function(le){return"%"+("00"+le.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var ie=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ie.prototype.getStorageKey=function(A){var z,Z,le=oe(X.ACCESS_TOKEN);return z=le&&le.u?(Z=le.u,r.btoa(encodeURIComponent(Z).replace(/%([0-9A-F]{2})/g,function(Te,Ce){return String.fromCharCode(+("0x"+Ce))}))):X.ACCESS_TOKEN||"",A?ge+"."+A+":"+z:ge+":"+z},ie.prototype.fetchEventData=function(){var A=N("localStorage"),z=this.getStorageKey(),Z=this.getStorageKey("uuid");if(A)try{var le=r.localStorage.getItem(z);le&&(this.eventData=JSON.parse(le));var Te=r.localStorage.getItem(Z);Te&&(this.anonId=Te)}catch{E("Unable to read from LocalStorage")}},ie.prototype.saveEventData=function(){var A=N("localStorage"),z=this.getStorageKey(),Z=this.getStorageKey("uuid");if(A)try{r.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(z,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},ie.prototype.processRequests=function(A){},ie.prototype.postEvent=function(A,z,Z,le){var Te=this;if(X.EVENTS_URL){var Ce=Me(X.EVENTS_URL);Ce.params.push("access_token="+(le||X.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:ce,userId:this.anonId},Ke=z?c(je,z):je,st={url:Pe(Ce),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ke])};this.pendingRequest=Mt(st,function(yt){Te.pendingRequest=null,Z(yt),Te.saveEventData(),Te.processRequests(le)})}},ie.prototype.queueRequest=function(A,z){this.queue.push(A),this.processRequests(z)};var de,Se,_e=function(A){function z(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.postMapLoadEvent=function(Z,le,Te,Ce){this.skuToken=Te,(X.EVENTS_URL&&Ce||X.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(je){return he(je)||ye(je)}))&&this.queueRequest({id:le,timestamp:Date.now()},Ce)},z.prototype.processRequests=function(Z){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var Te=this.queue.shift(),Ce=Te.id,je=Te.timestamp;Ce&&this.success[Ce]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=v()),this.postEvent(je,{skuToken:this.skuToken},function(Ke){Ke||Ce&&(le.success[Ce]=!0)},Z))}},z}(ie),we=function(A){function z(Z){A.call(this,"appUserTurnstile"),this._customAccessToken=Z}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.postTurnstileEvent=function(Z,le){X.EVENTS_URL&&X.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(Te){return he(Te)||ye(Te)})&&this.queueRequest(Date.now(),le)},z.prototype.processRequests=function(Z){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Te=oe(X.ACCESS_TOKEN),Ce=Te?Te.u:X.ACCESS_TOKEN,je=Ce!==this.eventData.tokenU;g(this.anonId)||(this.anonId=v(),je=!0);var Ke=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),yt=new Date(Ke),_t=(Ke-this.eventData.lastSuccess)/864e5;je=je||_t>=1||_t<-1||st.getDate()!==yt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Ke,{"enabled.telemetry":!1},function(It){It||(le.eventData.lastSuccess=Ke,le.eventData.tokenU=Ce)},Z)}},z}(ie),Ae=new we,Oe=Ae.postTurnstileEvent.bind(Ae),ze=new _e,pe=ze.postMapLoadEvent.bind(ze),be="mapbox-tiles",ke=500,Ie=50,Ee=42e4;function Be(){r.caches&&!de&&(de=r.caches.open(be))}function Ve(A,z,Z){if(Be(),de){var le={status:z.status,statusText:z.statusText,headers:new r.Headers};z.headers.forEach(function(Ce,je){return le.headers.set(je,Ce)});var Te=D(z.headers.get("Cache-Control")||"");Te["no-store"]||(Te["max-age"]&&le.headers.set("Expires",new Date(Z+1e3*Te["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-Z<Ee||function(Ce,je){if(Se===void 0)try{new Response(new ReadableStream),Se=!0}catch{Se=!1}Se?je(Ce.body):Ce.blob().then(je)}(z,function(Ce){var je=new r.Response(Ce,le);Be(),de&&de.then(function(Ke){return Ke.put(Ze(A.url),je)}).catch(function(Ke){return E(Ke.message)})}))}}function Ze(A){var z=A.indexOf("?");return z<0?A:A.slice(0,z)}function rt(A,z){if(Be(),!de)return z(null);var Z=Ze(A.url);de.then(function(le){le.match(Z).then(function(Te){var Ce=function(je){if(!je)return!1;var Ke=new Date(je.headers.get("Expires")||0),st=D(je.headers.get("Cache-Control")||"");return Ke>Date.now()&&!st["no-cache"]}(Te);le.delete(Z),Ce&&le.put(Z,Te.clone()),z(null,Te,Ce)}).catch(z)}).catch(z)}var it,dt=1/0;function vt(){return it==null&&(it=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&typeof r.createImageBitmap=="function"),it}var ht={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ht);var Qe=function(A){function z(Z,le,Te){le===401&&ye(Te)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,Z),this.status=le,this.url=Te,this.name=this.constructor.name,this.message=Z}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),Je=P()?function(){return self.worker&&self.worker.referrer}:function(){return(r.location.protocol==="blob:"?r.parent:r).location.href};function Tt(A,z){var Z,le=new r.AbortController,Te=new r.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Je(),signal:le.signal}),Ce=!1,je=!1,Ke=(Z=Te.url).indexOf("sku=")>0&&ye(Z);A.type==="json"&&Te.headers.set("Accept","application/json");var st=function(_t,It,jt){if(!je){if(_t&&_t.message!=="SecurityError"&&E(_t),It&&jt)return yt(It);var Ft=Date.now();r.fetch(Te).then(function(nn){if(nn.ok){var an=Ke?nn.clone():null;return yt(nn,an,Ft)}return z(new Qe(nn.statusText,nn.status,A.url))}).catch(function(nn){nn.code!==20&&z(new Error(nn.message))})}},yt=function(_t,It,jt){(A.type==="arrayBuffer"?_t.arrayBuffer():A.type==="json"?_t.json():_t.text()).then(function(Ft){je||(It&&jt&&Ve(Te,It,jt),Ce=!0,z(null,Ft,_t.headers.get("Cache-Control"),_t.headers.get("Expires")))}).catch(function(Ft){je||z(new Error(Ft.message))})};return Ke?rt(Te,st):st(null,null),{cancel:function(){je=!0,Ce||le.abort()}}}var Ot=function(A,z){if(Z=A.url,!(/^file:/.test(Z)||/^file:/.test(Je())&&!/^\w+:/.test(Z))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return Tt(A,z);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,z,void 0,!0)}var Z;return function(le,Te){var Ce=new r.XMLHttpRequest;for(var je in Ce.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(Ce.responseType="arraybuffer"),le.headers)Ce.setRequestHeader(je,le.headers[je]);return le.type==="json"&&(Ce.responseType="text",Ce.setRequestHeader("Accept","application/json")),Ce.withCredentials=le.credentials==="include",Ce.onerror=function(){Te(new Error(Ce.statusText))},Ce.onload=function(){if((Ce.status>=200&&Ce.status<300||Ce.status===0)&&Ce.response!==null){var Ke=Ce.response;if(le.type==="json")try{Ke=JSON.parse(Ce.response)}catch(st){return Te(st)}Te(null,Ke,Ce.getResponseHeader("Cache-Control"),Ce.getResponseHeader("Expires"))}else Te(new Qe(Ce.statusText,Ce.status,le.url))},Ce.send(le.body),{cancel:function(){return Ce.abort()}}}(A,z)},Pt=function(A,z){return Ot(c(A,{type:"arrayBuffer"}),z)},Mt=function(A,z){return Ot(c(A,{method:"POST"}),z)},He,Ye,Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";He=[],Ye=0;var We=function(A,z){if(Y.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),Ye>=X.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:A,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return He.push(Z),Z}Ye++;var le=!1,Te=function(){if(!le)for(le=!0,Ye--;He.length&&Ye<X.MAX_PARALLEL_IMAGE_REQUESTS;){var je=He.shift(),Ke=je.requestParameters,st=je.callback;je.cancelled||(je.cancel=We(Ke,st).cancel)}},Ce=Pt(A,function(je,Ke,st,yt){Te(),je?z(je):Ke&&(vt()?function(_t,It){var jt=new r.Blob([new Uint8Array(_t)],{type:"image/png"});r.createImageBitmap(jt).then(function(Ft){It(null,Ft)}).catch(function(Ft){It(new Error("Could not load image because of "+Ft.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ke,z):function(_t,It,jt,Ft){var nn=new r.Image,an=r.URL;nn.onload=function(){It(null,nn),an.revokeObjectURL(nn.src),nn.onload=null,r.requestAnimationFrame(function(){nn.src=Ne})},nn.onerror=function(){return It(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var _n=new r.Blob([new Uint8Array(_t)],{type:"image/png"});nn.cacheControl=jt,nn.expires=Ft,nn.src=_t.byteLength?an.createObjectURL(_n):Ne}(Ke,z,st,yt))});return{cancel:function(){Ce.cancel(),Te()}}};function ot(A,z,Z){Z[A]&&Z[A].indexOf(z)!==-1||(Z[A]=Z[A]||[],Z[A].push(z))}function tt(A,z,Z){if(Z&&Z[A]){var le=Z[A].indexOf(z);le!==-1&&Z[A].splice(le,1)}}var Re=function(A,z){z===void 0&&(z={}),c(this,z),this.type=A},Fe=function(A){function z(Z,le){le===void 0&&(le={}),A.call(this,"error",c({error:Z},le))}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z}(Re),nt=function(){};nt.prototype.on=function(A,z){return this._listeners=this._listeners||{},ot(A,z,this._listeners),this},nt.prototype.off=function(A,z){return tt(A,z,this._listeners),tt(A,z,this._oneTimeListeners),this},nt.prototype.once=function(A,z){return this._oneTimeListeners=this._oneTimeListeners||{},ot(A,z,this._oneTimeListeners),this},nt.prototype.fire=function(A,z){typeof A=="string"&&(A=new Re(A,z||{}));var Z=A.type;if(this.listens(Z)){A.target=this;for(var le=0,Te=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];le<Te.length;le+=1)Te[le].call(this,A);for(var Ce=0,je=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];Ce<je.length;Ce+=1){var Ke=je[Ce];tt(Z,Ke,this._oneTimeListeners),Ke.call(this,A)}var st=this._eventedParent;st&&(c(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),st.fire(A))}else A instanceof Fe&&console.error(A.error);return this},nt.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},nt.prototype.setEventedParent=function(A,z){return this._eventedParent=A,this._eventedParentData=z,this};var Ge={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ct=function(A,z,Z,le){this.message=(A?A+": ":"")+Z,le&&(this.identifier=le),z!=null&&z.__line__&&(this.line=z.__line__)};function pt(A){var z=A.key,Z=A.value;return Z?[new ct(z,Z,"constants have been deprecated as of v8")]:[]}function gt(A){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];for(var le=0,Te=z;le<Te.length;le+=1){var Ce=Te[le];for(var je in Ce)A[je]=Ce[je]}return A}function ut(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function kt(A){if(Array.isArray(A))return A.map(kt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var z={};for(var Z in A)z[Z]=kt(A[Z]);return z}return ut(A)}var mt=function(A){function z(Z,le){A.call(this,le),this.message=le,this.key=Z}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z}(Error),At=function(A,z){z===void 0&&(z=[]),this.parent=A,this.bindings={};for(var Z=0,le=z;Z<le.length;Z+=1){var Te=le[Z],Ce=Te[0],je=Te[1];this.bindings[Ce]=je}};At.prototype.concat=function(A){return new At(this,A)},At.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},At.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Lt={kind:"null"},Ct={kind:"number"},zt={kind:"string"},Gt={kind:"boolean"},rn={kind:"color"},Nt={kind:"object"},Wt={kind:"value"},Rt={kind:"collator"},Ln={kind:"formatted"},bn={kind:"resolvedImage"};function hn(A,z){return{kind:"array",itemType:A,N:z}}function Kt(A){if(A.kind==="array"){var z=Kt(A.itemType);return typeof A.N=="number"?"array<"+z+", "+A.N+">":A.itemType.kind==="value"?"array":"array<"+z+">"}return A.kind}var on=[Lt,Ct,zt,Gt,rn,Ln,Nt,hn(Wt),bn];function $t(A,z){if(z.kind==="error")return null;if(A.kind==="array"){if(z.kind==="array"&&(z.N===0&&z.itemType.kind==="value"||!$t(A.itemType,z.itemType))&&(typeof A.N!="number"||A.N===z.N))return null}else{if(A.kind===z.kind)return null;if(A.kind==="value"){for(var Z=0,le=on;Z<le.length;Z+=1)if(!$t(le[Z],z))return null}}return"Expected "+Kt(A)+" but found "+Kt(z)+" instead."}function ln(A,z){return z.some(function(Z){return Z.kind===A.kind})}function mn(A,z){return z.some(function(Z){return Z==="null"?A===null:Z==="array"?Array.isArray(A):Z==="object"?A&&!Array.isArray(A)&&typeof A=="object":Z===typeof A})}var xn=T(function(A,z){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(st){return(st=Math.round(st))<0?0:st>255?255:st}function Te(st){return st<0?0:st>1?1:st}function Ce(st){return st[st.length-1]==="%"?le(parseFloat(st)/100*255):le(parseInt(st))}function je(st){return st[st.length-1]==="%"?Te(parseFloat(st)/100):Te(parseFloat(st))}function Ke(st,yt,_t){return _t<0?_t+=1:_t>1&&(_t-=1),6*_t<1?st+(yt-st)*_t*6:2*_t<1?yt:3*_t<2?st+(yt-st)*(2/3-_t)*6:st}try{z.parseCSSColor=function(st){var yt,_t=st.replace(/ /g,"").toLowerCase();if(_t in Z)return Z[_t].slice();if(_t[0]==="#")return _t.length===4?(yt=parseInt(_t.substr(1),16))>=0&&yt<=4095?[(3840&yt)>>4|(3840&yt)>>8,240&yt|(240&yt)>>4,15&yt|(15&yt)<<4,1]:null:_t.length===7&&(yt=parseInt(_t.substr(1),16))>=0&&yt<=16777215?[(16711680&yt)>>16,(65280&yt)>>8,255&yt,1]:null;var It=_t.indexOf("("),jt=_t.indexOf(")");if(It!==-1&&jt+1===_t.length){var Ft=_t.substr(0,It),nn=_t.substr(It+1,jt-(It+1)).split(","),an=1;switch(Ft){case"rgba":if(nn.length!==4)return null;an=je(nn.pop());case"rgb":return nn.length!==3?null:[Ce(nn[0]),Ce(nn[1]),Ce(nn[2]),an];case"hsla":if(nn.length!==4)return null;an=je(nn.pop());case"hsl":if(nn.length!==3)return null;var _n=(parseFloat(nn[0])%360+360)%360/360,yn=je(nn[1]),In=je(nn[2]),zn=In<=.5?In*(yn+1):In+yn-In*yn,qn=2*In-zn;return[le(255*Ke(qn,zn,_n+1/3)),le(255*Ke(qn,zn,_n)),le(255*Ke(qn,zn,_n-1/3)),an];default:return null}}return null}}catch{}}),Mn=xn.parseCSSColor,Sn=function(A,z,Z,le){le===void 0&&(le=1),this.r=A,this.g=z,this.b=Z,this.a=le};Sn.parse=function(A){if(A){if(A instanceof Sn)return A;if(typeof A=="string"){var z=Mn(A);if(z)return new Sn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},Sn.prototype.toString=function(){var A=this.toArray(),z=A[0],Z=A[1],le=A[2],Te=A[3];return"rgba("+Math.round(z)+","+Math.round(Z)+","+Math.round(le)+","+Te+")"},Sn.prototype.toArray=function(){var A=this,z=A.r,Z=A.g,le=A.b,Te=A.a;return Te===0?[0,0,0,0]:[255*z/Te,255*Z/Te,255*le/Te,Te]},Sn.black=new Sn(0,0,0,1),Sn.white=new Sn(1,1,1,1),Sn.transparent=new Sn(0,0,0,0),Sn.red=new Sn(1,0,0,1);var Tn=function(A,z,Z){this.sensitivity=A?z?"variant":"case":z?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Tn.prototype.compare=function(A,z){return this.collator.compare(A,z)},Tn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Rn=function(A,z,Z,le,Te){this.text=A,this.image=z,this.scale=Z,this.fontStack=le,this.textColor=Te},Pn=function(A){this.sections=A};Pn.fromString=function(A){return new Pn([new Rn(A,null,null,null,null)])},Pn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(A){return A.text.length!==0||A.image&&A.image.name.length!==0})},Pn.factory=function(A){return A instanceof Pn?A:Pn.fromString(A)},Pn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(A){return A.text}).join("")},Pn.prototype.serialize=function(){for(var A=["format"],z=0,Z=this.sections;z<Z.length;z+=1){var le=Z[z];if(le.image)A.push(["image",le.image.name]);else{A.push(le.text);var Te={};le.fontStack&&(Te["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(Te["font-scale"]=le.scale),le.textColor&&(Te["text-color"]=["rgba"].concat(le.textColor.toArray())),A.push(Te)}}return A};var jn=function(A){this.name=A.name,this.available=A.available};function Jn(A,z,Z,le){return typeof A=="number"&&A>=0&&A<=255&&typeof z=="number"&&z>=0&&z<=255&&typeof Z=="number"&&Z>=0&&Z<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[A,z,Z,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[A,z,Z,le]:[A,z,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function $n(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof Sn||A instanceof Tn||A instanceof Pn||A instanceof jn)return!0;if(Array.isArray(A)){for(var z=0,Z=A;z<Z.length;z+=1)if(!$n(Z[z]))return!1;return!0}if(typeof A=="object"){for(var le in A)if(!$n(A[le]))return!1;return!0}return!1}function Gn(A){if(A===null)return Lt;if(typeof A=="string")return zt;if(typeof A=="boolean")return Gt;if(typeof A=="number")return Ct;if(A instanceof Sn)return rn;if(A instanceof Tn)return Rt;if(A instanceof Pn)return Ln;if(A instanceof jn)return bn;if(Array.isArray(A)){for(var z,Z=A.length,le=0,Te=A;le<Te.length;le+=1){var Ce=Gn(Te[le]);if(z){if(z===Ce)continue;z=Wt;break}z=Ce}return hn(z||Wt,Z)}return Nt}function lr(A){var z=typeof A;return A===null?"":z==="string"||z==="number"||z==="boolean"?String(A):A instanceof Sn||A instanceof Pn||A instanceof jn?A.toString():JSON.stringify(A)}jn.prototype.toString=function(){return this.name},jn.fromString=function(A){return A?new jn({name:A,available:!1}):null},jn.prototype.serialize=function(){return["image",this.name]};var Jt=function(A,z){this.type=A,this.value=z};Jt.parse=function(A,z){if(A.length!==2)return z.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!$n(A[1]))return z.error("invalid value");var Z=A[1],le=Gn(Z),Te=z.expectedType;return le.kind!=="array"||le.N!==0||!Te||Te.kind!=="array"||typeof Te.N=="number"&&Te.N!==0||(le=Te),new Jt(le,Z)},Jt.prototype.evaluate=function(){return this.value},Jt.prototype.eachChild=function(){},Jt.prototype.outputDefined=function(){return!0},Jt.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Sn?["rgba"].concat(this.value.toArray()):this.value instanceof Pn?this.value.serialize():this.value};var Qt=function(A){this.name="ExpressionEvaluationError",this.message=A};Qt.prototype.toJSON=function(){return this.message};var En={string:zt,number:Ct,boolean:Gt,object:Nt},pn=function(A,z){this.type=A,this.args=z};pn.parse=function(A,z){if(A.length<2)return z.error("Expected at least one argument.");var Z,le=1,Te=A[0];if(Te==="array"){var Ce,je;if(A.length>2){var Ke=A[1];if(typeof Ke!="string"||!(Ke in En)||Ke==="object")return z.error('The item type argument of "array" must be one of string, number, boolean',1);Ce=En[Ke],le++}else Ce=Wt;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return z.error('The length argument to "array" must be a positive integer literal',2);je=A[2],le++}Z=hn(Ce,je)}else Z=En[Te];for(var st=[];le<A.length;le++){var yt=z.parse(A[le],le,Wt);if(!yt)return null;st.push(yt)}return new pn(Z,st)},pn.prototype.evaluate=function(A){for(var z=0;z<this.args.length;z++){var Z=this.args[z].evaluate(A);if(!$t(this.type,Gn(Z)))return Z;if(z===this.args.length-1)throw new Qt("Expected value to be of type "+Kt(this.type)+", but found "+Kt(Gn(Z))+" instead.")}return null},pn.prototype.eachChild=function(A){this.args.forEach(A)},pn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},pn.prototype.serialize=function(){var A=this.type,z=[A.kind];if(A.kind==="array"){var Z=A.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){z.push(Z.kind);var le=A.N;(typeof le=="number"||this.args.length>1)&&z.push(le)}}return z.concat(this.args.map(function(Te){return Te.serialize()}))};var Cn=function(A){this.type=Ln,this.sections=A};Cn.parse=function(A,z){if(A.length<2)return z.error("Expected at least one argument.");var Z=A[1];if(!Array.isArray(Z)&&typeof Z=="object")return z.error("First argument must be an image or text section.");for(var le=[],Te=!1,Ce=1;Ce<=A.length-1;++Ce){var je=A[Ce];if(Te&&typeof je=="object"&&!Array.isArray(je)){Te=!1;var Ke=null;if(je["font-scale"]&&!(Ke=z.parse(je["font-scale"],1,Ct)))return null;var st=null;if(je["text-font"]&&!(st=z.parse(je["text-font"],1,hn(zt))))return null;var yt=null;if(je["text-color"]&&!(yt=z.parse(je["text-color"],1,rn)))return null;var _t=le[le.length-1];_t.scale=Ke,_t.font=st,_t.textColor=yt}else{var It=z.parse(A[Ce],1,Wt);if(!It)return null;var jt=It.type.kind;if(jt!=="string"&&jt!=="value"&&jt!=="null"&&jt!=="resolvedImage")return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Te=!0,le.push({content:It,scale:null,font:null,textColor:null})}}return new Cn(le)},Cn.prototype.evaluate=function(A){return new Pn(this.sections.map(function(z){var Z=z.content.evaluate(A);return Gn(Z)===bn?new Rn("",Z,null,null,null):new Rn(lr(Z),null,z.scale?z.scale.evaluate(A):null,z.font?z.font.evaluate(A).join(","):null,z.textColor?z.textColor.evaluate(A):null)}))},Cn.prototype.eachChild=function(A){for(var z=0,Z=this.sections;z<Z.length;z+=1){var le=Z[z];A(le.content),le.scale&&A(le.scale),le.font&&A(le.font),le.textColor&&A(le.textColor)}},Cn.prototype.outputDefined=function(){return!1},Cn.prototype.serialize=function(){for(var A=["format"],z=0,Z=this.sections;z<Z.length;z+=1){var le=Z[z];A.push(le.content.serialize());var Te={};le.scale&&(Te["font-scale"]=le.scale.serialize()),le.font&&(Te["text-font"]=le.font.serialize()),le.textColor&&(Te["text-color"]=le.textColor.serialize()),A.push(Te)}return A};var Vn=function(A){this.type=bn,this.input=A};Vn.parse=function(A,z){if(A.length!==2)return z.error("Expected two arguments.");var Z=z.parse(A[1],1,zt);return Z?new Vn(Z):z.error("No image name provided.")},Vn.prototype.evaluate=function(A){var z=this.input.evaluate(A),Z=jn.fromString(z);return Z&&A.availableImages&&(Z.available=A.availableImages.indexOf(z)>-1),Z},Vn.prototype.eachChild=function(A){A(this.input)},Vn.prototype.outputDefined=function(){return!1},Vn.prototype.serialize=function(){return["image",this.input.serialize()]};var Fn={"to-boolean":Gt,"to-color":rn,"to-number":Ct,"to-string":zt},Yn=function(A,z){this.type=A,this.args=z};Yn.parse=function(A,z){if(A.length<2)return z.error("Expected at least one argument.");var Z=A[0];if((Z==="to-boolean"||Z==="to-string")&&A.length!==2)return z.error("Expected one argument.");for(var le=Fn[Z],Te=[],Ce=1;Ce<A.length;Ce++){var je=z.parse(A[Ce],Ce,Wt);if(!je)return null;Te.push(je)}return new Yn(le,Te)},Yn.prototype.evaluate=function(A){if(this.type.kind==="boolean")return!!this.args[0].evaluate(A);if(this.type.kind==="color"){for(var z,Z,le=0,Te=this.args;le<Te.length;le+=1){if(Z=null,(z=Te[le].evaluate(A))instanceof Sn)return z;if(typeof z=="string"){var Ce=A.parseColor(z);if(Ce)return Ce}else if(Array.isArray(z)&&!(Z=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":Jn(z[0],z[1],z[2],z[3])))return new Sn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new Qt(Z||"Could not parse color from value '"+(typeof z=="string"?z:String(JSON.stringify(z)))+"'")}if(this.type.kind==="number"){for(var je=null,Ke=0,st=this.args;Ke<st.length;Ke+=1){if((je=st[Ke].evaluate(A))===null)return 0;var yt=Number(je);if(!isNaN(yt))return yt}throw new Qt("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?Pn.fromString(lr(this.args[0].evaluate(A))):this.type.kind==="resolvedImage"?jn.fromString(lr(this.args[0].evaluate(A))):lr(this.args[0].evaluate(A))},Yn.prototype.eachChild=function(A){this.args.forEach(A)},Yn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Yn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Cn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Vn(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(z){A.push(z.serialize())}),A};var fr=["Unknown","Point","LineString","Polygon"],Zt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Zt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Zt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?fr[this.feature.type]:this.feature.type:null},Zt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Zt.prototype.canonicalID=function(){return this.canonical},Zt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Zt.prototype.parseColor=function(A){var z=this._parseColorCache[A];return z||(z=this._parseColorCache[A]=Sn.parse(A)),z};var dn=function(A,z,Z,le){this.name=A,this.type=z,this._evaluate=Z,this.args=le};dn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},dn.prototype.eachChild=function(A){this.args.forEach(A)},dn.prototype.outputDefined=function(){return!1},dn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},dn.parse=function(A,z){var Z,le=A[0],Te=dn.definitions[le];if(!Te)return z.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ce=Array.isArray(Te)?Te[0]:Te.type,je=Array.isArray(Te)?[[Te[1],Te[2]]]:Te.overloads,Ke=je.filter(function(Dr){var Sr=Dr[0];return!Array.isArray(Sr)||Sr.length===A.length-1}),st=null,yt=0,_t=Ke;yt<_t.length;yt+=1){var It=_t[yt],jt=It[0],Ft=It[1];st=new hr(z.registry,z.path,null,z.scope);for(var nn=[],an=!1,_n=1;_n<A.length;_n++){var yn=A[_n],In=Array.isArray(jt)?jt[_n-1]:jt.type,zn=st.parse(yn,1+nn.length,In);if(!zn){an=!0;break}nn.push(zn)}if(!an)if(Array.isArray(jt)&&jt.length!==nn.length)st.error("Expected "+jt.length+" arguments, but found "+nn.length+" instead.");else{for(var qn=0;qn<nn.length;qn++){var Wn=Array.isArray(jt)?jt[qn]:jt.type,nr=nn[qn];st.concat(qn+1).checkSubtype(Wn,nr.type)}if(st.errors.length===0)return new dn(le,Ce,Ft,nn)}}if(Ke.length===1)(Z=z.errors).push.apply(Z,st.errors);else{for(var pr=(Ke.length?Ke:je).map(function(Dr){return Sr=Dr[0],Array.isArray(Sr)?"("+Sr.map(Kt).join(", ")+")":"("+Kt(Sr.type)+"...)";var Sr}).join(" | "),cr=[],yr=1;yr<A.length;yr++){var _r=z.parse(A[yr],1+cr.length);if(!_r)return null;cr.push(Kt(_r.type))}z.error("Expected arguments of type "+pr+", but found ("+cr.join(", ")+") instead.")}return null},dn.register=function(A,z){for(var Z in dn.definitions=z,z)A[Z]=dn};var bt=function(A,z,Z){this.type=Rt,this.locale=Z,this.caseSensitive=A,this.diacriticSensitive=z};bt.parse=function(A,z){if(A.length!==2)return z.error("Expected one argument.");var Z=A[1];if(typeof Z!="object"||Array.isArray(Z))return z.error("Collator options argument must be an object.");var le=z.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,Gt);if(!le)return null;var Te=z.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,Gt);if(!Te)return null;var Ce=null;return Z.locale&&!(Ce=z.parse(Z.locale,1,zt))?null:new bt(le,Te,Ce)},bt.prototype.evaluate=function(A){return new Tn(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},bt.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},bt.prototype.outputDefined=function(){return!1},bt.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Ut=8192;function Xt(A,z){A[0]=Math.min(A[0],z[0]),A[1]=Math.min(A[1],z[1]),A[2]=Math.max(A[2],z[0]),A[3]=Math.max(A[3],z[1])}function un(A,z){return!(A[0]<=z[0]||A[2]>=z[2]||A[1]<=z[1]||A[3]>=z[3])}function cn(A,z){var Z,le=(180+A[0])/360,Te=(Z=A[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Z*Math.PI/360)))/360),Ce=Math.pow(2,z.z);return[Math.round(le*Ce*Ut),Math.round(Te*Ce*Ut)]}function vn(A,z,Z){return z[1]>A[1]!=Z[1]>A[1]&&A[0]<(Z[0]-z[0])*(A[1]-z[1])/(Z[1]-z[1])+z[0]}function en(A,z){for(var Z=!1,le=0,Te=z.length;le<Te;le++)for(var Ce=z[le],je=0,Ke=Ce.length;je<Ke-1;je++){if(st=A,yt=Ce[je],_t=Ce[je+1],It=void 0,jt=void 0,Ft=void 0,nn=void 0,It=st[0]-yt[0],jt=st[1]-yt[1],Ft=st[0]-_t[0],nn=st[1]-_t[1],It*nn-Ft*jt==0&&It*Ft<=0&&jt*nn<=0)return!1;vn(A,Ce[je],Ce[je+1])&&(Z=!Z)}var st,yt,_t,It,jt,Ft,nn;return Z}function Vt(A,z){for(var Z=0;Z<z.length;Z++)if(en(A,z[Z]))return!0;return!1}function Ht(A,z,Z,le){var Te=A[0]-Z[0],Ce=A[1]-Z[1],je=z[0]-Z[0],Ke=z[1]-Z[1],st=le[0]-Z[0],yt=le[1]-Z[1],_t=Te*yt-st*Ce,It=je*yt-st*Ke;return _t>0&&It<0||_t<0&&It>0}function tn(A,z,Z){for(var le=0,Te=Z;le<Te.length;le+=1)for(var Ce=Te[le],je=0;je<Ce.length-1;++je)if(Ke=A,st=z,yt=Ce[je],_t=Ce[je+1],It=void 0,jt=void 0,Ft=void 0,Ft=[st[0]-Ke[0],st[1]-Ke[1]],It=[_t[0]-yt[0],_t[1]-yt[1]],jt=Ft,It[0]*jt[1]-It[1]*jt[0]!=0&&Ht(Ke,st,yt,_t)&&Ht(yt,_t,Ke,st))return!0;var Ke,st,yt,_t,It,jt,Ft;return!1}function sn(A,z){for(var Z=0;Z<A.length;++Z)if(!en(A[Z],z))return!1;for(var le=0;le<A.length-1;++le)if(tn(A[le],A[le+1],z))return!1;return!0}function wn(A,z){for(var Z=0;Z<z.length;Z++)if(sn(A,z[Z]))return!0;return!1}function An(A,z,Z){for(var le=[],Te=0;Te<A.length;Te++){for(var Ce=[],je=0;je<A[Te].length;je++){var Ke=cn(A[Te][je],Z);Xt(z,Ke),Ce.push(Ke)}le.push(Ce)}return le}function Dn(A,z,Z){for(var le=[],Te=0;Te<A.length;Te++){var Ce=An(A[Te],z,Z);le.push(Ce)}return le}function Bn(A,z,Z,le){if(A[0]<Z[0]||A[0]>Z[2]){var Te=.5*le,Ce=A[0]-Z[0]>Te?-le:Z[0]-A[0]>Te?le:0;Ce===0&&(Ce=A[0]-Z[2]>Te?-le:Z[2]-A[0]>Te?le:0),A[0]+=Ce}Xt(z,A)}function Xn(A,z,Z,le){for(var Te=Math.pow(2,le.z)*Ut,Ce=[le.x*Ut,le.y*Ut],je=[],Ke=0,st=A;Ke<st.length;Ke+=1)for(var yt=0,_t=st[Ke];yt<_t.length;yt+=1){var It=_t[yt],jt=[It.x+Ce[0],It.y+Ce[1]];Bn(jt,z,Z,Te),je.push(jt)}return je}function Un(A,z,Z,le){for(var Te=Math.pow(2,le.z)*Ut,Ce=[le.x*Ut,le.y*Ut],je=[],Ke=0,st=A;Ke<st.length;Ke+=1){for(var yt=[],_t=0,It=st[Ke];_t<It.length;_t+=1){var jt=It[_t],Ft=[jt.x+Ce[0],jt.y+Ce[1]];Xt(z,Ft),yt.push(Ft)}je.push(yt)}if(z[2]-z[0]<=Te/2){(In=z)[0]=In[1]=1/0,In[2]=In[3]=-1/0;for(var nn=0,an=je;nn<an.length;nn+=1)for(var _n=0,yn=an[nn];_n<yn.length;_n+=1)Bn(yn[_n],z,Z,Te)}var In;return je}var tr=function(A,z){this.type=Gt,this.geojson=A,this.geometries=z};function Qn(A){if(A instanceof dn&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof tr)return!1;var z=!0;return A.eachChild(function(Z){z&&!Qn(Z)&&(z=!1)}),z}function Zn(A){if(A instanceof dn&&A.name==="feature-state")return!1;var z=!0;return A.eachChild(function(Z){z&&!Zn(Z)&&(z=!1)}),z}function ur(A,z){if(A instanceof dn&&z.indexOf(A.name)>=0)return!1;var Z=!0;return A.eachChild(function(le){Z&&!ur(le,z)&&(Z=!1)}),Z}tr.parse=function(A,z){if(A.length!==2)return z.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if($n(A[1])){var Z=A[1];if(Z.type==="FeatureCollection")for(var le=0;le<Z.features.length;++le){var Te=Z.features[le].geometry.type;if(Te==="Polygon"||Te==="MultiPolygon")return new tr(Z,Z.features[le].geometry)}else if(Z.type==="Feature"){var Ce=Z.geometry.type;if(Ce==="Polygon"||Ce==="MultiPolygon")return new tr(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new tr(Z,Z)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},tr.prototype.evaluate=function(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(z,Z){var le=[1/0,1/0,-1/0,-1/0],Te=[1/0,1/0,-1/0,-1/0],Ce=z.canonicalID();if(Z.type==="Polygon"){var je=An(Z.coordinates,Te,Ce),Ke=Xn(z.geometry(),le,Te,Ce);if(!un(le,Te))return!1;for(var st=0,yt=Ke;st<yt.length;st+=1)if(!en(yt[st],je))return!1}if(Z.type==="MultiPolygon"){var _t=Dn(Z.coordinates,Te,Ce),It=Xn(z.geometry(),le,Te,Ce);if(!un(le,Te))return!1;for(var jt=0,Ft=It;jt<Ft.length;jt+=1)if(!Vt(Ft[jt],_t))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(z,Z){var le=[1/0,1/0,-1/0,-1/0],Te=[1/0,1/0,-1/0,-1/0],Ce=z.canonicalID();if(Z.type==="Polygon"){var je=An(Z.coordinates,Te,Ce),Ke=Un(z.geometry(),le,Te,Ce);if(!un(le,Te))return!1;for(var st=0,yt=Ke;st<yt.length;st+=1)if(!sn(yt[st],je))return!1}if(Z.type==="MultiPolygon"){var _t=Dn(Z.coordinates,Te,Ce),It=Un(z.geometry(),le,Te,Ce);if(!un(le,Te))return!1;for(var jt=0,Ft=It;jt<Ft.length;jt+=1)if(!wn(Ft[jt],_t))return!1}return!0}(A,this.geometries)}return!1},tr.prototype.eachChild=function(){},tr.prototype.outputDefined=function(){return!0},tr.prototype.serialize=function(){return["within",this.geojson]};var mr=function(A,z){this.type=z.type,this.name=A,this.boundExpression=z};mr.parse=function(A,z){if(A.length!==2||typeof A[1]!="string")return z.error("'var' expression requires exactly one string literal argument.");var Z=A[1];return z.scope.has(Z)?new mr(Z,z.scope.get(Z)):z.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},mr.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},mr.prototype.eachChild=function(){},mr.prototype.outputDefined=function(){return!1},mr.prototype.serialize=function(){return["var",this.name]};var hr=function(A,z,Z,le,Te){z===void 0&&(z=[]),le===void 0&&(le=new At),Te===void 0&&(Te=[]),this.registry=A,this.path=z,this.key=z.map(function(Ce){return"["+Ce+"]"}).join(""),this.scope=le,this.errors=Te,this.expectedType=Z};function rr(A){if(A instanceof mr)return rr(A.boundExpression);if(A instanceof dn&&A.name==="error"||A instanceof bt||A instanceof tr)return!1;var z=A instanceof Yn||A instanceof pn,Z=!0;return A.eachChild(function(le){Z=z?Z&&rr(le):Z&&le instanceof Jt}),!!Z&&Qn(A)&&ur(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gr(A,z){for(var Z,le,Te=A.length-1,Ce=0,je=Te,Ke=0;Ce<=je;)if(Z=A[Ke=Math.floor((Ce+je)/2)],le=A[Ke+1],Z<=z){if(Ke===Te||z<le)return Ke;Ce=Ke+1}else{if(!(Z>z))throw new Qt("Input is not a number.");je=Ke-1}return 0}hr.prototype.parse=function(A,z,Z,le,Te){return Te===void 0&&(Te={}),z?this.concat(z,Z,le)._parse(A,Te):this._parse(A,Te)},hr.prototype._parse=function(A,z){function Z(yt,_t,It){return It==="assert"?new pn(_t,[yt]):It==="coerce"?new Yn(_t,[yt]):yt}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=A[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Te=this.registry[le];if(Te){var Ce=Te.parse(A,this);if(!Ce)return null;if(this.expectedType){var je=this.expectedType,Ke=Ce.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||Ke.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||Ke.kind!=="value"&&Ke.kind!=="string"){if(this.checkSubtype(je,Ke))return null}else Ce=Z(Ce,je,z.typeAnnotation||"coerce");else Ce=Z(Ce,je,z.typeAnnotation||"assert")}if(!(Ce instanceof Jt)&&Ce.type.kind!=="resolvedImage"&&rr(Ce)){var st=new Zt;try{Ce=new Jt(Ce.type,Ce.evaluate(st))}catch(yt){return this.error(yt.message),null}}return Ce}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return A===void 0?this.error("'undefined' value invalid. Use null instead."):typeof A=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof A+" instead.")},hr.prototype.concat=function(A,z,Z){var le=typeof A=="number"?this.path.concat(A):this.path,Te=Z?this.scope.concat(Z):this.scope;return new hr(this.registry,le,z||null,Te,this.errors)},hr.prototype.error=function(A){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];var le=""+this.key+z.map(function(Te){return"["+Te+"]"}).join("");this.errors.push(new mt(le,A))},hr.prototype.checkSubtype=function(A,z){var Z=$t(A,z);return Z&&this.error(Z),Z};var xr=function(A,z,Z){this.type=A,this.input=z,this.labels=[],this.outputs=[];for(var le=0,Te=Z;le<Te.length;le+=1){var Ce=Te[le],je=Ce[0],Ke=Ce[1];this.labels.push(je),this.outputs.push(Ke)}};function Pr(A,z,Z){return A*(1-Z)+z*Z}xr.parse=function(A,z){if(A.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return z.error("Expected an even number of arguments.");var Z=z.parse(A[1],1,Ct);if(!Z)return null;var le=[],Te=null;z.expectedType&&z.expectedType.kind!=="value"&&(Te=z.expectedType);for(var Ce=1;Ce<A.length;Ce+=2){var je=Ce===1?-1/0:A[Ce],Ke=A[Ce+1],st=Ce,yt=Ce+1;if(typeof je!="number")return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(le.length&&le[le.length-1][0]>=je)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var _t=z.parse(Ke,yt,Te);if(!_t)return null;Te=Te||_t.type,le.push([je,_t])}return new xr(Te,Z,le)},xr.prototype.evaluate=function(A){var z=this.labels,Z=this.outputs;if(z.length===1)return Z[0].evaluate(A);var le=this.input.evaluate(A);if(le<=z[0])return Z[0].evaluate(A);var Te=z.length;return le>=z[Te-1]?Z[Te-1].evaluate(A):Z[gr(z,le)].evaluate(A)},xr.prototype.eachChild=function(A){A(this.input);for(var z=0,Z=this.outputs;z<Z.length;z+=1)A(Z[z])},xr.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},xr.prototype.serialize=function(){for(var A=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&A.push(this.labels[z]),A.push(this.outputs[z].serialize());return A};var ii=Object.freeze({__proto__:null,number:Pr,color:function(A,z,Z){return new Sn(Pr(A.r,z.r,Z),Pr(A.g,z.g,Z),Pr(A.b,z.b,Z),Pr(A.a,z.a,Z))},array:function(A,z,Z){return A.map(function(le,Te){return Pr(le,z[Te],Z)})}}),oi=.95047,Vi=1,ti=1.08883,ki=4/29,Or=6/29,hi=3*Or*Or,sa=Or*Or*Or,Zi=Math.PI/180,uo=180/Math.PI;function co(A){return A>sa?Math.pow(A,.3333333333333333):A/hi+ki}function Xa(A){return A>Or?A*A*A:hi*(A-ki)}function Xi(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function Ka(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Ao(A){var z=Ka(A.r),Z=Ka(A.g),le=Ka(A.b),Te=co((.4124564*z+.3575761*Z+.1804375*le)/oi),Ce=co((.2126729*z+.7151522*Z+.072175*le)/Vi);return{l:116*Ce-16,a:500*(Te-Ce),b:200*(Ce-co((.0193339*z+.119192*Z+.9503041*le)/ti)),alpha:A.a}}function Ho(A){var z=(A.l+16)/116,Z=isNaN(A.a)?z:z+A.a/500,le=isNaN(A.b)?z:z-A.b/200;return z=Vi*Xa(z),Z=oi*Xa(Z),le=ti*Xa(le),new Sn(Xi(3.2404542*Z-1.5371385*z-.4985314*le),Xi(-.969266*Z+1.8760108*z+.041556*le),Xi(.0556434*Z-.2040259*z+1.0572252*le),A.alpha)}function Sa(A,z,Z){var le=z-A;return A+Z*(le>180||le<-180?le-360*Math.round(le/360):le)}var Ea={forward:Ao,reverse:Ho,interpolate:function(A,z,Z){return{l:Pr(A.l,z.l,Z),a:Pr(A.a,z.a,Z),b:Pr(A.b,z.b,Z),alpha:Pr(A.alpha,z.alpha,Z)}}},Ja={forward:function(A){var z=Ao(A),Z=z.l,le=z.a,Te=z.b,Ce=Math.atan2(Te,le)*uo;return{h:Ce<0?Ce+360:Ce,c:Math.sqrt(le*le+Te*Te),l:Z,alpha:A.a}},reverse:function(A){var z=A.h*Zi,Z=A.c;return Ho({l:A.l,a:Math.cos(z)*Z,b:Math.sin(z)*Z,alpha:A.alpha})},interpolate:function(A,z,Z){return{h:Sa(A.h,z.h,Z),c:Pr(A.c,z.c,Z),l:Pr(A.l,z.l,Z),alpha:Pr(A.alpha,z.alpha,Z)}}},pi=Object.freeze({__proto__:null,lab:Ea,hcl:Ja}),Ri=function(A,z,Z,le,Te){this.type=A,this.operator=z,this.interpolation=Z,this.input=le,this.labels=[],this.outputs=[];for(var Ce=0,je=Te;Ce<je.length;Ce+=1){var Ke=je[Ce],st=Ke[0],yt=Ke[1];this.labels.push(st),this.outputs.push(yt)}};function fo(A,z,Z,le){var Te=le-Z,Ce=A-Z;return Te===0?0:z===1?Ce/Te:(Math.pow(z,Ce)-1)/(Math.pow(z,Te)-1)}Ri.interpolationFactor=function(A,z,Z,le){var Te=0;if(A.name==="exponential")Te=fo(z,A.base,Z,le);else if(A.name==="linear")Te=fo(z,1,Z,le);else if(A.name==="cubic-bezier"){var Ce=A.controlPoints;Te=new p(Ce[0],Ce[1],Ce[2],Ce[3]).solve(fo(z,1,Z,le))}return Te},Ri.parse=function(A,z){var Z=A[0],le=A[1],Te=A[2],Ce=A.slice(3);if(!Array.isArray(le)||le.length===0)return z.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var je=le[1];if(typeof je!="number")return z.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:je}}else{if(le[0]!=="cubic-bezier")return z.error("Unknown interpolation type "+String(le[0]),1,0);var Ke=le.slice(1);if(Ke.length!==4||Ke.some(function(_n){return typeof _n!="number"||_n<0||_n>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:Ke}}if(A.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(Te=z.parse(Te,2,Ct)))return null;var st=[],yt=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?yt=rn:z.expectedType&&z.expectedType.kind!=="value"&&(yt=z.expectedType);for(var _t=0;_t<Ce.length;_t+=2){var It=Ce[_t],jt=Ce[_t+1],Ft=_t+3,nn=_t+4;if(typeof It!="number")return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ft);if(st.length&&st[st.length-1][0]>=It)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ft);var an=z.parse(jt,nn,yt);if(!an)return null;yt=yt||an.type,st.push([It,an])}return yt.kind==="number"||yt.kind==="color"||yt.kind==="array"&&yt.itemType.kind==="number"&&typeof yt.N=="number"?new Ri(yt,Z,le,Te,st):z.error("Type "+Kt(yt)+" is not interpolatable.")},Ri.prototype.evaluate=function(A){var z=this.labels,Z=this.outputs;if(z.length===1)return Z[0].evaluate(A);var le=this.input.evaluate(A);if(le<=z[0])return Z[0].evaluate(A);var Te=z.length;if(le>=z[Te-1])return Z[Te-1].evaluate(A);var Ce=gr(z,le),je=z[Ce],Ke=z[Ce+1],st=Ri.interpolationFactor(this.interpolation,le,je,Ke),yt=Z[Ce].evaluate(A),_t=Z[Ce+1].evaluate(A);return this.operator==="interpolate"?ii[this.type.kind.toLowerCase()](yt,_t,st):this.operator==="interpolate-hcl"?Ja.reverse(Ja.interpolate(Ja.forward(yt),Ja.forward(_t),st)):Ea.reverse(Ea.interpolate(Ea.forward(yt),Ea.forward(_t),st))},Ri.prototype.eachChild=function(A){A(this.input);for(var z=0,Z=this.outputs;z<Z.length;z+=1)A(Z[z])},Ri.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Ri.prototype.serialize=function(){var A;A=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,A,this.input.serialize()],Z=0;Z<this.labels.length;Z++)z.push(this.labels[Z],this.outputs[Z].serialize());return z};var $a=function(A,z){this.type=A,this.args=z};$a.parse=function(A,z){if(A.length<2)return z.error("Expectected at least one argument.");var Z=null,le=z.expectedType;le&&le.kind!=="value"&&(Z=le);for(var Te=[],Ce=0,je=A.slice(1);Ce<je.length;Ce+=1){var Ke=je[Ce],st=z.parse(Ke,1+Te.length,Z,void 0,{typeAnnotation:"omit"});if(!st)return null;Z=Z||st.type,Te.push(st)}var yt=le&&Te.some(function(_t){return $t(le,_t.type)});return new $a(yt?Wt:Z,Te)},$a.prototype.evaluate=function(A){for(var z,Z=null,le=0,Te=0,Ce=this.args;Te<Ce.length&&(le++,(Z=Ce[Te].evaluate(A))&&Z instanceof jn&&!Z.available&&(z||(z=Z.name),Z=null,le===this.args.length&&(Z=z)),Z===null);Te+=1);return Z},$a.prototype.eachChild=function(A){this.args.forEach(A)},$a.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},$a.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(z){A.push(z.serialize())}),A};var Fa=function(A,z){this.type=z.type,this.bindings=[].concat(A),this.result=z};Fa.prototype.evaluate=function(A){return this.result.evaluate(A)},Fa.prototype.eachChild=function(A){for(var z=0,Z=this.bindings;z<Z.length;z+=1)A(Z[z][1]);A(this.result)},Fa.parse=function(A,z){if(A.length<4)return z.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var Z=[],le=1;le<A.length-1;le+=2){var Te=A[le];if(typeof Te!="string")return z.error("Expected string, but found "+typeof Te+" instead.",le);if(/[^a-zA-Z0-9_]/.test(Te))return z.error("Variable names must contain only alphanumeric characters or '_'.",le);var Ce=z.parse(A[le+1],le+1);if(!Ce)return null;Z.push([Te,Ce])}var je=z.parse(A[A.length-1],A.length-1,z.expectedType,Z);return je?new Fa(Z,je):null},Fa.prototype.outputDefined=function(){return this.result.outputDefined()},Fa.prototype.serialize=function(){for(var A=["let"],z=0,Z=this.bindings;z<Z.length;z+=1){var le=Z[z],Te=le[0],Ce=le[1];A.push(Te,Ce.serialize())}return A.push(this.result.serialize()),A};var Mo=function(A,z,Z){this.type=A,this.index=z,this.input=Z};Mo.parse=function(A,z){if(A.length!==3)return z.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Z=z.parse(A[1],1,Ct),le=z.parse(A[2],2,hn(z.expectedType||Wt));if(!Z||!le)return null;var Te=le.type;return new Mo(Te.itemType,Z,le)},Mo.prototype.evaluate=function(A){var z=this.index.evaluate(A),Z=this.input.evaluate(A);if(z<0)throw new Qt("Array index out of bounds: "+z+" < 0.");if(z>=Z.length)throw new Qt("Array index out of bounds: "+z+" > "+(Z.length-1)+".");if(z!==Math.floor(z))throw new Qt("Array index must be an integer, but found "+z+" instead.");return Z[z]},Mo.prototype.eachChild=function(A){A(this.index),A(this.input)},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Qa=function(A,z){this.type=Gt,this.needle=A,this.haystack=z};Qa.parse=function(A,z){if(A.length!==3)return z.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Z=z.parse(A[1],1,Wt),le=z.parse(A[2],2,Wt);return Z&&le?ln(Z.type,[Gt,zt,Ct,Lt,Wt])?new Qa(Z,le):z.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Z.type)+" instead"):null},Qa.prototype.evaluate=function(A){var z=this.needle.evaluate(A),Z=this.haystack.evaluate(A);if(!Z)return!1;if(!mn(z,["boolean","string","number","null"]))throw new Qt("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Gn(z))+" instead.");if(!mn(Z,["string","array"]))throw new Qt("Expected second argument to be of type array or string, but found "+Kt(Gn(Z))+" instead.");return Z.indexOf(z)>=0},Qa.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},Qa.prototype.outputDefined=function(){return!0},Qa.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var So=function(A,z,Z){this.type=Ct,this.needle=A,this.haystack=z,this.fromIndex=Z};So.parse=function(A,z){if(A.length<=2||A.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Z=z.parse(A[1],1,Wt),le=z.parse(A[2],2,Wt);if(!Z||!le)return null;if(!ln(Z.type,[Gt,zt,Ct,Lt,Wt]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Z.type)+" instead");if(A.length===4){var Te=z.parse(A[3],3,Ct);return Te?new So(Z,le,Te):null}return new So(Z,le)},So.prototype.evaluate=function(A){var z=this.needle.evaluate(A),Z=this.haystack.evaluate(A);if(!mn(z,["boolean","string","number","null"]))throw new Qt("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Gn(z))+" instead.");if(!mn(Z,["string","array"]))throw new Qt("Expected second argument to be of type array or string, but found "+Kt(Gn(Z))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(A);return Z.indexOf(z,le)}return Z.indexOf(z)},So.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},So.prototype.outputDefined=function(){return!1},So.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ho=function(A,z,Z,le,Te,Ce){this.inputType=A,this.type=z,this.input=Z,this.cases=le,this.outputs=Te,this.otherwise=Ce};ho.parse=function(A,z){if(A.length<5)return z.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return z.error("Expected an even number of arguments.");var Z,le;z.expectedType&&z.expectedType.kind!=="value"&&(le=z.expectedType);for(var Te={},Ce=[],je=2;je<A.length-1;je+=2){var Ke=A[je],st=A[je+1];Array.isArray(Ke)||(Ke=[Ke]);var yt=z.concat(je);if(Ke.length===0)return yt.error("Expected at least one branch label.");for(var _t=0,It=Ke;_t<It.length;_t+=1){var jt=It[_t];if(typeof jt!="number"&&typeof jt!="string")return yt.error("Branch labels must be numbers or strings.");if(typeof jt=="number"&&Math.abs(jt)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof jt=="number"&&Math.floor(jt)!==jt)return yt.error("Numeric branch labels must be integer values.");if(Z){if(yt.checkSubtype(Z,Gn(jt)))return null}else Z=Gn(jt);if(Te[String(jt)]!==void 0)return yt.error("Branch labels must be unique.");Te[String(jt)]=Ce.length}var Ft=z.parse(st,je,le);if(!Ft)return null;le=le||Ft.type,Ce.push(Ft)}var nn=z.parse(A[1],1,Wt);if(!nn)return null;var an=z.parse(A[A.length-1],A.length-1,le);return an?nn.type.kind!=="value"&&z.concat(1).checkSubtype(Z,nn.type)?null:new ho(Z,le,nn,Te,Ce,an):null},ho.prototype.evaluate=function(A){var z=this.input.evaluate(A);return(Gn(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(A)},ho.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},ho.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},ho.prototype.serialize=function(){for(var A=this,z=["match",this.input.serialize()],Z=[],le={},Te=0,Ce=Object.keys(this.cases).sort();Te<Ce.length;Te+=1){var je=Ce[Te];(It=le[this.cases[je]])===void 0?(le[this.cases[je]]=Z.length,Z.push([this.cases[je],[je]])):Z[It][1].push(je)}for(var Ke=function(Ft){return A.inputType.kind==="number"?Number(Ft):Ft},st=0,yt=Z;st<yt.length;st+=1){var _t=yt[st],It=_t[0],jt=_t[1];jt.length===1?z.push(Ke(jt[0])):z.push(jt.map(Ke)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var Eo=function(A,z,Z){this.type=A,this.branches=z,this.otherwise=Z};Eo.parse=function(A,z){if(A.length<4)return z.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return z.error("Expected an odd number of arguments.");var Z;z.expectedType&&z.expectedType.kind!=="value"&&(Z=z.expectedType);for(var le=[],Te=1;Te<A.length-1;Te+=2){var Ce=z.parse(A[Te],Te,Gt);if(!Ce)return null;var je=z.parse(A[Te+1],Te+1,Z);if(!je)return null;le.push([Ce,je]),Z=Z||je.type}var Ke=z.parse(A[A.length-1],A.length-1,Z);return Ke?new Eo(Z,le,Ke):null},Eo.prototype.evaluate=function(A){for(var z=0,Z=this.branches;z<Z.length;z+=1){var le=Z[z],Te=le[0],Ce=le[1];if(Te.evaluate(A))return Ce.evaluate(A)}return this.otherwise.evaluate(A)},Eo.prototype.eachChild=function(A){for(var z=0,Z=this.branches;z<Z.length;z+=1){var le=Z[z],Te=le[0],Ce=le[1];A(Te),A(Ce)}A(this.otherwise)},Eo.prototype.outputDefined=function(){return this.branches.every(function(A){return A[0],A[1].outputDefined()})&&this.otherwise.outputDefined()},Eo.prototype.serialize=function(){var A=["case"];return this.eachChild(function(z){A.push(z.serialize())}),A};var eo=function(A,z,Z,le){this.type=A,this.input=z,this.beginIndex=Z,this.endIndex=le};function Ks(A,z){return A==="=="||A==="!="?z.kind==="boolean"||z.kind==="string"||z.kind==="number"||z.kind==="null"||z.kind==="value":z.kind==="string"||z.kind==="number"||z.kind==="value"}function Bs(A,z,Z,le){return le.compare(z,Z)===0}function Go(A,z,Z){var le=A!=="=="&&A!=="!=";return function(){function Te(Ce,je,Ke){this.type=Gt,this.lhs=Ce,this.rhs=je,this.collator=Ke,this.hasUntypedArgument=Ce.type.kind==="value"||je.type.kind==="value"}return Te.parse=function(Ce,je){if(Ce.length!==3&&Ce.length!==4)return je.error("Expected two or three arguments.");var Ke=Ce[0],st=je.parse(Ce[1],1,Wt);if(!st)return null;if(!Ks(Ke,st.type))return je.concat(1).error('"'+Ke+`" comparisons are not supported for type '`+Kt(st.type)+"'.");var yt=je.parse(Ce[2],2,Wt);if(!yt)return null;if(!Ks(Ke,yt.type))return je.concat(2).error('"'+Ke+`" comparisons are not supported for type '`+Kt(yt.type)+"'.");if(st.type.kind!==yt.type.kind&&st.type.kind!=="value"&&yt.type.kind!=="value")return je.error("Cannot compare types '"+Kt(st.type)+"' and '"+Kt(yt.type)+"'.");le&&(st.type.kind==="value"&&yt.type.kind!=="value"?st=new pn(yt.type,[st]):st.type.kind!=="value"&&yt.type.kind==="value"&&(yt=new pn(st.type,[yt])));var _t=null;if(Ce.length===4){if(st.type.kind!=="string"&&yt.type.kind!=="string"&&st.type.kind!=="value"&&yt.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(_t=je.parse(Ce[3],3,Rt)))return null}return new Te(st,yt,_t)},Te.prototype.evaluate=function(Ce){var je=this.lhs.evaluate(Ce),Ke=this.rhs.evaluate(Ce);if(le&&this.hasUntypedArgument){var st=Gn(je),yt=Gn(Ke);if(st.kind!==yt.kind||st.kind!=="string"&&st.kind!=="number")throw new Qt('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+st.kind+", "+yt.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var _t=Gn(je),It=Gn(Ke);if(_t.kind!=="string"||It.kind!=="string")return z(Ce,je,Ke)}return this.collator?Z(Ce,je,Ke,this.collator.evaluate(Ce)):z(Ce,je,Ke)},Te.prototype.eachChild=function(Ce){Ce(this.lhs),Ce(this.rhs),this.collator&&Ce(this.collator)},Te.prototype.outputDefined=function(){return!0},Te.prototype.serialize=function(){var Ce=[A];return this.eachChild(function(je){Ce.push(je.serialize())}),Ce},Te}()}eo.parse=function(A,z){if(A.length<=2||A.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Z=z.parse(A[1],1,Wt),le=z.parse(A[2],2,Ct);if(!Z||!le)return null;if(!ln(Z.type,[hn(Wt),zt,Wt]))return z.error("Expected first argument to be of type array or string, but found "+Kt(Z.type)+" instead");if(A.length===4){var Te=z.parse(A[3],3,Ct);return Te?new eo(Z.type,Z,le,Te):null}return new eo(Z.type,Z,le)},eo.prototype.evaluate=function(A){var z=this.input.evaluate(A),Z=this.beginIndex.evaluate(A);if(!mn(z,["string","array"]))throw new Qt("Expected first argument to be of type array or string, but found "+Kt(Gn(z))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(A);return z.slice(Z,le)}return z.slice(Z)},eo.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ol=Go("==",function(A,z,Z){return z===Z},Bs),sl=Go("!=",function(A,z,Z){return z!==Z},function(A,z,Z,le){return!Bs(0,z,Z,le)}),Wo=Go("<",function(A,z,Z){return z<Z},function(A,z,Z,le){return le.compare(z,Z)<0}),ll=Go(">",function(A,z,Z){return z>Z},function(A,z,Z,le){return le.compare(z,Z)>0}),_l=Go("<=",function(A,z,Z){return z<=Z},function(A,z,Z,le){return le.compare(z,Z)<=0}),wl=Go(">=",function(A,z,Z){return z>=Z},function(A,z,Z,le){return le.compare(z,Z)>=0}),Yo=function(A,z,Z,le,Te){this.type=zt,this.number=A,this.locale=z,this.currency=Z,this.minFractionDigits=le,this.maxFractionDigits=Te};Yo.parse=function(A,z){if(A.length!==3)return z.error("Expected two arguments.");var Z=z.parse(A[1],1,Ct);if(!Z)return null;var le=A[2];if(typeof le!="object"||Array.isArray(le))return z.error("NumberFormat options argument must be an object.");var Te=null;if(le.locale&&!(Te=z.parse(le.locale,1,zt)))return null;var Ce=null;if(le.currency&&!(Ce=z.parse(le.currency,1,zt)))return null;var je=null;if(le["min-fraction-digits"]&&!(je=z.parse(le["min-fraction-digits"],1,Ct)))return null;var Ke=null;return le["max-fraction-digits"]&&!(Ke=z.parse(le["max-fraction-digits"],1,Ct))?null:new Yo(Z,Te,Ce,je,Ke)},Yo.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},Yo.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},Yo.prototype.outputDefined=function(){return!1},Yo.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var to=function(A){this.type=Ct,this.input=A};to.parse=function(A,z){if(A.length!==2)return z.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var Z=z.parse(A[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?z.error("Expected argument of type string or array, but found "+Kt(Z.type)+" instead."):new to(Z):null},to.prototype.evaluate=function(A){var z=this.input.evaluate(A);if(typeof z=="string"||Array.isArray(z))return z.length;throw new Qt("Expected value to be of type string or array, but found "+Kt(Gn(z))+" instead.")},to.prototype.eachChild=function(A){A(this.input)},to.prototype.outputDefined=function(){return!1},to.prototype.serialize=function(){var A=["length"];return this.eachChild(function(z){A.push(z.serialize())}),A};var as={"==":ol,"!=":sl,">":ll,"<":Wo,">=":wl,"<=":_l,array:pn,at:Mo,boolean:pn,case:Eo,coalesce:$a,collator:bt,format:Cn,image:Vn,in:Qa,"index-of":So,interpolate:Ri,"interpolate-hcl":Ri,"interpolate-lab":Ri,length:to,let:Fa,literal:Jt,match:ho,number:pn,"number-format":Yo,object:pn,slice:eo,step:xr,string:pn,"to-boolean":Yn,"to-color":Yn,"to-number":Yn,"to-string":Yn,var:mr,within:tr};function Zo(A,z){var Z=z[0],le=z[1],Te=z[2],Ce=z[3];Z=Z.evaluate(A),le=le.evaluate(A),Te=Te.evaluate(A);var je=Ce?Ce.evaluate(A):1,Ke=Jn(Z,le,Te,je);if(Ke)throw new Qt(Ke);return new Sn(Z/255*je,le/255*je,Te/255*je,je)}function _s(A,z){return A in z}function Xo(A,z){var Z=z[A];return Z===void 0?null:Z}function Ba(A){return{type:A}}function Js(A){return{result:"success",value:A}}function Lo(A){return{result:"error",value:A}}function po(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function go(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Co(A){return!!A.expression&&A.expression.interpolated}function Ur(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function os(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function Tl(A){return A}function Ns(A,z){var Z,le,Te,Ce=z.type==="color",je=A.stops&&typeof A.stops[0][0]=="object",Ke=je||A.property!==void 0,st=je||!Ke,yt=A.type||(Co(z)?"exponential":"interval");if(Ce&&((A=gt({},A)).stops&&(A.stops=A.stops.map(function(cr){return[cr[0],Sn.parse(cr[1])]})),A.default?A.default=Sn.parse(A.default):A.default=Sn.parse(z.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!pi[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(yt==="exponential")Z=js;else if(yt==="interval")Z=kl;else if(yt==="categorical"){Z=ul,le=Object.create(null);for(var _t=0,It=A.stops;_t<It.length;_t+=1){var jt=It[_t];le[jt[0]]=jt[1]}Te=typeof A.stops[0][0]}else{if(yt!=="identity")throw new Error('Unknown function type "'+yt+'"');Z=Al}if(je){for(var Ft={},nn=[],an=0;an<A.stops.length;an++){var _n=A.stops[an],yn=_n[0].zoom;Ft[yn]===void 0&&(Ft[yn]={zoom:yn,type:A.type,property:A.property,default:A.default,stops:[]},nn.push(yn)),Ft[yn].stops.push([_n[0].value,_n[1]])}for(var In=[],zn=0,qn=nn;zn<qn.length;zn+=1){var Wn=qn[zn];In.push([Ft[Wn].zoom,Ns(Ft[Wn],z)])}var nr={name:"linear"};return{kind:"composite",interpolationType:nr,interpolationFactor:Ri.interpolationFactor.bind(void 0,nr),zoomStops:In.map(function(cr){return cr[0]}),evaluate:function(cr,yr){var _r=cr.zoom;return js({stops:In,base:A.base},z,_r).evaluate(_r,yr)}}}if(st){var pr=yt==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:pr,interpolationFactor:Ri.interpolationFactor.bind(void 0,pr),zoomStops:A.stops.map(function(cr){return cr[0]}),evaluate:function(cr){var yr=cr.zoom;return Z(A,z,yr,le,Te)}}}return{kind:"source",evaluate:function(cr,yr){var _r=yr&&yr.properties?yr.properties[A.property]:void 0;return _r===void 0?ss(A.default,z.default):Z(A,z,_r,le,Te)}}}function ss(A,z,Z){return A!==void 0?A:z!==void 0?z:Z!==void 0?Z:void 0}function ul(A,z,Z,le,Te){return ss(typeof Z===Te?le[Z]:void 0,A.default,z.default)}function kl(A,z,Z){if(Ur(Z)!=="number")return ss(A.default,z.default);var le=A.stops.length;if(le===1||Z<=A.stops[0][0])return A.stops[0][1];if(Z>=A.stops[le-1][0])return A.stops[le-1][1];var Te=gr(A.stops.map(function(Ce){return Ce[0]}),Z);return A.stops[Te][1]}function js(A,z,Z){var le=A.base!==void 0?A.base:1;if(Ur(Z)!=="number")return ss(A.default,z.default);var Te=A.stops.length;if(Te===1||Z<=A.stops[0][0])return A.stops[0][1];if(Z>=A.stops[Te-1][0])return A.stops[Te-1][1];var Ce=gr(A.stops.map(function(It){return It[0]}),Z),je=function(It,jt,Ft,nn){var an=nn-Ft,_n=It-Ft;return an===0?0:jt===1?_n/an:(Math.pow(jt,_n)-1)/(Math.pow(jt,an)-1)}(Z,le,A.stops[Ce][0],A.stops[Ce+1][0]),Ke=A.stops[Ce][1],st=A.stops[Ce+1][1],yt=ii[z.type]||Tl;if(A.colorSpace&&A.colorSpace!=="rgb"){var _t=pi[A.colorSpace];yt=function(It,jt){return _t.reverse(_t.interpolate(_t.forward(It),_t.forward(jt),je))}}return typeof Ke.evaluate=="function"?{evaluate:function(){for(var It=[],jt=arguments.length;jt--;)It[jt]=arguments[jt];var Ft=Ke.evaluate.apply(void 0,It),nn=st.evaluate.apply(void 0,It);if(Ft!==void 0&&nn!==void 0)return yt(Ft,nn,je)}}:yt(Ke,st,je)}function Al(A,z,Z){return z.type==="color"?Z=Sn.parse(Z):z.type==="formatted"?Z=Pn.fromString(Z.toString()):z.type==="resolvedImage"?Z=jn.fromString(Z.toString()):Ur(Z)===z.type||z.type==="enum"&&z.values[Z]||(Z=void 0),ss(Z,A.default,z.default)}dn.register(as,{error:[{kind:"error"},[zt],function(A,z){var Z=z[0];throw new Qt(Z.evaluate(A))}],typeof:[zt,[Wt],function(A,z){return Kt(Gn(z[0].evaluate(A)))}],"to-rgba":[hn(Ct,4),[rn],function(A,z){return z[0].evaluate(A).toArray()}],rgb:[rn,[Ct,Ct,Ct],Zo],rgba:[rn,[Ct,Ct,Ct,Ct],Zo],has:{type:Gt,overloads:[[[zt],function(A,z){return _s(z[0].evaluate(A),A.properties())}],[[zt,Nt],function(A,z){var Z=z[0],le=z[1];return _s(Z.evaluate(A),le.evaluate(A))}]]},get:{type:Wt,overloads:[[[zt],function(A,z){return Xo(z[0].evaluate(A),A.properties())}],[[zt,Nt],function(A,z){var Z=z[0],le=z[1];return Xo(Z.evaluate(A),le.evaluate(A))}]]},"feature-state":[Wt,[zt],function(A,z){return Xo(z[0].evaluate(A),A.featureState||{})}],properties:[Nt,[],function(A){return A.properties()}],"geometry-type":[zt,[],function(A){return A.geometryType()}],id:[Wt,[],function(A){return A.id()}],zoom:[Ct,[],function(A){return A.globals.zoom}],"heatmap-density":[Ct,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Ct,[],function(A){return A.globals.lineProgress||0}],accumulated:[Wt,[],function(A){return A.globals.accumulated===void 0?null:A.globals.accumulated}],"+":[Ct,Ba(Ct),function(A,z){for(var Z=0,le=0,Te=z;le<Te.length;le+=1)Z+=Te[le].evaluate(A);return Z}],"*":[Ct,Ba(Ct),function(A,z){for(var Z=1,le=0,Te=z;le<Te.length;le+=1)Z*=Te[le].evaluate(A);return Z}],"-":{type:Ct,overloads:[[[Ct,Ct],function(A,z){var Z=z[0],le=z[1];return Z.evaluate(A)-le.evaluate(A)}],[[Ct],function(A,z){return-z[0].evaluate(A)}]]},"/":[Ct,[Ct,Ct],function(A,z){var Z=z[0],le=z[1];return Z.evaluate(A)/le.evaluate(A)}],"%":[Ct,[Ct,Ct],function(A,z){var Z=z[0],le=z[1];return Z.evaluate(A)%le.evaluate(A)}],ln2:[Ct,[],function(){return Math.LN2}],pi:[Ct,[],function(){return Math.PI}],e:[Ct,[],function(){return Math.E}],"^":[Ct,[Ct,Ct],function(A,z){var Z=z[0],le=z[1];return Math.pow(Z.evaluate(A),le.evaluate(A))}],sqrt:[Ct,[Ct],function(A,z){var Z=z[0];return Math.sqrt(Z.evaluate(A))}],log10:[Ct,[Ct],function(A,z){var Z=z[0];return Math.log(Z.evaluate(A))/Math.LN10}],ln:[Ct,[Ct],function(A,z){var Z=z[0];return Math.log(Z.evaluate(A))}],log2:[Ct,[Ct],function(A,z){var Z=z[0];return Math.log(Z.evaluate(A))/Math.LN2}],sin:[Ct,[Ct],function(A,z){var Z=z[0];return Math.sin(Z.evaluate(A))}],cos:[Ct,[Ct],function(A,z){var Z=z[0];return Math.cos(Z.evaluate(A))}],tan:[Ct,[Ct],function(A,z){var Z=z[0];return Math.tan(Z.evaluate(A))}],asin:[Ct,[Ct],function(A,z){var Z=z[0];return Math.asin(Z.evaluate(A))}],acos:[Ct,[Ct],function(A,z){var Z=z[0];return Math.acos(Z.evaluate(A))}],atan:[Ct,[Ct],function(A,z){var Z=z[0];return Math.atan(Z.evaluate(A))}],min:[Ct,Ba(Ct),function(A,z){return Math.min.apply(Math,z.map(function(Z){return Z.evaluate(A)}))}],max:[Ct,Ba(Ct),function(A,z){return Math.max.apply(Math,z.map(function(Z){return Z.evaluate(A)}))}],abs:[Ct,[Ct],function(A,z){var Z=z[0];return Math.abs(Z.evaluate(A))}],round:[Ct,[Ct],function(A,z){var Z=z[0].evaluate(A);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[Ct,[Ct],function(A,z){var Z=z[0];return Math.floor(Z.evaluate(A))}],ceil:[Ct,[Ct],function(A,z){var Z=z[0];return Math.ceil(Z.evaluate(A))}],"filter-==":[Gt,[zt,Wt],function(A,z){var Z=z[0],le=z[1];return A.properties()[Z.value]===le.value}],"filter-id-==":[Gt,[Wt],function(A,z){var Z=z[0];return A.id()===Z.value}],"filter-type-==":[Gt,[zt],function(A,z){var Z=z[0];return A.geometryType()===Z.value}],"filter-<":[Gt,[zt,Wt],function(A,z){var Z=z[0],le=z[1],Te=A.properties()[Z.value],Ce=le.value;return typeof Te==typeof Ce&&Te<Ce}],"filter-id-<":[Gt,[Wt],function(A,z){var Z=z[0],le=A.id(),Te=Z.value;return typeof le==typeof Te&&le<Te}],"filter->":[Gt,[zt,Wt],function(A,z){var Z=z[0],le=z[1],Te=A.properties()[Z.value],Ce=le.value;return typeof Te==typeof Ce&&Te>Ce}],"filter-id->":[Gt,[Wt],function(A,z){var Z=z[0],le=A.id(),Te=Z.value;return typeof le==typeof Te&&le>Te}],"filter-<=":[Gt,[zt,Wt],function(A,z){var Z=z[0],le=z[1],Te=A.properties()[Z.value],Ce=le.value;return typeof Te==typeof Ce&&Te<=Ce}],"filter-id-<=":[Gt,[Wt],function(A,z){var Z=z[0],le=A.id(),Te=Z.value;return typeof le==typeof Te&&le<=Te}],"filter->=":[Gt,[zt,Wt],function(A,z){var Z=z[0],le=z[1],Te=A.properties()[Z.value],Ce=le.value;return typeof Te==typeof Ce&&Te>=Ce}],"filter-id->=":[Gt,[Wt],function(A,z){var Z=z[0],le=A.id(),Te=Z.value;return typeof le==typeof Te&&le>=Te}],"filter-has":[Gt,[Wt],function(A,z){return z[0].value in A.properties()}],"filter-has-id":[Gt,[],function(A){return A.id()!==null&&A.id()!==void 0}],"filter-type-in":[Gt,[hn(zt)],function(A,z){return z[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Gt,[hn(Wt)],function(A,z){return z[0].value.indexOf(A.id())>=0}],"filter-in-small":[Gt,[zt,hn(Wt)],function(A,z){var Z=z[0];return z[1].value.indexOf(A.properties()[Z.value])>=0}],"filter-in-large":[Gt,[zt,hn(Wt)],function(A,z){var Z=z[0],le=z[1];return function(Te,Ce,je,Ke){for(;je<=Ke;){var st=je+Ke>>1;if(Ce[st]===Te)return!0;Ce[st]>Te?Ke=st-1:je=st+1}return!1}(A.properties()[Z.value],le.value,0,le.value.length-1)}],all:{type:Gt,overloads:[[[Gt,Gt],function(A,z){var Z=z[0],le=z[1];return Z.evaluate(A)&&le.evaluate(A)}],[Ba(Gt),function(A,z){for(var Z=0,le=z;Z<le.length;Z+=1)if(!le[Z].evaluate(A))return!1;return!0}]]},any:{type:Gt,overloads:[[[Gt,Gt],function(A,z){var Z=z[0],le=z[1];return Z.evaluate(A)||le.evaluate(A)}],[Ba(Gt),function(A,z){for(var Z=0,le=z;Z<le.length;Z+=1)if(le[Z].evaluate(A))return!0;return!1}]]},"!":[Gt,[Gt],function(A,z){return!z[0].evaluate(A)}],"is-supported-script":[Gt,[zt],function(A,z){var Z=z[0],le=A.globals&&A.globals.isSupportedScript;return!le||le(Z.evaluate(A))}],upcase:[zt,[zt],function(A,z){return z[0].evaluate(A).toUpperCase()}],downcase:[zt,[zt],function(A,z){return z[0].evaluate(A).toLowerCase()}],concat:[zt,Ba(Wt),function(A,z){return z.map(function(Z){return lr(Z.evaluate(A))}).join("")}],"resolved-locale":[zt,[Rt],function(A,z){return z[0].evaluate(A).resolvedLocale()}]});var Oo=function(A,z){this.expression=A,this._warningHistory={},this._evaluator=new Zt,this._defaultValue=z?function(Z){return Z.type==="color"&&os(Z.default)?new Sn(0,0,0,0):Z.type==="color"?Sn.parse(Z.default)||null:Z.default===void 0?null:Z.default}(z):null,this._enumValues=z&&z.type==="enum"?z.values:null};function Ko(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in as}function vo(A,z){var Z=new hr(as,[],z?function(Te){var Ce={color:rn,string:zt,number:Ct,enum:zt,boolean:Gt,formatted:Ln,resolvedImage:bn};return Te.type==="array"?hn(Ce[Te.value]||Wt,Te.length):Ce[Te.type]}(z):void 0),le=Z.parse(A,void 0,void 0,void 0,z&&z.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?Js(new Oo(le,z)):Lo(Z.errors)}Oo.prototype.evaluateWithoutErrorHandling=function(A,z,Z,le,Te,Ce){return this._evaluator.globals=A,this._evaluator.feature=z,this._evaluator.featureState=Z,this._evaluator.canonical=le,this._evaluator.availableImages=Te||null,this._evaluator.formattedSection=Ce,this.expression.evaluate(this._evaluator)},Oo.prototype.evaluate=function(A,z,Z,le,Te,Ce){this._evaluator.globals=A,this._evaluator.feature=z||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=le,this._evaluator.availableImages=Te||null,this._evaluator.formattedSection=Ce||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new Qt("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ke){return JSON.stringify(Ke)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Ke){return this._warningHistory[Ke.message]||(this._warningHistory[Ke.message]=!0,typeof console<"u"&&console.warn(Ke.message)),this._defaultValue}};var Na=function(A,z){this.kind=A,this._styleExpression=z,this.isStateDependent=A!=="constant"&&!Zn(z.expression)};Na.prototype.evaluateWithoutErrorHandling=function(A,z,Z,le,Te,Ce){return this._styleExpression.evaluateWithoutErrorHandling(A,z,Z,le,Te,Ce)},Na.prototype.evaluate=function(A,z,Z,le,Te,Ce){return this._styleExpression.evaluate(A,z,Z,le,Te,Ce)};var ls=function(A,z,Z,le){this.kind=A,this.zoomStops=Z,this._styleExpression=z,this.isStateDependent=A!=="camera"&&!Zn(z.expression),this.interpolationType=le};function cl(A,z){if((A=vo(A,z)).result==="error")return A;var Z=A.value.expression,le=Qn(Z);if(!le&&!po(z))return Lo([new mt("","data expressions not supported")]);var Te=ur(Z,["zoom"]);if(!Te&&!go(z))return Lo([new mt("","zoom expressions not supported")]);var Ce=Us(Z);if(!Ce&&!Te)return Lo([new mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ce instanceof mt)return Lo([Ce]);if(Ce instanceof Ri&&!Co(z))return Lo([new mt("",'"interpolate" expressions cannot be used with this property')]);if(!Ce)return Js(new Na(le?"constant":"source",A.value));var je=Ce instanceof Ri?Ce.interpolation:void 0;return Js(new ls(le?"camera":"composite",A.value,Ce.labels,je))}ls.prototype.evaluateWithoutErrorHandling=function(A,z,Z,le,Te,Ce){return this._styleExpression.evaluateWithoutErrorHandling(A,z,Z,le,Te,Ce)},ls.prototype.evaluate=function(A,z,Z,le,Te,Ce){return this._styleExpression.evaluate(A,z,Z,le,Te,Ce)},ls.prototype.interpolationFactor=function(A,z,Z){return this.interpolationType?Ri.interpolationFactor(this.interpolationType,A,z,Z):0};var ws=function(A,z){this._parameters=A,this._specification=z,gt(this,Ns(this._parameters,this._specification))};function Us(A){var z=null;if(A instanceof Fa)z=Us(A.result);else if(A instanceof $a)for(var Z=0,le=A.args;Z<le.length;Z+=1){var Te=le[Z];if(z=Us(Te))break}else(A instanceof xr||A instanceof Ri)&&A.input instanceof dn&&A.input.name==="zoom"&&(z=A);return z instanceof mt||A.eachChild(function(Ce){var je=Us(Ce);je instanceof mt?z=je:!z&&je?z=new mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):z&&je&&z!==je&&(z=new mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),z}function _a(A){var z=A.key,Z=A.value,le=A.valueSpec||{},Te=A.objectElementValidators||{},Ce=A.style,je=A.styleSpec,Ke=[],st=Ur(Z);if(st!=="object")return[new ct(z,Z,"object expected, "+st+" found")];for(var yt in Z){var _t=yt.split(".")[0],It=le[_t]||le["*"],jt=void 0;if(Te[_t])jt=Te[_t];else if(le[_t])jt=Ca;else if(Te["*"])jt=Te["*"];else{if(!le["*"]){Ke.push(new ct(z,Z[yt],'unknown property "'+yt+'"'));continue}jt=Ca}Ke=Ke.concat(jt({key:(z&&z+".")+yt,value:Z[yt],valueSpec:It,style:Ce,styleSpec:je,object:Z,objectKey:yt},Z))}for(var Ft in le)Te[Ft]||le[Ft].required&&le[Ft].default===void 0&&Z[Ft]===void 0&&Ke.push(new ct(z,Z,'missing required property "'+Ft+'"'));return Ke}function Vs(A){var z=A.value,Z=A.valueSpec,le=A.style,Te=A.styleSpec,Ce=A.key,je=A.arrayElementValidator||Ca;if(Ur(z)!=="array")return[new ct(Ce,z,"array expected, "+Ur(z)+" found")];if(Z.length&&z.length!==Z.length)return[new ct(Ce,z,"array length "+Z.length+" expected, length "+z.length+" found")];if(Z["min-length"]&&z.length<Z["min-length"])return[new ct(Ce,z,"array length at least "+Z["min-length"]+" expected, length "+z.length+" found")];var Ke={type:Z.value,values:Z.values};Te.$version<7&&(Ke.function=Z.function),Ur(Z.value)==="object"&&(Ke=Z.value);for(var st=[],yt=0;yt<z.length;yt++)st=st.concat(je({array:z,arrayIndex:yt,value:z[yt],valueSpec:Ke,style:le,styleSpec:Te,key:Ce+"["+yt+"]"}));return st}function fl(A){var z=A.key,Z=A.value,le=A.valueSpec,Te=Ur(Z);return Te==="number"&&Z!=Z&&(Te="NaN"),Te!=="number"?[new ct(z,Z,"number expected, "+Te+" found")]:"minimum"in le&&Z<le.minimum?[new ct(z,Z,Z+" is less than the minimum value "+le.minimum)]:"maximum"in le&&Z>le.maximum?[new ct(z,Z,Z+" is greater than the maximum value "+le.maximum)]:[]}function us(A){var z,Z,le,Te=A.valueSpec,Ce=ut(A.value.type),je={},Ke=Ce!=="categorical"&&A.value.property===void 0,st=!Ke,yt=Ur(A.value.stops)==="array"&&Ur(A.value.stops[0])==="array"&&Ur(A.value.stops[0][0])==="object",_t=_a({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Ft){if(Ce==="identity")return[new ct(Ft.key,Ft.value,'identity function may not have a "stops" property')];var nn=[],an=Ft.value;return nn=nn.concat(Vs({key:Ft.key,value:an,valueSpec:Ft.valueSpec,style:Ft.style,styleSpec:Ft.styleSpec,arrayElementValidator:It})),Ur(an)==="array"&&an.length===0&&nn.push(new ct(Ft.key,an,"array must have at least one stop")),nn},default:function(Ft){return Ca({key:Ft.key,value:Ft.value,valueSpec:Te,style:Ft.style,styleSpec:Ft.styleSpec})}}});return Ce==="identity"&&Ke&&_t.push(new ct(A.key,A.value,'missing required property "property"')),Ce==="identity"||A.value.stops||_t.push(new ct(A.key,A.value,'missing required property "stops"')),Ce==="exponential"&&A.valueSpec.expression&&!Co(A.valueSpec)&&_t.push(new ct(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(st&&!po(A.valueSpec)?_t.push(new ct(A.key,A.value,"property functions not supported")):Ke&&!go(A.valueSpec)&&_t.push(new ct(A.key,A.value,"zoom functions not supported"))),Ce!=="categorical"&&!yt||A.value.property!==void 0||_t.push(new ct(A.key,A.value,'"property" property is required')),_t;function It(Ft){var nn=[],an=Ft.value,_n=Ft.key;if(Ur(an)!=="array")return[new ct(_n,an,"array expected, "+Ur(an)+" found")];if(an.length!==2)return[new ct(_n,an,"array length 2 expected, length "+an.length+" found")];if(yt){if(Ur(an[0])!=="object")return[new ct(_n,an,"object expected, "+Ur(an[0])+" found")];if(an[0].zoom===void 0)return[new ct(_n,an,"object stop key must have zoom")];if(an[0].value===void 0)return[new ct(_n,an,"object stop key must have value")];if(le&&le>ut(an[0].zoom))return[new ct(_n,an[0].zoom,"stop zoom values must appear in ascending order")];ut(an[0].zoom)!==le&&(le=ut(an[0].zoom),Z=void 0,je={}),nn=nn.concat(_a({key:_n+"[0]",value:an[0],valueSpec:{zoom:{}},style:Ft.style,styleSpec:Ft.styleSpec,objectElementValidators:{zoom:fl,value:jt}}))}else nn=nn.concat(jt({key:_n+"[0]",value:an[0],valueSpec:{},style:Ft.style,styleSpec:Ft.styleSpec},an));return Ko(kt(an[1]))?nn.concat([new ct(_n+"[1]",an[1],"expressions are not allowed in function stops.")]):nn.concat(Ca({key:_n+"[1]",value:an[1],valueSpec:Te,style:Ft.style,styleSpec:Ft.styleSpec}))}function jt(Ft,nn){var an=Ur(Ft.value),_n=ut(Ft.value),yn=Ft.value!==null?Ft.value:nn;if(z){if(an!==z)return[new ct(Ft.key,yn,an+" stop domain type must match previous stop domain type "+z)]}else z=an;if(an!=="number"&&an!=="string"&&an!=="boolean")return[new ct(Ft.key,yn,"stop domain value must be a number, string, or boolean")];if(an!=="number"&&Ce!=="categorical"){var In="number expected, "+an+" found";return po(Te)&&Ce===void 0&&(In+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ct(Ft.key,yn,In)]}return Ce!=="categorical"||an!=="number"||isFinite(_n)&&Math.floor(_n)===_n?Ce!=="categorical"&&an==="number"&&Z!==void 0&&_n<Z?[new ct(Ft.key,yn,"stop domain values must appear in ascending order")]:(Z=_n,Ce==="categorical"&&_n in je?[new ct(Ft.key,yn,"stop domain values must be unique")]:(je[_n]=!0,[])):[new ct(Ft.key,yn,"integer expected, found "+_n)]}}function Jo(A){var z=(A.expressionContext==="property"?cl:vo)(kt(A.value),A.valueSpec);if(z.result==="error")return z.value.map(function(le){return new ct(""+A.key+le.key,A.value,le.message)});var Z=z.value.expression||z.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!Z.outputDefined())return[new ct(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!Zn(Z))return[new ct(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!Zn(Z))return[new ct(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!ur(Z,["zoom","feature-state"]))return[new ct(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!Qn(Z))return[new ct(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cs(A){var z=A.key,Z=A.value,le=A.valueSpec,Te=[];return Array.isArray(le.values)?le.values.indexOf(ut(Z))===-1&&Te.push(new ct(z,Z,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(le.values).indexOf(ut(Z))===-1&&Te.push(new ct(z,Z,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(Z)+" found")),Te}function $o(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var z=0,Z=A.slice(1);z<Z.length;z+=1){var le=Z[z];if(!$o(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}ws.deserialize=function(A){return new ws(A._parameters,A._specification)},ws.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var Qo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ts(A){if(A==null)return{filter:function(){return!0},needGeometry:!1};$o(A)||(A=Po(A));var z=vo(A,Qo);if(z.result==="error")throw new Error(z.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,le,Te){return z.value.evaluate(Z,le,{},Te)},needGeometry:$r(A)}}function qs(A,z){return A<z?-1:A>z?1:0}function $r(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var z=1;z<A.length;z++)if($r(A[z]))return!0;return!1}function Po(A){if(!A)return!0;var z,Z=A[0];return A.length<=1?Z!=="any":Z==="=="?Ki(A[1],A[2],"=="):Z==="!="?Jr(Ki(A[1],A[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?Ki(A[1],A[2],Z):Z==="any"?(z=A.slice(1),["any"].concat(z.map(Po))):Z==="all"?["all"].concat(A.slice(1).map(Po)):Z==="none"?["all"].concat(A.slice(1).map(Po).map(Jr)):Z==="in"?ja(A[1],A.slice(2)):Z==="!in"?Jr(ja(A[1],A.slice(2))):Z==="has"?Wr(A[1]):Z==="!has"?Jr(Wr(A[1])):Z!=="within"||A}function Ki(A,z,Z){switch(A){case"$type":return["filter-type-"+Z,z];case"$id":return["filter-id-"+Z,z];default:return["filter-"+Z,A,z]}}function ja(A,z){if(z.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(Z){return typeof Z!=typeof z[0]})?["filter-in-large",A,["literal",z.sort(qs)]]:["filter-in-small",A,["literal",z]]}}function Wr(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Jr(A){return["!",A]}function wa(A){return $o(kt(A.value))?Jo(gt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):fs(A)}function fs(A){var z=A.value,Z=A.key;if(Ur(z)!=="array")return[new ct(Z,z,"array expected, "+Ur(z)+" found")];var le,Te=A.styleSpec,Ce=[];if(z.length<1)return[new ct(Z,z,"filter array must have at least 1 element")];switch(Ce=Ce.concat(cs({key:Z+"[0]",value:z[0],valueSpec:Te.filter_operator,style:A.style,styleSpec:A.styleSpec})),ut(z[0])){case"<":case"<=":case">":case">=":z.length>=2&&ut(z[1])==="$type"&&Ce.push(new ct(Z,z,'"$type" cannot be use with operator "'+z[0]+'"'));case"==":case"!=":z.length!==3&&Ce.push(new ct(Z,z,'filter array for operator "'+z[0]+'" must have 3 elements'));case"in":case"!in":z.length>=2&&(le=Ur(z[1]))!=="string"&&Ce.push(new ct(Z+"[1]",z[1],"string expected, "+le+" found"));for(var je=2;je<z.length;je++)le=Ur(z[je]),ut(z[1])==="$type"?Ce=Ce.concat(cs({key:Z+"["+je+"]",value:z[je],valueSpec:Te.geometry_type,style:A.style,styleSpec:A.styleSpec})):le!=="string"&&le!=="number"&&le!=="boolean"&&Ce.push(new ct(Z+"["+je+"]",z[je],"string, number, or boolean expected, "+le+" found"));break;case"any":case"all":case"none":for(var Ke=1;Ke<z.length;Ke++)Ce=Ce.concat(fs({key:Z+"["+Ke+"]",value:z[Ke],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":le=Ur(z[1]),z.length!==2?Ce.push(new ct(Z,z,'filter array for "'+z[0]+'" operator must have 2 elements')):le!=="string"&&Ce.push(new ct(Z+"[1]",z[1],"string expected, "+le+" found"));break;case"within":le=Ur(z[1]),z.length!==2?Ce.push(new ct(Z,z,'filter array for "'+z[0]+'" operator must have 2 elements')):le!=="object"&&Ce.push(new ct(Z+"[1]",z[1],"object expected, "+le+" found"))}return Ce}function ks(A,z){var Z=A.key,le=A.style,Te=A.styleSpec,Ce=A.value,je=A.objectKey,Ke=Te[z+"_"+A.layerType];if(!Ke)return[];var st=je.match(/^(.*)-transition$/);if(z==="paint"&&st&&Ke[st[1]]&&Ke[st[1]].transition)return Ca({key:Z,value:Ce,valueSpec:Te.transition,style:le,styleSpec:Te});var yt,_t=A.valueSpec||Ke[je];if(!_t)return[new ct(Z,Ce,'unknown property "'+je+'"')];if(Ur(Ce)==="string"&&po(_t)&&!_t.tokens&&(yt=/^{([^}]+)}$/.exec(Ce)))return[new ct(Z,Ce,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var It=[];return A.layerType==="symbol"&&(je==="text-field"&&le&&!le.glyphs&&It.push(new ct(Z,Ce,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&os(kt(Ce))&&ut(Ce.type)==="identity"&&It.push(new ct(Z,Ce,'"text-font" does not support identity functions'))),It.concat(Ca({key:A.key,value:Ce,valueSpec:_t,style:le,styleSpec:Te,expressionContext:"property",propertyType:z,propertyKey:je}))}function Hs(A){return ks(A,"paint")}function As(A){return ks(A,"layout")}function Ms(A){var z=[],Z=A.value,le=A.key,Te=A.style,Ce=A.styleSpec;Z.type||Z.ref||z.push(new ct(le,Z,'either "type" or "ref" is required'));var je,Ke=ut(Z.type),st=ut(Z.ref);if(Z.id)for(var yt=ut(Z.id),_t=0;_t<A.arrayIndex;_t++){var It=Te.layers[_t];ut(It.id)===yt&&z.push(new ct(le,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+It.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(nn){nn in Z&&z.push(new ct(le,Z[nn],'"'+nn+'" is prohibited for ref layers'))}),Te.layers.forEach(function(nn){ut(nn.id)===st&&(je=nn)}),je?je.ref?z.push(new ct(le,Z.ref,"ref cannot reference another ref layer")):Ke=ut(je.type):z.push(new ct(le,Z.ref,'ref layer "'+st+'" not found'));else if(Ke!=="background")if(Z.source){var jt=Te.sources&&Te.sources[Z.source],Ft=jt&&ut(jt.type);jt?Ft==="vector"&&Ke==="raster"?z.push(new ct(le,Z.source,'layer "'+Z.id+'" requires a raster source')):Ft==="raster"&&Ke!=="raster"?z.push(new ct(le,Z.source,'layer "'+Z.id+'" requires a vector source')):Ft!=="vector"||Z["source-layer"]?Ft==="raster-dem"&&Ke!=="hillshade"?z.push(new ct(le,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ke!=="line"||!Z.paint||!Z.paint["line-gradient"]||Ft==="geojson"&&jt.lineMetrics||z.push(new ct(le,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new ct(le,Z,'layer "'+Z.id+'" must specify a "source-layer"')):z.push(new ct(le,Z.source,'source "'+Z.source+'" not found'))}else z.push(new ct(le,Z,'missing required property "source"'));return z=z.concat(_a({key:le,value:Z,valueSpec:Ce.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ca({key:le+".type",value:Z.type,valueSpec:Ce.layer.type,style:A.style,styleSpec:A.styleSpec,object:Z,objectKey:"type"})},filter:wa,layout:function(nn){return _a({layer:Z,key:nn.key,value:nn.value,style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{"*":function(an){return As(gt({layerType:Ke},an))}}})},paint:function(nn){return _a({layer:Z,key:nn.key,value:nn.value,style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{"*":function(an){return Hs(gt({layerType:Ke},an))}}})}}})),z}function La(A){var z=A.value,Z=A.key,le=Ur(z);return le!=="string"?[new ct(Z,z,"string expected, "+le+" found")]:[]}var Io={promoteId:function(A){var z=A.key,Z=A.value;if(Ur(Z)==="string")return La({key:z,value:Z});var le=[];for(var Te in Z)le.push.apply(le,La({key:z+"."+Te,value:Z[Te]}));return le}};function zo(A){var z=A.value,Z=A.key,le=A.styleSpec,Te=A.style;if(!z.type)return[new ct(Z,z,'"type" is required')];var Ce,je=ut(z.type);switch(je){case"vector":case"raster":case"raster-dem":return _a({key:Z,value:z,valueSpec:le["source_"+je.replace("-","_")],style:A.style,styleSpec:le,objectElementValidators:Io});case"geojson":if(Ce=_a({key:Z,value:z,valueSpec:le.source_geojson,style:Te,styleSpec:le,objectElementValidators:Io}),z.cluster)for(var Ke in z.clusterProperties){var st=z.clusterProperties[Ke],yt=st[0],_t=st[1],It=typeof yt=="string"?[yt,["accumulated"],["get",Ke]]:yt;Ce.push.apply(Ce,Jo({key:Z+"."+Ke+".map",value:_t,expressionContext:"cluster-map"})),Ce.push.apply(Ce,Jo({key:Z+"."+Ke+".reduce",value:It,expressionContext:"cluster-reduce"}))}return Ce;case"video":return _a({key:Z,value:z,valueSpec:le.source_video,style:Te,styleSpec:le});case"image":return _a({key:Z,value:z,valueSpec:le.source_image,style:Te,styleSpec:le});case"canvas":return[new ct(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return cs({key:Z+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Te,styleSpec:le})}}function na(A){var z=A.value,Z=A.styleSpec,le=Z.light,Te=A.style,Ce=[],je=Ur(z);if(z===void 0)return Ce;if(je!=="object")return Ce.concat([new ct("light",z,"object expected, "+je+" found")]);for(var Ke in z){var st=Ke.match(/^(.*)-transition$/);Ce=st&&le[st[1]]&&le[st[1]].transition?Ce.concat(Ca({key:Ke,value:z[Ke],valueSpec:Z.transition,style:Te,styleSpec:Z})):le[Ke]?Ce.concat(Ca({key:Ke,value:z[Ke],valueSpec:le[Ke],style:Te,styleSpec:Z})):Ce.concat([new ct(Ke,z[Ke],'unknown property "'+Ke+'"')])}return Ce}var Ss={"*":function(){return[]},array:Vs,boolean:function(A){var z=A.value,Z=A.key,le=Ur(z);return le!=="boolean"?[new ct(Z,z,"boolean expected, "+le+" found")]:[]},number:fl,color:function(A){var z=A.key,Z=A.value,le=Ur(Z);return le!=="string"?[new ct(z,Z,"color expected, "+le+" found")]:Mn(Z)===null?[new ct(z,Z,'color expected, "'+Z+'" found')]:[]},constants:pt,enum:cs,filter:wa,function:us,layer:Ms,object:_a,source:zo,light:na,string:La,formatted:function(A){return La(A).length===0?[]:Jo(A)},resolvedImage:function(A){return La(A).length===0?[]:Jo(A)}};function Ca(A){var z=A.value,Z=A.valueSpec,le=A.styleSpec;return Z.expression&&os(ut(z))?us(A):Z.expression&&Ko(kt(z))?Jo(A):Z.type&&Ss[Z.type]?Ss[Z.type](A):_a(gt({},A,{valueSpec:Z.type?le[Z.type]:Z}))}function Fi(A){var z=A.value,Z=A.key,le=La(A);return le.length||(z.indexOf("{fontstack}")===-1&&le.push(new ct(Z,z,'"glyphs" url must include a "{fontstack}" token')),z.indexOf("{range}")===-1&&le.push(new ct(Z,z,'"glyphs" url must include a "{range}" token'))),le}function qi(A,z){z===void 0&&(z=Ge);var Z=[];return Z=Z.concat(Ca({key:"",value:A,valueSpec:z.$root,styleSpec:z,style:A,objectElementValidators:{glyphs:Fi,"*":function(){return[]}}})),A.constants&&(Z=Z.concat(pt({key:"constants",value:A.constants,style:A,styleSpec:z}))),ai(Z)}function ai(A){return[].concat(A).sort(function(z,Z){return z.line-Z.line})}function Hi(A){return function(){for(var z=[],Z=arguments.length;Z--;)z[Z]=arguments[Z];return ai(A.apply(this,z))}}qi.source=Hi(zo),qi.light=Hi(na),qi.layer=Hi(Ms),qi.filter=Hi(wa),qi.paintProperty=Hi(Hs),qi.layoutProperty=Hi(As);var no=qi,es=no.light,Ua=no.paintProperty,Do=no.layoutProperty;function la(A,z){var Z=!1;if(z&&z.length)for(var le=0,Te=z;le<Te.length;le+=1){var Ce=Te[le];A.fire(new Fe(new Error(Ce.message))),Z=!0}return Z}var ts=Oa,mo=3;function Oa(A,z,Z){var le=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var Te=new Int32Array(this.arrayBuffer);A=Te[0],z=Te[1],Z=Te[2],this.d=z+2*Z;for(var Ce=0;Ce<this.d*this.d;Ce++){var je=Te[mo+Ce],Ke=Te[mo+Ce+1];le.push(je===Ke?null:Te.subarray(je,Ke))}var st=Te[mo+le.length],yt=Te[mo+le.length+1];this.keys=Te.subarray(st,yt),this.bboxes=Te.subarray(yt),this.insert=this._insertReadonly}else{this.d=z+2*Z;for(var _t=0;_t<this.d*this.d;_t++)le.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=A,this.padding=Z,this.scale=z/A,this.uid=0;var It=Z/z*A;this.min=-It,this.max=A+It}Oa.prototype.insert=function(A,z,Z,le,Te){this._forEachCell(z,Z,le,Te,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(z),this.bboxes.push(Z),this.bboxes.push(le),this.bboxes.push(Te)},Oa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Oa.prototype._insertCell=function(A,z,Z,le,Te,Ce){this.cells[Te].push(Ce)},Oa.prototype.query=function(A,z,Z,le,Te){var Ce=this.min,je=this.max;if(A<=Ce&&z<=Ce&&je<=Z&&je<=le&&!Te)return Array.prototype.slice.call(this.keys);var Ke=[];return this._forEachCell(A,z,Z,le,this._queryCell,Ke,{},Te),Ke},Oa.prototype._queryCell=function(A,z,Z,le,Te,Ce,je,Ke){var st=this.cells[Te];if(st!==null)for(var yt=this.keys,_t=this.bboxes,It=0;It<st.length;It++){var jt=st[It];if(je[jt]===void 0){var Ft=4*jt;(Ke?Ke(_t[Ft+0],_t[Ft+1],_t[Ft+2],_t[Ft+3]):A<=_t[Ft+2]&&z<=_t[Ft+3]&&Z>=_t[Ft+0]&&le>=_t[Ft+1])?(je[jt]=!0,Ce.push(yt[jt])):je[jt]=!1}}},Oa.prototype._forEachCell=function(A,z,Z,le,Te,Ce,je,Ke){for(var st=this._convertToCellCoord(A),yt=this._convertToCellCoord(z),_t=this._convertToCellCoord(Z),It=this._convertToCellCoord(le),jt=st;jt<=_t;jt++)for(var Ft=yt;Ft<=It;Ft++){var nn=this.d*Ft+jt;if((!Ke||Ke(this._convertFromCellCoord(jt),this._convertFromCellCoord(Ft),this._convertFromCellCoord(jt+1),this._convertFromCellCoord(Ft+1)))&&Te.call(this,A,z,Z,le,nn,Ce,je,Ke))return}},Oa.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},Oa.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},Oa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,z=mo+this.cells.length+1+1,Z=0,le=0;le<this.cells.length;le++)Z+=this.cells[le].length;var Te=new Int32Array(z+Z+this.keys.length+this.bboxes.length);Te[0]=this.extent,Te[1]=this.n,Te[2]=this.padding;for(var Ce=z,je=0;je<A.length;je++){var Ke=A[je];Te[mo+je]=Ce,Te.set(Ke,Ce),Ce+=Ke.length}return Te[mo+A.length]=Ce,Te.set(this.keys,Ce),Ce+=this.keys.length,Te[mo+A.length+1]=Ce,Te.set(this.bboxes,Ce),Ce+=this.bboxes.length,Te.buffer};var Pa=r.ImageData,si=r.ImageBitmap,Va={};function wr(A,z,Z){Z===void 0&&(Z={}),Object.defineProperty(z,"_classRegistryKey",{value:A,writeable:!1}),Va[A]={klass:z,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var Es in wr("Object",Object),ts.serialize=function(A,z){var Z=A.toArrayBuffer();return z&&z.push(Z),{buffer:Z}},ts.deserialize=function(A){return new ts(A.buffer)},wr("Grid",ts),wr("Color",Sn),wr("Error",Error),wr("ResolvedImage",jn),wr("StylePropertyFunction",ws),wr("StyleExpression",Oo,{omit:["_evaluator"]}),wr("ZoomDependentExpression",ls),wr("ZoomConstantExpression",Na),wr("CompoundExpression",dn,{omit:["_evaluate"]}),as)as[Es]._classRegistryKey||wr("Expression_"+Es,as[Es]);function $s(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Ro(A){return si&&A instanceof si}function Fo(A,z){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if($s(A)||Ro(A))return z&&z.push(A),A;if(ArrayBuffer.isView(A)){var Z=A;return z&&z.push(Z.buffer),Z}if(A instanceof Pa)return z&&z.push(A.data.buffer),A;if(Array.isArray(A)){for(var le=[],Te=0,Ce=A;Te<Ce.length;Te+=1){var je=Ce[Te];le.push(Fo(je,z))}return le}if(typeof A=="object"){var Ke=A.constructor,st=Ke._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var yt=Ke.serialize?Ke.serialize(A,z):{};if(!Ke.serialize){for(var _t in A)if(A.hasOwnProperty(_t)&&!(Va[st].omit.indexOf(_t)>=0)){var It=A[_t];yt[_t]=Va[st].shallow.indexOf(_t)>=0?It:Fo(It,z)}A instanceof Error&&(yt.message=A.message)}if(yt.$name)throw new Error("$name property is reserved for worker serialization logic.");return st!=="Object"&&(yt.$name=st),yt}throw new Error("can't serialize object of type "+typeof A)}function ns(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||$s(A)||Ro(A)||ArrayBuffer.isView(A)||A instanceof Pa)return A;if(Array.isArray(A))return A.map(ns);if(typeof A=="object"){var z=A.$name||"Object",Z=Va[z].klass;if(!Z)throw new Error("can't deserialize unregistered class "+z);if(Z.deserialize)return Z.deserialize(A);for(var le=Object.create(Z.prototype),Te=0,Ce=Object.keys(A);Te<Ce.length;Te+=1){var je=Ce[Te];if(je!=="$name"){var Ke=A[je];le[je]=Va[z].shallow.indexOf(je)>=0?Ke:ns(Ke)}}return le}throw new Error("can't deserialize object of type "+typeof A)}var hs=function(){this.first=!0};hs.prototype.update=function(A,z){var Z=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=z),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=Z,!0))};var dr={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Ls(A){for(var z=0,Z=A;z<Z.length;z+=1)if(yo(Z[z].charCodeAt(0)))return!0;return!1}function yo(A){return!(A!==746&&A!==747&&(A<4352||!(dr["Bopomofo Extended"](A)||dr.Bopomofo(A)||dr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||dr["CJK Compatibility Ideographs"](A)||dr["CJK Compatibility"](A)||dr["CJK Radicals Supplement"](A)||dr["CJK Strokes"](A)||!(!dr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||dr["CJK Unified Ideographs Extension A"](A)||dr["CJK Unified Ideographs"](A)||dr["Enclosed CJK Letters and Months"](A)||dr["Hangul Compatibility Jamo"](A)||dr["Hangul Jamo Extended-A"](A)||dr["Hangul Jamo Extended-B"](A)||dr["Hangul Jamo"](A)||dr["Hangul Syllables"](A)||dr.Hiragana(A)||dr["Ideographic Description Characters"](A)||dr.Kanbun(A)||dr["Kangxi Radicals"](A)||dr["Katakana Phonetic Extensions"](A)||dr.Katakana(A)&&A!==12540||!(!dr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!dr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||dr["Unified Canadian Aboriginal Syllabics"](A)||dr["Unified Canadian Aboriginal Syllabics Extended"](A)||dr["Vertical Forms"](A)||dr["Yijing Hexagram Symbols"](A)||dr["Yi Syllables"](A)||dr["Yi Radicals"](A))))}function Bi(A){return!(yo(A)||function(z){return!!(dr["Latin-1 Supplement"](z)&&(z===167||z===169||z===174||z===177||z===188||z===189||z===190||z===215||z===247)||dr["General Punctuation"](z)&&(z===8214||z===8224||z===8225||z===8240||z===8241||z===8251||z===8252||z===8258||z===8263||z===8264||z===8265||z===8273)||dr["Letterlike Symbols"](z)||dr["Number Forms"](z)||dr["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||z===9003||z>=9085&&z<=9114||z>=9150&&z<=9165||z===9167||z>=9169&&z<=9179||z>=9186&&z<=9215)||dr["Control Pictures"](z)&&z!==9251||dr["Optical Character Recognition"](z)||dr["Enclosed Alphanumerics"](z)||dr["Geometric Shapes"](z)||dr["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||dr["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||dr["CJK Symbols and Punctuation"](z)||dr.Katakana(z)||dr["Private Use Area"](z)||dr["CJK Compatibility Forms"](z)||dr["Small Form Variants"](z)||dr["Halfwidth and Fullwidth Forms"](z)||z===8734||z===8756||z===8757||z>=9984&&z<=10087||z>=10102&&z<=10131||z===65532||z===65533)}(A))}function Bo(A){return dr.Arabic(A)||dr["Arabic Supplement"](A)||dr["Arabic Extended-A"](A)||dr["Arabic Presentation Forms-A"](A)||dr["Arabic Presentation Forms-B"](A)}function qa(A){return A>=1424&&A<=2303||dr["Arabic Presentation Forms-A"](A)||dr["Arabic Presentation Forms-B"](A)}function Ia(A,z){return!(!z&&qa(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||dr.Khmer(A))}function ra(A){for(var z=0,Z=A;z<Z.length;z+=1)if(qa(Z[z].charCodeAt(0)))return!0;return!1}var ro="deferred",za="loading",xo="loaded",Cs="error",No=null,Hr="unavailable",Gi=null,ua=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(Hr=Cs),No&&No(A)};function io(){ca.fire(new Re("pluginStateChange",{pluginStatus:Hr,pluginURL:Gi}))}var ca=new nt,ps=function(){return Hr},ds=function(){if(Hr!==ro||!Gi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hr=za,io(),Gi&&Pt({url:Gi},function(A){A?ua(A):(Hr=xo,io())})},fa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Hr===xo||fa.applyArabicShaping!=null},isLoading:function(){return Hr===za},setState:function(A){Hr=A.pluginStatus,Gi=A.pluginURL},isParsed:function(){return fa.applyArabicShaping!=null&&fa.processBidirectionalText!=null&&fa.processStyledBidirectionalText!=null},getPluginURL:function(){return Gi}},Vr=function(A,z){this.zoom=A,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hs,this.transition={})};Vr.prototype.isSupportedScript=function(A){return function(z,Z){for(var le=0,Te=z;le<Te.length;le+=1)if(!Ia(Te[le].charCodeAt(0),Z))return!1;return!0}(A,fa.isLoaded())},Vr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Vr.prototype.getCrossfadeParameters=function(){var A=this.zoom,z=A-Math.floor(A),Z=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*z}};var ao=function(A,z){this.property=A,this.value=z,this.expression=function(Z,le){if(os(Z))return new ws(Z,le);if(Ko(Z)){var Te=cl(Z,le);if(Te.result==="error")throw new Error(Te.value.map(function(je){return je.key+": "+je.message}).join(", "));return Te.value}var Ce=Z;return typeof Z=="string"&&le.type==="color"&&(Ce=Sn.parse(Z)),{kind:"constant",evaluate:function(){return Ce}}}(z===void 0?A.specification.default:z,A.specification)};ao.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ao.prototype.possiblyEvaluate=function(A,z,Z){return this.property.possiblyEvaluate(this,A,z,Z)};var rs=function(A){this.property=A,this.value=new ao(A,void 0)};rs.prototype.transitioned=function(A,z){return new gs(this.property,this.value,z,c({},A.transition,this.transition),A.now)},rs.prototype.untransitioned=function(){return new gs(this.property,this.value,null,{},0)};var Ha=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};Ha.prototype.getValue=function(A){return S(this._values[A].value.value)},Ha.prototype.setValue=function(A,z){this._values.hasOwnProperty(A)||(this._values[A]=new rs(this._values[A].property)),this._values[A].value=new ao(this._values[A].property,z===null?void 0:S(z))},Ha.prototype.getTransition=function(A){return S(this._values[A].transition)},Ha.prototype.setTransition=function(A,z){this._values.hasOwnProperty(A)||(this._values[A]=new rs(this._values[A].property)),this._values[A].transition=S(z)||void 0},Ha.prototype.serialize=function(){for(var A={},z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var le=Z[z],Te=this.getValue(le);Te!==void 0&&(A[le]=Te);var Ce=this.getTransition(le);Ce!==void 0&&(A[le+"-transition"]=Ce)}return A},Ha.prototype.transitioned=function(A,z){for(var Z=new vs(this._properties),le=0,Te=Object.keys(this._values);le<Te.length;le+=1){var Ce=Te[le];Z._values[Ce]=this._values[Ce].transitioned(A,z._values[Ce])}return Z},Ha.prototype.untransitioned=function(){for(var A=new vs(this._properties),z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var le=Z[z];A._values[le]=this._values[le].untransitioned()}return A};var gs=function(A,z,Z,le,Te){this.property=A,this.value=z,this.begin=Te+le.delay||0,this.end=this.begin+le.duration||0,A.specification.transition&&(le.delay||le.duration)&&(this.prior=Z)};gs.prototype.possiblyEvaluate=function(A,z,Z){var le=A.now||0,Te=this.value.possiblyEvaluate(A,z,Z),Ce=this.prior;if(Ce){if(le>this.end)return this.prior=null,Te;if(this.value.isDataDriven())return this.prior=null,Te;if(le<this.begin)return Ce.possiblyEvaluate(A,z,Z);var je=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(Ce.possiblyEvaluate(A,z,Z),Te,function(Ke){if(Ke<=0)return 0;if(Ke>=1)return 1;var st=Ke*Ke,yt=st*Ke;return 4*(Ke<.5?yt:3*(Ke-st)+yt-.75)}(je))}return Te};var vs=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};vs.prototype.possiblyEvaluate=function(A,z,Z){for(var le=new is(this._properties),Te=0,Ce=Object.keys(this._values);Te<Ce.length;Te+=1){var je=Ce[Te];le._values[je]=this._values[je].possiblyEvaluate(A,z,Z)}return le},vs.prototype.hasTransition=function(){for(var A=0,z=Object.keys(this._values);A<z.length;A+=1){var Z=z[A];if(this._values[Z].prior)return!0}return!1};var Ga=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Ga.prototype.getValue=function(A){return S(this._values[A].value)},Ga.prototype.setValue=function(A,z){this._values[A]=new ao(this._values[A].property,z===null?void 0:S(z))},Ga.prototype.serialize=function(){for(var A={},z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var le=Z[z],Te=this.getValue(le);Te!==void 0&&(A[le]=Te)}return A},Ga.prototype.possiblyEvaluate=function(A,z,Z){for(var le=new is(this._properties),Te=0,Ce=Object.keys(this._values);Te<Ce.length;Te+=1){var je=Ce[Te];le._values[je]=this._values[je].possiblyEvaluate(A,z,Z)}return le};var li=function(A,z,Z){this.property=A,this.value=z,this.parameters=Z};li.prototype.isConstant=function(){return this.value.kind==="constant"},li.prototype.constantOr=function(A){return this.value.kind==="constant"?this.value.value:A},li.prototype.evaluate=function(A,z,Z,le){return this.property.evaluate(this.value,this.parameters,A,z,Z,le)};var is=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};is.prototype.get=function(A){return this._values[A]};var kr=function(A){this.specification=A};kr.prototype.possiblyEvaluate=function(A,z){return A.expression.evaluate(z)},kr.prototype.interpolate=function(A,z,Z){var le=ii[this.specification.type];return le?le(A,z,Z):A};var Cr=function(A,z){this.specification=A,this.overrides=z};Cr.prototype.possiblyEvaluate=function(A,z,Z,le){return A.expression.kind==="constant"||A.expression.kind==="camera"?new li(this,{kind:"constant",value:A.expression.evaluate(z,null,{},Z,le)},z):new li(this,A.expression,z)},Cr.prototype.interpolate=function(A,z,Z){if(A.value.kind!=="constant"||z.value.kind!=="constant")return A;if(A.value.value===void 0||z.value.value===void 0)return new li(this,{kind:"constant",value:void 0},A.parameters);var le=ii[this.specification.type];return le?new li(this,{kind:"constant",value:le(A.value.value,z.value.value,Z)},A.parameters):A},Cr.prototype.evaluate=function(A,z,Z,le,Te,Ce){return A.kind==="constant"?A.value:A.evaluate(z,Z,le,Te,Ce)};var Ta=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(Z,le,Te,Ce){if(Z.value===void 0)return new li(this,{kind:"constant",value:void 0},le);if(Z.expression.kind==="constant"){var je=Z.expression.evaluate(le,null,{},Te,Ce),Ke=Z.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,st=this._calculate(Ke,Ke,Ke,le);return new li(this,{kind:"constant",value:st},le)}if(Z.expression.kind==="camera"){var yt=this._calculate(Z.expression.evaluate({zoom:le.zoom-1}),Z.expression.evaluate({zoom:le.zoom}),Z.expression.evaluate({zoom:le.zoom+1}),le);return new li(this,{kind:"constant",value:yt},le)}return new li(this,Z.expression,le)},z.prototype.evaluate=function(Z,le,Te,Ce,je,Ke){if(Z.kind==="source"){var st=Z.evaluate(le,Te,Ce,je,Ke);return this._calculate(st,st,st,le)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(le.zoom)-1},Te,Ce),Z.evaluate({zoom:Math.floor(le.zoom)},Te,Ce),Z.evaluate({zoom:Math.floor(le.zoom)+1},Te,Ce),le):Z.value},z.prototype._calculate=function(Z,le,Te,Ce){return Ce.zoom>Ce.zoomHistory.lastIntegerZoom?{from:Z,to:le}:{from:Te,to:le}},z.prototype.interpolate=function(Z){return Z},z}(Cr),oo=function(A){this.specification=A};oo.prototype.possiblyEvaluate=function(A,z,Z,le){if(A.value!==void 0){if(A.expression.kind==="constant"){var Te=A.expression.evaluate(z,null,{},Z,le);return this._calculate(Te,Te,Te,z)}return this._calculate(A.expression.evaluate(new Vr(Math.floor(z.zoom-1),z)),A.expression.evaluate(new Vr(Math.floor(z.zoom),z)),A.expression.evaluate(new Vr(Math.floor(z.zoom+1),z)),z)}},oo.prototype._calculate=function(A,z,Z,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:A,to:z}:{from:Z,to:z}},oo.prototype.interpolate=function(A){return A};var bo=function(A){this.specification=A};bo.prototype.possiblyEvaluate=function(A,z,Z,le){return!!A.expression.evaluate(z,null,{},Z,le)},bo.prototype.interpolate=function(){return!1};var Li=function(A){for(var z in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var Z=A[z];Z.specification.overridable&&this.overridableProperties.push(z);var le=this.defaultPropertyValues[z]=new ao(Z,void 0),Te=this.defaultTransitionablePropertyValues[z]=new rs(Z);this.defaultTransitioningPropertyValues[z]=Te.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=le.possiblyEvaluate({})}};wr("DataDrivenProperty",Cr),wr("DataConstantProperty",kr),wr("CrossFadedDataDrivenProperty",Ta),wr("CrossFadedProperty",oo),wr("ColorRampProperty",bo);var so="-transition",Qr=function(A){function z(Z,le){if(A.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=Z.metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),le.layout&&(this._unevaluatedLayout=new Ga(le.layout)),le.paint)){for(var Te in this._transitionablePaint=new Ha(le.paint),Z.paint)this.setPaintProperty(Te,Z.paint[Te],{validate:!1});for(var Ce in Z.layout)this.setLayoutProperty(Ce,Z.layout[Ce],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new is(le.paint)}}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},z.prototype.setLayoutProperty=function(Z,le,Te){if(Te===void 0&&(Te={}),le!=null){var Ce="layers."+this.id+".layout."+Z;if(this._validate(Do,Ce,Z,le,Te))return}Z!=="visibility"?this._unevaluatedLayout.setValue(Z,le):this.visibility=le},z.prototype.getPaintProperty=function(Z){return m(Z,so)?this._transitionablePaint.getTransition(Z.slice(0,-11)):this._transitionablePaint.getValue(Z)},z.prototype.setPaintProperty=function(Z,le,Te){if(Te===void 0&&(Te={}),le!=null){var Ce="layers."+this.id+".paint."+Z;if(this._validate(Ua,Ce,Z,le,Te))return!1}if(m(Z,so))return this._transitionablePaint.setTransition(Z.slice(0,-11),le||void 0),!1;var je=this._transitionablePaint._values[Z],Ke=je.property.specification["property-type"]==="cross-faded-data-driven",st=je.value.isDataDriven(),yt=je.value;this._transitionablePaint.setValue(Z,le),this._handleSpecialPaintPropertyUpdate(Z);var _t=this._transitionablePaint._values[Z].value;return _t.isDataDriven()||st||Ke||this._handleOverridablePaintPropertyUpdate(Z,yt,_t)},z.prototype._handleSpecialPaintPropertyUpdate=function(Z){},z.prototype._handleOverridablePaintPropertyUpdate=function(Z,le,Te){return!1},z.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},z.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(Z,le){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,le)},z.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),f(Z,function(le,Te){return!(le===void 0||Te==="layout"&&!Object.keys(le).length||Te==="paint"&&!Object.keys(le).length)})},z.prototype._validate=function(Z,le,Te,Ce,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&la(this,Z.call(no,{key:le,layerType:this.type,objectKey:Te,value:Ce,styleSpec:Ge,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var Z in this.paint._values){var le=this.paint.get(Z);if(le instanceof li&&po(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},z}(nt),hl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ka=function(A,z){this._structArray=A,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ni=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function di(A,z){z===void 0&&(z=1);var Z=0,le=0;return{members:A.map(function(Te){var Ce,je=(Ce=Te.type,hl[Ce].BYTES_PER_ELEMENT),Ke=Z=va(Z,Math.max(z,je)),st=Te.components||1;return le=Math.max(le,je),Z+=je*st,{name:Te.name,type:Te.type,components:st,offset:Ke}}),size:va(Z,Math.max(le,z)),alignment:z}}function va(A,z){return Math.ceil(A/z)*z}ni.serialize=function(A,z){return A._trim(),z&&(A.isTransferred=!0,z.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},ni.deserialize=function(A){var z=Object.create(this.prototype);return z.arrayBuffer=A.arrayBuffer,z.length=A.length,z.capacity=A.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},ni.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ni.prototype.clear=function(){this.length=0},ni.prototype.resize=function(A){this.reserve(A),this.length=A},ni.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},ni.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var jo=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},z.prototype.emplace=function(Z,le,Te){var Ce=2*Z;return this.int16[Ce+0]=le,this.int16[Ce+1]=Te,Z},z}(ni);jo.prototype.bytesPerElement=4,wr("StructArrayLayout2i4",jo);var Qs=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Ce)},z.prototype.emplace=function(Z,le,Te,Ce,je){var Ke=4*Z;return this.int16[Ke+0]=le,this.int16[Ke+1]=Te,this.int16[Ke+2]=Ce,this.int16[Ke+3]=je,Z},z}(ni);Qs.prototype.bytesPerElement=8,wr("StructArrayLayout4i8",Qs);var Xe=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Te,Ce,je,Ke)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke,st){var yt=6*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Te,this.int16[yt+2]=Ce,this.int16[yt+3]=je,this.int16[yt+4]=Ke,this.int16[yt+5]=st,Z},z}(ni);Xe.prototype.bytesPerElement=12,wr("StructArrayLayout2i4i12",Xe);var $e=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Te,Ce,je,Ke)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke,st){var yt=4*Z,_t=8*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Te,this.uint8[_t+4]=Ce,this.uint8[_t+5]=je,this.uint8[_t+6]=Ke,this.uint8[_t+7]=st,Z},z}(ni);$e.prototype.bytesPerElement=8,wr("StructArrayLayout2i4ub8",$e);var at=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},z.prototype.emplace=function(Z,le,Te){var Ce=2*Z;return this.float32[Ce+0]=le,this.float32[Ce+1]=Te,Z},z}(ni);at.prototype.bytesPerElement=8,wr("StructArrayLayout2f8",at);var B=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It){var jt=this.length;return this.resize(jt+1),this.emplace(jt,Z,le,Te,Ce,je,Ke,st,yt,_t,It)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt){var Ft=10*Z;return this.uint16[Ft+0]=le,this.uint16[Ft+1]=Te,this.uint16[Ft+2]=Ce,this.uint16[Ft+3]=je,this.uint16[Ft+4]=Ke,this.uint16[Ft+5]=st,this.uint16[Ft+6]=yt,this.uint16[Ft+7]=_t,this.uint16[Ft+8]=It,this.uint16[Ft+9]=jt,Z},z}(ni);B.prototype.bytesPerElement=20,wr("StructArrayLayout10ui20",B);var G=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft){var nn=this.length;return this.resize(nn+1),this.emplace(nn,Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn){var an=12*Z;return this.int16[an+0]=le,this.int16[an+1]=Te,this.int16[an+2]=Ce,this.int16[an+3]=je,this.uint16[an+4]=Ke,this.uint16[an+5]=st,this.uint16[an+6]=yt,this.uint16[an+7]=_t,this.int16[an+8]=It,this.int16[an+9]=jt,this.int16[an+10]=Ft,this.int16[an+11]=nn,Z},z}(ni);G.prototype.bytesPerElement=24,wr("StructArrayLayout4i4ui4i24",G);var q=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Z,le,Te)},z.prototype.emplace=function(Z,le,Te,Ce){var je=3*Z;return this.float32[je+0]=le,this.float32[je+1]=Te,this.float32[je+2]=Ce,Z},z}(ni);q.prototype.bytesPerElement=12,wr("StructArrayLayout3f12",q);var L=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},z.prototype.emplace=function(Z,le){var Te=1*Z;return this.uint32[Te+0]=le,Z},z}(ni);L.prototype.bytesPerElement=4,wr("StructArrayLayout1ul4",L);var V=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je,Ke,st,yt,_t){var It=this.length;return this.resize(It+1),this.emplace(It,Z,le,Te,Ce,je,Ke,st,yt,_t)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It){var jt=10*Z,Ft=5*Z;return this.int16[jt+0]=le,this.int16[jt+1]=Te,this.int16[jt+2]=Ce,this.int16[jt+3]=je,this.int16[jt+4]=Ke,this.int16[jt+5]=st,this.uint32[Ft+3]=yt,this.uint16[jt+8]=_t,this.uint16[jt+9]=It,Z},z}(ni);V.prototype.bytesPerElement=20,wr("StructArrayLayout6i1ul2ui20",V);var J=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Te,Ce,je,Ke)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke,st){var yt=6*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Te,this.int16[yt+2]=Ce,this.int16[yt+3]=je,this.int16[yt+4]=Ke,this.int16[yt+5]=st,Z},z}(ni);J.prototype.bytesPerElement=12,wr("StructArrayLayout2i2i2i12",J);var ne=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je){var Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,Z,le,Te,Ce,je)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke){var st=4*Z,yt=8*Z;return this.float32[st+0]=le,this.float32[st+1]=Te,this.float32[st+2]=Ce,this.int16[yt+6]=je,this.int16[yt+7]=Ke,Z},z}(ni);ne.prototype.bytesPerElement=16,wr("StructArrayLayout2f1f2i16",ne);var ue=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Ce)},z.prototype.emplace=function(Z,le,Te,Ce,je){var Ke=12*Z,st=3*Z;return this.uint8[Ke+0]=le,this.uint8[Ke+1]=Te,this.float32[st+1]=Ce,this.float32[st+2]=je,Z},z}(ni);ue.prototype.bytesPerElement=12,wr("StructArrayLayout2ub2f12",ue);var xe=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Z,le,Te)},z.prototype.emplace=function(Z,le,Te,Ce){var je=3*Z;return this.uint16[je+0]=le,this.uint16[je+1]=Te,this.uint16[je+2]=Ce,Z},z}(ni);xe.prototype.bytesPerElement=6,wr("StructArrayLayout3ui6",xe);var Le=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn,an,_n,yn,In){var zn=this.length;return this.resize(zn+1),this.emplace(zn,Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn,an,_n,yn,In)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn,an,_n,yn,In,zn){var qn=24*Z,Wn=12*Z,nr=48*Z;return this.int16[qn+0]=le,this.int16[qn+1]=Te,this.uint16[qn+2]=Ce,this.uint16[qn+3]=je,this.uint32[Wn+2]=Ke,this.uint32[Wn+3]=st,this.uint32[Wn+4]=yt,this.uint16[qn+10]=_t,this.uint16[qn+11]=It,this.uint16[qn+12]=jt,this.float32[Wn+7]=Ft,this.float32[Wn+8]=nn,this.uint8[nr+36]=an,this.uint8[nr+37]=_n,this.uint8[nr+38]=yn,this.uint32[Wn+10]=In,this.int16[qn+22]=zn,Z},z}(ni);Le.prototype.bytesPerElement=48,wr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Le);var De=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn,an,_n,yn,In,zn,qn,Wn,nr,pr,cr,yr,_r,Dr,Sr,zr){var Lr=this.length;return this.resize(Lr+1),this.emplace(Lr,Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn,an,_n,yn,In,zn,qn,Wn,nr,pr,cr,yr,_r,Dr,Sr,zr)},z.prototype.emplace=function(Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn,an,_n,yn,In,zn,qn,Wn,nr,pr,cr,yr,_r,Dr,Sr,zr,Lr){var Mr=34*Z,Yr=17*Z;return this.int16[Mr+0]=le,this.int16[Mr+1]=Te,this.int16[Mr+2]=Ce,this.int16[Mr+3]=je,this.int16[Mr+4]=Ke,this.int16[Mr+5]=st,this.int16[Mr+6]=yt,this.int16[Mr+7]=_t,this.uint16[Mr+8]=It,this.uint16[Mr+9]=jt,this.uint16[Mr+10]=Ft,this.uint16[Mr+11]=nn,this.uint16[Mr+12]=an,this.uint16[Mr+13]=_n,this.uint16[Mr+14]=yn,this.uint16[Mr+15]=In,this.uint16[Mr+16]=zn,this.uint16[Mr+17]=qn,this.uint16[Mr+18]=Wn,this.uint16[Mr+19]=nr,this.uint16[Mr+20]=pr,this.uint16[Mr+21]=cr,this.uint16[Mr+22]=yr,this.uint32[Yr+12]=_r,this.float32[Yr+13]=Dr,this.float32[Yr+14]=Sr,this.float32[Yr+15]=zr,this.float32[Yr+16]=Lr,Z},z}(ni);De.prototype.bytesPerElement=68,wr("StructArrayLayout8i15ui1ul4f68",De);var Ue=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},z.prototype.emplace=function(Z,le){var Te=1*Z;return this.float32[Te+0]=le,Z},z}(ni);Ue.prototype.bytesPerElement=4,wr("StructArrayLayout1f4",Ue);var qe=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Z,le,Te)},z.prototype.emplace=function(Z,le,Te,Ce){var je=3*Z;return this.int16[je+0]=le,this.int16[je+1]=Te,this.int16[je+2]=Ce,Z},z}(ni);qe.prototype.bytesPerElement=6,wr("StructArrayLayout3i6",qe);var et=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Z,le,Te)},z.prototype.emplace=function(Z,le,Te,Ce){var je=2*Z,Ke=4*Z;return this.uint32[je+0]=le,this.uint16[Ke+2]=Te,this.uint16[Ke+3]=Ce,Z},z}(ni);et.prototype.bytesPerElement=8,wr("StructArrayLayout1ul2ui8",et);var lt=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},z.prototype.emplace=function(Z,le,Te){var Ce=2*Z;return this.uint16[Ce+0]=le,this.uint16[Ce+1]=Te,Z},z}(ni);lt.prototype.bytesPerElement=4,wr("StructArrayLayout2ui4",lt);var ft=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},z.prototype.emplace=function(Z,le){var Te=1*Z;return this.uint16[Te+0]=le,Z},z}(ni);ft.prototype.bytesPerElement=2,wr("StructArrayLayout1ui2",ft);var xt=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Ce){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Ce)},z.prototype.emplace=function(Z,le,Te,Ce,je){var Ke=4*Z;return this.float32[Ke+0]=le,this.float32[Ke+1]=Te,this.float32[Ke+2]=Ce,this.float32[Ke+3]=je,Z},z}(ni);xt.prototype.bytesPerElement=16,wr("StructArrayLayout4f16",xt);var St=function(A){function z(){A.apply(this,arguments)}A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,Z),z}(ka);St.prototype.size=20;var wt=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new St(this,Z)},z}(V);wr("CollisionBoxArray",wt);var Dt=function(A){function z(){A.apply(this,arguments)}A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,Z),z}(ka);Dt.prototype.size=48;var Et=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new Dt(this,Z)},z}(Le);wr("PlacedSymbolArray",Et);var Yt=function(A){function z(){A.apply(this,arguments)}A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,Z),z}(ka);Yt.prototype.size=68;var qt=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new Yt(this,Z)},z}(De);wr("SymbolInstanceArray",qt);var Bt=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},z}(Ue);wr("GlyphOffsetArray",Bt);var fn=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.getx=function(Z){return this.int16[3*Z+0]},z.prototype.gety=function(Z){return this.int16[3*Z+1]},z.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},z}(qe);wr("SymbolLineVertexArray",fn);var gn=function(A){function z(){A.apply(this,arguments)}A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,Z),z}(ka);gn.prototype.size=8;var kn=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new gn(this,Z)},z}(et);wr("FeatureIndexArray",kn);var On=di([{name:"a_pos",components:2,type:"Int16"}],4).members,Nn=function(A){A===void 0&&(A=[]),this.segments=A};function er(A,z){return 256*(A=u(Math.floor(A),0,255))+u(Math.floor(z),0,255)}Nn.prototype.prepareSegment=function(A,z,Z,le){var Te=this.segments[this.segments.length-1];return A>Nn.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+Nn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!Te||Te.vertexLength+A>Nn.MAX_VERTEX_ARRAY_LENGTH||Te.sortKey!==le)&&(Te={vertexOffset:z.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},le!==void 0&&(Te.sortKey=le),this.segments.push(Te)),Te},Nn.prototype.get=function(){return this.segments},Nn.prototype.destroy=function(){for(var A=0,z=this.segments;A<z.length;A+=1){var Z=z[A];for(var le in Z.vaos)Z.vaos[le].destroy()}},Nn.simpleSegment=function(A,z,Z,le){return new Nn([{vertexOffset:A,primitiveOffset:z,vertexLength:Z,primitiveLength:le,vaos:{},sortKey:0}])},Nn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wr("SegmentVector",Nn);var or=di([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Hn=T(function(A){A.exports=function(z,Z){var le,Te,Ce,je,Ke,st,yt,_t;for(le=3&z.length,Te=z.length-le,Ce=Z,Ke=3432918353,st=461845907,_t=0;_t<Te;)yt=255&z.charCodeAt(_t)|(255&z.charCodeAt(++_t))<<8|(255&z.charCodeAt(++_t))<<16|(255&z.charCodeAt(++_t))<<24,++_t,Ce=27492+(65535&(je=5*(65535&(Ce=(Ce^=yt=(65535&(yt=(yt=(65535&yt)*Ke+(((yt>>>16)*Ke&65535)<<16)&4294967295)<<15|yt>>>17))*st+(((yt>>>16)*st&65535)<<16)&4294967295)<<13|Ce>>>19))+((5*(Ce>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(yt=0,le){case 3:yt^=(255&z.charCodeAt(_t+2))<<16;case 2:yt^=(255&z.charCodeAt(_t+1))<<8;case 1:Ce^=yt=(65535&(yt=(yt=(65535&(yt^=255&z.charCodeAt(_t)))*Ke+(((yt>>>16)*Ke&65535)<<16)&4294967295)<<15|yt>>>17))*st+(((yt>>>16)*st&65535)<<16)&4294967295}return Ce^=z.length,Ce=2246822507*(65535&(Ce^=Ce>>>16))+((2246822507*(Ce>>>16)&65535)<<16)&4294967295,Ce=3266489909*(65535&(Ce^=Ce>>>13))+((3266489909*(Ce>>>16)&65535)<<16)&4294967295,(Ce^=Ce>>>16)>>>0}}),ar=T(function(A){A.exports=function(z,Z){for(var le,Te=z.length,Ce=Z^Te,je=0;Te>=4;)le=1540483477*(65535&(le=255&z.charCodeAt(je)|(255&z.charCodeAt(++je))<<8|(255&z.charCodeAt(++je))<<16|(255&z.charCodeAt(++je))<<24))+((1540483477*(le>>>16)&65535)<<16),Ce=1540483477*(65535&Ce)+((1540483477*(Ce>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),Te-=4,++je;switch(Te){case 3:Ce^=(255&z.charCodeAt(je+2))<<16;case 2:Ce^=(255&z.charCodeAt(je+1))<<8;case 1:Ce=1540483477*(65535&(Ce^=255&z.charCodeAt(je)))+((1540483477*(Ce>>>16)&65535)<<16)}return Ce=1540483477*(65535&(Ce^=Ce>>>13))+((1540483477*(Ce>>>16)&65535)<<16),(Ce^=Ce>>>15)>>>0}}),vr=Hn,Ar=Hn,Kn=ar;vr.murmur3=Ar,vr.murmur2=Kn;var ir=function(){this.ids=[],this.positions=[],this.indexed=!1};ir.prototype.add=function(A,z,Z,le){this.ids.push(sr(A)),this.positions.push(z,Z,le)},ir.prototype.getPositions=function(A){for(var z=sr(A),Z=0,le=this.ids.length-1;Z<le;){var Te=Z+le>>1;this.ids[Te]>=z?le=Te:Z=Te+1}for(var Ce=[];this.ids[Z]===z;){var je=this.positions[3*Z],Ke=this.positions[3*Z+1],st=this.positions[3*Z+2];Ce.push({index:je,start:Ke,end:st}),Z++}return Ce},ir.serialize=function(A,z){var Z=new Float64Array(A.ids),le=new Uint32Array(A.positions);return Tr(Z,le,0,Z.length-1),z&&z.push(Z.buffer,le.buffer),{ids:Z,positions:le}},ir.deserialize=function(A){var z=new ir;return z.ids=A.ids,z.positions=A.positions,z.indexed=!0,z};var br=Math.pow(2,53)-1;function sr(A){var z=+A;return!isNaN(z)&&z<=br?z:vr(String(A))}function Tr(A,z,Z,le){for(;Z<le;){for(var Te=A[Z+le>>1],Ce=Z-1,je=le+1;;){do Ce++;while(A[Ce]<Te);do je--;while(A[je]>Te);if(Ce>=je)break;Er(A,Ce,je),Er(z,3*Ce,3*je),Er(z,3*Ce+1,3*je+1),Er(z,3*Ce+2,3*je+2)}je-Z<le-je?(Tr(A,z,Z,je),Z=je+1):(Tr(A,z,je+1,le),le=je)}}function Er(A,z,Z){var le=A[z];A[z]=A[Z],A[Z]=le}wr("FeaturePositionMap",ir);var Rr=function(A,z){this.gl=A.gl,this.location=z},Fr=function(A){function z(Z,le){A.call(this,Z,le),this.current=0}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},z}(Rr),jr=function(A){function z(Z,le){A.call(this,Z,le),this.current=0}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},z}(Rr),qr=function(A){function z(Z,le){A.call(this,Z,le),this.current=[0,0]}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},z}(Rr),ui=function(A){function z(Z,le){A.call(this,Z,le),this.current=[0,0,0]}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},z}(Rr),Ai=function(A){function z(Z,le){A.call(this,Z,le),this.current=[0,0,0,0]}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},z}(Rr),ia=function(A){function z(Z,le){A.call(this,Z,le),this.current=Sn.transparent}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},z}(Rr),Ni=new Float32Array(16),Ji=function(A){function z(Z,le){A.call(this,Z,le),this.current=Ni}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var le=1;le<16;le++)if(Z[le]!==this.current[le]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},z}(Rr);function gi(A){return[er(255*A.r,255*A.g),er(255*A.b,255*A.a)]}var Gr=function(A,z,Z){this.value=A,this.uniformNames=z.map(function(le){return"u_"+le}),this.type=Z};Gr.prototype.setUniform=function(A,z,Z){A.set(Z.constantOr(this.value))},Gr.prototype.getBinding=function(A,z,Z){return this.type==="color"?new ia(A,z):new jr(A,z)};var xi=function(A,z){this.uniformNames=z.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};xi.prototype.setConstantPatternPositions=function(A,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=A.tlbr},xi.prototype.setUniform=function(A,z,Z,le){var Te=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Te&&A.set(Te)},xi.prototype.getBinding=function(A,z,Z){return Z.substr(0,9)==="u_pattern"?new Ai(A,z):new jr(A,z)};var ri=function(A,z,Z,le){this.expression=A,this.type=Z,this.maxValue=0,this.paintVertexAttributes=z.map(function(Te){return{name:"a_"+Te,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new le};ri.prototype.populatePaintArray=function(A,z,Z,le,Te){var Ce=this.paintVertexArray.length,je=this.expression.evaluate(new Vr(0),z,{},le,[],Te);this.paintVertexArray.resize(A),this._setPaintValue(Ce,A,je)},ri.prototype.updatePaintArray=function(A,z,Z,le){var Te=this.expression.evaluate({zoom:0},Z,le);this._setPaintValue(A,z,Te)},ri.prototype._setPaintValue=function(A,z,Z){if(this.type==="color")for(var le=gi(Z),Te=A;Te<z;Te++)this.paintVertexArray.emplace(Te,le[0],le[1]);else{for(var Ce=A;Ce<z;Ce++)this.paintVertexArray.emplace(Ce,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},ri.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ri.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Zr=function(A,z,Z,le,Te,Ce){this.expression=A,this.uniformNames=z.map(function(je){return"u_"+je+"_t"}),this.type=Z,this.useIntegerZoom=le,this.zoom=Te,this.maxValue=0,this.paintVertexAttributes=z.map(function(je){return{name:"a_"+je,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new Ce};Zr.prototype.populatePaintArray=function(A,z,Z,le,Te){var Ce=this.expression.evaluate(new Vr(this.zoom),z,{},le,[],Te),je=this.expression.evaluate(new Vr(this.zoom+1),z,{},le,[],Te),Ke=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ke,A,Ce,je)},Zr.prototype.updatePaintArray=function(A,z,Z,le){var Te=this.expression.evaluate({zoom:this.zoom},Z,le),Ce=this.expression.evaluate({zoom:this.zoom+1},Z,le);this._setPaintValue(A,z,Te,Ce)},Zr.prototype._setPaintValue=function(A,z,Z,le){if(this.type==="color")for(var Te=gi(Z),Ce=gi(le),je=A;je<z;je++)this.paintVertexArray.emplace(je,Te[0],Te[1],Ce[0],Ce[1]);else{for(var Ke=A;Ke<z;Ke++)this.paintVertexArray.emplace(Ke,Z,le);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(le))}},Zr.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Zr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Zr.prototype.setUniform=function(A,z){var Z=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,le=u(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);A.set(le)},Zr.prototype.getBinding=function(A,z,Z){return new jr(A,z)};var bi=function(A,z,Z,le,Te,Ce){this.expression=A,this.type=z,this.useIntegerZoom=Z,this.zoom=le,this.layerId=Ce,this.zoomInPaintVertexArray=new Te,this.zoomOutPaintVertexArray=new Te};bi.prototype.populatePaintArray=function(A,z,Z){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(le,A,z.patterns&&z.patterns[this.layerId],Z)},bi.prototype.updatePaintArray=function(A,z,Z,le,Te){this._setPaintValues(A,z,Z.patterns&&Z.patterns[this.layerId],Te)},bi.prototype._setPaintValues=function(A,z,Z,le){if(le&&Z){var Te=Z.min,Ce=Z.mid,je=Z.max,Ke=le[Te],st=le[Ce],yt=le[je];if(Ke&&st&&yt)for(var _t=A;_t<z;_t++)this.zoomInPaintVertexArray.emplace(_t,st.tl[0],st.tl[1],st.br[0],st.br[1],Ke.tl[0],Ke.tl[1],Ke.br[0],Ke.br[1],st.pixelRatio,Ke.pixelRatio),this.zoomOutPaintVertexArray.emplace(_t,st.tl[0],st.tl[1],st.br[0],st.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],st.pixelRatio,yt.pixelRatio)}},bi.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,or.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,or.members,this.expression.isStateDependent))},bi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Mi=function(A,z,Z){this.binders={},this._buffers=[];var le=[];for(var Te in A.paint._values)if(Z(Te)){var Ce=A.paint.get(Te);if(Ce instanceof li&&po(Ce.property.specification)){var je=ms(Te,A.type),Ke=Ce.value,st=Ce.property.specification.type,yt=Ce.property.useIntegerZoom,_t=Ce.property.specification["property-type"],It=_t==="cross-faded"||_t==="cross-faded-data-driven";if(Ke.kind==="constant")this.binders[Te]=It?new xi(Ke.value,je):new Gr(Ke.value,je,st),le.push("/u_"+Te);else if(Ke.kind==="source"||It){var jt=ys(Te,st,"source");this.binders[Te]=It?new bi(Ke,st,yt,z,jt,A.id):new ri(Ke,je,st,jt),le.push("/a_"+Te)}else{var Ft=ys(Te,st,"composite");this.binders[Te]=new Zr(Ke,je,st,yt,z,Ft),le.push("/z_"+Te)}}}this.cacheKey=le.sort().join("")};Mi.prototype.getMaxValue=function(A){var z=this.binders[A];return z instanceof ri||z instanceof Zr?z.maxValue:0},Mi.prototype.populatePaintArrays=function(A,z,Z,le,Te){for(var Ce in this.binders){var je=this.binders[Ce];(je instanceof ri||je instanceof Zr||je instanceof bi)&&je.populatePaintArray(A,z,Z,le,Te)}},Mi.prototype.setConstantPatternPositions=function(A,z){for(var Z in this.binders){var le=this.binders[Z];le instanceof xi&&le.setConstantPatternPositions(A,z)}},Mi.prototype.updatePaintArrays=function(A,z,Z,le,Te){var Ce=!1;for(var je in A)for(var Ke=0,st=z.getPositions(je);Ke<st.length;Ke+=1){var yt=st[Ke],_t=Z.feature(yt.index);for(var It in this.binders){var jt=this.binders[It];if((jt instanceof ri||jt instanceof Zr||jt instanceof bi)&&jt.expression.isStateDependent===!0){var Ft=le.paint.get(It);jt.expression=Ft.value,jt.updatePaintArray(yt.start,yt.end,_t,A[je],Te),Ce=!0}}}return Ce},Mi.prototype.defines=function(){var A=[];for(var z in this.binders){var Z=this.binders[z];(Z instanceof Gr||Z instanceof xi)&&A.push.apply(A,Z.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return A},Mi.prototype.getBinderAttributes=function(){var A=[];for(var z in this.binders){var Z=this.binders[z];if(Z instanceof ri||Z instanceof Zr)for(var le=0;le<Z.paintVertexAttributes.length;le++)A.push(Z.paintVertexAttributes[le].name);else if(Z instanceof bi)for(var Te=0;Te<or.members.length;Te++)A.push(or.members[Te].name)}return A},Mi.prototype.getBinderUniforms=function(){var A=[];for(var z in this.binders){var Z=this.binders[z];if(Z instanceof Gr||Z instanceof xi||Z instanceof Zr)for(var le=0,Te=Z.uniformNames;le<Te.length;le+=1){var Ce=Te[le];A.push(Ce)}}return A},Mi.prototype.getPaintVertexBuffers=function(){return this._buffers},Mi.prototype.getUniforms=function(A,z){var Z=[];for(var le in this.binders){var Te=this.binders[le];if(Te instanceof Gr||Te instanceof xi||Te instanceof Zr)for(var Ce=0,je=Te.uniformNames;Ce<je.length;Ce+=1){var Ke=je[Ce];if(z[Ke]){var st=Te.getBinding(A,z[Ke],Ke);Z.push({name:Ke,property:le,binding:st})}}}return Z},Mi.prototype.setUniforms=function(A,z,Z,le){for(var Te=0,Ce=z;Te<Ce.length;Te+=1){var je=Ce[Te],Ke=je.name,st=je.property,yt=je.binding;this.binders[st].setUniform(yt,le,Z.get(st),Ke)}},Mi.prototype.updatePaintBuffers=function(A){for(var z in this._buffers=[],this.binders){var Z=this.binders[z];if(A&&Z instanceof bi){var le=A.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(Z instanceof ri||Z instanceof Zr)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},Mi.prototype.upload=function(A){for(var z in this.binders){var Z=this.binders[z];(Z instanceof ri||Z instanceof Zr||Z instanceof bi)&&Z.upload(A)}this.updatePaintBuffers()},Mi.prototype.destroy=function(){for(var A in this.binders){var z=this.binders[A];(z instanceof ri||z instanceof Zr||z instanceof bi)&&z.destroy()}};var Ii=function(A,z,Z){Z===void 0&&(Z=function(){return!0}),this.programConfigurations={};for(var le=0,Te=A;le<Te.length;le+=1){var Ce=Te[le];this.programConfigurations[Ce.id]=new Mi(Ce,z,Z)}this.needsUpload=!1,this._featureMap=new ir,this._bufferOffset=0};function ms(A,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(z+"-","").replace(/-/g,"_")]}function ys(A,z,Z){var le={color:{source:at,composite:xt},number:{source:Ue,composite:at}},Te=function(Ce){return{"line-pattern":{source:B,composite:B},"fill-pattern":{source:B,composite:B},"fill-extrusion-pattern":{source:B,composite:B}}[Ce]}(A);return Te&&Te[Z]||le[z][Z]}Ii.prototype.populatePaintArrays=function(A,z,Z,le,Te,Ce){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(A,z,le,Te,Ce);z.id!==void 0&&this._featureMap.add(z.id,Z,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},Ii.prototype.updatePaintArrays=function(A,z,Z,le){for(var Te=0,Ce=Z;Te<Ce.length;Te+=1){var je=Ce[Te];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(A,this._featureMap,z,je,le)||this.needsUpload}},Ii.prototype.get=function(A){return this.programConfigurations[A]},Ii.prototype.upload=function(A){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(A);this.needsUpload=!1}},Ii.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},wr("ConstantBinder",Gr),wr("CrossFadedConstantBinder",xi),wr("SourceExpressionBinder",ri),wr("CrossFadedCompositeBinder",bi),wr("CompositeExpressionBinder",Zr),wr("ProgramConfiguration",Mi,{omit:["_buffers"]}),wr("ProgramConfigurationSet",Ii);var Xr=8192,Gs=Math.pow(2,14)-1,Os=-Gs-1;function _o(A){for(var z=Xr/A.extent,Z=A.loadGeometry(),le=0;le<Z.length;le++)for(var Te=Z[le],Ce=0;Ce<Te.length;Ce++){var je=Te[Ce],Ke=Math.round(je.x*z),st=Math.round(je.y*z);je.x=u(Ke,Os,Gs),je.y=u(st,Os,Gs),(Ke<je.x||Ke>je.x+1||st<je.y||st>je.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return Z}function _i(A,z){return{type:A.type,id:A.id,properties:A.properties,geometry:z?_o(A):[]}}function Aa(A,z,Z,le,Te){A.emplaceBack(2*z+(le+1)/2,2*Z+(Te+1)/2)}var Wi=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new jo,this.indexArray=new xe,this.segments=new Nn,this.programConfigurations=new Ii(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function Ml(A,z){for(var Z=0;Z<A.length;Z++)if(Ws(z,A[Z]))return!0;for(var le=0;le<z.length;le++)if(Ws(A,z[le]))return!0;return!!pl(A,z)}function bc(A,z,Z){return!!Ws(A,z)||!!dl(z,A,Z)}function zu(A,z){if(A.length===1)return Ru(z,A[0]);for(var Z=0;Z<z.length;Z++)for(var le=z[Z],Te=0;Te<le.length;Te++)if(Ws(A,le[Te]))return!0;for(var Ce=0;Ce<A.length;Ce++)if(Ru(z,A[Ce]))return!0;for(var je=0;je<z.length;je++)if(pl(A,z[je]))return!0;return!1}function _c(A,z,Z){if(A.length>1){if(pl(A,z))return!0;for(var le=0;le<z.length;le++)if(dl(z[le],A,Z))return!0}for(var Te=0;Te<A.length;Te++)if(dl(A[Te],z,Z))return!0;return!1}function pl(A,z){if(A.length===0||z.length===0)return!1;for(var Z=0;Z<A.length-1;Z++)for(var le=A[Z],Te=A[Z+1],Ce=0;Ce<z.length-1;Ce++)if(wc(le,Te,z[Ce],z[Ce+1]))return!0;return!1}function wc(A,z,Z,le){return O(A,Z,le)!==O(z,Z,le)&&O(A,z,Z)!==O(A,z,le)}function dl(A,z,Z){var le=Z*Z;if(z.length===1)return A.distSqr(z[0])<le;for(var Te=1;Te<z.length;Te++)if(Du(A,z[Te-1],z[Te])<le)return!0;return!1}function Du(A,z,Z){var le=z.distSqr(Z);if(le===0)return A.distSqr(z);var Te=((A.x-z.x)*(Z.x-z.x)+(A.y-z.y)*(Z.y-z.y))/le;return Te<0?A.distSqr(z):Te>1?A.distSqr(Z):A.distSqr(Z.sub(z)._mult(Te)._add(z))}function Ru(A,z){for(var Z,le,Te,Ce=!1,je=0;je<A.length;je++)for(var Ke=0,st=(Z=A[je]).length-1;Ke<Z.length;st=Ke++)le=Z[Ke],Te=Z[st],le.y>z.y!=Te.y>z.y&&z.x<(Te.x-le.x)*(z.y-le.y)/(Te.y-le.y)+le.x&&(Ce=!Ce);return Ce}function Ws(A,z){for(var Z=!1,le=0,Te=A.length-1;le<A.length;Te=le++){var Ce=A[le],je=A[Te];Ce.y>z.y!=je.y>z.y&&z.x<(je.x-Ce.x)*(z.y-Ce.y)/(je.y-Ce.y)+Ce.x&&(Z=!Z)}return Z}function Uh(A,z,Z){var le=Z[0],Te=Z[2];if(A.x<le.x&&z.x<le.x||A.x>Te.x&&z.x>Te.x||A.y<le.y&&z.y<le.y||A.y>Te.y&&z.y>Te.y)return!1;var Ce=O(A,z,Z[0]);return Ce!==O(A,z,Z[1])||Ce!==O(A,z,Z[2])||Ce!==O(A,z,Z[3])}function au(A,z,Z){var le=z.paint.get(A).value;return le.kind==="constant"?le.value:Z.programConfigurations.get(z.id).getMaxValue(A)}function Fu(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Bu(A,z,Z,le,Te){if(!z[0]&&!z[1])return A;var Ce=t.convert(z)._mult(Te);Z==="viewport"&&Ce._rotate(-le);for(var je=[],Ke=0;Ke<A.length;Ke++){var st=A[Ke];je.push(st.sub(Ce))}return je}Wi.prototype.populate=function(A,z,Z){var le=this.layers[0],Te=[],Ce=null;le.type==="circle"&&(Ce=le.layout.get("circle-sort-key"));for(var je=0,Ke=A;je<Ke.length;je+=1){var st=Ke[je],yt=st.feature,_t=st.id,It=st.index,jt=st.sourceLayerIndex,Ft=this.layers[0]._featureFilter.needGeometry,nn=_i(yt,Ft);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),nn,Z)){var an=Ce?Ce.evaluate(nn,{},Z):void 0,_n={id:_t,properties:yt.properties,type:yt.type,sourceLayerIndex:jt,index:It,geometry:Ft?nn.geometry:_o(yt),patterns:{},sortKey:an};Te.push(_n)}}Ce&&Te.sort(function(yr,_r){return yr.sortKey-_r.sortKey});for(var yn=0,In=Te;yn<In.length;yn+=1){var zn=In[yn],qn=zn,Wn=qn.geometry,nr=qn.index,pr=qn.sourceLayerIndex,cr=A[nr].feature;this.addFeature(zn,Wn,nr,Z),z.featureIndex.insert(cr,Wn,nr,pr,this.index)}},Wi.prototype.update=function(A,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,z,this.stateDependentLayers,Z)},Wi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Wi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wi.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,On),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wi.prototype.addFeature=function(A,z,Z,le){for(var Te=0,Ce=z;Te<Ce.length;Te+=1)for(var je=0,Ke=Ce[Te];je<Ke.length;je+=1){var st=Ke[je],yt=st.x,_t=st.y;if(!(yt<0||yt>=Xr||_t<0||_t>=Xr)){var It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),jt=It.vertexLength;Aa(this.layoutVertexArray,yt,_t,-1,-1),Aa(this.layoutVertexArray,yt,_t,1,-1),Aa(this.layoutVertexArray,yt,_t,1,1),Aa(this.layoutVertexArray,yt,_t,-1,1),this.indexArray.emplaceBack(jt,jt+1,jt+2),this.indexArray.emplaceBack(jt,jt+3,jt+2),It.vertexLength+=4,It.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,{},le)},wr("CircleBucket",Wi,{omit:["layers"]});var Vh=new Li({"circle-sort-key":new Cr(Ge.layout_circle["circle-sort-key"])}),qh={paint:new Li({"circle-radius":new Cr(Ge.paint_circle["circle-radius"]),"circle-color":new Cr(Ge.paint_circle["circle-color"]),"circle-blur":new Cr(Ge.paint_circle["circle-blur"]),"circle-opacity":new Cr(Ge.paint_circle["circle-opacity"]),"circle-translate":new kr(Ge.paint_circle["circle-translate"]),"circle-translate-anchor":new kr(Ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kr(Ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kr(Ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Cr(Ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Cr(Ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Cr(Ge.paint_circle["circle-stroke-opacity"])}),layout:Vh},Uo=typeof Float32Array<"u"?Float32Array:Array;function Tc(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function lf(A,z,Z){var le=z[0],Te=z[1],Ce=z[2],je=z[3],Ke=z[4],st=z[5],yt=z[6],_t=z[7],It=z[8],jt=z[9],Ft=z[10],nn=z[11],an=z[12],_n=z[13],yn=z[14],In=z[15],zn=Z[0],qn=Z[1],Wn=Z[2],nr=Z[3];return A[0]=zn*le+qn*Ke+Wn*It+nr*an,A[1]=zn*Te+qn*st+Wn*jt+nr*_n,A[2]=zn*Ce+qn*yt+Wn*Ft+nr*yn,A[3]=zn*je+qn*_t+Wn*nn+nr*In,zn=Z[4],qn=Z[5],Wn=Z[6],nr=Z[7],A[4]=zn*le+qn*Ke+Wn*It+nr*an,A[5]=zn*Te+qn*st+Wn*jt+nr*_n,A[6]=zn*Ce+qn*yt+Wn*Ft+nr*yn,A[7]=zn*je+qn*_t+Wn*nn+nr*In,zn=Z[8],qn=Z[9],Wn=Z[10],nr=Z[11],A[8]=zn*le+qn*Ke+Wn*It+nr*an,A[9]=zn*Te+qn*st+Wn*jt+nr*_n,A[10]=zn*Ce+qn*yt+Wn*Ft+nr*yn,A[11]=zn*je+qn*_t+Wn*nn+nr*In,zn=Z[12],qn=Z[13],Wn=Z[14],nr=Z[15],A[12]=zn*le+qn*Ke+Wn*It+nr*an,A[13]=zn*Te+qn*st+Wn*jt+nr*_n,A[14]=zn*Ce+qn*yt+Wn*Ft+nr*yn,A[15]=zn*je+qn*_t+Wn*nn+nr*In,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,z=0,Z=arguments.length;Z--;)z+=A[Z]*A[Z];return Math.sqrt(z)});var Hh=lf,Nu,Gh=function(A,z,Z){return A[0]=z[0]-Z[0],A[1]=z[1]-Z[1],A[2]=z[2]-Z[2],A};function ju(A,z,Z){var le=z[0],Te=z[1],Ce=z[2],je=z[3];return A[0]=Z[0]*le+Z[4]*Te+Z[8]*Ce+Z[12]*je,A[1]=Z[1]*le+Z[5]*Te+Z[9]*Ce+Z[13]*je,A[2]=Z[2]*le+Z[6]*Te+Z[10]*Ce+Z[14]*je,A[3]=Z[3]*le+Z[7]*Te+Z[11]*Ce+Z[15]*je,A}Nu=new Uo(3),Uo!=Float32Array&&(Nu[0]=0,Nu[1]=0,Nu[2]=0),function(){var A=new Uo(4);Uo!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0)}();var Wh=function(A){var z=A[0],Z=A[1];return z*z+Z*Z},Yh=(function(){var A=new Uo(2);Uo!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function z(Z){A.call(this,Z,qh)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new Wi(Z)},z.prototype.queryRadius=function(Z){var le=Z;return au("circle-radius",this,le)+au("circle-stroke-width",this,le)+Fu(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(Z,le,Te,Ce,je,Ke,st,yt){for(var _t=Bu(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ke.angle,st),It=this.paint.get("circle-radius").evaluate(le,Te)+this.paint.get("circle-stroke-width").evaluate(le,Te),jt=this.paint.get("circle-pitch-alignment")==="map",Ft=jt?_t:function(pr,cr){return pr.map(function(yr){return uf(yr,cr)})}(_t,yt),nn=jt?It*st:It,an=0,_n=Ce;an<_n.length;an+=1)for(var yn=0,In=_n[an];yn<In.length;yn+=1){var zn=In[yn],qn=jt?zn:uf(zn,yt),Wn=nn,nr=ju([],[zn.x,zn.y,0,1],yt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Wn*=nr[3]/Ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Wn*=Ke.cameraToCenterDistance/nr[3]),bc(Ft,qn,Wn))return!0}return!1},z}(Qr));function uf(A,z){var Z=ju([],[A.x,A.y,0,1],z);return new t(Z[0]/Z[3],Z[1]/Z[3])}var cf=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z}(Wi);function kc(A,z,Z,le){var Te=z.width,Ce=z.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==Te*Ce*Z)throw new RangeError("mismatched image size")}else le=new Uint8Array(Te*Ce*Z);return A.width=Te,A.height=Ce,A.data=le,A}function ff(A,z,Z){var le=z.width,Te=z.height;if(le!==A.width||Te!==A.height){var Ce=kc({},{width:le,height:Te},Z);Ac(A,Ce,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,le),height:Math.min(A.height,Te)},Z),A.width=le,A.height=Te,A.data=Ce.data}}function Ac(A,z,Z,le,Te,Ce){if(Te.width===0||Te.height===0)return z;if(Te.width>A.width||Te.height>A.height||Z.x>A.width-Te.width||Z.y>A.height-Te.height)throw new RangeError("out of range source coordinates for image copy");if(Te.width>z.width||Te.height>z.height||le.x>z.width-Te.width||le.y>z.height-Te.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=A.data,Ke=z.data,st=0;st<Te.height;st++)for(var yt=((Z.y+st)*A.width+Z.x)*Ce,_t=((le.y+st)*z.width+le.x)*Ce,It=0;It<Te.width*Ce;It++)Ke[_t+It]=je[yt+It];return z}wr("HeatmapBucket",cf,{omit:["layers"]});var Sl=function(A,z){kc(this,A,1,z)};Sl.prototype.resize=function(A){ff(this,A,1)},Sl.prototype.clone=function(){return new Sl({width:this.width,height:this.height},new Uint8Array(this.data))},Sl.copy=function(A,z,Z,le,Te){Ac(A,z,Z,le,Te,1)};var lo=function(A,z){kc(this,A,4,z)};lo.prototype.resize=function(A){ff(this,A,4)},lo.prototype.replace=function(A,z){z?this.data.set(A):A instanceof Uint8ClampedArray?this.data=new Uint8Array(A.buffer):this.data=A},lo.prototype.clone=function(){return new lo({width:this.width,height:this.height},new Uint8Array(this.data))},lo.copy=function(A,z,Z,le,Te){Ac(A,z,Z,le,Te,4)},wr("AlphaImage",Sl),wr("RGBAImage",lo);var Zh={paint:new Li({"heatmap-radius":new Cr(Ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Cr(Ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kr(Ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bo(Ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kr(Ge.paint_heatmap["heatmap-opacity"])})};function hf(A){var z={},Z=A.resolution||256,le=A.clips?A.clips.length:1,Te=A.image||new lo({width:Z,height:le}),Ce=function(nn,an,_n){z[A.evaluationKey]=_n;var yn=A.expression.evaluate(z);Te.data[nn+an+0]=Math.floor(255*yn.r/yn.a),Te.data[nn+an+1]=Math.floor(255*yn.g/yn.a),Te.data[nn+an+2]=Math.floor(255*yn.b/yn.a),Te.data[nn+an+3]=Math.floor(255*yn.a)};if(A.clips)for(var je=0,Ke=0;je<le;++je,Ke+=4*Z)for(var st=0,yt=0;st<Z;st++,yt+=4){var _t=st/(Z-1),It=A.clips[je];Ce(Ke,yt,It.start*(1-_t)+It.end*_t)}else for(var jt=0,Ft=0;jt<Z;jt++,Ft+=4)Ce(0,Ft,jt/(Z-1));return Te}var Xh=function(A){function z(Z){A.call(this,Z,Zh),this._updateColorRamp()}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new cf(Z)},z.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){var Z=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=hf({expression:Z,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},z}(Qr),Kh={paint:new Li({"hillshade-illumination-direction":new kr(Ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new kr(Ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kr(Ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kr(Ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kr(Ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kr(Ge.paint_hillshade["hillshade-accent-color"])})},Jh=function(A){function z(Z){A.call(this,Z,Kh)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},z}(Qr),$h=di([{name:"a_pos",components:2,type:"Int16"}],4).members,Mc=Uu,Qh=Uu;function Uu(A,z,Z){Z=Z||2;var le,Te,Ce,je,Ke,st,yt,_t=z&&z.length,It=_t?z[0]*Z:A.length,jt=pf(A,0,It,Z,!0),Ft=[];if(!jt||jt.next===jt.prev)return Ft;if(_t&&(jt=function(an,_n,yn,In){var zn,qn,Wn,nr=[];for(zn=0,qn=_n.length;zn<qn;zn++)(Wn=pf(an,_n[zn]*In,zn<qn-1?_n[zn+1]*In:an.length,In,!1))===Wn.next&&(Wn.steiner=!0),nr.push(sp(Wn));for(nr.sort(ip),zn=0;zn<nr.length;zn++)ap(nr[zn],yn),yn=vl(yn,yn.next);return yn}(A,z,jt,Z)),A.length>80*Z){le=Ce=A[0],Te=je=A[1];for(var nn=Z;nn<It;nn+=Z)(Ke=A[nn])<le&&(le=Ke),(st=A[nn+1])<Te&&(Te=st),Ke>Ce&&(Ce=Ke),st>je&&(je=st);yt=(yt=Math.max(Ce-le,je-Te))!==0?1/yt:0}return ou(jt,Ft,Z,le,Te,yt),Ft}function pf(A,z,Z,le,Te){var Ce,je;if(Te===Lc(A,z,Z,le)>0)for(Ce=z;Ce<Z;Ce+=le)je=vf(Ce,A[Ce],A[Ce+1],je);else for(Ce=Z-le;Ce>=z;Ce-=le)je=vf(Ce,A[Ce],A[Ce+1],je);return je&&Vu(je,je.next)&&(lu(je),je=je.next),je}function vl(A,z){if(!A)return A;z||(z=A);var Z,le=A;do if(Z=!1,le.steiner||!Vu(le,le.next)&&$i(le.prev,le,le.next)!==0)le=le.next;else{if(lu(le),(le=z=le.prev)===le.next)break;Z=!0}while(Z||le!==z);return z}function ou(A,z,Z,le,Te,Ce,je){if(A){!je&&Ce&&function(_t,It,jt,Ft){var nn=_t;do nn.z===null&&(nn.z=Sc(nn.x,nn.y,It,jt,Ft)),nn.prevZ=nn.prev,nn.nextZ=nn.next,nn=nn.next;while(nn!==_t);nn.prevZ.nextZ=null,nn.prevZ=null,function(an){var _n,yn,In,zn,qn,Wn,nr,pr,cr=1;do{for(yn=an,an=null,qn=null,Wn=0;yn;){for(Wn++,In=yn,nr=0,_n=0;_n<cr&&(nr++,In=In.nextZ);_n++);for(pr=cr;nr>0||pr>0&&In;)nr!==0&&(pr===0||!In||yn.z<=In.z)?(zn=yn,yn=yn.nextZ,nr--):(zn=In,In=In.nextZ,pr--),qn?qn.nextZ=zn:an=zn,zn.prevZ=qn,qn=zn;yn=In}qn.nextZ=null,cr*=2}while(Wn>1)}(nn)}(A,le,Te,Ce);for(var Ke,st,yt=A;A.prev!==A.next;)if(Ke=A.prev,st=A.next,Ce?tp(A,le,Te,Ce):ep(A))z.push(Ke.i/Z),z.push(A.i/Z),z.push(st.i/Z),lu(A),A=st.next,yt=st.next;else if((A=st)===yt){je?je===1?ou(A=np(vl(A),z,Z),z,Z,le,Te,Ce,2):je===2&&rp(A,z,Z,le,Te,Ce):ou(vl(A),z,Z,le,Te,Ce,1);break}}}function ep(A){var z=A.prev,Z=A,le=A.next;if($i(z,Z,le)>=0)return!1;for(var Te=A.next.next;Te!==A.prev;){if(Fl(z.x,z.y,Z.x,Z.y,le.x,le.y,Te.x,Te.y)&&$i(Te.prev,Te,Te.next)>=0)return!1;Te=Te.next}return!0}function tp(A,z,Z,le){var Te=A.prev,Ce=A,je=A.next;if($i(Te,Ce,je)>=0)return!1;for(var Ke=Te.x<Ce.x?Te.x<je.x?Te.x:je.x:Ce.x<je.x?Ce.x:je.x,st=Te.y<Ce.y?Te.y<je.y?Te.y:je.y:Ce.y<je.y?Ce.y:je.y,yt=Te.x>Ce.x?Te.x>je.x?Te.x:je.x:Ce.x>je.x?Ce.x:je.x,_t=Te.y>Ce.y?Te.y>je.y?Te.y:je.y:Ce.y>je.y?Ce.y:je.y,It=Sc(Ke,st,z,Z,le),jt=Sc(yt,_t,z,Z,le),Ft=A.prevZ,nn=A.nextZ;Ft&&Ft.z>=It&&nn&&nn.z<=jt;){if(Ft!==A.prev&&Ft!==A.next&&Fl(Te.x,Te.y,Ce.x,Ce.y,je.x,je.y,Ft.x,Ft.y)&&$i(Ft.prev,Ft,Ft.next)>=0||(Ft=Ft.prevZ,nn!==A.prev&&nn!==A.next&&Fl(Te.x,Te.y,Ce.x,Ce.y,je.x,je.y,nn.x,nn.y)&&$i(nn.prev,nn,nn.next)>=0))return!1;nn=nn.nextZ}for(;Ft&&Ft.z>=It;){if(Ft!==A.prev&&Ft!==A.next&&Fl(Te.x,Te.y,Ce.x,Ce.y,je.x,je.y,Ft.x,Ft.y)&&$i(Ft.prev,Ft,Ft.next)>=0)return!1;Ft=Ft.prevZ}for(;nn&&nn.z<=jt;){if(nn!==A.prev&&nn!==A.next&&Fl(Te.x,Te.y,Ce.x,Ce.y,je.x,je.y,nn.x,nn.y)&&$i(nn.prev,nn,nn.next)>=0)return!1;nn=nn.nextZ}return!0}function np(A,z,Z){var le=A;do{var Te=le.prev,Ce=le.next.next;!Vu(Te,Ce)&&df(Te,le,le.next,Ce)&&su(Te,Ce)&&su(Ce,Te)&&(z.push(Te.i/Z),z.push(le.i/Z),z.push(Ce.i/Z),lu(le),lu(le.next),le=A=Ce),le=le.next}while(le!==A);return vl(le)}function rp(A,z,Z,le,Te,Ce){var je=A;do{for(var Ke=je.next.next;Ke!==je.prev;){if(je.i!==Ke.i&&lp(je,Ke)){var st=gf(je,Ke);return je=vl(je,je.next),st=vl(st,st.next),ou(je,z,Z,le,Te,Ce),void ou(st,z,Z,le,Te,Ce)}Ke=Ke.next}je=je.next}while(je!==A)}function ip(A,z){return A.x-z.x}function ap(A,z){if(z=function(le,Te){var Ce,je=Te,Ke=le.x,st=le.y,yt=-1/0;do{if(st<=je.y&&st>=je.next.y&&je.next.y!==je.y){var _t=je.x+(st-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(_t<=Ke&&_t>yt){if(yt=_t,_t===Ke){if(st===je.y)return je;if(st===je.next.y)return je.next}Ce=je.x<je.next.x?je:je.next}}je=je.next}while(je!==Te);if(!Ce)return null;if(Ke===yt)return Ce;var It,jt=Ce,Ft=Ce.x,nn=Ce.y,an=1/0;je=Ce;do Ke>=je.x&&je.x>=Ft&&Ke!==je.x&&Fl(st<nn?Ke:yt,st,Ft,nn,st<nn?yt:Ke,st,je.x,je.y)&&(It=Math.abs(st-je.y)/(Ke-je.x),su(je,le)&&(It<an||It===an&&(je.x>Ce.x||je.x===Ce.x&&op(Ce,je)))&&(Ce=je,an=It)),je=je.next;while(je!==jt);return Ce}(A,z)){var Z=gf(z,A);vl(z,z.next),vl(Z,Z.next)}}function op(A,z){return $i(A.prev,A,z.prev)<0&&$i(z.next,A,A.next)<0}function Sc(A,z,Z,le,Te){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-Z)*Te)|A<<8))|A<<4))|A<<2))|A<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-le)*Te)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function sp(A){var z=A,Z=A;do(z.x<Z.x||z.x===Z.x&&z.y<Z.y)&&(Z=z),z=z.next;while(z!==A);return Z}function Fl(A,z,Z,le,Te,Ce,je,Ke){return(Te-je)*(z-Ke)-(A-je)*(Ce-Ke)>=0&&(A-je)*(le-Ke)-(Z-je)*(z-Ke)>=0&&(Z-je)*(Ce-Ke)-(Te-je)*(le-Ke)>=0}function lp(A,z){return A.next.i!==z.i&&A.prev.i!==z.i&&!function(Z,le){var Te=Z;do{if(Te.i!==Z.i&&Te.next.i!==Z.i&&Te.i!==le.i&&Te.next.i!==le.i&&df(Te,Te.next,Z,le))return!0;Te=Te.next}while(Te!==Z);return!1}(A,z)&&(su(A,z)&&su(z,A)&&function(Z,le){var Te=Z,Ce=!1,je=(Z.x+le.x)/2,Ke=(Z.y+le.y)/2;do Te.y>Ke!=Te.next.y>Ke&&Te.next.y!==Te.y&&je<(Te.next.x-Te.x)*(Ke-Te.y)/(Te.next.y-Te.y)+Te.x&&(Ce=!Ce),Te=Te.next;while(Te!==Z);return Ce}(A,z)&&($i(A.prev,A,z.prev)||$i(A,z.prev,z))||Vu(A,z)&&$i(A.prev,A,A.next)>0&&$i(z.prev,z,z.next)>0)}function $i(A,z,Z){return(z.y-A.y)*(Z.x-z.x)-(z.x-A.x)*(Z.y-z.y)}function Vu(A,z){return A.x===z.x&&A.y===z.y}function df(A,z,Z,le){var Te=Hu($i(A,z,Z)),Ce=Hu($i(A,z,le)),je=Hu($i(Z,le,A)),Ke=Hu($i(Z,le,z));return Te!==Ce&&je!==Ke||!(Te!==0||!qu(A,Z,z))||!(Ce!==0||!qu(A,le,z))||!(je!==0||!qu(Z,A,le))||!(Ke!==0||!qu(Z,z,le))}function qu(A,z,Z){return z.x<=Math.max(A.x,Z.x)&&z.x>=Math.min(A.x,Z.x)&&z.y<=Math.max(A.y,Z.y)&&z.y>=Math.min(A.y,Z.y)}function Hu(A){return A>0?1:A<0?-1:0}function su(A,z){return $i(A.prev,A,A.next)<0?$i(A,z,A.next)>=0&&$i(A,A.prev,z)>=0:$i(A,z,A.prev)<0||$i(A,A.next,z)<0}function gf(A,z){var Z=new Ec(A.i,A.x,A.y),le=new Ec(z.i,z.x,z.y),Te=A.next,Ce=z.prev;return A.next=z,z.prev=A,Z.next=Te,Te.prev=Z,le.next=Z,Z.prev=le,Ce.next=le,le.prev=Ce,le}function vf(A,z,Z,le){var Te=new Ec(A,z,Z);return le?(Te.next=le.next,Te.prev=le,le.next.prev=Te,le.next=Te):(Te.prev=Te,Te.next=Te),Te}function lu(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Ec(A,z,Z){this.i=A,this.x=z,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Lc(A,z,Z,le){for(var Te=0,Ce=z,je=Z-le;Ce<Z;Ce+=le)Te+=(A[je]-A[Ce])*(A[Ce+1]+A[je+1]),je=Ce;return Te}function up(A,z,Z,le,Te){mf(A,z,Z,le||A.length-1,Te||cp)}function mf(A,z,Z,le,Te){for(;le>Z;){if(le-Z>600){var Ce=le-Z+1,je=z-Z+1,Ke=Math.log(Ce),st=.5*Math.exp(2*Ke/3),yt=.5*Math.sqrt(Ke*st*(Ce-st)/Ce)*(je-Ce/2<0?-1:1);mf(A,z,Math.max(Z,Math.floor(z-je*st/Ce+yt)),Math.min(le,Math.floor(z+(Ce-je)*st/Ce+yt)),Te)}var _t=A[z],It=Z,jt=le;for(uu(A,Z,z),Te(A[le],_t)>0&&uu(A,Z,le);It<jt;){for(uu(A,It,jt),It++,jt--;Te(A[It],_t)<0;)It++;for(;Te(A[jt],_t)>0;)jt--}Te(A[Z],_t)===0?uu(A,Z,jt):uu(A,++jt,le),jt<=z&&(Z=jt+1),z<=jt&&(le=jt-1)}}function uu(A,z,Z){var le=A[z];A[z]=A[Z],A[Z]=le}function cp(A,z){return A<z?-1:A>z?1:0}function Cc(A,z){var Z=A.length;if(Z<=1)return[A];for(var le,Te,Ce=[],je=0;je<Z;je++){var Ke=C(A[je]);Ke!==0&&(A[je].area=Math.abs(Ke),Te===void 0&&(Te=Ke<0),Te===Ke<0?(le&&Ce.push(le),le=[A[je]]):le.push(A[je]))}if(le&&Ce.push(le),z>1)for(var st=0;st<Ce.length;st++)Ce[st].length<=z||(up(Ce[st],z,1,Ce[st].length-1,fp),Ce[st]=Ce[st].slice(0,z));return Ce}function fp(A,z){return z.area-A.area}function Oc(A,z,Z){for(var le=Z.patternDependencies,Te=!1,Ce=0,je=z;Ce<je.length;Ce+=1){var Ke=je[Ce].paint.get(A+"-pattern");Ke.isConstant()||(Te=!0);var st=Ke.constantOr(null);st&&(Te=!0,le[st.to]=!0,le[st.from]=!0)}return Te}function Pc(A,z,Z,le,Te){for(var Ce=Te.patternDependencies,je=0,Ke=z;je<Ke.length;je+=1){var st=Ke[je],yt=st.paint.get(A+"-pattern").value;if(yt.kind!=="constant"){var _t=yt.evaluate({zoom:le-1},Z,{},Te.availableImages),It=yt.evaluate({zoom:le},Z,{},Te.availableImages),jt=yt.evaluate({zoom:le+1},Z,{},Te.availableImages);_t=_t&&_t.name?_t.name:_t,It=It&&It.name?It.name:It,jt=jt&&jt.name?jt.name:jt,Ce[_t]=!0,Ce[It]=!0,Ce[jt]=!0,Z.patterns[st.id]={min:_t,mid:It,max:jt}}}return Z}Uu.deviation=function(A,z,Z,le){var Te=z&&z.length,Ce=Te?z[0]*Z:A.length,je=Math.abs(Lc(A,0,Ce,Z));if(Te)for(var Ke=0,st=z.length;Ke<st;Ke++){var yt=z[Ke]*Z,_t=Ke<st-1?z[Ke+1]*Z:A.length;je-=Math.abs(Lc(A,yt,_t,Z))}var It=0;for(Ke=0;Ke<le.length;Ke+=3){var jt=le[Ke]*Z,Ft=le[Ke+1]*Z,nn=le[Ke+2]*Z;It+=Math.abs((A[jt]-A[nn])*(A[Ft+1]-A[jt+1])-(A[jt]-A[Ft])*(A[nn+1]-A[jt+1]))}return je===0&&It===0?0:Math.abs((It-je)/je)},Uu.flatten=function(A){for(var z=A[0][0].length,Z={vertices:[],holes:[],dimensions:z},le=0,Te=0;Te<A.length;Te++){for(var Ce=0;Ce<A[Te].length;Ce++)for(var je=0;je<z;je++)Z.vertices.push(A[Te][Ce][je]);Te>0&&(le+=A[Te-1].length,Z.holes.push(le))}return Z},Mc.default=Qh;var Ps=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new jo,this.indexArray=new xe,this.indexArray2=new lt,this.programConfigurations=new Ii(A.layers,A.zoom),this.segments=new Nn,this.segments2=new Nn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};Ps.prototype.populate=function(A,z,Z){this.hasPattern=Oc("fill",this.layers,z);for(var le=this.layers[0].layout.get("fill-sort-key"),Te=[],Ce=0,je=A;Ce<je.length;Ce+=1){var Ke=je[Ce],st=Ke.feature,yt=Ke.id,_t=Ke.index,It=Ke.sourceLayerIndex,jt=this.layers[0]._featureFilter.needGeometry,Ft=_i(st,jt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),Ft,Z)){var nn=le?le.evaluate(Ft,{},Z,z.availableImages):void 0,an={id:yt,properties:st.properties,type:st.type,sourceLayerIndex:It,index:_t,geometry:jt?Ft.geometry:_o(st),patterns:{},sortKey:nn};Te.push(an)}}le&&Te.sort(function(yr,_r){return yr.sortKey-_r.sortKey});for(var _n=0,yn=Te;_n<yn.length;_n+=1){var In=yn[_n],zn=In,qn=zn.geometry,Wn=zn.index,nr=zn.sourceLayerIndex;if(this.hasPattern){var pr=Pc("fill",this.layers,In,this.zoom,z);this.patternFeatures.push(pr)}else this.addFeature(In,qn,Wn,Z,{});var cr=A[Wn].feature;z.featureIndex.insert(cr,qn,Wn,nr,this.index)}},Ps.prototype.update=function(A,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,z,this.stateDependentLayers,Z)},Ps.prototype.addFeatures=function(A,z,Z){for(var le=0,Te=this.patternFeatures;le<Te.length;le+=1){var Ce=Te[le];this.addFeature(Ce,Ce.geometry,Ce.index,z,Z)}},Ps.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ps.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ps.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,$h),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},Ps.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ps.prototype.addFeature=function(A,z,Z,le,Te){for(var Ce=0,je=Cc(z,500);Ce<je.length;Ce+=1){for(var Ke=je[Ce],st=0,yt=0,_t=Ke;yt<_t.length;yt+=1)st+=_t[yt].length;for(var It=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),jt=It.vertexLength,Ft=[],nn=[],an=0,_n=Ke;an<_n.length;an+=1){var yn=_n[an];if(yn.length!==0){yn!==Ke[0]&&nn.push(Ft.length/2);var In=this.segments2.prepareSegment(yn.length,this.layoutVertexArray,this.indexArray2),zn=In.vertexLength;this.layoutVertexArray.emplaceBack(yn[0].x,yn[0].y),this.indexArray2.emplaceBack(zn+yn.length-1,zn),Ft.push(yn[0].x),Ft.push(yn[0].y);for(var qn=1;qn<yn.length;qn++)this.layoutVertexArray.emplaceBack(yn[qn].x,yn[qn].y),this.indexArray2.emplaceBack(zn+qn-1,zn+qn),Ft.push(yn[qn].x),Ft.push(yn[qn].y);In.vertexLength+=yn.length,In.primitiveLength+=yn.length}}for(var Wn=Mc(Ft,nn),nr=0;nr<Wn.length;nr+=3)this.indexArray.emplaceBack(jt+Wn[nr],jt+Wn[nr+1],jt+Wn[nr+2]);It.vertexLength+=st,It.primitiveLength+=Wn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,Te,le)},wr("FillBucket",Ps,{omit:["layers","patternFeatures"]});var hp=new Li({"fill-sort-key":new Cr(Ge.layout_fill["fill-sort-key"])}),pp={paint:new Li({"fill-antialias":new kr(Ge.paint_fill["fill-antialias"]),"fill-opacity":new Cr(Ge.paint_fill["fill-opacity"]),"fill-color":new Cr(Ge.paint_fill["fill-color"]),"fill-outline-color":new Cr(Ge.paint_fill["fill-outline-color"]),"fill-translate":new kr(Ge.paint_fill["fill-translate"]),"fill-translate-anchor":new kr(Ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ta(Ge.paint_fill["fill-pattern"])}),layout:hp},dp=function(A){function z(Z){A.call(this,Z,pp)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(Z,le){A.prototype.recalculate.call(this,Z,le);var Te=this.paint._values["fill-outline-color"];Te.value.kind==="constant"&&Te.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(Z){return new Ps(Z)},z.prototype.queryRadius=function(){return Fu(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(Z,le,Te,Ce,je,Ke,st){return zu(Bu(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ke.angle,st),Ce)},z.prototype.isTileClipped=function(){return!0},z}(Qr),gp=di([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,yf=Bl;function Bl(A,z,Z,le,Te){this.properties={},this.extent=Z,this.type=0,this._pbf=A,this._geometry=-1,this._keys=le,this._values=Te,A.readFields(vp,this,z)}function vp(A,z,Z){A==1?z.id=Z.readVarint():A==2?function(le,Te){for(var Ce=le.readVarint()+le.pos;le.pos<Ce;){var je=Te._keys[le.readVarint()],Ke=Te._values[le.readVarint()];Te.properties[je]=Ke}}(Z,z):A==3?z.type=Z.readVarint():A==4&&(z._geometry=Z.pos)}function mp(A){for(var z,Z,le=0,Te=0,Ce=A.length,je=Ce-1;Te<Ce;je=Te++)z=A[Te],le+=((Z=A[je]).x-z.x)*(z.y+Z.y);return le}Bl.types=["Unknown","Point","LineString","Polygon"],Bl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var z,Z=A.readVarint()+A.pos,le=1,Te=0,Ce=0,je=0,Ke=[];A.pos<Z;){if(Te<=0){var st=A.readVarint();le=7&st,Te=st>>3}if(Te--,le===1||le===2)Ce+=A.readSVarint(),je+=A.readSVarint(),le===1&&(z&&Ke.push(z),z=[]),z.push(new t(Ce,je));else{if(le!==7)throw new Error("unknown command "+le);z&&z.push(z[0].clone())}}return z&&Ke.push(z),Ke},Bl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var z=A.readVarint()+A.pos,Z=1,le=0,Te=0,Ce=0,je=1/0,Ke=-1/0,st=1/0,yt=-1/0;A.pos<z;){if(le<=0){var _t=A.readVarint();Z=7&_t,le=_t>>3}if(le--,Z===1||Z===2)(Te+=A.readSVarint())<je&&(je=Te),Te>Ke&&(Ke=Te),(Ce+=A.readSVarint())<st&&(st=Ce),Ce>yt&&(yt=Ce);else if(Z!==7)throw new Error("unknown command "+Z)}return[je,st,Ke,yt]},Bl.prototype.toGeoJSON=function(A,z,Z){var le,Te,Ce=this.extent*Math.pow(2,Z),je=this.extent*A,Ke=this.extent*z,st=this.loadGeometry(),yt=Bl.types[this.type];function _t(Ft){for(var nn=0;nn<Ft.length;nn++){var an=Ft[nn],_n=180-360*(an.y+Ke)/Ce;Ft[nn]=[360*(an.x+je)/Ce-180,360/Math.PI*Math.atan(Math.exp(_n*Math.PI/180))-90]}}switch(this.type){case 1:var It=[];for(le=0;le<st.length;le++)It[le]=st[le][0];_t(st=It);break;case 2:for(le=0;le<st.length;le++)_t(st[le]);break;case 3:for(st=function(Ft){var nn=Ft.length;if(nn<=1)return[Ft];for(var an,_n,yn=[],In=0;In<nn;In++){var zn=mp(Ft[In]);zn!==0&&(_n===void 0&&(_n=zn<0),_n===zn<0?(an&&yn.push(an),an=[Ft[In]]):an.push(Ft[In]))}return an&&yn.push(an),yn}(st),le=0;le<st.length;le++)for(Te=0;Te<st[le].length;Te++)_t(st[le][Te])}st.length===1?st=st[0]:yt="Multi"+yt;var jt={type:"Feature",geometry:{type:yt,coordinates:st},properties:this.properties};return"id"in this&&(jt.id=this.id),jt};var xf=bf;function bf(A,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(yp,this,z),this.length=this._features.length}function yp(A,z,Z){A===15?z.version=Z.readVarint():A===1?z.name=Z.readString():A===5?z.extent=Z.readVarint():A===2?z._features.push(Z.pos):A===3?z._keys.push(Z.readString()):A===4&&z._values.push(function(le){for(var Te=null,Ce=le.readVarint()+le.pos;le.pos<Ce;){var je=le.readVarint()>>3;Te=je===1?le.readString():je===2?le.readFloat():je===3?le.readDouble():je===4?le.readVarint64():je===5?le.readVarint():je===6?le.readSVarint():je===7?le.readBoolean():null}return Te}(Z))}function xp(A,z,Z){if(A===3){var le=new xf(Z,Z.readVarint()+Z.pos);le.length&&(z[le.name]=le)}}bf.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var z=this._pbf.readVarint()+this._pbf.pos;return new yf(this._pbf,z,this.extent,this._keys,this._values)};var Nl={VectorTile:function(A,z){this.layers=A.readFields(xp,{},z)},VectorTileFeature:yf,VectorTileLayer:xf},bp=Nl.VectorTileFeature.types,Ic=Math.pow(2,13);function cu(A,z,Z,le,Te,Ce,je,Ke){A.emplaceBack(z,Z,2*Math.floor(le*Ic)+je,Te*Ic*2,Ce*Ic*2,Math.round(Ke))}var Is=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new xe,this.programConfigurations=new Ii(A.layers,A.zoom),this.segments=new Nn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function _p(A,z){return A.x===z.x&&(A.x<0||A.x>Xr)||A.y===z.y&&(A.y<0||A.y>Xr)}Is.prototype.populate=function(A,z,Z){this.features=[],this.hasPattern=Oc("fill-extrusion",this.layers,z);for(var le=0,Te=A;le<Te.length;le+=1){var Ce=Te[le],je=Ce.feature,Ke=Ce.id,st=Ce.index,yt=Ce.sourceLayerIndex,_t=this.layers[0]._featureFilter.needGeometry,It=_i(je,_t);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),It,Z)){var jt={id:Ke,sourceLayerIndex:yt,index:st,geometry:_t?It.geometry:_o(je),properties:je.properties,type:je.type,patterns:{}};this.hasPattern?this.features.push(Pc("fill-extrusion",this.layers,jt,this.zoom,z)):this.addFeature(jt,jt.geometry,st,Z,{}),z.featureIndex.insert(je,jt.geometry,st,yt,this.index,!0)}}},Is.prototype.addFeatures=function(A,z,Z){for(var le=0,Te=this.features;le<Te.length;le+=1){var Ce=Te[le],je=Ce.geometry;this.addFeature(Ce,je,Ce.index,z,Z)}},Is.prototype.update=function(A,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,z,this.stateDependentLayers,Z)},Is.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Is.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,gp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Is.prototype.addFeature=function(A,z,Z,le,Te){for(var Ce=0,je=Cc(z,500);Ce<je.length;Ce+=1){for(var Ke=je[Ce],st=0,yt=0,_t=Ke;yt<_t.length;yt+=1)st+=_t[yt].length;for(var It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),jt=0,Ft=Ke;jt<Ft.length;jt+=1){var nn=Ft[jt];if(nn.length!==0&&!((Yr=nn).every(function(Br){return Br.x<0})||Yr.every(function(Br){return Br.x>Xr})||Yr.every(function(Br){return Br.y<0})||Yr.every(function(Br){return Br.y>Xr})))for(var an=0,_n=0;_n<nn.length;_n++){var yn=nn[_n];if(_n>=1){var In=nn[_n-1];if(!_p(yn,In)){It.vertexLength+4>Nn.MAX_VERTEX_ARRAY_LENGTH&&(It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var zn=yn.sub(In)._perp()._unit(),qn=In.dist(yn);an+qn>32768&&(an=0),cu(this.layoutVertexArray,yn.x,yn.y,zn.x,zn.y,0,0,an),cu(this.layoutVertexArray,yn.x,yn.y,zn.x,zn.y,0,1,an),an+=qn,cu(this.layoutVertexArray,In.x,In.y,zn.x,zn.y,0,0,an),cu(this.layoutVertexArray,In.x,In.y,zn.x,zn.y,0,1,an);var Wn=It.vertexLength;this.indexArray.emplaceBack(Wn,Wn+2,Wn+1),this.indexArray.emplaceBack(Wn+1,Wn+2,Wn+3),It.vertexLength+=4,It.primitiveLength+=2}}}}if(It.vertexLength+st>Nn.MAX_VERTEX_ARRAY_LENGTH&&(It=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),bp[A.type]==="Polygon"){for(var nr=[],pr=[],cr=It.vertexLength,yr=0,_r=Ke;yr<_r.length;yr+=1){var Dr=_r[yr];if(Dr.length!==0){Dr!==Ke[0]&&pr.push(nr.length/2);for(var Sr=0;Sr<Dr.length;Sr++){var zr=Dr[Sr];cu(this.layoutVertexArray,zr.x,zr.y,0,0,1,1,0),nr.push(zr.x),nr.push(zr.y)}}}for(var Lr=Mc(nr,pr),Mr=0;Mr<Lr.length;Mr+=3)this.indexArray.emplaceBack(cr+Lr[Mr],cr+Lr[Mr+2],cr+Lr[Mr+1]);It.primitiveLength+=Lr.length/3,It.vertexLength+=st}}var Yr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,Te,le)},wr("FillExtrusionBucket",Is,{omit:["layers","features"]});var wp={paint:new Li({"fill-extrusion-opacity":new kr(Ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Cr(Ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kr(Ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kr(Ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ta(Ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Cr(Ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Cr(Ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kr(Ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Tp=function(A){function z(Z){A.call(this,Z,wp)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new Is(Z)},z.prototype.queryRadius=function(){return Fu(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(Z,le,Te,Ce,je,Ke,st,yt){var _t=Bu(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ke.angle,st),It=this.paint.get("fill-extrusion-height").evaluate(le,Te),jt=this.paint.get("fill-extrusion-base").evaluate(le,Te),Ft=function(an,_n,yn,In){for(var zn=[],qn=0,Wn=an;qn<Wn.length;qn+=1){var nr=Wn[qn],pr=[nr.x,nr.y,In,1];ju(pr,pr,_n),zn.push(new t(pr[0]/pr[3],pr[1]/pr[3]))}return zn}(_t,yt,0,0),nn=function(an,_n,yn,In){for(var zn=[],qn=[],Wn=In[8]*_n,nr=In[9]*_n,pr=In[10]*_n,cr=In[11]*_n,yr=In[8]*yn,_r=In[9]*yn,Dr=In[10]*yn,Sr=In[11]*yn,zr=0,Lr=an;zr<Lr.length;zr+=1){for(var Mr=[],Yr=[],Br=0,mi=Lr[zr];Br<mi.length;Br+=1){var Ir=mi[Br],fi=Ir.x,Ti=Ir.y,Si=In[0]*fi+In[4]*Ti+In[12],Ei=In[1]*fi+In[5]*Ti+In[13],yi=In[2]*fi+In[6]*Ti+In[14],ta=In[3]*fi+In[7]*Ti+In[15],Pi=yi+pr,pa=ta+cr,Ma=Si+yr,ya=Ei+_r,Ya=yi+Dr,xa=ta+Sr,aa=new t((Si+Wn)/pa,(Ei+nr)/pa);aa.z=Pi/pa,Mr.push(aa);var ba=new t(Ma/xa,ya/xa);ba.z=Ya/xa,Yr.push(ba)}zn.push(Mr),qn.push(Yr)}return[zn,qn]}(Ce,jt,It,yt);return function(an,_n,yn){var In=1/0;zu(yn,_n)&&(In=_f(yn,_n[0]));for(var zn=0;zn<_n.length;zn++)for(var qn=_n[zn],Wn=an[zn],nr=0;nr<qn.length-1;nr++){var pr=qn[nr],cr=qn[nr+1],yr=Wn[nr],_r=[pr,cr,Wn[nr+1],yr,pr];Ml(yn,_r)&&(In=Math.min(In,_f(yn,_r)))}return In!==1/0&&In}(nn[0],nn[1],Ft)},z}(Qr);function fu(A,z){return A.x*z.x+A.y*z.y}function _f(A,z){if(A.length===1){for(var Z,le=0,Te=z[le++];!Z||Te.equals(Z);)if(!(Z=z[le++]))return 1/0;for(;le<z.length;le++){var Ce=z[le],je=A[0],Ke=Z.sub(Te),st=Ce.sub(Te),yt=je.sub(Te),_t=fu(Ke,Ke),It=fu(Ke,st),jt=fu(st,st),Ft=fu(yt,Ke),nn=fu(yt,st),an=_t*jt-It*It,_n=(jt*Ft-It*nn)/an,yn=(_t*nn-It*Ft)/an,In=1-_n-yn,zn=Te.z*In+Z.z*_n+Ce.z*yn;if(isFinite(zn))return zn}return 1/0}for(var qn=1/0,Wn=0,nr=z;Wn<nr.length;Wn+=1){var pr=nr[Wn];qn=Math.min(qn,pr.z)}return qn}var kp=di([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ap=di([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Mp=Nl.VectorTileFeature.types,Sp=Math.cos(Math.PI/180*37.5),wf=Math.pow(2,14)/.5,Wa=function(A){var z=this;this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Z){return Z.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(Z){z.gradients[Z.id]={}}),this.layoutVertexArray=new $e,this.layoutVertexArray2=new at,this.indexArray=new xe,this.programConfigurations=new Ii(A.layers,A.zoom),this.segments=new Nn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(Z){return Z.isStateDependent()}).map(function(Z){return Z.id})};Wa.prototype.populate=function(A,z,Z){this.hasPattern=Oc("line",this.layers,z);for(var le=this.layers[0].layout.get("line-sort-key"),Te=[],Ce=0,je=A;Ce<je.length;Ce+=1){var Ke=je[Ce],st=Ke.feature,yt=Ke.id,_t=Ke.index,It=Ke.sourceLayerIndex,jt=this.layers[0]._featureFilter.needGeometry,Ft=_i(st,jt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),Ft,Z)){var nn=le?le.evaluate(Ft,{},Z):void 0,an={id:yt,properties:st.properties,type:st.type,sourceLayerIndex:It,index:_t,geometry:jt?Ft.geometry:_o(st),patterns:{},sortKey:nn};Te.push(an)}}le&&Te.sort(function(yr,_r){return yr.sortKey-_r.sortKey});for(var _n=0,yn=Te;_n<yn.length;_n+=1){var In=yn[_n],zn=In,qn=zn.geometry,Wn=zn.index,nr=zn.sourceLayerIndex;if(this.hasPattern){var pr=Pc("line",this.layers,In,this.zoom,z);this.patternFeatures.push(pr)}else this.addFeature(In,qn,Wn,Z,{});var cr=A[Wn].feature;z.featureIndex.insert(cr,qn,Wn,nr,this.index)}},Wa.prototype.update=function(A,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,z,this.stateDependentLayers,Z)},Wa.prototype.addFeatures=function(A,z,Z){for(var le=0,Te=this.patternFeatures;le<Te.length;le+=1){var Ce=Te[le];this.addFeature(Ce,Ce.geometry,Ce.index,z,Z)}},Wa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Wa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wa.prototype.upload=function(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,Ap)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,kp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Wa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wa.prototype.lineFeatureClips=function(A){if(A.properties&&A.properties.hasOwnProperty("mapbox_clip_start")&&A.properties.hasOwnProperty("mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}},Wa.prototype.addFeature=function(A,z,Z,le,Te){var Ce=this.layers[0].layout,je=Ce.get("line-join").evaluate(A,{}),Ke=Ce.get("line-cap"),st=Ce.get("line-miter-limit"),yt=Ce.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(var _t=0,It=z;_t<It.length;_t+=1){var jt=It[_t];this.addLine(jt,A,je,Ke,st,yt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,Te,le)},Wa.prototype.addLine=function(A,z,Z,le,Te,Ce){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var je=0;je<A.length-1;je++)this.totalDistance+=A[je].dist(A[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Ke=Mp[z.type]==="Polygon",st=A.length;st>=2&&A[st-1].equals(A[st-2]);)st--;for(var yt=0;yt<st-1&&A[yt].equals(A[yt+1]);)yt++;if(!(st<(Ke?3:2))){Z==="bevel"&&(Te=1.05);var _t,It=this.overscaling<=16?15*Xr/(512*this.overscaling):0,jt=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),Ft=void 0,nn=void 0,an=void 0,_n=void 0;this.e1=this.e2=-1,Ke&&(_t=A[st-2],_n=A[yt].sub(_t)._unit()._perp());for(var yn=yt;yn<st;yn++)if(!(nn=yn===st-1?Ke?A[yt+1]:void 0:A[yn+1])||!A[yn].equals(nn)){_n&&(an=_n),_t&&(Ft=_t),_t=A[yn],_n=nn?nn.sub(_t)._unit()._perp():an;var In=(an=an||_n).add(_n);In.x===0&&In.y===0||In._unit();var zn=an.x*_n.x+an.y*_n.y,qn=In.x*_n.x+In.y*_n.y,Wn=qn!==0?1/qn:1/0,nr=2*Math.sqrt(2-2*qn),pr=qn<Sp&&Ft&&nn,cr=an.x*_n.y-an.y*_n.x>0;if(pr&&yn>yt){var yr=_t.dist(Ft);if(yr>2*It){var _r=_t.sub(_t.sub(Ft)._mult(It/yr)._round());this.updateDistance(Ft,_r),this.addCurrentVertex(_r,an,0,0,jt),Ft=_r}}var Dr=Ft&&nn,Sr=Dr?Z:Ke?"butt":le;if(Dr&&Sr==="round"&&(Wn<Ce?Sr="miter":Wn<=2&&(Sr="fakeround")),Sr==="miter"&&Wn>Te&&(Sr="bevel"),Sr==="bevel"&&(Wn>2&&(Sr="flipbevel"),Wn<Te&&(Sr="miter")),Ft&&this.updateDistance(Ft,_t),Sr==="miter")In._mult(Wn),this.addCurrentVertex(_t,In,0,0,jt);else if(Sr==="flipbevel"){if(Wn>100)In=_n.mult(-1);else{var zr=Wn*an.add(_n).mag()/an.sub(_n).mag();In._perp()._mult(zr*(cr?-1:1))}this.addCurrentVertex(_t,In,0,0,jt),this.addCurrentVertex(_t,In.mult(-1),0,0,jt)}else if(Sr==="bevel"||Sr==="fakeround"){var Lr=-Math.sqrt(Wn*Wn-1),Mr=cr?Lr:0,Yr=cr?0:Lr;if(Ft&&this.addCurrentVertex(_t,an,Mr,Yr,jt),Sr==="fakeround")for(var Br=Math.round(180*nr/Math.PI/20),mi=1;mi<Br;mi++){var Ir=mi/Br;if(Ir!==.5){var fi=Ir-.5;Ir+=Ir*fi*(Ir-1)*((1.0904+zn*(zn*(3.55645-1.43519*zn)-3.2452))*fi*fi+(.848013+zn*(.215638*zn-1.06021)))}var Ti=_n.sub(an)._mult(Ir)._add(an)._unit()._mult(cr?-1:1);this.addHalfVertex(_t,Ti.x,Ti.y,!1,cr,0,jt)}nn&&this.addCurrentVertex(_t,_n,-Mr,-Yr,jt)}else if(Sr==="butt")this.addCurrentVertex(_t,In,0,0,jt);else if(Sr==="square"){var Si=Ft?1:-1;this.addCurrentVertex(_t,In,Si,Si,jt)}else Sr==="round"&&(Ft&&(this.addCurrentVertex(_t,an,0,0,jt),this.addCurrentVertex(_t,an,1,1,jt,!0)),nn&&(this.addCurrentVertex(_t,_n,-1,-1,jt,!0),this.addCurrentVertex(_t,_n,0,0,jt)));if(pr&&yn<st-1){var Ei=_t.dist(nn);if(Ei>2*It){var yi=_t.add(nn.sub(_t)._mult(It/Ei)._round());this.updateDistance(_t,yi),this.addCurrentVertex(yi,_n,0,0,jt),_t=yi}}}}},Wa.prototype.addCurrentVertex=function(A,z,Z,le,Te,Ce){Ce===void 0&&(Ce=!1);var je=z.x+z.y*Z,Ke=z.y-z.x*Z,st=-z.x+z.y*le,yt=-z.y-z.x*le;this.addHalfVertex(A,je,Ke,Ce,!1,Z,Te),this.addHalfVertex(A,st,yt,Ce,!0,-le,Te),this.distance>wf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(A,z,Z,le,Te,Ce))},Wa.prototype.addHalfVertex=function(A,z,Z,le,Te,Ce,je){var Ke=A.x,st=A.y,yt=.5*(this.lineClips?this.scaledDistance*(wf-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack((Ke<<1)+(le?1:0),(st<<1)+(Te?1:0),Math.round(63*z)+128,Math.round(63*Z)+128,1+(Ce===0?0:Ce<0?-1:1)|(63&yt)<<2,yt>>6),this.lineClips){var _t=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(_t,this.lineClipsArray.length)}var It=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,It),je.primitiveLength++),Te?this.e2=It:this.e1=It},Wa.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Wa.prototype.updateDistance=function(A,z){this.distance+=A.dist(z),this.updateScaledDistance()},wr("LineBucket",Wa,{omit:["layers","patternFeatures"]});var Ep=new Li({"line-cap":new kr(Ge.layout_line["line-cap"]),"line-join":new Cr(Ge.layout_line["line-join"]),"line-miter-limit":new kr(Ge.layout_line["line-miter-limit"]),"line-round-limit":new kr(Ge.layout_line["line-round-limit"]),"line-sort-key":new Cr(Ge.layout_line["line-sort-key"])}),Tf={paint:new Li({"line-opacity":new Cr(Ge.paint_line["line-opacity"]),"line-color":new Cr(Ge.paint_line["line-color"]),"line-translate":new kr(Ge.paint_line["line-translate"]),"line-translate-anchor":new kr(Ge.paint_line["line-translate-anchor"]),"line-width":new Cr(Ge.paint_line["line-width"]),"line-gap-width":new Cr(Ge.paint_line["line-gap-width"]),"line-offset":new Cr(Ge.paint_line["line-offset"]),"line-blur":new Cr(Ge.paint_line["line-blur"]),"line-dasharray":new oo(Ge.paint_line["line-dasharray"]),"line-pattern":new Ta(Ge.paint_line["line-pattern"]),"line-gradient":new bo(Ge.paint_line["line-gradient"])}),layout:Ep},Lp=function(A){function z(){A.apply(this,arguments)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(Z,le){return le=new Vr(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),A.prototype.possiblyEvaluate.call(this,Z,le)},z.prototype.evaluate=function(Z,le,Te,Ce){return le=c({},le,{zoom:Math.floor(le.zoom)}),A.prototype.evaluate.call(this,Z,le,Te,Ce)},z}(Cr),kf=new Lp(Tf.paint.properties["line-width"].specification);kf.useIntegerZoom=!0;var Cp=function(A){function z(Z){A.call(this,Z,Tf),this.gradientVersion=0}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(Z){if(Z==="line-gradient"){var le=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=le._styleExpression.expression instanceof xr,this.gradientVersion=(this.gradientVersion+1)%n}},z.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},z.prototype.recalculate=function(Z,le){A.prototype.recalculate.call(this,Z,le),this.paint._values["line-floorwidth"]=kf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},z.prototype.createBucket=function(Z){return new Wa(Z)},z.prototype.queryRadius=function(Z){var le=Z,Te=Af(au("line-width",this,le),au("line-gap-width",this,le)),Ce=au("line-offset",this,le);return Te/2+Math.abs(Ce)+Fu(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(Z,le,Te,Ce,je,Ke,st){var yt=Bu(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ke.angle,st),_t=st/2*Af(this.paint.get("line-width").evaluate(le,Te),this.paint.get("line-gap-width").evaluate(le,Te)),It=this.paint.get("line-offset").evaluate(le,Te);return It&&(Ce=function(jt,Ft){for(var nn=[],an=new t(0,0),_n=0;_n<jt.length;_n++){for(var yn=jt[_n],In=[],zn=0;zn<yn.length;zn++){var qn=yn[zn-1],Wn=yn[zn],nr=yn[zn+1],pr=zn===0?an:Wn.sub(qn)._unit()._perp(),cr=zn===yn.length-1?an:nr.sub(Wn)._unit()._perp(),yr=pr._add(cr)._unit(),_r=yr.x*cr.x+yr.y*cr.y;yr._mult(1/_r),In.push(yr._mult(Ft)._add(Wn))}nn.push(In)}return nn}(Ce,It*st)),function(jt,Ft,nn){for(var an=0;an<Ft.length;an++){var _n=Ft[an];if(jt.length>=3){for(var yn=0;yn<_n.length;yn++)if(Ws(jt,_n[yn]))return!0}if(_c(jt,_n,nn))return!0}return!1}(yt,Ce,_t)},z.prototype.isTileClipped=function(){return!0},z}(Qr);function Af(A,z){return z>0?z+2*A:A}var Op=di([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Pp=di([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ip=(di([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),di([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Mf=(di([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),di([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),zp=di([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Dp(A,z,Z){return A.sections.forEach(function(le){le.text=function(Te,Ce,je){var Ke=Ce.layout.get("text-transform").evaluate(je,{});return Ke==="uppercase"?Te=Te.toLocaleUpperCase():Ke==="lowercase"&&(Te=Te.toLocaleLowerCase()),fa.applyArabicShaping&&(Te=fa.applyArabicShaping(Te)),Te}(le.text,z,Z)}),A}di([{name:"triangle",components:3,type:"Uint16"}]),di([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),di([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),di([{type:"Float32",name:"offsetX"}]),di([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var hu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},ma=24,Sf=function(A,z,Z,le,Te){var Ce,je,Ke=8*Te-le-1,st=(1<<Ke)-1,yt=st>>1,_t=-7,It=Te-1,jt=-1,Ft=A[z+It];for(It+=jt,Ce=Ft&(1<<-_t)-1,Ft>>=-_t,_t+=Ke;_t>0;Ce=256*Ce+A[z+It],It+=jt,_t-=8);for(je=Ce&(1<<-_t)-1,Ce>>=-_t,_t+=le;_t>0;je=256*je+A[z+It],It+=jt,_t-=8);if(Ce===0)Ce=1-yt;else{if(Ce===st)return je?NaN:1/0*(Ft?-1:1);je+=Math.pow(2,le),Ce-=yt}return(Ft?-1:1)*je*Math.pow(2,Ce-le)},Ef=function(A,z,Z,le,Te,Ce){var je,Ke,st,yt=8*Ce-Te-1,_t=(1<<yt)-1,It=_t>>1,jt=Te===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ft=0,nn=1,an=z<0||z===0&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(Ke=isNaN(z)?1:0,je=_t):(je=Math.floor(Math.log(z)/Math.LN2),z*(st=Math.pow(2,-je))<1&&(je--,st*=2),(z+=je+It>=1?jt/st:jt*Math.pow(2,1-It))*st>=2&&(je++,st/=2),je+It>=_t?(Ke=0,je=_t):je+It>=1?(Ke=(z*st-1)*Math.pow(2,Te),je+=It):(Ke=z*Math.pow(2,It-1)*Math.pow(2,Te),je=0));Te>=8;A[Z+Ft]=255&Ke,Ft+=nn,Ke/=256,Te-=8);for(je=je<<Te|Ke,yt+=Te;yt>0;A[Z+Ft]=255&je,Ft+=nn,je/=256,yt-=8);A[Z+Ft-nn]|=128*an},Gu=wi;function wi(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}wi.Varint=0,wi.Fixed64=1,wi.Bytes=2,wi.Fixed32=5;var zc=4294967296,Lf=1/zc,Cf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function el(A){return A.type===wi.Bytes?A.readVarint()+A.pos:A.pos+1}function jl(A,z,Z){return Z?4294967296*z+(A>>>0):4294967296*(z>>>0)+(A>>>0)}function Of(A,z,Z){var le=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));Z.realloc(le);for(var Te=Z.pos-1;Te>=A;Te--)Z.buf[Te+le]=Z.buf[Te]}function Rp(A,z){for(var Z=0;Z<A.length;Z++)z.writeVarint(A[Z])}function Fp(A,z){for(var Z=0;Z<A.length;Z++)z.writeSVarint(A[Z])}function Bp(A,z){for(var Z=0;Z<A.length;Z++)z.writeFloat(A[Z])}function Np(A,z){for(var Z=0;Z<A.length;Z++)z.writeDouble(A[Z])}function jp(A,z){for(var Z=0;Z<A.length;Z++)z.writeBoolean(A[Z])}function Up(A,z){for(var Z=0;Z<A.length;Z++)z.writeFixed32(A[Z])}function Vp(A,z){for(var Z=0;Z<A.length;Z++)z.writeSFixed32(A[Z])}function qp(A,z){for(var Z=0;Z<A.length;Z++)z.writeFixed64(A[Z])}function Hp(A,z){for(var Z=0;Z<A.length;Z++)z.writeSFixed64(A[Z])}function Wu(A,z){return(A[z]|A[z+1]<<8|A[z+2]<<16)+16777216*A[z+3]}function Ul(A,z,Z){A[Z]=z,A[Z+1]=z>>>8,A[Z+2]=z>>>16,A[Z+3]=z>>>24}function Pf(A,z){return(A[z]|A[z+1]<<8|A[z+2]<<16)+(A[z+3]<<24)}wi.prototype={destroy:function(){this.buf=null},readFields:function(A,z,Z){for(Z=Z||this.length;this.pos<Z;){var le=this.readVarint(),Te=le>>3,Ce=this.pos;this.type=7&le,A(Te,z,this),this.pos===Ce&&this.skip(le)}return z},readMessage:function(A,z){return this.readFields(A,z,this.readVarint()+this.pos)},readFixed32:function(){var A=Wu(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=Pf(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Wu(this.buf,this.pos)+Wu(this.buf,this.pos+4)*zc;return this.pos+=8,A},readSFixed64:function(){var A=Wu(this.buf,this.pos)+Pf(this.buf,this.pos+4)*zc;return this.pos+=8,A},readFloat:function(){var A=Sf(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Sf(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var z,Z,le=this.buf;return z=127&(Z=le[this.pos++]),Z<128?z:(z|=(127&(Z=le[this.pos++]))<<7,Z<128?z:(z|=(127&(Z=le[this.pos++]))<<14,Z<128?z:(z|=(127&(Z=le[this.pos++]))<<21,Z<128?z:function(Te,Ce,je){var Ke,st,yt=je.buf;if(Ke=(112&(st=yt[je.pos++]))>>4,st<128||(Ke|=(127&(st=yt[je.pos++]))<<3,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<10,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<17,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<24,st<128)||(Ke|=(1&(st=yt[je.pos++]))<<31,st<128))return jl(Te,Ke,Ce);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(Z=le[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,z=this.pos;return this.pos=A,A-z>=12&&Cf?function(Z,le,Te){return Cf.decode(Z.subarray(le,Te))}(this.buf,z,A):function(Z,le,Te){for(var Ce="",je=le;je<Te;){var Ke,st,yt,_t=Z[je],It=null,jt=_t>239?4:_t>223?3:_t>191?2:1;if(je+jt>Te)break;jt===1?_t<128&&(It=_t):jt===2?(192&(Ke=Z[je+1]))==128&&(It=(31&_t)<<6|63&Ke)<=127&&(It=null):jt===3?(Ke=Z[je+1],st=Z[je+2],(192&Ke)==128&&(192&st)==128&&((It=(15&_t)<<12|(63&Ke)<<6|63&st)<=2047||It>=55296&&It<=57343)&&(It=null)):jt===4&&(Ke=Z[je+1],st=Z[je+2],yt=Z[je+3],(192&Ke)==128&&(192&st)==128&&(192&yt)==128&&((It=(15&_t)<<18|(63&Ke)<<12|(63&st)<<6|63&yt)<=65535||It>=1114112)&&(It=null)),It===null?(It=65533,jt=1):It>65535&&(It-=65536,Ce+=String.fromCharCode(It>>>10&1023|55296),It=56320|1023&It),Ce+=String.fromCharCode(It),je+=jt}return Ce}(this.buf,z,A)},readBytes:function(){var A=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,A);return this.pos=A,z},readPackedVarint:function(A,z){if(this.type!==wi.Bytes)return A.push(this.readVarint(z));var Z=el(this);for(A=A||[];this.pos<Z;)A.push(this.readVarint(z));return A},readPackedSVarint:function(A){if(this.type!==wi.Bytes)return A.push(this.readSVarint());var z=el(this);for(A=A||[];this.pos<z;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==wi.Bytes)return A.push(this.readBoolean());var z=el(this);for(A=A||[];this.pos<z;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==wi.Bytes)return A.push(this.readFloat());var z=el(this);for(A=A||[];this.pos<z;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==wi.Bytes)return A.push(this.readDouble());var z=el(this);for(A=A||[];this.pos<z;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==wi.Bytes)return A.push(this.readFixed32());var z=el(this);for(A=A||[];this.pos<z;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==wi.Bytes)return A.push(this.readSFixed32());var z=el(this);for(A=A||[];this.pos<z;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==wi.Bytes)return A.push(this.readFixed64());var z=el(this);for(A=A||[];this.pos<z;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==wi.Bytes)return A.push(this.readSFixed64());var z=el(this);for(A=A||[];this.pos<z;)A.push(this.readSFixed64());return A},skip:function(A){var z=7&A;if(z===wi.Varint)for(;this.buf[this.pos++]>127;);else if(z===wi.Bytes)this.pos=this.readVarint()+this.pos;else if(z===wi.Fixed32)this.pos+=4;else{if(z!==wi.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(A,z){this.writeVarint(A<<3|z)},realloc:function(A){for(var z=this.length||16;z<this.pos+A;)z*=2;if(z!==this.length){var Z=new Uint8Array(z);Z.set(this.buf),this.buf=Z,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Ul(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Ul(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Ul(this.buf,-1&A,this.pos),Ul(this.buf,Math.floor(A*Lf),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Ul(this.buf,-1&A,this.pos),Ul(this.buf,Math.floor(A*Lf),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(z,Z){var le,Te;if(z>=0?(le=z%4294967296|0,Te=z/4294967296|0):(Te=~(-z/4294967296),4294967295^(le=~(-z%4294967296))?le=le+1|0:(le=0,Te=Te+1|0)),z>=18446744073709552e3||z<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(Ce,je,Ke){Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos]=127&Ce}(le,0,Z),function(Ce,je){var Ke=(7&Ce)<<4;je.buf[je.pos++]|=Ke|((Ce>>>=3)?128:0),Ce&&(je.buf[je.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(je.buf[je.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(je.buf[je.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(je.buf[je.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(je.buf[je.pos++]=127&Ce)))))}(Te,Z)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var z=this.pos;this.pos=function(le,Te,Ce){for(var je,Ke,st=0;st<Te.length;st++){if((je=Te.charCodeAt(st))>55295&&je<57344){if(!Ke){je>56319||st+1===Te.length?(le[Ce++]=239,le[Ce++]=191,le[Ce++]=189):Ke=je;continue}if(je<56320){le[Ce++]=239,le[Ce++]=191,le[Ce++]=189,Ke=je;continue}je=Ke-55296<<10|je-56320|65536,Ke=null}else Ke&&(le[Ce++]=239,le[Ce++]=191,le[Ce++]=189,Ke=null);je<128?le[Ce++]=je:(je<2048?le[Ce++]=je>>6|192:(je<65536?le[Ce++]=je>>12|224:(le[Ce++]=je>>18|240,le[Ce++]=je>>12&63|128),le[Ce++]=je>>6&63|128),le[Ce++]=63&je|128)}return Ce}(this.buf,A,this.pos);var Z=this.pos-z;Z>=128&&Of(z,Z,this),this.pos=z-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(A){this.realloc(4),Ef(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),Ef(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var z=A.length;this.writeVarint(z),this.realloc(z);for(var Z=0;Z<z;Z++)this.buf[this.pos++]=A[Z]},writeRawMessage:function(A,z){this.pos++;var Z=this.pos;A(z,this);var le=this.pos-Z;le>=128&&Of(Z,le,this),this.pos=Z-1,this.writeVarint(le),this.pos+=le},writeMessage:function(A,z,Z){this.writeTag(A,wi.Bytes),this.writeRawMessage(z,Z)},writePackedVarint:function(A,z){z.length&&this.writeMessage(A,Rp,z)},writePackedSVarint:function(A,z){z.length&&this.writeMessage(A,Fp,z)},writePackedBoolean:function(A,z){z.length&&this.writeMessage(A,jp,z)},writePackedFloat:function(A,z){z.length&&this.writeMessage(A,Bp,z)},writePackedDouble:function(A,z){z.length&&this.writeMessage(A,Np,z)},writePackedFixed32:function(A,z){z.length&&this.writeMessage(A,Up,z)},writePackedSFixed32:function(A,z){z.length&&this.writeMessage(A,Vp,z)},writePackedFixed64:function(A,z){z.length&&this.writeMessage(A,qp,z)},writePackedSFixed64:function(A,z){z.length&&this.writeMessage(A,Hp,z)},writeBytesField:function(A,z){this.writeTag(A,wi.Bytes),this.writeBytes(z)},writeFixed32Field:function(A,z){this.writeTag(A,wi.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(A,z){this.writeTag(A,wi.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(A,z){this.writeTag(A,wi.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(A,z){this.writeTag(A,wi.Fixed64),this.writeSFixed64(z)},writeVarintField:function(A,z){this.writeTag(A,wi.Varint),this.writeVarint(z)},writeSVarintField:function(A,z){this.writeTag(A,wi.Varint),this.writeSVarint(z)},writeStringField:function(A,z){this.writeTag(A,wi.Bytes),this.writeString(z)},writeFloatField:function(A,z){this.writeTag(A,wi.Fixed32),this.writeFloat(z)},writeDoubleField:function(A,z){this.writeTag(A,wi.Fixed64),this.writeDouble(z)},writeBooleanField:function(A,z){this.writeVarintField(A,!!z)}};var Dc=3;function Gp(A,z,Z){A===1&&Z.readMessage(Wp,z)}function Wp(A,z,Z){if(A===3){var le=Z.readMessage(Yp,{}),Te=le.id,Ce=le.bitmap,je=le.width,Ke=le.height,st=le.left,yt=le.top,_t=le.advance;z.push({id:Te,bitmap:new Sl({width:je+2*Dc,height:Ke+2*Dc},Ce),metrics:{width:je,height:Ke,left:st,top:yt,advance:_t}})}}function Yp(A,z,Z){A===1?z.id=Z.readVarint():A===2?z.bitmap=Z.readBytes():A===3?z.width=Z.readVarint():A===4?z.height=Z.readVarint():A===5?z.left=Z.readSVarint():A===6?z.top=Z.readSVarint():A===7&&(z.advance=Z.readVarint())}var If=Dc;function zf(A){for(var z=0,Z=0,le=0,Te=A;le<Te.length;le+=1){var Ce=Te[le];z+=Ce.w*Ce.h,Z=Math.max(Z,Ce.w)}A.sort(function(an,_n){return _n.h-an.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),Z),h:1/0}],Ke=0,st=0,yt=0,_t=A;yt<_t.length;yt+=1)for(var It=_t[yt],jt=je.length-1;jt>=0;jt--){var Ft=je[jt];if(!(It.w>Ft.w||It.h>Ft.h)){if(It.x=Ft.x,It.y=Ft.y,st=Math.max(st,It.y+It.h),Ke=Math.max(Ke,It.x+It.w),It.w===Ft.w&&It.h===Ft.h){var nn=je.pop();jt<je.length&&(je[jt]=nn)}else It.h===Ft.h?(Ft.x+=It.w,Ft.w-=It.w):It.w===Ft.w?(Ft.y+=It.h,Ft.h-=It.h):(je.push({x:Ft.x+It.w,y:Ft.y,w:Ft.w-It.w,h:It.h}),Ft.y+=It.h,Ft.h-=It.h);break}}return{w:Ke,h:st,fill:z/(Ke*st)||0}}var wo=1,Yu=function(A,z){var Z=z.pixelRatio,le=z.version,Te=z.stretchX,Ce=z.stretchY,je=z.content;this.paddedRect=A,this.pixelRatio=Z,this.stretchX=Te,this.stretchY=Ce,this.content=je,this.version=le},pu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};pu.tl.get=function(){return[this.paddedRect.x+wo,this.paddedRect.y+wo]},pu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-wo,this.paddedRect.y+this.paddedRect.h-wo]},pu.tlbr.get=function(){return this.tl.concat(this.br)},pu.displaySize.get=function(){return[(this.paddedRect.w-2*wo)/this.pixelRatio,(this.paddedRect.h-2*wo)/this.pixelRatio]},Object.defineProperties(Yu.prototype,pu);var du=function(A,z){var Z={},le={};this.haveRenderCallbacks=[];var Te=[];this.addImages(A,Z,Te),this.addImages(z,le,Te);var Ce=zf(Te),je=Ce.w,Ke=Ce.h,st=new lo({width:je||1,height:Ke||1});for(var yt in A){var _t=A[yt],It=Z[yt].paddedRect;lo.copy(_t.data,st,{x:0,y:0},{x:It.x+wo,y:It.y+wo},_t.data)}for(var jt in z){var Ft=z[jt],nn=le[jt].paddedRect,an=nn.x+wo,_n=nn.y+wo,yn=Ft.data.width,In=Ft.data.height;lo.copy(Ft.data,st,{x:0,y:0},{x:an,y:_n},Ft.data),lo.copy(Ft.data,st,{x:0,y:In-1},{x:an,y:_n-1},{width:yn,height:1}),lo.copy(Ft.data,st,{x:0,y:0},{x:an,y:_n+In},{width:yn,height:1}),lo.copy(Ft.data,st,{x:yn-1,y:0},{x:an-1,y:_n},{width:1,height:In}),lo.copy(Ft.data,st,{x:0,y:0},{x:an+yn,y:_n},{width:1,height:In})}this.image=st,this.iconPositions=Z,this.patternPositions=le};du.prototype.addImages=function(A,z,Z){for(var le in A){var Te=A[le],Ce={x:0,y:0,w:Te.data.width+2*wo,h:Te.data.height+2*wo};Z.push(Ce),z[le]=new Yu(Ce,Te),Te.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},du.prototype.patchUpdatedImages=function(A,z){for(var Z in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],A.getImage(Z),z),this.patchUpdatedImage(this.patternPositions[Z],A.getImage(Z),z)},du.prototype.patchUpdatedImage=function(A,z,Z){if(A&&z&&A.version!==z.version){A.version=z.version;var le=A.tl,Te=le[0],Ce=le[1];Z.update(z.data,void 0,{x:Te,y:Ce})}},wr("ImagePosition",Yu),wr("ImageAtlas",du);var Vo={horizontal:1,vertical:2,horizontalOnly:3},gu=-17,Vl=function(){this.scale=1,this.fontStack="",this.imageName=null};Vl.forText=function(A,z){var Z=new Vl;return Z.scale=A||1,Z.fontStack=z,Z},Vl.forImage=function(A){var z=new Vl;return z.imageName=A,z};var Da=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Zu(A,z,Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn,an){var _n,yn=Da.fromFeature(A,Te);It===Vo.vertical&&yn.verticalizePunctuation();var In=fa.processBidirectionalText,zn=fa.processStyledBidirectionalText;if(In&&yn.sections.length===1){_n=[];for(var qn=0,Wn=In(yn.toString(),Rc(yn,yt,Ce,z,le,Ft,nn));qn<Wn.length;qn+=1){var nr=Wn[qn],pr=new Da;pr.text=nr,pr.sections=yn.sections;for(var cr=0;cr<nr.length;cr++)pr.sectionIndex.push(0);_n.push(pr)}}else if(zn){_n=[];for(var yr=0,_r=zn(yn.text,yn.sectionIndex,Rc(yn,yt,Ce,z,le,Ft,nn));yr<_r.length;yr+=1){var Dr=_r[yr],Sr=new Da;Sr.text=Dr[0],Sr.sectionIndex=Dr[1],Sr.sections=yn.sections,_n.push(Sr)}}else _n=function(Mr,Yr){for(var Br=[],mi=Mr.text,Ir=0,fi=0,Ti=Yr;fi<Ti.length;fi+=1){var Si=Ti[fi];Br.push(Mr.substring(Ir,Si)),Ir=Si}return Ir<mi.length&&Br.push(Mr.substring(Ir,mi.length)),Br}(yn,Rc(yn,yt,Ce,z,le,Ft,nn));var zr=[],Lr={positionedLines:zr,text:yn.toString(),top:_t[1],bottom:_t[1],left:_t[0],right:_t[0],writingMode:It,iconsInText:!1,verticalizable:!1};return function(Mr,Yr,Br,mi,Ir,fi,Ti,Si,Ei,yi,ta,Pi){for(var pa=0,Ma=gu,ya=0,Ya=0,xa=Si==="right"?1:Si==="left"?0:.5,aa=0,ba=0,da=Ir;ba<da.length;ba+=1){var oa=da[ba];oa.trim();var Nr=oa.getMaxScale(),Kr=(Nr-1)*ma,ji={positionedGlyphs:[],lineOffset:0};Mr.positionedLines[aa]=ji;var vi=ji.positionedGlyphs,zi=0;if(oa.length()){for(var Oi=0;Oi<oa.length();Oi++){var ei=oa.getSection(Oi),Ui=oa.getSectionIndex(Oi),Za=oa.getCharCode(Oi),ko=0,Ra=null,Ds=null,rl=null,ga=ma,Rs=!(Ei===Vo.horizontal||!ta&&!yo(Za)||ta&&(Xu[Za]||Bo(Za)));if(ei.imageName){var xs=mi[ei.imageName];if(!xs)continue;rl=ei.imageName,Mr.iconsInText=Mr.iconsInText||!0,Ds=xs.paddedRect;var bs=xs.displaySize;ei.scale=ei.scale*ma/Pi,Ra={width:bs[0],height:bs[1],left:wo,top:-If,advance:Rs?bs[1]:bs[0]},ko=Kr+(ma-bs[1]*ei.scale),ga=Ra.advance;var Ol=Rs?bs[0]*ei.scale-ma*Nr:bs[1]*ei.scale-ma*Nr;Ol>0&&Ol>zi&&(zi=Ol)}else{var ic=Br[ei.fontStack],Pl=ic&&ic[Za];if(Pl&&Pl.rect)Ds=Pl.rect,Ra=Pl.metrics;else{var ac=Yr[ei.fontStack],xu=ac&&ac[Za];if(!xu)continue;Ra=xu.metrics}ko=(Nr-ei.scale)*ma}Rs?(Mr.verticalizable=!0,vi.push({glyph:Za,imageName:rl,x:pa,y:Ma+ko,vertical:Rs,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:Ui,metrics:Ra,rect:Ds}),pa+=ga*ei.scale+yi):(vi.push({glyph:Za,imageName:rl,x:pa,y:Ma+ko,vertical:Rs,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:Ui,metrics:Ra,rect:Ds}),pa+=Ra.advance*ei.scale+yi)}if(vi.length!==0){var Wc=pa-yi;ya=Math.max(Wc,ya),Xp(vi,0,vi.length-1,xa,zi)}pa=0;var oc=fi*Nr+zi;ji.lineOffset=Math.max(zi,Kr),Ma+=oc,Ya=Math.max(oc,Ya),++aa}else Ma+=fi,++aa}var $l=Ma-gu,sc=Fc(Ti),lc=sc.horizontalAlign,bu=sc.verticalAlign;(function(Yc,_u,Il,Ql,uc,cc,eu,fc,hc){var wu=(_u-Il)*uc,Tu=0;Tu=cc!==eu?-fc*Ql-gu:(-Ql*hc+.5)*eu;for(var zl=0,ku=Yc;zl<ku.length;zl+=1)for(var Dl=0,Au=ku[zl].positionedGlyphs;Dl<Au.length;Dl+=1){var Mu=Au[Dl];Mu.x+=wu,Mu.y+=Tu}})(Mr.positionedLines,xa,lc,bu,ya,Ya,fi,$l,Ir.length),Mr.top+=-bu*$l,Mr.bottom=Mr.top+$l,Mr.left+=-lc*ya,Mr.right=Mr.left+ya}(Lr,z,Z,le,_n,je,Ke,st,It,yt,jt,an),!function(Mr){for(var Yr=0,Br=Mr;Yr<Br.length;Yr+=1)if(Br[Yr].positionedGlyphs.length!==0)return!1;return!0}(zr)&&Lr}Da.fromFeature=function(A,z){for(var Z=new Da,le=0;le<A.sections.length;le++){var Te=A.sections[le];Te.image?Z.addImageSection(Te):Z.addTextSection(Te,z)}return Z},Da.prototype.length=function(){return this.text.length},Da.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},Da.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},Da.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},Da.prototype.verticalizePunctuation=function(){this.text=function(A){for(var z="",Z=0;Z<A.length;Z++){var le=A.charCodeAt(Z+1)||null,Te=A.charCodeAt(Z-1)||null;le&&Bi(le)&&!hu[A[Z+1]]||Te&&Bi(Te)&&!hu[A[Z-1]]||!hu[A[Z]]?z+=A[Z]:z+=hu[A[Z]]}return z}(this.text)},Da.prototype.trim=function(){for(var A=0,z=0;z<this.text.length&&Xu[this.text.charCodeAt(z)];z++)A++;for(var Z=this.text.length,le=this.text.length-1;le>=0&&le>=A&&Xu[this.text.charCodeAt(le)];le--)Z--;this.text=this.text.substring(A,Z),this.sectionIndex=this.sectionIndex.slice(A,Z)},Da.prototype.substring=function(A,z){var Z=new Da;return Z.text=this.text.substring(A,z),Z.sectionIndex=this.sectionIndex.slice(A,z),Z.sections=this.sections,Z},Da.prototype.toString=function(){return this.text},Da.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(z,Z){return Math.max(z,A.sections[Z].scale)},0)},Da.prototype.addTextSection=function(A,z){this.text+=A.text,this.sections.push(Vl.forText(A.scale,A.fontStack||z));for(var Z=this.sections.length-1,le=0;le<A.text.length;++le)this.sectionIndex.push(Z)},Da.prototype.addImageSection=function(A){var z=A.image?A.image.name:"";if(z.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(Vl.forImage(z)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},Da.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Xu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},To={};function Df(A,z,Z,le,Te,Ce){if(z.imageName){var je=le[z.imageName];return je?je.displaySize[0]*z.scale*ma/Ce+Te:0}var Ke=Z[z.fontStack],st=Ke&&Ke[A];return st?st.metrics.advance*z.scale+Te:0}function Rf(A,z,Z,le){var Te=Math.pow(A-z,2);return le?A<z?Te/2:2*Te:Te+Math.abs(Z)*Z}function Zp(A,z,Z){var le=0;return A===10&&(le-=1e4),Z&&(le+=150),A!==40&&A!==65288||(le+=50),z!==41&&z!==65289||(le+=50),le}function Ff(A,z,Z,le,Te,Ce){for(var je=null,Ke=Rf(z,Z,Te,Ce),st=0,yt=le;st<yt.length;st+=1){var _t=yt[st],It=Rf(z-_t.x,Z,Te,Ce)+_t.badness;It<=Ke&&(je=_t,Ke=It)}return{index:A,x:z,priorBreak:je,badness:Ke}}function Bf(A){return A?Bf(A.priorBreak).concat(A.index):[]}function Rc(A,z,Z,le,Te,Ce,je){if(Ce!=="point")return[];if(!A)return[];for(var Ke=[],st=function(_n,yn,In,zn,qn,Wn){for(var nr=0,pr=0;pr<_n.length();pr++){var cr=_n.getSection(pr);nr+=Df(_n.getCharCode(pr),cr,zn,qn,yn,Wn)}return nr/Math.max(1,Math.ceil(nr/In))}(A,z,Z,le,Te,je),yt=A.text.indexOf("​")>=0,_t=0,It=0;It<A.length();It++){var jt=A.getSection(It),Ft=A.getCharCode(It);if(Xu[Ft]||(_t+=Df(Ft,jt,le,Te,z,je)),It<A.length()-1){var nn=!((an=Ft)<11904||!(dr["Bopomofo Extended"](an)||dr.Bopomofo(an)||dr["CJK Compatibility Forms"](an)||dr["CJK Compatibility Ideographs"](an)||dr["CJK Compatibility"](an)||dr["CJK Radicals Supplement"](an)||dr["CJK Strokes"](an)||dr["CJK Symbols and Punctuation"](an)||dr["CJK Unified Ideographs Extension A"](an)||dr["CJK Unified Ideographs"](an)||dr["Enclosed CJK Letters and Months"](an)||dr["Halfwidth and Fullwidth Forms"](an)||dr.Hiragana(an)||dr["Ideographic Description Characters"](an)||dr["Kangxi Radicals"](an)||dr["Katakana Phonetic Extensions"](an)||dr.Katakana(an)||dr["Vertical Forms"](an)||dr["Yi Radicals"](an)||dr["Yi Syllables"](an)));(To[Ft]||nn||jt.imageName)&&Ke.push(Ff(It+1,_t,st,Ke,Zp(Ft,A.getCharCode(It+1),nn&&yt),!1))}}var an;return Bf(Ff(A.length(),_t,st,Ke,0,!0))}function Fc(A){var z=.5,Z=.5;switch(A){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:z,verticalAlign:Z}}function Xp(A,z,Z,le,Te){if(le||Te)for(var Ce=A[Z],je=Ce.metrics.advance*Ce.scale,Ke=(A[Z].x+je)*le,st=z;st<=Z;st++)A[st].x-=Ke,A[st].y+=Te}function Nf(A,z,Z,le,Te,Ce){var je,Ke=A.image;if(Ke.content){var st=Ke.content,yt=Ke.pixelRatio||1;je=[st[0]/yt,st[1]/yt,Ke.displaySize[0]-st[2]/yt,Ke.displaySize[1]-st[3]/yt]}var _t,It,jt,Ft,nn=z.left*Ce,an=z.right*Ce;Z==="width"||Z==="both"?(Ft=Te[0]+nn-le[3],It=Te[0]+an+le[1]):It=(Ft=Te[0]+(nn+an-Ke.displaySize[0])/2)+Ke.displaySize[0];var _n=z.top*Ce,yn=z.bottom*Ce;return Z==="height"||Z==="both"?(_t=Te[1]+_n-le[0],jt=Te[1]+yn+le[2]):jt=(_t=Te[1]+(_n+yn-Ke.displaySize[1])/2)+Ke.displaySize[1],{image:Ke,top:_t,right:It,bottom:jt,left:Ft,collisionPadding:je}}To[10]=!0,To[32]=!0,To[38]=!0,To[40]=!0,To[41]=!0,To[43]=!0,To[45]=!0,To[47]=!0,To[173]=!0,To[183]=!0,To[8203]=!0,To[8208]=!0,To[8211]=!0,To[8231]=!0;var ql=function(A){function z(Z,le,Te,Ce){A.call(this,Z,le),this.angle=Te,Ce!==void 0&&(this.segment=Ce)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(t);wr("Anchor",ql);var zs=128;function Bc(A,z){var Z=z.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new Vr(A+1))};if(Z.kind==="source")return{kind:"source"};for(var le=Z.zoomStops,Te=Z.interpolationType,Ce=0;Ce<le.length&&le[Ce]<=A;)Ce++;for(var je=Ce=Math.max(0,Ce-1);je<le.length&&le[je]<A+1;)je++;je=Math.min(le.length-1,je);var Ke=le[Ce],st=le[je];return Z.kind==="composite"?{kind:"composite",minZoom:Ke,maxZoom:st,interpolationType:Te}:{kind:"camera",minZoom:Ke,maxZoom:st,minSize:Z.evaluate(new Vr(Ke)),maxSize:Z.evaluate(new Vr(st)),interpolationType:Te}}function jf(A,z,Z){var le=z.uSize,Te=z.uSizeT,Ce=Z.lowerSize,je=Z.upperSize;return A.kind==="source"?Ce/zs:A.kind==="composite"?Pr(Ce/zs,je/zs,Te):le}function Uf(A,z){var Z=0,le=0;if(A.kind==="constant")le=A.layoutSize;else if(A.kind!=="source"){var Te=A.interpolationType,Ce=A.minZoom,je=A.maxZoom,Ke=Te?u(Ri.interpolationFactor(Te,z,Ce,je),0,1):0;A.kind==="camera"?le=Pr(A.minSize,A.maxSize,Ke):Z=Ke}return{uSizeT:Z,uSize:le}}var Kp=Object.freeze({__proto__:null,getSizeData:Bc,evaluateSizeForFeature:jf,evaluateSizeForZoom:Uf,SIZE_PACK_FACTOR:zs});function Vf(A,z,Z,le,Te){if(z.segment===void 0)return!0;for(var Ce=z,je=z.segment+1,Ke=0;Ke>-Z/2;){if(--je<0)return!1;Ke-=A[je].dist(Ce),Ce=A[je]}Ke+=A[je].dist(A[je+1]),je++;for(var st=[],yt=0;Ke<Z/2;){var _t=A[je-1],It=A[je],jt=A[je+1];if(!jt)return!1;var Ft=_t.angleTo(It)-It.angleTo(jt);for(Ft=Math.abs((Ft+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:Ke,angleDelta:Ft}),yt+=Ft;Ke-st[0].distance>le;)yt-=st.shift().angleDelta;if(yt>Te)return!1;je++,Ke+=It.dist(jt)}return!0}function qf(A){for(var z=0,Z=0;Z<A.length-1;Z++)z+=A[Z].dist(A[Z+1]);return z}function Hf(A,z,Z){return A?.6*z*Z:0}function Gf(A,z){return Math.max(A?A.right-A.left:0,z?z.right-z.left:0)}function Jp(A,z,Z,le,Te,Ce){for(var je=Hf(Z,Te,Ce),Ke=Gf(Z,le)*Ce,st=0,yt=qf(A)/2,_t=0;_t<A.length-1;_t++){var It=A[_t],jt=A[_t+1],Ft=It.dist(jt);if(st+Ft>yt){var nn=(yt-st)/Ft,an=Pr(It.x,jt.x,nn),_n=Pr(It.y,jt.y,nn),yn=new ql(an,_n,jt.angleTo(It),_t);return yn._round(),!je||Vf(A,yn,Ke,je,z)?yn:void 0}st+=Ft}}function $p(A,z,Z,le,Te,Ce,je,Ke,st){var yt=Hf(le,Ce,je),_t=Gf(le,Te),It=_t*je,jt=A[0].x===0||A[0].x===st||A[0].y===0||A[0].y===st;return z-It<z/4&&(z=It+z/4),Wf(A,jt?z/2*Ke%z:(_t/2+2*Ce)*je*Ke%z,z,yt,Z,It,jt,!1,st)}function Wf(A,z,Z,le,Te,Ce,je,Ke,st){for(var yt=Ce/2,_t=qf(A),It=0,jt=z-Z,Ft=[],nn=0;nn<A.length-1;nn++){for(var an=A[nn],_n=A[nn+1],yn=an.dist(_n),In=_n.angleTo(an);jt+Z<It+yn;){var zn=((jt+=Z)-It)/yn,qn=Pr(an.x,_n.x,zn),Wn=Pr(an.y,_n.y,zn);if(qn>=0&&qn<st&&Wn>=0&&Wn<st&&jt-yt>=0&&jt+yt<=_t){var nr=new ql(qn,Wn,In,nn);nr._round(),le&&!Vf(A,nr,Ce,le,Te)||Ft.push(nr)}}It+=yn}return Ke||Ft.length||je||(Ft=Wf(A,It/2,Z,le,Te,Ce,je,!0,st)),Ft}function Yf(A,z,Z,le,Te){for(var Ce=[],je=0;je<A.length;je++)for(var Ke=A[je],st=void 0,yt=0;yt<Ke.length-1;yt++){var _t=Ke[yt],It=Ke[yt+1];_t.x<z&&It.x<z||(_t.x<z?_t=new t(z,_t.y+(It.y-_t.y)*((z-_t.x)/(It.x-_t.x)))._round():It.x<z&&(It=new t(z,_t.y+(It.y-_t.y)*((z-_t.x)/(It.x-_t.x)))._round()),_t.y<Z&&It.y<Z||(_t.y<Z?_t=new t(_t.x+(It.x-_t.x)*((Z-_t.y)/(It.y-_t.y)),Z)._round():It.y<Z&&(It=new t(_t.x+(It.x-_t.x)*((Z-_t.y)/(It.y-_t.y)),Z)._round()),_t.x>=le&&It.x>=le||(_t.x>=le?_t=new t(le,_t.y+(It.y-_t.y)*((le-_t.x)/(It.x-_t.x)))._round():It.x>=le&&(It=new t(le,_t.y+(It.y-_t.y)*((le-_t.x)/(It.x-_t.x)))._round()),_t.y>=Te&&It.y>=Te||(_t.y>=Te?_t=new t(_t.x+(It.x-_t.x)*((Te-_t.y)/(It.y-_t.y)),Te)._round():It.y>=Te&&(It=new t(_t.x+(It.x-_t.x)*((Te-_t.y)/(It.y-_t.y)),Te)._round()),st&&_t.equals(st[st.length-1])||(st=[_t],Ce.push(st)),st.push(It)))))}return Ce}var Hl=wo;function Zf(A,z,Z,le){var Te=[],Ce=A.image,je=Ce.pixelRatio,Ke=Ce.paddedRect.w-2*Hl,st=Ce.paddedRect.h-2*Hl,yt=A.right-A.left,_t=A.bottom-A.top,It=Ce.stretchX||[[0,Ke]],jt=Ce.stretchY||[[0,st]],Ft=function(fi,Ti){return fi+Ti[1]-Ti[0]},nn=It.reduce(Ft,0),an=jt.reduce(Ft,0),_n=Ke-nn,yn=st-an,In=0,zn=nn,qn=0,Wn=an,nr=0,pr=_n,cr=0,yr=yn;if(Ce.content&&le){var _r=Ce.content;In=Ku(It,0,_r[0]),qn=Ku(jt,0,_r[1]),zn=Ku(It,_r[0],_r[2]),Wn=Ku(jt,_r[1],_r[3]),nr=_r[0]-In,cr=_r[1]-qn,pr=_r[2]-_r[0]-zn,yr=_r[3]-_r[1]-Wn}var Dr=function(fi,Ti,Si,Ei){var yi=Ju(fi.stretch-In,zn,yt,A.left),ta=$u(fi.fixed-nr,pr,fi.stretch,nn),Pi=Ju(Ti.stretch-qn,Wn,_t,A.top),pa=$u(Ti.fixed-cr,yr,Ti.stretch,an),Ma=Ju(Si.stretch-In,zn,yt,A.left),ya=$u(Si.fixed-nr,pr,Si.stretch,nn),Ya=Ju(Ei.stretch-qn,Wn,_t,A.top),xa=$u(Ei.fixed-cr,yr,Ei.stretch,an),aa=new t(yi,Pi),ba=new t(Ma,Pi),da=new t(Ma,Ya),oa=new t(yi,Ya),Nr=new t(ta/je,pa/je),Kr=new t(ya/je,xa/je),ji=z*Math.PI/180;if(ji){var vi=Math.sin(ji),zi=Math.cos(ji),Oi=[zi,-vi,vi,zi];aa._matMult(Oi),ba._matMult(Oi),oa._matMult(Oi),da._matMult(Oi)}var ei=fi.stretch+fi.fixed,Ui=Si.stretch+Si.fixed,Za=Ti.stretch+Ti.fixed,ko=Ei.stretch+Ei.fixed;return{tl:aa,tr:ba,bl:oa,br:da,tex:{x:Ce.paddedRect.x+Hl+ei,y:Ce.paddedRect.y+Hl+Za,w:Ui-ei,h:ko-Za},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Nr,pixelOffsetBR:Kr,minFontScaleX:pr/je/yt,minFontScaleY:yr/je/_t,isSDF:Z}};if(le&&(Ce.stretchX||Ce.stretchY))for(var Sr=Xf(It,_n,nn),zr=Xf(jt,yn,an),Lr=0;Lr<Sr.length-1;Lr++)for(var Mr=Sr[Lr],Yr=Sr[Lr+1],Br=0;Br<zr.length-1;Br++){var mi=zr[Br],Ir=zr[Br+1];Te.push(Dr(Mr,mi,Yr,Ir))}else Te.push(Dr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ke+1},{fixed:0,stretch:st+1}));return Te}function Ku(A,z,Z){for(var le=0,Te=0,Ce=A;Te<Ce.length;Te+=1){var je=Ce[Te];le+=Math.max(z,Math.min(Z,je[1]))-Math.max(z,Math.min(Z,je[0]))}return le}function Xf(A,z,Z){for(var le=[{fixed:-Hl,stretch:0}],Te=0,Ce=A;Te<Ce.length;Te+=1){var je=Ce[Te],Ke=je[0],st=je[1],yt=le[le.length-1];le.push({fixed:Ke-yt.stretch,stretch:yt.stretch}),le.push({fixed:Ke-yt.stretch,stretch:yt.stretch+(st-Ke)})}return le.push({fixed:z+Hl,stretch:Z}),le}function Ju(A,z,Z,le){return A/z*Z+le}function $u(A,z,Z,le){return A-z*Z/le}var Qu=function(A,z,Z,le,Te,Ce,je,Ke,st,yt){if(this.boxStartIndex=A.length,st){var _t=Ce.top,It=Ce.bottom,jt=Ce.collisionPadding;jt&&(_t-=jt[1],It+=jt[3]);var Ft=It-_t;Ft>0&&(Ft=Math.max(10,Ft),this.circleDiameter=Ft)}else{var nn=Ce.top*je-Ke,an=Ce.bottom*je+Ke,_n=Ce.left*je-Ke,yn=Ce.right*je+Ke,In=Ce.collisionPadding;if(In&&(_n-=In[0]*je,nn-=In[1]*je,yn+=In[2]*je,an+=In[3]*je),yt){var zn=new t(_n,nn),qn=new t(yn,nn),Wn=new t(_n,an),nr=new t(yn,an),pr=yt*Math.PI/180;zn._rotate(pr),qn._rotate(pr),Wn._rotate(pr),nr._rotate(pr),_n=Math.min(zn.x,qn.x,Wn.x,nr.x),yn=Math.max(zn.x,qn.x,Wn.x,nr.x),nn=Math.min(zn.y,qn.y,Wn.y,nr.y),an=Math.max(zn.y,qn.y,Wn.y,nr.y)}A.emplaceBack(z.x,z.y,_n,nn,yn,an,Z,le,Te)}this.boxEndIndex=A.length},Gl=function(A,z){if(A===void 0&&(A=[]),z===void 0&&(z=Qp),this.data=A,this.length=this.data.length,this.compare=z,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function Qp(A,z){return A<z?-1:A>z?1:0}function ed(A,z,Z){Z===void 0&&(Z=!1);for(var le=1/0,Te=1/0,Ce=-1/0,je=-1/0,Ke=A[0],st=0;st<Ke.length;st++){var yt=Ke[st];(!st||yt.x<le)&&(le=yt.x),(!st||yt.y<Te)&&(Te=yt.y),(!st||yt.x>Ce)&&(Ce=yt.x),(!st||yt.y>je)&&(je=yt.y)}var _t=Ce-le,It=je-Te,jt=Math.min(_t,It),Ft=jt/2,nn=new Gl([],td);if(jt===0)return new t(le,Te);for(var an=le;an<Ce;an+=jt)for(var _n=Te;_n<je;_n+=jt)nn.push(new Wl(an+Ft,_n+Ft,Ft,A));for(var yn=function(qn){for(var Wn=0,nr=0,pr=0,cr=qn[0],yr=0,_r=cr.length,Dr=_r-1;yr<_r;Dr=yr++){var Sr=cr[yr],zr=cr[Dr],Lr=Sr.x*zr.y-zr.x*Sr.y;nr+=(Sr.x+zr.x)*Lr,pr+=(Sr.y+zr.y)*Lr,Wn+=3*Lr}return new Wl(nr/Wn,pr/Wn,0,qn)}(A),In=nn.length;nn.length;){var zn=nn.pop();(zn.d>yn.d||!yn.d)&&(yn=zn,Z&&console.log("found best %d after %d probes",Math.round(1e4*zn.d)/1e4,In)),zn.max-yn.d<=z||(Ft=zn.h/2,nn.push(new Wl(zn.p.x-Ft,zn.p.y-Ft,Ft,A)),nn.push(new Wl(zn.p.x+Ft,zn.p.y-Ft,Ft,A)),nn.push(new Wl(zn.p.x-Ft,zn.p.y+Ft,Ft,A)),nn.push(new Wl(zn.p.x+Ft,zn.p.y+Ft,Ft,A)),In+=4)}return Z&&(console.log("num probes: "+In),console.log("best distance: "+yn.d)),yn.p}function td(A,z){return z.max-A.max}function Wl(A,z,Z,le){this.p=new t(A,z),this.h=Z,this.d=function(Te,Ce){for(var je=!1,Ke=1/0,st=0;st<Ce.length;st++)for(var yt=Ce[st],_t=0,It=yt.length,jt=It-1;_t<It;jt=_t++){var Ft=yt[_t],nn=yt[jt];Ft.y>Te.y!=nn.y>Te.y&&Te.x<(nn.x-Ft.x)*(Te.y-Ft.y)/(nn.y-Ft.y)+Ft.x&&(je=!je),Ke=Math.min(Ke,Du(Te,Ft,nn))}return(je?1:-1)*Math.sqrt(Ke)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}Gl.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Gl.prototype.pop=function(){if(this.length!==0){var A=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),A}},Gl.prototype.peek=function(){return this.data[0]},Gl.prototype._up=function(A){for(var z=this.data,Z=this.compare,le=z[A];A>0;){var Te=A-1>>1,Ce=z[Te];if(Z(le,Ce)>=0)break;z[A]=Ce,A=Te}z[A]=le},Gl.prototype._down=function(A){for(var z=this.data,Z=this.compare,le=this.length>>1,Te=z[A];A<le;){var Ce=1+(A<<1),je=z[Ce],Ke=Ce+1;if(Ke<this.length&&Z(z[Ke],je)<0&&(Ce=Ke,je=z[Ke]),Z(je,Te)>=0)break;z[A]=je,A=Ce}z[A]=Te};var Yl=7,Nc=Number.POSITIVE_INFINITY;function Kf(A,z){return z[1]!==Nc?function(Z,le,Te){var Ce=0,je=0;switch(le=Math.abs(le),Te=Math.abs(Te),Z){case"top-right":case"top-left":case"top":je=Te-Yl;break;case"bottom-right":case"bottom-left":case"bottom":je=-Te+Yl}switch(Z){case"top-right":case"bottom-right":case"right":Ce=-le;break;case"top-left":case"bottom-left":case"left":Ce=le}return[Ce,je]}(A,z[0],z[1]):function(Z,le){var Te=0,Ce=0;le<0&&(le=0);var je=le/Math.sqrt(2);switch(Z){case"top-right":case"top-left":Ce=je-Yl;break;case"bottom-right":case"bottom-left":Ce=-je+Yl;break;case"bottom":Ce=-le+Yl;break;case"top":Ce=le-Yl}switch(Z){case"top-right":case"bottom-right":Te=-je;break;case"top-left":case"bottom-left":Te=je;break;case"left":Te=le;break;case"right":Te=-le}return[Te,Ce]}(A,z[0])}function jc(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var vu=255,ml=vu*zs;function Jf(A,z,Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn){var an=function(qn,Wn,nr,pr,cr,yr,_r,Dr){for(var Sr=pr.layout.get("text-rotate").evaluate(yr,{})*Math.PI/180,zr=[],Lr=0,Mr=Wn.positionedLines;Lr<Mr.length;Lr+=1)for(var Yr=Mr[Lr],Br=0,mi=Yr.positionedGlyphs;Br<mi.length;Br+=1){var Ir=mi[Br];if(Ir.rect){var fi=Ir.rect||{},Ti=If+1,Si=!0,Ei=1,yi=0,ta=(cr||Dr)&&Ir.vertical,Pi=Ir.metrics.advance*Ir.scale/2;if(Dr&&Wn.verticalizable){var pa=(Ir.scale-1)*ma,Ma=(ma-Ir.metrics.width*Ir.scale)/2;yi=Yr.lineOffset/2-(Ir.imageName?-Ma:pa)}if(Ir.imageName){var ya=_r[Ir.imageName];Si=ya.sdf,Ei=ya.pixelRatio,Ti=wo/Ei}var Ya=cr?[Ir.x+Pi,Ir.y]:[0,0],xa=cr?[0,0]:[Ir.x+Pi+nr[0],Ir.y+nr[1]-yi],aa=[0,0];ta&&(aa=xa,xa=[0,0]);var ba=(Ir.metrics.left-Ti)*Ir.scale-Pi+xa[0],da=(-Ir.metrics.top-Ti)*Ir.scale+xa[1],oa=ba+fi.w*Ir.scale/Ei,Nr=da+fi.h*Ir.scale/Ei,Kr=new t(ba,da),ji=new t(oa,da),vi=new t(ba,Nr),zi=new t(oa,Nr);if(ta){var Oi=new t(-Pi,Pi-gu),ei=-Math.PI/2,Ui=ma/2-Pi,Za=Ir.imageName?Ui:0,ko=new t(5-gu-Ui,-Za),Ra=new(Function.prototype.bind.apply(t,[null].concat(aa)));Kr._rotateAround(ei,Oi)._add(ko)._add(Ra),ji._rotateAround(ei,Oi)._add(ko)._add(Ra),vi._rotateAround(ei,Oi)._add(ko)._add(Ra),zi._rotateAround(ei,Oi)._add(ko)._add(Ra)}if(Sr){var Ds=Math.sin(Sr),rl=Math.cos(Sr),ga=[rl,-Ds,Ds,rl];Kr._matMult(ga),ji._matMult(ga),vi._matMult(ga),zi._matMult(ga)}var Rs=new t(0,0),xs=new t(0,0);zr.push({tl:Kr,tr:ji,bl:vi,br:zi,tex:fi,writingMode:Wn.writingMode,glyphOffset:Ya,sectionIndex:Ir.sectionIndex,isSDF:Si,pixelOffsetTL:Rs,pixelOffsetBR:xs,minFontScaleX:0,minFontScaleY:0})}}return zr}(0,Z,Ke,Te,Ce,je,le,A.allowVerticalPlacement),_n=A.textSizeData,yn=null;_n.kind==="source"?(yn=[zs*Te.layout.get("text-size").evaluate(je,{})])[0]>ml&&E(A.layerIds[0]+': Value for "text-size" is >= '+vu+'. Reduce your "text-size".'):_n.kind==="composite"&&((yn=[zs*Ft.compositeTextSizes[0].evaluate(je,{},nn),zs*Ft.compositeTextSizes[1].evaluate(je,{},nn)])[0]>ml||yn[1]>ml)&&E(A.layerIds[0]+': Value for "text-size" is >= '+vu+'. Reduce your "text-size".'),A.addSymbols(A.text,an,yn,Ke,Ce,je,yt,z,st.lineStartIndex,st.lineLength,jt,nn);for(var In=0,zn=_t;In<zn.length;In+=1)It[zn[In]]=A.text.placedSymbolArray.length-1;return 4*an.length}function $f(A){for(var z in A)return A[z];return null}function nd(A,z,Z,le){var Te=A.compareText;if(z in Te){for(var Ce=Te[z],je=Ce.length-1;je>=0;je--)if(le.dist(Ce[je])<Z)return!0}else Te[z]=[];return Te[z].push(le),!1}var rd=Nl.VectorTileFeature.types,id=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ec(A,z,Z,le,Te,Ce,je,Ke,st,yt,_t,It,jt){var Ft=Ke?Math.min(ml,Math.round(Ke[0])):0,nn=Ke?Math.min(ml,Math.round(Ke[1])):0;A.emplaceBack(z,Z,Math.round(32*le),Math.round(32*Te),Ce,je,(Ft<<1)+(st?1:0),nn,16*yt,16*_t,256*It,256*jt)}function Uc(A,z,Z){A.emplaceBack(z.x,z.y,Z),A.emplaceBack(z.x,z.y,Z),A.emplaceBack(z.x,z.y,Z),A.emplaceBack(z.x,z.y,Z)}function ad(A){for(var z=0,Z=A.sections;z<Z.length;z+=1)if(ra(Z[z].text))return!0;return!1}var Zl=function(A){this.layoutVertexArray=new G,this.indexArray=new xe,this.programConfigurations=A,this.segments=new Nn,this.dynamicLayoutVertexArray=new q,this.opacityVertexArray=new L,this.placedSymbolArray=new Et};Zl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Zl.prototype.upload=function(A,z,Z,le){this.isEmpty()||(Z&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Op.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Pp.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,id,!0),this.opacityVertexBuffer.itemSize=1),(Z||le)&&this.programConfigurations.upload(A))},Zl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},wr("SymbolBuffers",Zl);var mu=function(A,z,Z){this.layoutVertexArray=new A,this.layoutAttributes=z,this.indexArray=new Z,this.segments=new Nn,this.collisionVertexArray=new ue};mu.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,Ip.members,!0)},mu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},wr("CollisionBuffers",mu);var ci=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Tc([]),this.placementViewportMatrix=Tc([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bc(this.zoom,z["text-size"]),this.iconSizeData=Bc(this.zoom,z["icon-size"]);var Z=this.layers[0].layout,le=Z.get("symbol-sort-key"),Te=Z.get("symbol-z-order");this.canOverlap=Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement"),this.sortFeaturesByKey=Te!=="viewport-y"&&le.constantOr(1)!==void 0;var Ce=Te==="viewport-y"||Te==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ce&&this.canOverlap,Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(je){return Vo[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=A.sourceID};ci.prototype.createArrays=function(){this.text=new Zl(new Ii(this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Zl(new Ii(this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Bt,this.lineVertexArray=new fn,this.symbolInstances=new qt},ci.prototype.calculateGlyphDependencies=function(A,z,Z,le,Te){for(var Ce=0;Ce<A.length;Ce++)if(z[A.charCodeAt(Ce)]=!0,(Z||le)&&Te){var je=hu[A.charAt(Ce)];je&&(z[je.charCodeAt(0)]=!0)}},ci.prototype.populate=function(A,z,Z){var le=this.layers[0],Te=le.layout,Ce=Te.get("text-font"),je=Te.get("text-field"),Ke=Te.get("icon-image"),st=(je.value.kind!=="constant"||je.value.value instanceof Pn&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Ce.value.kind!=="constant"||Ce.value.value.length>0),yt=Ke.value.kind!=="constant"||!!Ke.value.value||Object.keys(Ke.parameters).length>0,_t=Te.get("symbol-sort-key");if(this.features=[],st||yt){for(var It=z.iconDependencies,jt=z.glyphDependencies,Ft=z.availableImages,nn=new Vr(this.zoom),an=0,_n=A;an<_n.length;an+=1){var yn=_n[an],In=yn.feature,zn=yn.id,qn=yn.index,Wn=yn.sourceLayerIndex,nr=le._featureFilter.needGeometry,pr=_i(In,nr);if(le._featureFilter.filter(nn,pr,Z)){nr||(pr.geometry=_o(In));var cr=void 0;if(st){var yr=le.getValueAndResolveTokens("text-field",pr,Z,Ft),_r=Pn.factory(yr);ad(_r)&&(this.hasRTLText=!0),(!this.hasRTLText||ps()==="unavailable"||this.hasRTLText&&fa.isParsed())&&(cr=Dp(_r,le,pr))}var Dr=void 0;if(yt){var Sr=le.getValueAndResolveTokens("icon-image",pr,Z,Ft);Dr=Sr instanceof jn?Sr:jn.fromString(Sr)}if(cr||Dr){var zr=this.sortFeaturesByKey?_t.evaluate(pr,{},Z):void 0,Lr={id:zn,text:cr,icon:Dr,index:qn,sourceLayerIndex:Wn,geometry:pr.geometry,properties:In.properties,type:rd[In.type],sortKey:zr};if(this.features.push(Lr),Dr&&(It[Dr.name]=!0),cr){var Mr=Ce.evaluate(pr,{},Z).join(","),Yr=Te.get("text-rotation-alignment")==="map"&&Te.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Vo.vertical)>=0;for(var Br=0,mi=cr.sections;Br<mi.length;Br+=1){var Ir=mi[Br];if(Ir.image)It[Ir.image.name]=!0;else{var fi=Ls(cr.toString()),Ti=Ir.fontStack||Mr,Si=jt[Ti]=jt[Ti]||{};this.calculateGlyphDependencies(Ir.text,Si,Yr,this.allowVerticalPlacement,fi)}}}}}}Te.get("symbol-placement")==="line"&&(this.features=function(Ei){var yi={},ta={},Pi=[],pa=0;function Ma(zi){Pi.push(Ei[zi]),pa++}function ya(zi,Oi,ei){var Ui=ta[zi];return delete ta[zi],ta[Oi]=Ui,Pi[Ui].geometry[0].pop(),Pi[Ui].geometry[0]=Pi[Ui].geometry[0].concat(ei[0]),Ui}function Ya(zi,Oi,ei){var Ui=yi[Oi];return delete yi[Oi],yi[zi]=Ui,Pi[Ui].geometry[0].shift(),Pi[Ui].geometry[0]=ei[0].concat(Pi[Ui].geometry[0]),Ui}function xa(zi,Oi,ei){var Ui=ei?Oi[0][Oi[0].length-1]:Oi[0][0];return zi+":"+Ui.x+":"+Ui.y}for(var aa=0;aa<Ei.length;aa++){var ba=Ei[aa],da=ba.geometry,oa=ba.text?ba.text.toString():null;if(oa){var Nr=xa(oa,da),Kr=xa(oa,da,!0);if(Nr in ta&&Kr in yi&&ta[Nr]!==yi[Kr]){var ji=Ya(Nr,Kr,da),vi=ya(Nr,Kr,Pi[ji].geometry);delete yi[Nr],delete ta[Kr],ta[xa(oa,Pi[vi].geometry,!0)]=vi,Pi[ji].geometry=null}else Nr in ta?ya(Nr,Kr,da):Kr in yi?Ya(Nr,Kr,da):(Ma(aa),yi[Nr]=pa-1,ta[Kr]=pa-1)}else Ma(aa)}return Pi.filter(function(zi){return zi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ei,yi){return Ei.sortKey-yi.sortKey})}},ci.prototype.update=function(A,z,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,z,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(A,z,this.layers,Z))},ci.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ci.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ci.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ci.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ci.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ci.prototype.addToLineVertexArray=function(A,z){var Z=this.lineVertexArray.length;if(A.segment!==void 0){for(var le=A.dist(z[A.segment+1]),Te=A.dist(z[A.segment]),Ce={},je=A.segment+1;je<z.length;je++)Ce[je]={x:z[je].x,y:z[je].y,tileUnitDistanceFromAnchor:le},je<z.length-1&&(le+=z[je+1].dist(z[je]));for(var Ke=A.segment||0;Ke>=0;Ke--)Ce[Ke]={x:z[Ke].x,y:z[Ke].y,tileUnitDistanceFromAnchor:Te},Ke>0&&(Te+=z[Ke-1].dist(z[Ke]));for(var st=0;st<z.length;st++){var yt=Ce[st];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},ci.prototype.addSymbols=function(A,z,Z,le,Te,Ce,je,Ke,st,yt,_t,It){for(var jt=A.indexArray,Ft=A.layoutVertexArray,nn=A.segments.prepareSegment(4*z.length,Ft,jt,this.canOverlap?Ce.sortKey:void 0),an=this.glyphOffsetArray.length,_n=nn.vertexLength,yn=this.allowVerticalPlacement&&je===Vo.vertical?Math.PI/2:0,In=Ce.text&&Ce.text.sections,zn=0;zn<z.length;zn++){var qn=z[zn],Wn=qn.tl,nr=qn.tr,pr=qn.bl,cr=qn.br,yr=qn.tex,_r=qn.pixelOffsetTL,Dr=qn.pixelOffsetBR,Sr=qn.minFontScaleX,zr=qn.minFontScaleY,Lr=qn.glyphOffset,Mr=qn.isSDF,Yr=qn.sectionIndex,Br=nn.vertexLength,mi=Lr[1];ec(Ft,Ke.x,Ke.y,Wn.x,mi+Wn.y,yr.x,yr.y,Z,Mr,_r.x,_r.y,Sr,zr),ec(Ft,Ke.x,Ke.y,nr.x,mi+nr.y,yr.x+yr.w,yr.y,Z,Mr,Dr.x,_r.y,Sr,zr),ec(Ft,Ke.x,Ke.y,pr.x,mi+pr.y,yr.x,yr.y+yr.h,Z,Mr,_r.x,Dr.y,Sr,zr),ec(Ft,Ke.x,Ke.y,cr.x,mi+cr.y,yr.x+yr.w,yr.y+yr.h,Z,Mr,Dr.x,Dr.y,Sr,zr),Uc(A.dynamicLayoutVertexArray,Ke,yn),jt.emplaceBack(Br,Br+1,Br+2),jt.emplaceBack(Br+1,Br+2,Br+3),nn.vertexLength+=4,nn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lr[0]),zn!==z.length-1&&Yr===z[zn+1].sectionIndex||A.programConfigurations.populatePaintArrays(Ft.length,Ce,Ce.index,{},It,In&&In[Yr])}A.placedSymbolArray.emplaceBack(Ke.x,Ke.y,an,this.glyphOffsetArray.length-an,_n,st,yt,Ke.segment,Z?Z[0]:0,Z?Z[1]:0,le[0],le[1],je,0,!1,0,_t)},ci.prototype._addCollisionDebugVertex=function(A,z,Z,le,Te,Ce){return z.emplaceBack(0,0),A.emplaceBack(Z.x,Z.y,le,Te,Math.round(Ce.x),Math.round(Ce.y))},ci.prototype.addCollisionDebugVertices=function(A,z,Z,le,Te,Ce,je){var Ke=Te.segments.prepareSegment(4,Te.layoutVertexArray,Te.indexArray),st=Ke.vertexLength,yt=Te.layoutVertexArray,_t=Te.collisionVertexArray,It=je.anchorX,jt=je.anchorY;this._addCollisionDebugVertex(yt,_t,Ce,It,jt,new t(A,z)),this._addCollisionDebugVertex(yt,_t,Ce,It,jt,new t(Z,z)),this._addCollisionDebugVertex(yt,_t,Ce,It,jt,new t(Z,le)),this._addCollisionDebugVertex(yt,_t,Ce,It,jt,new t(A,le)),Ke.vertexLength+=4;var Ft=Te.indexArray;Ft.emplaceBack(st,st+1),Ft.emplaceBack(st+1,st+2),Ft.emplaceBack(st+2,st+3),Ft.emplaceBack(st+3,st),Ke.primitiveLength+=4},ci.prototype.addDebugCollisionBoxes=function(A,z,Z,le){for(var Te=A;Te<z;Te++){var Ce=this.collisionBoxArray.get(Te),je=Ce.x1,Ke=Ce.y1,st=Ce.x2,yt=Ce.y2;this.addCollisionDebugVertices(je,Ke,st,yt,le?this.textCollisionBox:this.iconCollisionBox,Ce.anchorPoint,Z)}},ci.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mu(J,Mf.members,lt),this.iconCollisionBox=new mu(J,Mf.members,lt);for(var A=0;A<this.symbolInstances.length;A++){var z=this.symbolInstances.get(A);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},ci.prototype._deserializeCollisionBoxesForSymbol=function(A,z,Z,le,Te,Ce,je,Ke,st){for(var yt={},_t=z;_t<Z;_t++){var It=A.get(_t);yt.textBox={x1:It.x1,y1:It.y1,x2:It.x2,y2:It.y2,anchorPointX:It.anchorPointX,anchorPointY:It.anchorPointY},yt.textFeatureIndex=It.featureIndex;break}for(var jt=le;jt<Te;jt++){var Ft=A.get(jt);yt.verticalTextBox={x1:Ft.x1,y1:Ft.y1,x2:Ft.x2,y2:Ft.y2,anchorPointX:Ft.anchorPointX,anchorPointY:Ft.anchorPointY},yt.verticalTextFeatureIndex=Ft.featureIndex;break}for(var nn=Ce;nn<je;nn++){var an=A.get(nn);yt.iconBox={x1:an.x1,y1:an.y1,x2:an.x2,y2:an.y2,anchorPointX:an.anchorPointX,anchorPointY:an.anchorPointY},yt.iconFeatureIndex=an.featureIndex;break}for(var _n=Ke;_n<st;_n++){var yn=A.get(_n);yt.verticalIconBox={x1:yn.x1,y1:yn.y1,x2:yn.x2,y2:yn.y2,anchorPointX:yn.anchorPointX,anchorPointY:yn.anchorPointY},yt.verticalIconFeatureIndex=yn.featureIndex;break}return yt},ci.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var Z=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},ci.prototype.hasTextData=function(){return this.text.segments.get().length>0},ci.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ci.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ci.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ci.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ci.prototype.addIndicesForPlacedSymbol=function(A,z){for(var Z=A.placedSymbolArray.get(z),le=Z.vertexStartIndex+4*Z.numGlyphs,Te=Z.vertexStartIndex;Te<le;Te+=4)A.indexArray.emplaceBack(Te,Te+1,Te+2),A.indexArray.emplaceBack(Te+1,Te+2,Te+3)},ci.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var z=Math.sin(A),Z=Math.cos(A),le=[],Te=[],Ce=[],je=0;je<this.symbolInstances.length;++je){Ce.push(je);var Ke=this.symbolInstances.get(je);le.push(0|Math.round(z*Ke.anchorX+Z*Ke.anchorY)),Te.push(Ke.featureIndex)}return Ce.sort(function(st,yt){return le[st]-le[yt]||Te[yt]-Te[st]}),Ce},ci.prototype.addToSortKeyRanges=function(A,z){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===z?Z.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:A,symbolInstanceEnd:A+1})},ci.prototype.sortFeatures=function(A){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,le=this.symbolInstanceIndexes;Z<le.length;Z+=1){var Te=le[Z],Ce=this.symbolInstances.get(Te);this.featureSortOrder.push(Ce.featureIndex),[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(function(je,Ke,st){je>=0&&st.indexOf(je)===Ke&&z.addIndicesForPlacedSymbol(z.text,je)}),Ce.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ce.verticalPlacedTextSymbolIndex),Ce.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ce.placedIconSymbolIndex),Ce.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ce.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},wr("SymbolBucket",ci,{omit:["layers","collisionBoxArray","features","compareText"]}),ci.MAX_GLYPHS=65535,ci.addDynamicAttributes=Uc;var od=new Li({"symbol-placement":new kr(Ge.layout_symbol["symbol-placement"]),"symbol-spacing":new kr(Ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kr(Ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Cr(Ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kr(Ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kr(Ge.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new kr(Ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new kr(Ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kr(Ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Cr(Ge.layout_symbol["icon-size"]),"icon-text-fit":new kr(Ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kr(Ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Cr(Ge.layout_symbol["icon-image"]),"icon-rotate":new Cr(Ge.layout_symbol["icon-rotate"]),"icon-padding":new kr(Ge.layout_symbol["icon-padding"]),"icon-keep-upright":new kr(Ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Cr(Ge.layout_symbol["icon-offset"]),"icon-anchor":new Cr(Ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kr(Ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kr(Ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kr(Ge.layout_symbol["text-rotation-alignment"]),"text-field":new Cr(Ge.layout_symbol["text-field"]),"text-font":new Cr(Ge.layout_symbol["text-font"]),"text-size":new Cr(Ge.layout_symbol["text-size"]),"text-max-width":new Cr(Ge.layout_symbol["text-max-width"]),"text-line-height":new kr(Ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Cr(Ge.layout_symbol["text-letter-spacing"]),"text-justify":new Cr(Ge.layout_symbol["text-justify"]),"text-radial-offset":new Cr(Ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kr(Ge.layout_symbol["text-variable-anchor"]),"text-anchor":new Cr(Ge.layout_symbol["text-anchor"]),"text-max-angle":new kr(Ge.layout_symbol["text-max-angle"]),"text-writing-mode":new kr(Ge.layout_symbol["text-writing-mode"]),"text-rotate":new Cr(Ge.layout_symbol["text-rotate"]),"text-padding":new kr(Ge.layout_symbol["text-padding"]),"text-keep-upright":new kr(Ge.layout_symbol["text-keep-upright"]),"text-transform":new Cr(Ge.layout_symbol["text-transform"]),"text-offset":new Cr(Ge.layout_symbol["text-offset"]),"text-allow-overlap":new kr(Ge.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new kr(Ge.layout_symbol["text-ignore-placement"]),"text-optional":new kr(Ge.layout_symbol["text-optional"])}),Vc={paint:new Li({"icon-opacity":new Cr(Ge.paint_symbol["icon-opacity"]),"icon-color":new Cr(Ge.paint_symbol["icon-color"]),"icon-halo-color":new Cr(Ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Cr(Ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Cr(Ge.paint_symbol["icon-halo-blur"]),"icon-translate":new kr(Ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new kr(Ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Cr(Ge.paint_symbol["text-opacity"]),"text-color":new Cr(Ge.paint_symbol["text-color"],{runtimeType:rn,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Cr(Ge.paint_symbol["text-halo-color"]),"text-halo-width":new Cr(Ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Cr(Ge.paint_symbol["text-halo-blur"]),"text-translate":new kr(Ge.paint_symbol["text-translate"]),"text-translate-anchor":new kr(Ge.paint_symbol["text-translate-anchor"])}),layout:od},Xl=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Lt,this.defaultValue=A};Xl.prototype.evaluate=function(A){if(A.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(A.formattedSection))return z.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Xl.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Xl.prototype.outputDefined=function(){return!1},Xl.prototype.serialize=function(){return null},wr("FormatSectionOverride",Xl,{omit:["defaultValue"]});var sd=function(A){function z(Z){A.call(this,Z,Vc)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(Z,le){if(A.prototype.recalculate.call(this,Z,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Te=this.layout.get("text-writing-mode");if(Te){for(var Ce=[],je=0,Ke=Te;je<Ke.length;je+=1){var st=Ke[je];Ce.indexOf(st)<0&&Ce.push(st)}this.layout._values["text-writing-mode"]=Ce}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(Z,le,Te,Ce){var je=this.layout.get(Z).evaluate(le,{},Te,Ce),Ke=this._unevaluatedLayout._values[Z];return Ke.isDataDriven()||Ko(Ke.value)||!je?je:function(st,yt){return yt.replace(/{([^{}]+)}/g,function(_t,It){return It in st?String(st[It]):""})}(le.properties,je)},z.prototype.createBucket=function(Z){return new ci(Z)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var Z=0,le=Vc.paint.overridableProperties;Z<le.length;Z+=1){var Te=le[Z];if(z.hasPaintOverride(this.layout,Te)){var Ce,je=this.paint.get(Te),Ke=new Xl(je),st=new Oo(Ke,je.property.specification);Ce=je.value.kind==="constant"||je.value.kind==="source"?new Na("source",st):new ls("composite",st,je.value.zoomStops,je.value._interpolationType),this.paint._values[Te]=new li(je.property,Ce,je.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(Z,le,Te){return!(!this.layout||le.isDataDriven()||Te.isDataDriven())&&z.hasPaintOverride(this.layout,Z)},z.hasPaintOverride=function(Z,le){var Te=Z.get("text-field"),Ce=Vc.paint.properties[le],je=!1,Ke=function(_t){for(var It=0,jt=_t;It<jt.length;It+=1){var Ft=jt[It];if(Ce.overrides&&Ce.overrides.hasOverride(Ft))return void(je=!0)}};if(Te.value.kind==="constant"&&Te.value.value instanceof Pn)Ke(Te.value.value.sections);else if(Te.value.kind==="source"){var st=function(_t){if(!je)if(_t instanceof Jt&&Gn(_t.value)===Ln){var It=_t.value;Ke(It.sections)}else _t instanceof Cn?Ke(_t.sections):_t.eachChild(st)},yt=Te.value;yt._styleExpression&&st(yt._styleExpression.expression)}return je},z}(Qr),ld={paint:new Li({"background-color":new kr(Ge.paint_background["background-color"]),"background-pattern":new oo(Ge.paint_background["background-pattern"]),"background-opacity":new kr(Ge.paint_background["background-opacity"])})},ud=function(A){function z(Z){A.call(this,Z,ld)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z}(Qr),cd={paint:new Li({"raster-opacity":new kr(Ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new kr(Ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kr(Ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kr(Ge.paint_raster["raster-brightness-max"]),"raster-saturation":new kr(Ge.paint_raster["raster-saturation"]),"raster-contrast":new kr(Ge.paint_raster["raster-contrast"]),"raster-resampling":new kr(Ge.paint_raster["raster-resampling"]),"raster-fade-duration":new kr(Ge.paint_raster["raster-fade-duration"])})},fd=function(A){function z(Z){A.call(this,Z,cd)}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z}(Qr),hd=function(A){function z(Z){A.call(this,Z,{}),this.implementation=Z}return A&&(z.__proto__=A),z.prototype=Object.create(A&&A.prototype),z.prototype.constructor=z,z.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},z.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},z.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},z}(Qr),pd={circle:Yh,heatmap:Xh,hillshade:Jh,fill:dp,"fill-extrusion":Tp,line:Cp,symbol:sd,background:ud,raster:fd},Qf=r.HTMLImageElement,eh=r.HTMLCanvasElement,th=r.HTMLVideoElement,nh=r.ImageData,tc=r.ImageBitmap,El=function(A,z,Z,le){this.context=A,this.format=Z,this.texture=A.gl.createTexture(),this.update(z,le)};El.prototype.update=function(A,z,Z){var le=A.width,Te=A.height,Ce=!(this.size&&this.size[0]===le&&this.size[1]===Te||Z),je=this.context,Ke=je.gl;if(this.useMipmap=!!(z&&z.useMipmap),Ke.bindTexture(Ke.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ke.RGBA&&(!z||z.premultiply!==!1)),Ce)this.size=[le,Te],A instanceof Qf||A instanceof eh||A instanceof th||A instanceof nh||tc&&A instanceof tc?Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,this.format,Ke.UNSIGNED_BYTE,A):Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,le,Te,0,this.format,Ke.UNSIGNED_BYTE,A.data);else{var st=Z||{x:0,y:0},yt=st.x,_t=st.y;A instanceof Qf||A instanceof eh||A instanceof th||A instanceof nh||tc&&A instanceof tc?Ke.texSubImage2D(Ke.TEXTURE_2D,0,yt,_t,Ke.RGBA,Ke.UNSIGNED_BYTE,A):Ke.texSubImage2D(Ke.TEXTURE_2D,0,yt,_t,le,Te,Ke.RGBA,Ke.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ke.generateMipmap(Ke.TEXTURE_2D)},El.prototype.bind=function(A,z,Z){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),Z!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=le.LINEAR),A!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,A),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,Z||A),this.filter=A),z!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,z),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,z),this.wrap=z)},El.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},El.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var qc=function(A){var z=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};qc.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},qc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Kl=function(A,z,Z){this.target=A,this.parent=z,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new qc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?A:r};function rh(A,z,Z){var le=2*Math.PI*6378137/256/Math.pow(2,Z);return[A*le-2*Math.PI*6378137/2,z*le-2*Math.PI*6378137/2]}Kl.prototype.send=function(A,z,Z,le,Te){var Ce=this;Te===void 0&&(Te=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[je]=Z);var Ke=I(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:A,hasCallback:!!Z,targetMapId:le,mustQueue:Te,sourceMapId:this.mapId,data:Fo(z,Ke)},Ke),{cancel:function(){Z&&delete Ce.callbacks[je],Ce.target.postMessage({id:je,type:"<cancel>",targetMapId:le,sourceMapId:Ce.mapId})}}},Kl.prototype.receive=function(A){var z=A.data,Z=z.id;if(Z&&(!z.targetMapId||this.mapId===z.targetMapId))if(z.type==="<cancel>"){delete this.tasks[Z];var le=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],le&&le()}else P()||z.mustQueue?(this.tasks[Z]=z,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,z)},Kl.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),z=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(A,z)}},Kl.prototype.processTask=function(A,z){var Z=this;if(z.type==="<response>"){var le=this.callbacks[A];delete this.callbacks[A],le&&(z.error?le(ns(z.error)):le(null,ns(z.data)))}else{var Te=!1,Ce=I(this.globalScope)?void 0:[],je=z.hasCallback?function(_t,It){Te=!0,delete Z.cancelCallbacks[A],Z.target.postMessage({id:A,type:"<response>",sourceMapId:Z.mapId,error:_t?Fo(_t):null,data:Fo(It,Ce)},Ce)}:function(_t){Te=!0},Ke=null,st=ns(z.data);if(this.parent[z.type])Ke=this.parent[z.type](z.sourceMapId,st,je);else if(this.parent.getWorkerSource){var yt=z.type.split(".");Ke=this.parent.getWorkerSource(z.sourceMapId,yt[0],st.source)[yt[1]](st,je)}else je(new Error("Could not find function "+z.type));!Te&&Ke&&Ke.cancel&&(this.cancelCallbacks[A]=Ke.cancel)}},Kl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Qi=function(A,z){A&&(z?this.setSouthWest(A).setNorthEast(z):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};Qi.prototype.setNorthEast=function(A){return this._ne=A instanceof Ci?new Ci(A.lng,A.lat):Ci.convert(A),this},Qi.prototype.setSouthWest=function(A){return this._sw=A instanceof Ci?new Ci(A.lng,A.lat):Ci.convert(A),this},Qi.prototype.extend=function(A){var z,Z,le=this._sw,Te=this._ne;if(A instanceof Ci)z=A,Z=A;else{if(!(A instanceof Qi)){if(Array.isArray(A)){if(A.length===4||A.every(Array.isArray)){var Ce=A;return this.extend(Qi.convert(Ce))}var je=A;return this.extend(Ci.convert(je))}return this}if(z=A._sw,Z=A._ne,!z||!Z)return this}return le||Te?(le.lng=Math.min(z.lng,le.lng),le.lat=Math.min(z.lat,le.lat),Te.lng=Math.max(Z.lng,Te.lng),Te.lat=Math.max(Z.lat,Te.lat)):(this._sw=new Ci(z.lng,z.lat),this._ne=new Ci(Z.lng,Z.lat)),this},Qi.prototype.getCenter=function(){return new Ci((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Qi.prototype.getSouthWest=function(){return this._sw},Qi.prototype.getNorthEast=function(){return this._ne},Qi.prototype.getNorthWest=function(){return new Ci(this.getWest(),this.getNorth())},Qi.prototype.getSouthEast=function(){return new Ci(this.getEast(),this.getSouth())},Qi.prototype.getWest=function(){return this._sw.lng},Qi.prototype.getSouth=function(){return this._sw.lat},Qi.prototype.getEast=function(){return this._ne.lng},Qi.prototype.getNorth=function(){return this._ne.lat},Qi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Qi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Qi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Qi.prototype.contains=function(A){var z=Ci.convert(A),Z=z.lng,le=z.lat,Te=this._sw.lat<=le&&le<=this._ne.lat,Ce=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ce=this._sw.lng>=Z&&Z>=this._ne.lng),Te&&Ce},Qi.convert=function(A){return!A||A instanceof Qi?A:new Qi(A)};var ih=63710088e-1,Ci=function(A,z){if(isNaN(A)||isNaN(z))throw new Error("Invalid LngLat object: ("+A+", "+z+")");if(this.lng=+A,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ci.prototype.wrap=function(){return new Ci(h(this.lng,-180,180),this.lat)},Ci.prototype.toArray=function(){return[this.lng,this.lat]},Ci.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ci.prototype.distanceTo=function(A){var z=Math.PI/180,Z=this.lat*z,le=A.lat*z,Te=Math.sin(Z)*Math.sin(le)+Math.cos(Z)*Math.cos(le)*Math.cos((A.lng-this.lng)*z);return ih*Math.acos(Math.min(Te,1))},Ci.prototype.toBounds=function(A){A===void 0&&(A=0);var z=360*A/40075017,Z=z/Math.cos(Math.PI/180*this.lat);return new Qi(new Ci(this.lng-Z,this.lat-z),new Ci(this.lng+Z,this.lat+z))},Ci.convert=function(A){if(A instanceof Ci)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Ci(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Ci(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ah=2*Math.PI*ih;function oh(A){return ah*Math.cos(A*Math.PI/180)}function sh(A){return(180+A)/360}function lh(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function uh(A,z){return A/oh(z)}function Hc(A){var z=180-360*A;return 360/Math.PI*Math.atan(Math.exp(z*Math.PI/180))-90}var Ll=function(A,z,Z){Z===void 0&&(Z=0),this.x=+A,this.y=+z,this.z=+Z};Ll.fromLngLat=function(A,z){z===void 0&&(z=0);var Z=Ci.convert(A);return new Ll(sh(Z.lng),lh(Z.lat),uh(z,Z.lat))},Ll.prototype.toLngLat=function(){return new Ci(360*this.x-180,Hc(this.y))},Ll.prototype.toAltitude=function(){return A=this.z,z=this.y,A*oh(Hc(z));var A,z},Ll.prototype.meterInMercatorCoordinateUnits=function(){return 1/ah*(A=Hc(this.y),1/Math.cos(A*Math.PI/180));var A};var Cl=function(A,z,Z){this.z=A,this.x=z,this.y=Z,this.key=yu(0,A,A,z,Z)};Cl.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},Cl.prototype.url=function(A,z){var Z,le,Te,Ce,je,Ke=(Z=this.x,le=this.y,Te=this.z,Ce=rh(256*Z,256*(le=Math.pow(2,Te)-le-1),Te),je=rh(256*(Z+1),256*(le+1),Te),Ce[0]+","+Ce[1]+","+je[0]+","+je[1]),st=function(yt,_t,It){for(var jt,Ft="",nn=yt;nn>0;nn--)Ft+=(_t&(jt=1<<nn-1)?1:0)+(It&jt?2:0);return Ft}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(z==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",Ke)},Cl.prototype.getTilePoint=function(A){var z=Math.pow(2,this.z);return new t((A.x*z-this.x)*Xr,(A.y*z-this.y)*Xr)},Cl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ch=function(A,z){this.wrap=A,this.canonical=z,this.key=yu(A,z.z,z.z,z.x,z.y)},ea=function(A,z,Z,le,Te){this.overscaledZ=A,this.wrap=z,this.canonical=new Cl(Z,+le,+Te),this.key=yu(z,A,Z,le,Te)};function yu(A,z,Z,le,Te){(A*=2)<0&&(A=-1*A-1);var Ce=1<<Z;return(Ce*Ce*A+Ce*Te+le).toString(36)+Z.toString(36)+z.toString(36)}ea.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},ea.prototype.scaledTo=function(A){var z=this.canonical.z-A;return A>this.canonical.z?new ea(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ea(A,this.wrap,A,this.canonical.x>>z,this.canonical.y>>z)},ea.prototype.calculateScaledKey=function(A,z){var Z=this.canonical.z-A;return A>this.canonical.z?yu(this.wrap*+z,A,this.canonical.z,this.canonical.x,this.canonical.y):yu(this.wrap*+z,A,A,this.canonical.x>>Z,this.canonical.y>>Z)},ea.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var z=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>z&&A.canonical.y===this.canonical.y>>z},ea.prototype.children=function(A){if(this.overscaledZ>=A)return[new ea(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,Z=2*this.canonical.x,le=2*this.canonical.y;return[new ea(z,this.wrap,z,Z,le),new ea(z,this.wrap,z,Z+1,le),new ea(z,this.wrap,z,Z,le+1),new ea(z,this.wrap,z,Z+1,le+1)]},ea.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},ea.prototype.wrapped=function(){return new ea(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ea.prototype.unwrapTo=function(A){return new ea(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},ea.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ea.prototype.toUnwrapped=function(){return new ch(this.wrap,this.canonical)},ea.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ea.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new Ll(A.x-this.wrap,A.y))},wr("CanonicalTileID",Cl),wr("OverscaledTileID",ea,{omit:["posMatrix"]});var tl=function(A,z,Z){if(this.uid=A,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return E('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var le=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=Z||"mapbox";for(var Te=0;Te<le;Te++)this.data[this._idx(-1,Te)]=this.data[this._idx(0,Te)],this.data[this._idx(le,Te)]=this.data[this._idx(le-1,Te)],this.data[this._idx(Te,-1)]=this.data[this._idx(Te,0)],this.data[this._idx(Te,le)]=this.data[this._idx(Te,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};tl.prototype.get=function(A,z){var Z=new Uint8Array(this.data.buffer),le=4*this._idx(A,z);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[le],Z[le+1],Z[le+2])},tl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},tl.prototype._idx=function(A,z){if(A<-1||A>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(A+1)},tl.prototype._unpackMapbox=function(A,z,Z){return(256*A*256+256*z+Z)/10-1e4},tl.prototype._unpackTerrarium=function(A,z,Z){return 256*A+z+Z/256-32768},tl.prototype.getPixels=function(){return new lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},tl.prototype.backfillBorder=function(A,z,Z){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var le=z*this.dim,Te=z*this.dim+this.dim,Ce=Z*this.dim,je=Z*this.dim+this.dim;switch(z){case-1:le=Te-1;break;case 1:Te=le+1}switch(Z){case-1:Ce=je-1;break;case 1:je=Ce+1}for(var Ke=-z*this.dim,st=-Z*this.dim,yt=Ce;yt<je;yt++)for(var _t=le;_t<Te;_t++)this.data[this._idx(_t,yt)]=A.data[this._idx(_t+Ke,yt+st)]},wr("DEMData",tl);var nc=function(A){this._stringToNumber={},this._numberToString=[];for(var z=0;z<A.length;z++){var Z=A[z];this._stringToNumber[Z]=z,this._numberToString[z]=Z}};nc.prototype.encode=function(A){return this._stringToNumber[A]},nc.prototype.decode=function(A){return this._numberToString[A]};var rc=function(A,z,Z,le,Te){this.type="Feature",this._vectorTileFeature=A,A._z=z,A._x=Z,A._y=le,this.properties=A.properties,this.id=Te},Gc={geometry:{configurable:!0}};Gc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Gc.geometry.set=function(A){this._geometry=A},rc.prototype.toJSON=function(){var A={geometry:this.geometry};for(var z in this)z!=="_geometry"&&z!=="_vectorTileFeature"&&(A[z]=this[z]);return A},Object.defineProperties(rc.prototype,Gc);var Jl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Jl.prototype.updateState=function(A,z,Z){var le=String(z);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][le]=this.stateChanges[A][le]||{},c(this.stateChanges[A][le],Z),this.deletedStates[A]===null)for(var Te in this.deletedStates[A]={},this.state[A])Te!==le&&(this.deletedStates[A][Te]=null);else if(this.deletedStates[A]&&this.deletedStates[A][le]===null)for(var Ce in this.deletedStates[A][le]={},this.state[A][le])Z[Ce]||(this.deletedStates[A][le][Ce]=null);else for(var je in Z)this.deletedStates[A]&&this.deletedStates[A][le]&&this.deletedStates[A][le][je]===null&&delete this.deletedStates[A][le][je]},Jl.prototype.removeFeatureState=function(A,z,Z){if(this.deletedStates[A]!==null){var le=String(z);if(this.deletedStates[A]=this.deletedStates[A]||{},Z&&z!==void 0)this.deletedStates[A][le]!==null&&(this.deletedStates[A][le]=this.deletedStates[A][le]||{},this.deletedStates[A][le][Z]=null);else if(z!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][le])for(Z in this.deletedStates[A][le]={},this.stateChanges[A][le])this.deletedStates[A][le][Z]=null;else this.deletedStates[A][le]=null;else this.deletedStates[A]=null}},Jl.prototype.getState=function(A,z){var Z=String(z),le=this.state[A]||{},Te=this.stateChanges[A]||{},Ce=c({},le[Z],Te[Z]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){var je=this.deletedStates[A][z];if(je===null)return{};for(var Ke in je)delete Ce[Ke]}return Ce},Jl.prototype.initializeTileState=function(A,z){A.setFeatureState(this.state,z)},Jl.prototype.coalesceChanges=function(A,z){var Z={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var Te={};for(var Ce in this.stateChanges[le])this.state[le][Ce]||(this.state[le][Ce]={}),c(this.state[le][Ce],this.stateChanges[le][Ce]),Te[Ce]=this.state[le][Ce];Z[le]=Te}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Ke={};if(this.deletedStates[je]===null)for(var st in this.state[je])Ke[st]={},this.state[je][st]={};else for(var yt in this.deletedStates[je]){if(this.deletedStates[je][yt]===null)this.state[je][yt]={};else for(var _t=0,It=Object.keys(this.deletedStates[je][yt]);_t<It.length;_t+=1){var jt=It[_t];delete this.state[je][yt][jt]}Ke[yt]=this.state[je][yt]}Z[je]=Z[je]||{},c(Z[je],Ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var Ft in A)A[Ft].setFeatureState(Z,z)};var nl=function(A,z){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new ts(Xr,16,0),this.grid3D=new ts(Xr,16,0),this.featureIndexArray=new kn,this.promoteId=z};function fh(A,z,Z,le,Te){return b(A,function(Ce,je){var Ke=z instanceof is?z.get(je):null;return Ke&&Ke.evaluate?Ke.evaluate(Z,le,Te):Ke})}function hh(A){for(var z=1/0,Z=1/0,le=-1/0,Te=-1/0,Ce=0,je=A;Ce<je.length;Ce+=1){var Ke=je[Ce];z=Math.min(z,Ke.x),Z=Math.min(Z,Ke.y),le=Math.max(le,Ke.x),Te=Math.max(Te,Ke.y)}return{minX:z,minY:Z,maxX:le,maxY:Te}}function dd(A,z){return z-A}nl.prototype.insert=function(A,z,Z,le,Te,Ce){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,le,Te);for(var Ke=Ce?this.grid3D:this.grid,st=0;st<z.length;st++){for(var yt=z[st],_t=[1/0,1/0,-1/0,-1/0],It=0;It<yt.length;It++){var jt=yt[It];_t[0]=Math.min(_t[0],jt.x),_t[1]=Math.min(_t[1],jt.y),_t[2]=Math.max(_t[2],jt.x),_t[3]=Math.max(_t[3],jt.y)}_t[0]<Xr&&_t[1]<Xr&&_t[2]>=0&&_t[3]>=0&&Ke.insert(je,_t[0],_t[1],_t[2],_t[3])}},nl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Nl.VectorTile(new Gu(this.rawTileData)).layers,this.sourceLayerCoder=new nc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},nl.prototype.query=function(A,z,Z,le){var Te=this;this.loadVTLayers();for(var Ce=A.params||{},je=Xr/A.tileSize/A.scale,Ke=Ts(Ce.filter),st=A.queryGeometry,yt=A.queryPadding*je,_t=hh(st),It=this.grid.query(_t.minX-yt,_t.minY-yt,_t.maxX+yt,_t.maxY+yt),jt=hh(A.cameraQueryGeometry),Ft=0,nn=this.grid3D.query(jt.minX-yt,jt.minY-yt,jt.maxX+yt,jt.maxY+yt,function(qn,Wn,nr,pr){return function(cr,yr,_r,Dr,Sr){for(var zr=0,Lr=cr;zr<Lr.length;zr+=1){var Mr=Lr[zr];if(yr<=Mr.x&&_r<=Mr.y&&Dr>=Mr.x&&Sr>=Mr.y)return!0}var Yr=[new t(yr,_r),new t(yr,Sr),new t(Dr,Sr),new t(Dr,_r)];if(cr.length>2){for(var Br=0,mi=Yr;Br<mi.length;Br+=1)if(Ws(cr,mi[Br]))return!0}for(var Ir=0;Ir<cr.length-1;Ir++)if(Uh(cr[Ir],cr[Ir+1],Yr))return!0;return!1}(A.cameraQueryGeometry,qn-yt,Wn-yt,nr+yt,pr+yt)});Ft<nn.length;Ft+=1){var an=nn[Ft];It.push(an)}It.sort(dd);for(var _n,yn={},In=function(qn){var Wn=It[qn];if(Wn!==_n){_n=Wn;var nr=Te.featureIndexArray.get(Wn),pr=null;Te.loadMatchingFeature(yn,nr.bucketIndex,nr.sourceLayerIndex,nr.featureIndex,Ke,Ce.layers,Ce.availableImages,z,Z,le,function(cr,yr,_r){return pr||(pr=_o(cr)),yr.queryIntersectsFeature(st,cr,_r,pr,Te.z,A.transform,je,A.pixelPosMatrix)})}},zn=0;zn<It.length;zn++)In(zn);return yn},nl.prototype.loadMatchingFeature=function(A,z,Z,le,Te,Ce,je,Ke,st,yt,_t){var It=this.bucketLayerIDs[z];if(!Ce||function(cr,yr){for(var _r=0;_r<cr.length;_r++)if(yr.indexOf(cr[_r])>=0)return!0;return!1}(Ce,It)){var jt=this.sourceLayerCoder.decode(Z),Ft=this.vtLayers[jt].feature(le);if(Te.needGeometry){var nn=_i(Ft,!0);if(!Te.filter(new Vr(this.tileID.overscaledZ),nn,this.tileID.canonical))return}else if(!Te.filter(new Vr(this.tileID.overscaledZ),Ft))return;for(var an=this.getId(Ft,jt),_n=0;_n<It.length;_n++){var yn=It[_n];if(!(Ce&&Ce.indexOf(yn)<0)){var In=Ke[yn];if(In){var zn={};an!==void 0&&yt&&(zn=yt.getState(In.sourceLayer||"_geojsonTileLayer",an));var qn=c({},st[yn]);qn.paint=fh(qn.paint,In.paint,Ft,zn,je),qn.layout=fh(qn.layout,In.layout,Ft,zn,je);var Wn=!_t||_t(Ft,In,zn);if(Wn){var nr=new rc(Ft,this.z,this.x,this.y,an);nr.layer=qn;var pr=A[yn];pr===void 0&&(pr=A[yn]=[]),pr.push({featureIndex:le,feature:nr,intersectionZ:Wn})}}}}}},nl.prototype.lookupSymbolFeatures=function(A,z,Z,le,Te,Ce,je,Ke){var st={};this.loadVTLayers();for(var yt=Ts(Te),_t=0,It=A;_t<It.length;_t+=1){var jt=It[_t];this.loadMatchingFeature(st,Z,le,jt,yt,Ce,je,Ke,z)}return st},nl.prototype.hasLayer=function(A){for(var z=0,Z=this.bucketLayerIDs;z<Z.length;z+=1)for(var le=0,Te=Z[z];le<Te.length;le+=1)if(A===Te[le])return!0;return!1},nl.prototype.getId=function(A,z){var Z=A.id;if(this.promoteId){var le=typeof this.promoteId=="string"?this.promoteId:this.promoteId[z];typeof(Z=A.properties[le])=="boolean"&&(Z=Number(Z))}return Z},wr("FeatureIndex",nl,{omit:["rawTileData","sourceLayerCoder"]});var ha=function(A,z){this.tileID=A,this.uid=d(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ha.prototype.registerFadeDuration=function(A){var z=A+this.timeAdded;z<K.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},ha.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ha.prototype.loadVectorData=function(A,z,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var le in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(yt,_t){var It={};if(!_t)return It;for(var jt=function(){var an=nn[Ft],_n=an.layerIds.map(function(qn){return _t.getLayer(qn)}).filter(Boolean);if(_n.length!==0){an.layers=_n,an.stateDependentLayerIds&&(an.stateDependentLayers=an.stateDependentLayerIds.map(function(qn){return _n.filter(function(Wn){return Wn.id===qn})[0]}));for(var yn=0,In=_n;yn<In.length;yn+=1){var zn=In[yn];It[zn.id]=an}}},Ft=0,nn=yt;Ft<nn.length;Ft+=1)jt();return It}(A.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var Te=this.buckets[le];if(Te instanceof ci){if(this.hasSymbolBuckets=!0,!Z)break;Te.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ce in this.buckets){var je=this.buckets[Ce];if(je instanceof ci&&je.hasRTLText){this.hasRTLText=!0,fa.isLoading()||fa.isLoaded()||ps()!=="deferred"||ds();break}}for(var Ke in this.queryPadding=0,this.buckets){var st=this.buckets[Ke];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(Ke).queryRadius(st))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new wt},ha.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ha.prototype.getBucket=function(A){return this.buckets[A.id]},ha.prototype.upload=function(A){for(var z in this.buckets){var Z=this.buckets[z];Z.uploadPending()&&Z.upload(A)}var le=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new El(A,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new El(A,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},ha.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},ha.prototype.queryRenderedFeatures=function(A,z,Z,le,Te,Ce,je,Ke,st,yt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:Te,scale:Ce,tileSize:this.tileSize,pixelPosMatrix:yt,transform:Ke,params:je,queryPadding:this.queryPadding*st},A,z,Z):{}},ha.prototype.querySourceFeatures=function(A,z){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var le=Z.loadVTLayers(),Te=z?z.sourceLayer:"",Ce=le._geojsonTileLayer||le[Te];if(Ce)for(var je=Ts(z&&z.filter),Ke=this.tileID.canonical,st=Ke.z,yt=Ke.x,_t=Ke.y,It={z:st,x:yt,y:_t},jt=0;jt<Ce.length;jt++){var Ft=Ce.feature(jt);if(je.needGeometry){var nn=_i(Ft,!0);if(!je.filter(new Vr(this.tileID.overscaledZ),nn,this.tileID.canonical))continue}else if(!je.filter(new Vr(this.tileID.overscaledZ),Ft))continue;var an=Z.getId(Ft,Te),_n=new rc(Ft,st,yt,_t,an);_n.tile=It,A.push(_n)}}},ha.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ha.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ha.prototype.setExpiryData=function(A){var z=this.expirationTime;if(A.cacheControl){var Z=D(A.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var le=Date.now(),Te=!1;if(this.expirationTime>le)Te=!1;else if(z)if(this.expirationTime<z)Te=!0;else{var Ce=this.expirationTime-z;Ce?this.expirationTime=le+Math.max(Ce,3e4):Te=!0}else Te=!0;Te?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ha.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ha.prototype.setFeatureState=function(A,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(A).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(z.style.hasLayer(le)){var Te=this.buckets[le],Ce=Te.layers[0].sourceLayer||"_geojsonTileLayer",je=Z[Ce],Ke=A[Ce];if(je&&Ke&&Object.keys(Ke).length!==0){Te.update(Ke,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=z&&z.style&&z.style.getLayer(le);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(Te)))}}}},ha.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ha.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<K.now()},ha.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ha.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=K.now()+A},ha.prototype.setDependencies=function(A,z){for(var Z={},le=0,Te=z;le<Te.length;le+=1)Z[Te[le]]=!0;this.dependencies[A]=Z},ha.prototype.hasDependency=function(A,z){for(var Z=0,le=A;Z<le.length;Z+=1){var Te=le[Z],Ce=this.dependencies[Te];if(Ce){for(var je=0,Ke=z;je<Ke.length;je+=1)if(Ce[Ke[je]])return!0}}return!1};var yl=r.performance,ph=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},yl.mark(this._marks.start)};ph.prototype.finish=function(){yl.mark(this._marks.end);var A=yl.getEntriesByName(this._marks.measure);return A.length===0&&(yl.measure(this._marks.measure,this._marks.start,this._marks.end),A=yl.getEntriesByName(this._marks.measure),yl.clearMarks(this._marks.start),yl.clearMarks(this._marks.end),yl.clearMeasures(this._marks.measure)),A},o.Actor=Kl,o.AlphaImage=Sl,o.CanonicalTileID=Cl,o.CollisionBoxArray=wt,o.Color=Sn,o.DEMData=tl,o.DataConstantProperty=kr,o.DictionaryCoder=nc,o.EXTENT=Xr,o.ErrorEvent=Fe,o.EvaluationParameters=Vr,o.Event=Re,o.Evented=nt,o.FeatureIndex=nl,o.FillBucket=Ps,o.FillExtrusionBucket=Is,o.ImageAtlas=du,o.ImagePosition=Yu,o.LineBucket=Wa,o.LngLat=Ci,o.LngLatBounds=Qi,o.MercatorCoordinate=Ll,o.ONE_EM=ma,o.OverscaledTileID=ea,o.Point=t,o.Point$1=t,o.Properties=Li,o.Protobuf=Gu,o.RGBAImage=lo,o.RequestManager=fe,o.RequestPerformance=ph,o.ResourceType=ht,o.SegmentVector=Nn,o.SourceFeatureState=Jl,o.StructArrayLayout1ui2=ft,o.StructArrayLayout2f1f2i16=ne,o.StructArrayLayout2i4=jo,o.StructArrayLayout3ui6=xe,o.StructArrayLayout4i8=Qs,o.SymbolBucket=ci,o.Texture=El,o.Tile=ha,o.Transitionable=Ha,o.Uniform1f=jr,o.Uniform1i=Fr,o.Uniform2f=qr,o.Uniform3f=ui,o.Uniform4f=Ai,o.UniformColor=ia,o.UniformMatrix4f=Ji,o.UnwrappedTileID=ch,o.ValidationError=ct,o.WritingMode=Vo,o.ZoomHistory=hs,o.add=function(A,z,Z){return A[0]=z[0]+Z[0],A[1]=z[1]+Z[1],A[2]=z[2]+Z[2],A},o.addDynamicAttributes=Uc,o.asyncAll=function(A,z,Z){if(!A.length)return Z(null,[]);var le=A.length,Te=new Array(A.length),Ce=null;A.forEach(function(je,Ke){z(je,function(st,yt){st&&(Ce=st),Te[Ke]=yt,--le==0&&Z(Ce,Te)})})},o.bezier=a,o.bindAll=y,o.browser=K,o.cacheEntryPossiblyAdded=function(A){++dt>Ie&&(A.getActor().send("enforceCacheSizeLimit",ke),dt=0)},o.clamp=u,o.clearTileCache=function(A){var z=r.caches.delete(be);A&&z.catch(A).then(function(){return A()})},o.clipLine=Yf,o.clone=function(A){var z=new Uo(16);return z[0]=A[0],z[1]=A[1],z[2]=A[2],z[3]=A[3],z[4]=A[4],z[5]=A[5],z[6]=A[6],z[7]=A[7],z[8]=A[8],z[9]=A[9],z[10]=A[10],z[11]=A[11],z[12]=A[12],z[13]=A[13],z[14]=A[14],z[15]=A[15],z},o.clone$1=S,o.clone$2=function(A){var z=new Uo(3);return z[0]=A[0],z[1]=A[1],z[2]=A[2],z},o.collisionCircleLayout=zp,o.config=X,o.create=function(){var A=new Uo(16);return Uo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},o.create$1=function(){var A=new Uo(9);return Uo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},o.create$2=function(){var A=new Uo(4);return Uo!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},o.createCommonjsModule=T,o.createExpression=vo,o.createLayout=di,o.createStyleLayer=function(A){return A.type==="custom"?new hd(A):new pd[A.type](A)},o.cross=function(A,z,Z){var le=z[0],Te=z[1],Ce=z[2],je=Z[0],Ke=Z[1],st=Z[2];return A[0]=Te*st-Ce*Ke,A[1]=Ce*je-le*st,A[2]=le*Ke-Te*je,A},o.deepEqual=function A(z,Z){if(Array.isArray(z)){if(!Array.isArray(Z)||z.length!==Z.length)return!1;for(var le=0;le<z.length;le++)if(!A(z[le],Z[le]))return!1;return!0}if(typeof z=="object"&&z!==null&&Z!==null){if(typeof Z!="object"||Object.keys(z).length!==Object.keys(Z).length)return!1;for(var Te in z)if(!A(z[Te],Z[Te]))return!1;return!0}return z===Z},o.dot=function(A,z){return A[0]*z[0]+A[1]*z[1]+A[2]*z[2]},o.dot$1=function(A,z){return A[0]*z[0]+A[1]*z[1]+A[2]*z[2]+A[3]*z[3]},o.ease=l,o.emitValidationErrors=la,o.endsWith=m,o.enforceCacheSizeLimit=function(A){Be(),de&&de.then(function(z){z.keys().then(function(Z){for(var le=0;le<Z.length-A;le++)z.delete(Z[le])})})},o.evaluateSizeForFeature=jf,o.evaluateSizeForZoom=Uf,o.evaluateVariableOffset=Kf,o.evented=ca,o.extend=c,o.featureFilter=Ts,o.filterObject=f,o.fromRotation=function(A,z){var Z=Math.sin(z),le=Math.cos(z);return A[0]=le,A[1]=Z,A[2]=0,A[3]=-Z,A[4]=le,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},o.getAnchorAlignment=Fc,o.getAnchorJustification=jc,o.getArrayBuffer=Pt,o.getImage=We,o.getJSON=function(A,z){return Ot(c(A,{type:"json"}),z)},o.getRTLTextPluginStatus=ps,o.getReferrer=Je,o.getVideo=function(A,z){var Z,le,Te=r.document.createElement("video");Te.muted=!0,Te.onloadstart=function(){z(null,Te)};for(var Ce=0;Ce<A.length;Ce++){var je=r.document.createElement("source");Z=A[Ce],le=void 0,(le=r.document.createElement("a")).href=Z,le.protocol===r.document.location.protocol&&le.host===r.document.location.host||(Te.crossOrigin="Anonymous"),je.src=A[Ce],Te.appendChild(je)}return{cancel:function(){}}},o.identity=Tc,o.invert=function(A,z){var Z=z[0],le=z[1],Te=z[2],Ce=z[3],je=z[4],Ke=z[5],st=z[6],yt=z[7],_t=z[8],It=z[9],jt=z[10],Ft=z[11],nn=z[12],an=z[13],_n=z[14],yn=z[15],In=Z*Ke-le*je,zn=Z*st-Te*je,qn=Z*yt-Ce*je,Wn=le*st-Te*Ke,nr=le*yt-Ce*Ke,pr=Te*yt-Ce*st,cr=_t*an-It*nn,yr=_t*_n-jt*nn,_r=_t*yn-Ft*nn,Dr=It*_n-jt*an,Sr=It*yn-Ft*an,zr=jt*yn-Ft*_n,Lr=In*zr-zn*Sr+qn*Dr+Wn*_r-nr*yr+pr*cr;return Lr?(Lr=1/Lr,A[0]=(Ke*zr-st*Sr+yt*Dr)*Lr,A[1]=(Te*Sr-le*zr-Ce*Dr)*Lr,A[2]=(an*pr-_n*nr+yn*Wn)*Lr,A[3]=(jt*nr-It*pr-Ft*Wn)*Lr,A[4]=(st*_r-je*zr-yt*yr)*Lr,A[5]=(Z*zr-Te*_r+Ce*yr)*Lr,A[6]=(_n*qn-nn*pr-yn*zn)*Lr,A[7]=(_t*pr-jt*qn+Ft*zn)*Lr,A[8]=(je*Sr-Ke*_r+yt*cr)*Lr,A[9]=(le*_r-Z*Sr-Ce*cr)*Lr,A[10]=(nn*nr-an*qn+yn*In)*Lr,A[11]=(It*qn-_t*nr-Ft*In)*Lr,A[12]=(Ke*yr-je*Dr-st*cr)*Lr,A[13]=(Z*Dr-le*yr+Te*cr)*Lr,A[14]=(an*zn-nn*Wn-_n*In)*Lr,A[15]=(_t*Wn-It*zn+jt*In)*Lr,A):null},o.isChar=dr,o.isMapboxURL=he,o.keysDifference=function(A,z){var Z=[];for(var le in A)le in z||Z.push(le);return Z},o.makeRequest=Ot,o.mapObject=b,o.mercatorXfromLng=sh,o.mercatorYfromLat=lh,o.mercatorZfromAltitude=uh,o.mul=Hh,o.multiply=lf,o.mvt=Nl,o.nextPowerOfTwo=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},o.normalize=function(A,z){var Z=z[0],le=z[1],Te=z[2],Ce=Z*Z+le*le+Te*Te;return Ce>0&&(Ce=1/Math.sqrt(Ce)),A[0]=z[0]*Ce,A[1]=z[1]*Ce,A[2]=z[2]*Ce,A},o.number=Pr,o.offscreenCanvasSupported=vt,o.ortho=function(A,z,Z,le,Te,Ce,je){var Ke=1/(z-Z),st=1/(le-Te),yt=1/(Ce-je);return A[0]=-2*Ke,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*st,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*yt,A[11]=0,A[12]=(z+Z)*Ke,A[13]=(Te+le)*st,A[14]=(je+Ce)*yt,A[15]=1,A},o.parseGlyphPBF=function(A){return new Gu(A).readFields(Gp,[])},o.pbf=Gu,o.performSymbolLayout=function(A,z,Z,le,Te,Ce,je){A.createArrays();var Ke=512*A.overscaling;A.tilePixelRatio=Xr/Ke,A.compareText={},A.iconsNeedLinear=!1;var st=A.layers[0].layout,yt=A.layers[0]._unevaluatedLayout._values,_t={};if(A.textSizeData.kind==="composite"){var It=A.textSizeData,jt=It.minZoom,Ft=It.maxZoom;_t.compositeTextSizes=[yt["text-size"].possiblyEvaluate(new Vr(jt),je),yt["text-size"].possiblyEvaluate(new Vr(Ft),je)]}if(A.iconSizeData.kind==="composite"){var nn=A.iconSizeData,an=nn.minZoom,_n=nn.maxZoom;_t.compositeIconSizes=[yt["icon-size"].possiblyEvaluate(new Vr(an),je),yt["icon-size"].possiblyEvaluate(new Vr(_n),je)]}_t.layoutTextSize=yt["text-size"].possiblyEvaluate(new Vr(A.zoom+1),je),_t.layoutIconSize=yt["icon-size"].possiblyEvaluate(new Vr(A.zoom+1),je),_t.textMaxSize=yt["text-size"].possiblyEvaluate(new Vr(18));for(var yn=st.get("text-line-height")*ma,In=st.get("text-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",zn=st.get("text-keep-upright"),qn=st.get("text-size"),Wn=function(){var cr=pr[nr],yr=st.get("text-font").evaluate(cr,{},je).join(","),_r=qn.evaluate(cr,{},je),Dr=_t.layoutTextSize.evaluate(cr,{},je),Sr=_t.layoutIconSize.evaluate(cr,{},je),zr={horizontal:{},vertical:void 0},Lr=cr.text,Mr=[0,0];if(Lr){var Yr=Lr.toString(),Br=st.get("text-letter-spacing").evaluate(cr,{},je)*ma,mi=function(Nr){for(var Kr=0,ji=Nr;Kr<ji.length;Kr+=1)if(vi=ji[Kr].charCodeAt(0),dr.Arabic(vi)||dr["Arabic Supplement"](vi)||dr["Arabic Extended-A"](vi)||dr["Arabic Presentation Forms-A"](vi)||dr["Arabic Presentation Forms-B"](vi))return!1;var vi;return!0}(Yr)?Br:0,Ir=st.get("text-anchor").evaluate(cr,{},je),fi=st.get("text-variable-anchor");if(!fi){var Ti=st.get("text-radial-offset").evaluate(cr,{},je);Mr=Ti?Kf(Ir,[Ti*ma,Nc]):st.get("text-offset").evaluate(cr,{},je).map(function(Nr){return Nr*ma})}var Si=In?"center":st.get("text-justify").evaluate(cr,{},je),Ei=st.get("symbol-placement"),yi=Ei==="point"?st.get("text-max-width").evaluate(cr,{},je)*ma:0,ta=function(){A.allowVerticalPlacement&&Ls(Yr)&&(zr.vertical=Zu(Lr,z,Z,Te,yr,yi,yn,Ir,"left",mi,Mr,Vo.vertical,!0,Ei,Dr,_r))};if(!In&&fi){for(var Pi=Si==="auto"?fi.map(function(Nr){return jc(Nr)}):[Si],pa=!1,Ma=0;Ma<Pi.length;Ma++){var ya=Pi[Ma];if(!zr.horizontal[ya])if(pa)zr.horizontal[ya]=zr.horizontal[0];else{var Ya=Zu(Lr,z,Z,Te,yr,yi,yn,"center",ya,mi,Mr,Vo.horizontal,!1,Ei,Dr,_r);Ya&&(zr.horizontal[ya]=Ya,pa=Ya.positionedLines.length===1)}}ta()}else{Si==="auto"&&(Si=jc(Ir));var xa=Zu(Lr,z,Z,Te,yr,yi,yn,Ir,Si,mi,Mr,Vo.horizontal,!1,Ei,Dr,_r);xa&&(zr.horizontal[Si]=xa),ta(),Ls(Yr)&&In&&zn&&(zr.vertical=Zu(Lr,z,Z,Te,yr,yi,yn,Ir,Si,mi,Mr,Vo.vertical,!1,Ei,Dr,_r))}}var aa=void 0,ba=!1;if(cr.icon&&cr.icon.name){var da=le[cr.icon.name];da&&(aa=function(Nr,Kr,ji){var vi=Fc(ji),zi=vi.horizontalAlign,Oi=vi.verticalAlign,ei=Kr[0],Ui=Kr[1],Za=ei-Nr.displaySize[0]*zi,ko=Za+Nr.displaySize[0],Ra=Ui-Nr.displaySize[1]*Oi;return{image:Nr,top:Ra,bottom:Ra+Nr.displaySize[1],left:Za,right:ko}}(Te[cr.icon.name],st.get("icon-offset").evaluate(cr,{},je),st.get("icon-anchor").evaluate(cr,{},je)),ba=da.sdf,A.sdfIcons===void 0?A.sdfIcons=da.sdf:A.sdfIcons!==da.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(da.pixelRatio!==A.pixelRatio||st.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}var oa=$f(zr.horizontal)||zr.vertical;A.iconsInText=!!oa&&oa.iconsInText,(oa||aa)&&function(Nr,Kr,ji,vi,zi,Oi,ei,Ui,Za,ko,Ra){var Ds=Oi.textMaxSize.evaluate(Kr,{});Ds===void 0&&(Ds=ei);var rl,ga=Nr.layers[0].layout,Rs=ga.get("icon-offset").evaluate(Kr,{},Ra),xs=$f(ji.horizontal),bs=24,Ol=ei/bs,ic=Nr.tilePixelRatio*Ol,Pl=Nr.tilePixelRatio*Ds/bs,ac=Nr.tilePixelRatio*Ui,xu=Nr.tilePixelRatio*ga.get("symbol-spacing"),Wc=ga.get("text-padding")*Nr.tilePixelRatio,oc=ga.get("icon-padding")*Nr.tilePixelRatio,$l=ga.get("text-max-angle")/180*Math.PI,sc=ga.get("text-rotation-alignment")==="map"&&ga.get("symbol-placement")!=="point",lc=ga.get("icon-rotation-alignment")==="map"&&ga.get("symbol-placement")!=="point",bu=ga.get("symbol-placement"),Yc=xu/2,_u=ga.get("icon-text-fit");vi&&_u!=="none"&&(Nr.allowVerticalPlacement&&ji.vertical&&(rl=Nf(vi,ji.vertical,_u,ga.get("icon-text-fit-padding"),Rs,Ol)),xs&&(vi=Nf(vi,xs,_u,ga.get("icon-text-fit-padding"),Rs,Ol)));var Il=function(gd,Su){Su.x<0||Su.x>=Xr||Su.y<0||Su.y>=Xr||function(Yi,Fs,vd,xl,Qc,yh,pc,Ys,dc,Eu,gc,vc,ef,xh,Lu,bh,_h,wh,Th,kh,qo,mc,Ah,Zs,md){var Mh,Rl,tu,nu,ru,iu=Yi.addToLineVertexArray(Fs,vd),Sh=0,Eh=0,Lh=0,Ch=0,tf=-1,nf=-1,il={},Oh=vr(""),rf=0,af=0;if(Ys._unevaluatedLayout.getValue("text-radial-offset")===void 0?(rf=(Mh=Ys.layout.get("text-offset").evaluate(qo,{},Zs).map(function(Ou){return Ou*ma}))[0],af=Mh[1]):(rf=Ys.layout.get("text-radial-offset").evaluate(qo,{},Zs)*ma,af=Nc),Yi.allowVerticalPlacement&&xl.vertical){var Ph=Ys.layout.get("text-rotate").evaluate(qo,{},Zs)+90,yd=xl.vertical;nu=new Qu(dc,Fs,Eu,gc,vc,yd,ef,xh,Lu,Ph),pc&&(ru=new Qu(dc,Fs,Eu,gc,vc,pc,_h,wh,Lu,Ph))}if(Qc){var of=Ys.layout.get("icon-rotate").evaluate(qo,{}),Ih=Ys.layout.get("icon-text-fit")!=="none",zh=Zf(Qc,of,Ah,Ih),sf=pc?Zf(pc,of,Ah,Ih):void 0;tu=new Qu(dc,Fs,Eu,gc,vc,Qc,_h,wh,!1,of),Sh=4*zh.length;var Dh=Yi.iconSizeData,Cu=null;Dh.kind==="source"?(Cu=[zs*Ys.layout.get("icon-size").evaluate(qo,{})])[0]>ml&&E(Yi.layerIds[0]+': Value for "icon-size" is >= '+vu+'. Reduce your "icon-size".'):Dh.kind==="composite"&&((Cu=[zs*mc.compositeIconSizes[0].evaluate(qo,{},Zs),zs*mc.compositeIconSizes[1].evaluate(qo,{},Zs)])[0]>ml||Cu[1]>ml)&&E(Yi.layerIds[0]+': Value for "icon-size" is >= '+vu+'. Reduce your "icon-size".'),Yi.addSymbols(Yi.icon,zh,Cu,kh,Th,qo,!1,Fs,iu.lineStartIndex,iu.lineLength,-1,Zs),tf=Yi.icon.placedSymbolArray.length-1,sf&&(Eh=4*sf.length,Yi.addSymbols(Yi.icon,sf,Cu,kh,Th,qo,Vo.vertical,Fs,iu.lineStartIndex,iu.lineLength,-1,Zs),nf=Yi.icon.placedSymbolArray.length-1)}for(var Rh in xl.horizontal){var yc=xl.horizontal[Rh];if(!Rl){Oh=vr(yc.text);var xd=Ys.layout.get("text-rotate").evaluate(qo,{},Zs);Rl=new Qu(dc,Fs,Eu,gc,vc,yc,ef,xh,Lu,xd)}var Fh=yc.positionedLines.length===1;if(Lh+=Jf(Yi,Fs,yc,yh,Ys,Lu,qo,bh,iu,xl.vertical?Vo.horizontal:Vo.horizontalOnly,Fh?Object.keys(xl.horizontal):[Rh],il,tf,mc,Zs),Fh)break}xl.vertical&&(Ch+=Jf(Yi,Fs,xl.vertical,yh,Ys,Lu,qo,bh,iu,Vo.vertical,["vertical"],il,nf,mc,Zs));var bd=Rl?Rl.boxStartIndex:Yi.collisionBoxArray.length,_d=Rl?Rl.boxEndIndex:Yi.collisionBoxArray.length,wd=nu?nu.boxStartIndex:Yi.collisionBoxArray.length,Td=nu?nu.boxEndIndex:Yi.collisionBoxArray.length,kd=tu?tu.boxStartIndex:Yi.collisionBoxArray.length,Ad=tu?tu.boxEndIndex:Yi.collisionBoxArray.length,Md=ru?ru.boxStartIndex:Yi.collisionBoxArray.length,Sd=ru?ru.boxEndIndex:Yi.collisionBoxArray.length,Xs=-1,xc=function(Ou,Nh){return Ou&&Ou.circleDiameter?Math.max(Ou.circleDiameter,Nh):Nh};Xs=xc(Rl,Xs),Xs=xc(nu,Xs),Xs=xc(tu,Xs);var Bh=(Xs=xc(ru,Xs))>-1?1:0;Bh&&(Xs*=md/ma),Yi.glyphOffsetArray.length>=ci.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qo.sortKey!==void 0&&Yi.addToSortKeyRanges(Yi.symbolInstances.length,qo.sortKey),Yi.symbolInstances.emplaceBack(Fs.x,Fs.y,il.right>=0?il.right:-1,il.center>=0?il.center:-1,il.left>=0?il.left:-1,il.vertical||-1,tf,nf,Oh,bd,_d,wd,Td,kd,Ad,Md,Sd,Eu,Lh,Ch,Sh,Eh,Bh,0,ef,rf,af,Xs)}(Nr,Su,gd,ji,vi,zi,rl,Nr.layers[0],Nr.collisionBoxArray,Kr.index,Kr.sourceLayerIndex,Nr.index,ic,Wc,sc,Za,ac,oc,lc,Rs,Kr,Oi,ko,Ra,ei)};if(bu==="line")for(var Ql=0,uc=Yf(Kr.geometry,0,0,Xr,Xr);Ql<uc.length;Ql+=1)for(var cc=uc[Ql],eu=0,fc=$p(cc,xu,$l,ji.vertical||xs,vi,bs,Pl,Nr.overscaling,Xr);eu<fc.length;eu+=1){var hc=fc[eu];xs&&nd(Nr,xs.text,Yc,hc)||Il(cc,hc)}else if(bu==="line-center")for(var wu=0,Tu=Kr.geometry;wu<Tu.length;wu+=1){var zl=Tu[wu];if(zl.length>1){var ku=Jp(zl,$l,ji.vertical||xs,vi,bs,Pl);ku&&Il(zl,ku)}}else if(Kr.type==="Polygon")for(var Dl=0,Au=Cc(Kr.geometry,0);Dl<Au.length;Dl+=1){var Mu=Au[Dl],dh=ed(Mu,16);Il(Mu[0],new ql(dh.x,dh.y,0))}else if(Kr.type==="LineString")for(var Zc=0,gh=Kr.geometry;Zc<gh.length;Zc+=1){var Xc=gh[Zc];Il(Xc,new ql(Xc[0].x,Xc[0].y,0))}else if(Kr.type==="Point")for(var Kc=0,vh=Kr.geometry;Kc<vh.length;Kc+=1)for(var Jc=0,mh=vh[Kc];Jc<mh.length;Jc+=1){var $c=mh[Jc];Il([$c],new ql($c.x,$c.y,0))}}(A,cr,zr,aa,le,_t,Dr,Sr,Mr,ba,je)},nr=0,pr=A.features;nr<pr.length;nr+=1)Wn();Ce&&A.generateCollisionDebugBuffers()},o.perspective=function(A,z,Z,le,Te){var Ce,je=1/Math.tan(z/2);return A[0]=je/Z,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=je,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,Te!=null&&Te!==1/0?(Ce=1/(le-Te),A[10]=(Te+le)*Ce,A[14]=2*Te*le*Ce):(A[10]=-1,A[14]=-2*le),A},o.pick=function(A,z){for(var Z={},le=0;le<z.length;le++){var Te=z[le];Te in A&&(Z[Te]=A[Te])}return Z},o.plugin=fa,o.polygonIntersectsPolygon=Ml,o.postMapLoadEvent=pe,o.postTurnstileEvent=Oe,o.potpack=zf,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=wr,o.registerForPluginStateChange=function(A){return A({pluginStatus:Hr,pluginURL:Gi}),ca.on("pluginStateChange",A),A},o.renderColorRamp=hf,o.rotate=function(A,z,Z){var le=z[0],Te=z[1],Ce=z[2],je=z[3],Ke=Math.sin(Z),st=Math.cos(Z);return A[0]=le*st+Ce*Ke,A[1]=Te*st+je*Ke,A[2]=le*-Ke+Ce*st,A[3]=Te*-Ke+je*st,A},o.rotateX=function(A,z,Z){var le=Math.sin(Z),Te=Math.cos(Z),Ce=z[4],je=z[5],Ke=z[6],st=z[7],yt=z[8],_t=z[9],It=z[10],jt=z[11];return z!==A&&(A[0]=z[0],A[1]=z[1],A[2]=z[2],A[3]=z[3],A[12]=z[12],A[13]=z[13],A[14]=z[14],A[15]=z[15]),A[4]=Ce*Te+yt*le,A[5]=je*Te+_t*le,A[6]=Ke*Te+It*le,A[7]=st*Te+jt*le,A[8]=yt*Te-Ce*le,A[9]=_t*Te-je*le,A[10]=It*Te-Ke*le,A[11]=jt*Te-st*le,A},o.rotateZ=function(A,z,Z){var le=Math.sin(Z),Te=Math.cos(Z),Ce=z[0],je=z[1],Ke=z[2],st=z[3],yt=z[4],_t=z[5],It=z[6],jt=z[7];return z!==A&&(A[8]=z[8],A[9]=z[9],A[10]=z[10],A[11]=z[11],A[12]=z[12],A[13]=z[13],A[14]=z[14],A[15]=z[15]),A[0]=Ce*Te+yt*le,A[1]=je*Te+_t*le,A[2]=Ke*Te+It*le,A[3]=st*Te+jt*le,A[4]=yt*Te-Ce*le,A[5]=_t*Te-je*le,A[6]=It*Te-Ke*le,A[7]=jt*Te-st*le,A},o.scale=function(A,z,Z){var le=Z[0],Te=Z[1],Ce=Z[2];return A[0]=z[0]*le,A[1]=z[1]*le,A[2]=z[2]*le,A[3]=z[3]*le,A[4]=z[4]*Te,A[5]=z[5]*Te,A[6]=z[6]*Te,A[7]=z[7]*Te,A[8]=z[8]*Ce,A[9]=z[9]*Ce,A[10]=z[10]*Ce,A[11]=z[11]*Ce,A[12]=z[12],A[13]=z[13],A[14]=z[14],A[15]=z[15],A},o.scale$1=function(A,z,Z){return A[0]=z[0]*Z,A[1]=z[1]*Z,A[2]=z[2]*Z,A[3]=z[3]*Z,A},o.scale$2=function(A,z,Z){return A[0]=z[0]*Z,A[1]=z[1]*Z,A[2]=z[2]*Z,A},o.setCacheLimits=function(A,z){ke=A,Ie=z},o.setRTLTextPlugin=function(A,z,Z){if(Z===void 0&&(Z=!1),Hr===ro||Hr===za||Hr===xo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Gi=K.resolveURL(A),Hr=ro,No=z,io(),Z||ds()},o.sphericalToCartesian=function(A){var z=A[0],Z=A[1],le=A[2];return Z+=90,Z*=Math.PI/180,le*=Math.PI/180,{x:z*Math.cos(Z)*Math.sin(le),y:z*Math.sin(Z)*Math.sin(le),z:z*Math.cos(le)}},o.sqrLen=Wh,o.styleSpec=Ge,o.sub=Gh,o.symbolSize=Kp,o.transformMat3=function(A,z,Z){var le=z[0],Te=z[1],Ce=z[2];return A[0]=le*Z[0]+Te*Z[3]+Ce*Z[6],A[1]=le*Z[1]+Te*Z[4]+Ce*Z[7],A[2]=le*Z[2]+Te*Z[5]+Ce*Z[8],A},o.transformMat4=ju,o.translate=function(A,z,Z){var le,Te,Ce,je,Ke,st,yt,_t,It,jt,Ft,nn,an=Z[0],_n=Z[1],yn=Z[2];return z===A?(A[12]=z[0]*an+z[4]*_n+z[8]*yn+z[12],A[13]=z[1]*an+z[5]*_n+z[9]*yn+z[13],A[14]=z[2]*an+z[6]*_n+z[10]*yn+z[14],A[15]=z[3]*an+z[7]*_n+z[11]*yn+z[15]):(le=z[0],Te=z[1],Ce=z[2],je=z[3],Ke=z[4],st=z[5],yt=z[6],_t=z[7],It=z[8],jt=z[9],Ft=z[10],nn=z[11],A[0]=le,A[1]=Te,A[2]=Ce,A[3]=je,A[4]=Ke,A[5]=st,A[6]=yt,A[7]=_t,A[8]=It,A[9]=jt,A[10]=Ft,A[11]=nn,A[12]=le*an+Ke*_n+It*yn+z[12],A[13]=Te*an+st*_n+jt*yn+z[13],A[14]=Ce*an+yt*_n+Ft*yn+z[14],A[15]=je*an+_t*_n+nn*yn+z[15]),A},o.triggerPluginCompletionEvent=ua,o.uniqueId=d,o.validateCustomStyleLayer=function(A){var z=[],Z=A.id;return Z===void 0&&z.push({message:"layers."+Z+': missing required property "id"'}),A.render===void 0&&z.push({message:"layers."+Z+': missing required method "render"'}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&z.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),z},o.validateLight=es,o.validateStyle=no,o.values=function(A){var z=[];for(var Z in A)z.push(A[Z]);return z},o.vectorTile=Nl,o.version=_,o.warnOnce=E,o.webpSupported=Y,o.window=r,o.wrap=h}),k(0,function(o){function T(He){var Ye=typeof He;if(Ye==="number"||Ye==="boolean"||Ye==="string"||He==null)return JSON.stringify(He);if(Array.isArray(He)){for(var Ne="[",We=0,ot=He;We<ot.length;We+=1)Ne+=T(ot[We])+",";return Ne+"]"}for(var tt=Object.keys(He).sort(),Re="{",Fe=0;Fe<tt.length;Fe++)Re+=JSON.stringify(tt[Fe])+":"+T(He[tt[Fe]])+",";return Re+"}"}function _(He){for(var Ye="",Ne=0,We=o.refProperties;Ne<We.length;Ne+=1)Ye+="/"+T(He[We[Ne]]);return Ye}var p=function(He){this.keyCache={},He&&this.replace(He)};p.prototype.replace=function(He){this._layerConfigs={},this._layers={},this.update(He,[])},p.prototype.update=function(He,Ye){for(var Ne=this,We=0,ot=He;We<ot.length;We+=1){var tt=ot[We];this._layerConfigs[tt.id]=tt;var Re=this._layers[tt.id]=o.createStyleLayer(tt);Re._featureFilter=o.featureFilter(Re.filter),this.keyCache[tt.id]&&delete this.keyCache[tt.id]}for(var Fe=0,nt=Ye;Fe<nt.length;Fe+=1){var Ge=nt[Fe];delete this.keyCache[Ge],delete this._layerConfigs[Ge],delete this._layers[Ge]}this.familiesBySource={};for(var ct=0,pt=function(Ct,zt){for(var Gt={},rn=0;rn<Ct.length;rn++){var Nt=zt&&zt[Ct[rn].id]||_(Ct[rn]);zt&&(zt[Ct[rn].id]=Nt);var Wt=Gt[Nt];Wt||(Wt=Gt[Nt]=[]),Wt.push(Ct[rn])}var Rt=[];for(var Ln in Gt)Rt.push(Gt[Ln]);return Rt}(o.values(this._layerConfigs),this.keyCache);ct<pt.length;ct+=1){var gt=pt[ct].map(function(Ct){return Ne._layers[Ct.id]}),ut=gt[0];if(ut.visibility!=="none"){var kt=ut.source||"",mt=this.familiesBySource[kt];mt||(mt=this.familiesBySource[kt]={});var At=ut.sourceLayer||"_geojsonTileLayer",Lt=mt[At];Lt||(Lt=mt[At]=[]),Lt.push(gt)}}};var s=function(He){var Ye={},Ne=[];for(var We in He){var ot=He[We],tt=Ye[We]={};for(var Re in ot){var Fe=ot[+Re];if(Fe&&Fe.bitmap.width!==0&&Fe.bitmap.height!==0){var nt={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};Ne.push(nt),tt[Re]={rect:nt,metrics:Fe.metrics}}}}var Ge=o.potpack(Ne),ct=Ge.w,pt=Ge.h,gt=new o.AlphaImage({width:ct||1,height:pt||1});for(var ut in He){var kt=He[ut];for(var mt in kt){var At=kt[+mt];if(At&&At.bitmap.width!==0&&At.bitmap.height!==0){var Lt=Ye[ut][mt].rect;o.AlphaImage.copy(At.bitmap,gt,{x:0,y:0},{x:Lt.x+1,y:Lt.y+1},At.bitmap)}}}this.image=gt,this.positions=Ye};o.register("GlyphAtlas",s);var t=function(He){this.tileID=new o.OverscaledTileID(He.tileID.overscaledZ,He.tileID.wrap,He.tileID.canonical.z,He.tileID.canonical.x,He.tileID.canonical.y),this.uid=He.uid,this.zoom=He.zoom,this.pixelRatio=He.pixelRatio,this.tileSize=He.tileSize,this.source=He.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=He.showCollisionBoxes,this.collectResourceTiming=!!He.collectResourceTiming,this.returnDependencies=!!He.returnDependencies,this.promoteId=He.promoteId};function i(He,Ye,Ne){for(var We=new o.EvaluationParameters(Ye),ot=0,tt=He;ot<tt.length;ot+=1)tt[ot].recalculate(We,Ne)}function r(He,Ye){var Ne=o.getArrayBuffer(He.request,function(We,ot,tt,Re){We?Ye(We):ot&&Ye(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(ot)),rawData:ot,cacheControl:tt,expires:Re})});return function(){Ne.cancel(),Ye()}}t.prototype.parse=function(He,Ye,Ne,We,ot){var tt=this;this.status="parsing",this.data=He,this.collisionBoxArray=new o.CollisionBoxArray;var Re=new o.DictionaryCoder(Object.keys(He.layers).sort()),Fe=new o.FeatureIndex(this.tileID,this.promoteId);Fe.bucketLayerIDs=[];var nt,Ge,ct,pt,gt={},ut={featureIndex:Fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ne},kt=Ye.familiesBySource[this.source];for(var mt in kt){var At=He.layers[mt];if(At){At.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+mt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Lt=Re.encode(mt),Ct=[],zt=0;zt<At.length;zt++){var Gt=At.feature(zt),rn=Fe.getId(Gt,mt);Ct.push({feature:Gt,id:rn,index:zt,sourceLayerIndex:Lt})}for(var Nt=0,Wt=kt[mt];Nt<Wt.length;Nt+=1){var Rt=Wt[Nt],Ln=Rt[0];Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||Ln.visibility!=="none"&&(i(Rt,this.zoom,Ne),(gt[Ln.id]=Ln.createBucket({index:Fe.bucketLayerIDs.length,layers:Rt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Lt,sourceID:this.source})).populate(Ct,ut,this.tileID.canonical),Fe.bucketLayerIDs.push(Rt.map(function($t){return $t.id})))}}}var bn=o.mapObject(ut.glyphDependencies,function($t){return Object.keys($t).map(Number)});Object.keys(bn).length?We.send("getGlyphs",{uid:this.uid,stacks:bn},function($t,ln){nt||(nt=$t,Ge=ln,on.call(tt))}):Ge={};var hn=Object.keys(ut.iconDependencies);hn.length?We.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"icons"},function($t,ln){nt||(nt=$t,ct=ln,on.call(tt))}):ct={};var Kt=Object.keys(ut.patternDependencies);function on(){if(nt)return ot(nt);if(Ge&&ct&&pt){var $t=new s(Ge),ln=new o.ImageAtlas(ct,pt);for(var mn in gt){var xn=gt[mn];xn instanceof o.SymbolBucket?(i(xn.layers,this.zoom,Ne),o.performSymbolLayout(xn,Ge,$t.positions,ct,ln.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):xn.hasPattern&&(xn instanceof o.LineBucket||xn instanceof o.FillBucket||xn instanceof o.FillExtrusionBucket)&&(i(xn.layers,this.zoom,Ne),xn.addFeatures(ut,this.tileID.canonical,ln.patternPositions))}this.status="done",ot(null,{buckets:o.values(gt).filter(function(Mn){return!Mn.isEmpty()}),featureIndex:Fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$t.image,imageAtlas:ln,glyphMap:this.returnDependencies?Ge:null,iconMap:this.returnDependencies?ct:null,glyphPositions:this.returnDependencies?$t.positions:null})}}Kt.length?We.send("getImages",{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"},function($t,ln){nt||(nt=$t,pt=ln,on.call(tt))}):pt={},on.call(this)};var n=function(He,Ye,Ne,We){this.actor=He,this.layerIndex=Ye,this.availableImages=Ne,this.loadVectorData=We||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(He,Ye){var Ne=this,We=He.uid;this.loading||(this.loading={});var ot=!!(He&&He.request&&He.request.collectResourceTiming)&&new o.RequestPerformance(He.request),tt=this.loading[We]=new t(He);tt.abort=this.loadVectorData(He,function(Re,Fe){if(delete Ne.loading[We],Re||!Fe)return tt.status="done",Ne.loaded[We]=tt,Ye(Re);var nt=Fe.rawData,Ge={};Fe.expires&&(Ge.expires=Fe.expires),Fe.cacheControl&&(Ge.cacheControl=Fe.cacheControl);var ct={};if(ot){var pt=ot.finish();pt&&(ct.resourceTiming=JSON.parse(JSON.stringify(pt)))}tt.vectorTile=Fe.vectorTile,tt.parse(Fe.vectorTile,Ne.layerIndex,Ne.availableImages,Ne.actor,function(gt,ut){if(gt||!ut)return Ye(gt);Ye(null,o.extend({rawTileData:nt.slice(0)},ut,Ge,ct))}),Ne.loaded=Ne.loaded||{},Ne.loaded[We]=tt})},n.prototype.reloadTile=function(He,Ye){var Ne=this,We=this.loaded,ot=He.uid,tt=this;if(We&&We[ot]){var Re=We[ot];Re.showCollisionBoxes=He.showCollisionBoxes;var Fe=function(nt,Ge){var ct=Re.reloadCallback;ct&&(delete Re.reloadCallback,Re.parse(Re.vectorTile,tt.layerIndex,Ne.availableImages,tt.actor,ct)),Ye(nt,Ge)};Re.status==="parsing"?Re.reloadCallback=Fe:Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,Fe):Fe())}},n.prototype.abortTile=function(He,Ye){var Ne=this.loading,We=He.uid;Ne&&Ne[We]&&Ne[We].abort&&(Ne[We].abort(),delete Ne[We]),Ye()},n.prototype.removeTile=function(He,Ye){var Ne=this.loaded,We=He.uid;Ne&&Ne[We]&&delete Ne[We],Ye()};var a=o.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(He,Ye){var Ne=He.uid,We=He.encoding,ot=He.rawImageData,tt=a&&ot instanceof a?this.getImageData(ot):ot,Re=new o.DEMData(Ne,tt,We);this.loaded=this.loaded||{},this.loaded[Ne]=Re,Ye(null,Re)},l.prototype.getImageData=function(He){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(He.width,He.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=He.width,this.offscreenCanvas.height=He.height,this.offscreenCanvasContext.drawImage(He,0,0,He.width,He.height);var Ye=this.offscreenCanvasContext.getImageData(-1,-1,He.width+2,He.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:Ye.width,height:Ye.height},Ye.data)},l.prototype.removeTile=function(He){var Ye=this.loaded,Ne=He.uid;Ye&&Ye[Ne]&&delete Ye[Ne]};var u=function He(Ye,Ne){var We,ot=Ye&&Ye.type;if(ot==="FeatureCollection")for(We=0;We<Ye.features.length;We++)He(Ye.features[We],Ne);else if(ot==="GeometryCollection")for(We=0;We<Ye.geometries.length;We++)He(Ye.geometries[We],Ne);else if(ot==="Feature")He(Ye.geometry,Ne);else if(ot==="Polygon")h(Ye.coordinates,Ne);else if(ot==="MultiPolygon")for(We=0;We<Ye.coordinates.length;We++)h(Ye.coordinates[We],Ne);return Ye};function h(He,Ye){if(He.length!==0){c(He[0],Ye);for(var Ne=1;Ne<He.length;Ne++)c(He[Ne],!Ye)}}function c(He,Ye){for(var Ne=0,We=0,ot=He.length,tt=ot-1;We<ot;tt=We++)Ne+=(He[We][0]-He[tt][0])*(He[tt][1]+He[We][1]);Ne>=0!=!!Ye&&He.reverse()}var x=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(He){this._feature=He,this.extent=o.EXTENT,this.type=He.type,this.properties=He.tags,"id"in He&&!isNaN(He.id)&&(this.id=parseInt(He.id,10))};d.prototype.loadGeometry=function(){if(this._feature.type===1){for(var He=[],Ye=0,Ne=this._feature.geometry;Ye<Ne.length;Ye+=1){var We=Ne[Ye];He.push([new o.Point$1(We[0],We[1])])}return He}for(var ot=[],tt=0,Re=this._feature.geometry;tt<Re.length;tt+=1){for(var Fe=[],nt=0,Ge=Re[tt];nt<Ge.length;nt+=1){var ct=Ge[nt];Fe.push(new o.Point$1(ct[0],ct[1]))}ot.push(Fe)}return ot},d.prototype.toGeoJSON=function(He,Ye,Ne){return x.call(this,He,Ye,Ne)};var v=function(He){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=He.length,this._features=He};v.prototype.feature=function(He){return new d(this._features[He])};var g=o.vectorTile.VectorTileFeature,y=m;function m(He,Ye){this.options=Ye||{},this.features=He,this.length=He.length}function b(He,Ye){this.id=typeof He.id=="number"?He.id:void 0,this.type=He.type,this.rawGeometry=He.type===1?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=Ye||4096}m.prototype.feature=function(He){return new b(this.features[He],this.options.extent)},b.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var Ye=0;Ye<He.length;Ye++){for(var Ne=He[Ye],We=[],ot=0;ot<Ne.length;ot++)We.push(new o.Point$1(Ne[ot][0],Ne[ot][1]));this.geometry.push(We)}return this.geometry},b.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,Ye=1/0,Ne=-1/0,We=1/0,ot=-1/0,tt=0;tt<He.length;tt++)for(var Re=He[tt],Fe=0;Fe<Re.length;Fe++){var nt=Re[Fe];Ye=Math.min(Ye,nt.x),Ne=Math.max(Ne,nt.x),We=Math.min(We,nt.y),ot=Math.max(ot,nt.y)}return[Ye,We,Ne,ot]},b.prototype.toGeoJSON=g.prototype.toGeoJSON;var f=O,S=O,w=function(He,Ye){Ye=Ye||{};var Ne={};for(var We in He)Ne[We]=new y(He[We].features,Ye),Ne[We].name=We,Ne[We].version=Ye.version,Ne[We].extent=Ye.extent;return O({layers:Ne})},E=y;function O(He){var Ye=new o.pbf;return function(Ne,We){for(var ot in Ne.layers)We.writeMessage(3,C,Ne.layers[ot])}(He,Ye),Ye.finish()}function C(He,Ye){var Ne;Ye.writeVarintField(15,He.version||1),Ye.writeStringField(1,He.name||""),Ye.writeVarintField(5,He.extent||4096);var We={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<He.length;Ne++)We.feature=He.feature(Ne),Ye.writeMessage(2,P,We);var ot=We.keys;for(Ne=0;Ne<ot.length;Ne++)Ye.writeStringField(3,ot[Ne]);var tt=We.values;for(Ne=0;Ne<tt.length;Ne++)Ye.writeMessage(4,W,tt[Ne])}function P(He,Ye){var Ne=He.feature;Ne.id!==void 0&&Ye.writeVarintField(1,Ne.id),Ye.writeMessage(2,D,He),Ye.writeVarintField(3,Ne.type),Ye.writeMessage(4,N,Ne)}function D(He,Ye){var Ne=He.feature,We=He.keys,ot=He.values,tt=He.keycache,Re=He.valuecache;for(var Fe in Ne.properties){var nt=tt[Fe];nt===void 0&&(We.push(Fe),nt=We.length-1,tt[Fe]=nt),Ye.writeVarint(nt);var Ge=Ne.properties[Fe],ct=typeof Ge;ct!=="string"&&ct!=="boolean"&&ct!=="number"&&(Ge=JSON.stringify(Ge));var pt=ct+":"+Ge,gt=Re[pt];gt===void 0&&(ot.push(Ge),gt=ot.length-1,Re[pt]=gt),Ye.writeVarint(gt)}}function U(He,Ye){return(Ye<<3)+(7&He)}function I(He){return He<<1^He>>31}function N(He,Ye){for(var Ne=He.loadGeometry(),We=He.type,ot=0,tt=0,Re=Ne.length,Fe=0;Fe<Re;Fe++){var nt=Ne[Fe],Ge=1;We===1&&(Ge=nt.length),Ye.writeVarint(U(1,Ge));for(var ct=We===3?nt.length-1:nt.length,pt=0;pt<ct;pt++){pt===1&&We!==1&&Ye.writeVarint(U(2,ct-1));var gt=nt[pt].x-ot,ut=nt[pt].y-tt;Ye.writeVarint(I(gt)),Ye.writeVarint(I(ut)),ot+=gt,tt+=ut}We===3&&Ye.writeVarint(U(7,1))}}function W(He,Ye){var Ne=typeof He;Ne==="string"?Ye.writeStringField(1,He):Ne==="boolean"?Ye.writeBooleanField(7,He):Ne==="number"&&(He%1!=0?Ye.writeDoubleField(3,He):He<0?Ye.writeSVarintField(6,He):Ye.writeVarintField(5,He))}function F(He,Ye,Ne,We,ot,tt){if(!(ot-We<=Ne)){var Re=We+ot>>1;j(He,Ye,Re,We,ot,tt%2),F(He,Ye,Ne,We,Re-1,tt+1),F(He,Ye,Ne,Re+1,ot,tt+1)}}function j(He,Ye,Ne,We,ot,tt){for(;ot>We;){if(ot-We>600){var Re=ot-We+1,Fe=Ne-We+1,nt=Math.log(Re),Ge=.5*Math.exp(2*nt/3),ct=.5*Math.sqrt(nt*Ge*(Re-Ge)/Re)*(Fe-Re/2<0?-1:1);j(He,Ye,Ne,Math.max(We,Math.floor(Ne-Fe*Ge/Re+ct)),Math.min(ot,Math.floor(Ne+(Re-Fe)*Ge/Re+ct)),tt)}var pt=Ye[2*Ne+tt],gt=We,ut=ot;for(H(He,Ye,We,Ne),Ye[2*ot+tt]>pt&&H(He,Ye,We,ot);gt<ut;){for(H(He,Ye,gt,ut),gt++,ut--;Ye[2*gt+tt]<pt;)gt++;for(;Ye[2*ut+tt]>pt;)ut--}Ye[2*We+tt]===pt?H(He,Ye,We,ut):H(He,Ye,++ut,ot),ut<=Ne&&(We=ut+1),Ne<=ut&&(ot=ut-1)}}function H(He,Ye,Ne,We){te(He,Ne,We),te(Ye,2*Ne,2*We),te(Ye,2*Ne+1,2*We+1)}function te(He,Ye,Ne){var We=He[Ye];He[Ye]=He[Ne],He[Ne]=We}function Q(He,Ye,Ne,We){var ot=He-Ne,tt=Ye-We;return ot*ot+tt*tt}f.fromVectorTileJs=S,f.fromGeojsonVt=w,f.GeoJSONWrapper=E;var $=function(He){return He[0]},K=function(He){return He[1]},X=function(He,Ye,Ne,We,ot){Ye===void 0&&(Ye=$),Ne===void 0&&(Ne=K),We===void 0&&(We=64),ot===void 0&&(ot=Float64Array),this.nodeSize=We,this.points=He;for(var tt=He.length<65536?Uint16Array:Uint32Array,Re=this.ids=new tt(He.length),Fe=this.coords=new ot(2*He.length),nt=0;nt<He.length;nt++)Re[nt]=nt,Fe[2*nt]=Ye(He[nt]),Fe[2*nt+1]=Ne(He[nt]);F(Re,Fe,We,0,Re.length-1,0)};X.prototype.range=function(He,Ye,Ne,We){return function(ot,tt,Re,Fe,nt,Ge,ct){for(var pt,gt,ut=[0,ot.length-1,0],kt=[];ut.length;){var mt=ut.pop(),At=ut.pop(),Lt=ut.pop();if(At-Lt<=ct)for(var Ct=Lt;Ct<=At;Ct++)pt=tt[2*Ct],gt=tt[2*Ct+1],pt>=Re&&pt<=nt&&gt>=Fe&&gt<=Ge&&kt.push(ot[Ct]);else{var zt=Math.floor((Lt+At)/2);pt=tt[2*zt],gt=tt[2*zt+1],pt>=Re&&pt<=nt&&gt>=Fe&&gt<=Ge&&kt.push(ot[zt]);var Gt=(mt+1)%2;(mt===0?Re<=pt:Fe<=gt)&&(ut.push(Lt),ut.push(zt-1),ut.push(Gt)),(mt===0?nt>=pt:Ge>=gt)&&(ut.push(zt+1),ut.push(At),ut.push(Gt))}}return kt}(this.ids,this.coords,He,Ye,Ne,We,this.nodeSize)},X.prototype.within=function(He,Ye,Ne){return function(We,ot,tt,Re,Fe,nt){for(var Ge=[0,We.length-1,0],ct=[],pt=Fe*Fe;Ge.length;){var gt=Ge.pop(),ut=Ge.pop(),kt=Ge.pop();if(ut-kt<=nt)for(var mt=kt;mt<=ut;mt++)Q(ot[2*mt],ot[2*mt+1],tt,Re)<=pt&&ct.push(We[mt]);else{var At=Math.floor((kt+ut)/2),Lt=ot[2*At],Ct=ot[2*At+1];Q(Lt,Ct,tt,Re)<=pt&&ct.push(We[At]);var zt=(gt+1)%2;(gt===0?tt-Fe<=Lt:Re-Fe<=Ct)&&(Ge.push(kt),Ge.push(At-1),Ge.push(zt)),(gt===0?tt+Fe>=Lt:Re+Fe>=Ct)&&(Ge.push(At+1),Ge.push(ut),Ge.push(zt))}}return ct}(this.ids,this.coords,He,Ye,Ne,this.nodeSize)};var Y={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(He){return He}},re=function(He){this.options=ye(Object.create(Y),He),this.trees=new Array(this.options.maxZoom+1)};function se(He,Ye,Ne,We,ot){return{x:He,y:Ye,zoom:1/0,id:Ne,parentId:-1,numPoints:We,properties:ot}}function ae(He,Ye){var Ne=He.geometry.coordinates,We=Ne[0],ot=Ne[1];return{x:he(We),y:ve(ot),zoom:1/0,index:Ye,parentId:-1}}function ce(He){return{type:"Feature",id:He.id,properties:fe(He),geometry:{type:"Point",coordinates:[(We=He.x,360*(We-.5)),(Ye=He.y,Ne=(180-360*Ye)*Math.PI/180,360*Math.atan(Math.exp(Ne))/Math.PI-90)]}};var Ye,Ne,We}function fe(He){var Ye=He.numPoints,Ne=Ye>=1e4?Math.round(Ye/1e3)+"k":Ye>=1e3?Math.round(Ye/100)/10+"k":Ye;return ye(ye({},He.properties),{cluster:!0,cluster_id:He.id,point_count:Ye,point_count_abbreviated:Ne})}function he(He){return He/360+.5}function ve(He){var Ye=Math.sin(He*Math.PI/180),Ne=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function ye(He,Ye){for(var Ne in Ye)He[Ne]=Ye[Ne];return He}function me(He){return He.x}function Me(He){return He.y}function Pe(He,Ye,Ne,We){for(var ot,tt=We,Re=Ne-Ye>>1,Fe=Ne-Ye,nt=He[Ye],Ge=He[Ye+1],ct=He[Ne],pt=He[Ne+1],gt=Ye+3;gt<Ne;gt+=3){var ut=ge(He[gt],He[gt+1],nt,Ge,ct,pt);if(ut>tt)ot=gt,tt=ut;else if(ut===tt){var kt=Math.abs(gt-Re);kt<Fe&&(ot=gt,Fe=kt)}}tt>We&&(ot-Ye>3&&Pe(He,Ye,ot,We),He[ot+2]=tt,Ne-ot>3&&Pe(He,ot,Ne,We))}function ge(He,Ye,Ne,We,ot,tt){var Re=ot-Ne,Fe=tt-We;if(Re!==0||Fe!==0){var nt=((He-Ne)*Re+(Ye-We)*Fe)/(Re*Re+Fe*Fe);nt>1?(Ne=ot,We=tt):nt>0&&(Ne+=Re*nt,We+=Fe*nt)}return(Re=He-Ne)*Re+(Fe=Ye-We)*Fe}function oe(He,Ye,Ne,We){var ot={id:He===void 0?null:He,type:Ye,geometry:Ne,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(tt){var Re=tt.geometry,Fe=tt.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")ie(tt,Re);else if(Fe==="Polygon"||Fe==="MultiLineString")for(var nt=0;nt<Re.length;nt++)ie(tt,Re[nt]);else if(Fe==="MultiPolygon")for(nt=0;nt<Re.length;nt++)for(var Ge=0;Ge<Re[nt].length;Ge++)ie(tt,Re[nt][Ge])}(ot),ot}function ie(He,Ye){for(var Ne=0;Ne<Ye.length;Ne+=3)He.minX=Math.min(He.minX,Ye[Ne]),He.minY=Math.min(He.minY,Ye[Ne+1]),He.maxX=Math.max(He.maxX,Ye[Ne]),He.maxY=Math.max(He.maxY,Ye[Ne+1])}function de(He,Ye,Ne,We){if(Ye.geometry){var ot=Ye.geometry.coordinates,tt=Ye.geometry.type,Re=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),Fe=[],nt=Ye.id;if(Ne.promoteId?nt=Ye.properties[Ne.promoteId]:Ne.generateId&&(nt=We||0),tt==="Point")Se(ot,Fe);else if(tt==="MultiPoint")for(var Ge=0;Ge<ot.length;Ge++)Se(ot[Ge],Fe);else if(tt==="LineString")_e(ot,Fe,Re,!1);else if(tt==="MultiLineString"){if(Ne.lineMetrics){for(Ge=0;Ge<ot.length;Ge++)Fe=[],_e(ot[Ge],Fe,Re,!1),He.push(oe(nt,"LineString",Fe,Ye.properties));return}we(ot,Fe,Re,!1)}else if(tt==="Polygon")we(ot,Fe,Re,!0);else{if(tt!=="MultiPolygon"){if(tt==="GeometryCollection"){for(Ge=0;Ge<Ye.geometry.geometries.length;Ge++)de(He,{id:nt,geometry:Ye.geometry.geometries[Ge],properties:Ye.properties},Ne,We);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ge=0;Ge<ot.length;Ge++){var ct=[];we(ot[Ge],ct,Re,!0),Fe.push(ct)}}He.push(oe(nt,tt,Fe,Ye.properties))}}function Se(He,Ye){Ye.push(Ae(He[0])),Ye.push(Oe(He[1])),Ye.push(0)}function _e(He,Ye,Ne,We){for(var ot,tt,Re=0,Fe=0;Fe<He.length;Fe++){var nt=Ae(He[Fe][0]),Ge=Oe(He[Fe][1]);Ye.push(nt),Ye.push(Ge),Ye.push(0),Fe>0&&(Re+=We?(ot*Ge-nt*tt)/2:Math.sqrt(Math.pow(nt-ot,2)+Math.pow(Ge-tt,2))),ot=nt,tt=Ge}var ct=Ye.length-3;Ye[2]=1,Pe(Ye,0,ct,Ne),Ye[ct+2]=1,Ye.size=Math.abs(Re),Ye.start=0,Ye.end=Ye.size}function we(He,Ye,Ne,We){for(var ot=0;ot<He.length;ot++){var tt=[];_e(He[ot],tt,Ne,We),Ye.push(tt)}}function Ae(He){return He/360+.5}function Oe(He){var Ye=Math.sin(He*Math.PI/180),Ne=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function ze(He,Ye,Ne,We,ot,tt,Re,Fe){if(We/=Ye,tt>=(Ne/=Ye)&&Re<We)return He;if(Re<Ne||tt>=We)return null;for(var nt=[],Ge=0;Ge<He.length;Ge++){var ct=He[Ge],pt=ct.geometry,gt=ct.type,ut=ot===0?ct.minX:ct.minY,kt=ot===0?ct.maxX:ct.maxY;if(ut>=Ne&&kt<We)nt.push(ct);else if(!(kt<Ne||ut>=We)){var mt=[];if(gt==="Point"||gt==="MultiPoint")pe(pt,mt,Ne,We,ot);else if(gt==="LineString")be(pt,mt,Ne,We,ot,!1,Fe.lineMetrics);else if(gt==="MultiLineString")Ie(pt,mt,Ne,We,ot,!1);else if(gt==="Polygon")Ie(pt,mt,Ne,We,ot,!0);else if(gt==="MultiPolygon")for(var At=0;At<pt.length;At++){var Lt=[];Ie(pt[At],Lt,Ne,We,ot,!0),Lt.length&&mt.push(Lt)}if(mt.length){if(Fe.lineMetrics&&gt==="LineString"){for(At=0;At<mt.length;At++)nt.push(oe(ct.id,gt,mt[At],ct.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(mt.length===1?(gt="LineString",mt=mt[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=mt.length===3?"Point":"MultiPoint"),nt.push(oe(ct.id,gt,mt,ct.tags))}}}return nt.length?nt:null}function pe(He,Ye,Ne,We,ot){for(var tt=0;tt<He.length;tt+=3){var Re=He[tt+ot];Re>=Ne&&Re<=We&&(Ye.push(He[tt]),Ye.push(He[tt+1]),Ye.push(He[tt+2]))}}function be(He,Ye,Ne,We,ot,tt,Re){for(var Fe,nt,Ge=ke(He),ct=ot===0?Be:Ve,pt=He.start,gt=0;gt<He.length-3;gt+=3){var ut=He[gt],kt=He[gt+1],mt=He[gt+2],At=He[gt+3],Lt=He[gt+4],Ct=ot===0?ut:kt,zt=ot===0?At:Lt,Gt=!1;Re&&(Fe=Math.sqrt(Math.pow(ut-At,2)+Math.pow(kt-Lt,2))),Ct<Ne?zt>Ne&&(nt=ct(Ge,ut,kt,At,Lt,Ne),Re&&(Ge.start=pt+Fe*nt)):Ct>We?zt<We&&(nt=ct(Ge,ut,kt,At,Lt,We),Re&&(Ge.start=pt+Fe*nt)):Ee(Ge,ut,kt,mt),zt<Ne&&Ct>=Ne&&(nt=ct(Ge,ut,kt,At,Lt,Ne),Gt=!0),zt>We&&Ct<=We&&(nt=ct(Ge,ut,kt,At,Lt,We),Gt=!0),!tt&&Gt&&(Re&&(Ge.end=pt+Fe*nt),Ye.push(Ge),Ge=ke(He)),Re&&(pt+=Fe)}var rn=He.length-3;ut=He[rn],kt=He[rn+1],mt=He[rn+2],(Ct=ot===0?ut:kt)>=Ne&&Ct<=We&&Ee(Ge,ut,kt,mt),rn=Ge.length-3,tt&&rn>=3&&(Ge[rn]!==Ge[0]||Ge[rn+1]!==Ge[1])&&Ee(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&Ye.push(Ge)}function ke(He){var Ye=[];return Ye.size=He.size,Ye.start=He.start,Ye.end=He.end,Ye}function Ie(He,Ye,Ne,We,ot,tt){for(var Re=0;Re<He.length;Re++)be(He[Re],Ye,Ne,We,ot,tt,!1)}function Ee(He,Ye,Ne,We){He.push(Ye),He.push(Ne),He.push(We)}function Be(He,Ye,Ne,We,ot,tt){var Re=(tt-Ye)/(We-Ye);return He.push(tt),He.push(Ne+(ot-Ne)*Re),He.push(1),Re}function Ve(He,Ye,Ne,We,ot,tt){var Re=(tt-Ne)/(ot-Ne);return He.push(Ye+(We-Ye)*Re),He.push(tt),He.push(1),Re}function Ze(He,Ye){for(var Ne=[],We=0;We<He.length;We++){var ot,tt=He[We],Re=tt.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")ot=rt(tt.geometry,Ye);else if(Re==="MultiLineString"||Re==="Polygon"){ot=[];for(var Fe=0;Fe<tt.geometry.length;Fe++)ot.push(rt(tt.geometry[Fe],Ye))}else if(Re==="MultiPolygon")for(ot=[],Fe=0;Fe<tt.geometry.length;Fe++){for(var nt=[],Ge=0;Ge<tt.geometry[Fe].length;Ge++)nt.push(rt(tt.geometry[Fe][Ge],Ye));ot.push(nt)}Ne.push(oe(tt.id,Re,ot,tt.tags))}return Ne}function rt(He,Ye){var Ne=[];Ne.size=He.size,He.start!==void 0&&(Ne.start=He.start,Ne.end=He.end);for(var We=0;We<He.length;We+=3)Ne.push(He[We]+Ye,He[We+1],He[We+2]);return Ne}function it(He,Ye){if(He.transformed)return He;var Ne,We,ot,tt=1<<He.z,Re=He.x,Fe=He.y;for(Ne=0;Ne<He.features.length;Ne++){var nt=He.features[Ne],Ge=nt.geometry,ct=nt.type;if(nt.geometry=[],ct===1)for(We=0;We<Ge.length;We+=2)nt.geometry.push(dt(Ge[We],Ge[We+1],Ye,tt,Re,Fe));else for(We=0;We<Ge.length;We++){var pt=[];for(ot=0;ot<Ge[We].length;ot+=2)pt.push(dt(Ge[We][ot],Ge[We][ot+1],Ye,tt,Re,Fe));nt.geometry.push(pt)}}return He.transformed=!0,He}function dt(He,Ye,Ne,We,ot,tt){return[Math.round(Ne*(He*We-ot)),Math.round(Ne*(Ye*We-tt))]}function vt(He,Ye,Ne,We,ot){for(var tt=Ye===ot.maxZoom?0:ot.tolerance/((1<<Ye)*ot.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:We,z:Ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Fe=0;Fe<He.length;Fe++){Re.numFeatures++,ht(Re,He[Fe],tt,ot);var nt=He[Fe].minX,Ge=He[Fe].minY,ct=He[Fe].maxX,pt=He[Fe].maxY;nt<Re.minX&&(Re.minX=nt),Ge<Re.minY&&(Re.minY=Ge),ct>Re.maxX&&(Re.maxX=ct),pt>Re.maxY&&(Re.maxY=pt)}return Re}function ht(He,Ye,Ne,We){var ot=Ye.geometry,tt=Ye.type,Re=[];if(tt==="Point"||tt==="MultiPoint")for(var Fe=0;Fe<ot.length;Fe+=3)Re.push(ot[Fe]),Re.push(ot[Fe+1]),He.numPoints++,He.numSimplified++;else if(tt==="LineString")Qe(Re,ot,He,Ne,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(Fe=0;Fe<ot.length;Fe++)Qe(Re,ot[Fe],He,Ne,tt==="Polygon",Fe===0);else if(tt==="MultiPolygon")for(var nt=0;nt<ot.length;nt++){var Ge=ot[nt];for(Fe=0;Fe<Ge.length;Fe++)Qe(Re,Ge[Fe],He,Ne,!0,Fe===0)}if(Re.length){var ct=Ye.tags||null;if(tt==="LineString"&&We.lineMetrics){for(var pt in ct={},Ye.tags)ct[pt]=Ye.tags[pt];ct.mapbox_clip_start=ot.start/ot.size,ct.mapbox_clip_end=ot.end/ot.size}var gt={geometry:Re,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:ct};Ye.id!==null&&(gt.id=Ye.id),He.features.push(gt)}}function Qe(He,Ye,Ne,We,ot,tt){var Re=We*We;if(We>0&&Ye.size<(ot?Re:We))Ne.numPoints+=Ye.length/3;else{for(var Fe=[],nt=0;nt<Ye.length;nt+=3)(We===0||Ye[nt+2]>Re)&&(Ne.numSimplified++,Fe.push(Ye[nt]),Fe.push(Ye[nt+1])),Ne.numPoints++;ot&&function(Ge,ct){for(var pt=0,gt=0,ut=Ge.length,kt=ut-2;gt<ut;kt=gt,gt+=2)pt+=(Ge[gt]-Ge[kt])*(Ge[gt+1]+Ge[kt+1]);if(pt>0===ct)for(gt=0,ut=Ge.length;gt<ut/2;gt+=2){var mt=Ge[gt],At=Ge[gt+1];Ge[gt]=Ge[ut-2-gt],Ge[gt+1]=Ge[ut-1-gt],Ge[ut-2-gt]=mt,Ge[ut-1-gt]=At}}(Fe,tt),He.push(Fe)}}function Je(He,Ye){var Ne=(Ye=this.options=function(ot,tt){for(var Re in tt)ot[Re]=tt[Re];return ot}(Object.create(this.options),Ye)).debug;if(Ne&&console.time("preprocess data"),Ye.maxZoom<0||Ye.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ye.promoteId&&Ye.generateId)throw new Error("promoteId and generateId cannot be used together.");var We=function(ot,tt){var Re=[];if(ot.type==="FeatureCollection")for(var Fe=0;Fe<ot.features.length;Fe++)de(Re,ot.features[Fe],tt,Fe);else ot.type==="Feature"?de(Re,ot,tt):de(Re,{geometry:ot},tt);return Re}(He,Ye);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ye.indexMaxZoom,Ye.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(We=function(ot,tt){var Re=tt.buffer/tt.extent,Fe=ot,nt=ze(ot,1,-1-Re,Re,0,-1,2,tt),Ge=ze(ot,1,1-Re,2+Re,0,-1,2,tt);return(nt||Ge)&&(Fe=ze(ot,1,-Re,1+Re,0,-1,2,tt)||[],nt&&(Fe=Ze(nt,1).concat(Fe)),Ge&&(Fe=Fe.concat(Ze(Ge,-1)))),Fe}(We,Ye)).length&&this.splitTile(We,0,0,0),Ne&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tt(He,Ye,Ne){return 32*((1<<He)*Ne+Ye)+He}function Ot(He,Ye){var Ne=He.tileID.canonical;if(!this._geoJSONIndex)return Ye(null,null);var We=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!We)return Ye(null,null);var ot=new v(We.features),tt=f(ot);tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),Ye(null,{vectorTile:ot,rawData:tt.buffer})}re.prototype.load=function(He){var Ye=this.options,Ne=Ye.log,We=Ye.minZoom,ot=Ye.maxZoom,tt=Ye.nodeSize;Ne&&console.time("total time");var Re="prepare "+He.length+" points";Ne&&console.time(Re),this.points=He;for(var Fe=[],nt=0;nt<He.length;nt++)He[nt].geometry&&Fe.push(ae(He[nt],nt));this.trees[ot+1]=new X(Fe,me,Me,tt,Float32Array),Ne&&console.timeEnd(Re);for(var Ge=ot;Ge>=We;Ge--){var ct=+Date.now();Fe=this._cluster(Fe,Ge),this.trees[Ge]=new X(Fe,me,Me,tt,Float32Array),Ne&&console.log("z%d: %d clusters in %dms",Ge,Fe.length,+Date.now()-ct)}return Ne&&console.timeEnd("total time"),this},re.prototype.getClusters=function(He,Ye){var Ne=((He[0]+180)%360+360)%360-180,We=Math.max(-90,Math.min(90,He[1])),ot=He[2]===180?180:((He[2]+180)%360+360)%360-180,tt=Math.max(-90,Math.min(90,He[3]));if(He[2]-He[0]>=360)Ne=-180,ot=180;else if(Ne>ot){var Re=this.getClusters([Ne,We,180,tt],Ye),Fe=this.getClusters([-180,We,ot,tt],Ye);return Re.concat(Fe)}for(var nt=this.trees[this._limitZoom(Ye)],Ge=[],ct=0,pt=nt.range(he(Ne),ve(tt),he(ot),ve(We));ct<pt.length;ct+=1){var gt=pt[ct],ut=nt.points[gt];Ge.push(ut.numPoints?ce(ut):this.points[ut.index])}return Ge},re.prototype.getChildren=function(He){var Ye=this._getOriginId(He),Ne=this._getOriginZoom(He),We="No cluster with the specified id.",ot=this.trees[Ne];if(!ot)throw new Error(We);var tt=ot.points[Ye];if(!tt)throw new Error(We);for(var Re=this.options.radius/(this.options.extent*Math.pow(2,Ne-1)),Fe=[],nt=0,Ge=ot.within(tt.x,tt.y,Re);nt<Ge.length;nt+=1){var ct=Ge[nt],pt=ot.points[ct];pt.parentId===He&&Fe.push(pt.numPoints?ce(pt):this.points[pt.index])}if(Fe.length===0)throw new Error(We);return Fe},re.prototype.getLeaves=function(He,Ye,Ne){Ye=Ye||10,Ne=Ne||0;var We=[];return this._appendLeaves(We,He,Ye,Ne,0),We},re.prototype.getTile=function(He,Ye,Ne){var We=this.trees[this._limitZoom(He)],ot=Math.pow(2,He),tt=this.options,Re=tt.extent,Fe=tt.radius/Re,nt=(Ne-Fe)/ot,Ge=(Ne+1+Fe)/ot,ct={features:[]};return this._addTileFeatures(We.range((Ye-Fe)/ot,nt,(Ye+1+Fe)/ot,Ge),We.points,Ye,Ne,ot,ct),Ye===0&&this._addTileFeatures(We.range(1-Fe/ot,nt,1,Ge),We.points,ot,Ne,ot,ct),Ye===ot-1&&this._addTileFeatures(We.range(0,nt,Fe/ot,Ge),We.points,-1,Ne,ot,ct),ct.features.length?ct:null},re.prototype.getClusterExpansionZoom=function(He){for(var Ye=this._getOriginZoom(He)-1;Ye<=this.options.maxZoom;){var Ne=this.getChildren(He);if(Ye++,Ne.length!==1)break;He=Ne[0].properties.cluster_id}return Ye},re.prototype._appendLeaves=function(He,Ye,Ne,We,ot){for(var tt=0,Re=this.getChildren(Ye);tt<Re.length;tt+=1){var Fe=Re[tt],nt=Fe.properties;if(nt&&nt.cluster?ot+nt.point_count<=We?ot+=nt.point_count:ot=this._appendLeaves(He,nt.cluster_id,Ne,We,ot):ot<We?ot++:He.push(Fe),He.length===Ne)break}return ot},re.prototype._addTileFeatures=function(He,Ye,Ne,We,ot,tt){for(var Re=0,Fe=He;Re<Fe.length;Re+=1){var nt=Ye[Fe[Re]],Ge=nt.numPoints,ct={type:1,geometry:[[Math.round(this.options.extent*(nt.x*ot-Ne)),Math.round(this.options.extent*(nt.y*ot-We))]],tags:Ge?fe(nt):this.points[nt.index].properties},pt=void 0;Ge?pt=nt.id:this.options.generateId?pt=nt.index:this.points[nt.index].id&&(pt=this.points[nt.index].id),pt!==void 0&&(ct.id=pt),tt.features.push(ct)}},re.prototype._limitZoom=function(He){return Math.max(this.options.minZoom,Math.min(+He,this.options.maxZoom+1))},re.prototype._cluster=function(He,Ye){for(var Ne=[],We=this.options,ot=We.radius,tt=We.extent,Re=We.reduce,Fe=We.minPoints,nt=ot/(tt*Math.pow(2,Ye)),Ge=0;Ge<He.length;Ge++){var ct=He[Ge];if(!(ct.zoom<=Ye)){ct.zoom=Ye;for(var pt=this.trees[Ye+1],gt=pt.within(ct.x,ct.y,nt),ut=ct.numPoints||1,kt=ut,mt=0,At=gt;mt<At.length;mt+=1){var Lt=At[mt],Ct=pt.points[Lt];Ct.zoom>Ye&&(kt+=Ct.numPoints||1)}if(kt>=Fe){for(var zt=ct.x*ut,Gt=ct.y*ut,rn=Re&&ut>1?this._map(ct,!0):null,Nt=(Ge<<5)+(Ye+1)+this.points.length,Wt=0,Rt=gt;Wt<Rt.length;Wt+=1){var Ln=Rt[Wt],bn=pt.points[Ln];if(!(bn.zoom<=Ye)){bn.zoom=Ye;var hn=bn.numPoints||1;zt+=bn.x*hn,Gt+=bn.y*hn,bn.parentId=Nt,Re&&(rn||(rn=this._map(ct,!0)),Re(rn,this._map(bn)))}}ct.parentId=Nt,Ne.push(se(zt/kt,Gt/kt,Nt,kt,rn))}else if(Ne.push(ct),kt>1)for(var Kt=0,on=gt;Kt<on.length;Kt+=1){var $t=on[Kt],ln=pt.points[$t];ln.zoom<=Ye||(ln.zoom=Ye,Ne.push(ln))}}}return Ne},re.prototype._getOriginId=function(He){return He-this.points.length>>5},re.prototype._getOriginZoom=function(He){return(He-this.points.length)%32},re.prototype._map=function(He,Ye){if(He.numPoints)return Ye?ye({},He.properties):He.properties;var Ne=this.points[He.index].properties,We=this.options.map(Ne);return Ye&&We===Ne?ye({},We):We},Je.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Je.prototype.splitTile=function(He,Ye,Ne,We,ot,tt,Re){for(var Fe=[He,Ye,Ne,We],nt=this.options,Ge=nt.debug;Fe.length;){We=Fe.pop(),Ne=Fe.pop(),Ye=Fe.pop(),He=Fe.pop();var ct=1<<Ye,pt=Tt(Ye,Ne,We),gt=this.tiles[pt];if(!gt&&(Ge>1&&console.time("creation"),gt=this.tiles[pt]=vt(He,Ye,Ne,We,nt),this.tileCoords.push({z:Ye,x:Ne,y:We}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ye,Ne,We,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var ut="z"+Ye;this.stats[ut]=(this.stats[ut]||0)+1,this.total++}if(gt.source=He,ot){if(Ye===nt.maxZoom||Ye===ot)continue;var kt=1<<ot-Ye;if(Ne!==Math.floor(tt/kt)||We!==Math.floor(Re/kt))continue}else if(Ye===nt.indexMaxZoom||gt.numPoints<=nt.indexMaxPoints)continue;if(gt.source=null,He.length!==0){Ge>1&&console.time("clipping");var mt,At,Lt,Ct,zt,Gt,rn=.5*nt.buffer/nt.extent,Nt=.5-rn,Wt=.5+rn,Rt=1+rn;mt=At=Lt=Ct=null,zt=ze(He,ct,Ne-rn,Ne+Wt,0,gt.minX,gt.maxX,nt),Gt=ze(He,ct,Ne+Nt,Ne+Rt,0,gt.minX,gt.maxX,nt),He=null,zt&&(mt=ze(zt,ct,We-rn,We+Wt,1,gt.minY,gt.maxY,nt),At=ze(zt,ct,We+Nt,We+Rt,1,gt.minY,gt.maxY,nt),zt=null),Gt&&(Lt=ze(Gt,ct,We-rn,We+Wt,1,gt.minY,gt.maxY,nt),Ct=ze(Gt,ct,We+Nt,We+Rt,1,gt.minY,gt.maxY,nt),Gt=null),Ge>1&&console.timeEnd("clipping"),Fe.push(mt||[],Ye+1,2*Ne,2*We),Fe.push(At||[],Ye+1,2*Ne,2*We+1),Fe.push(Lt||[],Ye+1,2*Ne+1,2*We),Fe.push(Ct||[],Ye+1,2*Ne+1,2*We+1)}}},Je.prototype.getTile=function(He,Ye,Ne){var We=this.options,ot=We.extent,tt=We.debug;if(He<0||He>24)return null;var Re=1<<He,Fe=Tt(He,Ye=(Ye%Re+Re)%Re,Ne);if(this.tiles[Fe])return it(this.tiles[Fe],ot);tt>1&&console.log("drilling down to z%d-%d-%d",He,Ye,Ne);for(var nt,Ge=He,ct=Ye,pt=Ne;!nt&&Ge>0;)Ge--,ct=Math.floor(ct/2),pt=Math.floor(pt/2),nt=this.tiles[Tt(Ge,ct,pt)];return nt&&nt.source?(tt>1&&console.log("found parent tile z%d-%d-%d",Ge,ct,pt),tt>1&&console.time("drilling down"),this.splitTile(nt.source,Ge,ct,pt,He,Ye,Ne),tt>1&&console.timeEnd("drilling down"),this.tiles[Fe]?it(this.tiles[Fe],ot):null):null};var Pt=function(He){function Ye(Ne,We,ot,tt){He.call(this,Ne,We,ot,Ot),tt&&(this.loadGeoJSON=tt)}return He&&(Ye.__proto__=He),Ye.prototype=Object.create(He&&He.prototype),Ye.prototype.constructor=Ye,Ye.prototype.loadData=function(Ne,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=We,this._pendingLoadDataParams=Ne,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ye.prototype._loadData=function(){var Ne=this;if(this._pendingCallback&&this._pendingLoadDataParams){var We=this._pendingCallback,ot=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var tt=!!(ot&&ot.request&&ot.request.collectResourceTiming)&&new o.RequestPerformance(ot.request);this.loadGeoJSON(ot,function(Re,Fe){if(Re||!Fe)return We(Re);if(typeof Fe!="object")return We(new Error("Input data given to '"+ot.source+"' is not a valid GeoJSON object."));u(Fe,!0);try{if(ot.filter){var nt=o.createExpression(ot.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nt.result==="error")throw new Error(nt.value.map(function(gt){return gt.key+": "+gt.message}).join(", "));var Ge=Fe.features.filter(function(gt){return nt.value.evaluate({zoom:0},gt)});Fe={type:"FeatureCollection",features:Ge}}Ne._geoJSONIndex=ot.cluster?new re(function(gt){var ut=gt.superclusterOptions,kt=gt.clusterProperties;if(!kt||!ut)return ut;for(var mt={},At={},Lt={accumulated:null,zoom:0},Ct={properties:null},zt=Object.keys(kt),Gt=0,rn=zt;Gt<rn.length;Gt+=1){var Nt=rn[Gt],Wt=kt[Nt],Rt=Wt[0],Ln=Wt[1],bn=o.createExpression(Ln),hn=o.createExpression(typeof Rt=="string"?[Rt,["accumulated"],["get",Nt]]:Rt);mt[Nt]=bn.value,At[Nt]=hn.value}return ut.map=function(Kt){Ct.properties=Kt;for(var on={},$t=0,ln=zt;$t<ln.length;$t+=1){var mn=ln[$t];on[mn]=mt[mn].evaluate(Lt,Ct)}return on},ut.reduce=function(Kt,on){Ct.properties=on;for(var $t=0,ln=zt;$t<ln.length;$t+=1){var mn=ln[$t];Lt.accumulated=Kt[mn],Kt[mn]=At[mn].evaluate(Lt,Ct)}},ut}(ot)).load(Fe.features):function(gt,ut){return new Je(gt,ut)}(Fe,ot.geojsonVtOptions)}catch(gt){return We(gt)}Ne.loaded={};var ct={};if(tt){var pt=tt.finish();pt&&(ct.resourceTiming={},ct.resourceTiming[ot.source]=JSON.parse(JSON.stringify(pt)))}We(null,ct)})}},Ye.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ye.prototype.reloadTile=function(Ne,We){var ot=this.loaded,tt=Ne.uid;return ot&&ot[tt]?He.prototype.reloadTile.call(this,Ne,We):this.loadTile(Ne,We)},Ye.prototype.loadGeoJSON=function(Ne,We){if(Ne.request)o.getJSON(Ne.request,We);else{if(typeof Ne.data!="string")return We(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));try{return We(null,JSON.parse(Ne.data))}catch{return We(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."))}}},Ye.prototype.removeSource=function(Ne,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),We()},Ye.prototype.getClusterExpansionZoom=function(Ne,We){try{We(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(ot){We(ot)}},Ye.prototype.getClusterChildren=function(Ne,We){try{We(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(ot){We(ot)}},Ye.prototype.getClusterLeaves=function(Ne,We){try{We(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(ot){We(ot)}},Ye}(n),Mt=function(He){var Ye=this;this.self=He,this.actor=new o.Actor(He,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ne,We){if(Ye.workerSourceTypes[Ne])throw new Error('Worker source with name "'+Ne+'" already registered.');Ye.workerSourceTypes[Ne]=We},this.self.registerRTLTextPlugin=function(Ne){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Ne.applyArabicShaping,o.plugin.processBidirectionalText=Ne.processBidirectionalText,o.plugin.processStyledBidirectionalText=Ne.processStyledBidirectionalText}};return Mt.prototype.setReferrer=function(He,Ye){this.referrer=Ye},Mt.prototype.setImages=function(He,Ye,Ne){for(var We in this.availableImages[He]=Ye,this.workerSources[He]){var ot=this.workerSources[He][We];for(var tt in ot)ot[tt].availableImages=Ye}Ne()},Mt.prototype.setLayers=function(He,Ye,Ne){this.getLayerIndex(He).replace(Ye),Ne()},Mt.prototype.updateLayers=function(He,Ye,Ne){this.getLayerIndex(He).update(Ye.layers,Ye.removedIds),Ne()},Mt.prototype.loadTile=function(He,Ye,Ne){this.getWorkerSource(He,Ye.type,Ye.source).loadTile(Ye,Ne)},Mt.prototype.loadDEMTile=function(He,Ye,Ne){this.getDEMWorkerSource(He,Ye.source).loadTile(Ye,Ne)},Mt.prototype.reloadTile=function(He,Ye,Ne){this.getWorkerSource(He,Ye.type,Ye.source).reloadTile(Ye,Ne)},Mt.prototype.abortTile=function(He,Ye,Ne){this.getWorkerSource(He,Ye.type,Ye.source).abortTile(Ye,Ne)},Mt.prototype.removeTile=function(He,Ye,Ne){this.getWorkerSource(He,Ye.type,Ye.source).removeTile(Ye,Ne)},Mt.prototype.removeDEMTile=function(He,Ye){this.getDEMWorkerSource(He,Ye.source).removeTile(Ye)},Mt.prototype.removeSource=function(He,Ye,Ne){if(this.workerSources[He]&&this.workerSources[He][Ye.type]&&this.workerSources[He][Ye.type][Ye.source]){var We=this.workerSources[He][Ye.type][Ye.source];delete this.workerSources[He][Ye.type][Ye.source],We.removeSource!==void 0?We.removeSource(Ye,Ne):Ne()}},Mt.prototype.loadWorkerSource=function(He,Ye,Ne){try{this.self.importScripts(Ye.url),Ne()}catch(We){Ne(We.toString())}},Mt.prototype.syncRTLPluginState=function(He,Ye,Ne){try{o.plugin.setState(Ye);var We=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&We!=null){this.self.importScripts(We);var ot=o.plugin.isParsed();Ne(ot?void 0:new Error("RTL Text Plugin failed to import scripts from "+We),ot)}}catch(tt){Ne(tt.toString())}},Mt.prototype.getAvailableImages=function(He){var Ye=this.availableImages[He];return Ye||(Ye=[]),Ye},Mt.prototype.getLayerIndex=function(He){var Ye=this.layerIndexes[He];return Ye||(Ye=this.layerIndexes[He]=new p),Ye},Mt.prototype.getWorkerSource=function(He,Ye,Ne){var We=this;if(this.workerSources[He]||(this.workerSources[He]={}),this.workerSources[He][Ye]||(this.workerSources[He][Ye]={}),!this.workerSources[He][Ye][Ne]){var ot={send:function(tt,Re,Fe){We.actor.send(tt,Re,Fe,He)}};this.workerSources[He][Ye][Ne]=new this.workerSourceTypes[Ye](ot,this.getLayerIndex(He),this.getAvailableImages(He))}return this.workerSources[He][Ye][Ne]},Mt.prototype.getDEMWorkerSource=function(He,Ye){return this.demWorkerSources[He]||(this.demWorkerSources[He]={}),this.demWorkerSources[He][Ye]||(this.demWorkerSources[He][Ye]=new l),this.demWorkerSources[He][Ye]},Mt.prototype.enforceCacheSizeLimit=function(He,Ye){o.enforceCacheSizeLimit(Ye)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Mt(self)),Mt}),k(0,function(o){var T=o.createCommonjsModule(function(B){function G(V){return!q(V)}function q(V){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ne,ue,xe=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(xe);try{ue=new Worker(Le),ne=!0}catch{ne=!1}return ue&&ue.terminate(),URL.revokeObjectURL(Le),ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ne=document.createElement("canvas");ne.width=ne.height=1;var ue=ne.getContext("2d");if(!ue)return!1;var xe=ue.getImageData(0,0,1,1);return xe&&xe.width===ne.width}()?(J=V&&V.failIfMajorPerformanceCaveat,L[J]===void 0&&(L[J]=function(ne){var ue=function(Le){var De=document.createElement("canvas"),Ue=Object.create(G.webGLContextAttributes);return Ue.failIfMajorPerformanceCaveat=Le,De.probablySupportsContext?De.probablySupportsContext("webgl",Ue)||De.probablySupportsContext("experimental-webgl",Ue):De.supportsContext?De.supportsContext("webgl",Ue)||De.supportsContext("experimental-webgl",Ue):De.getContext("webgl",Ue)||De.getContext("experimental-webgl",Ue)}(ne);if(!ue)return!1;var xe=ue.createShader(ue.VERTEX_SHADER);return!(!xe||ue.isContextLost())&&(ue.shaderSource(xe,"void main() {}"),ue.compileShader(xe),ue.getShaderParameter(xe,ue.COMPILE_STATUS)===!0)}(J)),L[J]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var J}B.exports?B.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=q);var L={};G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),_={create:function(B,G,q){var L=o.window.document.createElement(B);return G!==void 0&&(L.className=G),q&&q.appendChild(L),L},createNS:function(B,G){return o.window.document.createElementNS(B,G)}},p=o.window.document&&o.window.document.documentElement.style;function s(B){if(!p)return B[0];for(var G=0;G<B.length;G++)if(B[G]in p)return B[G];return B[0]}var t,i=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);_.disableDrag=function(){p&&i&&(t=p[i],p[i]="none")},_.enableDrag=function(){p&&i&&(p[i]=t)};var r=s(["transform","WebkitTransform"]);_.setTransform=function(B,G){B.style[r]=G};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});o.window.addEventListener("test",a,a),o.window.removeEventListener("test",a,a)}catch{n=!1}_.addEventListener=function(B,G,q,L){L===void 0&&(L={}),"passive"in L&&n?B.addEventListener(G,q,L):B.addEventListener(G,q,L.capture)},_.removeEventListener=function(B,G,q,L){L===void 0&&(L={}),"passive"in L&&n?B.removeEventListener(G,q,L):B.removeEventListener(G,q,L.capture)};var l=function(B){B.preventDefault(),B.stopPropagation(),o.window.removeEventListener("click",l,!0)};function u(B){var G=B.userImage;return!!(G&&G.render&&G.render())&&(B.data.replace(new Uint8Array(G.data.buffer)),!0)}_.suppressClick=function(){o.window.addEventListener("click",l,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",l,!0)},0)},_.mousePos=function(B,G){var q=B.getBoundingClientRect();return new o.Point(G.clientX-q.left-B.clientLeft,G.clientY-q.top-B.clientTop)},_.touchPos=function(B,G){for(var q=B.getBoundingClientRect(),L=[],V=0;V<G.length;V++)L.push(new o.Point(G[V].clientX-q.left-B.clientLeft,G[V].clientY-q.top-B.clientTop));return L},_.mouseButton=function(B){return o.window.InstallTrigger!==void 0&&B.button===2&&B.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:B.button},_.remove=function(B){B.parentNode&&B.parentNode.removeChild(B)};var h=function(B){function G(){B.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var L=0,V=this.requestors;L<V.length;L+=1){var J=V[L],ne=J.ids,ue=J.callback;this._notify(ne,ue)}this.requestors=[]}},G.prototype.getImage=function(q){return this.images[q]},G.prototype.addImage=function(q,L){this._validate(q,L)&&(this.images[q]=L)},G.prototype._validate=function(q,L){var V=!0;return this._validateStretch(L.stretchX,L.data&&L.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),V=!1),this._validateStretch(L.stretchY,L.data&&L.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),V=!1),this._validateContent(L.content,L)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),V=!1),V},G.prototype._validateStretch=function(q,L){if(!q)return!0;for(var V=0,J=0,ne=q;J<ne.length;J+=1){var ue=ne[J];if(ue[0]<V||ue[1]<ue[0]||L<ue[1])return!1;V=ue[1]}return!0},G.prototype._validateContent=function(q,L){return!(q&&(q.length!==4||q[0]<0||L.data.width<q[0]||q[1]<0||L.data.height<q[1]||q[2]<0||L.data.width<q[2]||q[3]<0||L.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},G.prototype.updateImage=function(q,L){var V=this.images[q];L.version=V.version+1,this.images[q]=L,this.updatedImages[q]=!0},G.prototype.removeImage=function(q){var L=this.images[q];delete this.images[q],delete this.patterns[q],L.userImage&&L.userImage.onRemove&&L.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(q,L){var V=!0;if(!this.isLoaded())for(var J=0,ne=q;J<ne.length;J+=1){var ue=ne[J];this.images[ue]||(V=!1)}this.isLoaded()||V?this._notify(q,L):this.requestors.push({ids:q,callback:L})},G.prototype._notify=function(q,L){for(var V={},J=0,ne=q;J<ne.length;J+=1){var ue=ne[J];this.images[ue]||this.fire(new o.Event("styleimagemissing",{id:ue}));var xe=this.images[ue];xe?V[ue]={data:xe.data.clone(),pixelRatio:xe.pixelRatio,sdf:xe.sdf,version:xe.version,stretchX:xe.stretchX,stretchY:xe.stretchY,content:xe.content,hasRenderCallback:!!(xe.userImage&&xe.userImage.render)}:o.warnOnce('Image "'+ue+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}L(null,V)},G.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},G.prototype.getPattern=function(q){var L=this.patterns[q],V=this.getImage(q);if(!V)return null;if(L&&L.position.version===V.version)return L.position;if(L)L.position.version=V.version;else{var J={w:V.data.width+2,h:V.data.height+2,x:0,y:0},ne=new o.ImagePosition(J,V);this.patterns[q]={bin:J,position:ne}}return this._updatePatternAtlas(),this.patterns[q].position},G.prototype.bind=function(q){var L=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(q,this.atlasImage,L.RGBA),this.atlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var q=[];for(var L in this.patterns)q.push(this.patterns[L].bin);var V=o.potpack(q),J=V.w,ne=V.h,ue=this.atlasImage;for(var xe in ue.resize({width:J||1,height:ne||1}),this.patterns){var Le=this.patterns[xe].bin,De=Le.x+1,Ue=Le.y+1,qe=this.images[xe].data,et=qe.width,lt=qe.height;o.RGBAImage.copy(qe,ue,{x:0,y:0},{x:De,y:Ue},{width:et,height:lt}),o.RGBAImage.copy(qe,ue,{x:0,y:lt-1},{x:De,y:Ue-1},{width:et,height:1}),o.RGBAImage.copy(qe,ue,{x:0,y:0},{x:De,y:Ue+lt},{width:et,height:1}),o.RGBAImage.copy(qe,ue,{x:et-1,y:0},{x:De-1,y:Ue},{width:1,height:lt}),o.RGBAImage.copy(qe,ue,{x:0,y:0},{x:De+et,y:Ue},{width:1,height:lt})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(q){for(var L=0,V=q;L<V.length;L+=1){var J=V[L];if(!this.callbackDispatchedThisFrame[J]){this.callbackDispatchedThisFrame[J]=!0;var ne=this.images[J];u(ne)&&this.updateImage(J,ne)}}},G}(o.Evented),c=v,x=v,d=1e20;function v(B,G,q,L,V,J){this.fontSize=B||24,this.buffer=G===void 0?3:G,this.cutoff=L||.25,this.fontFamily=V||"sans-serif",this.fontWeight=J||"normal",this.radius=q||8;var ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ne*ne),this.gridInner=new Float64Array(ne*ne),this.f=new Float64Array(ne),this.d=new Float64Array(ne),this.z=new Float64Array(ne+1),this.v=new Int16Array(ne),this.middle=Math.round(ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(B,G,q,L,V,J,ne){for(var ue=0;ue<G;ue++){for(var xe=0;xe<q;xe++)L[xe]=B[xe*G+ue];for(y(L,V,J,ne,q),xe=0;xe<q;xe++)B[xe*G+ue]=V[xe]}for(xe=0;xe<q;xe++){for(ue=0;ue<G;ue++)L[ue]=B[xe*G+ue];for(y(L,V,J,ne,G),ue=0;ue<G;ue++)B[xe*G+ue]=Math.sqrt(V[ue])}}function y(B,G,q,L,V){q[0]=0,L[0]=-d,L[1]=+d;for(var J=1,ne=0;J<V;J++){for(var ue=(B[J]+J*J-(B[q[ne]]+q[ne]*q[ne]))/(2*J-2*q[ne]);ue<=L[ne];)ne--,ue=(B[J]+J*J-(B[q[ne]]+q[ne]*q[ne]))/(2*J-2*q[ne]);q[++ne]=J,L[ne]=ue,L[ne+1]=+d}for(J=0,ne=0;J<V;J++){for(;L[ne+1]<J;)ne++;G[J]=(J-q[ne])*(J-q[ne])+B[q[ne]]}}v.prototype.draw=function(B){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(B,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),L=0;L<this.size*this.size;L++){var V=G.data[4*L+3]/255;this.gridOuter[L]=V===1?0:V===0?d:Math.pow(Math.max(0,.5-V),2),this.gridInner[L]=V===1?d:V===0?0:Math.pow(Math.max(0,V-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),L=0;L<this.size*this.size;L++){var J=this.gridOuter[L]-this.gridInner[L];q[L]=Math.max(0,Math.min(255,Math.round(255-255*(J/this.radius+this.cutoff))))}return q},c.default=x;var m=function(B,G){this.requestManager=B,this.localIdeographFontFamily=G,this.entries={}};m.prototype.setURL=function(B){this.url=B},m.prototype.getGlyphs=function(B,G){var q=this,L=[];for(var V in B)for(var J=0,ne=B[V];J<ne.length;J+=1){var ue=ne[J];L.push({stack:V,id:ue})}o.asyncAll(L,function(xe,Le){var De=xe.stack,Ue=xe.id,qe=q.entries[De];qe||(qe=q.entries[De]={glyphs:{},requests:{},ranges:{}});var et=qe.glyphs[Ue];if(et===void 0){if(et=q._tinySDF(qe,De,Ue))return qe.glyphs[Ue]=et,void Le(null,{stack:De,id:Ue,glyph:et});var lt=Math.floor(Ue/256);if(256*lt>65535)Le(new Error("glyphs > 65535 not supported"));else if(qe.ranges[lt])Le(null,{stack:De,id:Ue,glyph:et});else{var ft=qe.requests[lt];ft||(ft=qe.requests[lt]=[],m.loadGlyphRange(De,lt,q.url,q.requestManager,function(xt,St){if(St){for(var wt in St)q._doesCharSupportLocalGlyph(+wt)||(qe.glyphs[+wt]=St[+wt]);qe.ranges[lt]=!0}for(var Dt=0,Et=ft;Dt<Et.length;Dt+=1)(0,Et[Dt])(xt,St);delete qe.requests[lt]})),ft.push(function(xt,St){xt?Le(xt):St&&Le(null,{stack:De,id:Ue,glyph:St[Ue]||null})})}}else Le(null,{stack:De,id:Ue,glyph:et})},function(xe,Le){if(xe)G(xe);else if(Le){for(var De={},Ue=0,qe=Le;Ue<qe.length;Ue+=1){var et=qe[Ue],lt=et.stack,ft=et.id,xt=et.glyph;(De[lt]||(De[lt]={}))[ft]=xt&&{id:xt.id,bitmap:xt.bitmap.clone(),metrics:xt.metrics}}G(null,De)}})},m.prototype._doesCharSupportLocalGlyph=function(B){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](B)||o.isChar["Hangul Syllables"](B)||o.isChar.Hiragana(B)||o.isChar.Katakana(B))},m.prototype._tinySDF=function(B,G,q){var L=this.localIdeographFontFamily;if(L&&this._doesCharSupportLocalGlyph(q)){var V=B.tinySDF;if(!V){var J="400";/bold/i.test(G)?J="900":/medium/i.test(G)?J="500":/light/i.test(G)&&(J="200"),V=B.tinySDF=new m.TinySDF(24,3,8,.25,L,J)}return{id:q,bitmap:new o.AlphaImage({width:30,height:30},V.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(B,G,q,L,V){var J=256*G,ne=J+255,ue=L.transformRequest(L.normalizeGlyphsURL(q).replace("{fontstack}",B).replace("{range}",J+"-"+ne),o.ResourceType.Glyphs);o.getArrayBuffer(ue,function(xe,Le){if(xe)V(xe);else if(Le){for(var De={},Ue=0,qe=o.parseGlyphPBF(Le);Ue<qe.length;Ue+=1){var et=qe[Ue];De[et.id]=et}V(null,De)}})},m.TinySDF=c;var b=function(){this.specification=o.styleSpec.light.position};b.prototype.possiblyEvaluate=function(B,G){return o.sphericalToCartesian(B.expression.evaluate(G))},b.prototype.interpolate=function(B,G,q){return{x:o.number(B.x,G.x,q),y:o.number(B.y,G.y,q),z:o.number(B.z,G.z,q)}};var f=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new b,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),S="-transition",w=function(B){function G(q){B.call(this),this._transitionable=new o.Transitionable(f),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(q,L){if(L===void 0&&(L={}),!this._validate(o.validateLight,q,L))for(var V in q){var J=q[V];o.endsWith(V,S)?this._transitionable.setTransition(V.slice(0,-11),J):this._transitionable.setValue(V,J)}},G.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},G.prototype._validate=function(q,L,V){return(!V||V.validate!==!1)&&o.emitValidationErrors(this,q.call(o.validateStyle,o.extend({value:L,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},G}(o.Evented),E=function(B,G){this.width=B,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(B,G){var q=B.join(",")+String(G);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(B,G)),this.dashEntry[q]},E.prototype.getDashRanges=function(B,G,q){var L=[],V=B.length%2==1?-B[B.length-1]*q:0,J=B[0]*q,ne=!0;L.push({left:V,right:J,isDash:ne,zeroLength:B[0]===0});for(var ue=B[0],xe=1;xe<B.length;xe++){ne=!ne;var Le=B[xe];V=ue*q,J=(ue+=Le)*q,L.push({left:V,right:J,isDash:ne,zeroLength:Le===0})}return L},E.prototype.addRoundDash=function(B,G,q){for(var L=G/2,V=-q;V<=q;V++)for(var J=this.nextRow+q+V,ne=this.width*J,ue=0,xe=B[ue],Le=0;Le<this.width;Le++){Le/xe.right>1&&(xe=B[++ue]);var De=Math.abs(Le-xe.left),Ue=Math.abs(Le-xe.right),qe=Math.min(De,Ue),et=void 0,lt=V/q*(L+1);if(xe.isDash){var ft=L-Math.abs(lt);et=Math.sqrt(qe*qe+ft*ft)}else et=L-Math.sqrt(qe*qe+lt*lt);this.data[ne+Le]=Math.max(0,Math.min(255,et+128))}},E.prototype.addRegularDash=function(B){for(var G=B.length-1;G>=0;--G){var q=B[G],L=B[G+1];q.zeroLength?B.splice(G,1):L&&L.isDash===q.isDash&&(L.left=q.left,B.splice(G,1))}var V=B[0],J=B[B.length-1];V.isDash===J.isDash&&(V.left=J.left-this.width,J.right=V.right+this.width);for(var ne=this.width*this.nextRow,ue=0,xe=B[ue],Le=0;Le<this.width;Le++){Le/xe.right>1&&(xe=B[++ue]);var De=Math.abs(Le-xe.left),Ue=Math.abs(Le-xe.right),qe=Math.min(De,Ue),et=xe.isDash?qe:-qe;this.data[ne+Le]=Math.max(0,Math.min(255,et+128))}},E.prototype.addDash=function(B,G){var q=G?7:0,L=2*q+1;if(this.nextRow+L>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var V=0,J=0;J<B.length;J++)V+=B[J];if(V!==0){var ne=this.width/V,ue=this.getDashRanges(B,this.width,ne);G?this.addRoundDash(ue,ne,q):this.addRegularDash(ue)}var xe={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:V};return this.nextRow+=L,this.dirty=!0,xe},E.prototype.bind=function(B){var G=B.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var O=function B(G,q){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var L=this.workerPool.acquire(this.id),V=0;V<L.length;V++){var J=L[V],ne=new B.Actor(J,q,this.id);ne.name="Worker "+V,this.actors.push(ne)}};function C(B,G,q){var L=function(V,J){if(V)return q(V);if(J){var ne=o.pick(o.extend(J,B),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);J.vector_layers&&(ne.vectorLayers=J.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(function(ue){return ue.id})),ne.tiles=G.canonicalizeTileset(ne,B.url),q(null,ne)}};return B.url?o.getJSON(G.transformRequest(G.normalizeSourceURL(B.url),o.ResourceType.Source),L):o.browser.frame(function(){return L(null,B)})}O.prototype.broadcast=function(B,G,q){q=q||function(){},o.asyncAll(this.actors,function(L,V){L.send(B,G,V)},q)},O.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},O.prototype.remove=function(){this.actors.forEach(function(B){B.remove()}),this.actors=[],this.workerPool.release(this.id)},O.Actor=o.Actor;var P=function(B,G,q){this.bounds=o.LngLatBounds.convert(this.validateBounds(B)),this.minzoom=G||0,this.maxzoom=q||24};P.prototype.validateBounds=function(B){return Array.isArray(B)&&B.length===4?[Math.max(-180,B[0]),Math.max(-90,B[1]),Math.min(180,B[2]),Math.min(90,B[3])]:[-180,-90,180,90]},P.prototype.contains=function(B){var G=Math.pow(2,B.z),q=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*G),L=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*G),V=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*G),J=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*G);return B.x>=q&&B.x<V&&B.y>=L&&B.y<J};var D=function(B){function G(q,L,V,J){if(B.call(this),this.id=q,this.dispatcher=V,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(L,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},L),this._collectResourceTiming=L.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(J)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(L,V){q._tileJSONRequest=null,q._loaded=!0,L?q.fire(new o.ErrorEvent(L)):V&&(o.extend(q,V),V.bounds&&(q.tileBounds=new P(V.bounds,q.minzoom,q.maxzoom)),o.postTurnstileEvent(V.tiles,q.map._requestManager._customAccessToken),o.postMapLoadEvent(V.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},G.prototype.onAdd=function(q){this.map=q,this.load()},G.prototype.setSourceProperty=function(q){this._tileJSONRequest&&this._tileJSONRequest.cancel(),q(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},G.prototype.setTiles=function(q){var L=this;return this.setSourceProperty(function(){L._options.tiles=q}),this},G.prototype.setUrl=function(q){var L=this;return this.setSourceProperty(function(){L.url=q,L._options.url=q}),this},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return o.extend({},this._options)},G.prototype.loadTile=function(q,L){var V=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),J={request:this.map._requestManager.transformRequest(V,o.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ne(ue,xe){return delete q.request,q.aborted?L(null):ue&&ue.status!==404?L(ue):(xe&&xe.resourceTiming&&(q.resourceTiming=xe.resourceTiming),this.map._refreshExpiredTiles&&xe&&q.setExpiryData(xe),q.loadVectorData(xe,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),L(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}J.request.collectResourceTiming=this._collectResourceTiming,q.actor&&q.state!=="expired"?q.state==="loading"?q.reloadCallback=L:q.request=q.actor.send("reloadTile",J,ne.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",J,ne.bind(this)))},G.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(o.Evented),U=function(B){function G(q,L,V,J){B.call(this),this.id=q,this.dispatcher=V,this.setEventedParent(J),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},L),o.extend(this,o.pick(L,["url","scheme","tileSize"]))}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(L,V){q._tileJSONRequest=null,q._loaded=!0,L?q.fire(new o.ErrorEvent(L)):V&&(o.extend(q,V),V.bounds&&(q.tileBounds=new P(V.bounds,q.minzoom,q.maxzoom)),o.postTurnstileEvent(V.tiles),o.postMapLoadEvent(V.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(q){this.map=q,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return o.extend({},this._options)},G.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},G.prototype.loadTile=function(q,L){var V=this,J=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=o.getImage(this.map._requestManager.transformRequest(J,o.ResourceType.Tile),function(ne,ue){if(delete q.request,q.aborted)q.state="unloaded",L(null);else if(ne)q.state="errored",L(ne);else if(ue){V.map._refreshExpiredTiles&&q.setExpiryData(ue),delete ue.cacheControl,delete ue.expires;var xe=V.map.painter.context,Le=xe.gl;q.texture=V.map.painter.getTileTexture(ue.width),q.texture?q.texture.update(ue,{useMipmap:!0}):(q.texture=new o.Texture(xe,ue,Le.RGBA,{useMipmap:!0}),q.texture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),xe.extTextureFilterAnisotropic&&Le.texParameterf(Le.TEXTURE_2D,xe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,xe.extTextureFilterAnisotropicMax)),q.state="loaded",o.cacheEntryPossiblyAdded(V.dispatcher),L(null)}})},G.prototype.abortTile=function(q,L){q.request&&(q.request.cancel(),delete q.request),L()},G.prototype.unloadTile=function(q,L){q.texture&&this.map.painter.saveTileTexture(q.texture),L()},G.prototype.hasTransition=function(){return!1},G}(o.Evented),I=function(B){function G(q,L,V,J){B.call(this,q,L,V,J),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},L),this.encoding=L.encoding||"mapbox"}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(q,L){var V=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function J(ne,ue){ne&&(q.state="errored",L(ne)),ue&&(q.dem=ue,q.needsHillshadePrepare=!0,q.state="loaded",L(null))}q.request=o.getImage(this.map._requestManager.transformRequest(V,o.ResourceType.Tile),(function(ne,ue){if(delete q.request,q.aborted)q.state="unloaded",L(null);else if(ne)q.state="errored",L(ne);else if(ue){this.map._refreshExpiredTiles&&q.setExpiryData(ue),delete ue.cacheControl,delete ue.expires;var xe=o.window.ImageBitmap&&ue instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?ue:o.browser.getImageData(ue,1),Le={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:xe,encoding:this.encoding};q.actor&&q.state!=="expired"||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",Le,J.bind(this)))}}).bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},G.prototype._getNeighboringTiles=function(q){var L=q.canonical,V=Math.pow(2,L.z),J=(L.x-1+V)%V,ne=L.x===0?q.wrap-1:q.wrap,ue=(L.x+1+V)%V,xe=L.x+1===V?q.wrap+1:q.wrap,Le={};return Le[new o.OverscaledTileID(q.overscaledZ,ne,L.z,J,L.y).key]={backfilled:!1},Le[new o.OverscaledTileID(q.overscaledZ,xe,L.z,ue,L.y).key]={backfilled:!1},L.y>0&&(Le[new o.OverscaledTileID(q.overscaledZ,ne,L.z,J,L.y-1).key]={backfilled:!1},Le[new o.OverscaledTileID(q.overscaledZ,q.wrap,L.z,L.x,L.y-1).key]={backfilled:!1},Le[new o.OverscaledTileID(q.overscaledZ,xe,L.z,ue,L.y-1).key]={backfilled:!1}),L.y+1<V&&(Le[new o.OverscaledTileID(q.overscaledZ,ne,L.z,J,L.y+1).key]={backfilled:!1},Le[new o.OverscaledTileID(q.overscaledZ,q.wrap,L.z,L.x,L.y+1).key]={backfilled:!1},Le[new o.OverscaledTileID(q.overscaledZ,xe,L.z,ue,L.y+1).key]={backfilled:!1}),Le},G.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},G}(U),N=function(B){function G(q,L,V,J){B.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=V.getActor(),this.setEventedParent(J),this._data=L.data,this._options=o.extend({},L),this._collectResourceTiming=L.collectResourceTiming,this._resourceTiming=[],L.maxzoom!==void 0&&(this.maxzoom=L.maxzoom),L.type&&(this.type=L.type),L.attribution&&(this.attribution=L.attribution),this.promoteId=L.promoteId;var ne=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:L.cluster||!1,geojsonVtOptions:{buffer:(L.buffer!==void 0?L.buffer:128)*ne,tolerance:(L.tolerance!==void 0?L.tolerance:.375)*ne,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:L.lineMetrics||!1,generateId:L.generateId||!1},superclusterOptions:{maxZoom:L.clusterMaxZoom!==void 0?Math.min(L.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,L.clusterMinPoints||2),extent:o.EXTENT,radius:(L.clusterRadius||50)*ne,log:!1,generateId:L.generateId||!1},clusterProperties:L.clusterProperties,filter:L.filter},L.workerOptions)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var q=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(L){if(L)q.fire(new o.ErrorEvent(L));else{var V={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(V.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new o.Event("data",V))}})},G.prototype.onAdd=function(q){this.map=q,this.load()},G.prototype.setData=function(q){var L=this;return this._data=q,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(V){if(V)L.fire(new o.ErrorEvent(V));else{var J={dataType:"source",sourceDataType:"content"};L._collectResourceTiming&&L._resourceTiming&&L._resourceTiming.length>0&&(J.resourceTiming=L._resourceTiming,L._resourceTiming=[]),L.fire(new o.Event("data",J))}}),this},G.prototype.getClusterExpansionZoom=function(q,L){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},L),this},G.prototype.getClusterChildren=function(q,L){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},L),this},G.prototype.getClusterLeaves=function(q,L,V,J){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:L,offset:V},J),this},G.prototype._updateWorkerData=function(q){var L=this;this._loaded=!1;var V=o.extend({},this.workerOptions),J=this._data;typeof J=="string"?(V.request=this.map._requestManager.transformRequest(o.browser.resolveURL(J),o.ResourceType.Source),V.request.collectResourceTiming=this._collectResourceTiming):V.data=JSON.stringify(J),this.actor.send(this.type+".loadData",V,function(ne,ue){L._removed||ue&&ue.abandoned||(L._loaded=!0,ue&&ue.resourceTiming&&ue.resourceTiming[L.id]&&(L._resourceTiming=ue.resourceTiming[L.id].slice(0)),L.actor.send(L.type+".coalesce",{source:V.source},null),q(ne))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(q,L){var V=this,J=q.actor?"reloadTile":"loadTile";q.actor=this.actor;var ne={type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};q.request=this.actor.send(J,ne,function(ue,xe){return delete q.request,q.unloadVectorData(),q.aborted?L(null):ue?L(ue):(q.loadVectorData(xe,V.map.painter,J==="reloadTile"),L(null))})},G.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},G.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(o.Evented),W=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(B){function G(q,L,V,J){B.call(this),this.id=q,this.dispatcher=V,this.coordinates=L.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(J),this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(q,L){var V=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(J,ne){V._loaded=!0,J?V.fire(new o.ErrorEvent(J)):ne&&(V.image=ne,q&&(V.coordinates=q),L&&L(),V._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(q){var L=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){L.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(q){this.map=q,this.load()},G.prototype.setCoordinates=function(q){var L=this;this.coordinates=q;var V=q.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(ne){for(var ue=1/0,xe=1/0,Le=-1/0,De=-1/0,Ue=0,qe=ne;Ue<qe.length;Ue+=1){var et=qe[Ue];ue=Math.min(ue,et.x),xe=Math.min(xe,et.y),Le=Math.max(Le,et.x),De=Math.max(De,et.y)}var lt=Le-ue,ft=De-xe,xt=Math.max(lt,ft),St=Math.max(0,Math.floor(-Math.log(xt)/Math.LN2)),wt=Math.pow(2,St);return new o.CanonicalTileID(St,Math.floor((ue+Le)/2*wt),Math.floor((xe+De)/2*wt))}(V),this.minzoom=this.maxzoom=this.tileID.z;var J=V.map(function(ne){return L.tileID.getTilePoint(ne)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(J[0].x,J[0].y,0,0),this._boundsArray.emplaceBack(J[1].x,J[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(J[3].x,J[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(J[2].x,J[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var q=this.map.painter.context,L=q.gl;for(var V in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(q,this.image,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var J=this.tiles[V];J.state!=="loaded"&&(J.state="loaded",J.texture=this.texture)}}},G.prototype.loadTile=function(q,L){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},L(null)):(q.state="errored",L(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(o.Evented),j=function(B){function G(q,L,V,J){B.call(this,q,L,V,J),this.roundZoom=!0,this.type="video",this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var q=this;this._loaded=!1;var L=this.options;this.urls=[];for(var V=0,J=L.urls;V<J.length;V+=1){var ne=J[V];this.urls.push(this.map._requestManager.transformRequest(ne,o.ResourceType.Source).url)}o.getVideo(this.urls,function(ue,xe){q._loaded=!0,ue?q.fire(new o.ErrorEvent(ue)):xe&&(q.video=xe,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(q){if(this.video){var L=this.video.seekable;q<L.start(0)||q>L.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+L.start(0)+" and "+L.end(0)+"-second mark."))):this.video.currentTime=q}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var q=this.map.painter.context,L=q.gl;for(var V in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE),L.texSubImage2D(L.TEXTURE_2D,0,0,0,L.RGBA,L.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(q,this.video,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var J=this.tiles[V];J.state!=="loaded"&&(J.state="loaded",J.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(F),H=function(B){function G(q,L,V,J){B.call(this,q,L,V,J),L.coordinates?Array.isArray(L.coordinates)&&L.coordinates.length===4&&!L.coordinates.some(function(ne){return!Array.isArray(ne)||ne.length!==2||ne.some(function(ue){return typeof ue!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'missing required property "coordinates"'))),L.animate&&typeof L.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),L.canvas?typeof L.canvas=="string"||L.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=L,this.animate=L.animate===void 0||L.animate}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var L=this.map.painter.context,V=L.gl;for(var J in this.boundsBuffer||(this.boundsBuffer=L.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(L,this.canvas,V.RGBA,{premultiply:!0}),this.tiles){var ne=this.tiles[J];ne.state!=="loaded"&&(ne.state="loaded",ne.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var q=0,L=[this.canvas.width,this.canvas.height];q<L.length;q+=1){var V=L[q];if(isNaN(V)||V<=0)return!0}return!1},G}(F),te={vector:D,raster:U,"raster-dem":I,geojson:N,video:j,image:F,canvas:H};function Q(B,G){var q=o.identity([]);return o.translate(q,q,[1,1,0]),o.scale(q,q,[.5*B.width,.5*B.height,1]),o.multiply(q,q,B.calculatePosMatrix(G.toUnwrapped()))}function $(B,G,q,L,V,J){var ne=function(ft,xt,St){if(ft)for(var wt=0,Dt=ft;wt<Dt.length;wt+=1){var Et=xt[Dt[wt]];if(Et&&Et.source===St&&Et.type==="fill-extrusion")return!0}else for(var Yt in xt){var qt=xt[Yt];if(qt.source===St&&qt.type==="fill-extrusion")return!0}return!1}(V&&V.layers,G,B.id),ue=J.maxPitchScaleFactor(),xe=B.tilesIn(L,ue,ne);xe.sort(K);for(var Le=[],De=0,Ue=xe;De<Ue.length;De+=1){var qe=Ue[De];Le.push({wrappedTileID:qe.tileID.wrapped().key,queryResults:qe.tile.queryRenderedFeatures(G,q,B._state,qe.queryGeometry,qe.cameraQueryGeometry,qe.scale,V,J,ue,Q(B.transform,qe.tileID))})}var et=function(ft){for(var xt={},St={},wt=0,Dt=ft;wt<Dt.length;wt+=1){var Et=Dt[wt],Yt=Et.queryResults,qt=Et.wrappedTileID,Bt=St[qt]=St[qt]||{};for(var fn in Yt)for(var gn=Yt[fn],kn=Bt[fn]=Bt[fn]||{},On=xt[fn]=xt[fn]||[],Nn=0,er=gn;Nn<er.length;Nn+=1){var or=er[Nn];kn[or.featureIndex]||(kn[or.featureIndex]=!0,On.push(or))}}return xt}(Le);for(var lt in et)et[lt].forEach(function(ft){var xt=ft.feature,St=B.getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=St});return et}function K(B,G){var q=B.tileID,L=G.tileID;return q.overscaledZ-L.overscaledZ||q.canonical.y-L.canonical.y||q.wrap-L.wrap||q.canonical.x-L.canonical.x}var X=function(B,G){this.max=B,this.onRemove=G,this.reset()};X.prototype.reset=function(){for(var B in this.data)for(var G=0,q=this.data[B];G<q.length;G+=1){var L=q[G];L.timeout&&clearTimeout(L.timeout),this.onRemove(L.value)}return this.data={},this.order=[],this},X.prototype.add=function(B,G,q){var L=this,V=B.wrapped().key;this.data[V]===void 0&&(this.data[V]=[]);var J={value:G,timeout:void 0};if(q!==void 0&&(J.timeout=setTimeout(function(){L.remove(B,J)},q)),this.data[V].push(J),this.order.push(V),this.order.length>this.max){var ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this},X.prototype.has=function(B){return B.wrapped().key in this.data},X.prototype.getAndRemove=function(B){return this.has(B)?this._getAndRemoveByKey(B.wrapped().key):null},X.prototype._getAndRemoveByKey=function(B){var G=this.data[B].shift();return G.timeout&&clearTimeout(G.timeout),this.data[B].length===0&&delete this.data[B],this.order.splice(this.order.indexOf(B),1),G.value},X.prototype.getByKey=function(B){var G=this.data[B];return G?G[0].value:null},X.prototype.get=function(B){return this.has(B)?this.data[B.wrapped().key][0].value:null},X.prototype.remove=function(B,G){if(!this.has(B))return this;var q=B.wrapped().key,L=G===void 0?0:this.data[q].indexOf(G),V=this.data[q][L];return this.data[q].splice(L,1),V.timeout&&clearTimeout(V.timeout),this.data[q].length===0&&delete this.data[q],this.onRemove(V.value),this.order.splice(this.order.indexOf(q),1),this},X.prototype.setMaxSize=function(B){for(this.max=B;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},X.prototype.filter=function(B){var G=[];for(var q in this.data)for(var L=0,V=this.data[q];L<V.length;L+=1){var J=V[L];B(J.value)||G.push(J)}for(var ne=0,ue=G;ne<ue.length;ne+=1){var xe=ue[ne];this.remove(xe.value.tileID,xe)}};var Y=function(B,G,q){this.context=B;var L=B.gl;this.buffer=L.createBuffer(),this.dynamicDraw=!!q,this.context.unbindVAO(),B.bindElementBuffer.set(this.buffer),L.bufferData(L.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};Y.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Y.prototype.updateData=function(B){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,B.arrayBuffer)},Y.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var re={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},se=function(B,G,q,L){this.length=G.length,this.attributes=q,this.itemSize=G.bytesPerElement,this.dynamicDraw=L,this.context=B;var V=B.gl;this.buffer=V.createBuffer(),B.bindVertexBuffer.set(this.buffer),V.bufferData(V.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?V.DYNAMIC_DRAW:V.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};se.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},se.prototype.updateData=function(B){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,B.arrayBuffer)},se.prototype.enableAttributes=function(B,G){for(var q=0;q<this.attributes.length;q++){var L=this.attributes[q],V=G.attributes[L.name];V!==void 0&&B.enableVertexAttribArray(V)}},se.prototype.setVertexAttribPointers=function(B,G,q){for(var L=0;L<this.attributes.length;L++){var V=this.attributes[L],J=G.attributes[V.name];J!==void 0&&B.vertexAttribPointer(J,V.components,B[re[V.type]],!1,this.itemSize,V.offset+this.itemSize*(q||0))}},se.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(B){this.gl=B.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(B){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var ce=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return o.Color.transparent},G.prototype.set=function(q){var L=this.current;(q.r!==L.r||q.g!==L.g||q.b!==L.b||q.a!==L.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},G}(ae),fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},G}(ae),he=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},G}(ae),ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||q[2]!==L[2]||q[3]!==L[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},G}(ae),ye=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},G}(ae),me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},G}(ae),Me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(q){var L=this.current;(q.func!==L.func||q.ref!==L.ref||q.mask!==L.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},G}(ae),Pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||q[2]!==L[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},G}(ae),ge=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;q?L.enable(L.STENCIL_TEST):L.disable(L.STENCIL_TEST),this.current=q,this.dirty=!1}},G}(ae),oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},G}(ae),ie=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;q?L.enable(L.DEPTH_TEST):L.disable(L.DEPTH_TEST),this.current=q,this.dirty=!1}},G}(ae),de=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},G}(ae),Se=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;q?L.enable(L.BLEND):L.disable(L.BLEND),this.current=q,this.dirty=!1}},G}(ae),_e=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},G}(ae),we=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return o.Color.transparent},G.prototype.set=function(q){var L=this.current;(q.r!==L.r||q.g!==L.g||q.b!==L.b||q.a!==L.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},G}(ae),Ae=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},G}(ae),Oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;q?L.enable(L.CULL_FACE):L.disable(L.CULL_FACE),this.current=q,this.dirty=!1}},G}(ae),ze=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},G}(ae),pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},G}(ae),be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},G}(ae),ke=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},G}(ae),Ie=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||q[2]!==L[2]||q[3]!==L[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},G}(ae),Ee=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.bindFramebuffer(L.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},G}(ae),Be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.bindRenderbuffer(L.RENDERBUFFER,q),this.current=q,this.dirty=!1}},G}(ae),Ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.bindTexture(L.TEXTURE_2D,q),this.current=q,this.dirty=!1}},G}(ae),Ze=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.bindBuffer(L.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},G}(ae),rt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){var L=this.gl;L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},G}(ae),it=function(B){function G(q){B.call(this,q),this.vao=q.extVertexArrayObject}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},G}(ae),dt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},G}(ae),vt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},G}(ae),ht=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},G}(ae),Qe=function(B){function G(q,L){B.call(this,q),this.context=q,this.parent=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(ae),Je=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},G}(Qe),Tt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.RENDERBUFFER,q),this.current=q,this.dirty=!1}},G}(Qe),Ot=function(B,G,q,L){this.context=B,this.width=G,this.height=q;var V=B.gl,J=this.framebuffer=V.createFramebuffer();this.colorAttachment=new Je(B,J),L&&(this.depthAttachment=new Tt(B,J))};Ot.prototype.destroy=function(){var B=this.context.gl,G=this.colorAttachment.get();if(G&&B.deleteTexture(G),this.depthAttachment){var q=this.depthAttachment.get();q&&B.deleteRenderbuffer(q)}B.deleteFramebuffer(this.framebuffer)};var Pt=function(B,G,q){this.func=B,this.mask=G,this.range=q};Pt.ReadOnly=!1,Pt.ReadWrite=!0,Pt.disabled=new Pt(519,Pt.ReadOnly,[0,1]);var Mt=7680,He=function(B,G,q,L,V,J){this.test=B,this.ref=G,this.mask=q,this.fail=L,this.depthFail=V,this.pass=J};He.disabled=new He({func:519,mask:0},0,0,Mt,Mt,Mt);var Ye=function(B,G,q){this.blendFunction=B,this.blendColor=G,this.mask=q};Ye.Replace=[1,0],Ye.disabled=new Ye(Ye.Replace,o.Color.transparent,[!1,!1,!1,!1]),Ye.unblended=new Ye(Ye.Replace,o.Color.transparent,[!0,!0,!0,!0]),Ye.alphaBlended=new Ye([1,771],o.Color.transparent,[!0,!0,!0,!0]);var Ne=function(B,G,q){this.enable=B,this.mode=G,this.frontFace=q};Ne.disabled=new Ne(!1,1029,2305),Ne.backCCW=new Ne(!0,1029,2305);var We=function(B){this.gl=B,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ce(this),this.clearDepth=new fe(this),this.clearStencil=new he(this),this.colorMask=new ve(this),this.depthMask=new ye(this),this.stencilMask=new me(this),this.stencilFunc=new Me(this),this.stencilOp=new Pe(this),this.stencilTest=new ge(this),this.depthRange=new oe(this),this.depthTest=new ie(this),this.depthFunc=new de(this),this.blend=new Se(this),this.blendFunc=new _e(this),this.blendColor=new we(this),this.blendEquation=new Ae(this),this.cullFace=new Oe(this),this.cullFaceSide=new ze(this),this.frontFace=new pe(this),this.program=new be(this),this.activeTexture=new ke(this),this.viewport=new Ie(this),this.bindFramebuffer=new Ee(this),this.bindRenderbuffer=new Be(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new Ze(this),this.bindElementBuffer=new rt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new it(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new ht(this),this.extTextureFilterAnisotropic=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=B.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=B.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(B.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=B.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=B.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE)};We.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},We.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},We.prototype.createIndexBuffer=function(B,G){return new Y(this,B,G)},We.prototype.createVertexBuffer=function(B,G,q){return new se(this,B,G,q)},We.prototype.createRenderbuffer=function(B,G,q){var L=this.gl,V=L.createRenderbuffer();return this.bindRenderbuffer.set(V),L.renderbufferStorage(L.RENDERBUFFER,B,G,q),this.bindRenderbuffer.set(null),V},We.prototype.createFramebuffer=function(B,G,q){return new Ot(this,B,G,q)},We.prototype.clear=function(B){var G=B.color,q=B.depth,L=this.gl,V=0;G&&(V|=L.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),q!==void 0&&(V|=L.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),L.clear(V)},We.prototype.setCullFace=function(B){B.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(B.mode),this.frontFace.set(B.frontFace))},We.prototype.setDepthMode=function(B){B.func!==this.gl.ALWAYS||B.mask?(this.depthTest.set(!0),this.depthFunc.set(B.func),this.depthMask.set(B.mask),this.depthRange.set(B.range)):this.depthTest.set(!1)},We.prototype.setStencilMode=function(B){B.test.func!==this.gl.ALWAYS||B.mask?(this.stencilTest.set(!0),this.stencilMask.set(B.mask),this.stencilOp.set([B.fail,B.depthFail,B.pass]),this.stencilFunc.set({func:B.test.func,ref:B.ref,mask:B.test.mask})):this.stencilTest.set(!1)},We.prototype.setColorMode=function(B){o.deepEqual(B.blendFunction,Ye.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(B.blendFunction),this.blendColor.set(B.blendColor)),this.colorMask.set(B.mask)},We.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(B){function G(q,L,V){var J=this;B.call(this),this.id=q,this.dispatcher=V,this.on("data",function(ne){ne.dataType==="source"&&ne.sourceDataType==="metadata"&&(J._sourceLoaded=!0),J._sourceLoaded&&!J._paused&&ne.dataType==="source"&&ne.sourceDataType==="content"&&(J.reload(),J.transform&&J.update(J.transform))}),this.on("error",function(){J._sourceErrored=!0}),this._source=function(ne,ue,xe,Le){var De=new te[ue.type](ne,ue,xe,Le);if(De.id!==ne)throw new Error("Expected Source id to be "+ne+" instead of "+De.id);return o.bindAll(["load","abort","unload","serialize","prepare"],De),De}(q,L,V,this),this._tiles={},this._cache=new X(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},G.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var L=this._tiles[q];if(L.state!=="loaded"&&L.state!=="errored")return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(q,L){return this._source.loadTile(q,L)},G.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},G.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(q){for(var L in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var V=this._tiles[L];V.upload(q),V.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return o.values(this._tiles).map(function(q){return q.tileID}).sort(tt).map(function(q){return q.key})},G.prototype.getRenderableIds=function(q){var L=this,V=[];for(var J in this._tiles)this._isIdRenderable(J,q)&&V.push(this._tiles[J]);return q?V.sort(function(ne,ue){var xe=ne.tileID,Le=ue.tileID,De=new o.Point(xe.canonical.x,xe.canonical.y)._rotate(L.transform.angle),Ue=new o.Point(Le.canonical.x,Le.canonical.y)._rotate(L.transform.angle);return xe.overscaledZ-Le.overscaledZ||Ue.y-De.y||Ue.x-De.x}).map(function(ne){return ne.tileID.key}):V.map(function(ne){return ne.tileID}).sort(tt).map(function(ne){return ne.key})},G.prototype.hasRenderableParent=function(q){var L=this.findLoadedParent(q,0);return!!L&&this._isIdRenderable(L.tileID.key)},G.prototype._isIdRenderable=function(q,L){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(L||!this._tiles[q].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)this._tiles[q].state!=="errored"&&this._reloadTile(q,"reloading")},G.prototype._reloadTile=function(q,L){var V=this._tiles[q];V&&(V.state!=="loading"&&(V.state=L),this._loadTile(V,this._tileLoaded.bind(this,V,q,L)))},G.prototype._tileLoaded=function(q,L,V,J){if(J)return q.state="errored",void(J.status!==404?this._source.fire(new o.ErrorEvent(J,{tile:q})):this.update(this.transform));q.timeAdded=o.browser.now(),V==="expired"&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(L,q),this.getSource().type==="raster-dem"&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},G.prototype._backfillDEM=function(q){for(var L=this.getRenderableIds(),V=0;V<L.length;V++){var J=L[V];if(q.neighboringTiles&&q.neighboringTiles[J]){var ne=this.getTileByID(J);ue(q,ne),ue(ne,q)}}function ue(xe,Le){xe.needsHillshadePrepare=!0;var De=Le.tileID.canonical.x-xe.tileID.canonical.x,Ue=Le.tileID.canonical.y-xe.tileID.canonical.y,qe=Math.pow(2,xe.tileID.canonical.z),et=Le.tileID.key;De===0&&Ue===0||Math.abs(Ue)>1||(Math.abs(De)>1&&(Math.abs(De+qe)===1?De+=qe:Math.abs(De-qe)===1&&(De-=qe)),Le.dem&&xe.dem&&(xe.dem.backfillBorder(Le.dem,De,Ue),xe.neighboringTiles&&xe.neighboringTiles[et]&&(xe.neighboringTiles[et].backfilled=!0)))}},G.prototype.getTile=function(q){return this.getTileByID(q.key)},G.prototype.getTileByID=function(q){return this._tiles[q]},G.prototype._retainLoadedChildren=function(q,L,V,J){for(var ne in this._tiles){var ue=this._tiles[ne];if(!(J[ne]||!ue.hasData()||ue.tileID.overscaledZ<=L||ue.tileID.overscaledZ>V)){for(var xe=ue.tileID;ue&&ue.tileID.overscaledZ>L+1;){var Le=ue.tileID.scaledTo(ue.tileID.overscaledZ-1);(ue=this._tiles[Le.key])&&ue.hasData()&&(xe=Le)}for(var De=xe;De.overscaledZ>L;)if(q[(De=De.scaledTo(De.overscaledZ-1)).key]){J[xe.key]=xe;break}}}},G.prototype.findLoadedParent=function(q,L){if(q.key in this._loadedParentTiles){var V=this._loadedParentTiles[q.key];return V&&V.tileID.overscaledZ>=L?V:null}for(var J=q.overscaledZ-1;J>=L;J--){var ne=q.scaledTo(J),ue=this._getLoadedTile(ne);if(ue)return ue}},G.prototype._getLoadedTile=function(q){var L=this._tiles[q.key];return L&&L.hasData()?L:this._cache.getByKey(q.wrapped().key)},G.prototype.updateCacheSize=function(q){var L=(Math.ceil(q.width/this._source.tileSize)+1)*(Math.ceil(q.height/this._source.tileSize)+1),V=Math.floor(5*L),J=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,V):V;this._cache.setMaxSize(J)},G.prototype.handleWrapJump=function(q){var L=(q-(this._prevLng===void 0?q:this._prevLng))/360,V=Math.round(L);if(this._prevLng=q,V){var J={};for(var ne in this._tiles){var ue=this._tiles[ne];ue.tileID=ue.tileID.unwrapTo(ue.tileID.wrap+V),J[ue.tileID.key]=ue}for(var xe in this._tiles=J,this._timers)clearTimeout(this._timers[xe]),delete this._timers[xe];for(var Le in this._tiles){var De=this._tiles[Le];this._setTileReloadTimer(Le,De)}}},G.prototype.update=function(q){var L=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var V;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?V=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Bt){return new o.OverscaledTileID(Bt.canonical.z,Bt.wrap,Bt.canonical.z,Bt.canonical.x,Bt.canonical.y)}):(V=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(V=V.filter(function(Bt){return L._source.hasTile(Bt)}))):V=[];var J=q.coveringZoomLevel(this._source),ne=Math.max(J-G.maxOverzooming,this._source.minzoom),ue=Math.max(J+G.maxUnderzooming,this._source.minzoom),xe=this._updateRetainedTiles(V,J);if(Re(this._source.type)){for(var Le={},De={},Ue=0,qe=Object.keys(xe);Ue<qe.length;Ue+=1){var et=qe[Ue],lt=xe[et],ft=this._tiles[et];if(ft&&!(ft.fadeEndTime&&ft.fadeEndTime<=o.browser.now())){var xt=this.findLoadedParent(lt,ne);xt&&(this._addTile(xt.tileID),Le[xt.tileID.key]=xt.tileID),De[et]=lt}}for(var St in this._retainLoadedChildren(De,J,ue,xe),Le)xe[St]||(this._coveredTiles[St]=!0,xe[St]=Le[St])}for(var wt in xe)this._tiles[wt].clearFadeHold();for(var Dt=0,Et=o.keysDifference(this._tiles,xe);Dt<Et.length;Dt+=1){var Yt=Et[Dt],qt=this._tiles[Yt];qt.hasSymbolBuckets&&!qt.holdingForFade()?qt.setHoldDuration(this.map._fadeDuration):qt.hasSymbolBuckets&&!qt.symbolFadeFinished()||this._removeTile(Yt)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},G.prototype._updateRetainedTiles=function(q,L){for(var V={},J={},ne=Math.max(L-G.maxOverzooming,this._source.minzoom),ue=Math.max(L+G.maxUnderzooming,this._source.minzoom),xe={},Le=0,De=q;Le<De.length;Le+=1){var Ue=De[Le],qe=this._addTile(Ue);V[Ue.key]=Ue,qe.hasData()||L<this._source.maxzoom&&(xe[Ue.key]=Ue)}this._retainLoadedChildren(xe,L,ue,V);for(var et=0,lt=q;et<lt.length;et+=1){var ft=lt[et],xt=this._tiles[ft.key];if(!xt.hasData()){if(L+1>this._source.maxzoom){var St=ft.children(this._source.maxzoom)[0],wt=this.getTile(St);if(wt&&wt.hasData()){V[St.key]=St;continue}}else{var Dt=ft.children(this._source.maxzoom);if(V[Dt[0].key]&&V[Dt[1].key]&&V[Dt[2].key]&&V[Dt[3].key])continue}for(var Et=xt.wasRequested(),Yt=ft.overscaledZ-1;Yt>=ne;--Yt){var qt=ft.scaledTo(Yt);if(J[qt.key]||(J[qt.key]=!0,!(xt=this.getTile(qt))&&Et&&(xt=this._addTile(qt)),xt&&(V[qt.key]=qt,Et=xt.wasRequested(),xt.hasData())))break}}}return V},G.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var L=[],V=void 0,J=this._tiles[q].tileID;J.overscaledZ>0;){if(J.key in this._loadedParentTiles){V=this._loadedParentTiles[J.key];break}L.push(J.key);var ne=J.scaledTo(J.overscaledZ-1);if(V=this._getLoadedTile(ne))break;J=ne}for(var ue=0,xe=L;ue<xe.length;ue+=1){var Le=xe[ue];this._loadedParentTiles[Le]=V}}},G.prototype._addTile=function(q){var L=this._tiles[q.key];if(L)return L;(L=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,L),L.tileID=q,this._state.initializeTileState(L,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,L)));var V=!!L;return V||(L=new o.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(L,this._tileLoaded.bind(this,L,q.key,L.state))),L?(L.uses++,this._tiles[q.key]=L,V||this._source.fire(new o.Event("dataloading",{tile:L,coord:L.tileID,dataType:"source"})),L):null},G.prototype._setTileReloadTimer=function(q,L){var V=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var J=L.getExpiryTimeout();J&&(this._timers[q]=setTimeout(function(){V._reloadTile(q,"expired"),delete V._timers[q]},J))},G.prototype._removeTile=function(q){var L=this._tiles[q];L&&(L.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),L.uses>0||(L.hasData()&&L.state!=="reloading"?this._cache.add(L.tileID,L,L.getExpiryTimeout()):(L.aborted=!0,this._abortTile(L),this._unloadTile(L))))},G.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},G.prototype.tilesIn=function(q,L,V){var J=this,ne=[],ue=this.transform;if(!ue)return ne;for(var xe=V?ue.getCameraQueryGeometry(q):q,Le=q.map(function(Yt){return ue.pointCoordinate(Yt)}),De=xe.map(function(Yt){return ue.pointCoordinate(Yt)}),Ue=this.getIds(),qe=1/0,et=1/0,lt=-1/0,ft=-1/0,xt=0,St=De;xt<St.length;xt+=1){var wt=St[xt];qe=Math.min(qe,wt.x),et=Math.min(et,wt.y),lt=Math.max(lt,wt.x),ft=Math.max(ft,wt.y)}for(var Dt=function(Yt){var qt=J._tiles[Ue[Yt]];if(!qt.holdingForFade()){var Bt=qt.tileID,fn=Math.pow(2,ue.zoom-qt.tileID.overscaledZ),gn=L*qt.queryPadding*o.EXTENT/qt.tileSize/fn,kn=[Bt.getTilePoint(new o.MercatorCoordinate(qe,et)),Bt.getTilePoint(new o.MercatorCoordinate(lt,ft))];if(kn[0].x-gn<o.EXTENT&&kn[0].y-gn<o.EXTENT&&kn[1].x+gn>=0&&kn[1].y+gn>=0){var On=Le.map(function(er){return Bt.getTilePoint(er)}),Nn=De.map(function(er){return Bt.getTilePoint(er)});ne.push({tile:qt,tileID:Bt,queryGeometry:On,cameraQueryGeometry:Nn,scale:fn})}}},Et=0;Et<Ue.length;Et++)Dt(Et);return ne},G.prototype.getVisibleCoordinates=function(q){for(var L=this,V=this.getRenderableIds(q).map(function(xe){return L._tiles[xe].tileID}),J=0,ne=V;J<ne.length;J+=1){var ue=ne[J];ue.posMatrix=this.transform.calculatePosMatrix(ue.toUnwrapped())}return V},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Re(this._source.type))for(var q in this._tiles){var L=this._tiles[q];if(L.fadeEndTime!==void 0&&L.fadeEndTime>=o.browser.now())return!0}return!1},G.prototype.setFeatureState=function(q,L,V){q=q||"_geojsonTileLayer",this._state.updateState(q,L,V)},G.prototype.removeFeatureState=function(q,L,V){q=q||"_geojsonTileLayer",this._state.removeFeatureState(q,L,V)},G.prototype.getFeatureState=function(q,L){return q=q||"_geojsonTileLayer",this._state.getState(q,L)},G.prototype.setDependencies=function(q,L,V){var J=this._tiles[q];J&&J.setDependencies(L,V)},G.prototype.reloadTilesForDependencies=function(q,L){for(var V in this._tiles)this._tiles[V].hasDependency(q,L)&&this._reloadTile(V,"reloading");this._cache.filter(function(J){return!J.hasDependency(q,L)})},G}(o.Evented);function tt(B,G){var q=Math.abs(2*B.wrap)-+(B.wrap<0),L=Math.abs(2*G.wrap)-+(G.wrap<0);return B.overscaledZ-G.overscaledZ||L-q||G.canonical.y-B.canonical.y||G.canonical.x-B.canonical.x}function Re(B){return B==="raster"||B==="image"||B==="video"}function Fe(){return new o.window.Worker(at.workerUrl)}ot.maxOverzooming=10,ot.maxUnderzooming=3;var nt="mapboxgl_preloaded_worker_pool",Ge=function(){this.active={}};Ge.prototype.acquire=function(B){if(!this.workers)for(this.workers=[];this.workers.length<Ge.workerCount;)this.workers.push(new Fe);return this.active[B]=!0,this.workers.slice()},Ge.prototype.release=function(B){delete this.active[B],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},Ge.prototype.isPreloaded=function(){return!!this.active[nt]},Ge.prototype.numActive=function(){return Object.keys(this.active).length};var ct,pt=Math.floor(o.browser.hardwareConcurrency/2);function gt(){return ct||(ct=new Ge),ct}function ut(B,G){var q={};for(var L in B)L!=="ref"&&(q[L]=B[L]);return o.refProperties.forEach(function(V){V in G&&(q[V]=G[V])}),q}function kt(B){B=B.slice();for(var G=Object.create(null),q=0;q<B.length;q++)G[B[q].id]=B[q];for(var L=0;L<B.length;L++)"ref"in B[L]&&(B[L]=ut(B[L],G[B[L].ref]));return B}Ge.workerCount=Math.max(Math.min(pt,6),1);var mt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function At(B,G,q){q.push({command:mt.addSource,args:[B,G[B]]})}function Lt(B,G,q){G.push({command:mt.removeSource,args:[B]}),q[B]=!0}function Ct(B,G,q,L){Lt(B,q,L),At(B,G,q)}function zt(B,G,q){var L;for(L in B[q])if(B[q].hasOwnProperty(L)&&L!=="data"&&!o.deepEqual(B[q][L],G[q][L]))return!1;for(L in G[q])if(G[q].hasOwnProperty(L)&&L!=="data"&&!o.deepEqual(B[q][L],G[q][L]))return!1;return!0}function Gt(B,G,q,L,V,J){var ne;for(ne in G=G||{},B=B||{})B.hasOwnProperty(ne)&&(o.deepEqual(B[ne],G[ne])||q.push({command:J,args:[L,ne,G[ne],V]}));for(ne in G)G.hasOwnProperty(ne)&&!B.hasOwnProperty(ne)&&(o.deepEqual(B[ne],G[ne])||q.push({command:J,args:[L,ne,G[ne],V]}))}function rn(B){return B.id}function Nt(B,G){return B[G.id]=G,B}function Wt(B,G){if(!B)return[{command:mt.setStyle,args:[G]}];var q=[];try{if(!o.deepEqual(B.version,G.version))return[{command:mt.setStyle,args:[G]}];o.deepEqual(B.center,G.center)||q.push({command:mt.setCenter,args:[G.center]}),o.deepEqual(B.zoom,G.zoom)||q.push({command:mt.setZoom,args:[G.zoom]}),o.deepEqual(B.bearing,G.bearing)||q.push({command:mt.setBearing,args:[G.bearing]}),o.deepEqual(B.pitch,G.pitch)||q.push({command:mt.setPitch,args:[G.pitch]}),o.deepEqual(B.sprite,G.sprite)||q.push({command:mt.setSprite,args:[G.sprite]}),o.deepEqual(B.glyphs,G.glyphs)||q.push({command:mt.setGlyphs,args:[G.glyphs]}),o.deepEqual(B.transition,G.transition)||q.push({command:mt.setTransition,args:[G.transition]}),o.deepEqual(B.light,G.light)||q.push({command:mt.setLight,args:[G.light]});var L={},V=[];(function(ne,ue,xe,Le){var De;for(De in ue=ue||{},ne=ne||{})ne.hasOwnProperty(De)&&(ue.hasOwnProperty(De)||Lt(De,xe,Le));for(De in ue)ue.hasOwnProperty(De)&&(ne.hasOwnProperty(De)?o.deepEqual(ne[De],ue[De])||(ne[De].type==="geojson"&&ue[De].type==="geojson"&&zt(ne,ue,De)?xe.push({command:mt.setGeoJSONSourceData,args:[De,ue[De].data]}):Ct(De,ue,xe,Le)):At(De,ue,xe))})(B.sources,G.sources,V,L);var J=[];B.layers&&B.layers.forEach(function(ne){L[ne.source]?q.push({command:mt.removeLayer,args:[ne.id]}):J.push(ne)}),q=q.concat(V),function(ne,ue,xe){ue=ue||[];var Le,De,Ue,qe,et,lt,ft,xt=(ne=ne||[]).map(rn),St=ue.map(rn),wt=ne.reduce(Nt,{}),Dt=ue.reduce(Nt,{}),Et=xt.slice(),Yt=Object.create(null);for(Le=0,De=0;Le<xt.length;Le++)Ue=xt[Le],Dt.hasOwnProperty(Ue)?De++:(xe.push({command:mt.removeLayer,args:[Ue]}),Et.splice(Et.indexOf(Ue,De),1));for(Le=0,De=0;Le<St.length;Le++)Ue=St[St.length-1-Le],Et[Et.length-1-Le]!==Ue&&(wt.hasOwnProperty(Ue)?(xe.push({command:mt.removeLayer,args:[Ue]}),Et.splice(Et.lastIndexOf(Ue,Et.length-De),1)):De++,lt=Et[Et.length-Le],xe.push({command:mt.addLayer,args:[Dt[Ue],lt]}),Et.splice(Et.length-Le,0,Ue),Yt[Ue]=!0);for(Le=0;Le<St.length;Le++)if(qe=wt[Ue=St[Le]],et=Dt[Ue],!Yt[Ue]&&!o.deepEqual(qe,et))if(o.deepEqual(qe.source,et.source)&&o.deepEqual(qe["source-layer"],et["source-layer"])&&o.deepEqual(qe.type,et.type)){for(ft in Gt(qe.layout,et.layout,xe,Ue,null,mt.setLayoutProperty),Gt(qe.paint,et.paint,xe,Ue,null,mt.setPaintProperty),o.deepEqual(qe.filter,et.filter)||xe.push({command:mt.setFilter,args:[Ue,et.filter]}),o.deepEqual(qe.minzoom,et.minzoom)&&o.deepEqual(qe.maxzoom,et.maxzoom)||xe.push({command:mt.setLayerZoomRange,args:[Ue,et.minzoom,et.maxzoom]}),qe)qe.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Gt(qe[ft],et[ft],xe,Ue,ft.slice(6),mt.setPaintProperty):o.deepEqual(qe[ft],et[ft])||xe.push({command:mt.setLayerProperty,args:[Ue,ft,et[ft]]}));for(ft in et)et.hasOwnProperty(ft)&&!qe.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Gt(qe[ft],et[ft],xe,Ue,ft.slice(6),mt.setPaintProperty):o.deepEqual(qe[ft],et[ft])||xe.push({command:mt.setLayerProperty,args:[Ue,ft,et[ft]]}))}else xe.push({command:mt.removeLayer,args:[Ue]}),lt=Et[Et.lastIndexOf(Ue)+1],xe.push({command:mt.addLayer,args:[et,lt]})}(J,G.layers,q)}catch(ne){console.warn("Unable to compute style diff:",ne),q=[{command:mt.setStyle,args:[G]}]}return q}var Rt=function(B,G){this.reset(B,G)};Rt.prototype.reset=function(B,G){this.points=B||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Rt.prototype.lerp=function(B){if(this.points.length===1)return this.points[0];B=o.clamp(B,0,1);for(var G=1,q=this._distances[G],L=B*this.paddedLength+this.padding;q<L&&G<this._distances.length;)q=this._distances[++G];var V=G-1,J=this._distances[V],ne=q-J,ue=ne>0?(L-J)/ne:0;return this.points[V].mult(1-ue).add(this.points[G].mult(ue))};var Ln=function(B,G,q){var L=this.boxCells=[],V=this.circleCells=[];this.xCellCount=Math.ceil(B/q),this.yCellCount=Math.ceil(G/q);for(var J=0;J<this.xCellCount*this.yCellCount;J++)L.push([]),V.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=B,this.height=G,this.xScale=this.xCellCount/B,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};function bn(B,G,q,L,V){var J=o.create();return G?(o.scale(J,J,[1/V,1/V,1]),q||o.rotateZ(J,J,L.angle)):o.multiply(J,L.labelPlaneMatrix,B),J}function hn(B,G,q,L,V){if(G){var J=o.clone(B);return o.scale(J,J,[V,V,1]),q||o.rotateZ(J,J,-L.angle),J}return L.glCoordMatrix}function Kt(B,G){var q=[B.x,B.y,0,1];jn(q,q,G);var L=q[3];return{point:new o.Point(q[0]/L,q[1]/L),signedDistanceFromCamera:L}}function on(B,G){return .5+B/G*.5}function $t(B,G){var q=B[0]/B[3],L=B[1]/B[3];return q>=-G[0]&&q<=G[0]&&L>=-G[1]&&L<=G[1]}function ln(B,G,q,L,V,J,ne,ue){var xe=L?B.textSizeData:B.iconSizeData,Le=o.evaluateSizeForZoom(xe,q.transform.zoom),De=[256/q.width*2+1,256/q.height*2+1],Ue=L?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Ue.clear();for(var qe=B.lineVertexArray,et=L?B.text.placedSymbolArray:B.icon.placedSymbolArray,lt=q.transform.width/q.transform.height,ft=!1,xt=0;xt<et.length;xt++){var St=et.get(xt);if(St.hidden||St.writingMode===o.WritingMode.vertical&&!ft)Pn(St.numGlyphs,Ue);else{ft=!1;var wt=[St.anchorX,St.anchorY,0,1];if(o.transformMat4(wt,wt,G),$t(wt,De)){var Dt=wt[3],Et=on(q.transform.cameraToCenterDistance,Dt),Yt=o.evaluateSizeForFeature(xe,Le,St),qt=ne?Yt/Et:Yt*Et,Bt=new o.Point(St.anchorX,St.anchorY),fn=Kt(Bt,V).point,gn={},kn=Mn(St,qt,!1,ue,G,V,J,B.glyphOffsetArray,qe,Ue,fn,Bt,gn,lt);ft=kn.useVertical,(kn.notEnoughRoom||ft||kn.needsFlipping&&Mn(St,qt,!0,ue,G,V,J,B.glyphOffsetArray,qe,Ue,fn,Bt,gn,lt).notEnoughRoom)&&Pn(St.numGlyphs,Ue)}else Pn(St.numGlyphs,Ue)}}L?B.text.dynamicLayoutVertexBuffer.updateData(Ue):B.icon.dynamicLayoutVertexBuffer.updateData(Ue)}function mn(B,G,q,L,V,J,ne,ue,xe,Le,De){var Ue=ue.glyphStartIndex+ue.numGlyphs,qe=ue.lineStartIndex,et=ue.lineStartIndex+ue.lineLength,lt=G.getoffsetX(ue.glyphStartIndex),ft=G.getoffsetX(Ue-1),xt=Tn(B*lt,q,L,V,J,ne,ue.segment,qe,et,xe,Le,De);if(!xt)return null;var St=Tn(B*ft,q,L,V,J,ne,ue.segment,qe,et,xe,Le,De);return St?{first:xt,last:St}:null}function xn(B,G,q,L){return B===o.WritingMode.horizontal&&Math.abs(q.y-G.y)>Math.abs(q.x-G.x)*L?{useVertical:!0}:(B===o.WritingMode.vertical?G.y<q.y:G.x>q.x)?{needsFlipping:!0}:null}function Mn(B,G,q,L,V,J,ne,ue,xe,Le,De,Ue,qe,et){var lt,ft=G/24,xt=B.lineOffsetX*ft,St=B.lineOffsetY*ft;if(B.numGlyphs>1){var wt=B.glyphStartIndex+B.numGlyphs,Dt=B.lineStartIndex,Et=B.lineStartIndex+B.lineLength,Yt=mn(ft,ue,xt,St,q,De,Ue,B,xe,J,qe);if(!Yt)return{notEnoughRoom:!0};var qt=Kt(Yt.first.point,ne).point,Bt=Kt(Yt.last.point,ne).point;if(L&&!q){var fn=xn(B.writingMode,qt,Bt,et);if(fn)return fn}lt=[Yt.first];for(var gn=B.glyphStartIndex+1;gn<wt-1;gn++)lt.push(Tn(ft*ue.getoffsetX(gn),xt,St,q,De,Ue,B.segment,Dt,Et,xe,J,qe));lt.push(Yt.last)}else{if(L&&!q){var kn=Kt(Ue,V).point,On=B.lineStartIndex+B.segment+1,Nn=new o.Point(xe.getx(On),xe.gety(On)),er=Kt(Nn,V),or=er.signedDistanceFromCamera>0?er.point:Sn(Ue,Nn,kn,1,V),Hn=xn(B.writingMode,kn,or,et);if(Hn)return Hn}var ar=Tn(ft*ue.getoffsetX(B.glyphStartIndex),xt,St,q,De,Ue,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,xe,J,qe);if(!ar)return{notEnoughRoom:!0};lt=[ar]}for(var vr=0,Ar=lt;vr<Ar.length;vr+=1){var Kn=Ar[vr];o.addDynamicAttributes(Le,Kn.point,Kn.angle)}return{}}function Sn(B,G,q,L,V){var J=Kt(B.add(B.sub(G)._unit()),V).point,ne=q.sub(J);return q.add(ne._mult(L/ne.mag()))}function Tn(B,G,q,L,V,J,ne,ue,xe,Le,De,Ue){var qe=L?B-G:B+G,et=qe>0?1:-1,lt=0;L&&(et*=-1,lt=Math.PI),et<0&&(lt+=Math.PI);for(var ft=et>0?ue+ne:ue+ne+1,xt=V,St=V,wt=0,Dt=0,Et=Math.abs(qe),Yt=[];wt+Dt<=Et;){if((ft+=et)<ue||ft>=xe)return null;if(St=xt,Yt.push(xt),(xt=Ue[ft])===void 0){var qt=new o.Point(Le.getx(ft),Le.gety(ft)),Bt=Kt(qt,De);if(Bt.signedDistanceFromCamera>0)xt=Ue[ft]=Bt.point;else{var fn=ft-et;xt=Sn(wt===0?J:new o.Point(Le.getx(fn),Le.gety(fn)),qt,St,Et-wt+1,De)}}wt+=Dt,Dt=St.dist(xt)}var gn=(Et-wt)/Dt,kn=xt.sub(St),On=kn.mult(gn)._add(St);On._add(kn._unit()._perp()._mult(q*et));var Nn=lt+Math.atan2(xt.y-St.y,xt.x-St.x);return Yt.push(On),{point:On,angle:Nn,path:Yt}}Ln.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ln.prototype.insert=function(B,G,q,L,V){this._forEachCell(G,q,L,V,this._insertBoxCell,this.boxUid++),this.boxKeys.push(B),this.bboxes.push(G),this.bboxes.push(q),this.bboxes.push(L),this.bboxes.push(V)},Ln.prototype.insertCircle=function(B,G,q,L){this._forEachCell(G-L,q-L,G+L,q+L,this._insertCircleCell,this.circleUid++),this.circleKeys.push(B),this.circles.push(G),this.circles.push(q),this.circles.push(L)},Ln.prototype._insertBoxCell=function(B,G,q,L,V,J){this.boxCells[V].push(J)},Ln.prototype._insertCircleCell=function(B,G,q,L,V,J){this.circleCells[V].push(J)},Ln.prototype._query=function(B,G,q,L,V,J){if(q<0||B>this.width||L<0||G>this.height)return!V&&[];var ne=[];if(B<=0&&G<=0&&this.width<=q&&this.height<=L){if(V)return!0;for(var ue=0;ue<this.boxKeys.length;ue++)ne.push({key:this.boxKeys[ue],x1:this.bboxes[4*ue],y1:this.bboxes[4*ue+1],x2:this.bboxes[4*ue+2],y2:this.bboxes[4*ue+3]});for(var xe=0;xe<this.circleKeys.length;xe++){var Le=this.circles[3*xe],De=this.circles[3*xe+1],Ue=this.circles[3*xe+2];ne.push({key:this.circleKeys[xe],x1:Le-Ue,y1:De-Ue,x2:Le+Ue,y2:De+Ue})}return J?ne.filter(J):ne}var qe={hitTest:V,seenUids:{box:{},circle:{}}};return this._forEachCell(B,G,q,L,this._queryCell,ne,qe,J),V?ne.length>0:ne},Ln.prototype._queryCircle=function(B,G,q,L,V){var J=B-q,ne=B+q,ue=G-q,xe=G+q;if(ne<0||J>this.width||xe<0||ue>this.height)return!L&&[];var Le=[],De={hitTest:L,circle:{x:B,y:G,radius:q},seenUids:{box:{},circle:{}}};return this._forEachCell(J,ue,ne,xe,this._queryCellCircle,Le,De,V),L?Le.length>0:Le},Ln.prototype.query=function(B,G,q,L,V){return this._query(B,G,q,L,!1,V)},Ln.prototype.hitTest=function(B,G,q,L,V){return this._query(B,G,q,L,!0,V)},Ln.prototype.hitTestCircle=function(B,G,q,L){return this._queryCircle(B,G,q,!0,L)},Ln.prototype._queryCell=function(B,G,q,L,V,J,ne,ue){var xe=ne.seenUids,Le=this.boxCells[V];if(Le!==null)for(var De=this.bboxes,Ue=0,qe=Le;Ue<qe.length;Ue+=1){var et=qe[Ue];if(!xe.box[et]){xe.box[et]=!0;var lt=4*et;if(B<=De[lt+2]&&G<=De[lt+3]&&q>=De[lt+0]&&L>=De[lt+1]&&(!ue||ue(this.boxKeys[et]))){if(ne.hitTest)return J.push(!0),!0;J.push({key:this.boxKeys[et],x1:De[lt],y1:De[lt+1],x2:De[lt+2],y2:De[lt+3]})}}}var ft=this.circleCells[V];if(ft!==null)for(var xt=this.circles,St=0,wt=ft;St<wt.length;St+=1){var Dt=wt[St];if(!xe.circle[Dt]){xe.circle[Dt]=!0;var Et=3*Dt;if(this._circleAndRectCollide(xt[Et],xt[Et+1],xt[Et+2],B,G,q,L)&&(!ue||ue(this.circleKeys[Dt]))){if(ne.hitTest)return J.push(!0),!0;var Yt=xt[Et],qt=xt[Et+1],Bt=xt[Et+2];J.push({key:this.circleKeys[Dt],x1:Yt-Bt,y1:qt-Bt,x2:Yt+Bt,y2:qt+Bt})}}}},Ln.prototype._queryCellCircle=function(B,G,q,L,V,J,ne,ue){var xe=ne.circle,Le=ne.seenUids,De=this.boxCells[V];if(De!==null)for(var Ue=this.bboxes,qe=0,et=De;qe<et.length;qe+=1){var lt=et[qe];if(!Le.box[lt]){Le.box[lt]=!0;var ft=4*lt;if(this._circleAndRectCollide(xe.x,xe.y,xe.radius,Ue[ft+0],Ue[ft+1],Ue[ft+2],Ue[ft+3])&&(!ue||ue(this.boxKeys[lt])))return J.push(!0),!0}}var xt=this.circleCells[V];if(xt!==null)for(var St=this.circles,wt=0,Dt=xt;wt<Dt.length;wt+=1){var Et=Dt[wt];if(!Le.circle[Et]){Le.circle[Et]=!0;var Yt=3*Et;if(this._circlesCollide(St[Yt],St[Yt+1],St[Yt+2],xe.x,xe.y,xe.radius)&&(!ue||ue(this.circleKeys[Et])))return J.push(!0),!0}}},Ln.prototype._forEachCell=function(B,G,q,L,V,J,ne,ue){for(var xe=this._convertToXCellCoord(B),Le=this._convertToYCellCoord(G),De=this._convertToXCellCoord(q),Ue=this._convertToYCellCoord(L),qe=xe;qe<=De;qe++)for(var et=Le;et<=Ue;et++){var lt=this.xCellCount*et+qe;if(V.call(this,B,G,q,L,lt,J,ne,ue))return}},Ln.prototype._convertToXCellCoord=function(B){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(B*this.xScale)))},Ln.prototype._convertToYCellCoord=function(B){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(B*this.yScale)))},Ln.prototype._circlesCollide=function(B,G,q,L,V,J){var ne=L-B,ue=V-G,xe=q+J;return xe*xe>ne*ne+ue*ue},Ln.prototype._circleAndRectCollide=function(B,G,q,L,V,J,ne){var ue=(J-L)/2,xe=Math.abs(B-(L+ue));if(xe>ue+q)return!1;var Le=(ne-V)/2,De=Math.abs(G-(V+Le));if(De>Le+q)return!1;if(xe<=ue||De<=Le)return!0;var Ue=xe-ue,qe=De-Le;return Ue*Ue+qe*qe<=q*q};var Rn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pn(B,G){for(var q=0;q<B;q++){var L=G.length;G.resize(L+4),G.float32.set(Rn,3*L)}}function jn(B,G,q){var L=G[0],V=G[1];return B[0]=q[0]*L+q[4]*V+q[12],B[1]=q[1]*L+q[5]*V+q[13],B[3]=q[3]*L+q[7]*V+q[15],B}var Jn=100,$n=function(B,G,q){G===void 0&&(G=new Ln(B.width+200,B.height+200,25)),q===void 0&&(q=new Ln(B.width+200,B.height+200,25)),this.transform=B,this.grid=G,this.ignoredGrid=q,this.pitchfactor=Math.cos(B._pitch)*B.cameraToCenterDistance,this.screenRightBoundary=B.width+Jn,this.screenBottomBoundary=B.height+Jn,this.gridRightBoundary=B.width+200,this.gridBottomBoundary=B.height+200};function Gn(B,G,q){return G*(o.EXTENT/(B.tileSize*Math.pow(2,q-B.tileID.overscaledZ)))}$n.prototype.placeCollisionBox=function(B,G,q,L,V){var J=this.projectAndGetPerspectiveRatio(L,B.anchorPointX,B.anchorPointY),ne=q*J.perspectiveRatio,ue=B.x1*ne+J.point.x,xe=B.y1*ne+J.point.y,Le=B.x2*ne+J.point.x,De=B.y2*ne+J.point.y;return!this.isInsideGrid(ue,xe,Le,De)||!G&&this.grid.hitTest(ue,xe,Le,De,V)?{box:[],offscreen:!1}:{box:[ue,xe,Le,De],offscreen:this.isOffscreen(ue,xe,Le,De)}},$n.prototype.placeCollisionCircles=function(B,G,q,L,V,J,ne,ue,xe,Le,De,Ue,qe){var et=[],lt=new o.Point(G.anchorX,G.anchorY),ft=Kt(lt,J),xt=on(this.transform.cameraToCenterDistance,ft.signedDistanceFromCamera),St=(Le?V/xt:V*xt)/o.ONE_EM,wt=Kt(lt,ne).point,Dt=mn(St,L,G.lineOffsetX*St,G.lineOffsetY*St,!1,wt,lt,G,q,ne,{}),Et=!1,Yt=!1,qt=!0;if(Dt){for(var Bt=.5*Ue*xt+qe,fn=new o.Point(-100,-100),gn=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),kn=new Rt,On=Dt.first,Nn=Dt.last,er=[],or=On.path.length-1;or>=1;or--)er.push(On.path[or]);for(var Hn=1;Hn<Nn.path.length;Hn++)er.push(Nn.path[Hn]);var ar=2.5*Bt;if(ue){var vr=er.map(function(Gr){return Kt(Gr,ue)});er=vr.some(function(Gr){return Gr.signedDistanceFromCamera<=0})?[]:vr.map(function(Gr){return Gr.point})}var Ar=[];if(er.length>0){for(var Kn=er[0].clone(),ir=er[0].clone(),br=1;br<er.length;br++)Kn.x=Math.min(Kn.x,er[br].x),Kn.y=Math.min(Kn.y,er[br].y),ir.x=Math.max(ir.x,er[br].x),ir.y=Math.max(ir.y,er[br].y);Ar=Kn.x>=fn.x&&ir.x<=gn.x&&Kn.y>=fn.y&&ir.y<=gn.y?[er]:ir.x<fn.x||Kn.x>gn.x||ir.y<fn.y||Kn.y>gn.y?[]:o.clipLine([er],fn.x,fn.y,gn.x,gn.y)}for(var sr=0,Tr=Ar;sr<Tr.length;sr+=1){var Er=Tr[sr];kn.reset(Er,.25*Bt);var Rr;Rr=kn.length<=.5*Bt?1:Math.ceil(kn.paddedLength/ar)+1;for(var Fr=0;Fr<Rr;Fr++){var jr=Fr/Math.max(Rr-1,1),qr=kn.lerp(jr),ui=qr.x+Jn,Ai=qr.y+Jn;et.push(ui,Ai,Bt,0);var ia=ui-Bt,Ni=Ai-Bt,Ji=ui+Bt,gi=Ai+Bt;if(qt=qt&&this.isOffscreen(ia,Ni,Ji,gi),Yt=Yt||this.isInsideGrid(ia,Ni,Ji,gi),!B&&this.grid.hitTestCircle(ui,Ai,Bt,De)&&(Et=!0,!xe))return{circles:[],offscreen:!1,collisionDetected:Et}}}}return{circles:!xe&&Et||!Yt?[]:et,offscreen:qt,collisionDetected:Et}},$n.prototype.queryRenderedSymbols=function(B){if(B.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],q=1/0,L=1/0,V=-1/0,J=-1/0,ne=0,ue=B;ne<ue.length;ne+=1){var xe=ue[ne],Le=new o.Point(xe.x+Jn,xe.y+Jn);q=Math.min(q,Le.x),L=Math.min(L,Le.y),V=Math.max(V,Le.x),J=Math.max(J,Le.y),G.push(Le)}for(var De={},Ue={},qe=0,et=this.grid.query(q,L,V,J).concat(this.ignoredGrid.query(q,L,V,J));qe<et.length;qe+=1){var lt=et[qe],ft=lt.key;if(De[ft.bucketInstanceId]===void 0&&(De[ft.bucketInstanceId]={}),!De[ft.bucketInstanceId][ft.featureIndex]){var xt=[new o.Point(lt.x1,lt.y1),new o.Point(lt.x2,lt.y1),new o.Point(lt.x2,lt.y2),new o.Point(lt.x1,lt.y2)];o.polygonIntersectsPolygon(G,xt)&&(De[ft.bucketInstanceId][ft.featureIndex]=!0,Ue[ft.bucketInstanceId]===void 0&&(Ue[ft.bucketInstanceId]=[]),Ue[ft.bucketInstanceId].push(ft.featureIndex))}}return Ue},$n.prototype.insertCollisionBox=function(B,G,q,L,V){var J={bucketInstanceId:q,featureIndex:L,collisionGroupID:V};(G?this.ignoredGrid:this.grid).insert(J,B[0],B[1],B[2],B[3])},$n.prototype.insertCollisionCircles=function(B,G,q,L,V){for(var J=G?this.ignoredGrid:this.grid,ne={bucketInstanceId:q,featureIndex:L,collisionGroupID:V},ue=0;ue<B.length;ue+=4)J.insertCircle(ne,B[ue],B[ue+1],B[ue+2])},$n.prototype.projectAndGetPerspectiveRatio=function(B,G,q){var L=[G,q,0,1];return jn(L,L,B),{point:new o.Point((L[0]/L[3]+1)/2*this.transform.width+Jn,(-L[1]/L[3]+1)/2*this.transform.height+Jn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/L[3]*.5}},$n.prototype.isOffscreen=function(B,G,q,L){return q<Jn||B>=this.screenRightBoundary||L<Jn||G>this.screenBottomBoundary},$n.prototype.isInsideGrid=function(B,G,q,L){return q>=0&&B<this.gridRightBoundary&&L>=0&&G<this.gridBottomBoundary},$n.prototype.getViewportMatrix=function(){var B=o.identity([]);return o.translate(B,B,[-100,-100,0]),B};var lr=function(B,G,q,L){this.opacity=B?Math.max(0,Math.min(1,B.opacity+(B.placed?G:-G))):L&&q?1:0,this.placed=q};lr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Jt=function(B,G,q,L,V){this.text=new lr(B?B.text:null,G,q,V),this.icon=new lr(B?B.icon:null,G,L,V)};Jt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Qt=function(B,G,q){this.text=B,this.icon=G,this.skipFade=q},En=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},pn=function(B,G,q,L,V){this.bucketInstanceId=B,this.featureIndex=G,this.sourceLayerIndex=q,this.bucketIndex=L,this.tileID=V},Cn=function(B){this.crossSourceCollisions=B,this.maxGroupID=0,this.collisionGroups={}};function Vn(B,G,q,L,V){var J=o.getAnchorAlignment(B),ne=-(J.horizontalAlign-.5)*G,ue=-(J.verticalAlign-.5)*q,xe=o.evaluateVariableOffset(B,L);return new o.Point(ne+xe[0]*V,ue+xe[1]*V)}function Fn(B,G,q,L,V,J){var ne=B.x1,ue=B.x2,xe=B.y1,Le=B.y2,De=B.anchorPointX,Ue=B.anchorPointY,qe=new o.Point(G,q);return L&&qe._rotate(V?J:-J),{x1:ne+qe.x,y1:xe+qe.y,x2:ue+qe.x,y2:Le+qe.y,anchorPointX:De,anchorPointY:Ue}}Cn.prototype.get=function(B){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[B]){var G=++this.maxGroupID;this.collisionGroups[B]={ID:G,predicate:function(q){return q.collisionGroupID===G}}}return this.collisionGroups[B]};var Yn=function(B,G,q,L){this.transform=B.clone(),this.collisionIndex=new $n(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Cn(q),this.collisionCircleArrays={},this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}};function fr(B,G,q,L,V){B.emplaceBack(G?1:0,q?1:0,L||0,V||0),B.emplaceBack(G?1:0,q?1:0,L||0,V||0),B.emplaceBack(G?1:0,q?1:0,L||0,V||0),B.emplaceBack(G?1:0,q?1:0,L||0,V||0)}Yn.prototype.getBucketParts=function(B,G,q,L){var V=q.getBucket(G),J=q.latestFeatureIndex;if(V&&J&&G.id===V.layerIds[0]){var ne=q.collisionBoxArray,ue=V.layers[0].layout,xe=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),Le=q.tileSize/o.EXTENT,De=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),Ue=ue.get("text-pitch-alignment")==="map",qe=ue.get("text-rotation-alignment")==="map",et=Gn(q,1,this.transform.zoom),lt=bn(De,Ue,qe,this.transform,et),ft=null;if(Ue){var xt=hn(De,Ue,qe,this.transform,et);ft=o.multiply([],this.transform.labelPlaneMatrix,xt)}this.retainedQueryData[V.bucketInstanceId]=new pn(V.bucketInstanceId,J,V.sourceLayerIndex,V.index,q.tileID);var St={bucket:V,layout:ue,posMatrix:De,textLabelPlaneMatrix:lt,labelToScreenMatrix:ft,scale:xe,textPixelRatio:Le,holdingForFade:q.holdingForFade(),collisionBoxArray:ne,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(V.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(V.sourceID)};if(L)for(var wt=0,Dt=V.sortKeyRanges;wt<Dt.length;wt+=1){var Et=Dt[wt],Yt=Et.sortKey,qt=Et.symbolInstanceStart,Bt=Et.symbolInstanceEnd;B.push({sortKey:Yt,symbolInstanceStart:qt,symbolInstanceEnd:Bt,parameters:St})}else B.push({symbolInstanceStart:0,symbolInstanceEnd:V.symbolInstances.length,parameters:St})}},Yn.prototype.attemptAnchorPlacement=function(B,G,q,L,V,J,ne,ue,xe,Le,De,Ue,qe,et,lt){var ft,xt=[Ue.textOffset0,Ue.textOffset1],St=Vn(B,q,L,xt,V),wt=this.collisionIndex.placeCollisionBox(Fn(G,St.x,St.y,J,ne,this.transform.angle),De,ue,xe,Le.predicate);if(!lt||this.collisionIndex.placeCollisionBox(Fn(lt,St.x,St.y,J,ne,this.transform.angle),De,ue,xe,Le.predicate).box.length!==0)return wt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(ft=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),this.variableOffsets[Ue.crossTileID]={textOffset:xt,width:q,height:L,anchor:B,textBoxScale:V,prevAnchor:ft},this.markUsedJustification(qe,B,Ue,et),qe.allowVerticalPlacement&&(this.markUsedOrientation(qe,et,Ue),this.placedOrientations[Ue.crossTileID]=et),{shift:St,placedGlyphBoxes:wt}):void 0},Yn.prototype.placeLayerBucketPart=function(B,G,q){var L=this,V=B.parameters,J=V.bucket,ne=V.layout,ue=V.posMatrix,xe=V.textLabelPlaneMatrix,Le=V.labelToScreenMatrix,De=V.textPixelRatio,Ue=V.holdingForFade,qe=V.collisionBoxArray,et=V.partiallyEvaluatedTextSize,lt=V.collisionGroup,ft=ne.get("text-optional"),xt=ne.get("icon-optional"),St=ne.get("text-allow-overlap"),wt=ne.get("icon-allow-overlap"),Dt=ne.get("text-rotation-alignment")==="map",Et=ne.get("text-pitch-alignment")==="map",Yt=ne.get("icon-text-fit")!=="none",qt=ne.get("symbol-z-order")==="viewport-y",Bt=St&&(wt||!J.hasIconData()||xt),fn=wt&&(St||!J.hasTextData()||ft);!J.collisionArrays&&qe&&J.deserializeCollisionBoxes(qe);var gn=function(Hn,ar){if(!G[Hn.crossTileID])if(Ue)L.placements[Hn.crossTileID]=new Qt(!1,!1,!1);else{var vr,Ar=!1,Kn=!1,ir=!0,br=null,sr={box:null,offscreen:null},Tr={box:null,offscreen:null},Er=null,Rr=null,Fr=0,jr=0,qr=0;ar.textFeatureIndex?Fr=ar.textFeatureIndex:Hn.useRuntimeCollisionCircles&&(Fr=Hn.featureIndex),ar.verticalTextFeatureIndex&&(jr=ar.verticalTextFeatureIndex);var ui=ar.textBox;if(ui){var Ai=function(_i){var Aa=o.WritingMode.horizontal;if(J.allowVerticalPlacement&&!_i&&L.prevPlacement){var Wi=L.prevPlacement.placedOrientations[Hn.crossTileID];Wi&&(L.placedOrientations[Hn.crossTileID]=Wi,Aa=Wi,L.markUsedOrientation(J,Aa,Hn))}return Aa},ia=function(_i,Aa){if(J.allowVerticalPlacement&&Hn.numVerticalGlyphVertices>0&&ar.verticalTextBox)for(var Wi=0,Ml=J.writingModes;Wi<Ml.length&&(Ml[Wi]===o.WritingMode.vertical?(sr=Aa(),Tr=sr):sr=_i(),!(sr&&sr.box&&sr.box.length));Wi+=1);else sr=_i()};if(ne.get("text-variable-anchor")){var Ni=ne.get("text-variable-anchor");if(L.prevPlacement&&L.prevPlacement.variableOffsets[Hn.crossTileID]){var Ji=L.prevPlacement.variableOffsets[Hn.crossTileID];Ni.indexOf(Ji.anchor)>0&&(Ni=Ni.filter(function(_i){return _i!==Ji.anchor})).unshift(Ji.anchor)}var gi=function(_i,Aa,Wi){for(var Ml=_i.x2-_i.x1,bc=_i.y2-_i.y1,zu=Hn.textBoxScale,_c=Yt&&!wt?Aa:null,pl={box:[],offscreen:!1},wc=St?2*Ni.length:Ni.length,dl=0;dl<wc;++dl){var Du=Ni[dl%Ni.length],Ru=dl>=Ni.length,Ws=L.attemptAnchorPlacement(Du,_i,Ml,bc,zu,Dt,Et,De,ue,lt,Ru,Hn,J,Wi,_c);if(Ws&&(pl=Ws.placedGlyphBoxes)&&pl.box&&pl.box.length){Ar=!0,br=Ws.shift;break}}return pl};ia(function(){return gi(ui,ar.iconBox,o.WritingMode.horizontal)},function(){var _i=ar.verticalTextBox,Aa=sr&&sr.box&&sr.box.length;return J.allowVerticalPlacement&&!Aa&&Hn.numVerticalGlyphVertices>0&&_i?gi(_i,ar.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),sr&&(Ar=sr.box,ir=sr.offscreen);var Gr=Ai(sr&&sr.box);if(!Ar&&L.prevPlacement){var xi=L.prevPlacement.variableOffsets[Hn.crossTileID];xi&&(L.variableOffsets[Hn.crossTileID]=xi,L.markUsedJustification(J,xi.anchor,Hn,Gr))}}else{var ri=function(_i,Aa){var Wi=L.collisionIndex.placeCollisionBox(_i,St,De,ue,lt.predicate);return Wi&&Wi.box&&Wi.box.length&&(L.markUsedOrientation(J,Aa,Hn),L.placedOrientations[Hn.crossTileID]=Aa),Wi};ia(function(){return ri(ui,o.WritingMode.horizontal)},function(){var _i=ar.verticalTextBox;return J.allowVerticalPlacement&&Hn.numVerticalGlyphVertices>0&&_i?ri(_i,o.WritingMode.vertical):{box:null,offscreen:null}}),Ai(sr&&sr.box&&sr.box.length)}}if(Ar=(vr=sr)&&vr.box&&vr.box.length>0,ir=vr&&vr.offscreen,Hn.useRuntimeCollisionCircles){var Zr=J.text.placedSymbolArray.get(Hn.centerJustifiedTextSymbolIndex),bi=o.evaluateSizeForFeature(J.textSizeData,et,Zr),Mi=ne.get("text-padding"),Ii=Hn.collisionCircleDiameter;Er=L.collisionIndex.placeCollisionCircles(St,Zr,J.lineVertexArray,J.glyphOffsetArray,bi,ue,xe,Le,q,Et,lt.predicate,Ii,Mi),Ar=St||Er.circles.length>0&&!Er.collisionDetected,ir=ir&&Er.offscreen}if(ar.iconFeatureIndex&&(qr=ar.iconFeatureIndex),ar.iconBox){var ms=function(_i){var Aa=Yt&&br?Fn(_i,br.x,br.y,Dt,Et,L.transform.angle):_i;return L.collisionIndex.placeCollisionBox(Aa,wt,De,ue,lt.predicate)};Kn=Tr&&Tr.box&&Tr.box.length&&ar.verticalIconBox?(Rr=ms(ar.verticalIconBox)).box.length>0:(Rr=ms(ar.iconBox)).box.length>0,ir=ir&&Rr.offscreen}var ys=ft||Hn.numHorizontalGlyphVertices===0&&Hn.numVerticalGlyphVertices===0,Xr=xt||Hn.numIconVertices===0;if(ys||Xr?Xr?ys||(Kn=Kn&&Ar):Ar=Kn&&Ar:Kn=Ar=Kn&&Ar,Ar&&vr&&vr.box&&(Tr&&Tr.box&&jr?L.collisionIndex.insertCollisionBox(vr.box,ne.get("text-ignore-placement"),J.bucketInstanceId,jr,lt.ID):L.collisionIndex.insertCollisionBox(vr.box,ne.get("text-ignore-placement"),J.bucketInstanceId,Fr,lt.ID)),Kn&&Rr&&L.collisionIndex.insertCollisionBox(Rr.box,ne.get("icon-ignore-placement"),J.bucketInstanceId,qr,lt.ID),Er&&(Ar&&L.collisionIndex.insertCollisionCircles(Er.circles,ne.get("text-ignore-placement"),J.bucketInstanceId,Fr,lt.ID),q)){var Gs=J.bucketInstanceId,Os=L.collisionCircleArrays[Gs];Os===void 0&&(Os=L.collisionCircleArrays[Gs]=new En);for(var _o=0;_o<Er.circles.length;_o+=4)Os.circles.push(Er.circles[_o+0]),Os.circles.push(Er.circles[_o+1]),Os.circles.push(Er.circles[_o+2]),Os.circles.push(Er.collisionDetected?1:0)}L.placements[Hn.crossTileID]=new Qt(Ar||Bt,Kn||fn,ir||J.justReloaded),G[Hn.crossTileID]=!0}};if(qt)for(var kn=J.getSortedSymbolIndexes(this.transform.angle),On=kn.length-1;On>=0;--On){var Nn=kn[On];gn(J.symbolInstances.get(Nn),J.collisionArrays[Nn])}else for(var er=B.symbolInstanceStart;er<B.symbolInstanceEnd;er++)gn(J.symbolInstances.get(er),J.collisionArrays[er]);if(q&&J.bucketInstanceId in this.collisionCircleArrays){var or=this.collisionCircleArrays[J.bucketInstanceId];o.invert(or.invProjMatrix,ue),or.viewportMatrix=this.collisionIndex.getViewportMatrix()}J.justReloaded=!1},Yn.prototype.markUsedJustification=function(B,G,q,L){var V,J={left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex};V=L===o.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:J[o.getAnchorJustification(G)];for(var ne=0,ue=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];ne<ue.length;ne+=1){var xe=ue[ne];xe>=0&&(B.text.placedSymbolArray.get(xe).crossTileID=V>=0&&xe!==V?0:q.crossTileID)}},Yn.prototype.markUsedOrientation=function(B,G,q){for(var L=G===o.WritingMode.horizontal||G===o.WritingMode.horizontalOnly?G:0,V=G===o.WritingMode.vertical?G:0,J=0,ne=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];J<ne.length;J+=1){var ue=ne[J];B.text.placedSymbolArray.get(ue).placedOrientation=L}q.verticalPlacedTextSymbolIndex&&(B.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=V)},Yn.prototype.commit=function(B){this.commitTime=B,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,q=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var L=G?G.symbolFadeChange(B):1,V=G?G.opacities:{},J=G?G.variableOffsets:{},ne=G?G.placedOrientations:{};for(var ue in this.placements){var xe=this.placements[ue],Le=V[ue];Le?(this.opacities[ue]=new Jt(Le,L,xe.text,xe.icon),q=q||xe.text!==Le.text.placed||xe.icon!==Le.icon.placed):(this.opacities[ue]=new Jt(null,L,xe.text,xe.icon,xe.skipFade),q=q||xe.text||xe.icon)}for(var De in V){var Ue=V[De];if(!this.opacities[De]){var qe=new Jt(Ue,L,!1,!1);qe.isHidden()||(this.opacities[De]=qe,q=q||Ue.text.placed||Ue.icon.placed)}}for(var et in J)this.variableOffsets[et]||!this.opacities[et]||this.opacities[et].isHidden()||(this.variableOffsets[et]=J[et]);for(var lt in ne)this.placedOrientations[lt]||!this.opacities[lt]||this.opacities[lt].isHidden()||(this.placedOrientations[lt]=ne[lt]);q?this.lastPlacementChangeTime=B:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:B)},Yn.prototype.updateLayerOpacities=function(B,G){for(var q={},L=0,V=G;L<V.length;L+=1){var J=V[L],ne=J.getBucket(B);ne&&J.latestFeatureIndex&&B.id===ne.layerIds[0]&&this.updateBucketOpacities(ne,q,J.collisionBoxArray)}},Yn.prototype.updateBucketOpacities=function(B,G,q){var L=this;B.hasTextData()&&B.text.opacityVertexArray.clear(),B.hasIconData()&&B.icon.opacityVertexArray.clear(),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexArray.clear(),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexArray.clear();var V=B.layers[0].layout,J=new Jt(null,0,!1,!1,!0),ne=V.get("text-allow-overlap"),ue=V.get("icon-allow-overlap"),xe=V.get("text-variable-anchor"),Le=V.get("text-rotation-alignment")==="map",De=V.get("text-pitch-alignment")==="map",Ue=V.get("icon-text-fit")!=="none",qe=new Jt(null,0,ne&&(ue||!B.hasIconData()||V.get("icon-optional")),ue&&(ne||!B.hasTextData()||V.get("text-optional")),!0);!B.collisionArrays&&q&&(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData())&&B.deserializeCollisionBoxes(q);for(var et=function(St,wt,Dt){for(var Et=0;Et<wt/4;Et++)St.opacityVertexArray.emplaceBack(Dt)},lt=function(St){var wt=B.symbolInstances.get(St),Dt=wt.numHorizontalGlyphVertices,Et=wt.numVerticalGlyphVertices,Yt=wt.crossTileID,qt=G[Yt],Bt=L.opacities[Yt];qt?Bt=J:Bt||(Bt=qe,L.opacities[Yt]=Bt),G[Yt]=!0;var fn=Dt>0||Et>0,gn=wt.numIconVertices>0,kn=L.placedOrientations[wt.crossTileID],On=kn===o.WritingMode.vertical,Nn=kn===o.WritingMode.horizontal||kn===o.WritingMode.horizontalOnly;if(fn){var er=vn(Bt.text),or=On?en:er;et(B.text,Dt,or);var Hn=Nn?en:er;et(B.text,Et,Hn);var ar=Bt.text.isHidden();[wt.rightJustifiedTextSymbolIndex,wt.centerJustifiedTextSymbolIndex,wt.leftJustifiedTextSymbolIndex].forEach(function(qr){qr>=0&&(B.text.placedSymbolArray.get(qr).hidden=ar||On?1:0)}),wt.verticalPlacedTextSymbolIndex>=0&&(B.text.placedSymbolArray.get(wt.verticalPlacedTextSymbolIndex).hidden=ar||Nn?1:0);var vr=L.variableOffsets[wt.crossTileID];vr&&L.markUsedJustification(B,vr.anchor,wt,kn);var Ar=L.placedOrientations[wt.crossTileID];Ar&&(L.markUsedJustification(B,"left",wt,Ar),L.markUsedOrientation(B,Ar,wt))}if(gn){var Kn=vn(Bt.icon),ir=!(Ue&&wt.verticalPlacedIconSymbolIndex&&On);if(wt.placedIconSymbolIndex>=0){var br=ir?Kn:en;et(B.icon,wt.numIconVertices,br),B.icon.placedSymbolArray.get(wt.placedIconSymbolIndex).hidden=Bt.icon.isHidden()}if(wt.verticalPlacedIconSymbolIndex>=0){var sr=ir?en:Kn;et(B.icon,wt.numVerticalIconVertices,sr),B.icon.placedSymbolArray.get(wt.verticalPlacedIconSymbolIndex).hidden=Bt.icon.isHidden()}}if(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData()){var Tr=B.collisionArrays[St];if(Tr){var Er=new o.Point(0,0);if(Tr.textBox||Tr.verticalTextBox){var Rr=!0;if(xe){var Fr=L.variableOffsets[Yt];Fr?(Er=Vn(Fr.anchor,Fr.width,Fr.height,Fr.textOffset,Fr.textBoxScale),Le&&Er._rotate(De?L.transform.angle:-L.transform.angle)):Rr=!1}Tr.textBox&&fr(B.textCollisionBox.collisionVertexArray,Bt.text.placed,!Rr||On,Er.x,Er.y),Tr.verticalTextBox&&fr(B.textCollisionBox.collisionVertexArray,Bt.text.placed,!Rr||Nn,Er.x,Er.y)}var jr=!!(!Nn&&Tr.verticalIconBox);Tr.iconBox&&fr(B.iconCollisionBox.collisionVertexArray,Bt.icon.placed,jr,Ue?Er.x:0,Ue?Er.y:0),Tr.verticalIconBox&&fr(B.iconCollisionBox.collisionVertexArray,Bt.icon.placed,!jr,Ue?Er.x:0,Ue?Er.y:0)}}},ft=0;ft<B.symbolInstances.length;ft++)lt(ft);if(B.sortFeatures(this.transform.angle),this.retainedQueryData[B.bucketInstanceId]&&(this.retainedQueryData[B.bucketInstanceId].featureSortOrder=B.featureSortOrder),B.hasTextData()&&B.text.opacityVertexBuffer&&B.text.opacityVertexBuffer.updateData(B.text.opacityVertexArray),B.hasIconData()&&B.icon.opacityVertexBuffer&&B.icon.opacityVertexBuffer.updateData(B.icon.opacityVertexArray),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexBuffer&&B.iconCollisionBox.collisionVertexBuffer.updateData(B.iconCollisionBox.collisionVertexArray),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexBuffer&&B.textCollisionBox.collisionVertexBuffer.updateData(B.textCollisionBox.collisionVertexArray),B.bucketInstanceId in this.collisionCircleArrays){var xt=this.collisionCircleArrays[B.bucketInstanceId];B.placementInvProjMatrix=xt.invProjMatrix,B.placementViewportMatrix=xt.viewportMatrix,B.collisionCircleArray=xt.circles,delete this.collisionCircleArrays[B.bucketInstanceId]}},Yn.prototype.symbolFadeChange=function(B){return this.fadeDuration===0?1:(B-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yn.prototype.zoomAdjustment=function(B){return Math.max(0,(this.transform.zoom-B)/1.5)},Yn.prototype.hasTransitions=function(B){return this.stale||B-this.lastPlacementChangeTime<this.fadeDuration},Yn.prototype.stillRecent=function(B,G){var q=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*q>B},Yn.prototype.setStale=function(){this.stale=!0};var Zt=Math.pow(2,25),dn=Math.pow(2,24),bt=Math.pow(2,17),Ut=Math.pow(2,16),Xt=Math.pow(2,9),un=Math.pow(2,8),cn=Math.pow(2,1);function vn(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;var G=B.placed?1:0,q=Math.floor(127*B.opacity);return q*Zt+G*dn+q*bt+G*Ut+q*Xt+G*un+q*cn+G}var en=0,Vt=function(B){this._sortAcrossTiles=B.layout.get("symbol-z-order")!=="viewport-y"&&B.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Vt.prototype.continuePlacement=function(B,G,q,L,V){for(var J=this._bucketParts;this._currentTileIndex<B.length;){var ne=B[this._currentTileIndex];if(G.getBucketParts(J,L,ne,this._sortAcrossTiles),this._currentTileIndex++,V())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,J.sort(function(xe,Le){return xe.sortKey-Le.sortKey}));this._currentPartIndex<J.length;){var ue=J[this._currentPartIndex];if(G.placeLayerBucketPart(ue,this._seenCrossTileIDs,q),this._currentPartIndex++,V())return!0}return!1};var Ht=function(B,G,q,L,V,J,ne){this.placement=new Yn(B,V,J,ne),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=L,this._done=!1};Ht.prototype.isDone=function(){return this._done},Ht.prototype.continuePlacement=function(B,G,q){for(var L=this,V=o.browser.now(),J=function(){var xe=o.browser.now()-V;return!L._forceFullPlacement&&xe>2};this._currentPlacementIndex>=0;){var ne=G[B[this._currentPlacementIndex]],ue=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=ue)&&(!ne.maxzoom||ne.maxzoom>ue)){if(this._inProgressLayer||(this._inProgressLayer=new Vt(ne)),this._inProgressLayer.continuePlacement(q[ne.source],this.placement,this._showCollisionBoxes,ne,J))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ht.prototype.commit=function(B){return this.placement.commit(B),this.placement};var tn=512/o.EXTENT/2,sn=function(B,G,q){this.tileID=B,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var L=0;L<G.length;L++){var V=G.get(L),J=V.key;this.indexedSymbolInstances[J]||(this.indexedSymbolInstances[J]=[]),this.indexedSymbolInstances[J].push({crossTileID:V.crossTileID,coord:this.getScaledCoordinates(V,B)})}};sn.prototype.getScaledCoordinates=function(B,G){var q=G.canonical.z-this.tileID.canonical.z,L=tn/Math.pow(2,q);return{x:Math.floor((G.canonical.x*o.EXTENT+B.anchorX)*L),y:Math.floor((G.canonical.y*o.EXTENT+B.anchorY)*L)}},sn.prototype.findMatches=function(B,G,q){for(var L=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),V=0;V<B.length;V++){var J=B.get(V);if(!J.crossTileID){var ne=this.indexedSymbolInstances[J.key];if(ne)for(var ue=this.getScaledCoordinates(J,G),xe=0,Le=ne;xe<Le.length;xe+=1){var De=Le[xe];if(Math.abs(De.coord.x-ue.x)<=L&&Math.abs(De.coord.y-ue.y)<=L&&!q[De.crossTileID]){q[De.crossTileID]=!0,J.crossTileID=De.crossTileID;break}}}}};var wn=function(){this.maxCrossTileID=0};wn.prototype.generate=function(){return++this.maxCrossTileID};var An=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};An.prototype.handleWrapJump=function(B){var G=Math.round((B-this.lng)/360);if(G!==0)for(var q in this.indexes){var L=this.indexes[q],V={};for(var J in L){var ne=L[J];ne.tileID=ne.tileID.unwrapTo(ne.tileID.wrap+G),V[ne.tileID.key]=ne}this.indexes[q]=V}this.lng=B},An.prototype.addBucket=function(B,G,q){if(this.indexes[B.overscaledZ]&&this.indexes[B.overscaledZ][B.key]){if(this.indexes[B.overscaledZ][B.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(B.overscaledZ,this.indexes[B.overscaledZ][B.key])}for(var L=0;L<G.symbolInstances.length;L++)G.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[B.overscaledZ]||(this.usedCrossTileIDs[B.overscaledZ]={});var V=this.usedCrossTileIDs[B.overscaledZ];for(var J in this.indexes){var ne=this.indexes[J];if(Number(J)>B.overscaledZ)for(var ue in ne){var xe=ne[ue];xe.tileID.isChildOf(B)&&xe.findMatches(G.symbolInstances,B,V)}else{var Le=ne[B.scaledTo(Number(J)).key];Le&&Le.findMatches(G.symbolInstances,B,V)}}for(var De=0;De<G.symbolInstances.length;De++){var Ue=G.symbolInstances.get(De);Ue.crossTileID||(Ue.crossTileID=q.generate(),V[Ue.crossTileID]=!0)}return this.indexes[B.overscaledZ]===void 0&&(this.indexes[B.overscaledZ]={}),this.indexes[B.overscaledZ][B.key]=new sn(B,G.symbolInstances,G.bucketInstanceId),!0},An.prototype.removeBucketCrossTileIDs=function(B,G){for(var q in G.indexedSymbolInstances)for(var L=0,V=G.indexedSymbolInstances[q];L<V.length;L+=1){var J=V[L];delete this.usedCrossTileIDs[B][J.crossTileID]}},An.prototype.removeStaleBuckets=function(B){var G=!1;for(var q in this.indexes){var L=this.indexes[q];for(var V in L)B[L[V].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,L[V]),delete L[V],G=!0)}return G};var Dn=function(){this.layerIndexes={},this.crossTileIDs=new wn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Dn.prototype.addLayer=function(B,G,q){var L=this.layerIndexes[B.id];L===void 0&&(L=this.layerIndexes[B.id]=new An);var V=!1,J={};L.handleWrapJump(q);for(var ne=0,ue=G;ne<ue.length;ne+=1){var xe=ue[ne],Le=xe.getBucket(B);Le&&B.id===Le.layerIds[0]&&(Le.bucketInstanceId||(Le.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(xe.tileID,Le,this.crossTileIDs)&&(V=!0),J[Le.bucketInstanceId]=!0)}return L.removeStaleBuckets(J)&&(V=!0),V},Dn.prototype.pruneUnusedLayers=function(B){var G={};for(var q in B.forEach(function(L){G[L]=!0}),this.layerIndexes)G[q]||delete this.layerIndexes[q]};var Bn=function(B,G){return o.emitValidationErrors(B,G&&G.filter(function(q){return q.identifier!=="source.canvas"}))},Xn=o.pick(mt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Un=o.pick(mt,["setCenter","setZoom","setBearing","setPitch"]),tr=function(){var B={},G=o.styleSpec.$version;for(var q in o.styleSpec.$root){var L=o.styleSpec.$root[q];if(L.required){var V;(V=q==="version"?G:L.type==="array"?[]:{})!=null&&(B[q]=V)}}return B}(),Qn=function(B){function G(q,L){var V=this;L===void 0&&(L={}),B.call(this),this.map=q,this.dispatcher=new O(gt(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new m(q._requestManager,L.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Dn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var J=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(ne){var ue={pluginStatus:ne.pluginStatus,pluginURL:ne.pluginURL};J.dispatcher.broadcast("syncRTLPluginState",ue,function(xe,Le){if(o.triggerPluginCompletionEvent(xe),Le&&Le.every(function(Ue){return Ue}))for(var De in J.sourceCaches)J.sourceCaches[De].reload()})}),this.on("data",function(ne){if(ne.dataType==="source"&&ne.sourceDataType==="metadata"){var ue=V.sourceCaches[ne.sourceId];if(ue){var xe=ue.getSource();if(xe&&xe.vectorLayerIds)for(var Le in V._layers){var De=V._layers[Le];De.source===xe.id&&V._validateLayer(De)}}}})}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(q,L){var V=this;L===void 0&&(L={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var J=typeof L.validate=="boolean"?L.validate:!o.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,L.accessToken);var ne=this.map._requestManager.transformRequest(q,o.ResourceType.Style);this._request=o.getJSON(ne,function(ue,xe){V._request=null,ue?V.fire(new o.ErrorEvent(ue)):xe&&V._load(xe,J)})},G.prototype.loadJSON=function(q,L){var V=this;L===void 0&&(L={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){V._request=null,V._load(q,L.validate!==!1)})},G.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(tr,!1)},G.prototype._load=function(q,L){if(!L||!Bn(this,o.validateStyle(q))){for(var V in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(V,q.sources[V],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var J=kt(this.stylesheet.layers);this._order=J.map(function(Le){return Le.id}),this._layers={},this._serializedLayers={};for(var ne=0,ue=J;ne<ue.length;ne+=1){var xe=ue[ne];(xe=o.createStyleLayer(xe)).setEventedParent(this,{layer:{id:xe.id}}),this._layers[xe.id]=xe,this._serializedLayers[xe.id]=xe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},G.prototype._loadSprite=function(q){var L=this;this._spriteRequest=function(V,J,ne){var ue,xe,Le,De=o.browser.devicePixelRatio>1?"@2x":"",Ue=o.getJSON(J.transformRequest(J.normalizeSpriteURL(V,De,".json"),o.ResourceType.SpriteJSON),function(lt,ft){Ue=null,Le||(Le=lt,ue=ft,et())}),qe=o.getImage(J.transformRequest(J.normalizeSpriteURL(V,De,".png"),o.ResourceType.SpriteImage),function(lt,ft){qe=null,Le||(Le=lt,xe=ft,et())});function et(){if(Le)ne(Le);else if(ue&&xe){var lt=o.browser.getImageData(xe),ft={};for(var xt in ue){var St=ue[xt],wt=St.width,Dt=St.height,Et=St.x,Yt=St.y,qt=St.sdf,Bt=St.pixelRatio,fn=St.stretchX,gn=St.stretchY,kn=St.content,On=new o.RGBAImage({width:wt,height:Dt});o.RGBAImage.copy(lt,On,{x:Et,y:Yt},{x:0,y:0},{width:wt,height:Dt}),ft[xt]={data:On,pixelRatio:Bt,sdf:qt,stretchX:fn,stretchY:gn,content:kn}}ne(null,ft)}}return{cancel:function(){Ue&&(Ue.cancel(),Ue=null),qe&&(qe.cancel(),qe=null)}}}(q,this.map._requestManager,function(V,J){if(L._spriteRequest=null,V)L.fire(new o.ErrorEvent(V));else if(J)for(var ne in J)L.imageManager.addImage(ne,J[ne]);L.imageManager.setLoaded(!0),L._availableImages=L.imageManager.listImages(),L.dispatcher.broadcast("setImages",L._availableImages),L.fire(new o.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(q){var L=this.sourceCaches[q.source];if(L){var V=q.sourceLayer;if(V){var J=L.getSource();(J.type==="geojson"||J.vectorLayerIds&&J.vectorLayerIds.indexOf(V)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+V+'" does not exist on source "'+J.id+'" as specified by style layer "'+q.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(q){for(var L=[],V=0,J=q;V<J.length;V+=1){var ne=J[V],ue=this._layers[ne];ue.type!=="custom"&&L.push(ue.serialize())}return L},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var L in this._layers)if(this._layers[L].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(q){if(this._loaded){var L=this._changed;if(this._changed){var V=Object.keys(this._updatedLayers),J=Object.keys(this._removedLayers);for(var ne in(V.length||J.length)&&this._updateWorkerLayers(V,J),this._updatedSources){var ue=this._updatedSources[ne];ue==="reload"?this._reloadSource(ne):ue==="clear"&&this._clearSource(ne)}for(var xe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[xe].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}var Le={};for(var De in this.sourceCaches){var Ue=this.sourceCaches[De];Le[De]=Ue.used,Ue.used=!1}for(var qe=0,et=this._order;qe<et.length;qe+=1){var lt=et[qe],ft=this._layers[lt];ft.recalculate(q,this._availableImages),!ft.isHidden(q.zoom)&&ft.source&&(this.sourceCaches[ft.source].used=!0)}for(var xt in Le){var St=this.sourceCaches[xt];Le[xt]!==St.used&&St.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:xt}))}this.light.recalculate(q),this.z=q.zoom,L&&this.fire(new o.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var L in this.sourceCaches)this.sourceCaches[L].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},G.prototype._updateWorkerLayers=function(q,L){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:L})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(q){var L=this;if(this._checkLoaded(),Bn(this,o.validateStyle(q)))return!1;(q=o.clone$1(q)).layers=kt(q.layers);var V=Wt(this.serialize(),q).filter(function(ne){return!(ne.command in Un)});if(V.length===0)return!1;var J=V.filter(function(ne){return!(ne.command in Xn)});if(J.length>0)throw new Error("Unimplemented: "+J.map(function(ne){return ne.command}).join(", ")+".");return V.forEach(function(ne){ne.command!=="setTransition"&&L[ne.command].apply(L,ne.args)}),this.stylesheet=q,!0},G.prototype.addImage=function(q,L){if(this.getImage(q))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,L),this._afterImageUpdated(q)},G.prototype.updateImage=function(q,L){this.imageManager.updateImage(q,L)},G.prototype.getImage=function(q){return this.imageManager.getImage(q)},G.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._afterImageUpdated(q)},G.prototype._afterImageUpdated=function(q){this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(q,L,V){var J=this;if(V===void 0&&(V={}),this._checkLoaded(),this.sourceCaches[q]!==void 0)throw new Error("There is already a source with this ID");if(!L.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(L).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(L.type)>=0&&this._validate(o.validateStyle.source,"sources."+q,L,null,V))){this.map&&this.map._collectResourceTiming&&(L.collectResourceTiming=!0);var ne=this.sourceCaches[q]=new ot(q,L,this.dispatcher);ne.style=this,ne.setEventedParent(this,function(){return{isSourceLoaded:J.loaded(),source:ne.serialize(),sourceId:q}}),ne.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(q){if(this._checkLoaded(),this.sourceCaches[q]===void 0)throw new Error("There is no source with this ID");for(var L in this._layers)if(this._layers[L].source===q)return this.fire(new o.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+L+'" is using it.')));var V=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],V.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),V.setEventedParent(null),V.clearTiles(),V.onRemove&&V.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(q,L){this._checkLoaded(),this.sourceCaches[q].getSource().setData(L),this._changed=!0},G.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},G.prototype.addLayer=function(q,L,V){V===void 0&&(V={}),this._checkLoaded();var J=q.id;if(this.getLayer(J))this.fire(new o.ErrorEvent(new Error('Layer with id "'+J+'" already exists on this map')));else{var ne;if(q.type==="custom"){if(Bn(this,o.validateCustomStyleLayer(q)))return;ne=o.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(J,q.source),q=o.clone$1(q),q=o.extend(q,{source:J})),this._validate(o.validateStyle.layer,"layers."+J,q,{arrayIndex:-1},V))return;ne=o.createStyleLayer(q),this._validateLayer(ne),ne.setEventedParent(this,{layer:{id:J}}),this._serializedLayers[ne.id]=ne.serialize()}var ue=L?this._order.indexOf(L):this._order.length;if(L&&ue===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.')));else{if(this._order.splice(ue,0,J),this._layerOrderChanged=!0,this._layers[J]=ne,this._removedLayers[J]&&ne.source&&ne.type!=="custom"){var xe=this._removedLayers[J];delete this._removedLayers[J],xe.type!==ne.type?this._updatedSources[ne.source]="clear":(this._updatedSources[ne.source]="reload",this.sourceCaches[ne.source].pause())}this._updateLayer(ne),ne.onAdd&&ne.onAdd(this.map)}}},G.prototype.moveLayer=function(q,L){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==L){var V=this._order.indexOf(q);this._order.splice(V,1);var J=L?this._order.indexOf(L):this._order.length;L&&J===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.'))):(this._order.splice(J,0,q),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(q){this._checkLoaded();var L=this._layers[q];if(L){L.setEventedParent(null);var V=this._order.indexOf(q);this._order.splice(V,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=L,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],L.onRemove&&L.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(q){return this._layers[q]},G.prototype.hasLayer=function(q){return q in this._layers},G.prototype.setLayerZoomRange=function(q,L,V){this._checkLoaded();var J=this.getLayer(q);J?J.minzoom===L&&J.maxzoom===V||(L!=null&&(J.minzoom=L),V!=null&&(J.maxzoom=V),this._updateLayer(J)):this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(q,L,V){V===void 0&&(V={}),this._checkLoaded();var J=this.getLayer(q);if(J){if(!o.deepEqual(J.filter,L))return L==null?(J.filter=void 0,void this._updateLayer(J)):void(this._validate(o.validateStyle.filter,"layers."+J.id+".filter",L,null,V)||(J.filter=o.clone$1(L),this._updateLayer(J)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(q){return o.clone$1(this.getLayer(q).filter)},G.prototype.setLayoutProperty=function(q,L,V,J){J===void 0&&(J={}),this._checkLoaded();var ne=this.getLayer(q);ne?o.deepEqual(ne.getLayoutProperty(L),V)||(ne.setLayoutProperty(L,V,J),this._updateLayer(ne)):this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(q,L){var V=this.getLayer(q);if(V)return V.getLayoutProperty(L);this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(q,L,V,J){J===void 0&&(J={}),this._checkLoaded();var ne=this.getLayer(q);ne?o.deepEqual(ne.getPaintProperty(L),V)||(ne.setPaintProperty(L,V,J)&&this._updateLayer(ne),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(q,L){return this.getLayer(q).getPaintProperty(L)},G.prototype.setFeatureState=function(q,L){this._checkLoaded();var V=q.source,J=q.sourceLayer,ne=this.sourceCaches[V];if(ne!==void 0){var ue=ne.getSource().type;ue==="geojson"&&J?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ue!=="vector"||J?(q.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),ne.setFeatureState(J,q.id,L)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+V+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(q,L){this._checkLoaded();var V=q.source,J=this.sourceCaches[V];if(J!==void 0){var ne=J.getSource().type,ue=ne==="vector"?q.sourceLayer:void 0;ne!=="vector"||ue?L&&typeof q.id!="string"&&typeof q.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):J.removeFeatureState(ue,q.id,L):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+V+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(q){this._checkLoaded();var L=q.source,V=q.sourceLayer,J=this.sourceCaches[L];if(J!==void 0){if(J.getSource().type!=="vector"||V)return q.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),J.getFeatureState(V,q.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return q!==void 0})},G.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&this.sourceCaches[q.source].getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(q){for(var L=this,V=function(kn){return L._layers[kn].type==="fill-extrusion"},J={},ne=[],ue=this._order.length-1;ue>=0;ue--){var xe=this._order[ue];if(V(xe)){J[xe]=ue;for(var Le=0,De=q;Le<De.length;Le+=1){var Ue=De[Le][xe];if(Ue)for(var qe=0,et=Ue;qe<et.length;qe+=1){var lt=et[qe];ne.push(lt)}}}}ne.sort(function(kn,On){return On.intersectionZ-kn.intersectionZ});for(var ft=[],xt=this._order.length-1;xt>=0;xt--){var St=this._order[xt];if(V(St))for(var wt=ne.length-1;wt>=0;wt--){var Dt=ne[wt].feature;if(J[Dt.layer.id]<xt)break;ft.push(Dt),ne.pop()}else for(var Et=0,Yt=q;Et<Yt.length;Et+=1){var qt=Yt[Et][St];if(qt)for(var Bt=0,fn=qt;Bt<fn.length;Bt+=1){var gn=fn[Bt];ft.push(gn.feature)}}}return ft},G.prototype.queryRenderedFeatures=function(q,L,V){L&&L.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",L.filter,null,L);var J={};if(L&&L.layers){if(!Array.isArray(L.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ne=0,ue=L.layers;ne<ue.length;ne+=1){var xe=ue[ne],Le=this._layers[xe];if(!Le)return this.fire(new o.ErrorEvent(new Error("The layer '"+xe+"' does not exist in the map's style and cannot be queried for features."))),[];J[Le.source]=!0}}var De=[];for(var Ue in L.availableImages=this._availableImages,this.sourceCaches)L.layers&&!J[Ue]||De.push($(this.sourceCaches[Ue],this._layers,this._serializedLayers,q,L,V));return this.placement&&De.push(function(qe,et,lt,ft,xt,St,wt){for(var Dt={},Et=St.queryRenderedSymbols(ft),Yt=[],qt=0,Bt=Object.keys(Et).map(Number);qt<Bt.length;qt+=1){var fn=Bt[qt];Yt.push(wt[fn])}Yt.sort(K);for(var gn=function(){var or=On[kn],Hn=or.featureIndex.lookupSymbolFeatures(Et[or.bucketInstanceId],et,or.bucketIndex,or.sourceLayerIndex,xt.filter,xt.layers,xt.availableImages,qe);for(var ar in Hn){var vr=Dt[ar]=Dt[ar]||[],Ar=Hn[ar];Ar.sort(function(sr,Tr){var Er=or.featureSortOrder;if(Er){var Rr=Er.indexOf(sr.featureIndex);return Er.indexOf(Tr.featureIndex)-Rr}return Tr.featureIndex-sr.featureIndex});for(var Kn=0,ir=Ar;Kn<ir.length;Kn+=1){var br=ir[Kn];vr.push(br)}}},kn=0,On=Yt;kn<On.length;kn+=1)gn();var Nn=function(or){Dt[or].forEach(function(Hn){var ar=Hn.feature,vr=qe[or],Ar=lt[vr.source].getFeatureState(ar.layer["source-layer"],ar.id);ar.source=ar.layer.source,ar.layer["source-layer"]&&(ar.sourceLayer=ar.layer["source-layer"]),ar.state=Ar})};for(var er in Dt)Nn(er);return Dt}(this._layers,this._serializedLayers,this.sourceCaches,q,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(De)},G.prototype.querySourceFeatures=function(q,L){L&&L.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",L.filter,null,L);var V=this.sourceCaches[q];return V?function(J,ne){for(var ue=J.getRenderableIds().map(function(et){return J.getTileByID(et)}),xe=[],Le={},De=0;De<ue.length;De++){var Ue=ue[De],qe=Ue.tileID.canonical.key;Le[qe]||(Le[qe]=!0,Ue.querySourceFeatures(xe,ne))}return xe}(V,L):[]},G.prototype.addSourceType=function(q,L,V){return G.getSourceType(q)?V(new Error('A source type called "'+q+'" already exists.')):(G.setSourceType(q,L),L.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:L.workerSourceURL},V):V(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(q,L){L===void 0&&(L={}),this._checkLoaded();var V=this.light.getLight(),J=!1;for(var ne in q)if(!o.deepEqual(q[ne],V[ne])){J=!0;break}if(J){var ue={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,L),this.light.updateTransitions(ue)}},G.prototype._validate=function(q,L,V,J,ne){return ne===void 0&&(ne={}),(!ne||ne.validate!==!1)&&Bn(this,q.call(o.validateStyle,o.extend({key:L,style:this.serialize(),value:V,styleSpec:o.styleSpec},J)))},G.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var L in this.sourceCaches)this.sourceCaches[L].clearTiles(),this.sourceCaches[L].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},G.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},G.prototype._updateSources=function(q){for(var L in this.sourceCaches)this.sourceCaches[L].update(q)},G.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},G.prototype._updatePlacement=function(q,L,V,J,ne){ne===void 0&&(ne=!1);for(var ue=!1,xe=!1,Le={},De=0,Ue=this._order;De<Ue.length;De+=1){var qe=Ue[De],et=this._layers[qe];if(et.type==="symbol"){if(!Le[et.source]){var lt=this.sourceCaches[et.source];Le[et.source]=lt.getRenderableIds(!0).map(function(Et){return lt.getTileByID(Et)}).sort(function(Et,Yt){return Yt.tileID.overscaledZ-Et.tileID.overscaledZ||(Et.tileID.isLessThan(Yt.tileID)?-1:1)})}var ft=this.crossTileSymbolIndex.addLayer(et,Le[et.source],q.center.lng);ue=ue||ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ne=ne||this._layerOrderChanged||V===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),q.zoom))&&(this.pauseablePlacement=new Ht(q,this._order,ne,L,V,J,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Le),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),xe=!0),ue&&this.pauseablePlacement.placement.setStale()),xe||ue)for(var xt=0,St=this._order;xt<St.length;xt+=1){var wt=St[xt],Dt=this._layers[wt];Dt.type==="symbol"&&this.placement.updateLayerOpacities(Dt,Le[Dt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},G.prototype.getImages=function(q,L,V){this.imageManager.getImages(L.icons,V),this._updateTilesForChangedImages();var J=this.sourceCaches[L.source];J&&J.setDependencies(L.tileID.key,L.type,L.icons)},G.prototype.getGlyphs=function(q,L,V){this.glyphManager.getGlyphs(L.stacks,V)},G.prototype.getResource=function(q,L,V){return o.makeRequest(L,V)},G}(o.Evented);Qn.getSourceType=function(B){return te[B]},Qn.setSourceType=function(B,G){te[B]=G},Qn.registerForPluginStateChange=o.registerForPluginStateChange;var Zn=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),ur=pi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),mr=pi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),hr=pi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),rr=pi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),gr=pi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),xr=pi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Pr=pi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ii=pi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),oi=pi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Vi=pi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ti=pi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),ki=pi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Or=pi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),hi=pi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),sa=pi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Zi=pi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),uo=pi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),co=pi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Xa=pi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Xi=pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ka=pi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ao=pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ho=pi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Sa=pi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ea=pi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ja=pi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function pi(B,G){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,L=G.match(/attribute ([\w]+) ([\w]+)/g),V=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),J=G.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=J?J.concat(V):V,ue={};return{fragmentSource:B=B.replace(q,function(xe,Le,De,Ue,qe){return ue[qe]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
varying `+De+" "+Ue+" "+qe+`;
#else
uniform `+De+" "+Ue+" u_"+qe+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qe+`
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`}),vertexSource:G=G.replace(q,function(xe,Le,De,Ue,qe){var et=Ue==="float"?"vec2":"vec4",lt=qe.match(/color/)?"color":et;return ue[qe]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
uniform lowp float u_`+qe+`_t;
attribute `+De+" "+et+" a_"+qe+`;
varying `+De+" "+Ue+" "+qe+`;
#else
uniform `+De+" "+Ue+" u_"+qe+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+qe+" = a_"+qe+`;
#else
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+qe+" = unpack_mix_"+lt+"(a_"+qe+", u_"+qe+`_t);
#else
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
uniform lowp float u_`+qe+`_t;
attribute `+De+" "+et+" a_"+qe+`;
#else
uniform `+De+" "+Ue+" u_"+qe+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+De+" "+Ue+" "+qe+" = a_"+qe+`;
#else
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+De+" "+Ue+" "+qe+" = unpack_mix_"+lt+"(a_"+qe+", u_"+qe+`_t);
#else
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`}),staticAttributes:L,staticUniforms:ne}}var Ri=Object.freeze({__proto__:null,prelude:ur,background:mr,backgroundPattern:hr,circle:rr,clippingMask:gr,heatmap:xr,heatmapTexture:Pr,collisionBox:ii,collisionCircle:oi,debug:Vi,fill:ti,fillOutline:ki,fillOutlinePattern:Or,fillPattern:hi,fillExtrusion:sa,fillExtrusionPattern:Zi,hillshadePrepare:uo,hillshade:co,line:Xa,lineGradient:Xi,linePattern:Ka,lineSDF:Ao,raster:Ho,symbolIcon:Sa,symbolSDF:Ea,symbolTextAndIcon:Ja}),fo=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function $a(B){for(var G=[],q=0;q<B.length;q++)if(B[q]!==null){var L=B[q].split(" ");G.push(L.pop())}return G}fo.prototype.bind=function(B,G,q,L,V,J,ne,ue){this.context=B;for(var xe=this.boundPaintVertexBuffers.length!==L.length,Le=0;!xe&&Le<L.length;Le++)this.boundPaintVertexBuffers[Le]!==L[Le]&&(xe=!0);var De=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==q||xe||this.boundIndexBuffer!==V||this.boundVertexOffset!==J||this.boundDynamicVertexBuffer!==ne||this.boundDynamicVertexBuffer2!==ue;!B.extVertexArrayObject||De?this.freshBind(G,q,L,V,J,ne,ue):(B.bindVertexArrayOES.set(this.vao),ne&&ne.bind(),V&&V.dynamicDraw&&V.bind(),ue&&ue.bind())},fo.prototype.freshBind=function(B,G,q,L,V,J,ne){var ue,xe=B.numAttributes,Le=this.context,De=Le.gl;if(Le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Le.extVertexArrayObject.createVertexArrayOES(),Le.bindVertexArrayOES.set(this.vao),ue=0,this.boundProgram=B,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=L,this.boundVertexOffset=V,this.boundDynamicVertexBuffer=J,this.boundDynamicVertexBuffer2=ne;else{ue=Le.currentNumAttributes||0;for(var Ue=xe;Ue<ue;Ue++)De.disableVertexAttribArray(Ue)}G.enableAttributes(De,B);for(var qe=0,et=q;qe<et.length;qe+=1)et[qe].enableAttributes(De,B);J&&J.enableAttributes(De,B),ne&&ne.enableAttributes(De,B),G.bind(),G.setVertexAttribPointers(De,B,V);for(var lt=0,ft=q;lt<ft.length;lt+=1){var xt=ft[lt];xt.bind(),xt.setVertexAttribPointers(De,B,V)}J&&(J.bind(),J.setVertexAttribPointers(De,B,V)),L&&L.bind(),ne&&(ne.bind(),ne.setVertexAttribPointers(De,B,V)),Le.currentNumAttributes=xe},fo.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Fa=function(B,G,q,L,V,J){var ne=B.gl;this.program=ne.createProgram();for(var ue=$a(q.staticAttributes),xe=L?L.getBinderAttributes():[],Le=ue.concat(xe),De=q.staticUniforms?$a(q.staticUniforms):[],Ue=L?L.getBinderUniforms():[],qe=[],et=0,lt=De.concat(Ue);et<lt.length;et+=1){var ft=lt[et];qe.indexOf(ft)<0&&qe.push(ft)}var xt=L?L.defines():[];J&&xt.push("#define OVERDRAW_INSPECTOR;");var St=xt.concat(ur.fragmentSource,q.fragmentSource).join(`
`),wt=xt.concat(ur.vertexSource,q.vertexSource).join(`
`),Dt=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(Dt,St),ne.compileShader(Dt),ne.attachShader(this.program,Dt);var Et=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(Et,wt),ne.compileShader(Et),ne.attachShader(this.program,Et),this.attributes={};var Yt={};this.numAttributes=Le.length;for(var qt=0;qt<this.numAttributes;qt++)Le[qt]&&(ne.bindAttribLocation(this.program,qt,Le[qt]),this.attributes[Le[qt]]=qt);ne.linkProgram(this.program),ne.deleteShader(Et),ne.deleteShader(Dt);for(var Bt=0;Bt<qe.length;Bt++){var fn=qe[Bt];if(fn&&!Yt[fn]){var gn=ne.getUniformLocation(this.program,fn);gn&&(Yt[fn]=gn)}}this.fixedUniforms=V(B,Yt),this.binderUniforms=L?L.getUniforms(B,Yt):[]}}};function Mo(B,G,q){var L=1/Gn(q,1,G.transform.tileZoom),V=Math.pow(2,q.tileID.overscaledZ),J=q.tileSize*Math.pow(2,G.transform.tileZoom)/V,ne=J*(q.tileID.canonical.x+q.tileID.wrap*V),ue=J*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[L,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ne>>16,ue>>16],u_pixel_coord_lower:[65535&ne,65535&ue]}}Fa.prototype.draw=function(B,G,q,L,V,J,ne,ue,xe,Le,De,Ue,qe,et,lt,ft){var xt,St=B.gl;if(!this.failedToCreate){for(var wt in B.program.set(this.program),B.setDepthMode(q),B.setStencilMode(L),B.setColorMode(V),B.setCullFace(J),this.fixedUniforms)this.fixedUniforms[wt].set(ne[wt]);et&&et.setUniforms(B,this.binderUniforms,Ue,{zoom:qe});for(var Dt=(xt={},xt[St.LINES]=2,xt[St.TRIANGLES]=3,xt[St.LINE_STRIP]=1,xt)[G],Et=0,Yt=De.get();Et<Yt.length;Et+=1){var qt=Yt[Et],Bt=qt.vaos||(qt.vaos={});(Bt[ue]||(Bt[ue]=new fo)).bind(B,this,xe,et?et.getPaintVertexBuffers():[],Le,qt.vertexOffset,lt,ft),St.drawElements(G,qt.primitiveLength*Dt,St.UNSIGNED_SHORT,qt.primitiveOffset*Dt*2)}}};var Qa=function(B,G,q,L){var V=G.style.light,J=V.properties.get("position"),ne=[J.x,J.y,J.z],ue=o.create$1();V.properties.get("anchor")==="viewport"&&o.fromRotation(ue,-G.transform.angle),o.transformMat3(ne,ne,ue);var xe=V.properties.get("color");return{u_matrix:B,u_lightpos:ne,u_lightintensity:V.properties.get("intensity"),u_lightcolor:[xe.r,xe.g,xe.b],u_vertical_gradient:+q,u_opacity:L}},So=function(B,G,q,L,V,J,ne){return o.extend(Qa(B,G,q,L),Mo(J,G,ne),{u_height_factor:-Math.pow(2,V.overscaledZ)/ne.tileSize/8})},ho=function(B){return{u_matrix:B}},Eo=function(B,G,q,L){return o.extend(ho(B),Mo(q,G,L))},eo=function(B,G){return{u_matrix:B,u_world:G}},Ks=function(B,G,q,L,V){return o.extend(Eo(B,G,q,L),{u_world:V})},Bs=function(B,G,q,L){var V,J,ne=B.transform;if(L.paint.get("circle-pitch-alignment")==="map"){var ue=Gn(q,1,ne.zoom);V=!0,J=[ue,ue]}else V=!1,J=ne.pixelsToGLUnits;return{u_camera_to_center_distance:ne.cameraToCenterDistance,u_scale_with_map:+(L.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(G.posMatrix,q,L.paint.get("circle-translate"),L.paint.get("circle-translate-anchor")),u_pitch_with_map:+V,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:J}},Go=function(B,G,q){var L=Gn(q,1,G.zoom),V=Math.pow(2,G.zoom-q.tileID.overscaledZ),J=q.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:L,u_extrude_scale:[G.pixelsToGLUnits[0]/(L*V),G.pixelsToGLUnits[1]/(L*V)],u_overscale_factor:J}},ol=function(B,G,q){return{u_matrix:B,u_inv_matrix:G,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},sl=function(B,G,q){return q===void 0&&(q=1),{u_matrix:B,u_color:G,u_overlay:0,u_overlay_scale:q}},Wo=function(B){return{u_matrix:B}},ll=function(B,G,q,L){return{u_matrix:B,u_extrude_scale:Gn(G,1,q),u_intensity:L}},_l=function(B,G,q,L){var V=o.create();o.ortho(V,0,B.width,B.height,0,0,1);var J=B.context.gl;return{u_matrix:V,u_world:[J.drawingBufferWidth,J.drawingBufferHeight],u_image:q,u_color_ramp:L,u_opacity:G.paint.get("heatmap-opacity")}},wl=function(B,G,q){var L=q.paint.get("hillshade-shadow-color"),V=q.paint.get("hillshade-highlight-color"),J=q.paint.get("hillshade-accent-color"),ne=q.paint.get("hillshade-illumination-direction")*(Math.PI/180);q.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=B.transform.angle);var ue,xe,Le,De=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix(G.tileID.toUnwrapped(),De),u_image:0,u_latrange:(ue=G.tileID,xe=Math.pow(2,ue.canonical.z),Le=ue.canonical.y,[new o.MercatorCoordinate(0,Le/xe).toLngLat().lat,new o.MercatorCoordinate(0,(Le+1)/xe).toLngLat().lat]),u_light:[q.paint.get("hillshade-exaggeration"),ne],u_shadow:L,u_highlight:V,u_accent:J}},Yo=function(B,G){var q=G.stride,L=o.create();return o.ortho(L,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(L,L,[0,-o.EXTENT,0]),{u_matrix:L,u_image:1,u_dimension:[q,q],u_zoom:B.overscaledZ,u_unpack:G.getUnpackVector()}},to=function(B,G,q){var L=B.transform;return{u_matrix:Ba(B,G,q),u_ratio:1/Gn(G,1,L.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},as=function(B,G,q,L){return o.extend(to(B,G,q),{u_image:0,u_image_height:L})},Zo=function(B,G,q,L){var V=B.transform,J=Xo(G,V);return{u_matrix:Ba(B,G,q),u_texsize:G.imageAtlasTexture.size,u_ratio:1/Gn(G,1,V.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[J,L.fromScale,L.toScale],u_fade:L.t,u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]]}},_s=function(B,G,q,L,V){var J=B.transform,ne=B.lineAtlas,ue=Xo(G,J),xe=q.layout.get("line-cap")==="round",Le=ne.getDash(L.from,xe),De=ne.getDash(L.to,xe),Ue=Le.width*V.fromScale,qe=De.width*V.toScale;return o.extend(to(B,G,q),{u_patternscale_a:[ue/Ue,-Le.height/2],u_patternscale_b:[ue/qe,-De.height/2],u_sdfgamma:ne.width/(256*Math.min(Ue,qe)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Le.y,u_tex_y_b:De.y,u_mix:V.t})};function Xo(B,G){return 1/Gn(B,1,G.tileZoom)}function Ba(B,G,q){return B.translatePosMatrix(G.tileID.posMatrix,G,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var Js=function(B,G,q,L,V){return{u_matrix:B,u_tl_parent:G,u_scale_parent:q,u_buffer_scale:1,u_fade_t:L.mix,u_opacity:L.opacity*V.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:V.paint.get("raster-brightness-min"),u_brightness_high:V.paint.get("raster-brightness-max"),u_saturation_factor:(ne=V.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:(J=V.paint.get("raster-contrast"),J>0?1/(1-J):1+J),u_spin_weights:Lo(V.paint.get("raster-hue-rotate"))};var J,ne};function Lo(B){B*=Math.PI/180;var G=Math.sin(B),q=Math.cos(B);return[(2*q+1)/3,(-Math.sqrt(3)*G-q+1)/3,(Math.sqrt(3)*G-q+1)/3]}var po,go=function(B,G,q,L,V,J,ne,ue,xe,Le){var De=V.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:De.cameraToCenterDistance,u_pitch:De.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:De.width/De.height,u_fade_change:V.options.fadeDuration?V.symbolFadeChange:1,u_matrix:J,u_label_plane_matrix:ne,u_coord_matrix:ue,u_is_text:+xe,u_pitch_with_map:+L,u_texsize:Le,u_texture:0}},Co=function(B,G,q,L,V,J,ne,ue,xe,Le,De){var Ue=V.transform;return o.extend(go(B,G,q,L,V,J,ne,ue,xe,Le),{u_gamma_scale:L?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+De})},Ur=function(B,G,q,L,V,J,ne,ue,xe,Le){return o.extend(Co(B,G,q,L,V,J,ne,ue,!0,xe,!0),{u_texsize_icon:Le,u_texture_icon:1})},os=function(B,G,q){return{u_matrix:B,u_opacity:G,u_color:q}},Tl=function(B,G,q,L,V,J){return o.extend(function(ne,ue,xe,Le){var De=xe.imageManager.getPattern(ne.from.toString()),Ue=xe.imageManager.getPattern(ne.to.toString()),qe=xe.imageManager.getPixelSize(),et=qe.width,lt=qe.height,ft=Math.pow(2,Le.tileID.overscaledZ),xt=Le.tileSize*Math.pow(2,xe.transform.tileZoom)/ft,St=xt*(Le.tileID.canonical.x+Le.tileID.wrap*ft),wt=xt*Le.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:De.tl,u_pattern_br_a:De.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[et,lt],u_mix:ue.t,u_pattern_size_a:De.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:ue.fromScale,u_scale_b:ue.toScale,u_tile_units_to_pixels:1/Gn(Le,1,xe.transform.tileZoom),u_pixel_coord_upper:[St>>16,wt>>16],u_pixel_coord_lower:[65535&St,65535&wt]}}(L,J,q,V),{u_matrix:B,u_opacity:G})},Ns={fillExtrusion:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_lightpos:new o.Uniform3f(B,G.u_lightpos),u_lightintensity:new o.Uniform1f(B,G.u_lightintensity),u_lightcolor:new o.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,G.u_vertical_gradient),u_opacity:new o.Uniform1f(B,G.u_opacity)}},fillExtrusionPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_lightpos:new o.Uniform3f(B,G.u_lightpos),u_lightintensity:new o.Uniform1f(B,G.u_lightintensity),u_lightcolor:new o.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,G.u_vertical_gradient),u_height_factor:new o.Uniform1f(B,G.u_height_factor),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade),u_opacity:new o.Uniform1f(B,G.u_opacity)}},fill:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},fillPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},fillOutline:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world)}},fillOutlinePattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},circle:function(B,G){return{u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(B,G.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(B,G.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},collisionBox:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(B,G.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(B,G.u_extrude_scale),u_overscale_factor:new o.Uniform1f(B,G.u_overscale_factor)}},collisionCircle:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_inv_matrix:new o.UniformMatrix4f(B,G.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(B,G.u_viewport_size)}},debug:function(B,G){return{u_color:new o.UniformColor(B,G.u_color),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_overlay:new o.Uniform1i(B,G.u_overlay),u_overlay_scale:new o.Uniform1f(B,G.u_overlay_scale)}},clippingMask:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},heatmap:function(B,G){return{u_extrude_scale:new o.Uniform1f(B,G.u_extrude_scale),u_intensity:new o.Uniform1f(B,G.u_intensity),u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},heatmapTexture:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world),u_image:new o.Uniform1i(B,G.u_image),u_color_ramp:new o.Uniform1i(B,G.u_color_ramp),u_opacity:new o.Uniform1f(B,G.u_opacity)}},hillshade:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_latrange:new o.Uniform2f(B,G.u_latrange),u_light:new o.Uniform2f(B,G.u_light),u_shadow:new o.UniformColor(B,G.u_shadow),u_highlight:new o.UniformColor(B,G.u_highlight),u_accent:new o.UniformColor(B,G.u_accent)}},hillshadePrepare:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_dimension:new o.Uniform2f(B,G.u_dimension),u_zoom:new o.Uniform1f(B,G.u_zoom),u_unpack:new o.Uniform4f(B,G.u_unpack)}},line:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels)}},lineGradient:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_image:new o.Uniform1i(B,G.u_image),u_image_height:new o.Uniform1f(B,G.u_image_height)}},linePattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_texsize:new o.Uniform2f(B,G.u_texsize),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_image:new o.Uniform1i(B,G.u_image),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},lineSDF:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(B,G.u_patternscale_a),u_patternscale_b:new o.Uniform2f(B,G.u_patternscale_b),u_sdfgamma:new o.Uniform1f(B,G.u_sdfgamma),u_image:new o.Uniform1i(B,G.u_image),u_tex_y_a:new o.Uniform1f(B,G.u_tex_y_a),u_tex_y_b:new o.Uniform1f(B,G.u_tex_y_b),u_mix:new o.Uniform1f(B,G.u_mix)}},raster:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_tl_parent:new o.Uniform2f(B,G.u_tl_parent),u_scale_parent:new o.Uniform1f(B,G.u_scale_parent),u_buffer_scale:new o.Uniform1f(B,G.u_buffer_scale),u_fade_t:new o.Uniform1f(B,G.u_fade_t),u_opacity:new o.Uniform1f(B,G.u_opacity),u_image0:new o.Uniform1i(B,G.u_image0),u_image1:new o.Uniform1i(B,G.u_image1),u_brightness_low:new o.Uniform1f(B,G.u_brightness_low),u_brightness_high:new o.Uniform1f(B,G.u_brightness_high),u_saturation_factor:new o.Uniform1f(B,G.u_saturation_factor),u_contrast_factor:new o.Uniform1f(B,G.u_contrast_factor),u_spin_weights:new o.Uniform3f(B,G.u_spin_weights)}},symbolIcon:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texture:new o.Uniform1i(B,G.u_texture)}},symbolSDF:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texture:new o.Uniform1i(B,G.u_texture),u_gamma_scale:new o.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,G.u_is_halo)}},symbolTextAndIcon:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texsize_icon:new o.Uniform2f(B,G.u_texsize_icon),u_texture:new o.Uniform1i(B,G.u_texture),u_texture_icon:new o.Uniform1i(B,G.u_texture_icon),u_gamma_scale:new o.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,G.u_is_halo)}},background:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_opacity:new o.Uniform1f(B,G.u_opacity),u_color:new o.UniformColor(B,G.u_color)}},backgroundPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_opacity:new o.Uniform1f(B,G.u_opacity),u_image:new o.Uniform1i(B,G.u_image),u_pattern_tl_a:new o.Uniform2f(B,G.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(B,G.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(B,G.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(B,G.u_pattern_br_b),u_texsize:new o.Uniform2f(B,G.u_texsize),u_mix:new o.Uniform1f(B,G.u_mix),u_pattern_size_a:new o.Uniform2f(B,G.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(B,G.u_pattern_size_b),u_scale_a:new o.Uniform1f(B,G.u_scale_a),u_scale_b:new o.Uniform1f(B,G.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(B,G.u_tile_units_to_pixels)}}};function ss(B,G,q,L,V,J,ne){for(var ue=B.context,xe=ue.gl,Le=B.useProgram("collisionBox"),De=[],Ue=0,qe=0,et=0;et<L.length;et++){var lt=L[et],ft=G.getTile(lt),xt=ft.getBucket(q);if(xt){var St=lt.posMatrix;V[0]===0&&V[1]===0||(St=B.translatePosMatrix(lt.posMatrix,ft,V,J));var wt=ne?xt.textCollisionBox:xt.iconCollisionBox,Dt=xt.collisionCircleArray;if(Dt.length>0){var Et=o.create(),Yt=St;o.mul(Et,xt.placementInvProjMatrix,B.transform.glCoordMatrix),o.mul(Et,Et,xt.placementViewportMatrix),De.push({circleArray:Dt,circleOffset:qe,transform:Yt,invTransform:Et}),qe=Ue+=Dt.length/4}wt&&Le.draw(ue,xe.LINES,Pt.disabled,He.disabled,B.colorModeForRenderPass(),Ne.disabled,Go(St,B.transform,ft),q.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,B.transform.zoom,null,null,wt.collisionVertexBuffer)}}if(ne&&De.length){var qt=B.useProgram("collisionCircle"),Bt=new o.StructArrayLayout2f1f2i16;Bt.resize(4*Ue),Bt._trim();for(var fn=0,gn=0,kn=De;gn<kn.length;gn+=1)for(var On=kn[gn],Nn=0;Nn<On.circleArray.length/4;Nn++){var er=4*Nn,or=On.circleArray[er+0],Hn=On.circleArray[er+1],ar=On.circleArray[er+2],vr=On.circleArray[er+3];Bt.emplace(fn++,or,Hn,ar,vr,0),Bt.emplace(fn++,or,Hn,ar,vr,1),Bt.emplace(fn++,or,Hn,ar,vr,2),Bt.emplace(fn++,or,Hn,ar,vr,3)}(!po||po.length<2*Ue)&&(po=function(Er){var Rr=2*Er,Fr=new o.StructArrayLayout3ui6;Fr.resize(Rr),Fr._trim();for(var jr=0;jr<Rr;jr++){var qr=6*jr;Fr.uint16[qr+0]=4*jr+0,Fr.uint16[qr+1]=4*jr+1,Fr.uint16[qr+2]=4*jr+2,Fr.uint16[qr+3]=4*jr+2,Fr.uint16[qr+4]=4*jr+3,Fr.uint16[qr+5]=4*jr+0}return Fr}(Ue));for(var Ar=ue.createIndexBuffer(po,!0),Kn=ue.createVertexBuffer(Bt,o.collisionCircleLayout.members,!0),ir=0,br=De;ir<br.length;ir+=1){var sr=br[ir],Tr=ol(sr.transform,sr.invTransform,B.transform);qt.draw(ue,xe.TRIANGLES,Pt.disabled,He.disabled,B.colorModeForRenderPass(),Ne.disabled,Tr,q.id,Kn,Ar,o.SegmentVector.simpleSegment(0,2*sr.circleOffset,sr.circleArray.length,sr.circleArray.length/2),null,B.transform.zoom,null,null,null)}Kn.destroy(),Ar.destroy()}}var ul=o.identity(new Float32Array(16));function kl(B,G,q,L,V,J){var ne=o.getAnchorAlignment(B),ue=-(ne.horizontalAlign-.5)*G,xe=-(ne.verticalAlign-.5)*q,Le=o.evaluateVariableOffset(B,L);return new o.Point((ue/V+Le[0])*J,(xe/V+Le[1])*J)}function js(B,G,q,L,V,J,ne,ue,xe,Le,De){var Ue=B.text.placedSymbolArray,qe=B.text.dynamicLayoutVertexArray,et=B.icon.dynamicLayoutVertexArray,lt={};qe.clear();for(var ft=0;ft<Ue.length;ft++){var xt=Ue.get(ft),St=B.allowVerticalPlacement&&!xt.placedOrientation,wt=xt.hidden||!xt.crossTileID||St?null:L[xt.crossTileID];if(wt){var Dt=new o.Point(xt.anchorX,xt.anchorY),Et=Kt(Dt,q?ue:ne),Yt=on(J.cameraToCenterDistance,Et.signedDistanceFromCamera),qt=V.evaluateSizeForFeature(B.textSizeData,Le,xt)*Yt/o.ONE_EM;q&&(qt*=B.tilePixelRatio/xe);for(var Bt=wt.width,fn=wt.height,gn=kl(wt.anchor,Bt,fn,wt.textOffset,wt.textBoxScale,qt),kn=q?Kt(Dt.add(gn),ne).point:Et.point.add(G?gn.rotate(-J.angle):gn),On=B.allowVerticalPlacement&&xt.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Nn=0;Nn<xt.numGlyphs;Nn++)o.addDynamicAttributes(qe,kn,On);De&&xt.associatedIconIndex>=0&&(lt[xt.associatedIconIndex]={shiftedAnchor:kn,angle:On})}else Pn(xt.numGlyphs,qe)}if(De){et.clear();for(var er=B.icon.placedSymbolArray,or=0;or<er.length;or++){var Hn=er.get(or);if(Hn.hidden)Pn(Hn.numGlyphs,et);else{var ar=lt[or];if(ar)for(var vr=0;vr<Hn.numGlyphs;vr++)o.addDynamicAttributes(et,ar.shiftedAnchor,ar.angle);else Pn(Hn.numGlyphs,et)}}B.icon.dynamicLayoutVertexBuffer.updateData(et)}B.text.dynamicLayoutVertexBuffer.updateData(qe)}function Al(B,G,q){return q.iconsInText&&G?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function Oo(B,G,q,L,V,J,ne,ue,xe,Le,De,Ue){for(var qe=B.context,et=qe.gl,lt=B.transform,ft=ue==="map",xt=xe==="map",St=ft&&q.layout.get("symbol-placement")!=="point",wt=ft&&!xt&&!St,Dt=q.layout.get("symbol-sort-key").constantOr(1)!==void 0,Et=!1,Yt=B.depthModeForSublayer(0,Pt.ReadOnly),qt=q.layout.get("text-variable-anchor"),Bt=[],fn=0,gn=L;fn<gn.length;fn+=1){var kn=gn[fn],On=G.getTile(kn),Nn=On.getBucket(q);if(Nn){var er=V?Nn.text:Nn.icon;if(er&&er.segments.get().length){var or=er.programConfigurations.get(q.id),Hn=V||Nn.sdfIcons,ar=V?Nn.textSizeData:Nn.iconSizeData,vr=xt||lt.pitch!==0,Ar=B.useProgram(Al(Hn,V,Nn),or),Kn=o.evaluateSizeForZoom(ar,lt.zoom),ir=void 0,br=[0,0],sr=void 0,Tr=void 0,Er=null,Rr=void 0;if(V){if(sr=On.glyphAtlasTexture,Tr=et.LINEAR,ir=On.glyphAtlasTexture.size,Nn.iconsInText){br=On.imageAtlasTexture.size,Er=On.imageAtlasTexture;var Fr=ar.kind==="composite"||ar.kind==="camera";Rr=vr||B.options.rotating||B.options.zooming||Fr?et.LINEAR:et.NEAREST}}else{var jr=q.layout.get("icon-size").constantOr(0)!==1||Nn.iconsNeedLinear;sr=On.imageAtlasTexture,Tr=Hn||B.options.rotating||B.options.zooming||jr||vr?et.LINEAR:et.NEAREST,ir=On.imageAtlasTexture.size}var qr=Gn(On,1,B.transform.zoom),ui=bn(kn.posMatrix,xt,ft,B.transform,qr),Ai=hn(kn.posMatrix,xt,ft,B.transform,qr),ia=qt&&Nn.hasTextData(),Ni=q.layout.get("icon-text-fit")!=="none"&&ia&&Nn.hasIconData();St&&ln(Nn,kn.posMatrix,B,V,ui,Ai,xt,Le);var Ji=B.translatePosMatrix(kn.posMatrix,On,J,ne),gi=St||V&&qt||Ni?ul:ui,Gr=B.translatePosMatrix(Ai,On,J,ne,!0),xi=Hn&&q.paint.get(V?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ri={program:Ar,buffers:er,uniformValues:Hn?Nn.iconsInText?Ur(ar.kind,Kn,wt,xt,B,Ji,gi,Gr,ir,br):Co(ar.kind,Kn,wt,xt,B,Ji,gi,Gr,V,ir,!0):go(ar.kind,Kn,wt,xt,B,Ji,gi,Gr,V,ir),atlasTexture:sr,atlasTextureIcon:Er,atlasInterpolation:Tr,atlasInterpolationIcon:Rr,isSDF:Hn,hasHalo:xi};if(Dt&&Nn.canOverlap){Et=!0;for(var Zr=0,bi=er.segments.get();Zr<bi.length;Zr+=1){var Mi=bi[Zr];Bt.push({segments:new o.SegmentVector([Mi]),sortKey:Mi.sortKey,state:ri})}}else Bt.push({segments:er.segments,sortKey:0,state:ri})}}}Et&&Bt.sort(function(Os,_o){return Os.sortKey-_o.sortKey});for(var Ii=0,ms=Bt;Ii<ms.length;Ii+=1){var ys=ms[Ii],Xr=ys.state;if(qe.activeTexture.set(et.TEXTURE0),Xr.atlasTexture.bind(Xr.atlasInterpolation,et.CLAMP_TO_EDGE),Xr.atlasTextureIcon&&(qe.activeTexture.set(et.TEXTURE1),Xr.atlasTextureIcon&&Xr.atlasTextureIcon.bind(Xr.atlasInterpolationIcon,et.CLAMP_TO_EDGE)),Xr.isSDF){var Gs=Xr.uniformValues;Xr.hasHalo&&(Gs.u_is_halo=1,Ko(Xr.buffers,ys.segments,q,B,Xr.program,Yt,De,Ue,Gs)),Gs.u_is_halo=0}Ko(Xr.buffers,ys.segments,q,B,Xr.program,Yt,De,Ue,Xr.uniformValues)}}function Ko(B,G,q,L,V,J,ne,ue,xe){var Le=L.context,De=Le.gl;V.draw(Le,De.TRIANGLES,J,ne,ue,Ne.disabled,xe,q.id,B.layoutVertexBuffer,B.indexBuffer,G,q.paint,L.transform.zoom,B.programConfigurations.get(q.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function vo(B,G,q,L,V,J,ne){var ue,xe,Le,De,Ue,qe=B.context.gl,et=q.paint.get("fill-pattern"),lt=et&&et.constantOr(1),ft=q.getCrossfadeParameters();ne?(xe=lt&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ue=qe.LINES):(xe=lt?"fillPattern":"fill",ue=qe.TRIANGLES);for(var xt=0,St=L;xt<St.length;xt+=1){var wt=St[xt],Dt=G.getTile(wt);if(!lt||Dt.patternsLoaded()){var Et=Dt.getBucket(q);if(Et){var Yt=Et.programConfigurations.get(q.id),qt=B.useProgram(xe,Yt);lt&&(B.context.activeTexture.set(qe.TEXTURE0),Dt.imageAtlasTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Yt.updatePaintBuffers(ft));var Bt=et.constantOr(null);if(Bt&&Dt.imageAtlas){var fn=Dt.imageAtlas,gn=fn.patternPositions[Bt.to.toString()],kn=fn.patternPositions[Bt.from.toString()];gn&&kn&&Yt.setConstantPatternPositions(gn,kn)}var On=B.translatePosMatrix(wt.posMatrix,Dt,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(ne){De=Et.indexBuffer2,Ue=Et.segments2;var Nn=[qe.drawingBufferWidth,qe.drawingBufferHeight];Le=xe==="fillOutlinePattern"&&lt?Ks(On,B,ft,Dt,Nn):eo(On,Nn)}else De=Et.indexBuffer,Ue=Et.segments,Le=lt?Eo(On,B,ft,Dt):ho(On);qt.draw(B.context,ue,V,B.stencilModeForClipping(wt),J,Ne.disabled,Le,q.id,Et.layoutVertexBuffer,De,Ue,q.paint,B.transform.zoom,Yt)}}}}function Na(B,G,q,L,V,J,ne){for(var ue=B.context,xe=ue.gl,Le=q.paint.get("fill-extrusion-pattern"),De=Le.constantOr(1),Ue=q.getCrossfadeParameters(),qe=q.paint.get("fill-extrusion-opacity"),et=0,lt=L;et<lt.length;et+=1){var ft=lt[et],xt=G.getTile(ft),St=xt.getBucket(q);if(St){var wt=St.programConfigurations.get(q.id),Dt=B.useProgram(De?"fillExtrusionPattern":"fillExtrusion",wt);De&&(B.context.activeTexture.set(xe.TEXTURE0),xt.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),wt.updatePaintBuffers(Ue));var Et=Le.constantOr(null);if(Et&&xt.imageAtlas){var Yt=xt.imageAtlas,qt=Yt.patternPositions[Et.to.toString()],Bt=Yt.patternPositions[Et.from.toString()];qt&&Bt&&wt.setConstantPatternPositions(qt,Bt)}var fn=B.translatePosMatrix(ft.posMatrix,xt,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),gn=q.paint.get("fill-extrusion-vertical-gradient"),kn=De?So(fn,B,gn,qe,ft,Ue,xt):Qa(fn,B,gn,qe);Dt.draw(ue,ue.gl.TRIANGLES,V,J,ne,Ne.backCCW,kn,q.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,q.paint,B.transform.zoom,wt)}}}function ls(B,G,q,L,V,J){var ne=B.context,ue=ne.gl,xe=G.fbo;if(xe){var Le=B.useProgram("hillshade");ne.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,xe.colorAttachment.get());var De=wl(B,G,q);Le.draw(ne,ue.TRIANGLES,L,V,J,Ne.disabled,De,q.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}}function cl(B,G,q,L,V,J){var ne=B.context,ue=ne.gl,xe=G.dem;if(xe&&xe.data){var Le=xe.dim,De=xe.stride,Ue=xe.getPixels();if(ne.activeTexture.set(ue.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||B.getTileTexture(De),G.demTexture){var qe=G.demTexture;qe.update(Ue,{premultiply:!1}),qe.bind(ue.NEAREST,ue.CLAMP_TO_EDGE)}else G.demTexture=new o.Texture(ne,Ue,ue.RGBA,{premultiply:!1}),G.demTexture.bind(ue.NEAREST,ue.CLAMP_TO_EDGE);ne.activeTexture.set(ue.TEXTURE0);var et=G.fbo;if(!et){var lt=new o.Texture(ne,{width:Le,height:Le,data:null},ue.RGBA);lt.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),(et=G.fbo=ne.createFramebuffer(Le,Le,!0)).colorAttachment.set(lt.texture)}ne.bindFramebuffer.set(et.framebuffer),ne.viewport.set([0,0,Le,Le]),B.useProgram("hillshadePrepare").draw(ne,ue.TRIANGLES,L,V,J,Ne.disabled,Yo(G.tileID,xe),q.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function ws(B,G,q,L,V){var J=L.paint.get("raster-fade-duration");if(J>0){var ne=o.browser.now(),ue=(ne-B.timeAdded)/J,xe=G?(ne-G.timeAdded)/J:-1,Le=q.getSource(),De=V.coveringZoomLevel({tileSize:Le.tileSize,roundZoom:Le.roundZoom}),Ue=!G||Math.abs(G.tileID.overscaledZ-De)>Math.abs(B.tileID.overscaledZ-De),qe=Ue&&B.refreshedUponExpiration?1:o.clamp(Ue?ue:1-xe,0,1);return B.refreshedUponExpiration&&ue>=1&&(B.refreshedUponExpiration=!1),G?{opacity:1,mix:1-qe}:{opacity:qe,mix:0}}return{opacity:1,mix:0}}var Us=new o.Color(1,0,0,1),_a=new o.Color(0,1,0,1),Vs=new o.Color(0,0,1,1),fl=new o.Color(1,0,1,1),us=new o.Color(0,1,1,1);function Jo(B){var G=B.transform.padding;cs(B,B.transform.height-(G.top||0),3,Us),cs(B,G.bottom||0,3,_a),$o(B,G.left||0,3,Vs),$o(B,B.transform.width-(G.right||0),3,fl);var q=B.transform.centerPoint;(function(L,V,J,ne){var ue=20,xe=2;Qo(L,V-xe/2,J-ue/2,xe,ue,ne),Qo(L,V-ue/2,J-xe/2,ue,xe,ne)})(B,q.x,B.transform.height-q.y,us)}function cs(B,G,q,L){Qo(B,0,G+q/2,B.transform.width,q,L)}function $o(B,G,q,L){Qo(B,G-q/2,0,q,B.transform.height,L)}function Qo(B,G,q,L,V,J){var ne=B.context,ue=ne.gl;ue.enable(ue.SCISSOR_TEST),ue.scissor(G*o.browser.devicePixelRatio,q*o.browser.devicePixelRatio,L*o.browser.devicePixelRatio,V*o.browser.devicePixelRatio),ne.clear({color:J}),ue.disable(ue.SCISSOR_TEST)}function Ts(B,G,q){var L=B.context,V=L.gl,J=q.posMatrix,ne=B.useProgram("debug"),ue=Pt.disabled,xe=He.disabled,Le=B.colorModeForRenderPass(),De="$debug";L.activeTexture.set(V.TEXTURE0),B.emptyTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),ne.draw(L,V.LINE_STRIP,ue,xe,Le,Ne.disabled,sl(J,o.Color.red),De,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments);var Ue=G.getTileByID(q.key).latestRawTileData,qe=Ue&&Ue.byteLength||0,et=Math.floor(qe/1024),lt=G.getTile(q).tileSize,ft=512/Math.min(lt,512)*(q.overscaledZ/B.transform.zoom)*.5,xt=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(xt+=" => "+q.overscaledZ),function(St,wt){St.initDebugOverlayCanvas();var Dt=St.debugOverlayCanvas,Et=St.context.gl,Yt=St.debugOverlayCanvas.getContext("2d");Yt.clearRect(0,0,Dt.width,Dt.height),Yt.shadowColor="white",Yt.shadowBlur=2,Yt.lineWidth=1.5,Yt.strokeStyle="white",Yt.textBaseline="top",Yt.font="bold 36px Open Sans, sans-serif",Yt.fillText(wt,5,5),Yt.strokeText(wt,5,5),St.debugOverlayTexture.update(Dt),St.debugOverlayTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE)}(B,xt+" "+et+"kb"),ne.draw(L,V.TRIANGLES,ue,xe,Ye.alphaBlended,Ne.disabled,sl(J,o.Color.transparent,ft),De,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments)}var qs={symbol:function(B,G,q,L,V){if(B.renderPass==="translucent"){var J=He.disabled,ne=B.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(ue,xe,Le,De,Ue,qe,et){for(var lt=xe.transform,ft=Ue==="map",xt=qe==="map",St=0,wt=ue;St<wt.length;St+=1){var Dt=wt[St],Et=De.getTile(Dt),Yt=Et.getBucket(Le);if(Yt&&Yt.text&&Yt.text.segments.get().length){var qt=Yt.textSizeData,Bt=o.evaluateSizeForZoom(qt,lt.zoom),fn=Gn(Et,1,xe.transform.zoom),gn=bn(Dt.posMatrix,xt,ft,xe.transform,fn),kn=Le.layout.get("icon-text-fit")!=="none"&&Yt.hasIconData();if(Bt){var On=Math.pow(2,lt.zoom-Et.tileID.overscaledZ);js(Yt,ft,xt,et,o.symbolSize,lt,gn,Dt.posMatrix,On,Bt,kn)}}}}(L,B,q,G,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),V),q.paint.get("icon-opacity").constantOr(1)!==0&&Oo(B,G,q,L,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),J,ne),q.paint.get("text-opacity").constantOr(1)!==0&&Oo(B,G,q,L,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),J,ne),G.map.showCollisionBoxes&&(ss(B,G,q,L,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),ss(B,G,q,L,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function(B,G,q,L){if(B.renderPass==="translucent"){var V=q.paint.get("circle-opacity"),J=q.paint.get("circle-stroke-width"),ne=q.paint.get("circle-stroke-opacity"),ue=q.layout.get("circle-sort-key").constantOr(1)!==void 0;if(V.constantOr(1)!==0||J.constantOr(1)!==0&&ne.constantOr(1)!==0){for(var xe=B.context,Le=xe.gl,De=B.depthModeForSublayer(0,Pt.ReadOnly),Ue=He.disabled,qe=B.colorModeForRenderPass(),et=[],lt=0;lt<L.length;lt++){var ft=L[lt],xt=G.getTile(ft),St=xt.getBucket(q);if(St){var wt=St.programConfigurations.get(q.id),Dt={programConfiguration:wt,program:B.useProgram("circle",wt),layoutVertexBuffer:St.layoutVertexBuffer,indexBuffer:St.indexBuffer,uniformValues:Bs(B,ft,xt,q)};if(ue)for(var Et=0,Yt=St.segments.get();Et<Yt.length;Et+=1){var qt=Yt[Et];et.push({segments:new o.SegmentVector([qt]),sortKey:qt.sortKey,state:Dt})}else et.push({segments:St.segments,sortKey:0,state:Dt})}}ue&&et.sort(function(vr,Ar){return vr.sortKey-Ar.sortKey});for(var Bt=0,fn=et;Bt<fn.length;Bt+=1){var gn=fn[Bt],kn=gn.state,On=kn.programConfiguration,Nn=kn.program,er=kn.layoutVertexBuffer,or=kn.indexBuffer,Hn=kn.uniformValues,ar=gn.segments;Nn.draw(xe,Le.TRIANGLES,De,Ue,qe,Ne.disabled,Hn,q.id,er,or,ar,q.paint,B.transform.zoom,On)}}}},heatmap:function(B,G,q,L){if(q.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){var V=B.context,J=V.gl,ne=He.disabled,ue=new Ye([J.ONE,J.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ft,xt,St){var wt=ft.gl;ft.activeTexture.set(wt.TEXTURE1),ft.viewport.set([0,0,xt.width/4,xt.height/4]);var Dt=St.heatmapFbo;if(Dt)wt.bindTexture(wt.TEXTURE_2D,Dt.colorAttachment.get()),ft.bindFramebuffer.set(Dt.framebuffer);else{var Et=wt.createTexture();wt.bindTexture(wt.TEXTURE_2D,Et),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_WRAP_S,wt.CLAMP_TO_EDGE),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_WRAP_T,wt.CLAMP_TO_EDGE),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_MIN_FILTER,wt.LINEAR),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_MAG_FILTER,wt.LINEAR),Dt=St.heatmapFbo=ft.createFramebuffer(xt.width/4,xt.height/4,!1),function(Yt,qt,Bt,fn){var gn=Yt.gl,kn=Yt.extRenderToTextureHalfFloat?Yt.extTextureHalfFloat.HALF_FLOAT_OES:gn.UNSIGNED_BYTE;gn.texImage2D(gn.TEXTURE_2D,0,gn.RGBA,qt.width/4,qt.height/4,0,gn.RGBA,kn,null),fn.colorAttachment.set(Bt)}(ft,xt,Et,Dt)}})(V,B,q),V.clear({color:o.Color.transparent});for(var xe=0;xe<L.length;xe++){var Le=L[xe];if(!G.hasRenderableParent(Le)){var De=G.getTile(Le),Ue=De.getBucket(q);if(Ue){var qe=Ue.programConfigurations.get(q.id),et=B.useProgram("heatmap",qe),lt=B.transform.zoom;et.draw(V,J.TRIANGLES,Pt.disabled,ne,ue,Ne.disabled,ll(Le.posMatrix,De,lt,q.paint.get("heatmap-intensity")),q.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,q.paint,B.transform.zoom,qe)}}}V.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(ft,xt){var St=ft.context,wt=St.gl,Dt=xt.heatmapFbo;if(Dt){St.activeTexture.set(wt.TEXTURE0),wt.bindTexture(wt.TEXTURE_2D,Dt.colorAttachment.get()),St.activeTexture.set(wt.TEXTURE1);var Et=xt.colorRampTexture;Et||(Et=xt.colorRampTexture=new o.Texture(St,xt.colorRamp,wt.RGBA)),Et.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),ft.useProgram("heatmapTexture").draw(St,wt.TRIANGLES,Pt.disabled,He.disabled,ft.colorModeForRenderPass(),Ne.disabled,_l(ft,xt,0,1),xt.id,ft.viewportBuffer,ft.quadTriangleIndexBuffer,ft.viewportSegments,xt.paint,ft.transform.zoom)}}(B,q))},line:function(B,G,q,L){if(B.renderPass==="translucent"){var V=q.paint.get("line-opacity"),J=q.paint.get("line-width");if(V.constantOr(1)!==0&&J.constantOr(1)!==0)for(var ne=B.depthModeForSublayer(0,Pt.ReadOnly),ue=B.colorModeForRenderPass(),xe=q.paint.get("line-dasharray"),Le=q.paint.get("line-pattern"),De=Le.constantOr(1),Ue=q.paint.get("line-gradient"),qe=q.getCrossfadeParameters(),et=De?"linePattern":xe?"lineSDF":Ue?"lineGradient":"line",lt=B.context,ft=lt.gl,xt=!0,St=0,wt=L;St<wt.length;St+=1){var Dt=wt[St],Et=G.getTile(Dt);if(!De||Et.patternsLoaded()){var Yt=Et.getBucket(q);if(Yt){var qt=Yt.programConfigurations.get(q.id),Bt=B.context.program.get(),fn=B.useProgram(et,qt),gn=xt||fn.program!==Bt,kn=Le.constantOr(null);if(kn&&Et.imageAtlas){var On=Et.imageAtlas,Nn=On.patternPositions[kn.to.toString()],er=On.patternPositions[kn.from.toString()];Nn&&er&&qt.setConstantPatternPositions(Nn,er)}var or=De?Zo(B,Et,q,qe):xe?_s(B,Et,q,xe,qe):Ue?as(B,Et,q,Yt.lineClipsArray.length):to(B,Et,q);if(De)lt.activeTexture.set(ft.TEXTURE0),Et.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),qt.updatePaintBuffers(qe);else if(xe&&(gn||B.lineAtlas.dirty))lt.activeTexture.set(ft.TEXTURE0),B.lineAtlas.bind(lt);else if(Ue){var Hn=Yt.gradients[q.id],ar=Hn.texture;if(q.gradientVersion!==Hn.version){var vr=256;if(q.stepInterpolant){var Ar=G.getSource().maxzoom,Kn=Dt.canonical.z===Ar?Math.ceil(1<<B.transform.maxZoom-Dt.canonical.z):1,ir=Yt.maxLineLength/o.EXTENT*1024*Kn;vr=o.clamp(o.nextPowerOfTwo(ir),256,lt.maxTextureSize)}Hn.gradient=o.renderColorRamp({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:vr,image:Hn.gradient||void 0,clips:Yt.lineClipsArray}),Hn.texture?Hn.texture.update(Hn.gradient):Hn.texture=new o.Texture(lt,Hn.gradient,ft.RGBA),Hn.version=q.gradientVersion,ar=Hn.texture}lt.activeTexture.set(ft.TEXTURE0),ar.bind(q.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}fn.draw(lt,ft.TRIANGLES,ne,B.stencilModeForClipping(Dt),ue,Ne.disabled,or,q.id,Yt.layoutVertexBuffer,Yt.indexBuffer,Yt.segments,q.paint,B.transform.zoom,qt,Yt.layoutVertexBuffer2),xt=!1}}}}},fill:function(B,G,q,L){var V=q.paint.get("fill-color"),J=q.paint.get("fill-opacity");if(J.constantOr(1)!==0){var ne=B.colorModeForRenderPass(),ue=q.paint.get("fill-pattern"),xe=B.opaquePassEnabledForLayer()&&!ue.constantOr(1)&&V.constantOr(o.Color.transparent).a===1&&J.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===xe){var Le=B.depthModeForSublayer(1,B.renderPass==="opaque"?Pt.ReadWrite:Pt.ReadOnly);vo(B,G,q,L,Le,ne,!1)}if(B.renderPass==="translucent"&&q.paint.get("fill-antialias")){var De=B.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Pt.ReadOnly);vo(B,G,q,L,De,ne,!0)}}},"fill-extrusion":function(B,G,q,L){var V=q.paint.get("fill-extrusion-opacity");if(V!==0&&B.renderPass==="translucent"){var J=new Pt(B.context.gl.LEQUAL,Pt.ReadWrite,B.depthRangeFor3D);if(V!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))Na(B,G,q,L,J,He.disabled,Ye.disabled),Na(B,G,q,L,J,B.stencilModeFor3D(),B.colorModeForRenderPass());else{var ne=B.colorModeForRenderPass();Na(B,G,q,L,J,He.disabled,ne)}}},hillshade:function(B,G,q,L){if(B.renderPass==="offscreen"||B.renderPass==="translucent"){for(var V=B.context,J=B.depthModeForSublayer(0,Pt.ReadOnly),ne=B.colorModeForRenderPass(),ue=B.renderPass==="translucent"?B.stencilConfigForOverlap(L):[{},L],xe=ue[0],Le=0,De=ue[1];Le<De.length;Le+=1){var Ue=De[Le],qe=G.getTile(Ue);qe.needsHillshadePrepare&&B.renderPass==="offscreen"?cl(B,qe,q,J,He.disabled,ne):B.renderPass==="translucent"&&ls(B,qe,q,J,xe[Ue.overscaledZ],ne)}V.viewport.set([0,0,B.width,B.height])}},raster:function(B,G,q,L){if(B.renderPass==="translucent"&&q.paint.get("raster-opacity")!==0&&L.length)for(var V=B.context,J=V.gl,ne=G.getSource(),ue=B.useProgram("raster"),xe=B.colorModeForRenderPass(),Le=ne instanceof F?[{},L]:B.stencilConfigForOverlap(L),De=Le[0],Ue=Le[1],qe=Ue[Ue.length-1].overscaledZ,et=!B.options.moving,lt=0,ft=Ue;lt<ft.length;lt+=1){var xt=ft[lt],St=B.depthModeForSublayer(xt.overscaledZ-qe,q.paint.get("raster-opacity")===1?Pt.ReadWrite:Pt.ReadOnly,J.LESS),wt=G.getTile(xt),Dt=B.transform.calculatePosMatrix(xt.toUnwrapped(),et);wt.registerFadeDuration(q.paint.get("raster-fade-duration"));var Et=G.findLoadedParent(xt,0),Yt=ws(wt,Et,G,q,B.transform),qt=void 0,Bt=void 0,fn=q.paint.get("raster-resampling")==="nearest"?J.NEAREST:J.LINEAR;V.activeTexture.set(J.TEXTURE0),wt.texture.bind(fn,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(J.TEXTURE1),Et?(Et.texture.bind(fn,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),qt=Math.pow(2,Et.tileID.overscaledZ-wt.tileID.overscaledZ),Bt=[wt.tileID.canonical.x*qt%1,wt.tileID.canonical.y*qt%1]):wt.texture.bind(fn,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST);var gn=Js(Dt,Bt||[0,0],qt||1,Yt,q);ne instanceof F?ue.draw(V,J.TRIANGLES,St,He.disabled,xe,Ne.disabled,gn,q.id,ne.boundsBuffer,B.quadTriangleIndexBuffer,ne.boundsSegments):ue.draw(V,J.TRIANGLES,St,De[xt.overscaledZ],xe,Ne.disabled,gn,q.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,G,q){var L=q.paint.get("background-color"),V=q.paint.get("background-opacity");if(V!==0){var J=B.context,ne=J.gl,ue=B.transform,xe=ue.tileSize,Le=q.paint.get("background-pattern");if(!B.isPatternMissing(Le)){var De=!Le&&L.a===1&&V===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass===De){var Ue=He.disabled,qe=B.depthModeForSublayer(0,De==="opaque"?Pt.ReadWrite:Pt.ReadOnly),et=B.colorModeForRenderPass(),lt=B.useProgram(Le?"backgroundPattern":"background"),ft=ue.coveringTiles({tileSize:xe});Le&&(J.activeTexture.set(ne.TEXTURE0),B.imageManager.bind(B.context));for(var xt=q.getCrossfadeParameters(),St=0,wt=ft;St<wt.length;St+=1){var Dt=wt[St],Et=B.transform.calculatePosMatrix(Dt.toUnwrapped()),Yt=Le?Tl(Et,V,B,Le,{tileID:Dt,tileSize:xe},xt):os(Et,V,L);lt.draw(J,ne.TRIANGLES,qe,Ue,et,Ne.disabled,Yt,q.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}}}}},debug:function(B,G,q){for(var L=0;L<q.length;L++)Ts(B,G,q[L])},custom:function(B,G,q){var L=B.context,V=q.implementation;if(B.renderPass==="offscreen"){var J=V.prerender;J&&(B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),J.call(V,L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),L.setStencilMode(He.disabled);var ne=V.renderingMode==="3d"?new Pt(B.context.gl.LEQUAL,Pt.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Pt.ReadOnly);L.setDepthMode(ne),V.render(L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState(),L.bindFramebuffer.set(null)}}},$r=function(B,G){this.context=new We(B),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Dn,this.gpuTimers={}};$r.prototype.resize=function(B,G){if(this.width=B*o.browser.devicePixelRatio,this.height=G*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,L=this.style._order;q<L.length;q+=1){var V=L[q];this.style._layers[V].resize()}},$r.prototype.setup=function(){var B=this.context,G=new o.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(o.EXTENT,0),G.emplaceBack(0,o.EXTENT),G.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=B.createVertexBuffer(G,Zn.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var q=new o.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(o.EXTENT,0),q.emplaceBack(0,o.EXTENT),q.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=B.createVertexBuffer(q,Zn.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var L=new o.StructArrayLayout4i8;L.emplaceBack(0,0,0,0),L.emplaceBack(o.EXTENT,0,o.EXTENT,0),L.emplaceBack(0,o.EXTENT,0,o.EXTENT),L.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=B.createVertexBuffer(L,W.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var V=new o.StructArrayLayout2i4;V.emplaceBack(0,0),V.emplaceBack(1,0),V.emplaceBack(0,1),V.emplaceBack(1,1),this.viewportBuffer=B.createVertexBuffer(V,Zn.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var J=new o.StructArrayLayout1ui2;J.emplaceBack(0),J.emplaceBack(1),J.emplaceBack(3),J.emplaceBack(2),J.emplaceBack(0),this.tileBorderIndexBuffer=B.createIndexBuffer(J);var ne=new o.StructArrayLayout3ui6;ne.emplaceBack(0,1,2),ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=B.createIndexBuffer(ne),this.emptyTexture=new o.Texture(B,{width:1,height:1,data:new Uint8Array([0,0,0,0])},B.gl.RGBA);var ue=this.context.gl;this.stencilClearMode=new He({func:ue.ALWAYS,mask:0},0,255,ue.ZERO,ue.ZERO,ue.ZERO)},$r.prototype.clearStencil=function(){var B=this.context,G=B.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=o.create();o.ortho(q,0,this.width,this.height,0,0,1),o.scale(q,q,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(B,G.TRIANGLES,Pt.disabled,this.stencilClearMode,Ye.disabled,Ne.disabled,Wo(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},$r.prototype._renderTileClippingMasks=function(B,G){if(this.currentStencilSource!==B.source&&B.isTileClipped()&&G&&G.length){this.currentStencilSource=B.source;var q=this.context,L=q.gl;this.nextStencilID+G.length>256&&this.clearStencil(),q.setColorMode(Ye.disabled),q.setDepthMode(Pt.disabled);var V=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var J=0,ne=G;J<ne.length;J+=1){var ue=ne[J],xe=this._tileClippingMaskIDs[ue.key]=this.nextStencilID++;V.draw(q,L.TRIANGLES,Pt.disabled,new He({func:L.ALWAYS,mask:0},xe,255,L.KEEP,L.KEEP,L.REPLACE),Ye.disabled,Ne.disabled,Wo(ue.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},$r.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var B=this.nextStencilID++,G=this.context.gl;return new He({func:G.NOTEQUAL,mask:255},B,255,G.KEEP,G.KEEP,G.REPLACE)},$r.prototype.stencilModeForClipping=function(B){var G=this.context.gl;return new He({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[B.key],0,G.KEEP,G.KEEP,G.REPLACE)},$r.prototype.stencilConfigForOverlap=function(B){var G,q=this.context.gl,L=B.sort(function(xe,Le){return Le.overscaledZ-xe.overscaledZ}),V=L[L.length-1].overscaledZ,J=L[0].overscaledZ-V+1;if(J>1){this.currentStencilSource=void 0,this.nextStencilID+J>256&&this.clearStencil();for(var ne={},ue=0;ue<J;ue++)ne[ue+V]=new He({func:q.GEQUAL,mask:255},ue+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=J,[ne,L]}return[(G={},G[V]=He.disabled,G),L]},$r.prototype.colorModeForRenderPass=function(){var B=this.context.gl;if(this._showOverdrawInspector){var G=.125;return new Ye([B.CONSTANT_COLOR,B.ONE],new o.Color(G,G,G,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ye.unblended:Ye.alphaBlended},$r.prototype.depthModeForSublayer=function(B,G,q){if(!this.opaquePassEnabledForLayer())return Pt.disabled;var L=1-((1+this.currentLayer)*this.numSublayers+B)*this.depthEpsilon;return new Pt(q||this.context.gl.LEQUAL,G,[L,L])},$r.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},$r.prototype.render=function(B,G){var q=this;this.style=B,this.options=G,this.lineAtlas=B.lineAtlas,this.imageManager=B.imageManager,this.glyphManager=B.glyphManager,this.symbolFadeChange=B.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var L=this.style._order,V=this.style.sourceCaches;for(var J in V){var ne=V[J];ne.used&&ne.prepare(this.context)}var ue,xe,Le={},De={},Ue={};for(var qe in V){var et=V[qe];Le[qe]=et.getVisibleCoordinates(),De[qe]=Le[qe].slice().reverse(),Ue[qe]=et.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var lt=0;lt<L.length;lt++){var ft=L[lt];if(this.style._layers[ft].is3D()){this.opaquePassCutoff=lt;break}}this.renderPass="offscreen";for(var xt=0,St=L;xt<St.length;xt+=1){var wt=St[xt],Dt=this.style._layers[wt];if(Dt.hasOffscreenPass()&&!Dt.isHidden(this.transform.zoom)){var Et=De[Dt.source];(Dt.type==="custom"||Et.length)&&this.renderLayer(this,V[Dt.source],Dt,Et)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(B._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){var Yt=this.style._layers[L[this.currentLayer]],qt=V[Yt.source],Bt=Le[Yt.source];this._renderTileClippingMasks(Yt,Bt),this.renderLayer(this,qt,Yt,Bt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){var fn=this.style._layers[L[this.currentLayer]],gn=V[fn.source],kn=(fn.type==="symbol"?Ue:De)[fn.source];this._renderTileClippingMasks(fn,Le[fn.source]),this.renderLayer(this,gn,fn,kn)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(On){On.source&&!On.isHidden(q.transform.zoom)&&(On.source!==(xe&&xe.id)&&(xe=q.style.sourceCaches[On.source]),(!ue||ue.getSource().maxzoom<xe.getSource().maxzoom)&&(ue=xe))}),ue&&qs.debug(this,ue,ue.getVisibleCoordinates())),this.options.showPadding&&Jo(this),this.context.setDefault()},$r.prototype.renderLayer=function(B,G,q,L){q.isHidden(this.transform.zoom)||(q.type==="background"||q.type==="custom"||L.length)&&(this.id=q.id,this.gpuTimingStart(q),qs[q.type](B,G,q,L,this.style.placement.variableOffsets),this.gpuTimingEnd())},$r.prototype.gpuTimingStart=function(B){if(this.options.gpuTiming){var G=this.context.extTimerQuery,q=this.gpuTimers[B.id];q||(q=this.gpuTimers[B.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),q.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,q.query)}},$r.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var B=this.context.extTimerQuery;B.endQueryEXT(B.TIME_ELAPSED_EXT)}},$r.prototype.collectGpuTimers=function(){var B=this.gpuTimers;return this.gpuTimers={},B},$r.prototype.queryGpuTimers=function(B){var G={};for(var q in B){var L=B[q],V=this.context.extTimerQuery,J=V.getQueryObjectEXT(L.query,V.QUERY_RESULT_EXT)/1e6;V.deleteQueryEXT(L.query),G[q]=J}return G},$r.prototype.translatePosMatrix=function(B,G,q,L,V){if(!q[0]&&!q[1])return B;var J=V?L==="map"?this.transform.angle:0:L==="viewport"?-this.transform.angle:0;if(J){var ne=Math.sin(J),ue=Math.cos(J);q=[q[0]*ue-q[1]*ne,q[0]*ne+q[1]*ue]}var xe=[V?q[0]:Gn(G,q[0],this.transform.zoom),V?q[1]:Gn(G,q[1],this.transform.zoom),0],Le=new Float32Array(16);return o.translate(Le,B,xe),Le},$r.prototype.saveTileTexture=function(B){var G=this._tileTextures[B.size[0]];G?G.push(B):this._tileTextures[B.size[0]]=[B]},$r.prototype.getTileTexture=function(B){var G=this._tileTextures[B];return G&&G.length>0?G.pop():null},$r.prototype.isPatternMissing=function(B){if(!B)return!1;if(!B.from||!B.to)return!0;var G=this.imageManager.getPattern(B.from.toString()),q=this.imageManager.getPattern(B.to.toString());return!G||!q},$r.prototype.useProgram=function(B,G){this.cache=this.cache||{};var q=""+B+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new Fa(this.context,B,Ri[B],G,Ns[B],this._showOverdrawInspector)),this.cache[q]},$r.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},$r.prototype.setBaseState=function(){var B=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(B.FUNC_ADD)},$r.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var B=this.context.gl;this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,B.RGBA)}},$r.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Po=function(B,G){this.points=B,this.planes=G};Po.fromInvProjectionMatrix=function(B,G,q){var L=Math.pow(2,q),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ne){return o.transformMat4([],ne,B)}).map(function(ne){return o.scale$1([],ne,1/ne[3]/G*L)}),J=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ne){var ue=o.sub([],V[ne[0]],V[ne[1]]),xe=o.sub([],V[ne[2]],V[ne[1]]),Le=o.normalize([],o.cross([],ue,xe)),De=-o.dot(Le,V[ne[1]]);return Le.concat(De)});return new Po(V,J)};var Ki=function(B,G){this.min=B,this.max=G,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};Ki.prototype.quadrant=function(B){for(var G=[B%2==0,B<2],q=o.clone$2(this.min),L=o.clone$2(this.max),V=0;V<G.length;V++)q[V]=G[V]?this.min[V]:this.center[V],L[V]=G[V]?this.center[V]:this.max[V];return L[2]=this.max[2],new Ki(q,L)},Ki.prototype.distanceX=function(B){return Math.max(Math.min(this.max[0],B[0]),this.min[0])-B[0]},Ki.prototype.distanceY=function(B){return Math.max(Math.min(this.max[1],B[1]),this.min[1])-B[1]},Ki.prototype.intersects=function(B){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,L=0;L<B.planes.length;L++){for(var V=B.planes[L],J=0,ne=0;ne<G.length;ne++)J+=o.dot$1(V,G[ne])>=0;if(J===0)return 0;J!==G.length&&(q=!1)}if(q)return 2;for(var ue=0;ue<3;ue++){for(var xe=Number.MAX_VALUE,Le=-Number.MAX_VALUE,De=0;De<B.points.length;De++){var Ue=B.points[De][ue]-this.min[ue];xe=Math.min(xe,Ue),Le=Math.max(Le,Ue)}if(Le<0||xe>this.max[ue]-this.min[ue])return 0}return 1};var ja=function(B,G,q,L){if(B===void 0&&(B=0),G===void 0&&(G=0),q===void 0&&(q=0),L===void 0&&(L=0),isNaN(B)||B<0||isNaN(G)||G<0||isNaN(q)||q<0||isNaN(L)||L<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=B,this.bottom=G,this.left=q,this.right=L};ja.prototype.interpolate=function(B,G,q){return G.top!=null&&B.top!=null&&(this.top=o.number(B.top,G.top,q)),G.bottom!=null&&B.bottom!=null&&(this.bottom=o.number(B.bottom,G.bottom,q)),G.left!=null&&B.left!=null&&(this.left=o.number(B.left,G.left,q)),G.right!=null&&B.right!=null&&(this.right=o.number(B.right,G.right,q)),this},ja.prototype.getCenter=function(B,G){var q=o.clamp((this.left+B-this.right)/2,0,B),L=o.clamp((this.top+G-this.bottom)/2,0,G);return new o.Point(q,L)},ja.prototype.equals=function(B){return this.top===B.top&&this.bottom===B.bottom&&this.left===B.left&&this.right===B.right},ja.prototype.clone=function(){return new ja(this.top,this.bottom,this.left,this.right)},ja.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Wr=function(B,G,q,L,V){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=V===void 0||V,this._minZoom=B||0,this._maxZoom=G||22,this._minPitch=q??0,this._maxPitch=L??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ja,this._posMatrixCache={},this._alignedPosMatrixCache={}},Jr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Wr.prototype.clone=function(){var B=new Wr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return B.tileSize=this.tileSize,B.latRange=this.latRange,B.width=this.width,B.height=this.height,B._center=this._center,B.zoom=this.zoom,B.angle=this.angle,B._fov=this._fov,B._pitch=this._pitch,B._unmodified=this._unmodified,B._edgeInsets=this._edgeInsets.clone(),B._calcMatrices(),B},Jr.minZoom.get=function(){return this._minZoom},Jr.minZoom.set=function(B){this._minZoom!==B&&(this._minZoom=B,this.zoom=Math.max(this.zoom,B))},Jr.maxZoom.get=function(){return this._maxZoom},Jr.maxZoom.set=function(B){this._maxZoom!==B&&(this._maxZoom=B,this.zoom=Math.min(this.zoom,B))},Jr.minPitch.get=function(){return this._minPitch},Jr.minPitch.set=function(B){this._minPitch!==B&&(this._minPitch=B,this.pitch=Math.max(this.pitch,B))},Jr.maxPitch.get=function(){return this._maxPitch},Jr.maxPitch.set=function(B){this._maxPitch!==B&&(this._maxPitch=B,this.pitch=Math.min(this.pitch,B))},Jr.renderWorldCopies.get=function(){return this._renderWorldCopies},Jr.renderWorldCopies.set=function(B){B===void 0?B=!0:B===null&&(B=!1),this._renderWorldCopies=B},Jr.worldSize.get=function(){return this.tileSize*this.scale},Jr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Jr.size.get=function(){return new o.Point(this.width,this.height)},Jr.bearing.get=function(){return-this.angle/Math.PI*180},Jr.bearing.set=function(B){var G=-o.wrap(B,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Jr.pitch.get=function(){return this._pitch/Math.PI*180},Jr.pitch.set=function(B){var G=o.clamp(B,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},Jr.fov.get=function(){return this._fov/Math.PI*180},Jr.fov.set=function(B){B=Math.max(.01,Math.min(60,B)),this._fov!==B&&(this._unmodified=!1,this._fov=B/180*Math.PI,this._calcMatrices())},Jr.zoom.get=function(){return this._zoom},Jr.zoom.set=function(B){var G=Math.min(Math.max(B,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},Jr.center.get=function(){return this._center},Jr.center.set=function(B){B.lat===this._center.lat&&B.lng===this._center.lng||(this._unmodified=!1,this._center=B,this._constrain(),this._calcMatrices())},Jr.padding.get=function(){return this._edgeInsets.toJSON()},Jr.padding.set=function(B){this._edgeInsets.equals(B)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,B,1),this._calcMatrices())},Jr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Wr.prototype.isPaddingEqual=function(B){return this._edgeInsets.equals(B)},Wr.prototype.interpolatePadding=function(B,G,q){this._unmodified=!1,this._edgeInsets.interpolate(B,G,q),this._constrain(),this._calcMatrices()},Wr.prototype.coveringZoomLevel=function(B){var G=(B.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/B.tileSize));return Math.max(0,G)},Wr.prototype.getVisibleUnwrappedCoordinates=function(B){var G=[new o.UnwrappedTileID(0,B)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new o.Point(0,0)),L=this.pointCoordinate(new o.Point(this.width,0)),V=this.pointCoordinate(new o.Point(this.width,this.height)),J=this.pointCoordinate(new o.Point(0,this.height)),ne=Math.floor(Math.min(q.x,L.x,V.x,J.x)),ue=Math.floor(Math.max(q.x,L.x,V.x,J.x)),xe=ne-1;xe<=ue+1;xe++)xe!==0&&G.push(new o.UnwrappedTileID(xe,B));return G},Wr.prototype.coveringTiles=function(B){var G=this.coveringZoomLevel(B),q=G;if(B.minzoom!==void 0&&G<B.minzoom)return[];B.maxzoom!==void 0&&G>B.maxzoom&&(G=B.maxzoom);var L=o.MercatorCoordinate.fromLngLat(this.center),V=Math.pow(2,G),J=[V*L.x,V*L.y,0],ne=Po.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),ue=B.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ue=G);var xe=function(kn){return{aabb:new Ki([kn*V,0,0],[(kn+1)*V,V,0]),zoom:0,x:0,y:0,wrap:kn,fullyVisible:!1}},Le=[],De=[],Ue=G,qe=B.reparseOverscaled?q:G;if(this._renderWorldCopies)for(var et=1;et<=3;et++)Le.push(xe(-et)),Le.push(xe(et));for(Le.push(xe(0));Le.length>0;){var lt=Le.pop(),ft=lt.x,xt=lt.y,St=lt.fullyVisible;if(!St){var wt=lt.aabb.intersects(ne);if(wt===0)continue;St=wt===2}var Dt=lt.aabb.distanceX(J),Et=lt.aabb.distanceY(J),Yt=Math.max(Math.abs(Dt),Math.abs(Et)),qt=3+(1<<Ue-lt.zoom)-2;if(lt.zoom===Ue||Yt>qt&&lt.zoom>=ue)De.push({tileID:new o.OverscaledTileID(lt.zoom===Ue?qe:lt.zoom,lt.wrap,lt.zoom,ft,xt),distanceSq:o.sqrLen([J[0]-.5-ft,J[1]-.5-xt])});else for(var Bt=0;Bt<4;Bt++){var fn=(ft<<1)+Bt%2,gn=(xt<<1)+(Bt>>1);Le.push({aabb:lt.aabb.quadrant(Bt),zoom:lt.zoom+1,x:fn,y:gn,wrap:lt.wrap,fullyVisible:St})}}return De.sort(function(kn,On){return kn.distanceSq-On.distanceSq}).map(function(kn){return kn.tileID})},Wr.prototype.resize=function(B,G){this.width=B,this.height=G,this.pixelsToGLUnits=[2/B,-2/G],this._constrain(),this._calcMatrices()},Jr.unmodified.get=function(){return this._unmodified},Wr.prototype.zoomScale=function(B){return Math.pow(2,B)},Wr.prototype.scaleZoom=function(B){return Math.log(B)/Math.LN2},Wr.prototype.project=function(B){var G=o.clamp(B.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(B.lng)*this.worldSize,o.mercatorYfromLat(G)*this.worldSize)},Wr.prototype.unproject=function(B){return new o.MercatorCoordinate(B.x/this.worldSize,B.y/this.worldSize).toLngLat()},Jr.point.get=function(){return this.project(this.center)},Wr.prototype.setLocationAtPoint=function(B,G){var q=this.pointCoordinate(G),L=this.pointCoordinate(this.centerPoint),V=this.locationCoordinate(B),J=new o.MercatorCoordinate(V.x-(q.x-L.x),V.y-(q.y-L.y));this.center=this.coordinateLocation(J),this._renderWorldCopies&&(this.center=this.center.wrap())},Wr.prototype.locationPoint=function(B){return this.coordinatePoint(this.locationCoordinate(B))},Wr.prototype.pointLocation=function(B){return this.coordinateLocation(this.pointCoordinate(B))},Wr.prototype.locationCoordinate=function(B){return o.MercatorCoordinate.fromLngLat(B)},Wr.prototype.coordinateLocation=function(B){return B.toLngLat()},Wr.prototype.pointCoordinate=function(B){var G=[B.x,B.y,0,1],q=[B.x,B.y,1,1];o.transformMat4(G,G,this.pixelMatrixInverse),o.transformMat4(q,q,this.pixelMatrixInverse);var L=G[3],V=q[3],J=G[0]/L,ne=q[0]/V,ue=G[1]/L,xe=q[1]/V,Le=G[2]/L,De=q[2]/V,Ue=Le===De?0:(0-Le)/(De-Le);return new o.MercatorCoordinate(o.number(J,ne,Ue)/this.worldSize,o.number(ue,xe,Ue)/this.worldSize)},Wr.prototype.coordinatePoint=function(B){var G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return o.transformMat4(G,G,this.pixelMatrix),new o.Point(G[0]/G[3],G[1]/G[3])},Wr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Wr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Wr.prototype.setMaxBounds=function(B){B?(this.lngRange=[B.getWest(),B.getEast()],this.latRange=[B.getSouth(),B.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Wr.prototype.calculatePosMatrix=function(B,G){G===void 0&&(G=!1);var q=B.key,L=G?this._alignedPosMatrixCache:this._posMatrixCache;if(L[q])return L[q];var V=B.canonical,J=this.worldSize/this.zoomScale(V.z),ne=V.x+Math.pow(2,V.z)*B.wrap,ue=o.identity(new Float64Array(16));return o.translate(ue,ue,[ne*J,V.y*J,0]),o.scale(ue,ue,[J/o.EXTENT,J/o.EXTENT,1]),o.multiply(ue,G?this.alignedProjMatrix:this.projMatrix,ue),L[q]=new Float32Array(ue),L[q]},Wr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Wr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var B,G,q,L,V=-90,J=90,ne=-180,ue=180,xe=this.size,Le=this._unmodified;if(this.latRange){var De=this.latRange;V=o.mercatorYfromLat(De[1])*this.worldSize,B=(J=o.mercatorYfromLat(De[0])*this.worldSize)-V<xe.y?xe.y/(J-V):0}if(this.lngRange){var Ue=this.lngRange;ne=o.mercatorXfromLng(Ue[0])*this.worldSize,G=(ue=o.mercatorXfromLng(Ue[1])*this.worldSize)-ne<xe.x?xe.x/(ue-ne):0}var qe=this.point,et=Math.max(G||0,B||0);if(et)return this.center=this.unproject(new o.Point(G?(ue+ne)/2:qe.x,B?(J+V)/2:qe.y)),this.zoom+=this.scaleZoom(et),this._unmodified=Le,void(this._constraining=!1);if(this.latRange){var lt=qe.y,ft=xe.y/2;lt-ft<V&&(L=V+ft),lt+ft>J&&(L=J-ft)}if(this.lngRange){var xt=qe.x,St=xe.x/2;xt-St<ne&&(q=ne+St),xt+St>ue&&(q=ue-St)}q===void 0&&L===void 0||(this.center=this.unproject(new o.Point(q!==void 0?q:qe.x,L!==void 0?L:qe.y))),this._unmodified=Le,this._constraining=!1}},Wr.prototype._calcMatrices=function(){if(this.height){var B=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(B)*this.height;var q=Math.PI/2+this._pitch,L=this._fov*(.5+G.y/this.height),V=Math.sin(L)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-q-L,.01,Math.PI-.01)),J=this.point,ne=J.x,ue=J.y,xe=1.01*(Math.cos(Math.PI/2-this._pitch)*V+this.cameraToCenterDistance),Le=this.height/50,De=new Float64Array(16);o.perspective(De,this._fov,this.width/this.height,Le,xe),De[8]=2*-G.x/this.width,De[9]=2*G.y/this.height,o.scale(De,De,[1,-1,1]),o.translate(De,De,[0,0,-this.cameraToCenterDistance]),o.rotateX(De,De,this._pitch),o.rotateZ(De,De,this.angle),o.translate(De,De,[-ne,-ue,0]),this.mercatorMatrix=o.scale([],De,[this.worldSize,this.worldSize,this.worldSize]),o.scale(De,De,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=De,this.invProjMatrix=o.invert([],this.projMatrix);var Ue=this.width%2/2,qe=this.height%2/2,et=Math.cos(this.angle),lt=Math.sin(this.angle),ft=ne-Math.round(ne)+et*Ue+lt*qe,xt=ue-Math.round(ue)+et*qe+lt*Ue,St=new Float64Array(De);if(o.translate(St,St,[ft>.5?ft-1:ft,xt>.5?xt-1:xt,0]),this.alignedProjMatrix=St,De=o.create(),o.scale(De,De,[this.width/2,-this.height/2,1]),o.translate(De,De,[1,-1,0]),this.labelPlaneMatrix=De,De=o.create(),o.scale(De,De,[1,-1,1]),o.translate(De,De,[-1,-1,0]),o.scale(De,De,[2/this.width,2/this.height,1]),this.glCoordMatrix=De,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(De=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=De,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Wr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var B=this.pointCoordinate(new o.Point(0,0)),G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return o.transformMat4(G,G,this.pixelMatrix)[3]/this.cameraToCenterDistance},Wr.prototype.getCameraPoint=function(){var B=this._pitch,G=Math.tan(B)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,G))},Wr.prototype.getCameraQueryGeometry=function(B){var G=this.getCameraPoint();if(B.length===1)return[B[0],G];for(var q=G.x,L=G.y,V=G.x,J=G.y,ne=0,ue=B;ne<ue.length;ne+=1){var xe=ue[ne];q=Math.min(q,xe.x),L=Math.min(L,xe.y),V=Math.max(V,xe.x),J=Math.max(J,xe.y)}return[new o.Point(q,L),new o.Point(V,L),new o.Point(V,J),new o.Point(q,J),new o.Point(q,L)]},Object.defineProperties(Wr.prototype,Jr);var wa=function(B){var G,q,L,V,J;this._hashName=B&&encodeURIComponent(B),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(G=this._updateHashUnthrottled.bind(this),q=300,L=!1,V=null,J=function(){V=null,L&&(G(),V=setTimeout(J,q),L=!1)},function(){return L=!0,V||J(),V})};wa.prototype.addTo=function(B){return this._map=B,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},wa.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},wa.prototype.getHashString=function(B){var G=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,L=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),V=Math.pow(10,L),J=Math.round(G.lng*V)/V,ne=Math.round(G.lat*V)/V,ue=this._map.getBearing(),xe=this._map.getPitch(),Le="";if(Le+=B?"/"+J+"/"+ne+"/"+q:q+"/"+ne+"/"+J,(ue||xe)&&(Le+="/"+Math.round(10*ue)/10),xe&&(Le+="/"+Math.round(xe)),this._hashName){var De=this._hashName,Ue=!1,qe=o.window.location.hash.slice(1).split("&").map(function(et){var lt=et.split("=")[0];return lt===De?(Ue=!0,lt+"="+Le):et}).filter(function(et){return et});return Ue||qe.push(De+"="+Le),"#"+qe.join("&")}return"#"+Le},wa.prototype._getCurrentHash=function(){var B,G=this,q=o.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(L){return L.split("=")}).forEach(function(L){L[0]===G._hashName&&(B=L)}),(B&&B[1]||"").split("/")):q.split("/")},wa.prototype._onHashChange=function(){var B=this._getCurrentHash();if(B.length>=3&&!B.some(function(q){return isNaN(q)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(B[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+B[2],+B[1]],zoom:+B[0],bearing:G,pitch:+(B[4]||0)}),!0}return!1},wa.prototype._updateHashUnthrottled=function(){var B=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,B)}catch{}};var fs={linearity:.3,easing:o.bezier(0,0,.3,1)},ks=o.extend({deceleration:2500,maxSpeed:1400},fs),Hs=o.extend({deceleration:20,maxSpeed:1400},fs),As=o.extend({deceleration:1e3,maxSpeed:360},fs),Ms=o.extend({deceleration:1e3,maxSpeed:90},fs),La=function(B){this._map=B,this.clear()};function Io(B,G){(!B.duration||B.duration<G.duration)&&(B.duration=G.duration,B.easing=G.easing)}function zo(B,G,q){var L=q.maxSpeed,V=q.linearity,J=q.deceleration,ne=o.clamp(B*V/(G/1e3),-L,L),ue=Math.abs(ne)/(J*V);return{easing:q.easing,duration:1e3*ue,amount:ne*(ue/2)}}La.prototype.clear=function(){this._inertiaBuffer=[]},La.prototype.record=function(B){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:B})},La.prototype._drainInertiaBuffer=function(){for(var B=this._inertiaBuffer,G=o.browser.now();B.length>0&&G-B[0].time>160;)B.shift()},La.prototype._onMoveEnd=function(B){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},q=0,L=this._inertiaBuffer;q<L.length;q+=1){var V=L[q].settings;G.zoom+=V.zoomDelta||0,G.bearing+=V.bearingDelta||0,G.pitch+=V.pitchDelta||0,V.panDelta&&G.pan._add(V.panDelta),V.around&&(G.around=V.around),V.pinchAround&&(G.pinchAround=V.pinchAround)}var J=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ne={};if(G.pan.mag()){var ue=zo(G.pan.mag(),J,o.extend({},ks,B||{}));ne.offset=G.pan.mult(ue.amount/G.pan.mag()),ne.center=this._map.transform.center,Io(ne,ue)}if(G.zoom){var xe=zo(G.zoom,J,Hs);ne.zoom=this._map.transform.zoom+xe.amount,Io(ne,xe)}if(G.bearing){var Le=zo(G.bearing,J,As);ne.bearing=this._map.transform.bearing+o.clamp(Le.amount,-179,179),Io(ne,Le)}if(G.pitch){var De=zo(G.pitch,J,Ms);ne.pitch=this._map.transform.pitch+De.amount,Io(ne,De)}if(ne.zoom||ne.bearing){var Ue=G.pinchAround===void 0?G.around:G.pinchAround;ne.around=Ue?this._map.unproject(Ue):this._map.getCenter()}return this.clear(),o.extend(ne,{noMoveStart:!0})}};var na=function(B){function G(L,V,J,ne){ne===void 0&&(ne={});var ue=_.mousePos(V.getCanvasContainer(),J),xe=V.unproject(ue);B.call(this,L,o.extend({point:ue,lngLat:xe,originalEvent:J},ne)),this._defaultPrevented=!1,this.target=V}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var q={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,q),G}(o.Event),Ss=function(B){function G(L,V,J){var ne=L==="touchend"?J.changedTouches:J.touches,ue=_.touchPos(V.getCanvasContainer(),ne),xe=ue.map(function(Ue){return V.unproject(Ue)}),Le=ue.reduce(function(Ue,qe,et,lt){return Ue.add(qe.div(lt.length))},new o.Point(0,0)),De=V.unproject(Le);B.call(this,L,{points:ue,point:Le,lngLats:xe,lngLat:De,originalEvent:J}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var q={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,q),G}(o.Event),Ca=function(B){function G(L,V,J){B.call(this,L,{originalEvent:J}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var q={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,q),G}(o.Event),Fi=function(B,G){this._map=B,this._clickTolerance=G.clickTolerance};Fi.prototype.reset=function(){delete this._mousedownPos},Fi.prototype.wheel=function(B){return this._firePreventable(new Ca(B.type,this._map,B))},Fi.prototype.mousedown=function(B,G){return this._mousedownPos=G,this._firePreventable(new na(B.type,this._map,B))},Fi.prototype.mouseup=function(B){this._map.fire(new na(B.type,this._map,B))},Fi.prototype.click=function(B,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new na(B.type,this._map,B))},Fi.prototype.dblclick=function(B){return this._firePreventable(new na(B.type,this._map,B))},Fi.prototype.mouseover=function(B){this._map.fire(new na(B.type,this._map,B))},Fi.prototype.mouseout=function(B){this._map.fire(new na(B.type,this._map,B))},Fi.prototype.touchstart=function(B){return this._firePreventable(new Ss(B.type,this._map,B))},Fi.prototype.touchmove=function(B){this._map.fire(new Ss(B.type,this._map,B))},Fi.prototype.touchend=function(B){this._map.fire(new Ss(B.type,this._map,B))},Fi.prototype.touchcancel=function(B){this._map.fire(new Ss(B.type,this._map,B))},Fi.prototype._firePreventable=function(B){if(this._map.fire(B),B.defaultPrevented)return{}},Fi.prototype.isEnabled=function(){return!0},Fi.prototype.isActive=function(){return!1},Fi.prototype.enable=function(){},Fi.prototype.disable=function(){};var qi=function(B){this._map=B};qi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},qi.prototype.mousemove=function(B){this._map.fire(new na(B.type,this._map,B))},qi.prototype.mousedown=function(){this._delayContextMenu=!0},qi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new na("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},qi.prototype.contextmenu=function(B){this._delayContextMenu?this._contextMenuEvent=B:this._map.fire(new na(B.type,this._map,B)),this._map.listens("contextmenu")&&B.preventDefault()},qi.prototype.isEnabled=function(){return!0},qi.prototype.isActive=function(){return!1},qi.prototype.enable=function(){},qi.prototype.disable=function(){};var ai=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._container=B.getContainer(),this._clickTolerance=G.clickTolerance||1};function Hi(B,G){for(var q={},L=0;L<B.length;L++)q[B[L].identifier]=G[L];return q}ai.prototype.isEnabled=function(){return!!this._enabled},ai.prototype.isActive=function(){return!!this._active},ai.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ai.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ai.prototype.mousedown=function(B,G){this.isEnabled()&&B.shiftKey&&B.button===0&&(_.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},ai.prototype.mousemoveWindow=function(B,G){if(this._active){var q=G;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var L=this._startPos;this._lastPos=q,this._box||(this._box=_.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",B));var V=Math.min(L.x,q.x),J=Math.max(L.x,q.x),ne=Math.min(L.y,q.y),ue=Math.max(L.y,q.y);_.setTransform(this._box,"translate("+V+"px,"+ne+"px)"),this._box.style.width=J-V+"px",this._box.style.height=ue-ne+"px"}}},ai.prototype.mouseupWindow=function(B,G){var q=this;if(this._active&&B.button===0){var L=this._startPos,V=G;if(this.reset(),_.suppressClick(),L.x!==V.x||L.y!==V.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:B})),{cameraAnimation:function(J){return J.fitScreenCoordinates(L,V,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",B)}},ai.prototype.keydown=function(B){this._active&&B.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",B))},ai.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos},ai.prototype._fireEvent=function(B,G){return this._map.fire(new o.Event(B,{originalEvent:G}))};var no=function(B){this.reset(),this.numTouches=B.numTouches};no.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},no.prototype.touchstart=function(B,G,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=B.timeStamp),q.length===this.numTouches&&(this.centroid=function(L){for(var V=new o.Point(0,0),J=0,ne=L;J<ne.length;J+=1){var ue=ne[J];V._add(ue)}return V.div(L.length)}(G),this.touches=Hi(q,G)))},no.prototype.touchmove=function(B,G,q){if(!this.aborted&&this.centroid){var L=Hi(q,G);for(var V in this.touches){var J=this.touches[V],ne=L[V];(!ne||ne.dist(J)>30)&&(this.aborted=!0)}}},no.prototype.touchend=function(B,G,q){if((!this.centroid||B.timeStamp-this.startTime>500)&&(this.aborted=!0),q.length===0){var L=!this.aborted&&this.centroid;if(this.reset(),L)return L}};var es=function(B){this.singleTap=new no(B),this.numTaps=B.numTaps,this.reset()};es.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},es.prototype.touchstart=function(B,G,q){this.singleTap.touchstart(B,G,q)},es.prototype.touchmove=function(B,G,q){this.singleTap.touchmove(B,G,q)},es.prototype.touchend=function(B,G,q){var L=this.singleTap.touchend(B,G,q);if(L){var V=B.timeStamp-this.lastTime<500,J=!this.lastTap||this.lastTap.dist(L)<30;if(V&&J||this.reset(),this.count++,this.lastTime=B.timeStamp,this.lastTap=L,this.count===this.numTaps)return this.reset(),L}};var Ua=function(){this._zoomIn=new es({numTouches:1,numTaps:2}),this._zoomOut=new es({numTouches:2,numTaps:1}),this.reset()};Ua.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ua.prototype.touchstart=function(B,G,q){this._zoomIn.touchstart(B,G,q),this._zoomOut.touchstart(B,G,q)},Ua.prototype.touchmove=function(B,G,q){this._zoomIn.touchmove(B,G,q),this._zoomOut.touchmove(B,G,q)},Ua.prototype.touchend=function(B,G,q){var L=this,V=this._zoomIn.touchend(B,G,q),J=this._zoomOut.touchend(B,G,q);return V?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(V)},{originalEvent:B})}}):J?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject(J)},{originalEvent:B})}}):void 0},Ua.prototype.touchcancel=function(){this.reset()},Ua.prototype.enable=function(){this._enabled=!0},Ua.prototype.disable=function(){this._enabled=!1,this.reset()},Ua.prototype.isEnabled=function(){return this._enabled},Ua.prototype.isActive=function(){return this._active};var Do={};Do[0]=1,Do[2]=2;var la=function(B){this.reset(),this._clickTolerance=B.clickTolerance||1};la.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},la.prototype._correctButton=function(B,G){return!1},la.prototype._move=function(B,G){return{}},la.prototype.mousedown=function(B,G){if(!this._lastPoint){var q=_.mouseButton(B);this._correctButton(B,q)&&(this._lastPoint=G,this._eventButton=q)}},la.prototype.mousemoveWindow=function(B,G){var q=this._lastPoint;if(q){if(B.preventDefault(),function(L,V){var J=Do[V];return L.buttons===void 0||(L.buttons&J)!==J}(B,this._eventButton))this.reset();else if(this._moved||!(G.dist(q)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(q,G)}},la.prototype.mouseupWindow=function(B){this._lastPoint&&_.mouseButton(B)===this._eventButton&&(this._moved&&_.suppressClick(),this.reset())},la.prototype.enable=function(){this._enabled=!0},la.prototype.disable=function(){this._enabled=!1,this.reset()},la.prototype.isEnabled=function(){return this._enabled},la.prototype.isActive=function(){return this._active};var ts=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(q,L){B.prototype.mousedown.call(this,q,L),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(q,L){return L===0&&!q.ctrlKey},G.prototype._move=function(q,L){return{around:L,panDelta:L.sub(q)}},G}(la),mo=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(q,L){return L===0&&q.ctrlKey||L===2},G.prototype._move=function(q,L){var V=.8*(L.x-q.x);if(V)return this._active=!0,{bearingDelta:V}},G.prototype.contextmenu=function(q){q.preventDefault()},G}(la),Oa=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(q,L){return L===0&&q.ctrlKey||L===2},G.prototype._move=function(q,L){var V=-.5*(L.y-q.y);if(V)return this._active=!0,{pitchDelta:V}},G.prototype.contextmenu=function(q){q.preventDefault()},G}(la),Pa=function(B){this._minTouches=1,this._clickTolerance=B.clickTolerance||1,this.reset()};Pa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},Pa.prototype.touchstart=function(B,G,q){return this._calculateTransform(B,G,q)},Pa.prototype.touchmove=function(B,G,q){if(this._active&&!(q.length<this._minTouches))return B.preventDefault(),this._calculateTransform(B,G,q)},Pa.prototype.touchend=function(B,G,q){this._calculateTransform(B,G,q),this._active&&q.length<this._minTouches&&this.reset()},Pa.prototype.touchcancel=function(){this.reset()},Pa.prototype._calculateTransform=function(B,G,q){q.length>0&&(this._active=!0);var L=Hi(q,G),V=new o.Point(0,0),J=new o.Point(0,0),ne=0;for(var ue in L){var xe=L[ue],Le=this._touches[ue];Le&&(V._add(xe),J._add(xe.sub(Le)),ne++,L[ue]=xe)}if(this._touches=L,!(ne<this._minTouches)&&J.mag()){var De=J.div(ne);if(this._sum._add(De),!(this._sum.mag()<this._clickTolerance))return{around:V.div(ne),panDelta:De}}},Pa.prototype.enable=function(){this._enabled=!0},Pa.prototype.disable=function(){this._enabled=!1,this.reset()},Pa.prototype.isEnabled=function(){return this._enabled},Pa.prototype.isActive=function(){return this._active};var si=function(){this.reset()};function Va(B,G,q){for(var L=0;L<B.length;L++)if(B[L].identifier===q)return G[L]}si.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},si.prototype._start=function(B){},si.prototype._move=function(B,G,q){return{}},si.prototype.touchstart=function(B,G,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([G[0],G[1]]))},si.prototype.touchmove=function(B,G,q){if(this._firstTwoTouches){B.preventDefault();var L=this._firstTwoTouches,V=L[0],J=L[1],ne=Va(q,G,V),ue=Va(q,G,J);if(ne&&ue){var xe=this._aroundCenter?null:ne.add(ue).div(2);return this._move([ne,ue],xe,B)}}},si.prototype.touchend=function(B,G,q){if(this._firstTwoTouches){var L=this._firstTwoTouches,V=L[0],J=L[1],ne=Va(q,G,V),ue=Va(q,G,J);ne&&ue||(this._active&&_.suppressClick(),this.reset())}},si.prototype.touchcancel=function(){this.reset()},si.prototype.enable=function(B){this._enabled=!0,this._aroundCenter=!!B&&B.around==="center"},si.prototype.disable=function(){this._enabled=!1,this.reset()},si.prototype.isEnabled=function(){return this._enabled},si.prototype.isActive=function(){return this._active};function wr(B,G){return Math.log(B/G)/Math.LN2}var Es=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},G.prototype._move=function(q,L){var V=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(wr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wr(this._distance,V),pinchAround:L}},G}(si);function $s(B,G){return 180*B.angleWith(G)/Math.PI}var Ro=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},G.prototype._move=function(q,L){var V=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$s(this._vector,V),pinchAround:L}},G.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var L=25/(Math.PI*this._minDiameter)*360,V=$s(q,this._startVector);return Math.abs(V)<L},G}(si);function Fo(B){return Math.abs(B.y)>Math.abs(B.x)}var ns=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(q){this._lastPoints=q,Fo(q[0].sub(q[1]))&&(this._valid=!1)},G.prototype._move=function(q,L,V){var J=q[0].sub(this._lastPoints[0]),ne=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(J,ne,V.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(J.y+ne.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(q,L,V){if(this._valid!==void 0)return this._valid;var J=q.mag()>=2,ne=L.mag()>=2;if(J||ne){if(!J||!ne)return this._firstMove===void 0&&(this._firstMove=V),V-this._firstMove<100&&void 0;var ue=q.y>0==L.y>0;return Fo(q)&&Fo(L)&&ue}},G}(si),hs={panStep:100,bearingStep:15,pitchStep:10},dr=function(){var B=hs;this._panStep=B.panStep,this._bearingStep=B.bearingStep,this._pitchStep=B.pitchStep,this._rotationDisabled=!1};function Ls(B){return B*(2-B)}dr.prototype.reset=function(){this._active=!1},dr.prototype.keydown=function(B){var G=this;if(!(B.altKey||B.ctrlKey||B.metaKey)){var q=0,L=0,V=0,J=0,ne=0;switch(B.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:B.shiftKey?L=-1:(B.preventDefault(),J=-1);break;case 39:B.shiftKey?L=1:(B.preventDefault(),J=1);break;case 38:B.shiftKey?V=1:(B.preventDefault(),ne=-1);break;case 40:B.shiftKey?V=-1:(B.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(L=0,V=0),{cameraAnimation:function(ue){var xe=ue.getZoom();ue.easeTo({duration:300,easeId:"keyboardHandler",easing:Ls,zoom:q?Math.round(xe)+q*(B.shiftKey?2:1):xe,bearing:ue.getBearing()+L*G._bearingStep,pitch:ue.getPitch()+V*G._pitchStep,offset:[-J*G._panStep,-ne*G._panStep],center:ue.getCenter()},{originalEvent:B})}}}},dr.prototype.enable=function(){this._enabled=!0},dr.prototype.disable=function(){this._enabled=!1,this.reset()},dr.prototype.isEnabled=function(){return this._enabled},dr.prototype.isActive=function(){return this._active},dr.prototype.disableRotation=function(){this._rotationDisabled=!0},dr.prototype.enableRotation=function(){this._rotationDisabled=!1};var yo=4.000244140625,Bi=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)};Bi.prototype.setZoomRate=function(B){this._defaultZoomRate=B},Bi.prototype.setWheelZoomRate=function(B){this._wheelZoomRate=B},Bi.prototype.isEnabled=function(){return!!this._enabled},Bi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Bi.prototype.isZooming=function(){return!!this._zooming},Bi.prototype.enable=function(B){this.isEnabled()||(this._enabled=!0,this._aroundCenter=B&&B.around==="center")},Bi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Bi.prototype.wheel=function(B){if(this.isEnabled()){var G=B.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*B.deltaY:B.deltaY,q=o.browser.now(),L=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,G!==0&&G%yo==0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":L>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,B)):this._type||(this._type=Math.abs(L*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),B.shiftKey&&G&&(G/=4),this._type&&(this._lastWheelEvent=B,this._delta-=G,this._active||this._start(B)),B.preventDefault()}},Bi.prototype._onTimeout=function(B){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(B)},Bi.prototype._start=function(B){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=_.mousePos(this._el,B);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Bi.prototype.renderFrame=function(){var B=this;if(this._frameId&&(this._frameId=null,this.isActive())){var G=this._map.transform;if(this._delta!==0){var q=this._type==="wheel"&&Math.abs(this._delta)>yo?this._wheelZoomRate:this._defaultZoomRate,L=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&L!==0&&(L=1/L);var V=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(V*L))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var J,ne=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,ue=this._startZoom,xe=this._easing,Le=!1;if(this._type==="wheel"&&ue&&xe){var De=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Ue=xe(De);J=o.number(ue,ne,Ue),De<1?this._frameId||(this._frameId=!0):Le=!0}else J=ne,Le=!0;return this._active=!0,Le&&(this._active=!1,this._finishTimeout=setTimeout(function(){B._zooming=!1,B._handler._triggerRenderFrame(),delete B._targetZoom,delete B._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Le,zoomDelta:J-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Bi.prototype._smoothOutEasing=function(B){var G=o.ease;if(this._prevEase){var q=this._prevEase,L=(o.browser.now()-q.start)/q.duration,V=q.easing(L+.01)-q.easing(L),J=.27/Math.sqrt(V*V+1e-4)*.01,ne=Math.sqrt(.0729-J*J);G=o.bezier(J,ne,.25,1)}return this._prevEase={start:o.browser.now(),duration:B,easing:G},G},Bi.prototype.reset=function(){this._active=!1};var Bo=function(B,G){this._clickZoom=B,this._tapZoom=G};Bo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Bo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Bo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Bo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var qa=function(){this.reset()};qa.prototype.reset=function(){this._active=!1},qa.prototype.dblclick=function(B,G){return B.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(B.shiftKey?-1:1),around:q.unproject(G)},{originalEvent:B})}}},qa.prototype.enable=function(){this._enabled=!0},qa.prototype.disable=function(){this._enabled=!1,this.reset()},qa.prototype.isEnabled=function(){return this._enabled},qa.prototype.isActive=function(){return this._active};var Ia=function(){this._tap=new es({numTouches:1,numTaps:1}),this.reset()};Ia.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ia.prototype.touchstart=function(B,G,q){this._swipePoint||(this._tapTime&&B.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=G[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(B,G,q))},Ia.prototype.touchmove=function(B,G,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var L=G[0],V=L.y-this._swipePoint.y;return this._swipePoint=L,B.preventDefault(),this._active=!0,{zoomDelta:V/128}}}else this._tap.touchmove(B,G,q)},Ia.prototype.touchend=function(B,G,q){this._tapTime?this._swipePoint&&q.length===0&&this.reset():this._tap.touchend(B,G,q)&&(this._tapTime=B.timeStamp)},Ia.prototype.touchcancel=function(){this.reset()},Ia.prototype.enable=function(){this._enabled=!0},Ia.prototype.disable=function(){this._enabled=!1,this.reset()},Ia.prototype.isEnabled=function(){return this._enabled},Ia.prototype.isActive=function(){return this._active};var ra=function(B,G,q){this._el=B,this._mousePan=G,this._touchPan=q};ra.prototype.enable=function(B){this._inertiaOptions=B||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ra.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ra.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ra.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ro=function(B,G,q){this._pitchWithRotate=B.pitchWithRotate,this._mouseRotate=G,this._mousePitch=q};ro.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ro.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ro.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ro.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var za=function(B,G,q,L){this._el=B,this._touchZoom=G,this._touchRotate=q,this._tapDragZoom=L,this._rotationDisabled=!1,this._enabled=!0};za.prototype.enable=function(B){this._touchZoom.enable(B),this._rotationDisabled||this._touchRotate.enable(B),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},za.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},za.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},za.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},za.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},za.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var xo=function(B){return B.zoom||B.drag||B.pitch||B.rotate},Cs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G}(o.Event);function No(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}var Hr=function(B,G){this._map=B,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new La(B),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),o.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!0}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[o.window,"blur",void 0]];for(var L=0,V=this._listeners;L<V.length;L+=1){var J=V[L],ne=J[0],ue=J[1],xe=J[2];_.addEventListener(ne,ue,ne===o.window.document?this.handleWindowEvent:this.handleEvent,xe)}};Hr.prototype.destroy=function(){for(var B=0,G=this._listeners;B<G.length;B+=1){var q=G[B],L=q[0],V=q[1],J=q[2];_.removeEventListener(L,V,L===o.window.document?this.handleWindowEvent:this.handleEvent,J)}},Hr.prototype._addDefaultHandlers=function(B){var G=this._map,q=G.getCanvasContainer();this._add("mapEvent",new Fi(G,B));var L=G.boxZoom=new ai(G,B);this._add("boxZoom",L);var V=new Ua,J=new qa;G.doubleClickZoom=new Bo(J,V),this._add("tapZoom",V),this._add("clickZoom",J);var ne=new Ia;this._add("tapDragZoom",ne);var ue=G.touchPitch=new ns;this._add("touchPitch",ue);var xe=new mo(B),Le=new Oa(B);G.dragRotate=new ro(B,xe,Le),this._add("mouseRotate",xe,["mousePitch"]),this._add("mousePitch",Le,["mouseRotate"]);var De=new ts(B),Ue=new Pa(B);G.dragPan=new ra(q,De,Ue),this._add("mousePan",De),this._add("touchPan",Ue,["touchZoom","touchRotate"]);var qe=new Ro,et=new Es;G.touchZoomRotate=new za(q,et,qe,ne),this._add("touchRotate",qe,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]);var lt=G.scrollZoom=new Bi(G,this);this._add("scrollZoom",lt,["mousePan"]);var ft=G.keyboard=new dr;this._add("keyboard",ft),this._add("blockableMapEvent",new qi(G));for(var xt=0,St=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];xt<St.length;xt+=1){var wt=St[xt];B.interactive&&B[wt]&&G[wt].enable(B[wt])}},Hr.prototype._add=function(B,G,q){this._handlers.push({handlerName:B,handler:G,allowed:q}),this._handlersById[B]=G},Hr.prototype.stop=function(B){if(!this._updatingCamera){for(var G=0,q=this._handlers;G<q.length;G+=1)q[G].handler.reset();this._inertia.clear(),this._fireEvents({},{},B),this._changes=[]}},Hr.prototype.isActive=function(){for(var B=0,G=this._handlers;B<G.length;B+=1)if(G[B].handler.isActive())return!0;return!1},Hr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Hr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Hr.prototype.isMoving=function(){return!!xo(this._eventsInProgress)||this.isZooming()},Hr.prototype._blockedByActive=function(B,G,q){for(var L in B)if(L!==q&&(!G||G.indexOf(L)<0))return!0;return!1},Hr.prototype.handleWindowEvent=function(B){this.handleEvent(B,B.type+"Window")},Hr.prototype._getMapTouches=function(B){for(var G=[],q=0,L=B;q<L.length;q+=1){var V=L[q],J=V.target;this._el.contains(J)&&G.push(V)}return G},Hr.prototype.handleEvent=function(B,G){if(B.type!=="blur"){this._updatingCamera=!0;for(var q=B.type==="renderFrame"?void 0:B,L={needsRenderFrame:!1},V={},J={},ne=B.touches?this._getMapTouches(B.touches):void 0,ue=ne?_.touchPos(this._el,ne):_.mousePos(this._el,B),xe=0,Le=this._handlers;xe<Le.length;xe+=1){var De=Le[xe],Ue=De.handlerName,qe=De.handler,et=De.allowed;if(qe.isEnabled()){var lt=void 0;this._blockedByActive(J,et,Ue)?qe.reset():qe[G||B.type]&&(lt=qe[G||B.type](B,ue,ne),this.mergeHandlerResult(L,V,lt,Ue,q),lt&&lt.needsRenderFrame&&this._triggerRenderFrame()),(lt||qe.isActive())&&(J[Ue]=qe)}}var ft={};for(var xt in this._previousActiveHandlers)J[xt]||(ft[xt]=q);this._previousActiveHandlers=J,(Object.keys(ft).length||No(L))&&(this._changes.push([L,V,ft]),this._triggerRenderFrame()),(Object.keys(J).length||No(L))&&this._map._stop(!0),this._updatingCamera=!1;var St=L.cameraAnimation;St&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],St(this._map))}else this.stop(!0)},Hr.prototype.mergeHandlerResult=function(B,G,q,L,V){if(q){o.extend(B,q);var J={handlerName:L,originalEvent:q.originalEvent||V};q.zoomDelta!==void 0&&(G.zoom=J),q.panDelta!==void 0&&(G.drag=J),q.pitchDelta!==void 0&&(G.pitch=J),q.bearingDelta!==void 0&&(G.rotate=J)}},Hr.prototype._applyChanges=function(){for(var B={},G={},q={},L=0,V=this._changes;L<V.length;L+=1){var J=V[L],ne=J[0],ue=J[1],xe=J[2];ne.panDelta&&(B.panDelta=(B.panDelta||new o.Point(0,0))._add(ne.panDelta)),ne.zoomDelta&&(B.zoomDelta=(B.zoomDelta||0)+ne.zoomDelta),ne.bearingDelta&&(B.bearingDelta=(B.bearingDelta||0)+ne.bearingDelta),ne.pitchDelta&&(B.pitchDelta=(B.pitchDelta||0)+ne.pitchDelta),ne.around!==void 0&&(B.around=ne.around),ne.pinchAround!==void 0&&(B.pinchAround=ne.pinchAround),ne.noInertia&&(B.noInertia=ne.noInertia),o.extend(G,ue),o.extend(q,xe)}this._updateMapTransform(B,G,q),this._changes=[]},Hr.prototype._updateMapTransform=function(B,G,q){var L=this._map,V=L.transform;if(!No(B))return this._fireEvents(G,q,!0);var J=B.panDelta,ne=B.zoomDelta,ue=B.bearingDelta,xe=B.pitchDelta,Le=B.around,De=B.pinchAround;De!==void 0&&(Le=De),L._stop(!0),Le=Le||L.transform.centerPoint;var Ue=V.pointLocation(J?Le.sub(J):Le);ue&&(V.bearing+=ue),xe&&(V.pitch+=xe),ne&&(V.zoom+=ne),V.setLocationAtPoint(Ue,Le),this._map._update(),B.noInertia||this._inertia.record(B),this._fireEvents(G,q,!0)},Hr.prototype._fireEvents=function(B,G,q){var L=this,V=xo(this._eventsInProgress),J=xo(B),ne={};for(var ue in B){var xe=B[ue].originalEvent;this._eventsInProgress[ue]||(ne[ue+"start"]=xe),this._eventsInProgress[ue]=B[ue]}for(var Le in!V&&J&&this._fireEvent("movestart",J.originalEvent),ne)this._fireEvent(Le,ne[Le]);for(var De in J&&this._fireEvent("move",J.originalEvent),B){var Ue=B[De].originalEvent;this._fireEvent(De,Ue)}var qe,et={};for(var lt in this._eventsInProgress){var ft=this._eventsInProgress[lt],xt=ft.handlerName,St=ft.originalEvent;this._handlersById[xt].isActive()||(delete this._eventsInProgress[lt],qe=G[xt]||St,et[lt+"end"]=qe)}for(var wt in et)this._fireEvent(wt,et[wt]);var Dt=xo(this._eventsInProgress);if(q&&(V||J)&&!Dt){this._updatingCamera=!0;var Et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Yt=function(qt){return qt!==0&&-L._bearingSnap<qt&&qt<L._bearingSnap};Et?(Yt(Et.bearing||this._map.getBearing())&&(Et.bearing=0),this._map.easeTo(Et,{originalEvent:qe})):(this._map.fire(new o.Event("moveend",{originalEvent:qe})),Yt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Hr.prototype._fireEvent=function(B,G){this._map.fire(new o.Event(B,G?{originalEvent:G}:{}))},Hr.prototype._requestFrame=function(){var B=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete B._frameId,B.handleEvent(new Cs("renderFrame",{timeStamp:G})),B._applyChanges()})},Hr.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Gi=function(B){function G(q,L){B.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=L.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(q,L){return this.jumpTo({center:q},L)},G.prototype.panBy=function(q,L,V){return q=o.Point.convert(q).mult(-1),this.panTo(this.transform.center,o.extend({offset:q},L),V)},G.prototype.panTo=function(q,L,V){return this.easeTo(o.extend({center:q},L),V)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(q,L){return this.jumpTo({zoom:q},L),this},G.prototype.zoomTo=function(q,L,V){return this.easeTo(o.extend({zoom:q},L),V)},G.prototype.zoomIn=function(q,L){return this.zoomTo(this.getZoom()+1,q,L),this},G.prototype.zoomOut=function(q,L){return this.zoomTo(this.getZoom()-1,q,L),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(q,L){return this.jumpTo({bearing:q},L),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(q,L){return this.jumpTo({padding:q},L),this},G.prototype.rotateTo=function(q,L,V){return this.easeTo(o.extend({bearing:q},L),V)},G.prototype.resetNorth=function(q,L){return this.rotateTo(0,o.extend({duration:1e3},q),L),this},G.prototype.resetNorthPitch=function(q,L){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},q),L),this},G.prototype.snapToNorth=function(q,L){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,L):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(q,L){return this.jumpTo({pitch:q},L),this},G.prototype.cameraForBounds=function(q,L){q=o.LngLatBounds.convert(q);var V=L&&L.bearing||0;return this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),V,L)},G.prototype._cameraForBoxAndBearing=function(q,L,V,J){var ne={top:0,bottom:0,right:0,left:0};if(typeof(J=o.extend({padding:ne,offset:[0,0],maxZoom:this.transform.maxZoom},J)).padding=="number"){var ue=J.padding;J.padding={top:ue,bottom:ue,right:ue,left:ue}}J.padding=o.extend(ne,J.padding);var xe=this.transform,Le=xe.padding,De=xe.project(o.LngLat.convert(q)),Ue=xe.project(o.LngLat.convert(L)),qe=De.rotate(-V*Math.PI/180),et=Ue.rotate(-V*Math.PI/180),lt=new o.Point(Math.max(qe.x,et.x),Math.max(qe.y,et.y)),ft=new o.Point(Math.min(qe.x,et.x),Math.min(qe.y,et.y)),xt=lt.sub(ft),St=(xe.width-(Le.left+Le.right+J.padding.left+J.padding.right))/xt.x,wt=(xe.height-(Le.top+Le.bottom+J.padding.top+J.padding.bottom))/xt.y;if(!(wt<0||St<0)){var Dt=Math.min(xe.scaleZoom(xe.scale*Math.min(St,wt)),J.maxZoom),Et=typeof J.offset.x=="number"?new o.Point(J.offset.x,J.offset.y):o.Point.convert(J.offset),Yt=(J.padding.left-J.padding.right)/2,qt=(J.padding.top-J.padding.bottom)/2,Bt=new o.Point(Yt,qt).rotate(V*Math.PI/180),fn=Et.add(Bt).mult(xe.scale/xe.zoomScale(Dt));return{center:xe.unproject(De.add(Ue).div(2).sub(fn)),zoom:Dt,bearing:V}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(q,L,V){return this._fitInternal(this.cameraForBounds(q,L),L,V)},G.prototype.fitScreenCoordinates=function(q,L,V,J,ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(q)),this.transform.pointLocation(o.Point.convert(L)),V,J),J,ne)},G.prototype._fitInternal=function(q,L,V){return q?(delete(L=o.extend(q,L)).padding,L.linear?this.easeTo(L,V):this.flyTo(L,V)):this},G.prototype.jumpTo=function(q,L){this.stop();var V=this.transform,J=!1,ne=!1,ue=!1;return"zoom"in q&&V.zoom!==+q.zoom&&(J=!0,V.zoom=+q.zoom),q.center!==void 0&&(V.center=o.LngLat.convert(q.center)),"bearing"in q&&V.bearing!==+q.bearing&&(ne=!0,V.bearing=+q.bearing),"pitch"in q&&V.pitch!==+q.pitch&&(ue=!0,V.pitch=+q.pitch),q.padding==null||V.isPaddingEqual(q.padding)||(V.padding=q.padding),this.fire(new o.Event("movestart",L)).fire(new o.Event("move",L)),J&&this.fire(new o.Event("zoomstart",L)).fire(new o.Event("zoom",L)).fire(new o.Event("zoomend",L)),ne&&this.fire(new o.Event("rotatestart",L)).fire(new o.Event("rotate",L)).fire(new o.Event("rotateend",L)),ue&&this.fire(new o.Event("pitchstart",L)).fire(new o.Event("pitch",L)).fire(new o.Event("pitchend",L)),this.fire(new o.Event("moveend",L))},G.prototype.easeTo=function(q,L){var V=this;this._stop(!1,q.easeId),((q=o.extend({offset:[0,0],duration:500,easing:o.ease},q)).animate===!1||!q.essential&&o.browser.prefersReducedMotion)&&(q.duration=0);var J=this.transform,ne=this.getZoom(),ue=this.getBearing(),xe=this.getPitch(),Le=this.getPadding(),De="zoom"in q?+q.zoom:ne,Ue="bearing"in q?this._normalizeBearing(q.bearing,ue):ue,qe="pitch"in q?+q.pitch:xe,et="padding"in q?q.padding:J.padding,lt=o.Point.convert(q.offset),ft=J.centerPoint.add(lt),xt=J.pointLocation(ft),St=o.LngLat.convert(q.center||xt);this._normalizeCenter(St);var wt,Dt,Et=J.project(xt),Yt=J.project(St).sub(Et),qt=J.zoomScale(De-ne);q.around&&(wt=o.LngLat.convert(q.around),Dt=J.locationPoint(wt));var Bt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||De!==ne,this._rotating=this._rotating||ue!==Ue,this._pitching=this._pitching||qe!==xe,this._padding=!J.isPaddingEqual(et),this._easeId=q.easeId,this._prepareEase(L,q.noMoveStart,Bt),this._ease(function(fn){if(V._zooming&&(J.zoom=o.number(ne,De,fn)),V._rotating&&(J.bearing=o.number(ue,Ue,fn)),V._pitching&&(J.pitch=o.number(xe,qe,fn)),V._padding&&(J.interpolatePadding(Le,et,fn),ft=J.centerPoint.add(lt)),wt)J.setLocationAtPoint(wt,Dt);else{var gn=J.zoomScale(J.zoom-ne),kn=De>ne?Math.min(2,qt):Math.max(.5,qt),On=Math.pow(kn,1-fn),Nn=J.unproject(Et.add(Yt.mult(fn*On)).mult(gn));J.setLocationAtPoint(J.renderWorldCopies?Nn.wrap():Nn,ft)}V._fireMoveEvents(L)},function(fn){V._afterEase(L,fn)},q),this},G.prototype._prepareEase=function(q,L,V){V===void 0&&(V={}),this._moving=!0,L||V.moving||this.fire(new o.Event("movestart",q)),this._zooming&&!V.zooming&&this.fire(new o.Event("zoomstart",q)),this._rotating&&!V.rotating&&this.fire(new o.Event("rotatestart",q)),this._pitching&&!V.pitching&&this.fire(new o.Event("pitchstart",q))},G.prototype._fireMoveEvents=function(q){this.fire(new o.Event("move",q)),this._zooming&&this.fire(new o.Event("zoom",q)),this._rotating&&this.fire(new o.Event("rotate",q)),this._pitching&&this.fire(new o.Event("pitch",q))},G.prototype._afterEase=function(q,L){if(!this._easeId||!L||this._easeId!==L){delete this._easeId;var V=this._zooming,J=this._rotating,ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,V&&this.fire(new o.Event("zoomend",q)),J&&this.fire(new o.Event("rotateend",q)),ne&&this.fire(new o.Event("pitchend",q)),this.fire(new o.Event("moveend",q))}},G.prototype.flyTo=function(q,L){var V=this;if(!q.essential&&o.browser.prefersReducedMotion){var J=o.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(J,L)}this.stop(),q=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},q);var ne=this.transform,ue=this.getZoom(),xe=this.getBearing(),Le=this.getPitch(),De=this.getPadding(),Ue="zoom"in q?o.clamp(+q.zoom,ne.minZoom,ne.maxZoom):ue,qe="bearing"in q?this._normalizeBearing(q.bearing,xe):xe,et="pitch"in q?+q.pitch:Le,lt="padding"in q?q.padding:ne.padding,ft=ne.zoomScale(Ue-ue),xt=o.Point.convert(q.offset),St=ne.centerPoint.add(xt),wt=ne.pointLocation(St),Dt=o.LngLat.convert(q.center||wt);this._normalizeCenter(Dt);var Et=ne.project(wt),Yt=ne.project(Dt).sub(Et),qt=q.curve,Bt=Math.max(ne.width,ne.height),fn=Bt/ft,gn=Yt.mag();if("minZoom"in q){var kn=o.clamp(Math.min(q.minZoom,ue,Ue),ne.minZoom,ne.maxZoom),On=Bt/ne.zoomScale(kn-ue);qt=Math.sqrt(On/gn*2)}var Nn=qt*qt;function er(sr){var Tr=(fn*fn-Bt*Bt+(sr?-1:1)*Nn*Nn*gn*gn)/(2*(sr?fn:Bt)*Nn*gn);return Math.log(Math.sqrt(Tr*Tr+1)-Tr)}function or(sr){return(Math.exp(sr)-Math.exp(-sr))/2}function Hn(sr){return(Math.exp(sr)+Math.exp(-sr))/2}var ar=er(0),vr=function(sr){return Hn(ar)/Hn(ar+qt*sr)},Ar=function(sr){return Bt*((Hn(ar)*(or(Tr=ar+qt*sr)/Hn(Tr))-or(ar))/Nn)/gn;var Tr},Kn=(er(1)-ar)/qt;if(Math.abs(gn)<1e-6||!isFinite(Kn)){if(Math.abs(Bt-fn)<1e-6)return this.easeTo(q,L);var ir=fn<Bt?-1:1;Kn=Math.abs(Math.log(fn/Bt))/qt,Ar=function(){return 0},vr=function(sr){return Math.exp(ir*qt*sr)}}if("duration"in q)q.duration=+q.duration;else{var br="screenSpeed"in q?+q.screenSpeed/qt:+q.speed;q.duration=1e3*Kn/br}return q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=xe!==qe,this._pitching=et!==Le,this._padding=!ne.isPaddingEqual(lt),this._prepareEase(L,!1),this._ease(function(sr){var Tr=sr*Kn,Er=1/vr(Tr);ne.zoom=sr===1?Ue:ue+ne.scaleZoom(Er),V._rotating&&(ne.bearing=o.number(xe,qe,sr)),V._pitching&&(ne.pitch=o.number(Le,et,sr)),V._padding&&(ne.interpolatePadding(De,lt,sr),St=ne.centerPoint.add(xt));var Rr=sr===1?Dt:ne.unproject(Et.add(Yt.mult(Ar(Tr))).mult(Er));ne.setLocationAtPoint(ne.renderWorldCopies?Rr.wrap():Rr,St),V._fireMoveEvents(L)},function(){return V._afterEase(L)},q),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(q,L){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var V=this._onEaseEnd;delete this._onEaseEnd,V.call(this,L)}if(!q){var J=this.handlers;J&&J.stop(!1)}return this},G.prototype._ease=function(q,L,V){V.animate===!1||V.duration===0?(q(1),L()):(this._easeStart=o.browser.now(),this._easeOptions=V,this._onEaseFrame=q,this._onEaseEnd=L,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var q=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(q,L){q=o.wrap(q,-180,180);var V=Math.abs(q-L);return Math.abs(q-360-L)<V&&(q-=360),Math.abs(q+360-L)<V&&(q+=360),q},G.prototype._normalizeCenter=function(q){var L=this.transform;if(L.renderWorldCopies&&!L.lngRange){var V=q.lng-L.center.lng;q.lng+=V>180?-360:V<-180?360:0}},G}(o.Evented),ua=function(B){B===void 0&&(B={}),this.options=B,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ua.prototype.getDefaultPosition=function(){return"bottom-right"},ua.prototype.onAdd=function(B){var G=this.options&&this.options.compact;return this._map=B,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=_.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ua.prototype.onRemove=function(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ua.prototype._setElementTitle=function(B,G){var q=this._map._getUIString("AttributionControl."+G);B.title=q,B.setAttribute("aria-label",q)},ua.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ua.prototype._updateEditLink=function(){var B=this._editLink;B||(B=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(B){var q=G.reduce(function(L,V,J){return V.value&&(L+=V.key+"="+V.value+(J<G.length-1?"&":"")),L},"?");B.href=o.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),B.rel="noopener nofollow",this._setElementTitle(B,"MapFeedback")}},ua.prototype._updateData=function(B){!B||B.sourceDataType!=="metadata"&&B.sourceDataType!=="visibility"&&B.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},ua.prototype._updateAttributions=function(){if(this._map.style){var B=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?B=B.concat(this.options.customAttribution.map(function(ue){return typeof ue!="string"?"":ue})):typeof this.options.customAttribution=="string"&&B.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var q=this._map.style.sourceCaches;for(var L in q){var V=q[L];if(V.used){var J=V.getSource();J.attribution&&B.indexOf(J.attribution)<0&&B.push(J.attribution)}}B.sort(function(ue,xe){return ue.length-xe.length});var ne=(B=B.filter(function(ue,xe){for(var Le=xe+1;Le<B.length;Le++)if(B[Le].indexOf(ue)>=0)return!1;return!0})).join(" | ");ne!==this._attribHTML&&(this._attribHTML=ne,B.length?(this._innerContainer.innerHTML=ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ua.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var io=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};io.prototype.onAdd=function(B){this._map=B,this._container=_.create("div","mapboxgl-ctrl");var G=_.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},io.prototype.onRemove=function(){_.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},io.prototype.getDefaultPosition=function(){return"bottom-left"},io.prototype._updateLogo=function(B){B&&B.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},io.prototype._logoRequired=function(){if(this._map.style){var B=this._map.style.sourceCaches;for(var G in B)if(B[G].getSource().mapbox_logo)return!0;return!1}},io.prototype._updateCompact=function(){var B=this._container.children;if(B.length){var G=B[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var ca=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ca.prototype.add=function(B){var G=++this._id;return this._queue.push({callback:B,id:G,cancelled:!1}),G},ca.prototype.remove=function(B){for(var G=this._currentlyRunning,q=0,L=G?this._queue.concat(G):this._queue;q<L.length;q+=1){var V=L[q];if(V.id===B)return void(V.cancelled=!0)}},ca.prototype.run=function(B){B===void 0&&(B=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,L=G;q<L.length;q+=1){var V=L[q];if(!V.cancelled&&(V.callback(B),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ca.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ps={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ds=o.window.HTMLImageElement,fa=o.window.HTMLElement,Vr=o.window.ImageBitmap,ao=60,rs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:ao,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ha=function(B){function G(L){var V=this;if((L=o.extend({},rs,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>ao)throw new Error("maxPitch must be less than or equal to 60");var J=new Wr(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies);if(B.call(this,J,L),this._interactive=L.interactive,this._maxTileCacheSize=L.maxTileCacheSize,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new ca,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},ps,L.locale),this._clickTolerance=L.clickTolerance,this._requestManager=new o.RequestManager(L.transformRequest,L.accessToken),typeof L.container=="string"){if(this._container=o.window.document.getElementById(L.container),!this._container)throw new Error("Container '"+L.container+"' not found.")}else{if(!(L.container instanceof fa))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return V._update(!1)}),this.on("moveend",function(){return V._update(!1)}),this.on("zoom",function(){return V._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Hr(this,L);var ne=typeof L.hash=="string"&&L.hash||void 0;this._hash=L.hash&&new wa(ne).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,o.extend({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new ua({customAttribution:L.customAttribution})),this.addControl(new io,L.logoPosition),this.on("style.load",function(){V.transform.unmodified&&V.jumpTo(V.style.stylesheet)}),this.on("data",function(ue){V._update(ue.dataType==="style"),V.fire(new o.Event(ue.dataType+"data",ue))}),this.on("dataloading",function(ue){V.fire(new o.Event(ue.dataType+"dataloading",ue))})}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(L,V){if(V===void 0&&(V=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var J=L.onAdd(this);this._controls.push(L);var ne=this._controlPositions[V];return V.indexOf("bottom")!==-1?ne.insertBefore(J,ne.firstChild):ne.appendChild(J),this},G.prototype.removeControl=function(L){if(!L||!L.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var V=this._controls.indexOf(L);return V>-1&&this._controls.splice(V,1),L.onRemove(this),this},G.prototype.hasControl=function(L){return this._controls.indexOf(L)>-1},G.prototype.resize=function(L){var V=this._containerDimensions(),J=V[0],ne=V[1];this._resizeCanvas(J,ne),this.transform.resize(J,ne),this.painter.resize(J,ne);var ue=!this._moving;return ue&&(this.stop(),this.fire(new o.Event("movestart",L)).fire(new o.Event("move",L))),this.fire(new o.Event("resize",L)),ue&&this.fire(new o.Event("moveend",L)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(L){return this.transform.setMaxBounds(o.LngLatBounds.convert(L)),this._update()},G.prototype.setMinZoom=function(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(L){if((L=L??ao)>ao)throw new Error("maxPitch must be less than or equal to 60");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(L){return this.transform.renderWorldCopies=L,this._update()},G.prototype.project=function(L){return this.transform.locationPoint(o.LngLat.convert(L))},G.prototype.unproject=function(L){return this.transform.pointLocation(o.Point.convert(L))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(L,V,J){var ne,ue=this;if(L==="mouseenter"||L==="mouseover"){var xe=!1;return{layer:V,listener:J,delegates:{mousemove:function(De){var Ue=ue.getLayer(V)?ue.queryRenderedFeatures(De.point,{layers:[V]}):[];Ue.length?xe||(xe=!0,J.call(ue,new na(L,ue,De.originalEvent,{features:Ue}))):xe=!1},mouseout:function(){xe=!1}}}}if(L==="mouseleave"||L==="mouseout"){var Le=!1;return{layer:V,listener:J,delegates:{mousemove:function(De){(ue.getLayer(V)?ue.queryRenderedFeatures(De.point,{layers:[V]}):[]).length?Le=!0:Le&&(Le=!1,J.call(ue,new na(L,ue,De.originalEvent)))},mouseout:function(De){Le&&(Le=!1,J.call(ue,new na(L,ue,De.originalEvent)))}}}}return{layer:V,listener:J,delegates:(ne={},ne[L]=function(De){var Ue=ue.getLayer(V)?ue.queryRenderedFeatures(De.point,{layers:[V]}):[];Ue.length&&(De.features=Ue,J.call(ue,De),delete De.features)},ne)}},G.prototype.on=function(L,V,J){if(J===void 0)return B.prototype.on.call(this,L,V);var ne=this._createDelegatedListener(L,V,J);for(var ue in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(ne),ne.delegates)this.on(ue,ne.delegates[ue]);return this},G.prototype.once=function(L,V,J){if(J===void 0)return B.prototype.once.call(this,L,V);var ne=this._createDelegatedListener(L,V,J);for(var ue in ne.delegates)this.once(ue,ne.delegates[ue]);return this},G.prototype.off=function(L,V,J){var ne=this;return J===void 0?B.prototype.off.call(this,L,V):(this._delegatedListeners&&this._delegatedListeners[L]&&function(ue){for(var xe=ue[L],Le=0;Le<xe.length;Le++){var De=xe[Le];if(De.layer===V&&De.listener===J){for(var Ue in De.delegates)ne.off(Ue,De.delegates[Ue]);return xe.splice(Le,1),ne}}}(this._delegatedListeners),this)},G.prototype.queryRenderedFeatures=function(L,V){if(!this.style)return[];var J;if(V!==void 0||L===void 0||L instanceof o.Point||Array.isArray(L)||(V=L,L=void 0),V=V||{},(L=L||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof L[0]=="number")J=[o.Point.convert(L)];else{var ne=o.Point.convert(L[0]),ue=o.Point.convert(L[1]);J=[ne,new o.Point(ue.x,ne.y),ue,new o.Point(ne.x,ue.y),ne]}return this.style.queryRenderedFeatures(J,V,this.transform)},G.prototype.querySourceFeatures=function(L,V){return this.style.querySourceFeatures(L,V)},G.prototype.setStyle=function(L,V){return(V=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},V)).diff!==!1&&V.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,V),this):(this._localIdeographFontFamily=V.localIdeographFontFamily,this._updateStyle(L,V))},G.prototype._getUIString=function(L){var V=this._locale[L];if(V==null)throw new Error("Missing UI string '"+L+"'");return V},G.prototype._updateStyle=function(L,V){return this.style&&(this.style.setEventedParent(null),this.style._remove()),L?(this.style=new Qn(this,V||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L):this.style.loadJSON(L),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Qn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(L,V){var J=this;if(typeof L=="string"){var ne=this._requestManager.normalizeStyleURL(L),ue=this._requestManager.transformRequest(ne,o.ResourceType.Style);o.getJSON(ue,function(xe,Le){xe?J.fire(new o.ErrorEvent(xe)):Le&&J._updateDiff(Le,V)})}else typeof L=="object"&&this._updateDiff(L,V)},G.prototype._updateDiff=function(L,V){try{this.style.setState(L)&&this._update(!0)}catch(J){o.warnOnce("Unable to perform style diff: "+(J.message||J.error||J)+".  Rebuilding the style from scratch."),this._updateStyle(L,V)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(L,V){return this._lazyInitEmptyStyle(),this.style.addSource(L,V),this._update(!0)},G.prototype.isSourceLoaded=function(L){var V=this.style&&this.style.sourceCaches[L];if(V!==void 0)return V.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+L+"'")))},G.prototype.areTilesLoaded=function(){var L=this.style&&this.style.sourceCaches;for(var V in L){var J=L[V]._tiles;for(var ne in J){var ue=J[ne];if(ue.state!=="loaded"&&ue.state!=="errored")return!1}}return!0},G.prototype.addSourceType=function(L,V,J){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,V,J)},G.prototype.removeSource=function(L){return this.style.removeSource(L),this._update(!0)},G.prototype.getSource=function(L){return this.style.getSource(L)},G.prototype.addImage=function(L,V,J){J===void 0&&(J={});var ne=J.pixelRatio;ne===void 0&&(ne=1);var ue=J.sdf;ue===void 0&&(ue=!1);var xe=J.stretchX,Le=J.stretchY,De=J.content;if(this._lazyInitEmptyStyle(),V instanceof ds||Vr&&V instanceof Vr){var Ue=o.browser.getImageData(V),qe=Ue.width,et=Ue.height,lt=Ue.data;this.style.addImage(L,{data:new o.RGBAImage({width:qe,height:et},lt),pixelRatio:ne,stretchX:xe,stretchY:Le,content:De,sdf:ue,version:0})}else{if(V.width===void 0||V.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ft=V.width,xt=V.height,St=V.data,wt=V;this.style.addImage(L,{data:new o.RGBAImage({width:ft,height:xt},new Uint8Array(St)),pixelRatio:ne,stretchX:xe,stretchY:Le,content:De,sdf:ue,version:0,userImage:wt}),wt.onAdd&&wt.onAdd(this,L)}},G.prototype.updateImage=function(L,V){var J=this.style.getImage(L);if(!J)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ne=V instanceof ds||Vr&&V instanceof Vr?o.browser.getImageData(V):V,ue=ne.width,xe=ne.height,Le=ne.data;if(ue===void 0||xe===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ue!==J.data.width||xe!==J.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var De=!(V instanceof ds||Vr&&V instanceof Vr);J.data.replace(Le,De),this.style.updateImage(L,J)},G.prototype.hasImage=function(L){return L?!!this.style.getImage(L):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(L){this.style.removeImage(L)},G.prototype.loadImage=function(L,V){o.getImage(this._requestManager.transformRequest(L,o.ResourceType.Image),V)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(L,V){return this._lazyInitEmptyStyle(),this.style.addLayer(L,V),this._update(!0)},G.prototype.moveLayer=function(L,V){return this.style.moveLayer(L,V),this._update(!0)},G.prototype.removeLayer=function(L){return this.style.removeLayer(L),this._update(!0)},G.prototype.getLayer=function(L){return this.style.getLayer(L)},G.prototype.setLayerZoomRange=function(L,V,J){return this.style.setLayerZoomRange(L,V,J),this._update(!0)},G.prototype.setFilter=function(L,V,J){return J===void 0&&(J={}),this.style.setFilter(L,V,J),this._update(!0)},G.prototype.getFilter=function(L){return this.style.getFilter(L)},G.prototype.setPaintProperty=function(L,V,J,ne){return ne===void 0&&(ne={}),this.style.setPaintProperty(L,V,J,ne),this._update(!0)},G.prototype.getPaintProperty=function(L,V){return this.style.getPaintProperty(L,V)},G.prototype.setLayoutProperty=function(L,V,J,ne){return ne===void 0&&(ne={}),this.style.setLayoutProperty(L,V,J,ne),this._update(!0)},G.prototype.getLayoutProperty=function(L,V){return this.style.getLayoutProperty(L,V)},G.prototype.setLight=function(L,V){return V===void 0&&(V={}),this._lazyInitEmptyStyle(),this.style.setLight(L,V),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(L,V){return this.style.setFeatureState(L,V),this._update()},G.prototype.removeFeatureState=function(L,V){return this.style.removeFeatureState(L,V),this._update()},G.prototype.getFeatureState=function(L){return this.style.getFeatureState(L)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var L=0,V=0;return this._container&&(L=this._container.clientWidth||400,V=this._container.clientHeight||300),[L,V]},G.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var L=this._container;L.classList.add("mapboxgl-map"),(this._missingCSSCanary=_.create("div","mapboxgl-canary",L)).style.visibility="hidden",this._detectMissingCSS();var V=this._canvasContainer=_.create("div","mapboxgl-canvas-container",L);this._interactive&&V.classList.add("mapboxgl-interactive"),this._canvas=_.create("canvas","mapboxgl-canvas",V),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var J=this._containerDimensions();this._resizeCanvas(J[0],J[1]);var ne=this._controlContainer=_.create("div","mapboxgl-control-container",L),ue=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(xe){ue[xe]=_.create("div","mapboxgl-ctrl-"+xe,ne)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},G.prototype._resizeCanvas=function(L,V){var J=o.browser.devicePixelRatio||1;this._canvas.width=J*L,this._canvas.height=J*V,this._canvas.style.width=L+"px",this._canvas.style.height=V+"px"},G.prototype._setupPainter=function(){var L=o.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),V=this._canvas.getContext("webgl",L)||this._canvas.getContext("experimental-webgl",L);V?(this.painter=new $r(V,this.transform),o.webpSupported.testSupport(V)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(L){L.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:L}))},G.prototype._contextRestored=function(L){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:L}))},G.prototype._onMapScroll=function(L){if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(L){return this.style?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(L){return this._update(),this._renderTaskQueue.add(L)},G.prototype._cancelRenderFrame=function(L){this._renderTaskQueue.remove(L)},G.prototype._render=function(L){var V,J=this,ne=0,ue=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(V=ue.createQueryEXT(),ue.beginQueryEXT(ue.TIME_ELAPSED_EXT,V),ne=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),!this._removed){var xe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Le=this.transform.zoom,De=o.browser.now();this.style.zoomHistory.update(Le,De);var Ue=new o.EvaluationParameters(Le,{now:De,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qe=Ue.crossFadingFactor();qe===1&&qe===this._crossFadingFactor||(xe=!0,this._crossFadingFactor=qe),this.style.update(Ue)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||xe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var et=o.browser.now()-ne;ue.endQueryEXT(ue.TIME_ELAPSED_EXT,V),setTimeout(function(){var xt=ue.getQueryObjectEXT(V,ue.QUERY_RESULT_EXT)/1e6;ue.deleteQueryEXT(V),J.fire(new o.Event("gpu-timing-frame",{cpuTime:et,gpuTime:xt}))},50)}if(this.listens("gpu-timing-layer")){var lt=this.painter.collectGpuTimers();setTimeout(function(){var xt=J.painter.queryGpuTimers(lt);J.fire(new o.Event("gpu-timing-layer",{layerTimes:xt}))},50)}var ft=this._sourcesDirty||this._styleDirty||this._placementDirty;return ft||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ft||(this._fullyLoaded=!0),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var L=0,V=this._controls;L<V.length;L+=1)V[L].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var J=this.painter.context.gl.getExtension("WEBGL_lose_context");J&&J.loseContext&&J.loseContext(),gs(this._canvasContainer),gs(this._controlContainer),gs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},G.prototype.triggerRepaint=function(){var L=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(V){L._frame=null,L._render(V)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(L){this._trackResize&&this.resize({originalEvent:L})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(L){this._showPadding!==L&&(this._showPadding=L,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(L){this._vertices=L,this._update()},G.prototype._setCacheLimits=function(L,V){o.setCacheLimits(L,V)},q.version.get=function(){return o.version},Object.defineProperties(G.prototype,q),G}(Gi);function gs(B){B.parentNode&&B.parentNode.removeChild(B)}var vs={showCompass:!0,showZoom:!0,visualizePitch:!1},Ga=function(B){var G=this;this.options=o.extend({},vs,B),this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return G._map.zoomIn({},{originalEvent:q})}),_.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return G._map.zoomOut({},{originalEvent:q})}),_.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:q}):G._map.resetNorth({},{originalEvent:q})}),this._compassIcon=_.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ga.prototype._updateZoomButtons=function(){var B=this._map.getZoom(),G=B===this._map.getMaxZoom(),q=B===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=q,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",q.toString())},Ga.prototype._rotateCompassArrow=function(){var B=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=B},Ga.prototype.onAdd=function(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new li(this._map,this._compass,this.options.visualizePitch)),this._container},Ga.prototype.onRemove=function(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ga.prototype._createButton=function(B,G){var q=_.create("button",B,this._container);return q.type="button",q.addEventListener("click",G),q},Ga.prototype._setButtonTitle=function(B,G){var q=this._map._getUIString("NavigationControl."+G);B.title=q,B.setAttribute("aria-label",q)};var li=function(B,G,q){q===void 0&&(q=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new mo({clickTolerance:B.dragRotate._mouseRotate._clickTolerance}),this.map=B,q&&(this.mousePitch=new Oa({clickTolerance:B.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener(G,"mousedown",this.mousedown),_.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(G,"touchmove",this.touchmove),_.addEventListener(G,"touchend",this.touchend),_.addEventListener(G,"touchcancel",this.reset)};function is(B,G,q){if(B=new o.LngLat(B.lng,B.lat),G){var L=new o.LngLat(B.lng-360,B.lat),V=new o.LngLat(B.lng+360,B.lat),J=q.locationPoint(B).distSqr(G);q.locationPoint(L).distSqr(G)<J?B=L:q.locationPoint(V).distSqr(G)<J&&(B=V)}for(;Math.abs(B.lng-q.center.lng)>180;){var ne=q.locationPoint(B);if(ne.x>=0&&ne.y>=0&&ne.x<=q.width&&ne.y<=q.height)break;B.lng>q.center.lng?B.lng-=360:B.lng+=360}return B}li.prototype.down=function(B,G){this.mouseRotate.mousedown(B,G),this.mousePitch&&this.mousePitch.mousedown(B,G),_.disableDrag()},li.prototype.move=function(B,G){var q=this.map,L=this.mouseRotate.mousemoveWindow(B,G);if(L&&L.bearingDelta&&q.setBearing(q.getBearing()+L.bearingDelta),this.mousePitch){var V=this.mousePitch.mousemoveWindow(B,G);V&&V.pitchDelta&&q.setPitch(q.getPitch()+V.pitchDelta)}},li.prototype.off=function(){var B=this.element;_.removeEventListener(B,"mousedown",this.mousedown),_.removeEventListener(B,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(B,"touchmove",this.touchmove),_.removeEventListener(B,"touchend",this.touchend),_.removeEventListener(B,"touchcancel",this.reset),this.offTemp()},li.prototype.offTemp=function(){_.enableDrag(),_.removeEventListener(o.window,"mousemove",this.mousemove),_.removeEventListener(o.window,"mouseup",this.mouseup)},li.prototype.mousedown=function(B){this.down(o.extend({},B,{ctrlKey:!0,preventDefault:function(){return B.preventDefault()}}),_.mousePos(this.element,B)),_.addEventListener(o.window,"mousemove",this.mousemove),_.addEventListener(o.window,"mouseup",this.mouseup)},li.prototype.mousemove=function(B){this.move(B,_.mousePos(this.element,B))},li.prototype.mouseup=function(B){this.mouseRotate.mouseupWindow(B),this.mousePitch&&this.mousePitch.mouseupWindow(B),this.offTemp()},li.prototype.touchstart=function(B){B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return B.preventDefault()}},this._startPos))},li.prototype.touchmove=function(B){B.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,B.targetTouches)[0],this.move({preventDefault:function(){return B.preventDefault()}},this._lastPos))},li.prototype.touchend=function(B){B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},li.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var kr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cr(B,G,q){var L=B.classList;for(var V in kr)L.remove("mapboxgl-"+q+"-anchor-"+V);L.add("mapboxgl-"+q+"-anchor-"+G)}var Ta,oo=function(B){function G(q,L){if(B.call(this),(q instanceof o.window.HTMLElement||L)&&(q=o.extend({element:q},L)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._scale=q&&q.scale||1,this._draggable=q&&q.draggable||!1,this._clickTolerance=q&&q.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&q.pitchAlignment!=="auto"?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=o.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");var V=_.createNS("http://www.w3.org/2000/svg","svg");V.setAttributeNS(null,"display","block"),V.setAttributeNS(null,"height","41px"),V.setAttributeNS(null,"width","27px"),V.setAttributeNS(null,"viewBox","0 0 27 41");var J=_.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"stroke","none"),J.setAttributeNS(null,"stroke-width","1"),J.setAttributeNS(null,"fill","none"),J.setAttributeNS(null,"fill-rule","evenodd");var ne=_.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill-rule","nonzero");var ue=_.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ue.setAttributeNS(null,"fill","#000000");for(var xe=0,Le=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];xe<Le.length;xe+=1){var De=Le[xe],Ue=_.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",De.rx),Ue.setAttributeNS(null,"ry",De.ry),ue.appendChild(Ue)}var qe=_.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill",this._color);var et=_.createNS("http://www.w3.org/2000/svg","path");et.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qe.appendChild(et);var lt=_.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"opacity","0.25"),lt.setAttributeNS(null,"fill","#000000");var ft=_.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),lt.appendChild(ft);var xt=_.createNS("http://www.w3.org/2000/svg","g");xt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),xt.setAttributeNS(null,"fill","#FFFFFF");var St=_.createNS("http://www.w3.org/2000/svg","g");St.setAttributeNS(null,"transform","translate(8.0, 8.0)");var wt=_.createNS("http://www.w3.org/2000/svg","circle");wt.setAttributeNS(null,"fill","#000000"),wt.setAttributeNS(null,"opacity","0.25"),wt.setAttributeNS(null,"cx","5.5"),wt.setAttributeNS(null,"cy","5.5"),wt.setAttributeNS(null,"r","5.4999962");var Dt=_.createNS("http://www.w3.org/2000/svg","circle");Dt.setAttributeNS(null,"fill","#FFFFFF"),Dt.setAttributeNS(null,"cx","5.5"),Dt.setAttributeNS(null,"cy","5.5"),Dt.setAttributeNS(null,"r","5.4999962"),St.appendChild(wt),St.appendChild(Dt),ne.appendChild(ue),ne.appendChild(qe),ne.appendChild(lt),ne.appendChild(xt),ne.appendChild(St),V.appendChild(ne),V.setAttributeNS(null,"height",41*this._scale+"px"),V.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(V),this._offset=o.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Et){Et.preventDefault()}),this._element.addEventListener("mousedown",function(Et){Et.preventDefault()}),Cr(this._element,this._anchor,"marker"),this._popup=null}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(q){return this._lngLat=o.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var L=13.5,V=Math.sqrt(Math.pow(L,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[V,-1*(24.6+V)],"bottom-right":[-V,-1*(24.6+V)],left:[L,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(q){var L=q.code,V=q.charCode||q.keyCode;L!=="Space"&&L!=="Enter"&&V!==32&&V!==13||this.togglePopup()},G.prototype._onMapClick=function(q){var L=q.originalEvent.target,V=this._element;this._popup&&(L===V||V.contains(L))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},G.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=is(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(L="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var V="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?V="rotateX(0deg)":this._pitchAlignment==="map"&&(V="rotateX("+this._map.getPitch()+"deg)"),q&&q.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,kr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+V+" "+L)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(q){return this._offset=o.Point.convert(q),this._update(),this},G.prototype._onMove=function(q){if(!this._isDragging){var L=this._clickTolerance||this._map._clickTolerance;this._isDragging=q.point.dist(this._pointerdownPos)>=L}this._isDragging&&(this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._pointerdownPos=q.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&q!=="auto"?q:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(o.Evented),bo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Li=0,so=!1,Qr=function(B){function G(q){B.call(this),this.options=o.extend({},bo,q),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(q){return this._map=q,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),L=this._setupUI,Ta!==void 0?L(Ta):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(V){Ta=V.state!=="denied",L(Ta)}):(Ta=!!o.window.navigator.geolocation,L(Ta)),this._container;var L},G.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Li=0,so=!1},G.prototype._isOutOfMapMaxBounds=function(q){var L=this._map.getMaxBounds(),V=q.coords;return L&&(V.longitude<L.getWest()||V.longitude>L.getEast()||V.latitude<L.getSouth()||V.latitude>L.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(q),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",q)),this._finish()}},G.prototype._updateCamera=function(q){var L=new o.LngLat(q.coords.longitude,q.coords.latitude),V=q.coords.accuracy,J=this._map.getBearing(),ne=o.extend({bearing:J},this.options.fitBoundsOptions);this._map.fitBounds(L.toBounds(V),ne,{geolocateSource:!0})},G.prototype._updateMarker=function(q){if(q){var L=new o.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(L).addTo(this._map),this._userLocationDotMarker.setLngLat(L).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,L=this._map.unproject([0,q]),V=this._map.unproject([1,q]),J=L.distanceTo(V),ne=Math.ceil(2*this._accuracy/J);this._circleElement.style.width=ne+"px",this._circleElement.style.height=ne+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var L=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=L,this._geolocateButton.setAttribute("aria-label",L),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(q.code===3&&so)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",q)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(q){var L=this;if(this._container.addEventListener("contextmenu",function(ne){return ne.preventDefault()}),this._geolocateButton=_.create("button","mapboxgl-ctrl-geolocate",this._container),_.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",q===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var V=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=V,this._geolocateButton.setAttribute("aria-label",V)}else{var J=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=J,this._geolocateButton.setAttribute("aria-label",J)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new oo(this._dotElement),this._circleElement=_.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ne){var ue=ne.originalEvent&&ne.originalEvent.type==="resize";ne.geolocateSource||L._watchState!=="ACTIVE_LOCK"||ue||(L._watchState="BACKGROUND",L._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),L._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),L.fire(new o.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Li--,so=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Li>1?(q={maximumAge:6e5,timeout:0},so=!0):(q=this.options.positionOptions,so=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(o.Evented),hl={maxWidth:100,unit:"metric"},ka=function(B){this.options=o.extend({},hl,B),o.bindAll(["_onMove","setUnit"],this)};function ni(B,G,q){var L=q&&q.maxWidth||100,V=B._container.clientHeight/2,J=B.unproject([0,V]),ne=B.unproject([L,V]),ue=J.distanceTo(ne);if(q&&q.unit==="imperial"){var xe=3.2808*ue;xe>5280?di(G,L,xe/5280,B._getUIString("ScaleControl.Miles")):di(G,L,xe,B._getUIString("ScaleControl.Feet"))}else q&&q.unit==="nautical"?di(G,L,ue/1852,B._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?di(G,L,ue/1e3,B._getUIString("ScaleControl.Kilometers")):di(G,L,ue,B._getUIString("ScaleControl.Meters"))}function di(B,G,q,L){var V,J,ne,ue=(V=q,(J=Math.pow(10,(""+Math.floor(V)).length-1))*((ne=V/J)>=10?10:ne>=5?5:ne>=3?3:ne>=2?2:ne>=1?1:function(Le){var De=Math.pow(10,Math.ceil(-Math.log(Le)/Math.LN10));return Math.round(Le*De)/De}(ne))),xe=ue/q;B.style.width=G*xe+"px",B.innerHTML=ue+"&nbsp;"+L}ka.prototype.getDefaultPosition=function(){return"bottom-left"},ka.prototype._onMove=function(){ni(this._map,this._container,this.options)},ka.prototype.onAdd=function(B){return this._map=B,this._container=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ka.prototype.onRemove=function(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ka.prototype.setUnit=function(B){this.options.unit=B,ni(this._map,this._container,this.options)};var va=function(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof o.window.HTMLElement?this._container=B.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};va.prototype.onAdd=function(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},va.prototype.onRemove=function(){_.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},va.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},va.prototype._setupUI=function(){var B=this._fullscreenButton=_.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);_.create("span","mapboxgl-ctrl-icon",B).setAttribute("aria-hidden",!0),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},va.prototype._updateTitle=function(){var B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B},va.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},va.prototype._isFullscreen=function(){return this._fullscreen},va.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},va.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var jo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Qs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Xe=function(B){function G(q){B.call(this),this.options=o.extend(Object.create(jo),q),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(q){return this._lngLat=o.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(q){return this.setDOMContent(o.window.document.createTextNode(q))},G.prototype.setHTML=function(q){var L,V=o.window.document.createDocumentFragment(),J=o.window.document.createElement("body");for(J.innerHTML=q;L=J.firstChild;)V.appendChild(L);return this.setDOMContent(V)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},G.prototype.setDOMContent=function(q){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(q),this._createCloseButton(),this._update(),this._focusFirstElement(),this},G.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},G.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},G.prototype.setOffset=function(q){return this.options.offset=q,this._update(),this},G.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},G.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=_.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(q){this._update(q.point)},G.prototype._onMouseMove=function(q){this._update(q.point)},G.prototype._onDrag=function(q){this._update(q.point)},G.prototype._update=function(q){var L=this,V=this._lngLat||this._trackPointer;if(this._map&&V&&this._content&&(this._container||(this._container=_.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=_.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(qe){return L._container.classList.add(qe)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=is(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var J=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),ne=this.options.anchor,ue=$e(this.options.offset);if(!ne){var xe,Le=this._container.offsetWidth,De=this._container.offsetHeight;xe=J.y+ue.bottom.y<De?["top"]:J.y>this._map.transform.height-De?["bottom"]:[],J.x<Le/2?xe.push("left"):J.x>this._map.transform.width-Le/2&&xe.push("right"),ne=xe.length===0?"bottom":xe.join("-")}var Ue=J.add(ue[ne]).round();_.setTransform(this._container,kr[ne]+" translate("+Ue.x+"px,"+Ue.y+"px)"),Cr(this._container,ne,"popup")}},G.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var q=this._container.querySelector(Qs);q&&q.focus()}},G.prototype._onClose=function(){this.remove()},G}(o.Evented);function $e(B){if(B){if(typeof B=="number"){var G=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new o.Point(0,0),top:new o.Point(0,B),"top-left":new o.Point(G,G),"top-right":new o.Point(-G,G),bottom:new o.Point(0,-B),"bottom-left":new o.Point(G,-G),"bottom-right":new o.Point(-G,-G),left:new o.Point(B,0),right:new o.Point(-B,0)}}if(B instanceof o.Point||Array.isArray(B)){var q=o.Point.convert(B);return{center:q,top:q,"top-left":q,"top-right":q,bottom:q,"bottom-left":q,"bottom-right":q,left:q,right:q}}return{center:o.Point.convert(B.center||[0,0]),top:o.Point.convert(B.top||[0,0]),"top-left":o.Point.convert(B["top-left"]||[0,0]),"top-right":o.Point.convert(B["top-right"]||[0,0]),bottom:o.Point.convert(B.bottom||[0,0]),"bottom-left":o.Point.convert(B["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(B["bottom-right"]||[0,0]),left:o.Point.convert(B.left||[0,0]),right:o.Point.convert(B.right||[0,0])}}return $e(new o.Point(0,0))}var at={version:o.version,supported:T,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Ha,NavigationControl:Ga,GeolocateControl:Qr,AttributionControl:ua,ScaleControl:ka,FullscreenControl:va,Popup:Xe,Marker:oo,Style:Qn,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){gt().acquire(nt)},clearPrewarmedResources:function(){var B=ct;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(nt),ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(B){o.config.ACCESS_TOKEN=B},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(B){o.config.API_URL=B},get workerCount(){return Ge.workerCount},set workerCount(B){Ge.workerCount=B},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){o.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage:function(B){o.clearTileCache(B)},workerUrl:""};return at}),M}()},3108:function(ee,R,e){ee.exports=e(26099)},26099:function(ee,R,e){var M=e(64928),k=e(32420),o=e(51160),T=e(76752),_=e(55616),p=e(31264),s=e(47520),t=e(18400),i=e(72512),r=e(76244);function n(a,l){for(var u=l[0],h=l[1],c=1/(l[2]-u),x=1/(l[3]-h),d=new Array(a.length),v=0,g=a.length/2;v<g;v++)d[2*v]=k((a[2*v]-u)*c,0,1),d[2*v+1]=k((a[2*v+1]-h)*x,0,1);return d}ee.exports=function(a,l){l||(l={}),a=s(a,"float64"),l=_(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=p(l.maxDepth,255),h=p(l.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var c,x=n(a,h),d=a.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?c=new(i(l.dtype))(d):l.dtype&&(c=l.dtype,Array.isArray(c)&&(c.length=d));for(var v=0;v<d;++v)c[v]=v;var g=[],y=[],m=[],b=[];(function D(U,I,N,W,F,j){if(!W.length)return null;var H=g[F]||(g[F]=[]),te=m[F]||(m[F]=[]),Q=y[F]||(y[F]=[]),$=H.length;if(++F>u||j>1073741824){for(var K=0;K<W.length;K++)H.push(W[K]),te.push(j),Q.push(null,null,null,null);return $}if(H.push(W[0]),te.push(j),W.length<=1)return Q.push(null,null,null,null),$;for(var X=.5*N,Y=U+X,re=I+X,se=[],ae=[],ce=[],fe=[],he=1,ve=W.length;he<ve;he++){var ye=W[he],me=x[2*ye],Me=x[2*ye+1];me<Y?Me<re?se.push(ye):ae.push(ye):Me<re?ce.push(ye):fe.push(ye)}return j<<=2,Q.push(D(U,I,X,se,F,j),D(U,re,X,ae,F,j+1),D(Y,I,X,ce,F,j+2),D(Y,re,X,fe,F,j+3)),$})(0,0,1,c,0,1);for(var f=0,S=0;S<g.length;S++){var w=g[S];if(c.set)c.set(w,f);else for(var E=0,O=w.length;E<O;E++)c[E+f]=w[E];var C=f+g[S].length;b[S]=[f,C],f=C}return c.range=function(){for(var D,U=[],I=arguments.length;I--;)U[I]=arguments[I];if(t(U[U.length-1])){var N=U.pop();U.length||N.x==null&&N.l==null&&N.left==null||(U=[N],D={}),D=_(N,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else D={};U.length||(U=h);var W,F=o.apply(void 0,U),j=[Math.min(F.x,F.x+F.width),Math.min(F.y,F.y+F.height),Math.max(F.x,F.x+F.width),Math.max(F.y,F.y+F.height)],H=j[0],te=j[1],Q=j[2],$=j[3],K=n([H,te,Q,$],h),X=K[0],Y=K[1],re=K[2],se=K[3],ae=p(D.level,g.length);if(D.d!=null&&(typeof D.d=="number"?W=[D.d,D.d]:D.d.length&&(W=D.d),ae=Math.min(Math.max(Math.ceil(-r(Math.abs(W[0])/(h[2]-h[0]))),Math.ceil(-r(Math.abs(W[1])/(h[3]-h[1])))),ae)),ae=Math.min(ae,g.length),D.lod)return function(fe,he,ve,ye,me){for(var Me=[],Pe=0;Pe<me;Pe++){var ge=m[Pe],oe=b[Pe][0],ie=P(fe,he,Pe),de=P(ve,ye,Pe),Se=M.ge(ge,ie),_e=M.gt(ge,de,Se,ge.length-1);Me[Pe]=[Se+oe,_e+oe]}return Me}(X,Y,re,se,ae);var ce=[];return function fe(he,ve,ye,me,Me,Pe){if(Me!==null&&Pe!==null&&!(X>he+ye||Y>ve+ye||re<he||se<ve||me>=ae||Me===Pe)){var ge=g[me];Pe===void 0&&(Pe=ge.length);for(var oe=Me;oe<Pe;oe++){var ie=ge[oe],de=a[2*ie],Se=a[2*ie+1];de>=H&&de<=Q&&Se>=te&&Se<=$&&ce.push(ie)}var _e=y[me],we=_e[4*Me+0],Ae=_e[4*Me+1],Oe=_e[4*Me+2],ze=_e[4*Me+3],pe=function(Ie,Ee){for(var Be=null,Ve=0;Be===null;)if(Be=Ie[4*Ee+Ve],++Ve>Ie.length)return null;return Be}(_e,Me+1),be=.5*ye,ke=me+1;fe(he,ve,be,ke,we,Ae||Oe||ze||pe),fe(he,ve+be,be,ke,Ae,Oe||ze||pe),fe(he+be,ve,be,ke,Oe,ze||pe),fe(he+be,ve+be,be,ke,ze,pe)}}(0,0,1,0,0,1),ce},c;function P(D,U,I){for(var N=1,W=.5,F=.5,j=.5,H=0;H<I;H++)N<<=2,N+=D<W?U<F?0:1:U<F?2:3,j*=.5,W+=D<W?-j:j,F+=U<F?-j:j;return N}}},40440:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(3256),k=6378137;function o(p){var s=0;if(p&&p.length>0){s+=Math.abs(T(p[0]));for(var t=1;t<p.length;t++)s-=Math.abs(T(p[t]))}return s}function T(p){var s,t,i,r,n,a,l=0,u=p.length;if(u>2){for(a=0;a<u;a++)a===u-2?(i=u-2,r=u-1,n=0):a===u-1?(i=u-1,r=0,n=1):(i=a,r=a+1,n=a+2),s=p[i],t=p[r],l+=(_(p[n][0])-_(s[0]))*Math.sin(_(t[1]));l=l*k*k/2}return l}function _(p){return p*Math.PI/180}R.default=function(p){return M.geomReduce(p,function(s,t){return s+function(i){var r,n=0;switch(i.type){case"Polygon":return o(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)n+=o(i.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(ee,R){function e(a,l,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=l||{},h.geometry=a,h}function M(a,l,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var h=0,c=a;h<c.length;h++){var x=c[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function o(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function _(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function p(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function s(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:1.0936*R.earthRadius},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:1.0936133},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,l,u){switch(a){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return p(l).geometry;case"MultiLineString":return _(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},R.point=M,R.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return M(h,l)}),u)},R.polygon=k,R.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,l)}),u)},R.lineString=o,R.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return o(h,l)}),u)},R.featureCollection=T,R.multiLineString=_,R.multiPoint=p,R.multiPolygon=s,R.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},R.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},R.radiansToLength=t,R.lengthToRadians=i,R.lengthToDegrees=function(a,l){return r(i(a,l))},R.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},R.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[l];if(!h)throw new Error("invalid original units");var c=R.areaFactors[u];if(!c)throw new Error("invalid final units");return a/h*c},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!n(l))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},3256:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(46284);function k(i,r,n){if(i!==null)for(var a,l,u,h,c,x,d,v,g=0,y=0,m=i.type,b=m==="FeatureCollection",f=m==="Feature",S=b?i.features.length:1,w=0;w<S;w++){c=(v=!!(d=b?i.features[w].geometry:f?i.geometry:i)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<c;E++){var O=0,C=0;if((h=v?d.geometries[E]:d)!==null){x=h.coordinates;var P=h.type;switch(g=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,y,w,O,C)===!1)return!1;y++,O++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],y,w,O,C)===!1)return!1;y++,P==="MultiPoint"&&O++}P==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(r(x[a][l],y,w,O,C)===!1)return!1;y++}P==="MultiLineString"&&O++,P==="Polygon"&&C++}P==="Polygon"&&O++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-g;u++){if(r(x[a][l][u],y,w,O,C)===!1)return!1;y++}C++}O++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function _(i,r){var n,a,l,u,h,c,x,d,v,g,y=0,m=i.type==="FeatureCollection",b=i.type==="Feature",f=m?i.features.length:1;for(n=0;n<f;n++){for(c=m?i.features[n].geometry:b?i.geometry:i,d=m?i.features[n].properties:b?i.properties:{},v=m?i.features[n].bbox:b?i.bbox:void 0,g=m?i.features[n].id:b?i.id:void 0,h=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<h;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,y,d,v,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],y,d,v,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,y,d,v,g)===!1)return!1;y++}}function p(i,r){_(i,function(n,a,l,u,h){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(n,l,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<n.coordinates.length;d++){var v={type:c,coordinates:n.coordinates[d]};if(r(M.feature(v,l),a,d)===!1)return!1}})}function s(i,r){p(i,function(n,a,l){var u=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var c,x=0,d=0,v=0;return k(n,function(g,y,m,b,f){if(c===void 0||a>x||b>d||f>v)return c=g,x=a,d=b,v=f,void(u=0);var S=M.lineString([c,g],n.properties);if(r(S,a,l,f,u)===!1)return!1;u++,c=g})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,l){if(n.geometry!==null){var u=n.geometry.type,h=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<h.length;c++)if(r(M.lineString(h[c],n.properties),a,l,c)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(i,r,n,a){var l=n;return k(i,function(u,h,c,x,d){l=h===0&&n===void 0?u:r(l,u,h,c,x,d)},a),l},R.propEach=o,R.propReduce=function(i,r,n){var a=n;return o(i,function(l,u){a=u===0&&n===void 0?l:r(a,l,u)}),a},R.featureEach=T,R.featureReduce=function(i,r,n){var a=n;return T(i,function(l,u){a=u===0&&n===void 0?l:r(a,l,u)}),a},R.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},R.geomEach=_,R.geomReduce=function(i,r,n){var a=n;return _(i,function(l,u,h,c,x){a=u===0&&n===void 0?l:r(a,l,u,h,c,x)}),a},R.flattenEach=p,R.flattenReduce=function(i,r,n){var a=n;return p(i,function(l,u,h){a=u===0&&h===0&&n===void 0?l:r(a,l,u,h)}),a},R.segmentEach=s,R.segmentReduce=function(i,r,n){var a=n,l=!1;return s(i,function(u,h,c,x,d){a=l===!1&&n===void 0?u:r(a,u,h,c,x,d),l=!0}),a},R.lineEach=t,R.lineReduce=function(i,r,n){var a=n;return t(i,function(l,u,h,c){a=u===0&&n===void 0?l:r(a,l,u,h,c)}),a},R.findSegment=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,l=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),M.lineString([x[h],x[h+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),M.lineString([x[u][h],x[u][h+1]],c,r);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),M.lineString([x[l][h],x[l][h+1]],c,r);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h-1),M.lineString([x[l][u][h],x[l][u][h+1]],c,r)}throw new Error("geojson is invalid")},R.findPoint=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,l=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return M.point(x,c,r);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,r);case"LineString":return h<0&&(h=x.length+h),M.point(x[h],c,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),M.point(x[u][h],c,r);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),M.point(x[l][h],c,r);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h),M.point(x[l][u][h],c,r)}throw new Error("geojson is invalid")}},42428:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(84880);function k(o){var T=[1/0,1/0,-1/0,-1/0];return M.coordEach(o,function(_){T[0]>_[0]&&(T[0]=_[0]),T[1]>_[1]&&(T[1]=_[1]),T[2]<_[0]&&(T[2]=_[0]),T[3]<_[1]&&(T[3]=_[1])}),T}k.default=k,R.default=k},76796:function(ee,R){function e(a,l,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=l||{},h.geometry=a,h}function M(a,l,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var h=0,c=a;h<c.length;h++){var x=c[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function o(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function _(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function p(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function s(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:1.0936*R.earthRadius},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:1.0936133},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,l,u){switch(a){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return p(l).geometry;case"MultiLineString":return _(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},R.point=M,R.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return M(h,l)}),u)},R.polygon=k,R.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,l)}),u)},R.lineString=o,R.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return o(h,l)}),u)},R.featureCollection=T,R.multiLineString=_,R.multiPoint=p,R.multiPolygon=s,R.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},R.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},R.radiansToLength=t,R.lengthToRadians=i,R.lengthToDegrees=function(a,l){return r(i(a,l))},R.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},R.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[l];if(!h)throw new Error("invalid original units");var c=R.areaFactors[u];if(!c)throw new Error("invalid final units");return a/h*c},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!n(l))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},84880:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(76796);function k(i,r,n){if(i!==null)for(var a,l,u,h,c,x,d,v,g=0,y=0,m=i.type,b=m==="FeatureCollection",f=m==="Feature",S=b?i.features.length:1,w=0;w<S;w++){c=(v=!!(d=b?i.features[w].geometry:f?i.geometry:i)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<c;E++){var O=0,C=0;if((h=v?d.geometries[E]:d)!==null){x=h.coordinates;var P=h.type;switch(g=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,y,w,O,C)===!1)return!1;y++,O++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],y,w,O,C)===!1)return!1;y++,P==="MultiPoint"&&O++}P==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(r(x[a][l],y,w,O,C)===!1)return!1;y++}P==="MultiLineString"&&O++,P==="Polygon"&&C++}P==="Polygon"&&O++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-g;u++){if(r(x[a][l][u],y,w,O,C)===!1)return!1;y++}C++}O++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function _(i,r){var n,a,l,u,h,c,x,d,v,g,y=0,m=i.type==="FeatureCollection",b=i.type==="Feature",f=m?i.features.length:1;for(n=0;n<f;n++){for(c=m?i.features[n].geometry:b?i.geometry:i,d=m?i.features[n].properties:b?i.properties:{},v=m?i.features[n].bbox:b?i.bbox:void 0,g=m?i.features[n].id:b?i.id:void 0,h=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<h;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,y,d,v,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],y,d,v,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,y,d,v,g)===!1)return!1;y++}}function p(i,r){_(i,function(n,a,l,u,h){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(n,l,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<n.coordinates.length;d++){var v={type:c,coordinates:n.coordinates[d]};if(r(M.feature(v,l),a,d)===!1)return!1}})}function s(i,r){p(i,function(n,a,l){var u=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var c,x=0,d=0,v=0;return k(n,function(g,y,m,b,f){if(c===void 0||a>x||b>d||f>v)return c=g,x=a,d=b,v=f,void(u=0);var S=M.lineString([c,g],n.properties);if(r(S,a,l,f,u)===!1)return!1;u++,c=g})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,l){if(n.geometry!==null){var u=n.geometry.type,h=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<h.length;c++)if(r(M.lineString(h[c],n.properties),a,l,c)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(i,r,n,a){var l=n;return k(i,function(u,h,c,x,d){l=h===0&&n===void 0?u:r(l,u,h,c,x,d)},a),l},R.propEach=o,R.propReduce=function(i,r,n){var a=n;return o(i,function(l,u){a=u===0&&n===void 0?l:r(a,l,u)}),a},R.featureEach=T,R.featureReduce=function(i,r,n){var a=n;return T(i,function(l,u){a=u===0&&n===void 0?l:r(a,l,u)}),a},R.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},R.geomEach=_,R.geomReduce=function(i,r,n){var a=n;return _(i,function(l,u,h,c,x){a=u===0&&n===void 0?l:r(a,l,u,h,c,x)}),a},R.flattenEach=p,R.flattenReduce=function(i,r,n){var a=n;return p(i,function(l,u,h){a=u===0&&h===0&&n===void 0?l:r(a,l,u,h)}),a},R.segmentEach=s,R.segmentReduce=function(i,r,n){var a=n,l=!1;return s(i,function(u,h,c,x,d){a=l===!1&&n===void 0?u:r(a,u,h,c,x,d),l=!0}),a},R.lineEach=t,R.lineReduce=function(i,r,n){var a=n;return t(i,function(l,u,h,c){a=u===0&&n===void 0?l:r(a,l,u,h,c)}),a},R.findSegment=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,l=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),M.lineString([x[h],x[h+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),M.lineString([x[u][h],x[u][h+1]],c,r);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),M.lineString([x[l][h],x[l][h+1]],c,r);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h-1),M.lineString([x[l][u][h],x[l][u][h+1]],c,r)}throw new Error("geojson is invalid")},R.findPoint=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,l=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return M.point(x,c,r);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,r);case"LineString":return h<0&&(h=x.length+h),M.point(x[h],c,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),M.point(x[u][h],c,r);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),M.point(x[l][h],c,r);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h),M.point(x[l][u][h],c,r)}throw new Error("geojson is invalid")}},77844:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(43752),k=e(49840);R.default=function(o,T){T===void 0&&(T={});var _=0,p=0,s=0;return M.coordEach(o,function(t){_+=t[0],p+=t[1],s++}),k.point([_/s,p/s],T.properties)}},49840:function(ee,R){function e(a,l,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=l||{},h.geometry=a,h}function M(a,l,u){return u===void 0&&(u={}),e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var h=0,c=a;h<c.length;h++){var x=c[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function o(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function _(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function p(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function s(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:R.earthRadius/1.0936},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:.91441111923921},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,l,u){switch(a){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return p(l).geometry;case"MultiLineString":return _(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},R.point=M,R.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return M(h,l)}),u)},R.polygon=k,R.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,l)}),u)},R.lineString=o,R.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return o(h,l)}),u)},R.featureCollection=T,R.multiLineString=_,R.multiPoint=p,R.multiPolygon=s,R.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},R.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},R.radiansToLength=t,R.lengthToRadians=i,R.lengthToDegrees=function(a,l){return r(i(a,l))},R.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},R.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[l];if(!h)throw new Error("invalid original units");var c=R.areaFactors[u];if(!c)throw new Error("invalid final units");return a/h*c},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!n(l))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},R.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},R.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},R.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},R.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},R.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},R.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},R.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(49840);function k(i,r,n){if(i!==null)for(var a,l,u,h,c,x,d,v,g=0,y=0,m=i.type,b=m==="FeatureCollection",f=m==="Feature",S=b?i.features.length:1,w=0;w<S;w++){c=(v=!!(d=b?i.features[w].geometry:f?i.geometry:i)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<c;E++){var O=0,C=0;if((h=v?d.geometries[E]:d)!==null){x=h.coordinates;var P=h.type;switch(g=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(x,y,w,O,C)===!1)return!1;y++,O++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(r(x[a],y,w,O,C)===!1)return!1;y++,P==="MultiPoint"&&O++}P==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(r(x[a][l],y,w,O,C)===!1)return!1;y++}P==="MultiLineString"&&O++,P==="Polygon"&&C++}P==="Polygon"&&O++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-g;u++){if(r(x[a][l][u],y,w,O,C)===!1)return!1;y++}C++}O++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function T(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function _(i,r){var n,a,l,u,h,c,x,d,v,g,y=0,m=i.type==="FeatureCollection",b=i.type==="Feature",f=m?i.features.length:1;for(n=0;n<f;n++){for(c=m?i.features[n].geometry:b?i.geometry:i,d=m?i.features[n].properties:b?i.properties:{},v=m?i.features[n].bbox:b?i.bbox:void 0,g=m?i.features[n].id:b?i.id:void 0,h=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<h;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,y,d,v,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(r(u.geometries[a],y,d,v,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,y,d,v,g)===!1)return!1;y++}}function p(i,r){_(i,function(n,a,l,u,h){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(M.feature(n,l,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<n.coordinates.length;d++){var v={type:c,coordinates:n.coordinates[d]};if(r(M.feature(v,l),a,d)===!1)return!1}})}function s(i,r){p(i,function(n,a,l){var u=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var c,x=0,d=0,v=0;return k(n,function(g,y,m,b,f){if(c===void 0||a>x||b>d||f>v)return c=g,x=a,d=b,v=f,void(u=0);var S=M.lineString([c,g],n.properties);if(r(S,a,l,f,u)===!1)return!1;u++,c=g})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");p(i,function(n,a,l){if(n.geometry!==null){var u=n.geometry.type,h=n.geometry.coordinates;switch(u){case"LineString":if(r(n,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<h.length;c++)if(r(M.lineString(h[c],n.properties),a,l,c)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(i,r,n,a){var l=n;return k(i,function(u,h,c,x,d){l=h===0&&n===void 0?u:r(l,u,h,c,x,d)},a),l},R.propEach=o,R.propReduce=function(i,r,n){var a=n;return o(i,function(l,u){a=u===0&&n===void 0?l:r(a,l,u)}),a},R.featureEach=T,R.featureReduce=function(i,r,n){var a=n;return T(i,function(l,u){a=u===0&&n===void 0?l:r(a,l,u)}),a},R.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},R.geomEach=_,R.geomReduce=function(i,r,n){var a=n;return _(i,function(l,u,h,c,x){a=u===0&&n===void 0?l:r(a,l,u,h,c,x)}),a},R.flattenEach=p,R.flattenReduce=function(i,r,n){var a=n;return p(i,function(l,u,h){a=u===0&&h===0&&n===void 0?l:r(a,l,u,h)}),a},R.segmentEach=s,R.segmentReduce=function(i,r,n){var a=n,l=!1;return s(i,function(u,h,c,x,d){a=l===!1&&n===void 0?u:r(a,u,h,c,x,d),l=!0}),a},R.lineEach=t,R.lineReduce=function(i,r,n){var a=n;return t(i,function(l,u,h,c){a=u===0&&n===void 0?l:r(a,l,u,h,c)}),a},R.findSegment=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,l=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),M.lineString([x[h],x[h+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),M.lineString([x[u][h],x[u][h+1]],c,r);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),M.lineString([x[l][h],x[l][h+1]],c,r);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h-1),M.lineString([x[l][u][h],x[l][u][h+1]],c,r)}throw new Error("geojson is invalid")},R.findPoint=function(i,r){if(r=r||{},!M.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,l=r.multiFeatureIndex||0,u=r.geometryIndex||0,h=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,n=i.features[a].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return M.point(x,c,r);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,r);case"LineString":return h<0&&(h=x.length+h),M.point(x[h],c,r);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),M.point(x[u][h],c,r);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),M.point(x[l][h],c,r);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h),M.point(x[l][u][h],c,r)}throw new Error("geojson is invalid")}},49972:function(ee){ee.exports=function(R){var e=0,M=0,k=0,o=0;return R.map(function(T){var _=(T=T.slice())[0],p=_.toUpperCase();if(_!=p)switch(T[0]=p,_){case"a":T[6]+=k,T[7]+=o;break;case"v":T[1]+=o;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=o}switch(p){case"Z":k=e,o=M;break;case"H":k=T[1];break;case"V":o=T[1];break;case"M":k=e=T[1],o=M=T[2];break;default:k=T[T.length-2],o=T[T.length-1]}return T})}},76752:function(ee){ee.exports=function(R,e){if(!R||R.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var M=Array(2*e),k=0;k<e;k++){for(var o=-1/0,T=1/0,_=k,p=R.length;_<p;_+=e)R[_]>o&&(o=R[_]),R[_]<T&&(T=R[_]);M[k]=T,M[e+k]=o}return M}},10272:function(ee){ee.exports=function(R,e,M){if(typeof Array.prototype.findIndex=="function")return R.findIndex(e,M);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(R),o=k.length;if(o===0)return-1;for(var T=0;T<o;T++)if(e.call(M,k[T],T,k))return T;return-1}},71152:function(ee,R,e){var M=e(76752);ee.exports=function(k,o,T){if(!k||k.length==null)throw Error("Argument should be an array");o==null&&(o=1),T==null&&(T=M(k,o));for(var _=0;_<o;_++){var p=T[o+_],s=T[_],t=_,i=k.length;if(p===1/0&&s===-1/0)for(t=_;t<i;t+=o)k[t]=k[t]===p?1:k[t]===s?0:.5;else if(p===1/0)for(t=_;t<i;t+=o)k[t]=k[t]===p?1:0;else if(s===-1/0)for(t=_;t<i;t+=o)k[t]=k[t]===s?0:1;else{var r=p-s;for(t=_;t<i;t+=o)isNaN(k[t])||(k[t]=r===0?.5:(k[t]-s)/r)}}return k}},67752:function(ee){ee.exports=function(R,e){var M=typeof R=="number",k=typeof e=="number";M&&!k?(e=R,R=0):M||k||(R=0,e=0);var o=(e|=0)-(R|=0);if(o<0)throw new Error("array length must be positive");for(var T=new Array(o),_=0,p=R;_<o;_++,p++)T[_]=p;return T}},45408:function(ee,R,e){var M=e(4168);function k(I){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},k(I)}var o,T,_=e(86832).codes,p=_.ERR_AMBIGUOUS_ARGUMENT,s=_.ERR_INVALID_ARG_TYPE,t=_.ERR_INVALID_ARG_VALUE,i=_.ERR_INVALID_RETURN_VALUE,r=_.ERR_MISSING_ARGS,n=e(26144),a=e(35840).inspect,l=e(35840).types,u=l.isPromise,h=l.isRegExp,c=Object.assign?Object.assign:e(60964).assign,x=Object.is?Object.is:e(39896);function d(){var I=e(25116);o=I.isDeepEqual,T=I.isDeepStrictEqual}var v=!1,g=ee.exports=f,y={};function m(I){throw I.message instanceof Error?I.message:new n(I)}function b(I,N,W,F){if(!W){var j=!1;if(N===0)j=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var H=new n({actual:W,expected:!0,message:F,operator:"==",stackStartFn:I});throw H.generatedMessage=j,H}}function f(){for(var I=arguments.length,N=new Array(I),W=0;W<I;W++)N[W]=arguments[W];b.apply(void 0,[f,N.length].concat(N))}g.fail=function I(N,W,F,j,H){var te,Q=arguments.length;if(Q===0?te="Failed":Q===1?(F=N,N=void 0):(v===!1&&(v=!0,(M.emitWarning?M.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),Q===2&&(j="!=")),F instanceof Error)throw F;var $={actual:N,expected:W,operator:j===void 0?"fail":j,stackStartFn:H||I};F!==void 0&&($.message=F);var K=new n($);throw te&&(K.message=te,K.generatedMessage=!0),K},g.AssertionError=n,g.ok=f,g.equal=function I(N,W,F){if(arguments.length<2)throw new r("actual","expected");N!=W&&m({actual:N,expected:W,message:F,operator:"==",stackStartFn:I})},g.notEqual=function I(N,W,F){if(arguments.length<2)throw new r("actual","expected");N==W&&m({actual:N,expected:W,message:F,operator:"!=",stackStartFn:I})},g.deepEqual=function I(N,W,F){if(arguments.length<2)throw new r("actual","expected");o===void 0&&d(),o(N,W)||m({actual:N,expected:W,message:F,operator:"deepEqual",stackStartFn:I})},g.notDeepEqual=function I(N,W,F){if(arguments.length<2)throw new r("actual","expected");o===void 0&&d(),o(N,W)&&m({actual:N,expected:W,message:F,operator:"notDeepEqual",stackStartFn:I})},g.deepStrictEqual=function I(N,W,F){if(arguments.length<2)throw new r("actual","expected");o===void 0&&d(),T(N,W)||m({actual:N,expected:W,message:F,operator:"deepStrictEqual",stackStartFn:I})},g.notDeepStrictEqual=function I(N,W,F){if(arguments.length<2)throw new r("actual","expected");o===void 0&&d(),T(N,W)&&m({actual:N,expected:W,message:F,operator:"notDeepStrictEqual",stackStartFn:I})},g.strictEqual=function I(N,W,F){if(arguments.length<2)throw new r("actual","expected");x(N,W)||m({actual:N,expected:W,message:F,operator:"strictEqual",stackStartFn:I})},g.notStrictEqual=function I(N,W,F){if(arguments.length<2)throw new r("actual","expected");x(N,W)&&m({actual:N,expected:W,message:F,operator:"notStrictEqual",stackStartFn:I})};var S=function I(N,W,F){var j=this;(function(H,te){if(!(H instanceof te))throw new TypeError("Cannot call a class as a function")})(this,I),W.forEach(function(H){H in N&&(F!==void 0&&typeof F[H]=="string"&&h(N[H])&&N[H].test(F[H])?j[H]=F[H]:j[H]=N[H])})};function w(I,N,W,F){if(typeof N!="function"){if(h(N))return N.test(I);if(arguments.length===2)throw new s("expected",["Function","RegExp"],N);if(k(I)!=="object"||I===null){var j=new n({actual:I,expected:N,message:W,operator:"deepStrictEqual",stackStartFn:F});throw j.operator=F.name,j}var H=Object.keys(N);if(N instanceof Error)H.push("name","message");else if(H.length===0)throw new t("error",N,"may not be an empty object");return o===void 0&&d(),H.forEach(function(te){typeof I[te]=="string"&&h(N[te])&&N[te].test(I[te])||function(Q,$,K,X,Y,re){if(!(K in Q)||!T(Q[K],$[K])){if(!X){var se=new S(Q,Y),ae=new S($,Y,Q),ce=new n({actual:se,expected:ae,operator:"deepStrictEqual",stackStartFn:re});throw ce.actual=Q,ce.expected=$,ce.operator=re.name,ce}m({actual:Q,expected:$,message:X,operator:re.name,stackStartFn:re})}}(I,N,te,W,H,F)}),!0}return N.prototype!==void 0&&I instanceof N||!Error.isPrototypeOf(N)&&N.call({},I)===!0}function E(I){if(typeof I!="function")throw new s("fn","Function",I);try{I()}catch(N){return N}return y}function O(I){return u(I)||I!==null&&k(I)==="object"&&typeof I.then=="function"&&typeof I.catch=="function"}function C(I){return Promise.resolve().then(function(){var N;if(typeof I=="function"){if(!O(N=I()))throw new i("instance of Promise","promiseFn",N)}else{if(!O(I))throw new s("promiseFn",["Function","Promise"],I);N=I}return Promise.resolve().then(function(){return N}).then(function(){return y}).catch(function(W){return W})})}function P(I,N,W,F){if(typeof W=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],W);if(k(N)==="object"&&N!==null){if(N.message===W)throw new p("error/message",'The error message "'.concat(N.message,'" is identical to the message.'))}else if(N===W)throw new p("error/message",'The error "'.concat(N,'" is identical to the message.'));F=W,W=void 0}else if(W!=null&&k(W)!=="object"&&typeof W!="function")throw new s("error",["Object","Error","Function","RegExp"],W);if(N===y){var j="";W&&W.name&&(j+=" (".concat(W.name,")")),j+=F?": ".concat(F):".";var H=I.name==="rejects"?"rejection":"exception";m({actual:void 0,expected:W,operator:I.name,message:"Missing expected ".concat(H).concat(j),stackStartFn:I})}if(W&&!w(N,W,F,I))throw N}function D(I,N,W,F){if(N!==y){if(typeof W=="string"&&(F=W,W=void 0),!W||w(N,W)){var j=F?": ".concat(F):".",H=I.name==="doesNotReject"?"rejection":"exception";m({actual:N,expected:W,operator:I.name,message:"Got unwanted ".concat(H).concat(j,`
`)+'Actual message: "'.concat(N&&N.message,'"'),stackStartFn:I})}throw N}}function U(){for(var I=arguments.length,N=new Array(I),W=0;W<I;W++)N[W]=arguments[W];b.apply(void 0,[U,N.length].concat(N))}g.throws=function I(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),j=1;j<W;j++)F[j-1]=arguments[j];P.apply(void 0,[I,E(N)].concat(F))},g.rejects=function I(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),j=1;j<W;j++)F[j-1]=arguments[j];return C(N).then(function(H){return P.apply(void 0,[I,H].concat(F))})},g.doesNotThrow=function I(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),j=1;j<W;j++)F[j-1]=arguments[j];D.apply(void 0,[I,E(N)].concat(F))},g.doesNotReject=function I(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),j=1;j<W;j++)F[j-1]=arguments[j];return C(N).then(function(H){return D.apply(void 0,[I,H].concat(F))})},g.ifError=function I(N){if(N!=null){var W="ifError got unwanted exception: ";k(N)==="object"&&typeof N.message=="string"?N.message.length===0&&N.constructor?W+=N.constructor.name:W+=N.message:W+=a(N);var F=new n({actual:N,expected:null,operator:"ifError",message:W,stackStartFn:I}),j=N.stack;if(typeof j=="string"){var H=j.split(`
`);H.shift();for(var te=F.stack.split(`
`),Q=0;Q<H.length;Q++){var $=te.indexOf(H[Q]);if($!==-1){te=te.slice(0,$);break}}F.stack="".concat(te.join(`
`),`
`).concat(H.join(`
`))}throw F}},g.strict=c(U,g,{equal:g.strictEqual,deepEqual:g.deepStrictEqual,notEqual:g.notStrictEqual,notDeepEqual:g.notDeepStrictEqual}),g.strict.strict=g.strict},26144:function(ee,R,e){var M=e(4168);function k(m,b,f){return b in m?Object.defineProperty(m,b,{value:f,enumerable:!0,configurable:!0,writable:!0}):m[b]=f,m}function o(m,b){for(var f=0;f<b.length;f++){var S=b[f];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function T(m,b){return!b||r(b)!=="object"&&typeof b!="function"?_(m):b}function _(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function p(m){var b=typeof Map=="function"?new Map:void 0;return p=function(f){if(f===null||(S=f,Function.toString.call(S).indexOf("[native code]")===-1))return f;var S;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(b!==void 0){if(b.has(f))return b.get(f);b.set(f,w)}function w(){return s(f,arguments,i(this).constructor)}return w.prototype=Object.create(f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t(w,f)},p(m)}function s(m,b,f){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,w,E){var O=[null];O.push.apply(O,w);var C=new(Function.bind.apply(S,O));return E&&t(C,E.prototype),C},s.apply(null,arguments)}function t(m,b){return t=Object.setPrototypeOf||function(f,S){return f.__proto__=S,f},t(m,b)}function i(m){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},i(m)}function r(m){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},r(m)}var n=e(35840).inspect,a=e(86832).codes.ERR_INVALID_ARG_TYPE;function l(m,b,f){return(f===void 0||f>m.length)&&(f=m.length),m.substring(f-b.length,f)===b}var u="",h="",c="",x="",d={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function v(m){var b=Object.keys(m),f=Object.create(Object.getPrototypeOf(m));return b.forEach(function(S){f[S]=m[S]}),Object.defineProperty(f,"message",{value:m.message}),f}function g(m){return n(m,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var y=function(m){function b(w){var E;if(function(te,Q){if(!(te instanceof Q))throw new TypeError("Cannot call a class as a function")}(this,b),r(w)!=="object"||w===null)throw new a("options","Object",w);var O=w.message,C=w.operator,P=w.stackStartFn,D=w.actual,U=w.expected,I=Error.stackTraceLimit;if(Error.stackTraceLimit=0,O!=null)E=T(this,i(b).call(this,String(O)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&M.stderr.getColorDepth()!==1?(u="\x1B[34m",h="\x1B[32m",x="\x1B[39m",c="\x1B[31m"):(u="",h="",x="",c="")),r(D)==="object"&&D!==null&&r(U)==="object"&&U!==null&&"stack"in D&&D instanceof Error&&"stack"in U&&U instanceof Error&&(D=v(D),U=v(U)),C==="deepStrictEqual"||C==="strictEqual")E=T(this,i(b).call(this,function(te,Q,$){var K="",X="",Y=0,re="",se=!1,ae=g(te),ce=ae.split(`
`),fe=g(Q).split(`
`),he=0,ve="";if($==="strictEqual"&&r(te)==="object"&&r(Q)==="object"&&te!==null&&Q!==null&&($="strictEqualObject"),ce.length===1&&fe.length===1&&ce[0]!==fe[0]){var ye=ce[0].length+fe[0].length;if(ye<=10){if(!(r(te)==="object"&&te!==null||r(Q)==="object"&&Q!==null||te===0&&Q===0))return"".concat(d[$],`

`)+"".concat(ce[0]," !== ").concat(fe[0],`
`)}else if($!=="strictEqualObject"&&ye<(M.stderr&&M.stderr.isTTY?M.stderr.columns:80)){for(;ce[0][he]===fe[0][he];)he++;he>2&&(ve=`
  `.concat(function(Oe,ze){if(ze=Math.floor(ze),Oe.length==0||ze==0)return"";var pe=Oe.length*ze;for(ze=Math.floor(Math.log(ze)/Math.log(2));ze;)Oe+=Oe,ze--;return Oe+Oe.substring(0,pe-Oe.length)}(" ",he),"^"),he=0)}}for(var me=ce[ce.length-1],Me=fe[fe.length-1];me===Me&&(he++<2?re=`
  `.concat(me).concat(re):K=me,ce.pop(),fe.pop(),ce.length!==0&&fe.length!==0);)me=ce[ce.length-1],Me=fe[fe.length-1];var Pe=Math.max(ce.length,fe.length);if(Pe===0){var ge=ae.split(`
`);if(ge.length>30)for(ge[26]="".concat(u,"...").concat(x);ge.length>27;)ge.pop();return"".concat(d.notIdentical,`

`).concat(ge.join(`
`),`
`)}he>3&&(re=`
`.concat(u,"...").concat(x).concat(re),se=!0),K!==""&&(re=`
  `.concat(K).concat(re),K="");var oe=0,ie=d[$]+`
`.concat(h,"+ actual").concat(x," ").concat(c,"- expected").concat(x),de=" ".concat(u,"...").concat(x," Lines skipped");for(he=0;he<Pe;he++){var Se=he-Y;if(ce.length<he+1)Se>1&&he>2&&(Se>4?(X+=`
`.concat(u,"...").concat(x),se=!0):Se>3&&(X+=`
  `.concat(fe[he-2]),oe++),X+=`
  `.concat(fe[he-1]),oe++),Y=he,K+=`
`.concat(c,"-").concat(x," ").concat(fe[he]),oe++;else if(fe.length<he+1)Se>1&&he>2&&(Se>4?(X+=`
`.concat(u,"...").concat(x),se=!0):Se>3&&(X+=`
  `.concat(ce[he-2]),oe++),X+=`
  `.concat(ce[he-1]),oe++),Y=he,X+=`
`.concat(h,"+").concat(x," ").concat(ce[he]),oe++;else{var _e=fe[he],we=ce[he],Ae=we!==_e&&(!l(we,",")||we.slice(0,-1)!==_e);Ae&&l(_e,",")&&_e.slice(0,-1)===we&&(Ae=!1,we+=","),Ae?(Se>1&&he>2&&(Se>4?(X+=`
`.concat(u,"...").concat(x),se=!0):Se>3&&(X+=`
  `.concat(ce[he-2]),oe++),X+=`
  `.concat(ce[he-1]),oe++),Y=he,X+=`
`.concat(h,"+").concat(x," ").concat(we),K+=`
`.concat(c,"-").concat(x," ").concat(_e),oe+=2):(X+=K,K="",Se!==1&&he!==0||(X+=`
  `.concat(we),oe++))}if(oe>20&&he<Pe-2)return"".concat(ie).concat(de,`
`).concat(X,`
`).concat(u,"...").concat(x).concat(K,`
`)+"".concat(u,"...").concat(x)}return"".concat(ie).concat(se?de:"",`
`).concat(X).concat(K).concat(re).concat(ve)}(D,U,C)));else if(C==="notDeepStrictEqual"||C==="notStrictEqual"){var N=d[C],W=g(D).split(`
`);if(C==="notStrictEqual"&&r(D)==="object"&&D!==null&&(N=d.notStrictEqualObject),W.length>30)for(W[26]="".concat(u,"...").concat(x);W.length>27;)W.pop();E=W.length===1?T(this,i(b).call(this,"".concat(N," ").concat(W[0]))):T(this,i(b).call(this,"".concat(N,`

`).concat(W.join(`
`),`
`)))}else{var F=g(D),j="",H=d[C];C==="notDeepEqual"||C==="notEqual"?(F="".concat(d[C],`

`).concat(F)).length>1024&&(F="".concat(F.slice(0,1021),"...")):(j="".concat(g(U)),F.length>512&&(F="".concat(F.slice(0,509),"...")),j.length>512&&(j="".concat(j.slice(0,509),"...")),C==="deepEqual"||C==="equal"?F="".concat(H,`

`).concat(F,`

should equal

`):j=" ".concat(C," ").concat(j)),E=T(this,i(b).call(this,"".concat(F).concat(j)))}return Error.stackTraceLimit=I,E.generatedMessage=!O,Object.defineProperty(_(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=D,E.expected=U,E.operator=C,Error.captureStackTrace&&Error.captureStackTrace(_(E),P),E.stack,E.name="AssertionError",T(E)}var f,S;return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&t(w,E)}(b,m),f=b,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:n.custom,value:function(w,E){return n(this,function(O){for(var C=1;C<arguments.length;C++){var P=arguments[C]!=null?arguments[C]:{},D=Object.keys(P);typeof Object.getOwnPropertySymbols=="function"&&(D=D.concat(Object.getOwnPropertySymbols(P).filter(function(U){return Object.getOwnPropertyDescriptor(P,U).enumerable}))),D.forEach(function(U){k(O,U,P[U])})}return O}({},E,{customInspect:!1,depth:0}))}}],S&&o(f.prototype,S),b}(p(Error));ee.exports=y},86832:function(ee,R,e){function M(i){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},M(i)}function k(i){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},k(i)}function o(i,r){return o=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},o(i,r)}var T,_,p={};function s(i,r,n){n||(n=Error);var a=function(l){function u(h,c,x){var d;return function(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}(this,u),d=function(v,g){return!g||M(g)!=="object"&&typeof g!="function"?function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(v):g}(this,k(u).call(this,function(v,g,y){return typeof r=="string"?r:r(v,g,y)}(h,c,x))),d.code=i,d}return function(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),c&&o(h,c)}(u,l),u}(n);p[i]=a}function t(i,r){if(Array.isArray(i)){var n=i.length;return i=i.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(i.slice(0,n-1).join(", "),", or ")+i[n-1]:n===2?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}return"of ".concat(r," ").concat(String(i))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(i,r,n){var a,l,u,h,c;if(T===void 0&&(T=e(45408)),T(typeof i=="string","'name' must be a string"),typeof r=="string"&&(l="not ",r.substr(0,4)===l)?(a="must not be",r=r.replace(/^not /,"")):a="must be",function(d,v,g){return(g===void 0||g>d.length)&&(g=d.length),d.substring(g-9,g)===v}(i," argument"))u="The ".concat(i," ").concat(a," ").concat(t(r,"type"));else{var x=(typeof c!="number"&&(c=0),c+1>(h=i).length||h.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(i,'" ').concat(x," ").concat(a," ").concat(t(r,"type"))}return u+". Received type ".concat(M(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";_===void 0&&(_=e(35840));var a=_.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(n,". Received ").concat(a)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(i,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(M(n)),"Expected ".concat(i,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];T===void 0&&(T=e(45408)),T(r.length>0,"At least one arg needs to be specified");var a="The ",l=r.length;switch(r=r.map(function(u){return'"'.concat(u,'"')}),l){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,l-1).join(", "),a+=", and ".concat(r[l-1]," arguments")}return"".concat(a," must be specified")},TypeError),ee.exports.codes=p},25116:function(ee,R,e){function M(Y,re){return function(se){if(Array.isArray(se))return se}(Y)||function(se,ae){var ce=[],fe=!0,he=!1,ve=void 0;try{for(var ye,me=se[Symbol.iterator]();!(fe=(ye=me.next()).done)&&(ce.push(ye.value),!ae||ce.length!==ae);fe=!0);}catch(Me){he=!0,ve=Me}finally{try{fe||me.return==null||me.return()}finally{if(he)throw ve}}return ce}(Y,re)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(Y){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},k(Y)}var o=/a/g.flags!==void 0,T=function(Y){var re=[];return Y.forEach(function(se){return re.push(se)}),re},_=function(Y){var re=[];return Y.forEach(function(se,ae){return re.push([ae,se])}),re},p=Object.is?Object.is:e(39896),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function i(Y){return Y.call.bind(Y)}var r=i(Object.prototype.hasOwnProperty),n=i(Object.prototype.propertyIsEnumerable),a=i(Object.prototype.toString),l=e(35840).types,u=l.isAnyArrayBuffer,h=l.isArrayBufferView,c=l.isDate,x=l.isMap,d=l.isRegExp,v=l.isSet,g=l.isNativeError,y=l.isBoxedPrimitive,m=l.isNumberObject,b=l.isStringObject,f=l.isBooleanObject,S=l.isBigIntObject,w=l.isSymbolObject,E=l.isFloat32Array,O=l.isFloat64Array;function C(Y){if(Y.length===0||Y.length>10)return!0;for(var re=0;re<Y.length;re++){var se=Y.charCodeAt(re);if(se<48||se>57)return!0}return Y.length===10&&Y>=Math.pow(2,32)}function P(Y){return Object.keys(Y).filter(C).concat(s(Y).filter(Object.prototype.propertyIsEnumerable.bind(Y)))}function D(Y,re){if(Y===re)return 0;for(var se=Y.length,ae=re.length,ce=0,fe=Math.min(se,ae);ce<fe;++ce)if(Y[ce]!==re[ce]){se=Y[ce],ae=re[ce];break}return se<ae?-1:ae<se?1:0}var U=0,I=1,N=2,W=3;function F(Y,re,se,ae){if(Y===re)return Y!==0||!se||p(Y,re);if(se){if(k(Y)!=="object")return typeof Y=="number"&&t(Y)&&t(re);if(k(re)!=="object"||Y===null||re===null||Object.getPrototypeOf(Y)!==Object.getPrototypeOf(re))return!1}else{if(Y===null||k(Y)!=="object")return(re===null||k(re)!=="object")&&Y==re;if(re===null||k(re)!=="object")return!1}var ce,fe,he,ve,ye=a(Y);if(ye!==a(re))return!1;if(Array.isArray(Y)){if(Y.length!==re.length)return!1;var me=P(Y),Me=P(re);return me.length===Me.length&&H(Y,re,se,ae,I,me)}if(ye==="[object Object]"&&(!x(Y)&&x(re)||!v(Y)&&v(re)))return!1;if(c(Y)){if(!c(re)||Date.prototype.getTime.call(Y)!==Date.prototype.getTime.call(re))return!1}else if(d(Y)){if(!d(re)||(he=Y,ve=re,!(o?he.source===ve.source&&he.flags===ve.flags:RegExp.prototype.toString.call(he)===RegExp.prototype.toString.call(ve))))return!1}else if(g(Y)||Y instanceof Error){if(Y.message!==re.message||Y.name!==re.name)return!1}else{if(h(Y)){if(se||!E(Y)&&!O(Y)){if(!function(oe,ie){return oe.byteLength===ie.byteLength&&D(new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength),new Uint8Array(ie.buffer,ie.byteOffset,ie.byteLength))===0}(Y,re))return!1}else if(!function(oe,ie){if(oe.byteLength!==ie.byteLength)return!1;for(var de=0;de<oe.byteLength;de++)if(oe[de]!==ie[de])return!1;return!0}(Y,re))return!1;var Pe=P(Y),ge=P(re);return Pe.length===ge.length&&H(Y,re,se,ae,U,Pe)}if(v(Y))return!(!v(re)||Y.size!==re.size)&&H(Y,re,se,ae,N);if(x(Y))return!(!x(re)||Y.size!==re.size)&&H(Y,re,se,ae,W);if(u(Y)){if(fe=re,(ce=Y).byteLength!==fe.byteLength||D(new Uint8Array(ce),new Uint8Array(fe))!==0)return!1}else if(y(Y)&&!function(oe,ie){return m(oe)?m(ie)&&p(Number.prototype.valueOf.call(oe),Number.prototype.valueOf.call(ie)):b(oe)?b(ie)&&String.prototype.valueOf.call(oe)===String.prototype.valueOf.call(ie):f(oe)?f(ie)&&Boolean.prototype.valueOf.call(oe)===Boolean.prototype.valueOf.call(ie):S(oe)?S(ie)&&BigInt.prototype.valueOf.call(oe)===BigInt.prototype.valueOf.call(ie):w(ie)&&Symbol.prototype.valueOf.call(oe)===Symbol.prototype.valueOf.call(ie)}(Y,re))return!1}return H(Y,re,se,ae,U)}function j(Y,re){return re.filter(function(se){return n(Y,se)})}function H(Y,re,se,ae,ce,fe){if(arguments.length===5){fe=Object.keys(Y);var he=Object.keys(re);if(fe.length!==he.length)return!1}for(var ve=0;ve<fe.length;ve++)if(!r(re,fe[ve]))return!1;if(se&&arguments.length===5){var ye=s(Y);if(ye.length!==0){var me=0;for(ve=0;ve<ye.length;ve++){var Me=ye[ve];if(n(Y,Me)){if(!n(re,Me))return!1;fe.push(Me),me++}else if(n(re,Me))return!1}var Pe=s(re);if(ye.length!==Pe.length&&j(re,Pe).length!==me)return!1}else{var ge=s(re);if(ge.length!==0&&j(re,ge).length!==0)return!1}}if(fe.length===0&&(ce===U||ce===I&&Y.length===0||Y.size===0))return!0;if(ae===void 0)ae={val1:new Map,val2:new Map,position:0};else{var oe=ae.val1.get(Y);if(oe!==void 0){var ie=ae.val2.get(re);if(ie!==void 0)return oe===ie}ae.position++}ae.val1.set(Y,ae.position),ae.val2.set(re,ae.position);var de=function(Se,_e,we,Ae,Oe,ze){var pe=0;if(ze===N){if(!function(Ee,Be,Ve,Ze){for(var rt=null,it=T(Ee),dt=0;dt<it.length;dt++){var vt=it[dt];if(k(vt)==="object"&&vt!==null)rt===null&&(rt=new Set),rt.add(vt);else if(!Be.has(vt)){if(Ve||!$(Ee,Be,vt))return!1;rt===null&&(rt=new Set),rt.add(vt)}}if(rt!==null){for(var ht=T(Be),Qe=0;Qe<ht.length;Qe++){var Je=ht[Qe];if(k(Je)==="object"&&Je!==null){if(!te(rt,Je,Ve,Ze))return!1}else if(!Ve&&!Ee.has(Je)&&!te(rt,Je,Ve,Ze))return!1}return rt.size===0}return!0}(Se,_e,we,Oe))return!1}else if(ze===W){if(!function(Ee,Be,Ve,Ze){for(var rt=null,it=_(Ee),dt=0;dt<it.length;dt++){var vt=M(it[dt],2),ht=vt[0],Qe=vt[1];if(k(ht)==="object"&&ht!==null)rt===null&&(rt=new Set),rt.add(ht);else{var Je=Be.get(ht);if(Je===void 0&&!Be.has(ht)||!F(Qe,Je,Ve,Ze)){if(Ve||!K(Ee,Be,ht,Qe,Ze))return!1;rt===null&&(rt=new Set),rt.add(ht)}}}if(rt!==null){for(var Tt=_(Be),Ot=0;Ot<Tt.length;Ot++){var Pt=M(Tt[Ot],2),Mt=(ht=Pt[0],Pt[1]);if(k(ht)==="object"&&ht!==null){if(!X(rt,Ee,ht,Mt,Ve,Ze))return!1}else if(!(Ve||Ee.has(ht)&&F(Ee.get(ht),Mt,!1,Ze)||X(rt,Ee,ht,Mt,!1,Ze)))return!1}return rt.size===0}return!0}(Se,_e,we,Oe))return!1}else if(ze===I)for(;pe<Se.length;pe++){if(!r(Se,pe)){if(r(_e,pe))return!1;for(var be=Object.keys(Se);pe<be.length;pe++){var ke=be[pe];if(!r(_e,ke)||!F(Se[ke],_e[ke],we,Oe))return!1}return be.length===Object.keys(_e).length}if(!r(_e,pe)||!F(Se[pe],_e[pe],we,Oe))return!1}for(pe=0;pe<Ae.length;pe++){var Ie=Ae[pe];if(!F(Se[Ie],_e[Ie],we,Oe))return!1}return!0}(Y,re,se,fe,ae,ce);return ae.val1.delete(Y),ae.val2.delete(re),de}function te(Y,re,se,ae){for(var ce=T(Y),fe=0;fe<ce.length;fe++){var he=ce[fe];if(F(re,he,se,ae))return Y.delete(he),!0}return!1}function Q(Y){switch(k(Y)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Y=+Y;case"number":if(t(Y))return!1}return!0}function $(Y,re,se){var ae=Q(se);return ae??(re.has(ae)&&!Y.has(ae))}function K(Y,re,se,ae,ce){var fe=Q(se);if(fe!=null)return fe;var he=re.get(fe);return!(he===void 0&&!re.has(fe)||!F(ae,he,!1,ce))&&!Y.has(fe)&&F(ae,he,!1,ce)}function X(Y,re,se,ae,ce,fe){for(var he=T(Y),ve=0;ve<he.length;ve++){var ye=he[ve];if(F(se,ye,ce,fe)&&F(ae,re.get(ye),ce,fe))return Y.delete(ye),!0}return!1}ee.exports={isDeepEqual:function(Y,re){return F(Y,re,!1)},isDeepStrictEqual:function(Y,re){return F(Y,re,!0)}}},83160:function(ee,R,e){e.r(R),e.d(R,{decode:function(){return _},encode:function(){return T}});for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=0;o<64;o++)k[M.charCodeAt(o)]=o;var T=function(p){var s,t=new Uint8Array(p),i=t.length,r="";for(s=0;s<i;s+=3)r+=M[t[s]>>2],r+=M[(3&t[s])<<4|t[s+1]>>4],r+=M[(15&t[s+1])<<2|t[s+2]>>6],r+=M[63&t[s+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},_=function(p){var s,t,i,r,n,a=.75*p.length,l=p.length,u=0;p[p.length-1]==="="&&(a--,p[p.length-2]==="="&&a--);var h=new ArrayBuffer(a),c=new Uint8Array(h);for(s=0;s<l;s+=4)t=k[p.charCodeAt(s)],i=k[p.charCodeAt(s+1)],r=k[p.charCodeAt(s+2)],n=k[p.charCodeAt(s+3)],c[u++]=t<<2|i>>4,c[u++]=(15&i)<<4|r>>2,c[u++]=(3&r)<<6|63&n;return h}},59968:function(ee,R){R.byteLength=function(s){var t=_(s),i=t[0],r=t[1];return 3*(i+r)/4-r},R.toByteArray=function(s){var t,i,r=_(s),n=r[0],a=r[1],l=new k(function(c,x,d){return 3*(x+d)/4-d}(0,n,a)),u=0,h=a>0?n-4:n;for(i=0;i<h;i+=4)t=M[s.charCodeAt(i)]<<18|M[s.charCodeAt(i+1)]<<12|M[s.charCodeAt(i+2)]<<6|M[s.charCodeAt(i+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return a===2&&(t=M[s.charCodeAt(i)]<<2|M[s.charCodeAt(i+1)]>>4,l[u++]=255&t),a===1&&(t=M[s.charCodeAt(i)]<<10|M[s.charCodeAt(i+1)]<<4|M[s.charCodeAt(i+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},R.fromByteArray=function(s){for(var t,i=s.length,r=i%3,n=[],a=16383,l=0,u=i-r;l<u;l+=a)n.push(p(s,l,l+a>u?u:l+a));return r===1?(t=s[i-1],n.push(e[t>>2]+e[t<<4&63]+"==")):r===2&&(t=(s[i-2]<<8)+s[i-1],n.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),n.join("")};for(var e=[],M=[],k=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=o[T],M[o.charCodeAt(T)]=T;function _(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=s.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function p(s,t,i){for(var r,n,a=[],l=t;l<i;l+=3)r=(s[l]<<16&16711680)+(s[l+1]<<8&65280)+(255&s[l+2]),a.push(e[(n=r)>>18&63]+e[n>>12&63]+e[n>>6&63]+e[63&n]);return a.join("")}M[45]=62,M[95]=63},64928:function(ee){function R(_,p,s,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,a=_[n];(s!==void 0?s(a,p):a-p)>=0?(r=n,i=n-1):t=n+1}return r}function e(_,p,s,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,a=_[n];(s!==void 0?s(a,p):a-p)>0?(r=n,i=n-1):t=n+1}return r}function M(_,p,s,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,a=_[n];(s!==void 0?s(a,p):a-p)<0?(r=n,t=n+1):i=n-1}return r}function k(_,p,s,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,a=_[n];(s!==void 0?s(a,p):a-p)<=0?(r=n,t=n+1):i=n-1}return r}function o(_,p,s,t,i){for(;t<=i;){var r=t+i>>>1,n=_[r],a=s!==void 0?s(n,p):n-p;if(a===0)return r;a<=0?t=r+1:i=r-1}return-1}function T(_,p,s,t,i,r){return typeof s=="function"?r(_,p,s,t===void 0?0:0|t,i===void 0?_.length-1:0|i):r(_,p,void 0,s===void 0?0:0|s,t===void 0?_.length-1:0|t)}ee.exports={ge:function(_,p,s,t,i){return T(_,p,s,t,i,R)},gt:function(_,p,s,t,i){return T(_,p,s,t,i,e)},lt:function(_,p,s,t,i){return T(_,p,s,t,i,M)},le:function(_,p,s,t,i){return T(_,p,s,t,i,k)},eq:function(_,p,s,t,i){return T(_,p,s,t,i,o)}}},308:function(ee,R){function e(k){var o=32;return(k&=-k)&&o--,65535&k&&(o-=16),16711935&k&&(o-=8),252645135&k&&(o-=4),858993459&k&&(o-=2),1431655765&k&&(o-=1),o}R.INT_BITS=32,R.INT_MAX=2147483647,R.INT_MIN=-2147483648,R.sign=function(k){return(k>0)-(k<0)},R.abs=function(k){var o=k>>31;return(k^o)-o},R.min=function(k,o){return o^(k^o)&-(k<o)},R.max=function(k,o){return k^(k^o)&-(k<o)},R.isPow2=function(k){return!(k&k-1||!k)},R.log2=function(k){var o,T;return o=(k>65535)<<4,o|=T=((k>>>=o)>255)<<3,o|=T=((k>>>=T)>15)<<2,(o|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},R.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},R.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},R.countTrailingZeros=e,R.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},R.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},R.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var M=new Array(256);(function(k){for(var o=0;o<256;++o){var T=o,_=o,p=7;for(T>>>=1;T;T>>>=1)_<<=1,_|=1&T,--p;k[o]=_<<p&255}})(M),R.reverse=function(k){return M[255&k]<<24|M[k>>>8&255]<<16|M[k>>>16&255]<<8|M[k>>>24&255]},R.interleave2=function(k,o){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},R.deinterleave2=function(k,o){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>o&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},R.interleave3=function(k,o,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},R.deinterleave3=function(k,o){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>o&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},R.nextCombination=function(k){var o=k|k-1;return o+1|(~o&-~o)-1>>>e(k)+1}},29620:function(ee,R,e){var M=e(32420);ee.exports=function(_,p){p||(p={});var s,t,i,r,n,a,l,u,h,c,x,d=p.cutoff==null?.25:p.cutoff,v=p.radius==null?8:p.radius,g=p.channel||0;if(ArrayBuffer.isView(_)||Array.isArray(_)){if(!p.width||!p.height)throw Error("For raw data width and height should be provided by options");s=p.width,t=p.height,r=_,a=p.stride?p.stride:Math.floor(_.length/s/t)}else window.HTMLCanvasElement&&_ instanceof window.HTMLCanvasElement?(l=(u=_).getContext("2d"),s=u.width,t=u.height,r=(h=l.getImageData(0,0,s,t)).data,a=4):window.CanvasRenderingContext2D&&_ instanceof window.CanvasRenderingContext2D?(l=_,s=(u=_.canvas).width,t=u.height,r=(h=l.getImageData(0,0,s,t)).data,a=4):window.ImageData&&_ instanceof window.ImageData&&(h=_,s=_.width,t=_.height,r=h.data,a=4);if(i=Math.max(s,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*t),c=0,x=n.length;c<x;c++)r[c]=n[c*a+g]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var y=Array(s*t),m=Array(s*t),b=Array(i),f=Array(i),S=Array(i+1),w=Array(i);for(c=0,x=s*t;c<x;c++){var E=r[c];y[c]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),m[c]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}o(y,s,t,b,f,w,S),o(m,s,t,b,f,w,S);var O=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(c=0,x=s*t;c<x;c++)O[c]=M(1-((y[c]-m[c])/v+d),0,1);return O};var k=1e20;function o(_,p,s,t,i,r,n){for(var a=0;a<p;a++){for(var l=0;l<s;l++)t[l]=_[l*p+a];for(T(t,i,r,n,s),l=0;l<s;l++)_[l*p+a]=i[l]}for(l=0;l<s;l++){for(a=0;a<p;a++)t[a]=_[l*p+a];for(T(t,i,r,n,p),a=0;a<p;a++)_[l*p+a]=Math.sqrt(i[a])}}function T(_,p,s,t,i){s[0]=0,t[0]=-k,t[1]=+k;for(var r=1,n=0;r<i;r++){for(var a=(_[r]+r*r-(_[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);a<=t[n];)n--,a=(_[r]+r*r-(_[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,t[n]=a,t[n+1]=+k}for(r=0,n=0;r<i;r++){for(;t[n+1]<r;)n++;p[r]=(r-s[n])*(r-s[n])+_[s[n]]}}},99676:function(ee,R,e){var M=e(53664),k=e(57916),o=k(M("String.prototype.indexOf"));ee.exports=function(T,_){var p=M(T,!!_);return typeof p=="function"&&o(T,".prototype.")>-1?k(p):p}},57916:function(ee,R,e){var M=e(8844),k=e(53664),o=e(14500),T=k("%TypeError%"),_=k("%Function.prototype.apply%"),p=k("%Function.prototype.call%"),s=k("%Reflect.apply%",!0)||M.call(p,_),t=k("%Object.defineProperty%",!0),i=k("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}ee.exports=function(n){if(typeof n!="function")throw new T("a function is required");var a=s(M,p,arguments);return o(a,1+i(0,n.length-(arguments.length-1)),!0)};var r=function(){return s(M,_,arguments)};t?t(ee.exports,"apply",{value:r}):ee.exports.apply=r},32420:function(ee){ee.exports=function(R,e,M){return e<M?R<e?e:R>M?M:R:R<M?M:R>e?e:R}},3808:function(ee,R,e){var M=e(32420);function k(o,T){T==null&&(T=!0);var _=o[0],p=o[1],s=o[2],t=o[3];return t==null&&(t=T?1:255),T&&(_*=255,p*=255,s*=255,t*=255),16777216*(_=255&M(_,0,255))+((p=255&M(p,0,255))<<16)+((s=255&M(s,0,255))<<8)+(255&M(t,0,255))}ee.exports=k,ee.exports.to=k,ee.exports.from=function(o,T){var _=(o=+o)>>>24,p=(16711680&o)>>>16,s=(65280&o)>>>8,t=255&o;return T===!1?[_,p,s,t]:[_/255,p/255,s/255,t/255]}},17592:function(ee){ee.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(ee,R,e){var M=e(96824),k=e(32420),o=e(72512);ee.exports=function(T,_){_!=="float"&&_||(_="array"),_==="uint"&&(_="uint8"),_==="uint_clamped"&&(_="uint8_clamped");var p=new(o(_))(4),s=_!=="uint8"&&_!=="uint8_clamped";return T.length&&typeof T!="string"||((T=M(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=T[3]!=null?T[3]:255,s&&(p[0]/=255,p[1]/=255,p[2]/=255,p[3]/=255),p):(s?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=T[3]!=null?T[3]:1):(p[0]=k(Math.floor(255*T[0]),0,255),p[1]=k(Math.floor(255*T[1]),0,255),p[2]=k(Math.floor(255*T[2]),0,255),p[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),p)}},96824:function(ee,R,e){var M=e(95532),k=e(53576),o=e(32420);ee.exports=function(T){var _,p=M(T);return p.space?((_=Array(3))[0]=o(p.values[0],0,255),_[1]=o(p.values[1],0,255),_[2]=o(p.values[2],0,255),p.space[0]==="h"&&(_=k.rgb(_)),_.push(o(p.alpha,0,1)),_):[]}},95532:function(ee,R,e){var M=e(17592);ee.exports=function(o){var T,_,p=[],s=1;if(typeof o=="string")if(o=o.toLowerCase(),M[o])p=M[o].slice(),_="rgb";else if(o==="transparent")s=0,_="rgb",p=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var t=o.slice(1);s=1,(n=t.length)<=4?(p=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],n===4&&(s=parseInt(t[3]+t[3],16)/255)):(p=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],n===8&&(s=parseInt(t[6]+t[7],16)/255)),p[0]||(p[0]=0),p[1]||(p[1]=0),p[2]||(p[2]=0),_="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var i=T[1],r=i==="rgb";_=t=i.replace(/a$/,"");var n=t==="cmyk"?4:t==="gray"?1:3;p=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(a,l){if(/%$/.test(a))return l===n?parseFloat(a)/100:t==="rgb"?255*parseFloat(a)/100:parseFloat(a);if(t[l]==="h"){if(/deg$/.test(a))return parseFloat(a);if(k[a]!==void 0)return k[a]}return parseFloat(a)}),i===t&&p.push(1),s=r||p[n]===void 0?1:p[n],p=p.slice(0,n)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(p=o.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),_=o.match(/([a-z])/gi).join("").toLowerCase());else isNaN(o)?Array.isArray(o)||o.length?(p=[o[0],o[1],o[2]],_="rgb",s=o.length===4?o[3]:1):o instanceof Object&&(o.r!=null||o.red!=null||o.R!=null?(_="rgb",p=[o.r||o.red||o.R||0,o.g||o.green||o.G||0,o.b||o.blue||o.B||0]):(_="hsl",p=[o.h||o.hue||o.H||0,o.s||o.saturation||o.S||0,o.l||o.lightness||o.L||o.b||o.brightness]),s=o.a||o.alpha||o.opacity||1,o.opacity!=null&&(s/=100)):(_="rgb",p=[o>>>16,(65280&o)>>>8,255&o]);return{space:_,values:p,alpha:s}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(ee,R,e){var M=e(19336);ee.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var o,T,_,p,s,t=k[0]/360,i=k[1]/100,r=k[2]/100;if(i===0)return[s=255*r,s,s];o=2*r-(T=r<.5?r*(1+i):r+i-r*i),p=[0,0,0];for(var n=0;n<3;n++)(_=t+.3333333333333333*-(n-1))<0?_++:_>1&&_--,s=6*_<1?o+6*(T-o)*_:2*_<1?T:3*_<2?o+(T-o)*(.6666666666666666-_)*6:o,p[n]=255*s;return p}},M.hsl=function(k){var o,T,_=k[0]/255,p=k[1]/255,s=k[2]/255,t=Math.min(_,p,s),i=Math.max(_,p,s),r=i-t;return i===t?o=0:_===i?o=(p-s)/r:p===i?o=2+(s-_)/r:s===i&&(o=4+(_-p)/r),(o=Math.min(60*o,360))<0&&(o+=360),T=(t+i)/2,[o,100*(i===t?0:T<=.5?r/(i+t):r/(2-i-t)),100*T]}},19336:function(ee){ee.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(ee){ee.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(ee,R,e){ee.exports={parse:e(46416),stringify:e(49395)}},8744:function(ee,R,e){var M=e(30584);ee.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||M.indexOf(k)!==-1}}},46416:function(ee,R,e){var M=e(92384),k=e(68194),o=e(3748),T=e(2904),_=e(47916),p=e(7294),s=e(39956),t=e(8744).isSize;ee.exports=r;var i=r.cache={};function r(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(i[a])return i[a];if(a==="")throw new Error("Cannot parse an empty string.");if(o.indexOf(a)!==-1)return i[a]={system:a};for(var l,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=s(a,/\s+/);l=h.shift();){if(k.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(x){u[x]=l}),i[a]=u;if(_.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(p.indexOf(l)===-1){if(T.indexOf(l)===-1){if(t(l)){var c=s(l,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=n(c[1]):h[0]==="/"&&(h.shift(),u.lineHeight=n(h.shift())),!h.length)throw new Error("Missing required font-family.");return u.family=s(h.join(" "),/\s*,\s*/).map(M),i[a]=u}throw new Error("Unknown or unsupported font token: "+l)}u.weight=l}else u.stretch=l;else u.variant=l;else u.style=l}throw new Error("Missing required font-size.")}function n(a){var l=parseFloat(a);return l.toString()===a?l:a}},49395:function(ee,R,e){var M=e(55616),k=e(8744).isSize,o=a(e(68194)),T=a(e(3748)),_=a(e(2904)),p=a(e(47916)),s=a(e(7294)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(l,u){if(l&&!u[l]&&!o[l])throw Error("Unknown keyword `"+l+"`");return l}function a(l){for(var u={},h=0;h<l.length;h++)u[l[h]]=1;return u}ee.exports=function(l){if((l=M(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&n(l.system,T),l.system;if(n(l.style,p),n(l.variant,t),n(l.weight,_),n(l.stretch,s),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!k)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=r),Array.isArray(l.family)&&(l.family.length||(l.family=[r]),l.family=l.family.map(function(h){return i[h]?h:'"'+h+'"'}).join(", "));var u=[];return u.push(l.style),l.variant!==l.style&&u.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&u.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&u.push(l.stretch),u.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),u.push(l.family),u.filter(Boolean).join(" ")}},27940:function(ee,R,e){var M,k=e(81680),o=e(18496),T=e(87396),_=e(95920),p=e(50868),s=e(84323),t=Function.prototype.bind,i=Object.defineProperty,r=Object.prototype.hasOwnProperty;M=function(n,a,l){var u,h=o(a)&&T(a.value);return delete(u=_(a)).writable,delete u.value,u.get=function(){return!l.overwriteDefinition&&r.call(this,n)?h:(a.value=t.call(h,l.resolveContext?l.resolveContext(this):this),i(this,n,a),this[n])},u},ee.exports=function(n){var a=p(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),s(n,function(l,u){return M(u,l,a)})}},21092:function(ee,R,e){var M=e(81680),k=e(85488),o=e(38452),T=e(50868),_=e(71056),p=ee.exports=function(s,t){var i,r,n,a,l;return arguments.length<2||typeof s!="string"?(a=t,t=s,s=null):a=arguments[2],M(s)?(i=_.call(s,"c"),r=_.call(s,"e"),n=_.call(s,"w")):(i=n=!0,r=!1),l={value:t,configurable:i,enumerable:r,writable:n},a?o(T(a),l):l};p.gs=function(s,t,i){var r,n,a,l;return typeof s!="string"?(a=i,i=t,t=s,s=null):a=arguments[3],M(t)?k(t)?M(i)?k(i)||(a=i,i=void 0):i=void 0:(a=t,t=i=void 0):t=void 0,M(s)?(r=_.call(s,"c"),n=_.call(s,"e")):(r=!0,n=!1),l={get:t,set:i,configurable:r,enumerable:n},a?o(T(a),l):l}},84706:function(ee,R,e){function M(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}e.d(R,{XE:function(){return M},kv:function(){return T},mo:function(){return p},Uf:function(){return s},SY:function(){return t},ik:function(){return i},oh:function(){return r}}),(k=M).length===1&&(o=k,k=function(n,a){return M(o(n),a)});var k,o;function T(n,a){var l,u,h=n.length,c=-1;if(a==null){for(;++c<h;)if((l=n[c])!=null&&l>=l)for(u=l;++c<h;)(l=n[c])!=null&&l>u&&(u=l)}else for(;++c<h;)if((l=a(n[c],c,n))!=null&&l>=l)for(u=l;++c<h;)(l=a(n[c],c,n))!=null&&l>u&&(u=l);return u}function _(n){return n===null?NaN:+n}function p(n,a){var l,u=n.length,h=u,c=-1,x=0;if(a==null)for(;++c<u;)isNaN(l=_(n[c]))?--h:x+=l;else for(;++c<u;)isNaN(l=_(a(n[c],c,n)))?--h:x+=l;if(h)return x/h}function s(n){for(var a,l,u,h=n.length,c=-1,x=0;++c<h;)x+=n[c].length;for(l=new Array(x);--h>=0;)for(a=(u=n[h]).length;--a>=0;)l[--x]=u[a];return l}function t(n,a){var l,u,h=n.length,c=-1;if(a==null){for(;++c<h;)if((l=n[c])!=null&&l>=l)for(u=l;++c<h;)(l=n[c])!=null&&u>l&&(u=l)}else for(;++c<h;)if((l=a(n[c],c,n))!=null&&l>=l)for(u=l;++c<h;)(l=a(n[c],c,n))!=null&&u>l&&(u=l);return u}function i(n,a,l){n=+n,a=+a,l=(h=arguments.length)<2?(a=n,n=0,1):h<3?1:+l;for(var u=-1,h=0|Math.max(0,Math.ceil((a-n)/l)),c=new Array(h);++u<h;)c[u]=n+u*l;return c}function r(n,a){var l,u=n.length,h=-1,c=0;if(a==null)for(;++h<u;)(l=+n[h])&&(c+=l);else for(;++h<u;)(l=+a(n[h],h,n))&&(c+=l);return c}},34712:function(ee,R,e){e.d(R,{kH:function(){return T},UJ:function(){return _}});var M="$";function k(){}function o(a,l){var u=new k;if(a instanceof k)a.each(function(v,g){u.set(g,v)});else if(Array.isArray(a)){var h,c=-1,x=a.length;if(l==null)for(;++c<x;)u.set(c,a[c]);else for(;++c<x;)u.set(l(h=a[c],c,a),h)}else if(a)for(var d in a)u.set(d,a[d]);return u}k.prototype=o.prototype={constructor:k,has:function(a){return M+a in this},get:function(a){return this[M+a]},set:function(a,l){return this[M+a]=l,this},remove:function(a){var l=M+a;return l in this&&delete this[l]},clear:function(){for(var a in this)a[0]===M&&delete this[a]},keys:function(){var a=[];for(var l in this)l[0]===M&&a.push(l.slice(1));return a},values:function(){var a=[];for(var l in this)l[0]===M&&a.push(this[l]);return a},entries:function(){var a=[];for(var l in this)l[0]===M&&a.push({key:l.slice(1),value:this[l]});return a},size:function(){var a=0;for(var l in this)l[0]===M&&++a;return a},empty:function(){for(var a in this)if(a[0]===M)return!1;return!0},each:function(a){for(var l in this)l[0]===M&&a(this[l],l.slice(1),this)}};var T=o;function _(){var a,l,u,h=[],c=[];function x(v,g,y,m){if(g>=h.length)return a!=null&&v.sort(a),l!=null?l(v):v;for(var b,f,S,w=-1,E=v.length,O=h[g++],C=T(),P=y();++w<E;)(S=C.get(b=O(f=v[w])+""))?S.push(f):C.set(b,[f]);return C.each(function(D,U){m(P,U,x(D,g,y,m))}),P}function d(v,g){if(++g>h.length)return v;var y,m=c[g-1];return l!=null&&g>=h.length?y=v.entries():(y=[],v.each(function(b,f){y.push({key:f,values:d(b,g)})})),m!=null?y.sort(function(b,f){return m(b.key,f.key)}):y}return u={object:function(v){return x(v,0,p,s)},map:function(v){return x(v,0,t,i)},entries:function(v){return d(x(v,0,t,i),0)},key:function(v){return h.push(v),u},sortKeys:function(v){return c[h.length-1]=v,u},sortValues:function(v){return a=v,u},rollup:function(v){return l=v,u}}}function p(){return{}}function s(a,l,u){a[l]=u}function t(){return T()}function i(a,l,u){a.set(l,u)}function r(){}var n=T.prototype;r.prototype={constructor:r,has:n.has,add:function(a){return this[M+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49812:function(ee,R,e){function M(ye,me){var Me;function Pe(){var ge,oe,ie=Me.length,de=0,Se=0;for(ge=0;ge<ie;++ge)de+=(oe=Me[ge]).x,Se+=oe.y;for(de=de/ie-ye,Se=Se/ie-me,ge=0;ge<ie;++ge)(oe=Me[ge]).x-=de,oe.y-=Se}return ye==null&&(ye=0),me==null&&(me=0),Pe.initialize=function(ge){Me=ge},Pe.x=function(ge){return arguments.length?(ye=+ge,Pe):ye},Pe.y=function(ge){return arguments.length?(me=+ge,Pe):me},Pe}function k(ye){return function(){return ye}}function o(){return 1e-6*(Math.random()-.5)}function T(ye,me,Me,Pe){if(isNaN(me)||isNaN(Me))return ye;var ge,oe,ie,de,Se,_e,we,Ae,Oe,ze=ye._root,pe={data:Pe},be=ye._x0,ke=ye._y0,Ie=ye._x1,Ee=ye._y1;if(!ze)return ye._root=pe,ye;for(;ze.length;)if((_e=me>=(oe=(be+Ie)/2))?be=oe:Ie=oe,(we=Me>=(ie=(ke+Ee)/2))?ke=ie:Ee=ie,ge=ze,!(ze=ze[Ae=we<<1|_e]))return ge[Ae]=pe,ye;if(de=+ye._x.call(null,ze.data),Se=+ye._y.call(null,ze.data),me===de&&Me===Se)return pe.next=ze,ge?ge[Ae]=pe:ye._root=pe,ye;do ge=ge?ge[Ae]=new Array(4):ye._root=new Array(4),(_e=me>=(oe=(be+Ie)/2))?be=oe:Ie=oe,(we=Me>=(ie=(ke+Ee)/2))?ke=ie:Ee=ie;while((Ae=we<<1|_e)==(Oe=(Se>=ie)<<1|de>=oe));return ge[Oe]=ze,ge[Ae]=pe,ye}function _(ye,me,Me,Pe,ge){this.node=ye,this.x0=me,this.y0=Me,this.x1=Pe,this.y1=ge}function p(ye){return ye[0]}function s(ye){return ye[1]}function t(ye,me,Me){var Pe=new i(me??p,Me??s,NaN,NaN,NaN,NaN);return ye==null?Pe:Pe.addAll(ye)}function i(ye,me,Me,Pe,ge,oe){this._x=ye,this._y=me,this._x0=Me,this._y0=Pe,this._x1=ge,this._y1=oe,this._root=void 0}function r(ye){for(var me={data:ye.data},Me=me;ye=ye.next;)Me=Me.next={data:ye.data};return me}e.r(R),e.d(R,{forceCenter:function(){return M},forceCollide:function(){return u},forceLink:function(){return d},forceManyBody:function(){return ce},forceRadial:function(){return fe},forceSimulation:function(){return ae},forceX:function(){return he},forceY:function(){return ve}});var n=t.prototype=i.prototype;function a(ye){return ye.x+ye.vx}function l(ye){return ye.y+ye.vy}function u(ye){var me,Me,Pe=1,ge=1;function oe(){for(var Se,_e,we,Ae,Oe,ze,pe,be=me.length,ke=0;ke<ge;++ke)for(_e=t(me,a,l).visitAfter(ie),Se=0;Se<be;++Se)we=me[Se],ze=Me[we.index],pe=ze*ze,Ae=we.x+we.vx,Oe=we.y+we.vy,_e.visit(Ie);function Ie(Ee,Be,Ve,Ze,rt){var it=Ee.data,dt=Ee.r,vt=ze+dt;if(!it)return Be>Ae+vt||Ze<Ae-vt||Ve>Oe+vt||rt<Oe-vt;if(it.index>we.index){var ht=Ae-it.x-it.vx,Qe=Oe-it.y-it.vy,Je=ht*ht+Qe*Qe;Je<vt*vt&&(ht===0&&(Je+=(ht=o())*ht),Qe===0&&(Je+=(Qe=o())*Qe),Je=(vt-(Je=Math.sqrt(Je)))/Je*Pe,we.vx+=(ht*=Je)*(vt=(dt*=dt)/(pe+dt)),we.vy+=(Qe*=Je)*vt,it.vx-=ht*(vt=1-vt),it.vy-=Qe*vt)}}}function ie(Se){if(Se.data)return Se.r=Me[Se.data.index];for(var _e=Se.r=0;_e<4;++_e)Se[_e]&&Se[_e].r>Se.r&&(Se.r=Se[_e].r)}function de(){if(me){var Se,_e,we=me.length;for(Me=new Array(we),Se=0;Se<we;++Se)_e=me[Se],Me[_e.index]=+ye(_e,Se,me)}}return typeof ye!="function"&&(ye=k(ye==null?1:+ye)),oe.initialize=function(Se){me=Se,de()},oe.iterations=function(Se){return arguments.length?(ge=+Se,oe):ge},oe.strength=function(Se){return arguments.length?(Pe=+Se,oe):Pe},oe.radius=function(Se){return arguments.length?(ye=typeof Se=="function"?Se:k(+Se),de(),oe):ye},oe}n.copy=function(){var ye,me,Me=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Pe=this._root;if(!Pe)return Me;if(!Pe.length)return Me._root=r(Pe),Me;for(ye=[{source:Pe,target:Me._root=new Array(4)}];Pe=ye.pop();)for(var ge=0;ge<4;++ge)(me=Pe.source[ge])&&(me.length?ye.push({source:me,target:Pe.target[ge]=new Array(4)}):Pe.target[ge]=r(me));return Me},n.add=function(ye){var me=+this._x.call(null,ye),Me=+this._y.call(null,ye);return T(this.cover(me,Me),me,Me,ye)},n.addAll=function(ye){var me,Me,Pe,ge,oe=ye.length,ie=new Array(oe),de=new Array(oe),Se=1/0,_e=1/0,we=-1/0,Ae=-1/0;for(Me=0;Me<oe;++Me)isNaN(Pe=+this._x.call(null,me=ye[Me]))||isNaN(ge=+this._y.call(null,me))||(ie[Me]=Pe,de[Me]=ge,Pe<Se&&(Se=Pe),Pe>we&&(we=Pe),ge<_e&&(_e=ge),ge>Ae&&(Ae=ge));if(Se>we||_e>Ae)return this;for(this.cover(Se,_e).cover(we,Ae),Me=0;Me<oe;++Me)T(this,ie[Me],de[Me],ye[Me]);return this},n.cover=function(ye,me){if(isNaN(ye=+ye)||isNaN(me=+me))return this;var Me=this._x0,Pe=this._y0,ge=this._x1,oe=this._y1;if(isNaN(Me))ge=(Me=Math.floor(ye))+1,oe=(Pe=Math.floor(me))+1;else{for(var ie,de,Se=ge-Me,_e=this._root;Me>ye||ye>=ge||Pe>me||me>=oe;)switch(de=(me<Pe)<<1|ye<Me,(ie=new Array(4))[de]=_e,_e=ie,Se*=2,de){case 0:ge=Me+Se,oe=Pe+Se;break;case 1:Me=ge-Se,oe=Pe+Se;break;case 2:ge=Me+Se,Pe=oe-Se;break;case 3:Me=ge-Se,Pe=oe-Se}this._root&&this._root.length&&(this._root=_e)}return this._x0=Me,this._y0=Pe,this._x1=ge,this._y1=oe,this},n.data=function(){var ye=[];return this.visit(function(me){if(!me.length)do ye.push(me.data);while(me=me.next)}),ye},n.extent=function(ye){return arguments.length?this.cover(+ye[0][0],+ye[0][1]).cover(+ye[1][0],+ye[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(ye,me,Me){var Pe,ge,oe,ie,de,Se,_e,we=this._x0,Ae=this._y0,Oe=this._x1,ze=this._y1,pe=[],be=this._root;for(be&&pe.push(new _(be,we,Ae,Oe,ze)),Me==null?Me=1/0:(we=ye-Me,Ae=me-Me,Oe=ye+Me,ze=me+Me,Me*=Me);Se=pe.pop();)if(!(!(be=Se.node)||(ge=Se.x0)>Oe||(oe=Se.y0)>ze||(ie=Se.x1)<we||(de=Se.y1)<Ae))if(be.length){var ke=(ge+ie)/2,Ie=(oe+de)/2;pe.push(new _(be[3],ke,Ie,ie,de),new _(be[2],ge,Ie,ke,de),new _(be[1],ke,oe,ie,Ie),new _(be[0],ge,oe,ke,Ie)),(_e=(me>=Ie)<<1|ye>=ke)&&(Se=pe[pe.length-1],pe[pe.length-1]=pe[pe.length-1-_e],pe[pe.length-1-_e]=Se)}else{var Ee=ye-+this._x.call(null,be.data),Be=me-+this._y.call(null,be.data),Ve=Ee*Ee+Be*Be;if(Ve<Me){var Ze=Math.sqrt(Me=Ve);we=ye-Ze,Ae=me-Ze,Oe=ye+Ze,ze=me+Ze,Pe=be.data}}return Pe},n.remove=function(ye){if(isNaN(oe=+this._x.call(null,ye))||isNaN(ie=+this._y.call(null,ye)))return this;var me,Me,Pe,ge,oe,ie,de,Se,_e,we,Ae,Oe,ze=this._root,pe=this._x0,be=this._y0,ke=this._x1,Ie=this._y1;if(!ze)return this;if(ze.length)for(;;){if((_e=oe>=(de=(pe+ke)/2))?pe=de:ke=de,(we=ie>=(Se=(be+Ie)/2))?be=Se:Ie=Se,me=ze,!(ze=ze[Ae=we<<1|_e]))return this;if(!ze.length)break;(me[Ae+1&3]||me[Ae+2&3]||me[Ae+3&3])&&(Me=me,Oe=Ae)}for(;ze.data!==ye;)if(Pe=ze,!(ze=ze.next))return this;return(ge=ze.next)&&delete ze.next,Pe?(ge?Pe.next=ge:delete Pe.next,this):me?(ge?me[Ae]=ge:delete me[Ae],(ze=me[0]||me[1]||me[2]||me[3])&&ze===(me[3]||me[2]||me[1]||me[0])&&!ze.length&&(Me?Me[Oe]=ze:this._root=ze),this):(this._root=ge,this)},n.removeAll=function(ye){for(var me=0,Me=ye.length;me<Me;++me)this.remove(ye[me]);return this},n.root=function(){return this._root},n.size=function(){var ye=0;return this.visit(function(me){if(!me.length)do++ye;while(me=me.next)}),ye},n.visit=function(ye){var me,Me,Pe,ge,oe,ie,de=[],Se=this._root;for(Se&&de.push(new _(Se,this._x0,this._y0,this._x1,this._y1));me=de.pop();)if(!ye(Se=me.node,Pe=me.x0,ge=me.y0,oe=me.x1,ie=me.y1)&&Se.length){var _e=(Pe+oe)/2,we=(ge+ie)/2;(Me=Se[3])&&de.push(new _(Me,_e,we,oe,ie)),(Me=Se[2])&&de.push(new _(Me,Pe,we,_e,ie)),(Me=Se[1])&&de.push(new _(Me,_e,ge,oe,we)),(Me=Se[0])&&de.push(new _(Me,Pe,ge,_e,we))}return this},n.visitAfter=function(ye){var me,Me=[],Pe=[];for(this._root&&Me.push(new _(this._root,this._x0,this._y0,this._x1,this._y1));me=Me.pop();){var ge=me.node;if(ge.length){var oe,ie=me.x0,de=me.y0,Se=me.x1,_e=me.y1,we=(ie+Se)/2,Ae=(de+_e)/2;(oe=ge[0])&&Me.push(new _(oe,ie,de,we,Ae)),(oe=ge[1])&&Me.push(new _(oe,we,de,Se,Ae)),(oe=ge[2])&&Me.push(new _(oe,ie,Ae,we,_e)),(oe=ge[3])&&Me.push(new _(oe,we,Ae,Se,_e))}Pe.push(me)}for(;me=Pe.pop();)ye(me.node,me.x0,me.y0,me.x1,me.y1);return this},n.x=function(ye){return arguments.length?(this._x=ye,this):this._x},n.y=function(ye){return arguments.length?(this._y=ye,this):this._y};var h=e(34712);function c(ye){return ye.index}function x(ye,me){var Me=ye.get(me);if(!Me)throw new Error("missing: "+me);return Me}function d(ye){var me,Me,Pe,ge,oe,ie=c,de=function(pe){return 1/Math.min(ge[pe.source.index],ge[pe.target.index])},Se=k(30),_e=1;function we(pe){for(var be=0,ke=ye.length;be<_e;++be)for(var Ie,Ee,Be,Ve,Ze,rt,it,dt=0;dt<ke;++dt)Ee=(Ie=ye[dt]).source,Ve=(Be=Ie.target).x+Be.vx-Ee.x-Ee.vx||o(),Ze=Be.y+Be.vy-Ee.y-Ee.vy||o(),Ve*=rt=((rt=Math.sqrt(Ve*Ve+Ze*Ze))-Me[dt])/rt*pe*me[dt],Ze*=rt,Be.vx-=Ve*(it=oe[dt]),Be.vy-=Ze*it,Ee.vx+=Ve*(it=1-it),Ee.vy+=Ze*it}function Ae(){if(Pe){var pe,be,ke=Pe.length,Ie=ye.length,Ee=(0,h.kH)(Pe,ie);for(pe=0,ge=new Array(ke);pe<Ie;++pe)(be=ye[pe]).index=pe,typeof be.source!="object"&&(be.source=x(Ee,be.source)),typeof be.target!="object"&&(be.target=x(Ee,be.target)),ge[be.source.index]=(ge[be.source.index]||0)+1,ge[be.target.index]=(ge[be.target.index]||0)+1;for(pe=0,oe=new Array(Ie);pe<Ie;++pe)be=ye[pe],oe[pe]=ge[be.source.index]/(ge[be.source.index]+ge[be.target.index]);me=new Array(Ie),Oe(),Me=new Array(Ie),ze()}}function Oe(){if(Pe)for(var pe=0,be=ye.length;pe<be;++pe)me[pe]=+de(ye[pe],pe,ye)}function ze(){if(Pe)for(var pe=0,be=ye.length;pe<be;++pe)Me[pe]=+Se(ye[pe],pe,ye)}return ye==null&&(ye=[]),we.initialize=function(pe){Pe=pe,Ae()},we.links=function(pe){return arguments.length?(ye=pe,Ae(),we):ye},we.id=function(pe){return arguments.length?(ie=pe,we):ie},we.iterations=function(pe){return arguments.length?(_e=+pe,we):_e},we.strength=function(pe){return arguments.length?(de=typeof pe=="function"?pe:k(+pe),Oe(),we):de},we.distance=function(pe){return arguments.length?(Se=typeof pe=="function"?pe:k(+pe),ze(),we):Se},we}var v={value:function(){}};function g(){for(var ye,me=0,Me=arguments.length,Pe={};me<Me;++me){if(!(ye=arguments[me]+"")||ye in Pe||/[\s.]/.test(ye))throw new Error("illegal type: "+ye);Pe[ye]=[]}return new y(Pe)}function y(ye){this._=ye}function m(ye,me){for(var Me,Pe=0,ge=ye.length;Pe<ge;++Pe)if((Me=ye[Pe]).name===me)return Me.value}function b(ye,me,Me){for(var Pe=0,ge=ye.length;Pe<ge;++Pe)if(ye[Pe].name===me){ye[Pe]=v,ye=ye.slice(0,Pe).concat(ye.slice(Pe+1));break}return Me!=null&&ye.push({name:me,value:Me}),ye}y.prototype=g.prototype={constructor:y,on:function(ye,me){var Me,Pe,ge=this._,oe=(Pe=ge,(ye+"").trim().split(/^|\s+/).map(function(Se){var _e="",we=Se.indexOf(".");if(we>=0&&(_e=Se.slice(we+1),Se=Se.slice(0,we)),Se&&!Pe.hasOwnProperty(Se))throw new Error("unknown type: "+Se);return{type:Se,name:_e}})),ie=-1,de=oe.length;if(!(arguments.length<2)){if(me!=null&&typeof me!="function")throw new Error("invalid callback: "+me);for(;++ie<de;)if(Me=(ye=oe[ie]).type)ge[Me]=b(ge[Me],ye.name,me);else if(me==null)for(Me in ge)ge[Me]=b(ge[Me],ye.name,null);return this}for(;++ie<de;)if((Me=(ye=oe[ie]).type)&&(Me=m(ge[Me],ye.name)))return Me},copy:function(){var ye={},me=this._;for(var Me in me)ye[Me]=me[Me].slice();return new y(ye)},call:function(ye,me){if((Me=arguments.length-2)>0)for(var Me,Pe,ge=new Array(Me),oe=0;oe<Me;++oe)ge[oe]=arguments[oe+2];if(!this._.hasOwnProperty(ye))throw new Error("unknown type: "+ye);for(oe=0,Me=(Pe=this._[ye]).length;oe<Me;++oe)Pe[oe].value.apply(me,ge)},apply:function(ye,me,Me){if(!this._.hasOwnProperty(ye))throw new Error("unknown type: "+ye);for(var Pe=this._[ye],ge=0,oe=Pe.length;ge<oe;++ge)Pe[ge].value.apply(me,Me)}};var f,S,w=g,E=0,O=0,C=0,P=1e3,D=0,U=0,I=0,N=typeof performance=="object"&&performance.now?performance:Date,W=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ye){setTimeout(ye,17)};function F(){return U||(W(j),U=N.now()+I)}function j(){U=0}function H(){this._call=this._time=this._next=null}function te(ye,me,Me){var Pe=new H;return Pe.restart(ye,me,Me),Pe}function Q(){U=(D=N.now())+I,E=O=0;try{(function(){F(),++E;for(var ye,me=f;me;)(ye=U-me._time)>=0&&me._call.call(null,ye),me=me._next;--E})()}finally{E=0,function(){for(var ye,me,Me=f,Pe=1/0;Me;)Me._call?(Pe>Me._time&&(Pe=Me._time),ye=Me,Me=Me._next):(me=Me._next,Me._next=null,Me=ye?ye._next=me:f=me);S=ye,K(Pe)}(),U=0}}function $(){var ye=N.now(),me=ye-D;me>P&&(I-=me,D=ye)}function K(ye){E||(O&&(O=clearTimeout(O)),ye-U>24?(ye<1/0&&(O=setTimeout(Q,ye-N.now()-I)),C&&(C=clearInterval(C))):(C||(D=N.now(),C=setInterval($,P)),E=1,W(Q)))}function X(ye){return ye.x}function Y(ye){return ye.y}H.prototype=te.prototype={constructor:H,restart:function(ye,me,Me){if(typeof ye!="function")throw new TypeError("callback is not a function");Me=(Me==null?F():+Me)+(me==null?0:+me),this._next||S===this||(S?S._next=this:f=this,S=this),this._call=ye,this._time=Me,K()},stop:function(){this._call&&(this._call=null,this._time=1/0,K())}};var re=10,se=Math.PI*(3-Math.sqrt(5));function ae(ye){var me,Me=1,Pe=.001,ge=1-Math.pow(Pe,1/300),oe=0,ie=.6,de=(0,h.kH)(),Se=te(we),_e=w("tick","end");function we(){Ae(),_e.call("tick",me),Me<Pe&&(Se.stop(),_e.call("end",me))}function Ae(pe){var be,ke,Ie=ye.length;pe===void 0&&(pe=1);for(var Ee=0;Ee<pe;++Ee)for(Me+=(oe-Me)*ge,de.each(function(Be){Be(Me)}),be=0;be<Ie;++be)(ke=ye[be]).fx==null?ke.x+=ke.vx*=ie:(ke.x=ke.fx,ke.vx=0),ke.fy==null?ke.y+=ke.vy*=ie:(ke.y=ke.fy,ke.vy=0);return me}function Oe(){for(var pe,be=0,ke=ye.length;be<ke;++be){if((pe=ye[be]).index=be,pe.fx!=null&&(pe.x=pe.fx),pe.fy!=null&&(pe.y=pe.fy),isNaN(pe.x)||isNaN(pe.y)){var Ie=re*Math.sqrt(be),Ee=be*se;pe.x=Ie*Math.cos(Ee),pe.y=Ie*Math.sin(Ee)}(isNaN(pe.vx)||isNaN(pe.vy))&&(pe.vx=pe.vy=0)}}function ze(pe){return pe.initialize&&pe.initialize(ye),pe}return ye==null&&(ye=[]),Oe(),me={tick:Ae,restart:function(){return Se.restart(we),me},stop:function(){return Se.stop(),me},nodes:function(pe){return arguments.length?(ye=pe,Oe(),de.each(ze),me):ye},alpha:function(pe){return arguments.length?(Me=+pe,me):Me},alphaMin:function(pe){return arguments.length?(Pe=+pe,me):Pe},alphaDecay:function(pe){return arguments.length?(ge=+pe,me):+ge},alphaTarget:function(pe){return arguments.length?(oe=+pe,me):oe},velocityDecay:function(pe){return arguments.length?(ie=1-pe,me):1-ie},force:function(pe,be){return arguments.length>1?(be==null?de.remove(pe):de.set(pe,ze(be)),me):de.get(pe)},find:function(pe,be,ke){var Ie,Ee,Be,Ve,Ze,rt=0,it=ye.length;for(ke==null?ke=1/0:ke*=ke,rt=0;rt<it;++rt)(Be=(Ie=pe-(Ve=ye[rt]).x)*Ie+(Ee=be-Ve.y)*Ee)<ke&&(Ze=Ve,ke=Be);return Ze},on:function(pe,be){return arguments.length>1?(_e.on(pe,be),me):_e.on(pe)}}}function ce(){var ye,me,Me,Pe,ge=k(-30),oe=1,ie=1/0,de=.81;function Se(Oe){var ze,pe=ye.length,be=t(ye,X,Y).visitAfter(we);for(Me=Oe,ze=0;ze<pe;++ze)me=ye[ze],be.visit(Ae)}function _e(){if(ye){var Oe,ze,pe=ye.length;for(Pe=new Array(pe),Oe=0;Oe<pe;++Oe)ze=ye[Oe],Pe[ze.index]=+ge(ze,Oe,ye)}}function we(Oe){var ze,pe,be,ke,Ie,Ee=0,Be=0;if(Oe.length){for(be=ke=Ie=0;Ie<4;++Ie)(ze=Oe[Ie])&&(pe=Math.abs(ze.value))&&(Ee+=ze.value,Be+=pe,be+=pe*ze.x,ke+=pe*ze.y);Oe.x=be/Be,Oe.y=ke/Be}else{(ze=Oe).x=ze.data.x,ze.y=ze.data.y;do Ee+=Pe[ze.data.index];while(ze=ze.next)}Oe.value=Ee}function Ae(Oe,ze,pe,be){if(!Oe.value)return!0;var ke=Oe.x-me.x,Ie=Oe.y-me.y,Ee=be-ze,Be=ke*ke+Ie*Ie;if(Ee*Ee/de<Be)return Be<ie&&(ke===0&&(Be+=(ke=o())*ke),Ie===0&&(Be+=(Ie=o())*Ie),Be<oe&&(Be=Math.sqrt(oe*Be)),me.vx+=ke*Oe.value*Me/Be,me.vy+=Ie*Oe.value*Me/Be),!0;if(!(Oe.length||Be>=ie)){(Oe.data!==me||Oe.next)&&(ke===0&&(Be+=(ke=o())*ke),Ie===0&&(Be+=(Ie=o())*Ie),Be<oe&&(Be=Math.sqrt(oe*Be)));do Oe.data!==me&&(Ee=Pe[Oe.data.index]*Me/Be,me.vx+=ke*Ee,me.vy+=Ie*Ee);while(Oe=Oe.next)}}return Se.initialize=function(Oe){ye=Oe,_e()},Se.strength=function(Oe){return arguments.length?(ge=typeof Oe=="function"?Oe:k(+Oe),_e(),Se):ge},Se.distanceMin=function(Oe){return arguments.length?(oe=Oe*Oe,Se):Math.sqrt(oe)},Se.distanceMax=function(Oe){return arguments.length?(ie=Oe*Oe,Se):Math.sqrt(ie)},Se.theta=function(Oe){return arguments.length?(de=Oe*Oe,Se):Math.sqrt(de)},Se}function fe(ye,me,Me){var Pe,ge,oe,ie=k(.1);function de(_e){for(var we=0,Ae=Pe.length;we<Ae;++we){var Oe=Pe[we],ze=Oe.x-me||1e-6,pe=Oe.y-Me||1e-6,be=Math.sqrt(ze*ze+pe*pe),ke=(oe[we]-be)*ge[we]*_e/be;Oe.vx+=ze*ke,Oe.vy+=pe*ke}}function Se(){if(Pe){var _e,we=Pe.length;for(ge=new Array(we),oe=new Array(we),_e=0;_e<we;++_e)oe[_e]=+ye(Pe[_e],_e,Pe),ge[_e]=isNaN(oe[_e])?0:+ie(Pe[_e],_e,Pe)}}return typeof ye!="function"&&(ye=k(+ye)),me==null&&(me=0),Me==null&&(Me=0),de.initialize=function(_e){Pe=_e,Se()},de.strength=function(_e){return arguments.length?(ie=typeof _e=="function"?_e:k(+_e),Se(),de):ie},de.radius=function(_e){return arguments.length?(ye=typeof _e=="function"?_e:k(+_e),Se(),de):ye},de.x=function(_e){return arguments.length?(me=+_e,de):me},de.y=function(_e){return arguments.length?(Me=+_e,de):Me},de}function he(ye){var me,Me,Pe,ge=k(.1);function oe(de){for(var Se,_e=0,we=me.length;_e<we;++_e)(Se=me[_e]).vx+=(Pe[_e]-Se.x)*Me[_e]*de}function ie(){if(me){var de,Se=me.length;for(Me=new Array(Se),Pe=new Array(Se),de=0;de<Se;++de)Me[de]=isNaN(Pe[de]=+ye(me[de],de,me))?0:+ge(me[de],de,me)}}return typeof ye!="function"&&(ye=k(ye==null?0:+ye)),oe.initialize=function(de){me=de,ie()},oe.strength=function(de){return arguments.length?(ge=typeof de=="function"?de:k(+de),ie(),oe):ge},oe.x=function(de){return arguments.length?(ye=typeof de=="function"?de:k(+de),ie(),oe):ye},oe}function ve(ye){var me,Me,Pe,ge=k(.1);function oe(de){for(var Se,_e=0,we=me.length;_e<we;++_e)(Se=me[_e]).vy+=(Pe[_e]-Se.y)*Me[_e]*de}function ie(){if(me){var de,Se=me.length;for(Me=new Array(Se),Pe=new Array(Se),de=0;de<Se;++de)Me[de]=isNaN(Pe[de]=+ye(me[de],de,me))?0:+ge(me[de],de,me)}}return typeof ye!="function"&&(ye=k(ye==null?0:+ye)),oe.initialize=function(de){me=de,ie()},oe.strength=function(de){return arguments.length?(ge=typeof de=="function"?de:k(+de),ie(),oe):ge},oe.y=function(de){return arguments.length?(ye=typeof de=="function"?de:k(+de),ie(),oe):ye},oe}},57624:function(ee,R,e){function M(u,h){if((c=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var c,x=u.slice(0,c);return[x.length>1?x[0]+x.slice(2):x,+u.slice(c+1)]}e.d(R,{E9:function(){return r},SO:function(){return l}});var k,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(u){if(!(h=o.exec(u)))throw new Error("invalid format: "+u);var h;return new _({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function _(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function p(u,h){var c=M(u,h);if(!c)return u+"";var x=c[0],d=c[1];return d<0?"0."+new Array(-d).join("0")+x:x.length>d+1?x.slice(0,d+1)+"."+x.slice(d+1):x+new Array(d-x.length+2).join("0")}T.prototype=_.prototype,_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(u,h){return(100*u).toFixed(h)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,h){return u.toExponential(h)},f:function(u,h){return u.toFixed(h)},g:function(u,h){return u.toPrecision(h)},o:function(u){return Math.round(u).toString(8)},p:function(u,h){return p(100*u,h)},r:p,s:function(u,h){var c=M(u,h);if(!c)return u+"";var x=c[0],d=c[1],v=d-(k=3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1,g=x.length;return v===g?x:v>g?x+new Array(v-g+1).join("0"):v>0?x.slice(0,v)+"."+x.slice(v):"0."+new Array(1-v).join("0")+M(u,Math.max(0,h+v-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var i,r,n=Array.prototype.map,a=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function l(u){var h,c,x=u.grouping===void 0||u.thousands===void 0?t:(h=n.call(u.grouping,Number),c=u.thousands+"",function(w,E){for(var O=w.length,C=[],P=0,D=h[0],U=0;O>0&&D>0&&(U+D+1>E&&(D=Math.max(1,E-U)),C.push(w.substring(O-=D,O+D)),!((U+=D+1)>E));)D=h[P=(P+1)%h.length];return C.reverse().join(c)}),d=u.currency===void 0?"":u.currency[0]+"",v=u.currency===void 0?"":u.currency[1]+"",g=u.decimal===void 0?".":u.decimal+"",y=u.numerals===void 0?t:function(w){return function(E){return E.replace(/[0-9]/g,function(O){return w[+O]})}}(n.call(u.numerals,String)),m=u.percent===void 0?"%":u.percent+"",b=u.minus===void 0?"-":u.minus+"",f=u.nan===void 0?"NaN":u.nan+"";function S(w){var E=(w=T(w)).fill,O=w.align,C=w.sign,P=w.symbol,D=w.zero,U=w.width,I=w.comma,N=w.precision,W=w.trim,F=w.type;F==="n"?(I=!0,F="g"):s[F]||(N===void 0&&(N=12),W=!0,F="g"),(D||E==="0"&&O==="=")&&(D=!0,E="0",O="=");var j=P==="$"?d:P==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",H=P==="$"?v:/[%p]/.test(F)?m:"",te=s[F],Q=/[defgprs%]/.test(F);function $(K){var X,Y,re,se=j,ae=H;if(F==="c")ae=te(K)+ae,K="";else{var ce=(K=+K)<0||1/K<0;if(K=isNaN(K)?f:te(Math.abs(K),N),W&&(K=function(ve){e:for(var ye,me=ve.length,Me=1,Pe=-1;Me<me;++Me)switch(ve[Me]){case".":Pe=ye=Me;break;case"0":Pe===0&&(Pe=Me),ye=Me;break;default:if(!+ve[Me])break e;Pe>0&&(Pe=0)}return Pe>0?ve.slice(0,Pe)+ve.slice(ye+1):ve}(K)),ce&&+K==0&&C!=="+"&&(ce=!1),se=(ce?C==="("?C:b:C==="-"||C==="("?"":C)+se,ae=(F==="s"?a[8+k/3]:"")+ae+(ce&&C==="("?")":""),Q){for(X=-1,Y=K.length;++X<Y;)if(48>(re=K.charCodeAt(X))||re>57){ae=(re===46?g+K.slice(X+1):K.slice(X))+ae,K=K.slice(0,X);break}}}I&&!D&&(K=x(K,1/0));var fe=se.length+K.length+ae.length,he=fe<U?new Array(U-fe+1).join(E):"";switch(I&&D&&(K=x(he+K,he.length?U-ae.length:1/0),he=""),O){case"<":K=se+K+ae+he;break;case"=":K=se+he+K+ae;break;case"^":K=he.slice(0,fe=he.length>>1)+se+K+ae+he.slice(fe);break;default:K=he+se+K+ae}return y(K)}return N=N===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N)),$.toString=function(){return w+""},$}return{format:S,formatPrefix:function(w,E){var O,C=S(((w=T(w)).type="f",w)),P=3*Math.max(-8,Math.min(8,Math.floor((O=E,((O=M(Math.abs(O)))?O[1]:NaN)/3)))),D=Math.pow(10,-P),U=a[8+P/3];return function(I){return C(D*I)+U}}}}i=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=i.format,i.formatPrefix},87108:function(ee,R,e){e.r(R),e.d(R,{geoAiry:function(){return I},geoAiryRaw:function(){return U},geoAitoff:function(){return W},geoAitoffRaw:function(){return N},geoArmadillo:function(){return j},geoArmadilloRaw:function(){return F},geoAugust:function(){return te},geoAugustRaw:function(){return H},geoBaker:function(){return X},geoBakerRaw:function(){return K},geoBerghaus:function(){return se},geoBerghausRaw:function(){return re},geoBertin1953:function(){return Me},geoBertin1953Raw:function(){return me},geoBoggs:function(){return we},geoBoggsRaw:function(){return _e},geoBonne:function(){return be},geoBonneRaw:function(){return pe},geoBottomley:function(){return Ie},geoBottomleyRaw:function(){return ke},geoBromley:function(){return Be},geoBromleyRaw:function(){return Ee},geoChamberlin:function(){return Je},geoChamberlinAfrica:function(){return Qe},geoChamberlinRaw:function(){return vt},geoCollignon:function(){return Ot},geoCollignonRaw:function(){return Tt},geoCraig:function(){return Mt},geoCraigRaw:function(){return Pt},geoCraster:function(){return Ne},geoCrasterRaw:function(){return Ye},geoCylindricalEqualArea:function(){return ot},geoCylindricalEqualAreaRaw:function(){return We},geoCylindricalStereographic:function(){return Re},geoCylindricalStereographicRaw:function(){return tt},geoEckert1:function(){return nt},geoEckert1Raw:function(){return Fe},geoEckert2:function(){return ct},geoEckert2Raw:function(){return Ge},geoEckert3:function(){return gt},geoEckert3Raw:function(){return pt},geoEckert4:function(){return kt},geoEckert4Raw:function(){return ut},geoEckert5:function(){return At},geoEckert5Raw:function(){return mt},geoEckert6:function(){return Ct},geoEckert6Raw:function(){return Lt},geoEisenlohr:function(){return rn},geoEisenlohrRaw:function(){return Gt},geoFahey:function(){return Rt},geoFaheyRaw:function(){return Wt},geoFoucaut:function(){return bn},geoFoucautRaw:function(){return Ln},geoFoucautSinusoidal:function(){return Kt},geoFoucautSinusoidalRaw:function(){return hn},geoGilbert:function(){return xn},geoGingery:function(){return Rn},geoGingeryRaw:function(){return Mn},geoGinzburg4:function(){return Jn},geoGinzburg4Raw:function(){return jn},geoGinzburg5:function(){return Gn},geoGinzburg5Raw:function(){return $n},geoGinzburg6:function(){return Jt},geoGinzburg6Raw:function(){return lr},geoGinzburg8:function(){return En},geoGinzburg8Raw:function(){return Qt},geoGinzburg9:function(){return Cn},geoGinzburg9Raw:function(){return pn},geoGringorten:function(){return Yn},geoGringortenQuincuncial:function(){return la},geoGringortenRaw:function(){return Fn},geoGuyou:function(){return bt},geoGuyouRaw:function(){return dn},geoHammer:function(){return he},geoHammerRaw:function(){return ce},geoHammerRetroazimuthal:function(){return cn},geoHammerRetroazimuthalRaw:function(){return Xt},geoHealpix:function(){return Dn},geoHealpixRaw:function(){return tn},geoHill:function(){return Xn},geoHillRaw:function(){return Bn},geoHomolosine:function(){return mr},geoHomolosineRaw:function(){return ur},geoHufnagel:function(){return rr},geoHufnagelRaw:function(){return hr},geoHyperelliptical:function(){return ii},geoHyperellipticalRaw:function(){return Pr},geoInterrupt:function(){return ti},geoInterruptedBoggs:function(){return Or},geoInterruptedHomolosine:function(){return sa},geoInterruptedMollweide:function(){return uo},geoInterruptedMollweideHemispheres:function(){return Xa},geoInterruptedQuarticAuthalic:function(){return kl},geoInterruptedSinuMollweide:function(){return Ka},geoInterruptedSinusoidal:function(){return Ho},geoKavrayskiy7:function(){return Ea},geoKavrayskiy7Raw:function(){return Sa},geoLagrange:function(){return pi},geoLagrangeRaw:function(){return Ja},geoLarrivee:function(){return $a},geoLarriveeRaw:function(){return fo},geoLaskowski:function(){return Mo},geoLaskowskiRaw:function(){return Fa},geoLittrow:function(){return So},geoLittrowRaw:function(){return Qa},geoLoximuthal:function(){return Eo},geoLoximuthalRaw:function(){return ho},geoMiller:function(){return Ks},geoMillerRaw:function(){return eo},geoModifiedStereographic:function(){return Zo},geoModifiedStereographicAlaska:function(){return _l},geoModifiedStereographicGs48:function(){return wl},geoModifiedStereographicGs50:function(){return Yo},geoModifiedStereographicLee:function(){return as},geoModifiedStereographicMiller:function(){return to},geoModifiedStereographicRaw:function(){return Bs},geoMollweide:function(){return ie},geoMollweideRaw:function(){return oe},geoMtFlatPolarParabolic:function(){return Js},geoMtFlatPolarParabolicRaw:function(){return Ba},geoMtFlatPolarQuartic:function(){return po},geoMtFlatPolarQuarticRaw:function(){return Lo},geoMtFlatPolarSinusoidal:function(){return Co},geoMtFlatPolarSinusoidalRaw:function(){return go},geoNaturalEarth:function(){return Ur.c},geoNaturalEarth2:function(){return Tl},geoNaturalEarth2Raw:function(){return os},geoNaturalEarthRaw:function(){return Ur.g},geoNellHammer:function(){return ss},geoNellHammerRaw:function(){return Ns},geoNicolosi:function(){return Al},geoNicolosiRaw:function(){return js},geoPatterson:function(){return fl},geoPattersonRaw:function(){return Vs},geoPeirceQuincuncial:function(){return ts},geoPierceQuincuncial:function(){return ts},geoPolyconic:function(){return Jo},geoPolyconicRaw:function(){return us},geoPolyhedral:function(){return $r},geoPolyhedralButterfly:function(){return fs},geoPolyhedralCollignon:function(){return As},geoPolyhedralWaterman:function(){return Ms},geoProject:function(){return Ss},geoQuantize:function(){return mo},geoQuincuncial:function(){return Do},geoRectangularPolyconic:function(){return Pa},geoRectangularPolyconicRaw:function(){return Oa},geoRobinson:function(){return wr},geoRobinsonRaw:function(){return Va},geoSatellite:function(){return $s},geoSatelliteRaw:function(){return Es},geoSinuMollweide:function(){return Zn},geoSinuMollweideRaw:function(){return Qn},geoSinusoidal:function(){return ze},geoSinusoidalRaw:function(){return Oe},geoStitch:function(){return Gi},geoTimes:function(){return io},geoTimesRaw:function(){return ua},geoTwoPointAzimuthal:function(){return fa},geoTwoPointAzimuthalRaw:function(){return ps},geoTwoPointAzimuthalUsa:function(){return ds},geoTwoPointEquidistant:function(){return rs},geoTwoPointEquidistantRaw:function(){return Vr},geoTwoPointEquidistantUsa:function(){return ao},geoVanDerGrinten:function(){return gs},geoVanDerGrinten2:function(){return Ga},geoVanDerGrinten2Raw:function(){return vs},geoVanDerGrinten3:function(){return is},geoVanDerGrinten3Raw:function(){return li},geoVanDerGrinten4:function(){return Cr},geoVanDerGrinten4Raw:function(){return kr},geoVanDerGrintenRaw:function(){return Ha},geoWagner:function(){return oo},geoWagner4:function(){return hl},geoWagner4Raw:function(){return Qr},geoWagner6:function(){return ni},geoWagner6Raw:function(){return ka},geoWagner7:function(){return bo},geoWagnerRaw:function(){return Ta},geoWiechel:function(){return va},geoWiechelRaw:function(){return di},geoWinkel3:function(){return Qs},geoWinkel3Raw:function(){return jo}});var M=e(87952),k=Math.abs,o=Math.atan,T=Math.atan2,_=Math.cos,p=Math.exp,s=Math.floor,t=Math.log,i=Math.max,r=Math.min,n=Math.pow,a=Math.round,l=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},u=Math.sin,h=Math.tan,c=1e-6,x=1e-12,d=Math.PI,v=d/2,g=d/4,y=Math.SQRT1_2,m=C(2),b=C(d),f=2*d,S=180/d,w=d/180;function E(Xe){return Xe>1?v:Xe<-1?-v:Math.asin(Xe)}function O(Xe){return Xe>1?0:Xe<-1?d:Math.acos(Xe)}function C(Xe){return Xe>0?Math.sqrt(Xe):0}function P(Xe){return(p(Xe)-p(-Xe))/2}function D(Xe){return(p(Xe)+p(-Xe))/2}function U(Xe){var $e=h(Xe/2),at=2*t(_(Xe/2))/($e*$e);function B(G,q){var L=_(G),V=_(q),J=u(q),ne=V*L,ue=-((1-ne?t((1+ne)/2)/(1-ne):-.5)+at/(1+ne));return[ue*V*u(G),ue*J]}return B.invert=function(G,q){var L,V=C(G*G+q*q),J=-Xe/2,ne=50;if(!V)return[0,0];do{var ue=J/2,xe=_(ue),Le=u(ue),De=Le/xe,Ue=-t(k(xe));J-=L=(2/De*Ue-at*De-V)/(-Ue/(Le*Le)+1-at/(2*xe*xe))*(xe<0?.7:1)}while(k(L)>c&&--ne>0);var qe=u(J);return[T(G*qe,V*_(J)),E(q*qe/V)]},B}function I(){var Xe=v,$e=(0,M.U)(U),at=$e(Xe);return at.radius=function(B){return arguments.length?$e(Xe=B*w):Xe*S},at.scale(179.976).clipAngle(147)}function N(Xe,$e){var at=_($e),B=function(G){return G?G/Math.sin(G):1}(O(at*_(Xe/=2)));return[2*at*u(Xe)*B,u($e)*B]}function W(){return(0,M.c)(N).scale(152.63)}function F(Xe){var $e=u(Xe),at=_(Xe),B=Xe>=0?1:-1,G=h(B*Xe),q=(1+$e-at)/2;function L(V,J){var ne=_(J),ue=_(V/=2);return[(1+ne)*u(V),(B*J>-T(ue,G)-.001?0:10*-B)+q+u(J)*at-(1+ne)*$e*ue]}return L.invert=function(V,J){var ne=0,ue=0,xe=50;do{var Le=_(ne),De=u(ne),Ue=_(ue),qe=u(ue),et=1+Ue,lt=et*De-V,ft=q+qe*at-et*$e*Le-J,xt=et*Le/2,St=-De*qe,wt=$e*et*De/2,Dt=at*Ue+$e*Le*qe,Et=St*wt-Dt*xt,Yt=(ft*St-lt*Dt)/Et/2,qt=(lt*wt-ft*xt)/Et;k(qt)>2&&(qt/=2),ne-=Yt,ue-=qt}while((k(Yt)>c||k(qt)>c)&&--xe>0);return B*ue>-T(_(ne),G)-.001?[2*ne,ue]:null},L}function j(){var Xe=20*w,$e=Xe>=0?1:-1,at=h($e*Xe),B=(0,M.U)(F),G=B(Xe),q=G.stream;return G.parallel=function(L){return arguments.length?(at=h(($e=(Xe=L*w)>=0?1:-1)*Xe),B(Xe)):Xe*S},G.stream=function(L){var V=G.rotate(),J=q(L),ne=(G.rotate([0,0]),q(L)),ue=G.precision();return G.rotate(V),J.sphere=function(){ne.polygonStart(),ne.lineStart();for(var xe=-180*$e;$e*xe<180;xe+=90*$e)ne.point(xe,90*$e);if(Xe)for(;$e*(xe-=3*$e*ue)>=-180;)ne.point(xe,$e*-T(_(xe*w/2),at)*S);ne.lineEnd(),ne.polygonEnd()},J},G.scale(218.695).center([0,28.0974])}function H(Xe,$e){var at=h($e/2),B=C(1-at*at),G=1+B*_(Xe/=2),q=u(Xe)*B/G,L=at/G,V=q*q,J=L*L;return[1.3333333333333333*q*(3+V-3*J),1.3333333333333333*L*(3+3*V-J)]}function te(){return(0,M.c)(H).scale(66.1603)}N.invert=function(Xe,$e){if(!(Xe*Xe+4*$e*$e>d*d+c)){var at=Xe,B=$e,G=25;do{var q,L=u(at),V=u(at/2),J=_(at/2),ne=u(B),ue=_(B),xe=u(2*B),Le=ne*ne,De=ue*ue,Ue=V*V,qe=1-De*J*J,et=qe?O(ue*J)*C(q=1/qe):q=0,lt=2*et*ue*V-Xe,ft=et*ne-$e,xt=q*(De*Ue+et*ue*J*Le),St=q*(.5*L*xe-2*et*ne*V),wt=.25*q*(xe*V-et*ne*De*L),Dt=q*(Le*J+et*Ue*ue),Et=St*wt-Dt*xt;if(!Et)break;var Yt=(ft*St-lt*Dt)/Et,qt=(lt*wt-ft*xt)/Et;at-=Yt,B-=qt}while((k(Yt)>c||k(qt)>c)&&--G>0);return[at,B]}},H.invert=function(Xe,$e){if($e*=.375,!(Xe*=.375)&&k($e)>1)return null;var at=1+Xe*Xe+$e*$e,B=C((at-C(at*at-4*$e*$e))/2),G=E(B)/3,q=B?function(ne){return t(ne+C(ne*ne-1))}(k($e/B))/3:function(ne){return t(ne+C(ne*ne+1))}(k(Xe))/3,L=_(G),V=D(q),J=V*V-L*L;return[2*l(Xe)*T(P(q)*L,.25-J),2*l($e)*T(V*u(G),.25+J)]};var Q=C(8),$=t(1+m);function K(Xe,$e){var at=k($e);return at<g?[Xe,t(h(g+$e/2))]:[Xe*_(at)*(2*m-1/u(at)),l($e)*(2*m*(at-g)-t(h(at/2)))]}function X(){return(0,M.c)(K).scale(112.314)}K.invert=function(Xe,$e){if((B=k($e))<$)return[Xe,2*o(p($e))-v];var at,B,G=g,q=25;do{var L=_(G/2),V=h(G/2);G-=at=(Q*(G-g)-t(V)-B)/(Q-L*L/(2*V))}while(k(at)>x&&--q>0);return[Xe/(_(G)*(Q-1/u(G))),l($e)*G]};var Y=e(69020);function re(Xe){var $e=2*d/Xe;function at(B,G){var q=(0,Y.O)(B,G);if(k(B)>v){var L=T(q[1],q[0]),V=C(q[0]*q[0]+q[1]*q[1]),J=$e*a((L-v)/$e)+v,ne=T(u(L-=J),2-_(L));L=J+E(d/V*u(ne))-ne,q[0]=V*_(L),q[1]=V*u(L)}return q}return at.invert=function(B,G){var q=C(B*B+G*G);if(q>v){var L=T(G,B),V=$e*a((L-v)/$e)+v,J=L>V?-1:1,ne=q*_(V-L),ue=1/h(J*O((ne-d)/C(d*(d-2*ne)+q*q)));L=V+2*o((ue+J*C(ue*ue-3))/3),B=q*_(L),G=q*u(L)}return Y.O.invert(B,G)},at}function se(){var Xe=5,$e=(0,M.U)(re),at=$e(Xe),B=at.stream,G=.01,q=-_(G*w),L=u(G*w);return at.lobes=function(V){return arguments.length?$e(Xe=+V):Xe},at.stream=function(V){var J=at.rotate(),ne=B(V),ue=(at.rotate([0,0]),B(V));return at.rotate(J),ne.sphere=function(){ue.polygonStart(),ue.lineStart();for(var xe=0,Le=360/Xe,De=2*d/Xe,Ue=90-180/Xe,qe=v;xe<Xe;++xe,Ue-=Le,qe-=De)ue.point(T(L*_(qe),q)*S,E(L*u(qe))*S),Ue<-90?(ue.point(-90,-180-Ue-G),ue.point(-90,-180-Ue+G)):(ue.point(90,Ue+G),ue.point(90,Ue-G));ue.lineEnd(),ue.polygonEnd()},ne},at.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ae=e(54724);function ce(Xe,$e){if(arguments.length<2&&($e=Xe),$e===1)return ae.y;if($e===1/0)return fe;function at(B,G){var q=(0,ae.y)(B/$e,G);return q[0]*=Xe,q}return at.invert=function(B,G){var q=ae.y.invert(B/Xe,G);return q[0]*=$e,q},at}function fe(Xe,$e){return[Xe*_($e)/_($e/=2),2*u($e)]}function he(){var Xe=2,$e=(0,M.U)(ce),at=$e(Xe);return at.coefficient=function(B){return arguments.length?$e(Xe=+B):Xe},at.scale(169.529)}function ve(Xe,$e,at){var B,G,q,L=100;at=at===void 0?0:+at,$e=+$e;do(G=Xe(at))===(q=Xe(at+c))&&(q=G+c),at-=B=-1*c*(G-$e)/(G-q);while(L-- >0&&k(B)>c);return L<0?NaN:at}function ye(Xe,$e,at){return $e===void 0&&($e=40),at===void 0&&(at=x),function(B,G,q,L){var V,J,ne;q=q===void 0?0:+q,L=L===void 0?0:+L;for(var ue=0;ue<$e;ue++){var xe=Xe(q,L),Le=xe[0]-B,De=xe[1]-G;if(k(Le)<at&&k(De)<at)break;var Ue=Le*Le+De*De;if(Ue>V)q-=J/=2,L-=ne/=2;else{V=Ue;var qe=(q>0?-1:1)*at,et=(L>0?-1:1)*at,lt=Xe(q+qe,L),ft=Xe(q,L+et),xt=(lt[0]-xe[0])/qe,St=(lt[1]-xe[1])/qe,wt=(ft[0]-xe[0])/et,Dt=(ft[1]-xe[1])/et,Et=Dt*xt-St*wt,Yt=(k(Et)<.5?.5:1)/Et;if(q+=J=(De*wt-Le*Dt)*Yt,L+=ne=(Le*St-De*xt)*Yt,k(J)<at&&k(ne)<at)break}}return[q,L]}}function me(){var Xe=ce(1.68,2);function $e(at,B){if(at+B<-1.4){var G=(at-B+1.6)*(at+B+1.4)/8;at+=G,B-=.8*G*u(B+d/2)}var q=Xe(at,B),L=(1-_(at*B))/12;return q[1]<0&&(q[0]*=1+L),q[1]>0&&(q[1]*=1+L/1.5*q[0]*q[0]),q}return $e.invert=ye($e),$e}function Me(){return(0,M.c)(me()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Pe(Xe,$e){var at,B=Xe*u($e),G=30;do $e-=at=($e+u($e)-B)/(1+_($e));while(k(at)>c&&--G>0);return $e/2}function ge(Xe,$e,at){function B(G,q){return[Xe*G*_(q=Pe(at,q)),$e*u(q)]}return B.invert=function(G,q){return q=E(q/$e),[G/(Xe*_(q)),E((2*q+u(2*q))/at)]},B}fe.invert=function(Xe,$e){var at=2*E($e/2);return[Xe*_(at/2)/_(at),at]};var oe=ge(m/v,m,d);function ie(){return(0,M.c)(oe).scale(169.529)}var de=2.00276,Se=1.11072;function _e(Xe,$e){var at=Pe(d,$e);return[de*Xe/(1/_($e)+Se/_(at)),($e+m*u(at))/de]}function we(){return(0,M.c)(_e).scale(160.857)}function Ae(Xe){var $e=0,at=(0,M.U)(Xe),B=at($e);return B.parallel=function(G){return arguments.length?at($e=G*w):$e*S},B}function Oe(Xe,$e){return[Xe*_($e),$e]}function ze(){return(0,M.c)(Oe).scale(152.63)}function pe(Xe){if(!Xe)return Oe;var $e=1/h(Xe);function at(B,G){var q=$e+Xe-G,L=q&&B*_(G)/q;return[q*u(L),$e-q*_(L)]}return at.invert=function(B,G){var q=C(B*B+(G=$e-G)*G),L=$e+Xe-q;return[q/_(L)*T(B,G),L]},at}function be(){return Ae(pe).scale(123.082).center([0,26.1441]).parallel(45)}function ke(Xe){function $e(at,B){var G=v-B,q=G&&at*Xe*u(G)/G;return[G*u(q)/Xe,v-G*_(q)]}return $e.invert=function(at,B){var G=at*Xe,q=v-B,L=C(G*G+q*q),V=T(G,q);return[(L?L/u(L):1)*V/Xe,v-L]},$e}function Ie(){var Xe=.5,$e=(0,M.U)(ke),at=$e(Xe);return at.fraction=function(B){return arguments.length?$e(Xe=+B):Xe},at.scale(158.837)}_e.invert=function(Xe,$e){var at,B,G=de*$e,q=$e<0?-g:g,L=25;do B=G-m*u(q),q-=at=(u(2*q)+2*q-d*u(B))/(2*_(2*q)+2+d*_(B)*m*_(q));while(k(at)>c&&--L>0);return B=G-m*u(q),[Xe*(1/_(B)+Se/_(q))/de,B]},Oe.invert=function(Xe,$e){return[Xe/_($e),$e]};var Ee=ge(1,4/d,d);function Be(){return(0,M.c)(Ee).scale(152.63)}var Ve=e(24052),Ze=e(92992);function rt(Xe,$e,at,B,G,q){var L,V=_(q);if(k(Xe)>1||k(q)>1)L=O(at*G+$e*B*V);else{var J=u(Xe/2),ne=u(q/2);L=2*E(C(J*J+$e*B*ne*ne))}return k(L)>c?[L,T(B*u(q),$e*G-at*B*V)]:[0,0]}function it(Xe,$e,at){return O((Xe*Xe+$e*$e-at*at)/(2*Xe*$e))}function dt(Xe){return Xe-2*d*s((Xe+d)/(2*d))}function vt(Xe,$e,at){for(var B,G=[[Xe[0],Xe[1],u(Xe[1]),_(Xe[1])],[$e[0],$e[1],u($e[1]),_($e[1])],[at[0],at[1],u(at[1]),_(at[1])]],q=G[2],L=0;L<3;++L,q=B)B=G[L],q.v=rt(B[1]-q[1],q[3],q[2],B[3],B[2],B[0]-q[0]),q.point=[0,0];var V=it(G[0].v[0],G[2].v[0],G[1].v[0]),J=it(G[0].v[0],G[1].v[0],G[2].v[0]),ne=d-V;G[2].point[1]=0,G[0].point[0]=-(G[1].point[0]=G[0].v[0]/2);var ue=[G[2].point[0]=G[0].point[0]+G[2].v[0]*_(V),2*(G[0].point[1]=G[1].point[1]=G[2].v[0]*u(V))];return function(xe,Le){var De,Ue=u(Le),qe=_(Le),et=new Array(3);for(De=0;De<3;++De){var lt=G[De];if(et[De]=rt(Le-lt[1],lt[3],lt[2],qe,Ue,xe-lt[0]),!et[De][0])return lt.point;et[De][1]=dt(et[De][1]-lt.v[1])}var ft=ue.slice();for(De=0;De<3;++De){var xt=De==2?0:De+1,St=it(G[De].v[0],et[De][0],et[xt][0]);et[De][1]<0&&(St=-St),De?De==1?(St=J-St,ft[0]-=et[De][0]*_(St),ft[1]-=et[De][0]*u(St)):(St=ne-St,ft[0]+=et[De][0]*_(St),ft[1]+=et[De][0]*u(St)):(ft[0]+=et[De][0]*_(St),ft[1]-=et[De][0]*u(St))}return ft[0]/=3,ft[1]/=3,ft}}function ht(Xe){return Xe[0]*=w,Xe[1]*=w,Xe}function Qe(){return Je([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Je(Xe,$e,at){var B=(0,Ve.c)({type:"MultiPoint",coordinates:[Xe,$e,at]}),G=[-B[0],-B[1]],q=(0,Ze.c)(G),L=vt(ht(q(Xe)),ht(q($e)),ht(q(at)));L.invert=ye(L);var V=(0,M.c)(L).rotate(G),J=V.center;return delete V.rotate,V.center=function(ne){return arguments.length?J(q(ne)):q.invert(J())},V.clipAngle(90)}function Tt(Xe,$e){var at=C(1-u($e));return[2/b*Xe*at,b*(1-at)]}function Ot(){return(0,M.c)(Tt).scale(95.6464).center([0,30])}function Pt(Xe){var $e=h(Xe);function at(B,G){return[B,(B?B/u(B):1)*(u(G)*_(B)-$e*_(G))]}return at.invert=$e?function(B,G){B&&(G*=u(B)/B);var q=_(B);return[B,2*T(C(q*q+$e*$e-G*G)-q,$e-G)]}:function(B,G){return[B,E(B?G*h(B)/B:G)]},at}function Mt(){return Ae(Pt).scale(249.828).clipAngle(90)}Tt.invert=function(Xe,$e){var at=(at=$e/b-1)*at;return[at>0?Xe*C(d/at)/2:0,E(1-at)]};var He=C(3);function Ye(Xe,$e){return[He*Xe*(2*_(2*$e/3)-1)/b,He*b*u($e/3)]}function Ne(){return(0,M.c)(Ye).scale(156.19)}function We(Xe){var $e=_(Xe);function at(B,G){return[B*$e,u(G)/$e]}return at.invert=function(B,G){return[B/$e,E(G*$e)]},at}function ot(){return Ae(We).parallel(38.58).scale(195.044)}function tt(Xe){var $e=_(Xe);function at(B,G){return[B*$e,(1+$e)*h(G/2)]}return at.invert=function(B,G){return[B/$e,2*o(G/(1+$e))]},at}function Re(){return Ae(tt).scale(124.75)}function Fe(Xe,$e){var at=C(8/(3*d));return[at*Xe*(1-k($e)/d),at*$e]}function nt(){return(0,M.c)(Fe).scale(165.664)}function Ge(Xe,$e){var at=C(4-3*u(k($e)));return[2/C(6*d)*Xe*at,l($e)*C(2*d/3)*(2-at)]}function ct(){return(0,M.c)(Ge).scale(165.664)}function pt(Xe,$e){var at=C(d*(4+d));return[2/at*Xe*(1+C(1-4*$e*$e/(d*d))),4/at*$e]}function gt(){return(0,M.c)(pt).scale(180.739)}function ut(Xe,$e){var at=(2+v)*u($e);$e/=2;for(var B=0,G=1/0;B<10&&k(G)>c;B++){var q=_($e);$e-=G=($e+u($e)*(q+2)-at)/(2*q*(1+q))}return[2/C(d*(4+d))*Xe*(1+_($e)),2*C(d/(4+d))*u($e)]}function kt(){return(0,M.c)(ut).scale(180.739)}function mt(Xe,$e){return[Xe*(1+_($e))/C(2+d),2*$e/C(2+d)]}function At(){return(0,M.c)(mt).scale(173.044)}function Lt(Xe,$e){for(var at=(1+v)*u($e),B=0,G=1/0;B<10&&k(G)>c;B++)$e-=G=($e+u($e)-at)/(1+_($e));return at=C(2+d),[Xe*(1+_($e))/at,2*$e/at]}function Ct(){return(0,M.c)(Lt).scale(173.044)}Ye.invert=function(Xe,$e){var at=3*E($e/(He*b));return[b*Xe/(He*(2*_(2*at/3)-1)),at]},Fe.invert=function(Xe,$e){var at=C(8/(3*d)),B=$e/at;return[Xe/(at*(1-k(B)/d)),B]},Ge.invert=function(Xe,$e){var at=2-k($e)/C(2*d/3);return[Xe*C(6*d)/(2*at),l($e)*E((4-at*at)/3)]},pt.invert=function(Xe,$e){var at=C(d*(4+d))/2;return[Xe*at/(1+C(1-$e*$e*(4+d)/(4*d))),$e*at/2]},ut.invert=function(Xe,$e){var at=$e*C((4+d)/d)/2,B=E(at),G=_(B);return[Xe/(2/C(d*(4+d))*(1+G)),E((B+at*(G+2))/(2+v))]},mt.invert=function(Xe,$e){var at=C(2+d),B=$e*at/2;return[at*Xe/(1+_(B)),B]},Lt.invert=function(Xe,$e){var at=1+v,B=C(at/2);return[2*Xe*B/(1+_($e*=B)),E(($e+u($e))/at)]};var zt=3+2*m;function Gt(Xe,$e){var at=u(Xe/=2),B=_(Xe),G=C(_($e)),q=_($e/=2),L=u($e)/(q+m*B*G),V=C(2/(1+L*L)),J=C((m*q+(B+at)*G)/(m*q+(B-at)*G));return[zt*(V*(J-1/J)-2*t(J)),zt*(V*L*(J+1/J)-2*o(L))]}function rn(){return(0,M.c)(Gt).scale(62.5271)}Gt.invert=function(Xe,$e){if(!(at=H.invert(Xe/1.2,1.065*$e)))return null;var at,B=at[0],G=at[1],q=20;Xe/=zt,$e/=zt;do{var L=B/2,V=G/2,J=u(L),ne=_(L),ue=u(V),xe=_(V),Le=_(G),De=C(Le),Ue=ue/(xe+m*ne*De),qe=Ue*Ue,et=C(2/(1+qe)),lt=(m*xe+(ne+J)*De)/(m*xe+(ne-J)*De),ft=C(lt),xt=ft-1/ft,St=ft+1/ft,wt=et*xt-2*t(ft)-Xe,Dt=et*Ue*St-2*o(Ue)-$e,Et=ue&&y*De*J*qe/ue,Yt=(m*ne*xe+De)/(2*(xe+m*ne*De)*(xe+m*ne*De)*De),qt=-.5*Ue*et*et*et,Bt=qt*Et,fn=qt*Yt,gn=(gn=2*xe+m*De*(ne-J))*gn*ft,kn=(m*ne*xe*De+Le)/gn,On=-m*J*ue/(De*gn),Nn=xt*Bt-2*kn/ft+et*(kn+kn/lt),er=xt*fn-2*On/ft+et*(On+On/lt),or=Ue*St*Bt-2*Et/(1+qe)+et*St*Et+et*Ue*(kn-kn/lt),Hn=Ue*St*fn-2*Yt/(1+qe)+et*St*Yt+et*Ue*(On-On/lt),ar=er*or-Hn*Nn;if(!ar)break;var vr=(Dt*er-wt*Hn)/ar,Ar=(wt*or-Dt*Nn)/ar;B-=vr,G=i(-v,r(v,G-Ar))}while((k(vr)>c||k(Ar)>c)&&--q>0);return k(k(G)-v)<c?[0,G]:q&&[B,G]};var Nt=_(35*w);function Wt(Xe,$e){var at=h($e/2);return[Xe*Nt*C(1-at*at),(1+Nt)*at]}function Rt(){return(0,M.c)(Wt).scale(137.152)}function Ln(Xe,$e){var at=$e/2,B=_(at);return[2*Xe/b*_($e)*B*B,b*h(at)]}function bn(){return(0,M.c)(Ln).scale(135.264)}function hn(Xe){var $e=1-Xe,at=G(d,0)[0]-G(-d,0)[0],B=C(2*(G(0,v)[1]-G(0,-v)[1])/at);function G(V,J){var ne=_(J),ue=u(J);return[ne/($e+Xe*ne)*V,$e*J+Xe*ue]}function q(V,J){var ne=G(V,J);return[ne[0]*B,ne[1]/B]}function L(V){return q(0,V)[1]}return q.invert=function(V,J){var ne=ve(L,J);return[V/B*(Xe+$e/_(ne)),ne]},q}function Kt(){var Xe=.5,$e=(0,M.U)(hn),at=$e(Xe);return at.alpha=function(B){return arguments.length?$e(Xe=+B):Xe},at.scale(168.725)}Wt.invert=function(Xe,$e){var at=$e/(1+Nt);return[Xe&&Xe/(Nt*C(1-at*at)),2*o(at)]},Ln.invert=function(Xe,$e){var at=o($e/b),B=_(at),G=2*at;return[Xe*b/2/(_(G)*B*B),G]};var on=e(4888),$t=e(69604);function ln(Xe){return[Xe[0]/2,E(h(Xe[1]/2*w))*S]}function mn(Xe){return[2*Xe[0],2*o(u(Xe[1]*w))*S]}function xn(Xe){Xe==null&&(Xe=on.c);var $e=Xe(),at=(0,$t.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function B(q){return $e(ln(q))}function G(q){B[q]=function(){return arguments.length?($e[q].apply($e,arguments),B):$e[q]()}}return $e.invert&&(B.invert=function(q){return mn($e.invert(q))}),B.stream=function(q){var L=$e.stream(q),V=at.stream({point:function(J,ne){L.point(J/2,E(h(-ne/2*w))*S)},lineStart:function(){L.lineStart()},lineEnd:function(){L.lineEnd()},polygonStart:function(){L.polygonStart()},polygonEnd:function(){L.polygonEnd()}});return V.sphere=L.sphere,V},B.rotate=function(q){return arguments.length?(at.rotate(q),B):at.rotate()},B.center=function(q){return arguments.length?($e.center(ln(q)),B):mn($e.center())},G("angle"),G("clipAngle"),G("clipExtent"),G("fitExtent"),G("fitHeight"),G("fitSize"),G("fitWidth"),G("scale"),G("translate"),G("precision"),B.scale(249.5)}function Mn(Xe,$e){var at=2*d/$e,B=Xe*Xe;function G(q,L){var V=(0,Y.O)(q,L),J=V[0],ne=V[1],ue=J*J+ne*ne;if(ue>B){var xe=C(ue),Le=T(ne,J),De=at*a(Le/at),Ue=Le-De,qe=Xe*_(Ue),et=(Xe*u(Ue)-Ue*u(qe))/(v-qe),lt=Sn(Ue,et),ft=(d-Xe)/Tn(lt,qe,d);J=xe;var xt,St=50;do J-=xt=(Xe+Tn(lt,qe,J)*ft-xe)/(lt(J)*ft);while(k(xt)>c&&--St>0);ne=Ue*u(J),J<v&&(ne-=et*(J-v));var wt=u(De),Dt=_(De);V[0]=J*Dt-ne*wt,V[1]=J*wt+ne*Dt}return V}return G.invert=function(q,L){var V=q*q+L*L;if(V>B){var J=C(V),ne=T(L,q),ue=at*a(ne/at),xe=ne-ue;q=J*_(xe),L=J*u(xe);for(var Le=q-v,De=u(q),Ue=L/De,qe=q<v?1/0:0,et=10;;){var lt=Xe*u(Ue),ft=Xe*_(Ue),xt=u(ft),St=v-ft,wt=(lt-Ue*xt)/St,Dt=Sn(Ue,wt);if(k(qe)<x||!--et)break;Ue-=qe=(Ue*De-wt*Le-L)/(De-2*Le*(St*(ft+Ue*lt*_(ft)-xt)-lt*(lt-Ue*xt))/(St*St))}q=(J=Xe+Tn(Dt,ft,q)*(d-Xe)/Tn(Dt,ft,d))*_(ne=ue+Ue),L=J*u(ne)}return Y.O.invert(q,L)},G}function Sn(Xe,$e){return function(at){var B=Xe*_(at);return at<v&&(B-=$e),C(1+B*B)}}function Tn(Xe,$e,at){for(var B=(at-$e)/50,G=Xe($e)+Xe(at),q=1,L=$e;q<50;++q)G+=2*Xe(L+=B);return .5*G*B}function Rn(){var Xe=6,$e=30*w,at=_($e),B=u($e),G=(0,M.U)(Mn),q=G($e,Xe),L=q.stream,V=-_(.01*w),J=u(.01*w);return q.radius=function(ne){return arguments.length?(at=_($e=ne*w),B=u($e),G($e,Xe)):$e*S},q.lobes=function(ne){return arguments.length?G($e,Xe=+ne):Xe},q.stream=function(ne){var ue=q.rotate(),xe=L(ne),Le=(q.rotate([0,0]),L(ne));return q.rotate(ue),xe.sphere=function(){Le.polygonStart(),Le.lineStart();for(var De=0,Ue=2*d/Xe,qe=0;De<Xe;++De,qe-=Ue)Le.point(T(J*_(qe),V)*S,E(J*u(qe))*S),Le.point(T(B*_(qe-Ue/2),at)*S,E(B*u(qe-Ue/2))*S);Le.lineEnd(),Le.polygonEnd()},xe},q.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Pn(Xe,$e,at,B,G,q,L,V){function J(ne,ue){if(!ue)return[Xe*ne/d,0];var xe=ue*ue,Le=Xe+xe*($e+xe*(at+xe*B)),De=ue*(G-1+xe*(q-V+xe*L)),Ue=(Le*Le+De*De)/(2*De),qe=ne*E(Le/Ue)/d;return[Ue*u(qe),ue*(1+xe*V)+Ue*(1-_(qe))]}return arguments.length<8&&(V=0),J.invert=function(ne,ue){var xe,Le,De=d*ne/Xe,Ue=ue,qe=50;do{var et=Ue*Ue,lt=Xe+et*($e+et*(at+et*B)),ft=Ue*(G-1+et*(q-V+et*L)),xt=lt*lt+ft*ft,St=2*ft,wt=xt/St,Dt=wt*wt,Et=E(lt/wt)/d,Yt=De*Et,qt=lt*lt,Bt=(2*$e+et*(4*at+6*et*B))*Ue,fn=G+et*(3*q+5*et*L),gn=(2*(lt*Bt+ft*(fn-1))*St-xt*(2*(fn-1)))/(St*St),kn=_(Yt),On=u(Yt),Nn=wt*kn,er=wt*On,or=De/d*(1/C(1-qt/Dt))*(Bt*wt-lt*gn)/Dt,Hn=er-ne,ar=Ue*(1+et*V)+wt-Nn-ue,vr=gn*On+Nn*or,Ar=Nn*Et,Kn=1+gn-(gn*kn-er*or),ir=er*Et,br=vr*ir-Kn*Ar;if(!br)break;De-=xe=(ar*vr-Hn*Kn)/br,Ue-=Le=(Hn*ir-ar*Ar)/br}while((k(xe)>c||k(Le)>c)&&--qe>0);return[De,Ue]},J}var jn=Pn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Jn(){return(0,M.c)(jn).scale(149.995)}var $n=Pn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Gn(){return(0,M.c)($n).scale(153.93)}var lr=Pn(5/6*d,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Jt(){return(0,M.c)(lr).scale(130.945)}function Qt(Xe,$e){var at=Xe*Xe,B=$e*$e;return[Xe*(1-.162388*B)*(.87-952426e-9*at*at),$e*(1+B/12)]}function En(){return(0,M.c)(Qt).scale(131.747)}Qt.invert=function(Xe,$e){var at,B=Xe,G=$e,q=50;do{var L=G*G;G-=at=(G*(1+L/12)-$e)/(1+L/4)}while(k(at)>c&&--q>0);q=50,Xe/=1-.162388*L;do{var V=(V=B*B)*V;B-=at=(B*(.87-952426e-9*V)-Xe)/(.87-.00476213*V)}while(k(at)>c&&--q>0);return[B,G]};var pn=Pn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Cn(){return(0,M.c)(pn).scale(131.087)}function Vn(Xe){var $e=Xe(v,0)[0]-Xe(-v,0)[0];function at(B,G){var q=B>0?-.5:.5,L=Xe(B+q*d,G);return L[0]-=q*$e,L}return Xe.invert&&(at.invert=function(B,G){var q=B>0?-.5:.5,L=Xe.invert(B+q*$e,G),V=L[0]-q*d;return V<-d?V+=2*d:V>d&&(V-=2*d),L[0]=V,L}),at}function Fn(Xe,$e){var at=l(Xe),B=l($e),G=_($e),q=_(Xe)*G,L=u(Xe)*G,V=u(B*$e);Xe=k(T(L,V)),$e=E(q),k(Xe-v)>c&&(Xe%=v);var J=function(ne,ue){if(ue===v)return[0,0];var xe,Le,De=u(ue),Ue=De*De,qe=Ue*Ue,et=1+qe,lt=1+3*qe,ft=1-qe,xt=E(1/C(et)),St=ft+Ue*et*xt,wt=(1-De)/St,Dt=C(wt),Et=wt*et,Yt=C(Et),qt=Dt*ft;if(ne===0)return[0,-(qt+Ue*Yt)];var Bt,fn=_(ue),gn=1/fn,kn=2*De*fn,On=(-St*fn-(1-De)*((-3*Ue+xt*lt)*kn))/(St*St),Nn=-gn*kn,er=-gn*(Ue*et*On+wt*lt*kn),or=-2*gn*(ft*(.5*On/Dt)-2*Ue*Dt*kn),Hn=4*ne/d;if(ne>.222*d||ue<d/4&&ne>.175*d){if(xe=(qt+Ue*C(Et*(1+qe)-qt*qt))/(1+qe),ne>d/4)return[xe,xe];var ar=xe,vr=.5*xe;xe=.5*(vr+ar),Le=50;do{var Ar=xe*(or+Nn*C(Et-xe*xe))+er*E(xe/Yt)-Hn;if(!Ar)break;Ar<0?vr=xe:ar=xe,xe=.5*(vr+ar)}while(k(ar-vr)>c&&--Le>0)}else{xe=c,Le=25;do{var Kn=xe*xe,ir=C(Et-Kn),br=or+Nn*ir,sr=xe*br+er*E(xe/Yt)-Hn;xe-=Bt=ir?sr/(br+(er-Nn*Kn)/ir):0}while(k(Bt)>c&&--Le>0)}return[xe,-qt-Ue*C(Et-xe*xe)]}(Xe>d/4?v-Xe:Xe,$e);return Xe>d/4&&(V=J[0],J[0]=-J[1],J[1]=-V),J[0]*=at,J[1]*=-B,J}function Yn(){return(0,M.c)(Vn(Fn)).scale(239.75)}function fr(Xe,$e){var at,B,G,q,L,V;if($e<c)return[(q=u(Xe))-(at=$e*(Xe-q*(B=_(Xe)))/4)*B,B+at*q,1-$e*q*q/2,Xe-at];if($e>=1-c)return at=(1-$e)/4,G=1/(B=D(Xe)),[(q=((V=p(2*(V=Xe)))-1)/(V+1))+at*((L=B*P(Xe))-Xe)/(B*B),G-at*q*G*(L-Xe),G+at*q*G*(L+Xe),2*o(p(Xe))-v+at*(L-Xe)/B];var J=[1,0,0,0,0,0,0,0,0],ne=[C($e),0,0,0,0,0,0,0,0],ue=0;for(B=C(1-$e),L=1;k(ne[ue]/J[ue])>c&&ue<8;)at=J[ue++],ne[ue]=(at-B)/2,J[ue]=(at+B)/2,B=C(at*B),L*=2;G=L*J[ue]*Xe;do G=(E(q=ne[ue]*u(B=G)/J[ue])+G)/2;while(--ue);return[u(G),q=_(G),q/_(G-B),G]}function Zt(Xe,$e){if(!$e)return Xe;if($e===1)return t(h(Xe/2+g));for(var at=1,B=C(1-$e),G=C($e),q=0;k(G)>c;q++){if(Xe%d){var L=o(B*h(Xe)/at);L<0&&(L+=d),Xe+=L+~~(Xe/d)*d}else Xe+=Xe;G=(at+B)/2,B=C(at*B),G=((at=G)-B)/2}return Xe/(n(2,q)*at)}function dn(Xe,$e){var at=(m-1)/(m+1),B=C(1-at*at),G=Zt(v,B*B),q=t(h(d/4+k($e)/2)),L=p(-1*q)/C(at),V=function(ne,ue){var xe=ne*ne,Le=ue+1,De=1-xe-ue*ue;return[.5*((ne>=0?v:-v)-T(De,2*ne)),-.25*t(De*De+4*xe)+.5*t(Le*Le+xe)]}(L*_(-1*Xe),L*u(-1*Xe)),J=function(ne,ue,xe){var Le=k(ne),De=P(k(ue));if(Le){var Ue=1/u(Le),qe=1/(h(Le)*h(Le)),et=-(qe+xe*(De*De*Ue*Ue)-1+xe),lt=(-et+C(et*et-(xe-1)*qe*4))/2;return[Zt(o(1/C(lt)),xe)*l(ne),Zt(o(C((lt/qe-1)/xe)),1-xe)*l(ue)]}return[0,Zt(o(De),1-xe)*l(ue)]}(V[0],V[1],B*B);return[-J[1],($e>=0?1:-1)*(.5*G-J[0])]}function bt(){return(0,M.c)(Vn(dn)).scale(151.496)}Fn.invert=function(Xe,$e){k(Xe)>1&&(Xe=2*l(Xe)-Xe),k($e)>1&&($e=2*l($e)-$e);var at=l(Xe),B=l($e),G=-at*Xe,q=-B*$e,L=q/G<1,V=function(xe,Le){for(var De=0,Ue=1,qe=.5,et=50;;){var lt=qe*qe,ft=C(qe),xt=E(1/C(1+lt)),St=1-lt+qe*(1+lt)*xt,wt=(1-ft)/St,Dt=C(wt),Et=wt*(1+lt),Yt=Dt*(1-lt),qt=C(Et-xe*xe),Bt=Le+Yt+qe*qt;if(k(Ue-De)<x||--et==0||Bt===0)break;Bt>0?De=qe:Ue=qe,qe=.5*(De+Ue)}if(!et)return null;var fn=E(ft),gn=_(fn),kn=1/gn,On=2*ft*gn,Nn=(-St*gn-(-3*qe+xt*(1+3*lt))*On*(1-ft))/(St*St);return[d/4*(xe*(-2*kn*((1-lt)*(.5*Nn/Dt)-2*qe*Dt*On)+-kn*On*qt)+-kn*(qe*(1+lt)*Nn+wt*(1+3*lt)*On)*E(xe/C(Et))),fn]}(L?q:G,L?G:q),J=V[0],ne=V[1],ue=_(ne);return L&&(J=-v-J),[at*(T(u(J)*ue,-u(ne))+d),B*E(_(J)*ue)]},dn.invert=function(Xe,$e){var at,B,G,q,L,V,J=(m-1)/(m+1),ne=C(1-J*J),ue=(B=-Xe,G=ne*ne,(at=.5*Zt(v,ne*ne)-$e)?(q=fr(at,G),B?(V=(L=fr(B,1-G))[1]*L[1]+G*q[0]*q[0]*L[0]*L[0],[[q[0]*L[2]/V,q[1]*q[2]*L[0]*L[1]/V],[q[1]*L[1]/V,-q[0]*q[2]*L[0]*L[2]/V],[q[2]*L[1]*L[2]/V,-G*q[0]*q[1]*L[0]/V]]):[[q[0],0],[q[1],0],[q[2],0]]):[[0,(L=fr(B,1-G))[0]/L[1]],[1/L[1],0],[L[2]/L[1],0]]),xe=function(Le,De){var Ue=De[0]*De[0]+De[1]*De[1];return[(Le[0]*De[0]+Le[1]*De[1])/Ue,(Le[1]*De[0]-Le[0]*De[1])/Ue]}(ue[0],ue[1]);return[T(xe[1],xe[0])/-1,2*o(p(-.5*t(J*xe[0]*xe[0]+J*xe[1]*xe[1])))-v]};var Ut=e(61780);function Xt(Xe){var $e=u(Xe),at=_(Xe),B=un(Xe);function G(q,L){var V=B(q,L);q=V[0],L=V[1];var J=u(L),ne=_(L),ue=_(q),xe=O($e*J+at*ne*ue),Le=u(xe),De=k(Le)>c?xe/Le:1;return[De*at*u(q),(k(q)>v?De:-De)*($e*ne-at*J*ue)]}return B.invert=un(-Xe),G.invert=function(q,L){var V=C(q*q+L*L),J=-u(V),ne=_(V),ue=V*ne,xe=-L*J,Le=V*$e,De=C(ue*ue+xe*xe-Le*Le),Ue=T(ue*Le+xe*De,xe*Le-ue*De),qe=(V>v?-1:1)*T(q*J,V*_(Ue)*ne+L*u(Ue)*J);return B.invert(qe,Ue)},G}function un(Xe){var $e=u(Xe),at=_(Xe);return function(B,G){var q=_(G),L=_(B)*q,V=u(B)*q,J=u(G);return[T(V,L*at-J*$e),E(J*at+L*$e)]}}function cn(){var Xe=0,$e=(0,M.U)(Xt),at=$e(Xe),B=at.rotate,G=at.stream,q=(0,Ut.c)();return at.parallel=function(L){if(!arguments.length)return Xe*S;var V=at.rotate();return $e(Xe=L*w).rotate(V)},at.rotate=function(L){return arguments.length?(B.call(at,[L[0],L[1]-Xe*S]),q.center([-L[0],-L[1]]),at):((L=B.call(at))[1]+=Xe*S,L)},at.stream=function(L){return(L=G(L)).sphere=function(){L.polygonStart();var V,J=q.radius(89.99)().coordinates[0],ne=J.length-1,ue=-1;for(L.lineStart();++ue<ne;)L.point((V=J[ue])[0],V[1]);for(L.lineEnd(),ne=(J=q.radius(90.01)().coordinates[0]).length-1,L.lineStart();--ue>=0;)L.point((V=J[ue])[0],V[1]);L.lineEnd(),L.polygonEnd()},L},at.scale(79.4187).parallel(45).clipAngle(179.999)}var vn=e(84706),en=e(16016),Vt=E(1-1/3)*S,Ht=We(0);function tn(Xe){var $e=Vt*w,at=Tt(d,$e)[0]-Tt(-d,$e)[0],B=Ht(0,$e)[1],G=Tt(0,$e)[1],q=b-G,L=f/Xe,V=4/f,J=B+q*q*4/f;function ne(ue,xe){var Le,De=k(xe);if(De>$e){var Ue=r(Xe-1,i(0,s((ue+d)/L)));(Le=Tt(ue+=d*(Xe-1)/Xe-Ue*L,De))[0]=Le[0]*f/at-f*(Xe-1)/(2*Xe)+Ue*f/Xe,Le[1]=B+4*(Le[1]-G)*q/f,xe<0&&(Le[1]=-Le[1])}else Le=Ht(ue,xe);return Le[0]*=V,Le[1]/=J,Le}return ne.invert=function(ue,xe){ue/=V;var Le=k(xe*=J);if(Le>B){var De=r(Xe-1,i(0,s((ue+d)/L)));ue=(ue+d*(Xe-1)/Xe-De*L)*at/f;var Ue=Tt.invert(ue,.25*(Le-B)*f/q+G);return Ue[0]-=d*(Xe-1)/Xe-De*L,xe<0&&(Ue[1]=-Ue[1]),Ue}return Ht.invert(ue,xe)},ne}function sn(Xe,$e){return[Xe,1&$e?90-c:Vt]}function wn(Xe,$e){return[Xe,1&$e?-90+c:-Vt]}function An(Xe){return[Xe[0]*(1-c),Xe[1]]}function Dn(){var Xe=4,$e=(0,M.U)(tn),at=$e(Xe),B=at.stream;return at.lobes=function(G){return arguments.length?$e(Xe=+G):Xe},at.stream=function(G){var q=at.rotate(),L=B(G),V=(at.rotate([0,0]),B(G));return at.rotate(q),L.sphere=function(){var J,ne;(0,en.c)((J=180/Xe,ne=[].concat((0,vn.ik)(-180,180+J/2,J).map(sn),(0,vn.ik)(180,-180-J/2,-J).map(wn)),{type:"Polygon",coordinates:[J===180?ne.map(An):ne]}),V)},L},at.scale(239.75)}function Bn(Xe){var $e,at=1+Xe,B=E(u(1/at)),G=2*C(d/($e=d+4*B*at)),q=.5*G*(at+C(Xe*(2+Xe))),L=Xe*Xe,V=at*at;function J(ne,ue){var xe,Le,De=1-u(ue);if(De&&De<2){var Ue,qe=v-ue,et=25;do{var lt=u(qe),ft=_(qe),xt=B+T(lt,at-ft),St=1+V-2*at*ft;qe-=Ue=(qe-L*B-at*lt+St*xt-.5*De*$e)/(2*at*lt*xt)}while(k(Ue)>x&&--et>0);xe=G*C(St),Le=ne*xt/d}else xe=G*(Xe+De),Le=ne*B/d;return[xe*u(Le),q-xe*_(Le)]}return J.invert=function(ne,ue){var xe=ne*ne+(ue-=q)*ue,Le=(1+V-xe/(G*G))/(2*at),De=O(Le),Ue=u(De),qe=B+T(Ue,at-Le);return[E(ne/C(xe))*d/qe,E(1-2*(De-L*B-at*Ue+(1+V-2*at*Le)*qe)/$e)]},J}function Xn(){var Xe=1,$e=(0,M.U)(Bn),at=$e(Xe);return at.ratio=function(B){return arguments.length?$e(Xe=+B):Xe},at.scale(167.774).center([0,18.67])}var Un=.7109889596207567,tr=.0528035274542;function Qn(Xe,$e){return $e>-Un?((Xe=oe(Xe,$e))[1]+=tr,Xe):Oe(Xe,$e)}function Zn(){return(0,M.c)(Qn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function ur(Xe,$e){return k($e)>Un?((Xe=oe(Xe,$e))[1]-=$e>0?tr:-tr,Xe):Oe(Xe,$e)}function mr(){return(0,M.c)(ur).scale(152.63)}function hr(Xe,$e,at,B){var G=C(4*d/(2*at+(1+Xe-$e/2)*u(2*at)+(Xe+$e)/2*u(4*at)+$e/2*u(6*at))),q=C(B*u(at)*C((1+Xe*_(2*at)+$e*_(4*at))/(1+Xe+$e))),L=at*J(1);function V(xe){return C(1+Xe*_(2*xe)+$e*_(4*xe))}function J(xe){var Le=xe*at;return(2*Le+(1+Xe-$e/2)*u(2*Le)+(Xe+$e)/2*u(4*Le)+$e/2*u(6*Le))/at}function ne(xe){return V(xe)*u(xe)}var ue=function(xe,Le){var De=at*ve(J,L*u(Le)/at,Le/d);isNaN(De)&&(De=at*l(Le));var Ue=G*V(De);return[Ue*q*xe/d*_(De),Ue/q*u(De)]};return ue.invert=function(xe,Le){var De=ve(ne,Le*q/G);return[xe*d/(_(De)*G*q*V(De)),E(at*J(De/at)/L)]},at===0&&(G=C(B/d),(ue=function(xe,Le){return[xe*G,u(Le)/G]}).invert=function(xe,Le){return[xe/G,E(Le*G)]}),ue}function rr(){var Xe=1,$e=0,at=45*w,B=2,G=(0,M.U)(hr),q=G(Xe,$e,at,B);return q.a=function(L){return arguments.length?G(Xe=+L,$e,at,B):Xe},q.b=function(L){return arguments.length?G(Xe,$e=+L,at,B):$e},q.psiMax=function(L){return arguments.length?G(Xe,$e,at=+L*w,B):at*S},q.ratio=function(L){return arguments.length?G(Xe,$e,at,B=+L):B},q.scale(180.739)}function gr(Xe,$e,at,B,G,q,L,V,J,ne,ue){if(ue.nanEncountered)return NaN;var xe,Le,De,Ue,qe,et,lt,ft,xt,St;if(Le=Xe($e+.25*(xe=at-$e)),De=Xe(at-.25*xe),isNaN(Le))ue.nanEncountered=!0;else{if(!isNaN(De))return St=((et=(Ue=xe*(B+4*Le+G)/12)+(qe=xe*(G+4*De+q)/12))-L)/15,ne>J?(ue.maxDepthCount++,et+St):Math.abs(St)<V?et+St:(ft=gr(Xe,$e,lt=$e+.5*xe,B,Le,G,Ue,.5*V,J,ne+1,ue),isNaN(ft)?(ue.nanEncountered=!0,NaN):(xt=gr(Xe,lt,at,G,De,q,qe,.5*V,J,ne+1,ue),isNaN(xt)?(ue.nanEncountered=!0,NaN):ft+xt));ue.nanEncountered=!0}}function xr(Xe,$e,at,B,G){G===void 0&&(G=20);var q=Xe($e),L=Xe(.5*($e+at)),V=Xe(at);return gr(Xe,$e,at,q,L,V,(q+4*L+V)*(at-$e)/6,B,G,1,{maxDepthCount:0,nanEncountered:!1})}function Pr(Xe,$e,at){function B(De){return Xe+(1-Xe)*n(1-n(De,$e),1/$e)}function G(De){return xr(B,0,De,1e-4)}for(var q=1/G(1),L=1e3,V=1.00000001*q,J=[],ne=0;ne<=L;ne++)J.push(G(ne/L)*V);function ue(De){var Ue=0,qe=L,et=500;do J[et]>De?qe=et:Ue=et,et=Ue+qe>>1;while(et>Ue);var lt=J[et+1]-J[et];return lt&&(lt=(De-J[et+1])/lt),(et+1+lt)/L}var xe=2*ue(1)/d*q/at,Le=function(De,Ue){var qe=ue(k(u(Ue))),et=B(qe)*De;return qe/=xe,[et,Ue>=0?qe:-qe]};return Le.invert=function(De,Ue){var qe;return k(Ue*=xe)<1&&(qe=l(Ue)*E(G(k(Ue))*q)),[De/B(k(Ue)),qe]},Le}function ii(){var Xe=0,$e=2.5,at=1.183136,B=(0,M.U)(Pr),G=B(Xe,$e,at);return G.alpha=function(q){return arguments.length?B(Xe=+q,$e,at):Xe},G.k=function(q){return arguments.length?B(Xe,$e=+q,at):$e},G.gamma=function(q){return arguments.length?B(Xe,$e,at=+q):at},G.scale(152.63)}function oi(Xe,$e){return k(Xe[0]-$e[0])<c&&k(Xe[1]-$e[1])<c}function Vi(Xe,$e){for(var at,B,G,q=-1,L=Xe.length,V=Xe[0],J=[];++q<L;){B=((at=Xe[q])[0]-V[0])/$e,G=(at[1]-V[1])/$e;for(var ne=0;ne<$e;++ne)J.push([V[0]+ne*B,V[1]+ne*G]);V=at}return J.push(at),J}function ti(Xe,$e,at){var B,G;function q(J,ne){for(var ue=ne<0?-1:1,xe=$e[+(ne<0)],Le=0,De=xe.length-1;Le<De&&J>xe[Le][2][0];++Le);var Ue=Xe(J-xe[Le][1][0],ne);return Ue[0]+=Xe(xe[Le][1][0],ue*ne>ue*xe[Le][0][1]?xe[Le][0][1]:ne)[0],Ue}at?q.invert=at(q):Xe.invert&&(q.invert=function(J,ne){for(var ue=G[+(ne<0)],xe=$e[+(ne<0)],Le=0,De=ue.length;Le<De;++Le){var Ue=ue[Le];if(Ue[0][0]<=J&&J<Ue[1][0]&&Ue[0][1]<=ne&&ne<Ue[1][1]){var qe=Xe.invert(J-Xe(xe[Le][1][0],0)[0],ne);return qe[0]+=xe[Le][1][0],oi(q(qe[0],qe[1]),[J,ne])?qe:null}}});var L=(0,M.c)(q),V=L.stream;return L.stream=function(J){var ne=L.rotate(),ue=V(J),xe=(L.rotate([0,0]),V(J));return L.rotate(ne),ue.sphere=function(){(0,en.c)(B,xe)},ue},L.lobes=function(J){return arguments.length?(B=function(ne){var ue,xe,Le,De,Ue,qe,et,lt=[],ft=ne[0].length;for(et=0;et<ft;++et)xe=(ue=ne[0][et])[0][0],Le=ue[0][1],De=ue[1][1],Ue=ue[2][0],qe=ue[2][1],lt.push(Vi([[xe+c,Le+c],[xe+c,De-c],[Ue-c,De-c],[Ue-c,qe+c]],30));for(et=ne[1].length-1;et>=0;--et)xe=(ue=ne[1][et])[0][0],Le=ue[0][1],De=ue[1][1],Ue=ue[2][0],qe=ue[2][1],lt.push(Vi([[Ue-c,qe-c],[Ue-c,De+c],[xe+c,De+c],[xe+c,Le-c]],30));return{type:"Polygon",coordinates:[(0,vn.Uf)(lt)]}}(J),$e=J.map(function(ne){return ne.map(function(ue){return[[ue[0][0]*w,ue[0][1]*w],[ue[1][0]*w,ue[1][1]*w],[ue[2][0]*w,ue[2][1]*w]]})}),G=$e.map(function(ne){return ne.map(function(ue){var xe,Le=Xe(ue[0][0],ue[0][1])[0],De=Xe(ue[2][0],ue[2][1])[0],Ue=Xe(ue[1][0],ue[0][1])[1],qe=Xe(ue[1][0],ue[1][1])[1];return Ue>qe&&(xe=Ue,Ue=qe,qe=xe),[[Le,Ue],[De,qe]]})}),L):$e.map(function(ne){return ne.map(function(ue){return[[ue[0][0]*S,ue[0][1]*S],[ue[1][0]*S,ue[1][1]*S],[ue[2][0]*S,ue[2][1]*S]]})})},$e!=null&&L.lobes($e),L}Qn.invert=function(Xe,$e){return $e>-Un?oe.invert(Xe,$e-tr):Oe.invert(Xe,$e)},ur.invert=function(Xe,$e){return k($e)>Un?oe.invert(Xe,$e+($e>0?tr:-tr)):Oe.invert(Xe,$e)};var ki=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Or(){return ti(_e,ki).scale(160.857)}var hi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function sa(){return ti(ur,hi).scale(152.63)}var Zi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function uo(){return ti(oe,Zi).scale(169.529)}var co=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Xa(){return ti(oe,co).scale(169.529).rotate([20,0])}var Xi=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ka(){return ti(Qn,Xi,ye).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ao=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ho(){return ti(Oe,Ao).scale(152.63).rotate([-20,0])}function Sa(Xe,$e){return[3/f*Xe*C(d*d/3-$e*$e),$e]}function Ea(){return(0,M.c)(Sa).scale(158.837)}function Ja(Xe){function $e(at,B){if(k(k(B)-v)<c)return[0,B<0?-2:2];var G=u(B),q=n((1+G)/(1-G),Xe/2),L=.5*(q+1/q)+_(at*=Xe);return[2*u(at)/L,(q-1/q)/L]}return $e.invert=function(at,B){var G=k(B);if(k(G-2)<c)return at?null:[0,l(B)*v];if(G>2)return null;var q=(at/=2)*at,L=(B/=2)*B,V=2*B/(1+q+L);return V=n((1+V)/(1-V),1/Xe),[T(2*at,1-q-L)/Xe,E((V-1)/(V+1))]},$e}function pi(){var Xe=.5,$e=(0,M.U)(Ja),at=$e(Xe);return at.spacing=function(B){return arguments.length?$e(Xe=+B):Xe},at.scale(124.75)}Sa.invert=function(Xe,$e){return[f/3*Xe/C(d*d/3-$e*$e),$e]};var Ri=d/m;function fo(Xe,$e){return[Xe*(1+C(_($e)))/2,$e/(_($e/2)*_(Xe/6))]}function $a(){return(0,M.c)(fo).scale(97.2672)}function Fa(Xe,$e){var at=Xe*Xe,B=$e*$e;return[Xe*(.975534+B*(-.0143059*at-.119161+-.0547009*B)),$e*(1.00384+at*(.0802894+-.02855*B+199025e-9*at)+B*(.0998909+-.0491032*B))]}function Mo(){return(0,M.c)(Fa).scale(139.98)}function Qa(Xe,$e){return[u(Xe)/_($e),h($e)*_(Xe)]}function So(){return(0,M.c)(Qa).scale(144.049).clipAngle(89.999)}function ho(Xe){var $e=_(Xe),at=h(g+Xe/2);function B(G,q){var L=q-Xe,V=k(L)<c?G*$e:k(V=g+q/2)<c||k(k(V)-v)<c?0:G*L/t(h(V)/at);return[V,L]}return B.invert=function(G,q){var L,V=q+Xe;return[k(q)<c?G/$e:k(L=g+V/2)<c||k(k(L)-v)<c?0:G*t(h(L)/at)/q,V]},B}function Eo(){return Ae(ho).parallel(40).scale(158.837)}function eo(Xe,$e){return[Xe,1.25*t(h(g+.4*$e))]}function Ks(){return(0,M.c)(eo).scale(108.318)}function Bs(Xe){var $e=Xe.length-1;function at(B,G){for(var q,L=_(G),V=2/(1+L*_(B)),J=V*L*u(B),ne=V*u(G),ue=$e,xe=Xe[ue],Le=xe[0],De=xe[1];--ue>=0;)Le=(xe=Xe[ue])[0]+J*(q=Le)-ne*De,De=xe[1]+J*De+ne*q;return[Le=J*(q=Le)-ne*De,De=J*De+ne*q]}return at.invert=function(B,G){var q=20,L=B,V=G;do{for(var J,ne=$e,ue=Xe[ne],xe=ue[0],Le=ue[1],De=0,Ue=0;--ne>=0;)De=xe+L*(J=De)-V*Ue,Ue=Le+L*Ue+V*J,xe=(ue=Xe[ne])[0]+L*(J=xe)-V*Le,Le=ue[1]+L*Le+V*J;var qe,et,lt=(De=xe+L*(J=De)-V*Ue)*De+(Ue=Le+L*Ue+V*J)*Ue;L-=qe=((xe=L*(J=xe)-V*Le-B)*De+(Le=L*Le+V*J-G)*Ue)/lt,V-=et=(Le*De-xe*Ue)/lt}while(k(qe)+k(et)>c*c&&--q>0);if(q){var ft=C(L*L+V*V),xt=2*o(.5*ft),St=u(xt);return[T(L*St,ft*_(xt)),ft?E(V*St/ft):0]}},at}fo.invert=function(Xe,$e){var at=k(Xe),B=k($e),G=c,q=v;B<Ri?q*=B/Ri:G+=6*O(Ri/B);for(var L=0;L<25;L++){var V=u(q),J=C(_(q)),ne=u(q/2),ue=_(q/2),xe=u(G/6),Le=_(G/6),De=.5*G*(1+J)-at,Ue=q/(ue*Le)-B,qe=J?-.25*G*V/J:0,et=.5*(1+J),lt=(1+.5*q*ne/ue)/(ue*Le),ft=q/ue*(xe/6)/(Le*Le),xt=qe*ft-lt*et,St=(De*ft-Ue*et)/xt,wt=(Ue*qe-De*lt)/xt;if(q-=St,G-=wt,k(St)<c&&k(wt)<c)break}return[Xe<0?-G:G,$e<0?-q:q]},Fa.invert=function(Xe,$e){var at=l(Xe)*d,B=$e/2,G=50;do{var q=at*at,L=B*B,V=at*B,J=at*(.975534+L*(-.0143059*q-.119161+-.0547009*L))-Xe,ne=B*(1.00384+q*(.0802894+-.02855*L+199025e-9*q)+L*(.0998909+-.0491032*L))-$e,ue=.975534-L*(.119161+3*q*.0143059+.0547009*L),xe=-V*(.238322+.2188036*L+.0286118*q),Le=V*(.1605788+7961e-7*q+-.0571*L),De=1.00384+q*(.0802894+199025e-9*q)+L*(3*(.0998909-.02855*q)-.245516*L),Ue=xe*Le-De*ue,qe=(ne*xe-J*De)/Ue,et=(J*Le-ne*ue)/Ue;at-=qe,B-=et}while((k(qe)>c||k(et)>c)&&--G>0);return G&&[at,B]},Qa.invert=function(Xe,$e){var at=Xe*Xe,B=$e*$e+1,G=at+B,q=Xe?y*C((G-C(G*G-4*at))/at):1/C(B);return[E(Xe*q),l($e)*O(q)]},eo.invert=function(Xe,$e){return[Xe,2.5*o(p(.8*$e))-.625*d]};var Go=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ol=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],sl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Wo=[[.9245,0],[0,0],[.01943,0]],ll=[[.721316,0],[0,0],[-.00881625,-.00617325]];function _l(){return Zo(Go,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function wl(){return Zo(ol,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Yo(){return Zo(sl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function to(){return Zo(Wo,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function as(){return Zo(ll,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Zo(Xe,$e){var at=(0,M.c)(Bs(Xe)).rotate($e).clipAngle(90),B=(0,Ze.c)($e),G=at.center;return delete at.rotate,at.center=function(q){return arguments.length?G(B(q)):B.invert(G())},at}var _s=C(6),Xo=C(7);function Ba(Xe,$e){var at=E(7*u($e)/(3*_s));return[_s*Xe*(2*_(2*at/3)-1)/Xo,9*u(at/3)/Xo]}function Js(){return(0,M.c)(Ba).scale(164.859)}function Lo(Xe,$e){for(var at,B=(1+y)*u($e),G=$e,q=0;q<25&&(G-=at=(u(G/2)+u(G)-B)/(.5*_(G/2)+_(G)),!(k(at)<c));q++);return[Xe*(1+2*_(G)/_(G/2))/(3*m),2*C(3)*u(G/2)/C(2+m)]}function po(){return(0,M.c)(Lo).scale(188.209)}function go(Xe,$e){for(var at,B=C(6/(4+d)),G=(1+d/4)*u($e),q=$e/2,L=0;L<25&&(q-=at=(q/2+u(q)-G)/(.5+_(q)),!(k(at)<c));L++);return[B*(.5+_(q))*Xe/1.5,B*q]}function Co(){return(0,M.c)(go).scale(166.518)}Ba.invert=function(Xe,$e){var at=3*E($e*Xo/9);return[Xe*Xo/(_s*(2*_(2*at/3)-1)),E(3*u(at)*_s/7)]},Lo.invert=function(Xe,$e){var at=$e*C(2+m)/(2*C(3)),B=2*E(at);return[3*m*Xe/(1+2*_(B)/_(B/2)),E((at+u(B))/(1+y))]},go.invert=function(Xe,$e){var at=C(6/(4+d)),B=$e/at;return k(k(B)-v)<c&&(B=B<0?-v:v),[1.5*Xe/(at*(.5+_(B))),E((B/2+u(B))/(1+d/4))]};var Ur=e(47984);function os(Xe,$e){var at=$e*$e,B=at*at,G=at*B;return[Xe*(.84719-.13063*at+G*G*(.05494*at-.04515-.02326*B+.00331*G)),$e*(1.01183+B*B*(.01926*at-.02625-.00396*B))]}function Tl(){return(0,M.c)(os).scale(175.295)}function Ns(Xe,$e){return[Xe*(1+_($e))/2,2*($e-h($e/2))]}function ss(){return(0,M.c)(Ns).scale(152.63)}os.invert=function(Xe,$e){var at,B,G,q,L=$e,V=25;do L-=at=(L*(1.01183+(G=(B=L*L)*B)*G*(.01926*B-.02625-.00396*G))-$e)/(1.01183+G*G*(.21186*B-.23625+-.05148*G));while(k(at)>x&&--V>0);return[Xe/(.84719-.13063*(B=L*L)+(q=B*(G=B*B))*q*(.05494*B-.04515-.02326*G+.00331*q)),L]},Ns.invert=function(Xe,$e){for(var at=$e/2,B=0,G=1/0;B<10&&k(G)>c;++B){var q=_($e/2);$e-=G=($e-h($e/2)-at)/(1-.5/(q*q))}return[2*Xe/(1+_($e)),$e]};var ul=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function kl(){return ti(ce(1/0),ul).rotate([20,0]).scale(152.63)}function js(Xe,$e){var at=u($e),B=_($e),G=l(Xe);if(Xe===0||k($e)===v)return[0,$e];if($e===0)return[Xe,0];if(k(Xe)===v)return[Xe*B,v*at];var q=d/(2*Xe)-2*Xe/d,L=2*$e/d,V=(1-L*L)/(at-L),J=q*q,ne=V*V,ue=1+J/ne,xe=1+ne/J,Le=(q*at/V-q/2)/ue,De=(ne*at/J+V/2)/xe,Ue=De*De-(ne*at*at/J+V*at-1)/xe;return[v*(Le+C(Le*Le+B*B/ue)*G),v*(De+C(Ue<0?0:Ue)*l(-$e*q)*G)]}function Al(){return(0,M.c)(js).scale(127.267)}js.invert=function(Xe,$e){var at=(Xe/=v)*Xe,B=at+($e/=v)*$e,G=d*d;return[Xe?(B-1+C((1-B)*(1-B)+4*at))/(2*Xe)*v:0,ve(function(q){return B*(d*u(q)-2*q)*d+4*q*q*($e-u(q))+2*d*q-G*$e},0)]};var Oo=1.0148,Ko=.23185,vo=-.14499,Na=.02406,ls=Oo,cl=5*Ko,ws=7*vo,Us=9*Na,_a=1.790857183;function Vs(Xe,$e){var at=$e*$e;return[Xe,$e*(Oo+at*at*(Ko+at*(vo+Na*at)))]}function fl(){return(0,M.c)(Vs).scale(139.319)}function us(Xe,$e){if(k($e)<c)return[Xe,0];var at=h($e),B=Xe*u($e);return[u(B)/at,$e+(1-_(B))/at]}function Jo(){return(0,M.c)(us).scale(103.74)}Vs.invert=function(Xe,$e){$e>_a?$e=_a:$e<-1.790857183&&($e=-1.790857183);var at,B=$e;do{var G=B*B;B-=at=(B*(Oo+G*G*(Ko+G*(vo+Na*G)))-$e)/(ls+G*G*(cl+G*(ws+Us*G)))}while(k(at)>c);return[Xe,B]},us.invert=function(Xe,$e){if(k($e)<c)return[Xe,0];var at,B=Xe*Xe+$e*$e,G=.5*$e,q=10;do{var L=h(G),V=1/_(G),J=B-2*$e*G+G*G;G-=at=(L*J+2*(G-$e))/(2+J*V*V+2*(G-$e)*L)}while(k(at)>c&&--q>0);return L=h(G),[(k($e)<k(G+1/L)?E(Xe*L):l($e)*l(Xe)*(O(k(Xe*L))+v))/u(G),G]};var cs=e(13696),$o=e(27284);function Qo(Xe,$e){return[Xe[0]*$e[0]+Xe[1]*$e[3],Xe[0]*$e[1]+Xe[1]*$e[4],Xe[0]*$e[2]+Xe[1]*$e[5]+Xe[2],Xe[3]*$e[0]+Xe[4]*$e[3],Xe[3]*$e[1]+Xe[4]*$e[4],Xe[3]*$e[2]+Xe[4]*$e[5]+Xe[5]]}function Ts(Xe,$e){return[Xe[0]-$e[0],Xe[1]-$e[1]]}function qs(Xe){return C(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function $r(Xe,$e,at){function B(V,J){var ne,ue=$e(V,J),xe=ue.project([V*S,J*S]);return(ne=ue.transform)?[ne[0]*xe[0]+ne[1]*xe[1]+ne[2],-(ne[3]*xe[0]+ne[4]*xe[1]+ne[5])]:(xe[1]=-xe[1],xe)}function G(V,J){var ne=V.project.invert,ue=V.transform,xe=J;if(ue&&(ue=function(et){var lt=1/(et[0]*et[4]-et[1]*et[3]);return[lt*et[4],-lt*et[1],lt*(et[1]*et[5]-et[2]*et[4]),-lt*et[3],lt*et[0],lt*(et[2]*et[3]-et[0]*et[5])]}(ue),xe=[ue[0]*xe[0]+ue[1]*xe[1]+ue[2],ue[3]*xe[0]+ue[4]*xe[1]+ue[5]]),ne&&V===function(et){return $e(et[0]*w,et[1]*w)}(Le=ne(xe)))return Le;for(var Le,De=V.children,Ue=0,qe=De&&De.length;Ue<qe;++Ue)if(Le=G(De[Ue],J))return Le}(function V(J,ne){if(J.edges=function(wt){for(var Dt=wt.length,Et=[],Yt=wt[Dt-1],qt=0;qt<Dt;++qt)Et.push([Yt,Yt=wt[qt]]);return Et}(J.face),ne.face){var ue=J.shared=function(wt,Dt){for(var Et,Yt,qt=wt.length,Bt=null,fn=0;fn<qt;++fn){Et=wt[fn];for(var gn=Dt.length;--gn>=0;)if(Yt=Dt[gn],Et[0]===Yt[0]&&Et[1]===Yt[1]){if(Bt)return[Bt,Et];Bt=Et}}}(J.face,ne.face),xe=(qe=ue.map(ne.project),et=ue.map(J.project),lt=Ts(qe[1],qe[0]),ft=Ts(et[1],et[0]),xt=function(wt,Dt){return T(wt[0]*Dt[1]-wt[1]*Dt[0],wt[0]*Dt[0]+wt[1]*Dt[1])}(lt,ft),St=qs(lt)/qs(ft),Qo([1,0,qe[0][0],0,1,qe[0][1]],Qo([St,0,0,0,St,0],Qo([_(xt),u(xt),0,-u(xt),_(xt),0],[1,0,-et[0][0],0,1,-et[0][1]]))));J.transform=ne.transform?Qo(ne.transform,xe):xe;for(var Le=ne.edges,De=0,Ue=Le.length;De<Ue;++De)Ki(ue[0],Le[De][1])&&Ki(ue[1],Le[De][0])&&(Le[De]=J),Ki(ue[0],Le[De][0])&&Ki(ue[1],Le[De][1])&&(Le[De]=J);for(De=0,Ue=(Le=J.edges).length;De<Ue;++De)Ki(ue[0],Le[De][0])&&Ki(ue[1],Le[De][1])&&(Le[De]=ne),Ki(ue[0],Le[De][1])&&Ki(ue[1],Le[De][0])&&(Le[De]=ne)}else J.transform=ne.transform;var qe,et,lt,ft,xt,St;return J.children&&J.children.forEach(function(wt){V(wt,J)}),J})(Xe,{transform:null}),ja(Xe)&&(B.invert=function(V,J){var ne=G(Xe,[V,-J]);return ne&&(ne[0]*=w,ne[1]*=w,ne)});var q=(0,M.c)(B),L=q.stream;return q.stream=function(V){var J=q.rotate(),ne=L(V),ue=(q.rotate([0,0]),L(V));return q.rotate(J),ne.sphere=function(){ue.polygonStart(),ue.lineStart(),Po(ue,Xe),ue.lineEnd(),ue.polygonEnd()},ne},q.angle(at==null?-30:at*S)}function Po(Xe,$e,at){var B,G,q=$e.edges,L=q.length,V={type:"MultiPoint",coordinates:$e.face},J=$e.face.filter(function(qe){return k(qe[1])!==90}),ne=(0,cs.c)({type:"MultiPoint",coordinates:J}),ue=!1,xe=-1,Le=ne[1][0]-ne[0][0],De=Le===180||Le===360?[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2]:(0,Ve.c)(V);if(at)for(;++xe<L&&q[xe]!==at;);++xe;for(var Ue=0;Ue<L;++Ue)G=q[(Ue+xe)%L],Array.isArray(G)?(ue||(Xe.point((B=(0,$o.c)(G[0],De)(c))[0],B[1]),ue=!0),Xe.point((B=(0,$o.c)(G[1],De)(c))[0],B[1])):(ue=!1,G!==at&&Po(Xe,G,$e))}function Ki(Xe,$e){return Xe&&$e&&Xe[0]===$e[0]&&Xe[1]===$e[1]}function ja(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(ja)}var Wr=e(53285),Jr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],wa=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function($e){return Jr[$e]})});function fs(Xe){Xe=Xe||function(at){var B=(0,Ve.c)({type:"MultiPoint",coordinates:at});return(0,Wr.c)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var $e=wa.map(function(at){return{face:at,project:Xe(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,B){var G=$e[at];G&&(G.children||(G.children=[])).push($e[B])}),$r($e[0],function(at,B){return $e[at<-d/2?B<0?6:4:at<0?B<0?2:0:at<d/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var ks=2/C(3);function Hs(Xe,$e){var at=Tt(Xe,$e);return[at[0]*ks,at[1]]}function As(Xe){Xe=Xe||function(at){var B=(0,Ve.c)({type:"MultiPoint",coordinates:at});return(0,M.c)(Hs).translate([0,0]).scale(1).rotate(B[1]>0?[-B[0],0]:[180-B[0],180])};var $e=wa.map(function(at){return{face:at,project:Xe(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,B){var G=$e[at];G&&(G.children||(G.children=[])).push($e[B])}),$r($e[0],function(at,B){return $e[at<-d/2?B<0?6:4:at<0?B<0?2:0:at<d/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ms(Xe){Xe=Xe||function(q){var L=q.length===6?(0,Ve.c)({type:"MultiPoint",coordinates:q}):q[0];return(0,Wr.c)().scale(1).translate([0,0]).rotate([-L[0],-L[1]])};var $e=wa.map(function(q){for(var L,V=q.map(zo),J=V.length,ne=V[J-1],ue=[],xe=0;xe<J;++xe)L=V[xe],ue.push(Io([.9486832980505138*ne[0]+.31622776601683794*L[0],.9486832980505138*ne[1]+.31622776601683794*L[1],.9486832980505138*ne[2]+.31622776601683794*L[2]]),Io([.9486832980505138*L[0]+.31622776601683794*ne[0],.9486832980505138*L[1]+.31622776601683794*ne[1],.9486832980505138*L[2]+.31622776601683794*ne[2]])),ne=L;return ue}),at=[],B=[-1,0,0,1,0,1,4,5];$e.forEach(function(q,L){for(var V,J,ne=wa[L],ue=ne.length,xe=at[L]=[],Le=0;Le<ue;++Le)$e.push([ne[Le],q[(2*Le+2)%(2*ue)],q[(2*Le+1)%(2*ue)]]),B.push(L),xe.push((V=zo(q[(2*Le+2)%(2*ue)]),J=zo(q[(2*Le+1)%(2*ue)]),[V[1]*J[2]-V[2]*J[1],V[2]*J[0]-V[0]*J[2],V[0]*J[1]-V[1]*J[0]]))});var G=$e.map(function(q){return{project:Xe(q),face:q}});return B.forEach(function(q,L){var V=G[q];V&&(V.children||(V.children=[])).push(G[L])}),$r(G[0],function(q,L){var V=_(L),J=[V*_(q),V*u(q),u(L)],ne=q<-d/2?L<0?6:4:q<0?L<0?2:0:q<d/2?L<0?3:1:L<0?7:5,ue=at[ne];return G[La(ue[0],J)<0?8+3*ne:La(ue[1],J)<0?8+3*ne+1:La(ue[2],J)<0?8+3*ne+2:ne]}).angle(-30).scale(110.625).center([0,45])}function La(Xe,$e){for(var at=0,B=Xe.length,G=0;at<B;++at)G+=Xe[at]*$e[at];return G}function Io(Xe){return[T(Xe[1],Xe[0])*S,E(i(-1,r(1,Xe[2])))*S]}function zo(Xe){var $e=Xe[0]*w,at=Xe[1]*w,B=_(at);return[B*_($e),B*u($e),u(at)]}function na(){}function Ss(Xe,$e){var at,B=$e.stream;if(!B)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":at=Fi;break;case"FeatureCollection":at=Ca;break;default:at=qi}return at(Xe,B)}function Ca(Xe,$e){return{type:"FeatureCollection",features:Xe.features.map(function(at){return Fi(at,$e)})}}function Fi(Xe,$e){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:qi(Xe.geometry,$e)}}function qi(Xe,$e){if(!Xe)return null;if(Xe.type==="GeometryCollection")return function(B,G){return{type:"GeometryCollection",geometries:B.geometries.map(function(q){return qi(q,G)})}}(Xe,$e);var at;switch(Xe.type){case"Point":case"MultiPoint":at=no;break;case"LineString":case"MultiLineString":at=es;break;case"Polygon":case"MultiPolygon":case"Sphere":at=Ua;break;default:return null}return(0,en.c)(Xe,$e(at)),at.result()}Hs.invert=function(Xe,$e){return Tt.invert(Xe/ks,$e)};var ai=[],Hi=[],no={point:function(Xe,$e){ai.push([Xe,$e])},result:function(){var Xe=ai.length?ai.length<2?{type:"Point",coordinates:ai[0]}:{type:"MultiPoint",coordinates:ai}:null;return ai=[],Xe}},es={lineStart:na,point:function(Xe,$e){ai.push([Xe,$e])},lineEnd:function(){ai.length&&(Hi.push(ai),ai=[])},result:function(){var Xe=Hi.length?Hi.length<2?{type:"LineString",coordinates:Hi[0]}:{type:"MultiLineString",coordinates:Hi}:null;return Hi=[],Xe}},Ua={polygonStart:na,lineStart:na,point:function(Xe,$e){ai.push([Xe,$e])},lineEnd:function(){var Xe=ai.length;if(Xe){do ai.push(ai[0].slice());while(++Xe<4);Hi.push(ai),ai=[]}},polygonEnd:na,result:function(){if(!Hi.length)return null;var Xe=[],$e=[];return Hi.forEach(function(at){(function(B){if((G=B.length)<4)return!1;for(var G,q=0,L=B[G-1][1]*B[0][0]-B[G-1][0]*B[0][1];++q<G;)L+=B[q-1][1]*B[q][0]-B[q-1][0]*B[q][1];return L<=0})(at)?Xe.push([at]):$e.push(at)}),$e.forEach(function(at){var B=at[0];Xe.some(function(G){if(function(q,L){for(var V=L[0],J=L[1],ne=!1,ue=0,xe=q.length,Le=xe-1;ue<xe;Le=ue++){var De=q[ue],Ue=De[0],qe=De[1],et=q[Le],lt=et[0],ft=et[1];qe>J^ft>J&&V<(lt-Ue)*(J-qe)/(ft-qe)+Ue&&(ne=!ne)}return ne}(G[0],B))return G.push(at),!0})||Xe.push([at])}),Hi=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function Do(Xe){var $e=Xe(v,0)[0]-Xe(-v,0)[0];function at(B,G){var q=k(B)<v,L=Xe(q?B:B>0?B-d:B+d,G),V=(L[0]-L[1])*y,J=(L[0]+L[1])*y;if(q)return[V,J];var ne=$e*y,ue=V>0^J>0?-1:1;return[ue*V-l(J)*ne,ue*J-l(V)*ne]}return Xe.invert&&(at.invert=function(B,G){var q=(B+G)*y,L=(G-B)*y,V=k(q)<.5*$e&&k(L)<.5*$e;if(!V){var J=$e*y,ne=q>0^L>0?-1:1,ue=-ne*B+(L>0?1:-1)*J,xe=-ne*G+(q>0?1:-1)*J;q=(-ue-xe)*y,L=(ue-xe)*y}var Le=Xe.invert(q,L);return V||(Le[0]+=q>0?d:-d),Le}),(0,M.c)(at).rotate([-90,-90,45]).clipAngle(179.999)}function la(){return Do(Fn).scale(176.423)}function ts(){return Do(dn).scale(111.48)}function mo(Xe,$e){if(!(0<=($e=+$e)&&$e<=20))throw new Error("invalid digits");function at(ne){var ue=ne.length,xe=2,Le=new Array(ue);for(Le[0]=+ne[0].toFixed($e),Le[1]=+ne[1].toFixed($e);xe<ue;)Le[xe]=ne[xe],++xe;return Le}function B(ne){return ne.map(at)}function G(ne){for(var ue=at(ne[0]),xe=[ue],Le=1;Le<ne.length;Le++){var De=at(ne[Le]);(De.length>2||De[0]!=ue[0]||De[1]!=ue[1])&&(xe.push(De),ue=De)}return xe.length===1&&ne.length>1&&xe.push(at(ne[ne.length-1])),xe}function q(ne){return ne.map(G)}function L(ne){if(ne==null)return ne;var ue;switch(ne.type){case"GeometryCollection":ue={type:"GeometryCollection",geometries:ne.geometries.map(L)};break;case"Point":ue={type:"Point",coordinates:at(ne.coordinates)};break;case"MultiPoint":ue={type:ne.type,coordinates:B(ne.coordinates)};break;case"LineString":ue={type:ne.type,coordinates:G(ne.coordinates)};break;case"MultiLineString":case"Polygon":ue={type:ne.type,coordinates:q(ne.coordinates)};break;case"MultiPolygon":ue={type:"MultiPolygon",coordinates:ne.coordinates.map(q)};break;default:return ne}return ne.bbox!=null&&(ue.bbox=ne.bbox),ue}function V(ne){var ue={type:"Feature",properties:ne.properties,geometry:L(ne.geometry)};return ne.id!=null&&(ue.id=ne.id),ne.bbox!=null&&(ue.bbox=ne.bbox),ue}if(Xe!=null)switch(Xe.type){case"Feature":return V(Xe);case"FeatureCollection":var J={type:"FeatureCollection",features:Xe.features.map(V)};return Xe.bbox!=null&&(J.bbox=Xe.bbox),J;default:return L(Xe)}return Xe}function Oa(Xe){var $e=u(Xe);function at(B,G){var q=$e?h(B*$e/2)/$e:B/2;if(!G)return[2*q,-Xe];var L=2*o(q*u(G)),V=1/h(G);return[u(L)*V,G+(1-_(L))*V-Xe]}return at.invert=function(B,G){if(k(G+=Xe)<c)return[$e?2*o($e*B/2)/$e:B,0];var q,L=B*B+G*G,V=0,J=10;do{var ne=h(V),ue=1/_(V),xe=L-2*G*V+V*V;V-=q=(ne*xe+2*(V-G))/(2+xe*ue*ue+2*(V-G)*ne)}while(k(q)>c&&--J>0);var Le=B*(ne=h(V)),De=h(k(G)<k(V+1/ne)?.5*E(Le):.5*O(Le)+d/4)/u(V);return[$e?2*o($e*De)/$e:2*De,V]},at}function Pa(){return Ae(Oa).scale(131.215)}var si=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Va(Xe,$e){var at,B=r(18,36*k($e)/d),G=s(B),q=B-G,L=(at=si[G])[0],V=at[1],J=(at=si[++G])[0],ne=at[1],ue=(at=si[r(19,++G)])[0],xe=at[1];return[Xe*(J+q*(ue-L)/2+q*q*(ue-2*J+L)/2),($e>0?v:-v)*(ne+q*(xe-V)/2+q*q*(xe-2*ne+V)/2)]}function wr(){return(0,M.c)(Va).scale(152.63)}function Es(Xe,$e){var at=function(L){function V(J,ne){var ue=_(ne),xe=(L-1)/(L-ue*_(J));return[xe*ue*u(J),xe*u(ne)]}return V.invert=function(J,ne){var ue=J*J+ne*ne,xe=C(ue),Le=(L-C(1-ue*(L+1)/(L-1)))/((L-1)/xe+xe/(L-1));return[T(J*Le,xe*C(1-Le*Le)),xe?E(ne*Le/xe):0]},V}(Xe);if(!$e)return at;var B=_($e),G=u($e);function q(L,V){var J=at(L,V),ne=J[1],ue=ne*G/(Xe-1)+B;return[J[0]*B/ue,ne/ue]}return q.invert=function(L,V){var J=(Xe-1)/(Xe-1-V*G);return at.invert(J*L,J*V*B)},q}function $s(){var Xe=2,$e=0,at=(0,M.U)(Es),B=at(Xe,$e);return B.distance=function(G){return arguments.length?at(Xe=+G,$e):Xe},B.tilt=function(G){return arguments.length?at(Xe,$e=G*w):$e*S},B.scale(432.147).clipAngle(O(1/Xe)*S-1e-6)}si.forEach(function(Xe){Xe[1]*=1.0144}),Va.invert=function(Xe,$e){var at=$e/v,B=90*at,G=r(18,k(B/5)),q=i(0,s(G));do{var L=si[q][1],V=si[q+1][1],J=si[r(19,q+2)][1],ne=J-L,ue=J-2*V+L,xe=2*(k(at)-V)/ne,Le=ue/ne,De=xe*(1-Le*xe*(1-2*Le*xe));if(De>=0||q===1){B=($e>=0?5:-5)*(De+G);var Ue,qe=50;do De=(G=r(18,k(B)/5))-(q=s(G)),L=si[q][1],V=si[q+1][1],J=si[r(19,q+2)][1],B-=(Ue=($e>=0?v:-v)*(V+De*(J-L)/2+De*De*(J-2*V+L)/2)-$e)*S;while(k(Ue)>x&&--qe>0);break}}while(--q>=0);var et=si[q][0],lt=si[q+1][0],ft=si[r(19,q+2)][0];return[Xe/(lt+De*(ft-et)/2+De*De*(ft-2*lt+et)/2),B*w]};var Ro=1e-4,Fo=1e4,ns=-180,hs=ns+Ro,dr=180,Ls=dr-Ro,yo=-90,Bi=yo+Ro,Bo=90,qa=Bo-Ro;function Ia(Xe){return Xe.length>0}function ra(Xe){return Xe===yo||Xe===Bo?[0,Xe]:[ns,($e=Xe,Math.floor($e*Fo)/Fo)];var $e}function ro(Xe){var $e=Xe[0],at=Xe[1],B=!1;return $e<=hs?($e=ns,B=!0):$e>=Ls&&($e=dr,B=!0),at<=Bi?(at=yo,B=!0):at>=qa&&(at=Bo,B=!0),B?[$e,at]:Xe}function za(Xe){return Xe.map(ro)}function xo(Xe,$e,at){for(var B=0,G=Xe.length;B<G;++B){var q=Xe[B].slice();at.push({index:-1,polygon:$e,ring:q});for(var L=0,V=q.length;L<V;++L){var J=q[L],ne=J[0],ue=J[1];if(ne<=hs||ne>=Ls||ue<=Bi||ue>=qa){q[L]=ro(J);for(var xe=L+1;xe<V;++xe){var Le=q[xe],De=Le[0],Ue=Le[1];if(De>hs&&De<Ls&&Ue>Bi&&Ue<qa)break}if(xe===L+1)continue;if(L){var qe={index:-1,polygon:$e,ring:q.slice(0,L+1)};qe.ring[qe.ring.length-1]=ra(ue),at[at.length-1]=qe}else at.pop();if(xe>=V)break;at.push({index:-1,polygon:$e,ring:q=q.slice(xe-1)}),q[0]=ra(q[0][1]),L=-1,V=q.length}}}}function Cs(Xe){var $e,at,B,G,q,L,V=Xe.length,J={},ne={};for($e=0;$e<V;++$e)B=(at=Xe[$e]).ring[0],q=at.ring[at.ring.length-1],B[0]!==q[0]||B[1]!==q[1]?(at.index=$e,J[B]=ne[q]=at):(at.polygon.push(at.ring),Xe[$e]=null);for($e=0;$e<V;++$e)if(at=Xe[$e]){if(B=at.ring[0],q=at.ring[at.ring.length-1],G=ne[B],L=J[q],delete J[B],delete ne[q],B[0]===q[0]&&B[1]===q[1]){at.polygon.push(at.ring);continue}G?(delete ne[B],delete J[G.ring[0]],G.ring.pop(),Xe[G.index]=null,at={index:-1,polygon:G.polygon,ring:G.ring.concat(at.ring)},G===L?at.polygon.push(at.ring):(at.index=V++,Xe.push(J[at.ring[0]]=ne[at.ring[at.ring.length-1]]=at))):L?(delete J[q],delete ne[L.ring[L.ring.length-1]],at.ring.pop(),at={index:V++,polygon:L.polygon,ring:at.ring.concat(L.ring)},Xe[L.index]=null,Xe.push(J[at.ring[0]]=ne[at.ring[at.ring.length-1]]=at)):(at.ring.push(at.ring[0]),at.polygon.push(at.ring))}}function No(Xe){var $e={type:"Feature",geometry:Hr(Xe.geometry)};return Xe.id!=null&&($e.id=Xe.id),Xe.bbox!=null&&($e.bbox=Xe.bbox),Xe.properties!=null&&($e.properties=Xe.properties),$e}function Hr(Xe){if(Xe==null)return Xe;var $e,at,B,G;switch(Xe.type){case"GeometryCollection":$e={type:"GeometryCollection",geometries:Xe.geometries.map(Hr)};break;case"Point":$e={type:"Point",coordinates:ro(Xe.coordinates)};break;case"MultiPoint":case"LineString":$e={type:Xe.type,coordinates:za(Xe.coordinates)};break;case"MultiLineString":$e={type:"MultiLineString",coordinates:Xe.coordinates.map(za)};break;case"Polygon":var q=[];xo(Xe.coordinates,q,at=[]),Cs(at),$e={type:"Polygon",coordinates:q};break;case"MultiPolygon":at=[],B=-1,G=Xe.coordinates.length;for(var L=new Array(G);++B<G;)xo(Xe.coordinates[B],L[B]=[],at);Cs(at),$e={type:"MultiPolygon",coordinates:L.filter(Ia)};break;default:return Xe}return Xe.bbox!=null&&($e.bbox=Xe.bbox),$e}function Gi(Xe){if(Xe==null)return Xe;switch(Xe.type){case"Feature":return No(Xe);case"FeatureCollection":var $e={type:"FeatureCollection",features:Xe.features.map(No)};return Xe.bbox!=null&&($e.bbox=Xe.bbox),$e;default:return Hr(Xe)}}function ua(Xe,$e){var at=h($e/2),B=u(g*at);return[Xe*(.74482-.34588*B*B),1.70711*at]}function io(){return(0,M.c)(ua).scale(146.153)}function ca(Xe,$e,at){var B=(0,$o.c)($e,at),G=B(.5),q=(0,Ze.c)([-G[0],-G[1]])($e),L=B.distance/2,V=-E(u(q[1]*w)/u(L)),J=[-G[0],-G[1],-(q[0]>0?d-V:V)*S],ne=(0,M.c)(Xe(L)).rotate(J),ue=(0,Ze.c)(J),xe=ne.center;return delete ne.rotate,ne.center=function(Le){return arguments.length?xe(ue(Le)):ue.invert(xe())},ne.clipAngle(90)}function ps(Xe){var $e=_(Xe);function at(B,G){var q=(0,Wr.Y)(B,G);return q[0]*=$e,q}return at.invert=function(B,G){return Wr.Y.invert(B/$e,G)},at}function ds(){return fa([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function fa(Xe,$e){return ca(ps,Xe,$e)}function Vr(Xe){if(!(Xe*=2))return Y.O;var $e=-Xe/2,at=-$e,B=Xe*Xe,G=h(at),q=.5/u(at);function L(V,J){var ne=O(_(J)*_(V-$e)),ue=O(_(J)*_(V-at));return[((ne*=ne)-(ue*=ue))/(2*Xe),(J<0?-1:1)*C(4*B*ue-(B-ne+ue)*(B-ne+ue))/(2*Xe)]}return L.invert=function(V,J){var ne,ue,xe=J*J,Le=_(C(xe+(ne=V+$e)*ne)),De=_(C(xe+(ne=V+at)*ne));return[T(ue=Le-De,ne=(Le+De)*G),(J<0?-1:1)*O(C(ne*ne+ue*ue)*q)]},L}function ao(){return rs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function rs(Xe,$e){return ca(Vr,Xe,$e)}function Ha(Xe,$e){if(k($e)<c)return[Xe,0];var at=k($e/v),B=E(at);if(k(Xe)<c||k(k($e)-v)<c)return[0,l($e)*d*h(B/2)];var G=_(B),q=k(d/Xe-Xe/d)/2,L=q*q,V=G/(at+G-1),J=V*(2/at-1),ne=J*J,ue=ne+L,xe=V-ne,Le=L+V;return[l(Xe)*d*(q*xe+C(L*xe*xe-ue*(V*V-ne)))/ue,l($e)*d*(J*Le-q*C((L+1)*ue-Le*Le))/ue]}function gs(){return(0,M.c)(Ha).scale(79.4183)}function vs(Xe,$e){if(k($e)<c)return[Xe,0];var at=k($e/v),B=E(at);if(k(Xe)<c||k(k($e)-v)<c)return[0,l($e)*d*h(B/2)];var G=_(B),q=k(d/Xe-Xe/d)/2,L=q*q,V=G*(C(1+L)-q*G)/(1+L*at*at);return[l(Xe)*d*V,l($e)*d*C(1-V*(2*q+V))]}function Ga(){return(0,M.c)(vs).scale(79.4183)}function li(Xe,$e){if(k($e)<c)return[Xe,0];var at=$e/v,B=E(at);if(k(Xe)<c||k(k($e)-v)<c)return[0,d*h(B/2)];var G=(d/Xe-Xe/d)/2,q=at/(1+_(B));return[d*(l(Xe)*C(G*G+1-q*q)-G),d*q]}function is(){return(0,M.c)(li).scale(79.4183)}function kr(Xe,$e){if(!$e)return[Xe,0];var at=k($e);if(!Xe||at===v)return[0,$e];var B=at/v,G=B*B,q=(8*B-G*(G+2)-5)/(2*G*(B-1)),L=q*q,V=B*q,J=G+L+2*V,ne=B+3*q,ue=Xe/v,xe=ue+1/ue,Le=l(k(Xe)-v)*C(xe*xe-4),De=Le*Le,Ue=(Le*(J+L-1)+2*C(J*(G+L*De-1)+(1-G)*(G*(ne*ne+4*L)+12*V*L+4*L*L)))/(4*J+De);return[l(Xe)*v*Ue,l($e)*v*C(1+Le*k(Ue)-Ue*Ue)]}function Cr(){return(0,M.c)(kr).scale(127.16)}function Ta(Xe,$e,at,B){var G=d/3;Xe=i(Xe,c),$e=i($e,c),Xe=r(Xe,v),$e=r($e,d-c),at=i(at,0),at=r(at,100-c);var q=(B=i(B,c))/100,L=O((at/100+1)*_(G))/G,V=u(Xe)/u(L*v),J=$e/d,ne=C(q*u(Xe/2)/u($e/2));return function(ue,xe,Le,De,Ue){function qe(et,lt){var ft=Le*u(De*lt),xt=C(1-ft*ft),St=C(2/(1+xt*_(et*=Ue)));return[ue*xt*St*u(et),xe*ft*St]}return qe.invert=function(et,lt){var ft=et/ue,xt=lt/xe,St=C(ft*ft+xt*xt),wt=2*E(St/2);return[T(et*h(wt),ue*St)/Ue,St&&E(lt*u(wt)/(xe*Le*St))/De]},qe}(ne/C(J*V*L),1/(ne*C(J*V*L)),V,L,J)}function oo(){var Xe=65*w,$e=60*w,at=20,B=200,G=(0,M.U)(Ta),q=G(Xe,$e,at,B);return q.poleline=function(L){return arguments.length?G(Xe=+L*w,$e,at,B):Xe*S},q.parallels=function(L){return arguments.length?G(Xe,$e=+L*w,at,B):$e*S},q.inflation=function(L){return arguments.length?G(Xe,$e,at=+L,B):at},q.ratio=function(L){return arguments.length?G(Xe,$e,at,B=+L):B},q.scale(163.775)}function bo(){return oo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}ua.invert=function(Xe,$e){var at=$e/1.70711,B=u(g*at);return[Xe/(.74482-.34588*B*B),2*o(at)]},Ha.invert=function(Xe,$e){if(k($e)<c)return[Xe,0];if(k(Xe)<c)return[0,v*u(2*o($e/d))];var at=(Xe/=d)*Xe,B=($e/=d)*$e,G=at+B,q=G*G,L=-k($e)*(1+G),V=L-2*B+at,J=-2*L+1+2*B+q,ne=B/J+(2*V*V*V/(J*J*J)-9*L*V/(J*J))/27,ue=(L-V*V/(3*J))/J,xe=2*C(-ue/3),Le=O(3*ne/(ue*xe))/3;return[d*(G-1+C(1+2*(at-B)+q))/(2*Xe),l($e)*d*(-xe*_(Le+d/3)-V/(3*J))]},vs.invert=function(Xe,$e){if(!Xe)return[0,v*u(2*o($e/d))];var at=k(Xe/d),B=(1-at*at-($e/=d)*$e)/(2*at),G=C(B*B+1);return[l(Xe)*d*(G-B),l($e)*v*u(2*T(C((1-2*B*at)*(B+G)-at),C(G+B+at)))]},li.invert=function(Xe,$e){if(!$e)return[Xe,0];var at=$e/d,B=(d*d*(1-at*at)-Xe*Xe)/(2*d*Xe);return[Xe?d*(l(Xe)*C(B*B+1)-B):0,v*u(2*o(at))]},kr.invert=function(Xe,$e){var at;if(!Xe||!$e)return[Xe,$e];$e/=d;var B=l(Xe)*Xe/v,G=(B*B-1+4*$e*$e)/k(B),q=G*G,L=2*$e,V=50;do{var J=L*L,ne=(8*L-J*(J+2)-5)/(2*J*(L-1)),ue=(3*L-J*L-10)/(2*J*L),xe=ne*ne,Le=L*ne,De=L+ne,Ue=De*De,qe=L+3*ne,et=-2*De*(4*Le*xe+(1-4*J+3*J*J)*(1+ue)+xe*(14*J-6-q+(8*J-8-2*q)*ue)+Le*(12*J-8+(10*J-10-q)*ue)),lt=C(Ue*(J+xe*q-1)+(1-J)*(J*(qe*qe+4*xe)+xe*(12*Le+4*xe)));L-=at=(G*(Ue+xe-1)+2*lt-B*(4*Ue+q))/(G*(2*ne*ue+2*De*(1+ue))+et/lt-8*De*(G*(-1+xe+Ue)+2*lt)*(1+ue)/(q+4*Ue))}while(at>c&&--V>0);return[l(Xe)*(C(G*G+4)+G)*d/4,v*L]};var Li=4*d+3*C(3),so=2*C(2*d*C(3)/Li),Qr=ge(so*C(3)/d,so,Li/6);function hl(){return(0,M.c)(Qr).scale(176.84)}function ka(Xe,$e){return[Xe*C(1-3*$e*$e/(d*d)),$e]}function ni(){return(0,M.c)(ka).scale(152.63)}function di(Xe,$e){var at=_($e),B=_(Xe)*at,G=1-B,q=_(Xe=T(u(Xe)*at,-u($e))),L=u(Xe);return[L*(at=C(1-B*B))-q*G,-q*at-L*G]}function va(){return(0,M.c)(di).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function jo(Xe,$e){var at=N(Xe,$e);return[(at[0]+Xe/v)/2,(at[1]+$e)/2]}function Qs(){return(0,M.c)(jo).scale(158.837)}ka.invert=function(Xe,$e){return[Xe/C(1-3*$e*$e/(d*d)),$e]},di.invert=function(Xe,$e){var at=(Xe*Xe+$e*$e)/-2,B=C(-at*(2+at)),G=$e*at+Xe*B,q=Xe*at-$e*B,L=C(q*q+G*G);return[T(B*G,L*(1+at)),L?-E(B*q/L):0]},jo.invert=function(Xe,$e){var at=Xe,B=$e,G=25;do{var q,L=_(B),V=u(B),J=u(2*B),ne=V*V,ue=L*L,xe=u(at),Le=_(at/2),De=u(at/2),Ue=De*De,qe=1-ue*Le*Le,et=qe?O(L*Le)*C(q=1/qe):q=0,lt=.5*(2*et*L*De+at/v)-Xe,ft=.5*(et*V+B)-$e,xt=.5*q*(ue*Ue+et*L*Le*ne)+.5/v,St=q*(xe*J/4-et*V*De),wt=.125*q*(J*De-et*V*ue*xe),Dt=.5*q*(ne*Le+et*Ue*L)+.5,Et=St*wt-Dt*xt,Yt=(ft*St-lt*Dt)/Et,qt=(lt*wt-ft*xt)/Et;at-=Yt,B-=qt}while((k(Yt)>c||k(qt)>c)&&--G>0);return[at,B]}},88728:function(ee,R,e){function M(){return new k}function k(){this.reset()}e.d(R,{c:function(){return M}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(_){T(o,_,this.t),T(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new k;function T(_,p,s){var t=_.s=p+s,i=t-p,r=t-i;_.t=p-r+(s-i)}},95384:function(ee,R,e){e.d(R,{cp:function(){return x},mQ:function(){return r},oB:function(){return a}});var M,k,o,T,_,p=e(88728),s=e(64528),t=e(70932),i=e(16016),r=(0,p.c)(),n=(0,p.c)(),a={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){r.reset(),a.lineStart=l,a.lineEnd=u},polygonEnd:function(){var d=+r;n.add(d<0?s.kD+d:d),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){n.add(s.kD)}};function l(){a.point=h}function u(){c(M,k)}function h(d,v){a.point=c,M=d,k=v,d*=s.qw,v*=s.qw,o=d,T=(0,s.W8)(v=v/2+s.wL),_=(0,s.g$)(v)}function c(d,v){d*=s.qw,v=(v*=s.qw)/2+s.wL;var g=d-o,y=g>=0?1:-1,m=y*g,b=(0,s.W8)(v),f=(0,s.g$)(v),S=_*f,w=T*b+S*(0,s.W8)(m),E=S*y*(0,s.g$)(m);r.add((0,s.WE)(E,w)),o=d,T=b,_=f}function x(d){return n.reset(),(0,i.c)(d,a),2*n}},13696:function(ee,R,e){e.d(R,{c:function(){return O}});var M,k,o,T,_,p,s,t,i,r,n=e(88728),a=e(95384),l=e(84220),u=e(64528),h=e(16016),c=(0,n.c)(),x={point:d,lineStart:g,lineEnd:y,polygonStart:function(){x.point=m,x.lineStart=b,x.lineEnd=f,c.reset(),a.oB.polygonStart()},polygonEnd:function(){a.oB.polygonEnd(),x.point=d,x.lineStart=g,x.lineEnd=y,a.mQ<0?(M=-(o=180),k=-(T=90)):c>u.Gg?T=90:c<-u.Gg&&(k=-90),r[0]=M,r[1]=o},sphere:function(){M=-(o=180),k=-(T=90)}};function d(C,P){i.push(r=[M=C,o=C]),P<k&&(k=P),P>T&&(T=P)}function v(C,P){var D=(0,l.ux)([C*u.qw,P*u.qw]);if(t){var U=(0,l.CW)(t,D),I=[U[1],-U[0],0],N=(0,l.CW)(I,U);(0,l.cJ)(N),N=(0,l.G)(N);var W,F=C-_,j=F>0?1:-1,H=N[0]*u.oh*j,te=(0,u.a2)(F)>180;te^(j*_<H&&H<j*C)?(W=N[1]*u.oh)>T&&(T=W):te^(j*_<(H=(H+360)%360-180)&&H<j*C)?(W=-N[1]*u.oh)<k&&(k=W):(P<k&&(k=P),P>T&&(T=P)),te?C<_?S(M,C)>S(M,o)&&(o=C):S(C,o)>S(M,o)&&(M=C):o>=M?(C<M&&(M=C),C>o&&(o=C)):C>_?S(M,C)>S(M,o)&&(o=C):S(C,o)>S(M,o)&&(M=C)}else i.push(r=[M=C,o=C]);P<k&&(k=P),P>T&&(T=P),t=D,_=C}function g(){x.point=v}function y(){r[0]=M,r[1]=o,x.point=d,t=null}function m(C,P){if(t){var D=C-_;c.add((0,u.a2)(D)>180?D+(D>0?360:-360):D)}else p=C,s=P;a.oB.point(C,P),v(C,P)}function b(){a.oB.lineStart()}function f(){m(p,s),a.oB.lineEnd(),(0,u.a2)(c)>u.Gg&&(M=-(o=180)),r[0]=M,r[1]=o,t=null}function S(C,P){return(P-=C)<0?P+360:P}function w(C,P){return C[0]-P[0]}function E(C,P){return C[0]<=C[1]?C[0]<=P&&P<=C[1]:P<C[0]||C[1]<P}function O(C){var P,D,U,I,N,W,F;if(T=o=-(M=k=1/0),i=[],(0,h.c)(C,x),D=i.length){for(i.sort(w),P=1,N=[U=i[0]];P<D;++P)E(U,(I=i[P])[0])||E(U,I[1])?(S(U[0],I[1])>S(U[0],U[1])&&(U[1]=I[1]),S(I[0],U[1])>S(U[0],U[1])&&(U[0]=I[0])):N.push(U=I);for(W=-1/0,P=0,U=N[D=N.length-1];P<=D;U=I,++P)I=N[P],(F=S(U[1],I[0]))>W&&(W=F,M=I[0],o=U[1])}return i=r=null,M===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,k],[o,T]]}},84220:function(ee,R,e){e.d(R,{CW:function(){return _},Ez:function(){return T},G:function(){return k},cJ:function(){return t},mg:function(){return p},ux:function(){return o},wx:function(){return s}});var M=e(64528);function k(i){return[(0,M.WE)(i[1],i[0]),(0,M.qR)(i[2])]}function o(i){var r=i[0],n=i[1],a=(0,M.W8)(n);return[a*(0,M.W8)(r),a*(0,M.g$)(r),(0,M.g$)(n)]}function T(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]}function _(i,r){return[i[1]*r[2]-i[2]*r[1],i[2]*r[0]-i[0]*r[2],i[0]*r[1]-i[1]*r[0]]}function p(i,r){i[0]+=r[0],i[1]+=r[1],i[2]+=r[2]}function s(i,r){return[i[0]*r,i[1]*r,i[2]*r]}function t(i){var r=(0,M._I)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=r,i[1]/=r,i[2]/=r}},24052:function(ee,R,e){e.d(R,{c:function(){return D}});var M,k,o,T,_,p,s,t,i,r,n,a,l,u,h,c,x=e(64528),d=e(70932),v=e(16016),g={sphere:d.c,point:y,lineStart:b,lineEnd:w,polygonStart:function(){g.lineStart=E,g.lineEnd=O},polygonEnd:function(){g.lineStart=b,g.lineEnd=w}};function y(U,I){U*=x.qw,I*=x.qw;var N=(0,x.W8)(I);m(N*(0,x.W8)(U),N*(0,x.g$)(U),(0,x.g$)(I))}function m(U,I,N){++M,o+=(U-o)/M,T+=(I-T)/M,_+=(N-_)/M}function b(){g.point=f}function f(U,I){U*=x.qw,I*=x.qw;var N=(0,x.W8)(I);u=N*(0,x.W8)(U),h=N*(0,x.g$)(U),c=(0,x.g$)(I),g.point=S,m(u,h,c)}function S(U,I){U*=x.qw,I*=x.qw;var N=(0,x.W8)(I),W=N*(0,x.W8)(U),F=N*(0,x.g$)(U),j=(0,x.g$)(I),H=(0,x.WE)((0,x._I)((H=h*j-c*F)*H+(H=c*W-u*j)*H+(H=u*F-h*W)*H),u*W+h*F+c*j);k+=H,p+=H*(u+(u=W)),s+=H*(h+(h=F)),t+=H*(c+(c=j)),m(u,h,c)}function w(){g.point=y}function E(){g.point=C}function O(){P(a,l),g.point=y}function C(U,I){a=U,l=I,U*=x.qw,I*=x.qw,g.point=P;var N=(0,x.W8)(I);u=N*(0,x.W8)(U),h=N*(0,x.g$)(U),c=(0,x.g$)(I),m(u,h,c)}function P(U,I){U*=x.qw,I*=x.qw;var N=(0,x.W8)(I),W=N*(0,x.W8)(U),F=N*(0,x.g$)(U),j=(0,x.g$)(I),H=h*j-c*F,te=c*W-u*j,Q=u*F-h*W,$=(0,x._I)(H*H+te*te+Q*Q),K=(0,x.qR)($),X=$&&-K/$;i+=X*H,r+=X*te,n+=X*Q,k+=K,p+=K*(u+(u=W)),s+=K*(h+(h=F)),t+=K*(c+(c=j)),m(u,h,c)}function D(U){M=k=o=T=_=p=s=t=i=r=n=0,(0,v.c)(U,g);var I=i,N=r,W=n,F=I*I+N*N+W*W;return F<x.a8&&(I=p,N=s,W=t,k<x.Gg&&(I=o,N=T,W=_),(F=I*I+N*N+W*W)<x.a8)?[NaN,NaN]:[(0,x.WE)(N,I)*x.oh,(0,x.qR)(W/(0,x._I)(F))*x.oh]}},61780:function(ee,R,e){e.d(R,{Q:function(){return _},c:function(){return s}});var M=e(84220);function k(t){return function(){return t}}var o=e(64528),T=e(92992);function _(t,i,r,n,a,l){if(r){var u=(0,o.W8)(i),h=(0,o.g$)(i),c=n*r;a==null?(a=i+n*o.kD,l=i-c/2):(a=p(u,a),l=p(u,l),(n>0?a<l:a>l)&&(a+=n*o.kD));for(var x,d=a;n>0?d>l:d<l;d-=c)x=(0,M.G)([u,-h*(0,o.W8)(d),-h*(0,o.g$)(d)]),t.point(x[0],x[1])}}function p(t,i){(i=(0,M.ux)(i))[0]-=t,(0,M.cJ)(i);var r=(0,o.mE)(-i[1]);return((-i[2]<0?-r:r)+o.kD-o.Gg)%o.kD}function s(){var t,i,r=k([0,0]),n=k(90),a=k(6),l={point:function(h,c){t.push(h=i(h,c)),h[0]*=o.oh,h[1]*=o.oh}};function u(){var h=r.apply(this,arguments),c=n.apply(this,arguments)*o.qw,x=a.apply(this,arguments)*o.qw;return t=[],i=(0,T.O)(-h[0]*o.qw,-h[1]*o.qw,0).invert,_(l,c,x,1),h={type:"Polygon",coordinates:[t]},t=i=null,h}return u.center=function(h){return arguments.length?(r=typeof h=="function"?h:k([+h[0],+h[1]]),u):r},u.radius=function(h){return arguments.length?(n=typeof h=="function"?h:k(+h),u):n},u.precision=function(h){return arguments.length?(a=typeof h=="function"?h:k(+h),u):a},u}},78284:function(ee,R,e){var M=e(14229),k=e(64528);R.c=(0,M.c)(function(){return!0},function(o){var T,_=NaN,p=NaN,s=NaN;return{lineStart:function(){o.lineStart(),T=1},point:function(t,i){var r=t>0?k.pi:-k.pi,n=(0,k.a2)(t-_);(0,k.a2)(n-k.pi)<k.Gg?(o.point(_,p=(p+i)/2>0?k.or:-k.or),o.point(s,p),o.lineEnd(),o.lineStart(),o.point(r,p),o.point(t,p),T=0):s!==r&&n>=k.pi&&((0,k.a2)(_-s)<k.Gg&&(_-=s*k.Gg),(0,k.a2)(t-r)<k.Gg&&(t-=r*k.Gg),p=function(a,l,u,h){var c,x,d=(0,k.g$)(a-u);return(0,k.a2)(d)>k.Gg?(0,k.MQ)(((0,k.g$)(l)*(x=(0,k.W8)(h))*(0,k.g$)(u)-(0,k.g$)(h)*(c=(0,k.W8)(l))*(0,k.g$)(a))/(c*x*d)):(l+h)/2}(_,p,t,i),o.point(s,p),o.lineEnd(),o.lineStart(),o.point(r,p),T=0),o.point(_=t,p=i),s=r},lineEnd:function(){o.lineEnd(),_=p=NaN},clean:function(){return 2-T}}},function(o,T,_,p){var s;if(o==null)s=_*k.or,p.point(-k.pi,s),p.point(0,s),p.point(k.pi,s),p.point(k.pi,0),p.point(k.pi,-s),p.point(0,-s),p.point(-k.pi,-s),p.point(-k.pi,0),p.point(-k.pi,s);else if((0,k.a2)(o[0]-T[0])>k.Gg){var t=o[0]<T[0]?k.pi:-k.pi;s=_*t/2,p.point(-t,s),p.point(0,s),p.point(t,s)}else p.point(T[0],T[1])},[-k.pi,-k.or])},97208:function(ee,R,e){e.d(R,{c:function(){return k}});var M=e(70932);function k(){var o,T=[];return{point:function(_,p,s){o.push([_,p,s])},lineStart:function(){T.push(o=[])},lineEnd:M.c,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var _=T;return T=[],o=null,_}}}},2728:function(ee,R,e){e.d(R,{c:function(){return p}});var M=e(84220),k=e(61780),o=e(64528),T=e(41860),_=e(14229);function p(s){var t=(0,o.W8)(s),i=6*o.qw,r=t>0,n=(0,o.a2)(t)>o.Gg;function a(h,c){return(0,o.W8)(h)*(0,o.W8)(c)>t}function l(h,c,x){var d=(0,M.ux)(h),v=(0,M.ux)(c),g=[1,0,0],y=(0,M.CW)(d,v),m=(0,M.Ez)(y,y),b=y[0],f=m-b*b;if(!f)return!x&&h;var S=t*m/f,w=-t*b/f,E=(0,M.CW)(g,y),O=(0,M.wx)(g,S),C=(0,M.wx)(y,w);(0,M.mg)(O,C);var P=E,D=(0,M.Ez)(O,P),U=(0,M.Ez)(P,P),I=D*D-U*((0,M.Ez)(O,O)-1);if(!(I<0)){var N=(0,o._I)(I),W=(0,M.wx)(P,(-D-N)/U);if((0,M.mg)(W,O),W=(0,M.G)(W),!x)return W;var F,j=h[0],H=c[0],te=h[1],Q=c[1];H<j&&(F=j,j=H,H=F);var $=H-j,K=(0,o.a2)($-o.pi)<o.Gg;if(!K&&Q<te&&(F=te,te=Q,Q=F),K||$<o.Gg?K?te+Q>0^W[1]<((0,o.a2)(W[0]-j)<o.Gg?te:Q):te<=W[1]&&W[1]<=Q:$>o.pi^(j<=W[0]&&W[0]<=H)){var X=(0,M.wx)(P,(-D+N)/U);return(0,M.mg)(X,O),[W,(0,M.G)(X)]}}}function u(h,c){var x=r?s:o.pi-s,d=0;return h<-x?d|=1:h>x&&(d|=2),c<-x?d|=4:c>x&&(d|=8),d}return(0,_.c)(a,function(h){var c,x,d,v,g;return{lineStart:function(){v=d=!1,g=1},point:function(y,m){var b,f=[y,m],S=a(y,m),w=r?S?0:u(y,m):S?u(y+(y<0?o.pi:-o.pi),m):0;if(!c&&(v=d=S)&&h.lineStart(),S!==d&&(!(b=l(c,f))||(0,T.c)(c,b)||(0,T.c)(f,b))&&(f[2]=1),S!==d)g=0,S?(h.lineStart(),b=l(f,c),h.point(b[0],b[1])):(b=l(c,f),h.point(b[0],b[1],2),h.lineEnd()),c=b;else if(n&&c&&r^S){var E;w&x||!(E=l(f,c,!0))||(g=0,r?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!S||c&&(0,T.c)(c,f)||h.point(f[0],f[1]),c=f,d=S,x=w},lineEnd:function(){d&&h.lineEnd(),c=null},clean:function(){return g|(v&&d)<<1}}},function(h,c,x,d){(0,k.Q)(d,s,i,x,h,c)},r?[0,-s]:[-o.pi,s-o.pi])}},14229:function(ee,R,e){e.d(R,{c:function(){return p}});var M=e(97208),k=e(32232),o=e(64528),T=e(58196),_=e(84706);function p(i,r,n,a){return function(l){var u,h,c,x=r(l),d=(0,M.c)(),v=r(d),g=!1,y={point:m,lineStart:f,lineEnd:S,polygonStart:function(){y.point=w,y.lineStart=E,y.lineEnd=O,h=[],u=[]},polygonEnd:function(){y.point=m,y.lineStart=f,y.lineEnd=S,h=(0,_.Uf)(h);var C=(0,T.c)(u,a);h.length?(g||(l.polygonStart(),g=!0),(0,k.c)(h,t,C,n,l)):C&&(g||(l.polygonStart(),g=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),g&&(l.polygonEnd(),g=!1),h=u=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function m(C,P){i(C,P)&&l.point(C,P)}function b(C,P){x.point(C,P)}function f(){y.point=b,x.lineStart()}function S(){y.point=m,x.lineEnd()}function w(C,P){c.push([C,P]),v.point(C,P)}function E(){v.lineStart(),c=[]}function O(){w(c[0][0],c[0][1]),v.lineEnd();var C,P,D,U,I=v.clean(),N=d.result(),W=N.length;if(c.pop(),u.push(c),c=null,W)if(1&I){if((P=(D=N[0]).length-1)>0){for(g||(l.polygonStart(),g=!0),l.lineStart(),C=0;C<P;++C)l.point((U=D[C])[0],U[1]);l.lineEnd()}}else W>1&&2&I&&N.push(N.pop().concat(N.shift())),h.push(N.filter(s))}return y}}function s(i){return i.length>1}function t(i,r){return((i=i.x)[0]<0?i[1]-o.or-o.Gg:o.or-i[1])-((r=r.x)[0]<0?r[1]-o.or-o.Gg:o.or-r[1])}},21676:function(ee,R,e){e.d(R,{c:function(){return s}});var M=e(64528),k=e(97208),o=e(32232),T=e(84706),_=1e9,p=-_;function s(t,i,r,n){function a(x,d){return t<=x&&x<=r&&i<=d&&d<=n}function l(x,d,v,g){var y=0,m=0;if(x==null||(y=u(x,v))!==(m=u(d,v))||c(x,d)<0^v>0)do g.point(y===0||y===3?t:r,y>1?n:i);while((y=(y+v+4)%4)!==m);else g.point(d[0],d[1])}function u(x,d){return(0,M.a2)(x[0]-t)<M.Gg?d>0?0:3:(0,M.a2)(x[0]-r)<M.Gg?d>0?2:1:(0,M.a2)(x[1]-i)<M.Gg?d>0?1:0:d>0?3:2}function h(x,d){return c(x.x,d.x)}function c(x,d){var v=u(x,1),g=u(d,1);return v!==g?v-g:v===0?d[1]-x[1]:v===1?x[0]-d[0]:v===2?x[1]-d[1]:d[0]-x[0]}return function(x){var d,v,g,y,m,b,f,S,w,E,O,C=x,P=(0,k.c)(),D={point:U,lineStart:function(){D.point=I,v&&v.push(g=[]),E=!0,w=!1,f=S=NaN},lineEnd:function(){d&&(I(y,m),b&&w&&P.rejoin(),d.push(P.result())),D.point=U,w&&C.lineEnd()},polygonStart:function(){C=P,d=[],v=[],O=!0},polygonEnd:function(){var N=function(){for(var j=0,H=0,te=v.length;H<te;++H)for(var Q,$,K=v[H],X=1,Y=K.length,re=K[0],se=re[0],ae=re[1];X<Y;++X)Q=se,$=ae,se=(re=K[X])[0],ae=re[1],$<=n?ae>n&&(se-Q)*(n-$)>(ae-$)*(t-Q)&&++j:ae<=n&&(se-Q)*(n-$)<(ae-$)*(t-Q)&&--j;return j}(),W=O&&N,F=(d=(0,T.Uf)(d)).length;(W||F)&&(x.polygonStart(),W&&(x.lineStart(),l(null,null,1,x),x.lineEnd()),F&&(0,o.c)(d,h,N,l,x),x.polygonEnd()),C=x,d=v=g=null}};function U(N,W){a(N,W)&&C.point(N,W)}function I(N,W){var F=a(N,W);if(v&&g.push([N,W]),E)y=N,m=W,b=F,E=!1,F&&(C.lineStart(),C.point(N,W));else if(F&&w)C.point(N,W);else{var j=[f=Math.max(p,Math.min(_,f)),S=Math.max(p,Math.min(_,S))],H=[N=Math.max(p,Math.min(_,N)),W=Math.max(p,Math.min(_,W))];(function(te,Q,$,K,X,Y){var re,se=te[0],ae=te[1],ce=0,fe=1,he=Q[0]-se,ve=Q[1]-ae;if(re=$-se,he||!(re>0)){if(re/=he,he<0){if(re<ce)return;re<fe&&(fe=re)}else if(he>0){if(re>fe)return;re>ce&&(ce=re)}if(re=X-se,he||!(re<0)){if(re/=he,he<0){if(re>fe)return;re>ce&&(ce=re)}else if(he>0){if(re<ce)return;re<fe&&(fe=re)}if(re=K-ae,ve||!(re>0)){if(re/=ve,ve<0){if(re<ce)return;re<fe&&(fe=re)}else if(ve>0){if(re>fe)return;re>ce&&(ce=re)}if(re=Y-ae,ve||!(re<0)){if(re/=ve,ve<0){if(re>fe)return;re>ce&&(ce=re)}else if(ve>0){if(re<ce)return;re<fe&&(fe=re)}return ce>0&&(te[0]=se+ce*he,te[1]=ae+ce*ve),fe<1&&(Q[0]=se+fe*he,Q[1]=ae+fe*ve),!0}}}}})(j,H,t,i,r,n)?(w||(C.lineStart(),C.point(j[0],j[1])),C.point(H[0],H[1]),F||C.lineEnd(),O=!1):F&&(C.lineStart(),C.point(N,W),O=!1)}f=N,S=W,w=F}return D}}},32232:function(ee,R,e){e.d(R,{c:function(){return T}});var M=e(41860),k=e(64528);function o(p,s,t,i){this.x=p,this.z=s,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function T(p,s,t,i,r){var n,a,l=[],u=[];if(p.forEach(function(g){if(!((y=g.length-1)<=0)){var y,m,b=g[0],f=g[y];if((0,M.c)(b,f)){if(!b[2]&&!f[2]){for(r.lineStart(),n=0;n<y;++n)r.point((b=g[n])[0],b[1]);return void r.lineEnd()}f[0]+=2*k.Gg}l.push(m=new o(b,g,null,!0)),u.push(m.o=new o(b,null,m,!1)),l.push(m=new o(f,g,null,!1)),u.push(m.o=new o(f,null,m,!0))}}),l.length){for(u.sort(s),_(l),_(u),n=0,a=u.length;n<a;++n)u[n].e=t=!t;for(var h,c,x=l[0];;){for(var d=x,v=!0;d.v;)if((d=d.n)===x)return;h=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(v)for(n=0,a=h.length;n<a;++n)r.point((c=h[n])[0],c[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(v)for(h=d.p.z,n=h.length-1;n>=0;--n)r.point((c=h[n])[0],c[1]);else i(d.x,d.p.x,-1,r);d=d.p}h=(d=d.o).z,v=!v}while(!d.v);r.lineEnd()}}}function _(p){if(s=p.length){for(var s,t,i=0,r=p[0];++i<s;)r.n=t=p[i],t.p=r,r=t;r.n=t=p[0],t.p=r}}},68120:function(ee,R,e){function M(k,o){function T(_,p){return _=k(_,p),o(_[0],_[1])}return k.invert&&o.invert&&(T.invert=function(_,p){return(_=o.invert(_,p))&&k.invert(_[0],_[1])}),T}e.d(R,{c:function(){return M}})},7376:function(ee,R,e){function M(k){return k}e.d(R,{c:function(){return M}})},83356:function(ee,R,e){e.r(R),e.d(R,{geoAlbers:function(){return gt},geoAlbersUsa:function(){return kt},geoArea:function(){return M.cp},geoAzimuthalEqualArea:function(){return mt.c},geoAzimuthalEqualAreaRaw:function(){return mt.y},geoAzimuthalEquidistant:function(){return At.c},geoAzimuthalEquidistantRaw:function(){return At.O},geoBounds:function(){return k.c},geoCentroid:function(){return o.c},geoCircle:function(){return T.c},geoClipAntimeridian:function(){return _.c},geoClipCircle:function(){return p.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.c},geoConicConformal:function(){return Wt},geoConicConformalRaw:function(){return Nt},geoConicEqualArea:function(){return pt},geoConicEqualAreaRaw:function(){return ct},geoConicEquidistant:function(){return bn},geoConicEquidistantRaw:function(){return Ln},geoContains:function(){return N},geoDistance:function(){return S},geoEqualEarth:function(){return xn},geoEqualEarthRaw:function(){return mn},geoEquirectangular:function(){return Rt.c},geoEquirectangularRaw:function(){return Rt.u},geoGnomonic:function(){return Mn.c},geoGnomonicRaw:function(){return Mn.Y},geoGraticule:function(){return H},geoGraticule10:function(){return te},geoIdentity:function(){return Tn},geoInterpolate:function(){return Y.c},geoLength:function(){return m},geoMercator:function(){return zt},geoMercatorRaw:function(){return Ct},geoNaturalEarth1:function(){return Rn.c},geoNaturalEarth1Raw:function(){return Rn.g},geoOrthographic:function(){return Pn.c},geoOrthographicRaw:function(){return Pn.t},geoPath:function(){return Fe},geoProjection:function(){return nt.c},geoProjectionMutator:function(){return nt.U},geoRotation:function(){return Lt.c},geoStereographic:function(){return $n},geoStereographicRaw:function(){return Jn},geoStream:function(){return c.c},geoTransform:function(){return Sn.c},geoTransverseMercator:function(){return lr},geoTransverseMercatorRaw:function(){return Gn}});var M=e(95384),k=e(13696),o=e(24052),T=e(61780),_=e(78284),p=e(2728),s=e(21676);function t(){var Jt,Qt,En,pn=0,Cn=0,Vn=960,Fn=500;return En={stream:function(Yn){return Jt&&Qt===Yn?Jt:Jt=(0,s.c)(pn,Cn,Vn,Fn)(Qt=Yn)},extent:function(Yn){return arguments.length?(pn=+Yn[0][0],Cn=+Yn[0][1],Vn=+Yn[1][0],Fn=+Yn[1][1],Jt=Qt=null,En):[[pn,Cn],[Vn,Fn]]}}}var i,r,n,a=e(58196),l=e(88728),u=e(64528),h=e(70932),c=e(16016),x=(0,l.c)(),d={sphere:h.c,point:h.c,lineStart:function(){d.point=g,d.lineEnd=v},lineEnd:h.c,polygonStart:h.c,polygonEnd:h.c};function v(){d.point=d.lineEnd=h.c}function g(Jt,Qt){Jt*=u.qw,Qt*=u.qw,i=Jt,r=(0,u.g$)(Qt),n=(0,u.W8)(Qt),d.point=y}function y(Jt,Qt){Jt*=u.qw,Qt*=u.qw;var En=(0,u.g$)(Qt),pn=(0,u.W8)(Qt),Cn=(0,u.a2)(Jt-i),Vn=(0,u.W8)(Cn),Fn=pn*(0,u.g$)(Cn),Yn=n*En-r*pn*Vn,fr=r*En+n*pn*Vn;x.add((0,u.WE)((0,u._I)(Fn*Fn+Yn*Yn),fr)),i=Jt,r=En,n=pn}function m(Jt){return x.reset(),(0,c.c)(Jt,d),+x}var b=[null,null],f={type:"LineString",coordinates:b};function S(Jt,Qt){return b[0]=Jt,b[1]=Qt,m(f)}var w={Feature:function(Jt,Qt){return O(Jt.geometry,Qt)},FeatureCollection:function(Jt,Qt){for(var En=Jt.features,pn=-1,Cn=En.length;++pn<Cn;)if(O(En[pn].geometry,Qt))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Jt,Qt){return C(Jt.coordinates,Qt)},MultiPoint:function(Jt,Qt){for(var En=Jt.coordinates,pn=-1,Cn=En.length;++pn<Cn;)if(C(En[pn],Qt))return!0;return!1},LineString:function(Jt,Qt){return P(Jt.coordinates,Qt)},MultiLineString:function(Jt,Qt){for(var En=Jt.coordinates,pn=-1,Cn=En.length;++pn<Cn;)if(P(En[pn],Qt))return!0;return!1},Polygon:function(Jt,Qt){return D(Jt.coordinates,Qt)},MultiPolygon:function(Jt,Qt){for(var En=Jt.coordinates,pn=-1,Cn=En.length;++pn<Cn;)if(D(En[pn],Qt))return!0;return!1},GeometryCollection:function(Jt,Qt){for(var En=Jt.geometries,pn=-1,Cn=En.length;++pn<Cn;)if(O(En[pn],Qt))return!0;return!1}};function O(Jt,Qt){return!(!Jt||!E.hasOwnProperty(Jt.type))&&E[Jt.type](Jt,Qt)}function C(Jt,Qt){return S(Jt,Qt)===0}function P(Jt,Qt){for(var En,pn,Cn,Vn=0,Fn=Jt.length;Vn<Fn;Vn++){if((pn=S(Jt[Vn],Qt))===0||Vn>0&&(Cn=S(Jt[Vn],Jt[Vn-1]))>0&&En<=Cn&&pn<=Cn&&(En+pn-Cn)*(1-Math.pow((En-pn)/Cn,2))<u.a8*Cn)return!0;En=pn}return!1}function D(Jt,Qt){return!!(0,a.c)(Jt.map(U),I(Qt))}function U(Jt){return(Jt=Jt.map(I)).pop(),Jt}function I(Jt){return[Jt[0]*u.qw,Jt[1]*u.qw]}function N(Jt,Qt){return(Jt&&w.hasOwnProperty(Jt.type)?w[Jt.type]:O)(Jt,Qt)}var W=e(84706);function F(Jt,Qt,En){var pn=(0,W.ik)(Jt,Qt-u.Gg,En).concat(Qt);return function(Cn){return pn.map(function(Vn){return[Cn,Vn]})}}function j(Jt,Qt,En){var pn=(0,W.ik)(Jt,Qt-u.Gg,En).concat(Qt);return function(Cn){return pn.map(function(Vn){return[Vn,Cn]})}}function H(){var Jt,Qt,En,pn,Cn,Vn,Fn,Yn,fr,Zt,dn,bt,Ut=10,Xt=Ut,un=90,cn=360,vn=2.5;function en(){return{type:"MultiLineString",coordinates:Vt()}}function Vt(){return(0,W.ik)((0,u.Km)(pn/un)*un,En,un).map(dn).concat((0,W.ik)((0,u.Km)(Yn/cn)*cn,Fn,cn).map(bt)).concat((0,W.ik)((0,u.Km)(Qt/Ut)*Ut,Jt,Ut).filter(function(Ht){return(0,u.a2)(Ht%un)>u.Gg}).map(fr)).concat((0,W.ik)((0,u.Km)(Vn/Xt)*Xt,Cn,Xt).filter(function(Ht){return(0,u.a2)(Ht%cn)>u.Gg}).map(Zt))}return en.lines=function(){return Vt().map(function(Ht){return{type:"LineString",coordinates:Ht}})},en.outline=function(){return{type:"Polygon",coordinates:[dn(pn).concat(bt(Fn).slice(1),dn(En).reverse().slice(1),bt(Yn).reverse().slice(1))]}},en.extent=function(Ht){return arguments.length?en.extentMajor(Ht).extentMinor(Ht):en.extentMinor()},en.extentMajor=function(Ht){return arguments.length?(pn=+Ht[0][0],En=+Ht[1][0],Yn=+Ht[0][1],Fn=+Ht[1][1],pn>En&&(Ht=pn,pn=En,En=Ht),Yn>Fn&&(Ht=Yn,Yn=Fn,Fn=Ht),en.precision(vn)):[[pn,Yn],[En,Fn]]},en.extentMinor=function(Ht){return arguments.length?(Qt=+Ht[0][0],Jt=+Ht[1][0],Vn=+Ht[0][1],Cn=+Ht[1][1],Qt>Jt&&(Ht=Qt,Qt=Jt,Jt=Ht),Vn>Cn&&(Ht=Vn,Vn=Cn,Cn=Ht),en.precision(vn)):[[Qt,Vn],[Jt,Cn]]},en.step=function(Ht){return arguments.length?en.stepMajor(Ht).stepMinor(Ht):en.stepMinor()},en.stepMajor=function(Ht){return arguments.length?(un=+Ht[0],cn=+Ht[1],en):[un,cn]},en.stepMinor=function(Ht){return arguments.length?(Ut=+Ht[0],Xt=+Ht[1],en):[Ut,Xt]},en.precision=function(Ht){return arguments.length?(vn=+Ht,fr=F(Vn,Cn,90),Zt=j(Qt,Jt,vn),dn=F(Yn,Fn,90),bt=j(pn,En,vn),en):vn},en.extentMajor([[-180,-90+u.Gg],[180,90-u.Gg]]).extentMinor([[-180,-80-u.Gg],[180,80+u.Gg]])}function te(){return H()()}var Q,$,K,X,Y=e(27284),re=e(7376),se=(0,l.c)(),ae=(0,l.c)(),ce={point:h.c,lineStart:h.c,lineEnd:h.c,polygonStart:function(){ce.lineStart=fe,ce.lineEnd=ye},polygonEnd:function(){ce.lineStart=ce.lineEnd=ce.point=h.c,se.add((0,u.a2)(ae)),ae.reset()},result:function(){var Jt=se/2;return se.reset(),Jt}};function fe(){ce.point=he}function he(Jt,Qt){ce.point=ve,Q=K=Jt,$=X=Qt}function ve(Jt,Qt){ae.add(X*Jt-K*Qt),K=Jt,X=Qt}function ye(){ve(Q,$)}var me,Me,Pe,ge,oe=ce,ie=e(73784),de=0,Se=0,_e=0,we=0,Ae=0,Oe=0,ze=0,pe=0,be=0,ke={point:Ie,lineStart:Ee,lineEnd:Ze,polygonStart:function(){ke.lineStart=rt,ke.lineEnd=it},polygonEnd:function(){ke.point=Ie,ke.lineStart=Ee,ke.lineEnd=Ze},result:function(){var Jt=be?[ze/be,pe/be]:Oe?[we/Oe,Ae/Oe]:_e?[de/_e,Se/_e]:[NaN,NaN];return de=Se=_e=we=Ae=Oe=ze=pe=be=0,Jt}};function Ie(Jt,Qt){de+=Jt,Se+=Qt,++_e}function Ee(){ke.point=Be}function Be(Jt,Qt){ke.point=Ve,Ie(Pe=Jt,ge=Qt)}function Ve(Jt,Qt){var En=Jt-Pe,pn=Qt-ge,Cn=(0,u._I)(En*En+pn*pn);we+=Cn*(Pe+Jt)/2,Ae+=Cn*(ge+Qt)/2,Oe+=Cn,Ie(Pe=Jt,ge=Qt)}function Ze(){ke.point=Ie}function rt(){ke.point=dt}function it(){vt(me,Me)}function dt(Jt,Qt){ke.point=vt,Ie(me=Pe=Jt,Me=ge=Qt)}function vt(Jt,Qt){var En=Jt-Pe,pn=Qt-ge,Cn=(0,u._I)(En*En+pn*pn);we+=Cn*(Pe+Jt)/2,Ae+=Cn*(ge+Qt)/2,Oe+=Cn,ze+=(Cn=ge*Jt-Pe*Qt)*(Pe+Jt),pe+=Cn*(ge+Qt),be+=3*Cn,Ie(Pe=Jt,ge=Qt)}var ht=ke;function Qe(Jt){this._context=Jt}Qe.prototype={_radius:4.5,pointRadius:function(Jt){return this._radius=Jt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Jt,Qt){switch(this._point){case 0:this._context.moveTo(Jt,Qt),this._point=1;break;case 1:this._context.lineTo(Jt,Qt);break;default:this._context.moveTo(Jt+this._radius,Qt),this._context.arc(Jt,Qt,this._radius,0,u.kD)}},result:h.c};var Je,Tt,Ot,Pt,Mt,He=(0,l.c)(),Ye={point:h.c,lineStart:function(){Ye.point=Ne},lineEnd:function(){Je&&We(Tt,Ot),Ye.point=h.c},polygonStart:function(){Je=!0},polygonEnd:function(){Je=null},result:function(){var Jt=+He;return He.reset(),Jt}};function Ne(Jt,Qt){Ye.point=We,Tt=Pt=Jt,Ot=Mt=Qt}function We(Jt,Qt){Pt-=Jt,Mt-=Qt,He.add((0,u._I)(Pt*Pt+Mt*Mt)),Pt=Jt,Mt=Qt}var ot=Ye;function tt(){this._string=[]}function Re(Jt){return"m0,"+Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+-2*Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+2*Jt+"z"}function Fe(Jt,Qt){var En,pn,Cn=4.5;function Vn(Fn){return Fn&&(typeof Cn=="function"&&pn.pointRadius(+Cn.apply(this,arguments)),(0,c.c)(Fn,En(pn))),pn.result()}return Vn.area=function(Fn){return(0,c.c)(Fn,En(oe)),oe.result()},Vn.measure=function(Fn){return(0,c.c)(Fn,En(ot)),ot.result()},Vn.bounds=function(Fn){return(0,c.c)(Fn,En(ie.c)),ie.c.result()},Vn.centroid=function(Fn){return(0,c.c)(Fn,En(ht)),ht.result()},Vn.projection=function(Fn){return arguments.length?(En=Fn==null?(Jt=null,re.c):(Jt=Fn).stream,Vn):Jt},Vn.context=function(Fn){return arguments.length?(pn=Fn==null?(Qt=null,new tt):new Qe(Qt=Fn),typeof Cn!="function"&&pn.pointRadius(Cn),Vn):Qt},Vn.pointRadius=function(Fn){return arguments.length?(Cn=typeof Fn=="function"?Fn:(pn.pointRadius(+Fn),+Fn),Vn):Cn},Vn.projection(Jt).context(Qt)}tt.prototype={_radius:4.5,_circle:Re(4.5),pointRadius:function(Jt){return(Jt=+Jt)!==this._radius&&(this._radius=Jt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Jt,Qt){switch(this._point){case 0:this._string.push("M",Jt,",",Qt),this._point=1;break;case 1:this._string.push("L",Jt,",",Qt);break;default:this._circle==null&&(this._circle=Re(this._radius)),this._string.push("M",Jt,",",Qt,this._circle)}},result:function(){if(this._string.length){var Jt=this._string.join("");return this._string=[],Jt}return null}};var nt=e(87952);function Ge(Jt){var Qt=0,En=u.pi/3,pn=(0,nt.U)(Jt),Cn=pn(Qt,En);return Cn.parallels=function(Vn){return arguments.length?pn(Qt=Vn[0]*u.qw,En=Vn[1]*u.qw):[Qt*u.oh,En*u.oh]},Cn}function ct(Jt,Qt){var En=(0,u.g$)(Jt),pn=(En+(0,u.g$)(Qt))/2;if((0,u.a2)(pn)<u.Gg)return function(Yn){var fr=(0,u.W8)(Yn);function Zt(dn,bt){return[dn*fr,(0,u.g$)(bt)/fr]}return Zt.invert=function(dn,bt){return[dn/fr,(0,u.qR)(bt*fr)]},Zt}(Jt);var Cn=1+En*(2*pn-En),Vn=(0,u._I)(Cn)/pn;function Fn(Yn,fr){var Zt=(0,u._I)(Cn-2*pn*(0,u.g$)(fr))/pn;return[Zt*(0,u.g$)(Yn*=pn),Vn-Zt*(0,u.W8)(Yn)]}return Fn.invert=function(Yn,fr){var Zt=Vn-fr,dn=(0,u.WE)(Yn,(0,u.a2)(Zt))*(0,u.kq)(Zt);return Zt*pn<0&&(dn-=u.pi*(0,u.kq)(Yn)*(0,u.kq)(Zt)),[dn/pn,(0,u.qR)((Cn-(Yn*Yn+Zt*Zt)*pn*pn)/(2*pn))]},Fn}function pt(){return Ge(ct).scale(155.424).center([0,33.6442])}function gt(){return pt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ut=e(86420);function kt(){var Jt,Qt,En,pn,Cn,Vn,Fn=gt(),Yn=pt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),fr=pt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Zt={point:function(Ut,Xt){Vn=[Ut,Xt]}};function dn(Ut){var Xt=Ut[0],un=Ut[1];return Vn=null,En.point(Xt,un),Vn||(pn.point(Xt,un),Vn)||(Cn.point(Xt,un),Vn)}function bt(){return Jt=Qt=null,dn}return dn.invert=function(Ut){var Xt=Fn.scale(),un=Fn.translate(),cn=(Ut[0]-un[0])/Xt,vn=(Ut[1]-un[1])/Xt;return(vn>=.12&&vn<.234&&cn>=-.425&&cn<-.214?Yn:vn>=.166&&vn<.234&&cn>=-.214&&cn<-.115?fr:Fn).invert(Ut)},dn.stream=function(Ut){return Jt&&Qt===Ut?Jt:(Xt=[Fn.stream(Qt=Ut),Yn.stream(Ut),fr.stream(Ut)],un=Xt.length,Jt={point:function(cn,vn){for(var en=-1;++en<un;)Xt[en].point(cn,vn)},sphere:function(){for(var cn=-1;++cn<un;)Xt[cn].sphere()},lineStart:function(){for(var cn=-1;++cn<un;)Xt[cn].lineStart()},lineEnd:function(){for(var cn=-1;++cn<un;)Xt[cn].lineEnd()},polygonStart:function(){for(var cn=-1;++cn<un;)Xt[cn].polygonStart()},polygonEnd:function(){for(var cn=-1;++cn<un;)Xt[cn].polygonEnd()}});var Xt,un},dn.precision=function(Ut){return arguments.length?(Fn.precision(Ut),Yn.precision(Ut),fr.precision(Ut),bt()):Fn.precision()},dn.scale=function(Ut){return arguments.length?(Fn.scale(Ut),Yn.scale(.35*Ut),fr.scale(Ut),dn.translate(Fn.translate())):Fn.scale()},dn.translate=function(Ut){if(!arguments.length)return Fn.translate();var Xt=Fn.scale(),un=+Ut[0],cn=+Ut[1];return En=Fn.translate(Ut).clipExtent([[un-.455*Xt,cn-.238*Xt],[un+.455*Xt,cn+.238*Xt]]).stream(Zt),pn=Yn.translate([un-.307*Xt,cn+.201*Xt]).clipExtent([[un-.425*Xt+u.Gg,cn+.12*Xt+u.Gg],[un-.214*Xt-u.Gg,cn+.234*Xt-u.Gg]]).stream(Zt),Cn=fr.translate([un-.205*Xt,cn+.212*Xt]).clipExtent([[un-.214*Xt+u.Gg,cn+.166*Xt+u.Gg],[un-.115*Xt-u.Gg,cn+.234*Xt-u.Gg]]).stream(Zt),bt()},dn.fitExtent=function(Ut,Xt){return(0,ut.QX)(dn,Ut,Xt)},dn.fitSize=function(Ut,Xt){return(0,ut.UV)(dn,Ut,Xt)},dn.fitWidth=function(Ut,Xt){return(0,ut.Qx)(dn,Ut,Xt)},dn.fitHeight=function(Ut,Xt){return(0,ut.OW)(dn,Ut,Xt)},dn.scale(1070)}var mt=e(54724),At=e(69020),Lt=e(92992);function Ct(Jt,Qt){return[Jt,(0,u.Yz)((0,u.a6)((u.or+Qt)/2))]}function zt(){return Gt(Ct).scale(961/u.kD)}function Gt(Jt){var Qt,En,pn,Cn=(0,nt.c)(Jt),Vn=Cn.center,Fn=Cn.scale,Yn=Cn.translate,fr=Cn.clipExtent,Zt=null;function dn(){var bt=u.pi*Fn(),Ut=Cn((0,Lt.c)(Cn.rotate()).invert([0,0]));return fr(Zt==null?[[Ut[0]-bt,Ut[1]-bt],[Ut[0]+bt,Ut[1]+bt]]:Jt===Ct?[[Math.max(Ut[0]-bt,Zt),Qt],[Math.min(Ut[0]+bt,En),pn]]:[[Zt,Math.max(Ut[1]-bt,Qt)],[En,Math.min(Ut[1]+bt,pn)]])}return Cn.scale=function(bt){return arguments.length?(Fn(bt),dn()):Fn()},Cn.translate=function(bt){return arguments.length?(Yn(bt),dn()):Yn()},Cn.center=function(bt){return arguments.length?(Vn(bt),dn()):Vn()},Cn.clipExtent=function(bt){return arguments.length?(bt==null?Zt=Qt=En=pn=null:(Zt=+bt[0][0],Qt=+bt[0][1],En=+bt[1][0],pn=+bt[1][1]),dn()):Zt==null?null:[[Zt,Qt],[En,pn]]},dn()}function rn(Jt){return(0,u.a6)((u.or+Jt)/2)}function Nt(Jt,Qt){var En=(0,u.W8)(Jt),pn=Jt===Qt?(0,u.g$)(Jt):(0,u.Yz)(En/(0,u.W8)(Qt))/(0,u.Yz)(rn(Qt)/rn(Jt)),Cn=En*(0,u.g3)(rn(Jt),pn)/pn;if(!pn)return Ct;function Vn(Fn,Yn){Cn>0?Yn<-u.or+u.Gg&&(Yn=-u.or+u.Gg):Yn>u.or-u.Gg&&(Yn=u.or-u.Gg);var fr=Cn/(0,u.g3)(rn(Yn),pn);return[fr*(0,u.g$)(pn*Fn),Cn-fr*(0,u.W8)(pn*Fn)]}return Vn.invert=function(Fn,Yn){var fr=Cn-Yn,Zt=(0,u.kq)(pn)*(0,u._I)(Fn*Fn+fr*fr),dn=(0,u.WE)(Fn,(0,u.a2)(fr))*(0,u.kq)(fr);return fr*pn<0&&(dn-=u.pi*(0,u.kq)(Fn)*(0,u.kq)(fr)),[dn/pn,2*(0,u.MQ)((0,u.g3)(Cn/Zt,1/pn))-u.or]},Vn}function Wt(){return Ge(Nt).scale(109.5).parallels([30,30])}Ct.invert=function(Jt,Qt){return[Jt,2*(0,u.MQ)((0,u.oN)(Qt))-u.or]};var Rt=e(69604);function Ln(Jt,Qt){var En=(0,u.W8)(Jt),pn=Jt===Qt?(0,u.g$)(Jt):(En-(0,u.W8)(Qt))/(Qt-Jt),Cn=En/pn+Jt;if((0,u.a2)(pn)<u.Gg)return Rt.u;function Vn(Fn,Yn){var fr=Cn-Yn,Zt=pn*Fn;return[fr*(0,u.g$)(Zt),Cn-fr*(0,u.W8)(Zt)]}return Vn.invert=function(Fn,Yn){var fr=Cn-Yn,Zt=(0,u.WE)(Fn,(0,u.a2)(fr))*(0,u.kq)(fr);return fr*pn<0&&(Zt-=u.pi*(0,u.kq)(Fn)*(0,u.kq)(fr)),[Zt/pn,Cn-(0,u.kq)(pn)*(0,u._I)(Fn*Fn+fr*fr)]},Vn}function bn(){return Ge(Ln).scale(131.154).center([0,13.9389])}var hn=1.340264,Kt=-.081106,on=893e-6,$t=.003796,ln=(0,u._I)(3)/2;function mn(Jt,Qt){var En=(0,u.qR)(ln*(0,u.g$)(Qt)),pn=En*En,Cn=pn*pn*pn;return[Jt*(0,u.W8)(En)/(ln*(hn+3*Kt*pn+Cn*(7*on+9*$t*pn))),En*(hn+Kt*pn+Cn*(on+$t*pn))]}function xn(){return(0,nt.c)(mn).scale(177.158)}mn.invert=function(Jt,Qt){for(var En,pn=Qt,Cn=pn*pn,Vn=Cn*Cn*Cn,Fn=0;Fn<12&&(Vn=(Cn=(pn-=En=(pn*(hn+Kt*Cn+Vn*(on+$t*Cn))-Qt)/(hn+3*Kt*Cn+Vn*(7*on+9*$t*Cn)))*pn)*Cn*Cn,!((0,u.a2)(En)<u.a8));++Fn);return[ln*Jt*(hn+3*Kt*Cn+Vn*(7*on+9*$t*Cn))/(0,u.W8)(pn),(0,u.qR)((0,u.g$)(pn)/ln)]};var Mn=e(53285),Sn=e(15196);function Tn(){var Jt,Qt,En,pn,Cn,Vn,Fn,Yn=1,fr=0,Zt=0,dn=1,bt=1,Ut=0,Xt=null,un=1,cn=1,vn=(0,Sn.s)({point:function(tn,sn){var wn=Ht([tn,sn]);this.stream.point(wn[0],wn[1])}}),en=re.c;function Vt(){return un=Yn*dn,cn=Yn*bt,Vn=Fn=null,Ht}function Ht(tn){var sn=tn[0]*un,wn=tn[1]*cn;if(Ut){var An=wn*Jt-sn*Qt;sn=sn*Jt+wn*Qt,wn=An}return[sn+fr,wn+Zt]}return Ht.invert=function(tn){var sn=tn[0]-fr,wn=tn[1]-Zt;if(Ut){var An=wn*Jt+sn*Qt;sn=sn*Jt-wn*Qt,wn=An}return[sn/un,wn/cn]},Ht.stream=function(tn){return Vn&&Fn===tn?Vn:Vn=vn(en(Fn=tn))},Ht.postclip=function(tn){return arguments.length?(en=tn,Xt=En=pn=Cn=null,Vt()):en},Ht.clipExtent=function(tn){return arguments.length?(en=tn==null?(Xt=En=pn=Cn=null,re.c):(0,s.c)(Xt=+tn[0][0],En=+tn[0][1],pn=+tn[1][0],Cn=+tn[1][1]),Vt()):Xt==null?null:[[Xt,En],[pn,Cn]]},Ht.scale=function(tn){return arguments.length?(Yn=+tn,Vt()):Yn},Ht.translate=function(tn){return arguments.length?(fr=+tn[0],Zt=+tn[1],Vt()):[fr,Zt]},Ht.angle=function(tn){return arguments.length?(Ut=tn%360*u.qw,Qt=(0,u.g$)(Ut),Jt=(0,u.W8)(Ut),Vt()):Ut*u.oh},Ht.reflectX=function(tn){return arguments.length?(dn=tn?-1:1,Vt()):dn<0},Ht.reflectY=function(tn){return arguments.length?(bt=tn?-1:1,Vt()):bt<0},Ht.fitExtent=function(tn,sn){return(0,ut.QX)(Ht,tn,sn)},Ht.fitSize=function(tn,sn){return(0,ut.UV)(Ht,tn,sn)},Ht.fitWidth=function(tn,sn){return(0,ut.Qx)(Ht,tn,sn)},Ht.fitHeight=function(tn,sn){return(0,ut.OW)(Ht,tn,sn)},Ht}var Rn=e(47984),Pn=e(4888),jn=e(62280);function Jn(Jt,Qt){var En=(0,u.W8)(Qt),pn=1+(0,u.W8)(Jt)*En;return[En*(0,u.g$)(Jt)/pn,(0,u.g$)(Qt)/pn]}function $n(){return(0,nt.c)(Jn).scale(250).clipAngle(142)}function Gn(Jt,Qt){return[(0,u.Yz)((0,u.a6)((u.or+Qt)/2)),-Jt]}function lr(){var Jt=Gt(Gn),Qt=Jt.center,En=Jt.rotate;return Jt.center=function(pn){return arguments.length?Qt([-pn[1],pn[0]]):[(pn=Qt())[1],-pn[0]]},Jt.rotate=function(pn){return arguments.length?En([pn[0],pn[1],pn.length>2?pn[2]+90:90]):[(pn=En())[0],pn[1],pn[2]-90]},En([0,0,90]).scale(159.155)}Jn.invert=(0,jn.g)(function(Jt){return 2*(0,u.MQ)(Jt)}),Gn.invert=function(Jt,Qt){return[-Qt,2*(0,u.MQ)((0,u.oN)(Jt))-u.or]}},27284:function(ee,R,e){e.d(R,{c:function(){return k}});var M=e(64528);function k(o,T){var _=o[0]*M.qw,p=o[1]*M.qw,s=T[0]*M.qw,t=T[1]*M.qw,i=(0,M.W8)(p),r=(0,M.g$)(p),n=(0,M.W8)(t),a=(0,M.g$)(t),l=i*(0,M.W8)(_),u=i*(0,M.g$)(_),h=n*(0,M.W8)(s),c=n*(0,M.g$)(s),x=2*(0,M.qR)((0,M._I)((0,M.SD)(t-p)+i*n*(0,M.SD)(s-_))),d=(0,M.g$)(x),v=x?function(g){var y=(0,M.g$)(g*=x)/d,m=(0,M.g$)(x-g)/d,b=m*l+y*h,f=m*u+y*c,S=m*r+y*a;return[(0,M.WE)(f,b)*M.oh,(0,M.WE)(S,(0,M._I)(b*b+f*f))*M.oh]}:function(){return[_*M.oh,p*M.oh]};return v.distance=x,v}},64528:function(ee,R,e){e.d(R,{Gg:function(){return M},Km:function(){return l},MQ:function(){return r},SD:function(){return b},W8:function(){return a},WE:function(){return n},Yz:function(){return h},_I:function(){return v},a2:function(){return i},a6:function(){return g},a8:function(){return k},g$:function(){return x},g3:function(){return c},kD:function(){return p},kq:function(){return d},mE:function(){return y},oN:function(){return u},oh:function(){return s},or:function(){return T},pi:function(){return o},qR:function(){return m},qw:function(){return t},wL:function(){return _}});var M=1e-6,k=1e-12,o=Math.PI,T=o/2,_=o/4,p=2*o,s=180/o,t=o/180,i=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,l=Math.ceil,u=Math.exp,h=Math.log,c=Math.pow,x=Math.sin,d=Math.sign||function(f){return f>0?1:f<0?-1:0},v=Math.sqrt,g=Math.tan;function y(f){return f>1?0:f<-1?o:Math.acos(f)}function m(f){return f>1?T:f<-1?-T:Math.asin(f)}function b(f){return(f=x(f/2))*f}},70932:function(ee,R,e){function M(){}e.d(R,{c:function(){return M}})},73784:function(ee,R,e){var M=e(70932),k=1/0,o=k,T=-k,_=T,p={point:function(s,t){s<k&&(k=s),s>T&&(T=s),t<o&&(o=t),t>_&&(_=t)},lineStart:M.c,lineEnd:M.c,polygonStart:M.c,polygonEnd:M.c,result:function(){var s=[[k,o],[T,_]];return T=_=-(o=k=1/0),s}};R.c=p},41860:function(ee,R,e){e.d(R,{c:function(){return k}});var M=e(64528);function k(o,T){return(0,M.a2)(o[0]-T[0])<M.Gg&&(0,M.a2)(o[1]-T[1])<M.Gg}},58196:function(ee,R,e){e.d(R,{c:function(){return p}});var M=e(88728),k=e(84220),o=e(64528),T=(0,M.c)();function _(s){return(0,o.a2)(s[0])<=o.pi?s[0]:(0,o.kq)(s[0])*(((0,o.a2)(s[0])+o.pi)%o.kD-o.pi)}function p(s,t){var i=_(t),r=t[1],n=(0,o.g$)(r),a=[(0,o.g$)(i),-(0,o.W8)(i),0],l=0,u=0;T.reset(),n===1?r=o.or+o.Gg:n===-1&&(r=-o.or-o.Gg);for(var h=0,c=s.length;h<c;++h)if(d=(x=s[h]).length)for(var x,d,v=x[d-1],g=_(v),y=v[1]/2+o.wL,m=(0,o.g$)(y),b=(0,o.W8)(y),f=0;f<d;++f,g=w,m=O,b=C,v=S){var S=x[f],w=_(S),E=S[1]/2+o.wL,O=(0,o.g$)(E),C=(0,o.W8)(E),P=w-g,D=P>=0?1:-1,U=D*P,I=U>o.pi,N=m*O;if(T.add((0,o.WE)(N*D*(0,o.g$)(U),b*C+N*(0,o.W8)(U))),l+=I?P+D*o.kD:P,I^g>=i^w>=i){var W=(0,k.CW)((0,k.ux)(v),(0,k.ux)(S));(0,k.cJ)(W);var F=(0,k.CW)(a,W);(0,k.cJ)(F);var j=(I^P>=0?-1:1)*(0,o.qR)(F[2]);(r>j||r===j&&(W[0]||W[1]))&&(u+=I^P>=0?1:-1)}}return(l<-o.Gg||l<o.Gg&&T<-o.Gg)^1&u}},62280:function(ee,R,e){e.d(R,{a:function(){return k},g:function(){return o}});var M=e(64528);function k(T){return function(_,p){var s=(0,M.W8)(_),t=(0,M.W8)(p),i=T(s*t);return[i*t*(0,M.g$)(_),i*(0,M.g$)(p)]}}function o(T){return function(_,p){var s=(0,M._I)(_*_+p*p),t=T(s),i=(0,M.g$)(t),r=(0,M.W8)(t);return[(0,M.WE)(_*i,s*r),(0,M.qR)(s&&p*i/s)]}}},54724:function(ee,R,e){e.d(R,{c:function(){return _},y:function(){return T}});var M=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(p){return(0,M._I)(2/(1+p))});function _(){return(0,o.c)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.g)(function(p){return 2*(0,M.qR)(p/2)})},69020:function(ee,R,e){e.d(R,{O:function(){return T},c:function(){return _}});var M=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(p){return(p=(0,M.mE)(p))&&p/(0,M.g$)(p)});function _(){return(0,o.c)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.g)(function(p){return p})},69604:function(ee,R,e){e.d(R,{c:function(){return o},u:function(){return k}});var M=e(87952);function k(T,_){return[T,_]}function o(){return(0,M.c)(k).scale(152.63)}k.invert=k},86420:function(ee,R,e){e.d(R,{OW:function(){return s},QX:function(){return T},Qx:function(){return p},UV:function(){return _}});var M=e(16016),k=e(73784);function o(t,i,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),(0,M.c)(r,t.stream(k.c)),i(k.c.result()),n!=null&&t.clipExtent(n),t}function T(t,i,r){return o(t,function(n){var a=i[1][0]-i[0][0],l=i[1][1]-i[0][1],u=Math.min(a/(n[1][0]-n[0][0]),l/(n[1][1]-n[0][1])),h=+i[0][0]+(a-u*(n[1][0]+n[0][0]))/2,c=+i[0][1]+(l-u*(n[1][1]+n[0][1]))/2;t.scale(150*u).translate([h,c])},r)}function _(t,i,r){return T(t,[[0,0],i],r)}function p(t,i,r){return o(t,function(n){var a=+i,l=a/(n[1][0]-n[0][0]),u=(a-l*(n[1][0]+n[0][0]))/2,h=-l*n[0][1];t.scale(150*l).translate([u,h])},r)}function s(t,i,r){return o(t,function(n){var a=+i,l=a/(n[1][1]-n[0][1]),u=-l*n[0][0],h=(a-l*(n[1][1]+n[0][1]))/2;t.scale(150*l).translate([u,h])},r)}},53285:function(ee,R,e){e.d(R,{Y:function(){return T},c:function(){return _}});var M=e(64528),k=e(62280),o=e(87952);function T(p,s){var t=(0,M.W8)(s),i=(0,M.W8)(p)*t;return[t*(0,M.g$)(p)/i,(0,M.g$)(s)/i]}function _(){return(0,o.c)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.g)(M.MQ)},87952:function(ee,R,e){e.d(R,{c:function(){return x},U:function(){return d}});var M=e(78284),k=e(2728),o=e(21676),T=e(68120),_=e(7376),p=e(64528),s=e(92992),t=e(15196),i=e(86420),r=e(84220),n=16,a=(0,p.W8)(30*p.qw);function l(v,g){return+g?function(y,m){function b(f,S,w,E,O,C,P,D,U,I,N,W,F,j){var H=P-f,te=D-S,Q=H*H+te*te;if(Q>4*m&&F--){var $=E+I,K=O+N,X=C+W,Y=(0,p._I)($*$+K*K+X*X),re=(0,p.qR)(X/=Y),se=(0,p.a2)((0,p.a2)(X)-1)<p.Gg||(0,p.a2)(w-U)<p.Gg?(w+U)/2:(0,p.WE)(K,$),ae=y(se,re),ce=ae[0],fe=ae[1],he=ce-f,ve=fe-S,ye=te*he-H*ve;(ye*ye/Q>m||(0,p.a2)((H*he+te*ve)/Q-.5)>.3||E*I+O*N+C*W<a)&&(b(f,S,w,E,O,C,ce,fe,se,$/=Y,K/=Y,X,F,j),j.point(ce,fe),b(ce,fe,se,$,K,X,P,D,U,I,N,W,F,j))}}return function(f){var S,w,E,O,C,P,D,U,I,N,W,F,j={point:H,lineStart:te,lineEnd:$,polygonStart:function(){f.polygonStart(),j.lineStart=K},polygonEnd:function(){f.polygonEnd(),j.lineStart=te}};function H(re,se){re=y(re,se),f.point(re[0],re[1])}function te(){U=NaN,j.point=Q,f.lineStart()}function Q(re,se){var ae=(0,r.ux)([re,se]),ce=y(re,se);b(U,I,D,N,W,F,U=ce[0],I=ce[1],D=re,N=ae[0],W=ae[1],F=ae[2],n,f),f.point(U,I)}function $(){j.point=H,f.lineEnd()}function K(){te(),j.point=X,j.lineEnd=Y}function X(re,se){Q(S=re,se),w=U,E=I,O=N,C=W,P=F,j.point=Q}function Y(){b(U,I,D,N,W,F,w,E,S,O,C,P,n,f),j.lineEnd=$,$()}return j}}(v,g):function(y){return(0,t.s)({point:function(m,b){m=y(m,b),this.stream.point(m[0],m[1])}})}(v)}var u=(0,t.s)({point:function(v,g){this.stream.point(v*p.qw,g*p.qw)}});function h(v,g,y,m,b){function f(S,w){return[g+v*(S*=m),y-v*(w*=b)]}return f.invert=function(S,w){return[(S-g)/v*m,(y-w)/v*b]},f}function c(v,g,y,m,b,f){var S=(0,p.W8)(f),w=(0,p.g$)(f),E=S*v,O=w*v,C=S/v,P=w/v,D=(w*y-S*g)/v,U=(w*g+S*y)/v;function I(N,W){return[E*(N*=m)-O*(W*=b)+g,y-O*N-E*W]}return I.invert=function(N,W){return[m*(C*N-P*W+D),b*(U-P*N-C*W)]},I}function x(v){return d(function(){return v})()}function d(v){var g,y,m,b,f,S,w,E,O,C,P=150,D=480,U=250,I=0,N=0,W=0,F=0,j=0,H=0,te=1,Q=1,$=null,K=M.c,X=null,Y=_.c,re=.5;function se(he){return E(he[0]*p.qw,he[1]*p.qw)}function ae(he){return(he=E.invert(he[0],he[1]))&&[he[0]*p.oh,he[1]*p.oh]}function ce(){var he=c(P,0,0,te,Q,H).apply(null,g(I,N)),ve=(H?c:h)(P,D-he[0],U-he[1],te,Q,H);return y=(0,s.O)(W,F,j),w=(0,T.c)(g,ve),E=(0,T.c)(y,w),S=l(w,re),fe()}function fe(){return O=C=null,se}return se.stream=function(he){return O&&C===he?O:O=u(function(ve){return(0,t.s)({point:function(ye,me){var Me=ve(ye,me);return this.stream.point(Me[0],Me[1])}})}(y)(K(S(Y(C=he)))))},se.preclip=function(he){return arguments.length?(K=he,$=void 0,fe()):K},se.postclip=function(he){return arguments.length?(Y=he,X=m=b=f=null,fe()):Y},se.clipAngle=function(he){return arguments.length?(K=+he?(0,k.c)($=he*p.qw):($=null,M.c),fe()):$*p.oh},se.clipExtent=function(he){return arguments.length?(Y=he==null?(X=m=b=f=null,_.c):(0,o.c)(X=+he[0][0],m=+he[0][1],b=+he[1][0],f=+he[1][1]),fe()):X==null?null:[[X,m],[b,f]]},se.scale=function(he){return arguments.length?(P=+he,ce()):P},se.translate=function(he){return arguments.length?(D=+he[0],U=+he[1],ce()):[D,U]},se.center=function(he){return arguments.length?(I=he[0]%360*p.qw,N=he[1]%360*p.qw,ce()):[I*p.oh,N*p.oh]},se.rotate=function(he){return arguments.length?(W=he[0]%360*p.qw,F=he[1]%360*p.qw,j=he.length>2?he[2]%360*p.qw:0,ce()):[W*p.oh,F*p.oh,j*p.oh]},se.angle=function(he){return arguments.length?(H=he%360*p.qw,ce()):H*p.oh},se.reflectX=function(he){return arguments.length?(te=he?-1:1,ce()):te<0},se.reflectY=function(he){return arguments.length?(Q=he?-1:1,ce()):Q<0},se.precision=function(he){return arguments.length?(S=l(w,re=he*he),fe()):(0,p._I)(re)},se.fitExtent=function(he,ve){return(0,i.QX)(se,he,ve)},se.fitSize=function(he,ve){return(0,i.UV)(se,he,ve)},se.fitWidth=function(he,ve){return(0,i.Qx)(se,he,ve)},se.fitHeight=function(he,ve){return(0,i.OW)(se,he,ve)},function(){return g=v.apply(this,arguments),se.invert=g.invert&&ae,ce()}}},47984:function(ee,R,e){e.d(R,{c:function(){return T},g:function(){return o}});var M=e(87952),k=e(64528);function o(_,p){var s=p*p,t=s*s;return[_*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),p*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,M.c)(o).scale(175.295)}o.invert=function(_,p){var s,t=p,i=25;do{var r=t*t,n=r*r;t-=s=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-p)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.a2)(s)>k.Gg&&--i>0);return[_/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},4888:function(ee,R,e){e.d(R,{c:function(){return _},t:function(){return T}});var M=e(64528),k=e(62280),o=e(87952);function T(p,s){return[(0,M.W8)(s)*(0,M.g$)(p),(0,M.g$)(s)]}function _(){return(0,o.c)(T).scale(249.5).clipAngle(90+M.Gg)}T.invert=(0,k.g)(M.qR)},92992:function(ee,R,e){e.d(R,{O:function(){return T},c:function(){return t}});var M=e(68120),k=e(64528);function o(i,r){return[(0,k.a2)(i)>k.pi?i+Math.round(-i/k.kD)*k.kD:i,r]}function T(i,r,n){return(i%=k.kD)?r||n?(0,M.c)(p(i),s(r,n)):p(i):r||n?s(r,n):o}function _(i){return function(r,n){return[(r+=i)>k.pi?r-k.kD:r<-k.pi?r+k.kD:r,n]}}function p(i){var r=_(i);return r.invert=_(-i),r}function s(i,r){var n=(0,k.W8)(i),a=(0,k.g$)(i),l=(0,k.W8)(r),u=(0,k.g$)(r);function h(c,x){var d=(0,k.W8)(x),v=(0,k.W8)(c)*d,g=(0,k.g$)(c)*d,y=(0,k.g$)(x),m=y*n+v*a;return[(0,k.WE)(g*l-m*u,v*n-y*a),(0,k.qR)(m*l+g*u)]}return h.invert=function(c,x){var d=(0,k.W8)(x),v=(0,k.W8)(c)*d,g=(0,k.g$)(c)*d,y=(0,k.g$)(x),m=y*l-g*u;return[(0,k.WE)(g*l+y*u,v*n+m*a),(0,k.qR)(m*n-v*a)]},h}function t(i){function r(n){return(n=i(n[0]*k.qw,n[1]*k.qw))[0]*=k.oh,n[1]*=k.oh,n}return i=T(i[0]*k.qw,i[1]*k.qw,i.length>2?i[2]*k.qw:0),r.invert=function(n){return(n=i.invert(n[0]*k.qw,n[1]*k.qw))[0]*=k.oh,n[1]*=k.oh,n},r}o.invert=o},16016:function(ee,R,e){function M(s,t){s&&o.hasOwnProperty(s.type)&&o[s.type](s,t)}e.d(R,{c:function(){return p}});var k={Feature:function(s,t){M(s.geometry,t)},FeatureCollection:function(s,t){for(var i=s.features,r=-1,n=i.length;++r<n;)M(i[r].geometry,t)}},o={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)s=i[r],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)T(i[r],t,0)},Polygon:function(s,t){_(s.coordinates,t)},MultiPolygon:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)_(i[r],t)},GeometryCollection:function(s,t){for(var i=s.geometries,r=-1,n=i.length;++r<n;)M(i[r],t)}};function T(s,t,i){var r,n=-1,a=s.length-i;for(t.lineStart();++n<a;)r=s[n],t.point(r[0],r[1],r[2]);t.lineEnd()}function _(s,t){var i=-1,r=s.length;for(t.polygonStart();++i<r;)T(s[i],t,1);t.polygonEnd()}function p(s,t){s&&k.hasOwnProperty(s.type)?k[s.type](s,t):M(s,t)}},15196:function(ee,R,e){function M(T){return{stream:k(T)}}function k(T){return function(_){var p=new o;for(var s in T)p[s]=T[s];return p.stream=_,p}}function o(){}e.d(R,{c:function(){return M},s:function(){return k}}),o.prototype={constructor:o,point:function(T,_){this.stream.point(T,_)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(ee,R,e){function M(ie,de){return ie.parent===de.parent?1:2}function k(ie,de){return ie+de.x}function o(ie,de){return Math.max(ie,de.y)}function T(){var ie=M,de=1,Se=1,_e=!1;function we(Ae){var Oe,ze=0;Ae.eachAfter(function(Ee){var Be=Ee.children;Be?(Ee.x=function(Ve){return Ve.reduce(k,0)/Ve.length}(Be),Ee.y=function(Ve){return 1+Ve.reduce(o,0)}(Be)):(Ee.x=Oe?ze+=ie(Ee,Oe):0,Ee.y=0,Oe=Ee)});var pe=function(Ee){for(var Be;Be=Ee.children;)Ee=Be[0];return Ee}(Ae),be=function(Ee){for(var Be;Be=Ee.children;)Ee=Be[Be.length-1];return Ee}(Ae),ke=pe.x-ie(pe,be)/2,Ie=be.x+ie(be,pe)/2;return Ae.eachAfter(_e?function(Ee){Ee.x=(Ee.x-Ae.x)*de,Ee.y=(Ae.y-Ee.y)*Se}:function(Ee){Ee.x=(Ee.x-ke)/(Ie-ke)*de,Ee.y=(1-(Ae.y?Ee.y/Ae.y:1))*Se})}return we.separation=function(Ae){return arguments.length?(ie=Ae,we):ie},we.size=function(Ae){return arguments.length?(_e=!1,de=+Ae[0],Se=+Ae[1],we):_e?null:[de,Se]},we.nodeSize=function(Ae){return arguments.length?(_e=!0,de=+Ae[0],Se=+Ae[1],we):_e?[de,Se]:null},we}function _(ie){var de=0,Se=ie.children,_e=Se&&Se.length;if(_e)for(;--_e>=0;)de+=Se[_e].value;else de=1;ie.value=de}function p(ie,de){var Se,_e,we,Ae,Oe,ze=new r(ie),pe=+ie.value&&(ze.value=ie.value),be=[ze];for(de==null&&(de=s);Se=be.pop();)if(pe&&(Se.value=+Se.data.value),(we=de(Se.data))&&(Oe=we.length))for(Se.children=new Array(Oe),Ae=Oe-1;Ae>=0;--Ae)be.push(_e=Se.children[Ae]=new r(we[Ae])),_e.parent=Se,_e.depth=Se.depth+1;return ze.eachBefore(i)}function s(ie){return ie.children}function t(ie){ie.data=ie.data.data}function i(ie){var de=0;do ie.height=de;while((ie=ie.parent)&&ie.height<++de)}function r(ie){this.data=ie,this.depth=this.height=0,this.parent=null}e.r(R),e.d(R,{cluster:function(){return T},hierarchy:function(){return p},pack:function(){return P},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return F},stratify:function(){return K},tree:function(){return fe},treemap:function(){return Me},treemapBinary:function(){return Pe},treemapDice:function(){return W},treemapResquarify:function(){return oe},treemapSlice:function(){return he},treemapSliceDice:function(){return ge},treemapSquarify:function(){return me}}),r.prototype=p.prototype={constructor:r,count:function(){return this.eachAfter(_)},each:function(ie){var de,Se,_e,we,Ae=this,Oe=[Ae];do for(de=Oe.reverse(),Oe=[];Ae=de.pop();)if(ie(Ae),Se=Ae.children)for(_e=0,we=Se.length;_e<we;++_e)Oe.push(Se[_e]);while(Oe.length);return this},eachAfter:function(ie){for(var de,Se,_e,we=this,Ae=[we],Oe=[];we=Ae.pop();)if(Oe.push(we),de=we.children)for(Se=0,_e=de.length;Se<_e;++Se)Ae.push(de[Se]);for(;we=Oe.pop();)ie(we);return this},eachBefore:function(ie){for(var de,Se,_e=this,we=[_e];_e=we.pop();)if(ie(_e),de=_e.children)for(Se=de.length-1;Se>=0;--Se)we.push(de[Se]);return this},sum:function(ie){return this.eachAfter(function(de){for(var Se=+ie(de.data)||0,_e=de.children,we=_e&&_e.length;--we>=0;)Se+=_e[we].value;de.value=Se})},sort:function(ie){return this.eachBefore(function(de){de.children&&de.children.sort(ie)})},path:function(ie){for(var de=this,Se=function(Ae,Oe){if(Ae===Oe)return Ae;var ze=Ae.ancestors(),pe=Oe.ancestors(),be=null;for(Ae=ze.pop(),Oe=pe.pop();Ae===Oe;)be=Ae,Ae=ze.pop(),Oe=pe.pop();return be}(de,ie),_e=[de];de!==Se;)de=de.parent,_e.push(de);for(var we=_e.length;ie!==Se;)_e.splice(we,0,ie),ie=ie.parent;return _e},ancestors:function(){for(var ie=this,de=[ie];ie=ie.parent;)de.push(ie);return de},descendants:function(){var ie=[];return this.each(function(de){ie.push(de)}),ie},leaves:function(){var ie=[];return this.eachBefore(function(de){de.children||ie.push(de)}),ie},links:function(){var ie=this,de=[];return ie.each(function(Se){Se!==ie&&de.push({source:Se.parent,target:Se})}),de},copy:function(){return p(this).eachBefore(t)}};var n=Array.prototype.slice;function a(ie){for(var de,Se,_e=0,we=(ie=function(Oe){for(var ze,pe,be=Oe.length;be;)pe=Math.random()*be--|0,ze=Oe[be],Oe[be]=Oe[pe],Oe[pe]=ze;return Oe}(n.call(ie))).length,Ae=[];_e<we;)de=ie[_e],Se&&h(Se,de)?++_e:(Se=x(Ae=l(Ae,de)),_e=0);return Se}function l(ie,de){var Se,_e;if(c(de,ie))return[de];for(Se=0;Se<ie.length;++Se)if(u(de,ie[Se])&&c(d(ie[Se],de),ie))return[ie[Se],de];for(Se=0;Se<ie.length-1;++Se)for(_e=Se+1;_e<ie.length;++_e)if(u(d(ie[Se],ie[_e]),de)&&u(d(ie[Se],de),ie[_e])&&u(d(ie[_e],de),ie[Se])&&c(v(ie[Se],ie[_e],de),ie))return[ie[Se],ie[_e],de];throw new Error}function u(ie,de){var Se=ie.r-de.r,_e=de.x-ie.x,we=de.y-ie.y;return Se<0||Se*Se<_e*_e+we*we}function h(ie,de){var Se=ie.r-de.r+1e-6,_e=de.x-ie.x,we=de.y-ie.y;return Se>0&&Se*Se>_e*_e+we*we}function c(ie,de){for(var Se=0;Se<de.length;++Se)if(!h(ie,de[Se]))return!1;return!0}function x(ie){switch(ie.length){case 1:return{x:(de=ie[0]).x,y:de.y,r:de.r};case 2:return d(ie[0],ie[1]);case 3:return v(ie[0],ie[1],ie[2])}var de}function d(ie,de){var Se=ie.x,_e=ie.y,we=ie.r,Ae=de.x,Oe=de.y,ze=de.r,pe=Ae-Se,be=Oe-_e,ke=ze-we,Ie=Math.sqrt(pe*pe+be*be);return{x:(Se+Ae+pe/Ie*ke)/2,y:(_e+Oe+be/Ie*ke)/2,r:(Ie+we+ze)/2}}function v(ie,de,Se){var _e=ie.x,we=ie.y,Ae=ie.r,Oe=de.x,ze=de.y,pe=de.r,be=Se.x,ke=Se.y,Ie=Se.r,Ee=_e-Oe,Be=_e-be,Ve=we-ze,Ze=we-ke,rt=pe-Ae,it=Ie-Ae,dt=_e*_e+we*we-Ae*Ae,vt=dt-Oe*Oe-ze*ze+pe*pe,ht=dt-be*be-ke*ke+Ie*Ie,Qe=Be*Ve-Ee*Ze,Je=(Ve*ht-Ze*vt)/(2*Qe)-_e,Tt=(Ze*rt-Ve*it)/Qe,Ot=(Be*vt-Ee*ht)/(2*Qe)-we,Pt=(Ee*it-Be*rt)/Qe,Mt=Tt*Tt+Pt*Pt-1,He=2*(Ae+Je*Tt+Ot*Pt),Ye=Je*Je+Ot*Ot-Ae*Ae,Ne=-(Mt?(He+Math.sqrt(He*He-4*Mt*Ye))/(2*Mt):Ye/He);return{x:_e+Je+Tt*Ne,y:we+Ot+Pt*Ne,r:Ne}}function g(ie,de,Se){var _e,we,Ae,Oe,ze=ie.x-de.x,pe=ie.y-de.y,be=ze*ze+pe*pe;be?(we=de.r+Se.r,we*=we,Oe=ie.r+Se.r,we>(Oe*=Oe)?(_e=(be+Oe-we)/(2*be),Ae=Math.sqrt(Math.max(0,Oe/be-_e*_e)),Se.x=ie.x-_e*ze-Ae*pe,Se.y=ie.y-_e*pe+Ae*ze):(_e=(be+we-Oe)/(2*be),Ae=Math.sqrt(Math.max(0,we/be-_e*_e)),Se.x=de.x+_e*ze-Ae*pe,Se.y=de.y+_e*pe+Ae*ze)):(Se.x=de.x+Se.r,Se.y=de.y)}function y(ie,de){var Se=ie.r+de.r-1e-6,_e=de.x-ie.x,we=de.y-ie.y;return Se>0&&Se*Se>_e*_e+we*we}function m(ie){var de=ie._,Se=ie.next._,_e=de.r+Se.r,we=(de.x*Se.r+Se.x*de.r)/_e,Ae=(de.y*Se.r+Se.y*de.r)/_e;return we*we+Ae*Ae}function b(ie){this._=ie,this.next=null,this.previous=null}function f(ie){if(!(we=ie.length))return 0;var de,Se,_e,we,Ae,Oe,ze,pe,be,ke,Ie;if((de=ie[0]).x=0,de.y=0,!(we>1))return de.r;if(Se=ie[1],de.x=-Se.r,Se.x=de.r,Se.y=0,!(we>2))return de.r+Se.r;g(Se,de,_e=ie[2]),de=new b(de),Se=new b(Se),_e=new b(_e),de.next=_e.previous=Se,Se.next=de.previous=_e,_e.next=Se.previous=de;e:for(ze=3;ze<we;++ze){g(de._,Se._,_e=ie[ze]),_e=new b(_e),pe=Se.next,be=de.previous,ke=Se._.r,Ie=de._.r;do if(ke<=Ie){if(y(pe._,_e._)){Se=pe,de.next=Se,Se.previous=de,--ze;continue e}ke+=pe._.r,pe=pe.next}else{if(y(be._,_e._)){(de=be).next=Se,Se.previous=de,--ze;continue e}Ie+=be._.r,be=be.previous}while(pe!==be.next);for(_e.previous=de,_e.next=Se,de.next=Se.previous=Se=_e,Ae=m(de);(_e=_e.next)!==Se;)(Oe=m(_e))<Ae&&(de=_e,Ae=Oe);Se=de.next}for(de=[Se._],_e=Se;(_e=_e.next)!==Se;)de.push(_e._);for(_e=a(de),ze=0;ze<we;++ze)(de=ie[ze]).x-=_e.x,de.y-=_e.y;return _e.r}function S(ie){return f(ie),ie}function w(ie){if(typeof ie!="function")throw new Error;return ie}function E(){return 0}function O(ie){return function(){return ie}}function C(ie){return Math.sqrt(ie.value)}function P(){var ie=null,de=1,Se=1,_e=E;function we(Ae){return Ae.x=de/2,Ae.y=Se/2,ie?Ae.eachBefore(D(ie)).eachAfter(U(_e,.5)).eachBefore(I(1)):Ae.eachBefore(D(C)).eachAfter(U(E,1)).eachAfter(U(_e,Ae.r/Math.min(de,Se))).eachBefore(I(Math.min(de,Se)/(2*Ae.r))),Ae}return we.radius=function(Ae){return arguments.length?(ie=(Oe=Ae)==null?null:w(Oe),we):ie;var Oe},we.size=function(Ae){return arguments.length?(de=+Ae[0],Se=+Ae[1],we):[de,Se]},we.padding=function(Ae){return arguments.length?(_e=typeof Ae=="function"?Ae:O(+Ae),we):_e},we}function D(ie){return function(de){de.children||(de.r=Math.max(0,+ie(de)||0))}}function U(ie,de){return function(Se){if(_e=Se.children){var _e,we,Ae,Oe=_e.length,ze=ie(Se)*de||0;if(ze)for(we=0;we<Oe;++we)_e[we].r+=ze;if(Ae=f(_e),ze)for(we=0;we<Oe;++we)_e[we].r-=ze;Se.r=Ae+ze}}}function I(ie){return function(de){var Se=de.parent;de.r*=ie,Se&&(de.x=Se.x+ie*de.x,de.y=Se.y+ie*de.y)}}function N(ie){ie.x0=Math.round(ie.x0),ie.y0=Math.round(ie.y0),ie.x1=Math.round(ie.x1),ie.y1=Math.round(ie.y1)}function W(ie,de,Se,_e,we){for(var Ae,Oe=ie.children,ze=-1,pe=Oe.length,be=ie.value&&(_e-de)/ie.value;++ze<pe;)(Ae=Oe[ze]).y0=Se,Ae.y1=we,Ae.x0=de,Ae.x1=de+=Ae.value*be}function F(){var ie=1,de=1,Se=0,_e=!1;function we(Ae){var Oe=Ae.height+1;return Ae.x0=Ae.y0=Se,Ae.x1=ie,Ae.y1=de/Oe,Ae.eachBefore(function(ze,pe){return function(be){be.children&&W(be,be.x0,ze*(be.depth+1)/pe,be.x1,ze*(be.depth+2)/pe);var ke=be.x0,Ie=be.y0,Ee=be.x1-Se,Be=be.y1-Se;Ee<ke&&(ke=Ee=(ke+Ee)/2),Be<Ie&&(Ie=Be=(Ie+Be)/2),be.x0=ke,be.y0=Ie,be.x1=Ee,be.y1=Be}}(de,Oe)),_e&&Ae.eachBefore(N),Ae}return we.round=function(Ae){return arguments.length?(_e=!!Ae,we):_e},we.size=function(Ae){return arguments.length?(ie=+Ae[0],de=+Ae[1],we):[ie,de]},we.padding=function(Ae){return arguments.length?(Se=+Ae,we):Se},we}var j="$",H={depth:-1},te={};function Q(ie){return ie.id}function $(ie){return ie.parentId}function K(){var ie=Q,de=$;function Se(_e){var we,Ae,Oe,ze,pe,be,ke,Ie=_e.length,Ee=new Array(Ie),Be={};for(Ae=0;Ae<Ie;++Ae)we=_e[Ae],pe=Ee[Ae]=new r(we),(be=ie(we,Ae,_e))!=null&&(be+="")&&(Be[ke=j+(pe.id=be)]=ke in Be?te:pe);for(Ae=0;Ae<Ie;++Ae)if(pe=Ee[Ae],(be=de(_e[Ae],Ae,_e))!=null&&(be+="")){if(!(ze=Be[j+be]))throw new Error("missing: "+be);if(ze===te)throw new Error("ambiguous: "+be);ze.children?ze.children.push(pe):ze.children=[pe],pe.parent=ze}else{if(Oe)throw new Error("multiple roots");Oe=pe}if(!Oe)throw new Error("no root");if(Oe.parent=H,Oe.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--Ie}).eachBefore(i),Oe.parent=null,Ie>0)throw new Error("cycle");return Oe}return Se.id=function(_e){return arguments.length?(ie=w(_e),Se):ie},Se.parentId=function(_e){return arguments.length?(de=w(_e),Se):de},Se}function X(ie,de){return ie.parent===de.parent?1:2}function Y(ie){var de=ie.children;return de?de[0]:ie.t}function re(ie){var de=ie.children;return de?de[de.length-1]:ie.t}function se(ie,de,Se){var _e=Se/(de.i-ie.i);de.c-=_e,de.s+=Se,ie.c+=_e,de.z+=Se,de.m+=Se}function ae(ie,de,Se){return ie.a.parent===de.parent?ie.a:Se}function ce(ie,de){this._=ie,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=de}function fe(){var ie=X,de=1,Se=1,_e=null;function we(pe){var be=function(it){for(var dt,vt,ht,Qe,Je,Tt=new ce(it,0),Ot=[Tt];dt=Ot.pop();)if(ht=dt._.children)for(dt.children=new Array(Je=ht.length),Qe=Je-1;Qe>=0;--Qe)Ot.push(vt=dt.children[Qe]=new ce(ht[Qe],Qe)),vt.parent=dt;return(Tt.parent=new ce(null,0)).children=[Tt],Tt}(pe);if(be.eachAfter(Ae),be.parent.m=-be.z,be.eachBefore(Oe),_e)pe.eachBefore(ze);else{var ke=pe,Ie=pe,Ee=pe;pe.eachBefore(function(it){it.x<ke.x&&(ke=it),it.x>Ie.x&&(Ie=it),it.depth>Ee.depth&&(Ee=it)});var Be=ke===Ie?1:ie(ke,Ie)/2,Ve=Be-ke.x,Ze=de/(Ie.x+Be+Ve),rt=Se/(Ee.depth||1);pe.eachBefore(function(it){it.x=(it.x+Ve)*Ze,it.y=it.depth*rt})}return pe}function Ae(pe){var be=pe.children,ke=pe.parent.children,Ie=pe.i?ke[pe.i-1]:null;if(be){(function(Be){for(var Ve,Ze=0,rt=0,it=Be.children,dt=it.length;--dt>=0;)(Ve=it[dt]).z+=Ze,Ve.m+=Ze,Ze+=Ve.s+(rt+=Ve.c)})(pe);var Ee=(be[0].z+be[be.length-1].z)/2;Ie?(pe.z=Ie.z+ie(pe._,Ie._),pe.m=pe.z-Ee):pe.z=Ee}else Ie&&(pe.z=Ie.z+ie(pe._,Ie._));pe.parent.A=function(Be,Ve,Ze){if(Ve){for(var rt,it=Be,dt=Be,vt=Ve,ht=it.parent.children[0],Qe=it.m,Je=dt.m,Tt=vt.m,Ot=ht.m;vt=re(vt),it=Y(it),vt&&it;)ht=Y(ht),(dt=re(dt)).a=Be,(rt=vt.z+Tt-it.z-Qe+ie(vt._,it._))>0&&(se(ae(vt,Be,Ze),Be,rt),Qe+=rt,Je+=rt),Tt+=vt.m,Qe+=it.m,Ot+=ht.m,Je+=dt.m;vt&&!re(dt)&&(dt.t=vt,dt.m+=Tt-Je),it&&!Y(ht)&&(ht.t=it,ht.m+=Qe-Ot,Ze=Be)}return Ze}(pe,Ie,pe.parent.A||ke[0])}function Oe(pe){pe._.x=pe.z+pe.parent.m,pe.m+=pe.parent.m}function ze(pe){pe.x*=de,pe.y=pe.depth*Se}return we.separation=function(pe){return arguments.length?(ie=pe,we):ie},we.size=function(pe){return arguments.length?(_e=!1,de=+pe[0],Se=+pe[1],we):_e?null:[de,Se]},we.nodeSize=function(pe){return arguments.length?(_e=!0,de=+pe[0],Se=+pe[1],we):_e?[de,Se]:null},we}function he(ie,de,Se,_e,we){for(var Ae,Oe=ie.children,ze=-1,pe=Oe.length,be=ie.value&&(we-Se)/ie.value;++ze<pe;)(Ae=Oe[ze]).x0=de,Ae.x1=_e,Ae.y0=Se,Ae.y1=Se+=Ae.value*be}ce.prototype=Object.create(r.prototype);var ve=(1+Math.sqrt(5))/2;function ye(ie,de,Se,_e,we,Ae){for(var Oe,ze,pe,be,ke,Ie,Ee,Be,Ve,Ze,rt,it=[],dt=de.children,vt=0,ht=0,Qe=dt.length,Je=de.value;vt<Qe;){pe=we-Se,be=Ae-_e;do ke=dt[ht++].value;while(!ke&&ht<Qe);for(Ie=Ee=ke,rt=ke*ke*(Ze=Math.max(be/pe,pe/be)/(Je*ie)),Ve=Math.max(Ee/rt,rt/Ie);ht<Qe;++ht){if(ke+=ze=dt[ht].value,ze<Ie&&(Ie=ze),ze>Ee&&(Ee=ze),rt=ke*ke*Ze,(Be=Math.max(Ee/rt,rt/Ie))>Ve){ke-=ze;break}Ve=Be}it.push(Oe={value:ke,dice:pe<be,children:dt.slice(vt,ht)}),Oe.dice?W(Oe,Se,_e,we,Je?_e+=be*ke/Je:Ae):he(Oe,Se,_e,Je?Se+=pe*ke/Je:we,Ae),Je-=ke,vt=ht}return it}var me=function ie(de){function Se(_e,we,Ae,Oe,ze){ye(de,_e,we,Ae,Oe,ze)}return Se.ratio=function(_e){return ie((_e=+_e)>1?_e:1)},Se}(ve);function Me(){var ie=me,de=!1,Se=1,_e=1,we=[0],Ae=E,Oe=E,ze=E,pe=E,be=E;function ke(Ee){return Ee.x0=Ee.y0=0,Ee.x1=Se,Ee.y1=_e,Ee.eachBefore(Ie),we=[0],de&&Ee.eachBefore(N),Ee}function Ie(Ee){var Be=we[Ee.depth],Ve=Ee.x0+Be,Ze=Ee.y0+Be,rt=Ee.x1-Be,it=Ee.y1-Be;rt<Ve&&(Ve=rt=(Ve+rt)/2),it<Ze&&(Ze=it=(Ze+it)/2),Ee.x0=Ve,Ee.y0=Ze,Ee.x1=rt,Ee.y1=it,Ee.children&&(Be=we[Ee.depth+1]=Ae(Ee)/2,Ve+=be(Ee)-Be,Ze+=Oe(Ee)-Be,(rt-=ze(Ee)-Be)<Ve&&(Ve=rt=(Ve+rt)/2),(it-=pe(Ee)-Be)<Ze&&(Ze=it=(Ze+it)/2),ie(Ee,Ve,Ze,rt,it))}return ke.round=function(Ee){return arguments.length?(de=!!Ee,ke):de},ke.size=function(Ee){return arguments.length?(Se=+Ee[0],_e=+Ee[1],ke):[Se,_e]},ke.tile=function(Ee){return arguments.length?(ie=w(Ee),ke):ie},ke.padding=function(Ee){return arguments.length?ke.paddingInner(Ee).paddingOuter(Ee):ke.paddingInner()},ke.paddingInner=function(Ee){return arguments.length?(Ae=typeof Ee=="function"?Ee:O(+Ee),ke):Ae},ke.paddingOuter=function(Ee){return arguments.length?ke.paddingTop(Ee).paddingRight(Ee).paddingBottom(Ee).paddingLeft(Ee):ke.paddingTop()},ke.paddingTop=function(Ee){return arguments.length?(Oe=typeof Ee=="function"?Ee:O(+Ee),ke):Oe},ke.paddingRight=function(Ee){return arguments.length?(ze=typeof Ee=="function"?Ee:O(+Ee),ke):ze},ke.paddingBottom=function(Ee){return arguments.length?(pe=typeof Ee=="function"?Ee:O(+Ee),ke):pe},ke.paddingLeft=function(Ee){return arguments.length?(be=typeof Ee=="function"?Ee:O(+Ee),ke):be},ke}function Pe(ie,de,Se,_e,we){var Ae,Oe,ze=ie.children,pe=ze.length,be=new Array(pe+1);for(be[0]=Oe=Ae=0;Ae<pe;++Ae)be[Ae+1]=Oe+=ze[Ae].value;(function ke(Ie,Ee,Be,Ve,Ze,rt,it){if(Ie>=Ee-1){var dt=ze[Ie];return dt.x0=Ve,dt.y0=Ze,dt.x1=rt,void(dt.y1=it)}for(var vt=be[Ie],ht=Be/2+vt,Qe=Ie+1,Je=Ee-1;Qe<Je;){var Tt=Qe+Je>>>1;be[Tt]<ht?Qe=Tt+1:Je=Tt}ht-be[Qe-1]<be[Qe]-ht&&Ie+1<Qe&&--Qe;var Ot=be[Qe]-vt,Pt=Be-Ot;if(rt-Ve>it-Ze){var Mt=(Ve*Pt+rt*Ot)/Be;ke(Ie,Qe,Ot,Ve,Ze,Mt,it),ke(Qe,Ee,Pt,Mt,Ze,rt,it)}else{var He=(Ze*Pt+it*Ot)/Be;ke(Ie,Qe,Ot,Ve,Ze,rt,He),ke(Qe,Ee,Pt,Ve,He,rt,it)}})(0,pe,ie.value,de,Se,_e,we)}function ge(ie,de,Se,_e,we){(1&ie.depth?he:W)(ie,de,Se,_e,we)}var oe=function ie(de){function Se(_e,we,Ae,Oe,ze){if((pe=_e._squarify)&&pe.ratio===de)for(var pe,be,ke,Ie,Ee,Be=-1,Ve=pe.length,Ze=_e.value;++Be<Ve;){for(ke=(be=pe[Be]).children,Ie=be.value=0,Ee=ke.length;Ie<Ee;++Ie)be.value+=ke[Ie].value;be.dice?W(be,we,Ae,Oe,Ae+=(ze-Ae)*be.value/Ze):he(be,we,Ae,we+=(Oe-we)*be.value/Ze,ze),Ze-=be.value}else _e._squarify=pe=ye(de,_e,we,Ae,Oe,ze),pe.ratio=de}return Se.ratio=function(_e){return ie((_e=+_e)>1?_e:1)},Se}(ve)},10132:function(ee,R,e){e.d(R,{ak:function(){return h}});var M=Math.PI,k=2*M,o=1e-6,T=k-o;function _(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p(){return new _}_.prototype=p.prototype={constructor:_,moveTo:function(c,x){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,x){this._+="L"+(this._x1=+c)+","+(this._y1=+x)},quadraticCurveTo:function(c,x,d,v){this._+="Q"+ +c+","+ +x+","+(this._x1=+d)+","+(this._y1=+v)},bezierCurveTo:function(c,x,d,v,g,y){this._+="C"+ +c+","+ +x+","+ +d+","+ +v+","+(this._x1=+g)+","+(this._y1=+y)},arcTo:function(c,x,d,v,g){c=+c,x=+x,d=+d,v=+v,g=+g;var y=this._x1,m=this._y1,b=d-c,f=v-x,S=y-c,w=m-x,E=S*S+w*w;if(g<0)throw new Error("negative radius: "+g);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=x);else if(E>o)if(Math.abs(w*b-f*S)>o&&g){var O=d-y,C=v-m,P=b*b+f*f,D=O*O+C*C,U=Math.sqrt(P),I=Math.sqrt(E),N=g*Math.tan((M-Math.acos((P+E-D)/(2*U*I)))/2),W=N/I,F=N/U;Math.abs(W-1)>o&&(this._+="L"+(c+W*S)+","+(x+W*w)),this._+="A"+g+","+g+",0,0,"+ +(w*O>S*C)+","+(this._x1=c+F*b)+","+(this._y1=x+F*f)}else this._+="L"+(this._x1=c)+","+(this._y1=x)},arc:function(c,x,d,v,g,y){c=+c,x=+x,y=!!y;var m=(d=+d)*Math.cos(v),b=d*Math.sin(v),f=c+m,S=x+b,w=1^y,E=y?v-g:g-v;if(d<0)throw new Error("negative radius: "+d);this._x1===null?this._+="M"+f+","+S:(Math.abs(this._x1-f)>o||Math.abs(this._y1-S)>o)&&(this._+="L"+f+","+S),d&&(E<0&&(E=E%k+k),E>T?this._+="A"+d+","+d+",0,1,"+w+","+(c-m)+","+(x-b)+"A"+d+","+d+",0,1,"+w+","+(this._x1=f)+","+(this._y1=S):E>o&&(this._+="A"+d+","+d+",0,"+ +(E>=M)+","+w+","+(this._x1=c+d*Math.cos(g))+","+(this._y1=x+d*Math.sin(g))))},rect:function(c,x,d,v){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)+"h"+ +d+"v"+ +v+"h"+-d+"Z"},toString:function(){return this._}};var s=p,t=Array.prototype.slice;function i(c){return function(){return c}}function r(c){return c[0]}function n(c){return c[1]}function a(c){return c.source}function l(c){return c.target}function u(c,x,d,v,g){c.moveTo(x,d),c.bezierCurveTo(x=(x+v)/2,d,x,g,v,g)}function h(){return function(c){var x=a,d=l,v=r,g=n,y=null;function m(){var b,f=t.call(arguments),S=x.apply(this,f),w=d.apply(this,f);if(y||(y=b=s()),c(y,+v.apply(this,(f[0]=S,f)),+g.apply(this,f),+v.apply(this,(f[0]=w,f)),+g.apply(this,f)),b)return y=null,b+""||null}return m.source=function(b){return arguments.length?(x=b,m):x},m.target=function(b){return arguments.length?(d=b,m):d},m.x=function(b){return arguments.length?(v=typeof b=="function"?b:i(+b),m):v},m.y=function(b){return arguments.length?(g=typeof b=="function"?b:i(+b),m):g},m.context=function(b){return arguments.length?(y=b??null,m):y},m}(u)}},94336:function(ee,R,e){e.d(R,{Yn:function(){return a},m_:function(){return r},E9:function(){return l}});var M=e(8208),k=e(58931),o=e(46192),T=e(68936),_=e(32171),p=e(53528);function s(Qe){if(0<=Qe.y&&Qe.y<100){var Je=new Date(-1,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L);return Je.setFullYear(Qe.y),Je}return new Date(Qe.y,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L)}function t(Qe){if(0<=Qe.y&&Qe.y<100){var Je=new Date(Date.UTC(-1,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L));return Je.setUTCFullYear(Qe.y),Je}return new Date(Date.UTC(Qe.y,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L))}function i(Qe,Je,Tt){return{y:Qe,m:Je,d:Tt,H:0,M:0,S:0,L:0}}function r(Qe){var Je=Qe.dateTime,Tt=Qe.date,Ot=Qe.time,Pt=Qe.periods,Mt=Qe.days,He=Qe.shortDays,Ye=Qe.months,Ne=Qe.shortMonths,We=g(Pt),ot=y(Pt),tt=g(Mt),Re=y(Mt),Fe=g(He),nt=y(He),Ge=g(Ye),ct=y(Ye),pt=g(Ne),gt=y(Ne),ut={a:function(zt){return He[zt.getDay()]},A:function(zt){return Mt[zt.getDay()]},b:function(zt){return Ne[zt.getMonth()]},B:function(zt){return Ye[zt.getMonth()]},c:null,d:K,e:K,f:ae,H:X,I:Y,j:re,L:se,m:ce,M:fe,p:function(zt){return Pt[+(zt.getHours()>=12)]},q:function(zt){return 1+~~(zt.getMonth()/3)},Q:vt,s:ht,S:he,u:ve,U:ye,V:me,w:Me,W:Pe,x:null,X:null,y:ge,Y:oe,Z:ie,"%":dt},kt={a:function(zt){return He[zt.getUTCDay()]},A:function(zt){return Mt[zt.getUTCDay()]},b:function(zt){return Ne[zt.getUTCMonth()]},B:function(zt){return Ye[zt.getUTCMonth()]},c:null,d:de,e:de,f:Oe,H:Se,I:_e,j:we,L:Ae,m:ze,M:pe,p:function(zt){return Pt[+(zt.getUTCHours()>=12)]},q:function(zt){return 1+~~(zt.getUTCMonth()/3)},Q:vt,s:ht,S:be,u:ke,U:Ie,V:Ee,w:Be,W:Ve,x:null,X:null,y:Ze,Y:rt,Z:it,"%":dt},mt={a:function(zt,Gt,rn){var Nt=Fe.exec(Gt.slice(rn));return Nt?(zt.w=nt[Nt[0].toLowerCase()],rn+Nt[0].length):-1},A:function(zt,Gt,rn){var Nt=tt.exec(Gt.slice(rn));return Nt?(zt.w=Re[Nt[0].toLowerCase()],rn+Nt[0].length):-1},b:function(zt,Gt,rn){var Nt=pt.exec(Gt.slice(rn));return Nt?(zt.m=gt[Nt[0].toLowerCase()],rn+Nt[0].length):-1},B:function(zt,Gt,rn){var Nt=Ge.exec(Gt.slice(rn));return Nt?(zt.m=ct[Nt[0].toLowerCase()],rn+Nt[0].length):-1},c:function(zt,Gt,rn){return Ct(zt,Je,Gt,rn)},d:U,e:U,f:H,H:N,I:N,j:I,L:j,m:D,M:W,p:function(zt,Gt,rn){var Nt=We.exec(Gt.slice(rn));return Nt?(zt.p=ot[Nt[0].toLowerCase()],rn+Nt[0].length):-1},q:P,Q,s:$,S:F,u:b,U:f,V:S,w:m,W:w,x:function(zt,Gt,rn){return Ct(zt,Tt,Gt,rn)},X:function(zt,Gt,rn){return Ct(zt,Ot,Gt,rn)},y:O,Y:E,Z:C,"%":te};function At(zt,Gt){return function(rn){var Nt,Wt,Rt,Ln=[],bn=-1,hn=0,Kt=zt.length;for(rn instanceof Date||(rn=new Date(+rn));++bn<Kt;)zt.charCodeAt(bn)===37&&(Ln.push(zt.slice(hn,bn)),(Wt=u[Nt=zt.charAt(++bn)])!=null?Nt=zt.charAt(++bn):Wt=Nt==="e"?" ":"0",(Rt=Gt[Nt])&&(Nt=Rt(rn,Wt)),Ln.push(Nt),hn=bn+1);return Ln.push(zt.slice(hn,bn)),Ln.join("")}}function Lt(zt,Gt){return function(rn){var Nt,Wt,Rt=i(1900,void 0,1);if(Ct(Rt,zt,rn+="",0)!=rn.length)return null;if("Q"in Rt)return new Date(Rt.Q);if("s"in Rt)return new Date(1e3*Rt.s+("L"in Rt?Rt.L:0));if(Gt&&!("Z"in Rt)&&(Rt.Z=0),"p"in Rt&&(Rt.H=Rt.H%12+12*Rt.p),Rt.m===void 0&&(Rt.m="q"in Rt?Rt.q:0),"V"in Rt){if(Rt.V<1||Rt.V>53)return null;"w"in Rt||(Rt.w=1),"Z"in Rt?(Wt=(Nt=t(i(Rt.y,0,1))).getUTCDay(),Nt=Wt>4||Wt===0?M.ot.ceil(Nt):(0,M.ot)(Nt),Nt=k.c.offset(Nt,7*(Rt.V-1)),Rt.y=Nt.getUTCFullYear(),Rt.m=Nt.getUTCMonth(),Rt.d=Nt.getUTCDate()+(Rt.w+6)%7):(Wt=(Nt=s(i(Rt.y,0,1))).getDay(),Nt=Wt>4||Wt===0?o.qT.ceil(Nt):(0,o.qT)(Nt),Nt=T.c.offset(Nt,7*(Rt.V-1)),Rt.y=Nt.getFullYear(),Rt.m=Nt.getMonth(),Rt.d=Nt.getDate()+(Rt.w+6)%7)}else("W"in Rt||"U"in Rt)&&("w"in Rt||(Rt.w="u"in Rt?Rt.u%7:"W"in Rt?1:0),Wt="Z"in Rt?t(i(Rt.y,0,1)).getUTCDay():s(i(Rt.y,0,1)).getDay(),Rt.m=0,Rt.d="W"in Rt?(Rt.w+6)%7+7*Rt.W-(Wt+5)%7:Rt.w+7*Rt.U-(Wt+6)%7);return"Z"in Rt?(Rt.H+=Rt.Z/100|0,Rt.M+=Rt.Z%100,t(Rt)):s(Rt)}}function Ct(zt,Gt,rn,Nt){for(var Wt,Rt,Ln=0,bn=Gt.length,hn=rn.length;Ln<bn;){if(Nt>=hn)return-1;if((Wt=Gt.charCodeAt(Ln++))===37){if(Wt=Gt.charAt(Ln++),!(Rt=mt[Wt in u?Gt.charAt(Ln++):Wt])||(Nt=Rt(zt,rn,Nt))<0)return-1}else if(Wt!=rn.charCodeAt(Nt++))return-1}return Nt}return ut.x=At(Tt,ut),ut.X=At(Ot,ut),ut.c=At(Je,ut),kt.x=At(Tt,kt),kt.X=At(Ot,kt),kt.c=At(Je,kt),{format:function(zt){var Gt=At(zt+="",ut);return Gt.toString=function(){return zt},Gt},parse:function(zt){var Gt=Lt(zt+="",!1);return Gt.toString=function(){return zt},Gt},utcFormat:function(zt){var Gt=At(zt+="",kt);return Gt.toString=function(){return zt},Gt},utcParse:function(zt){var Gt=Lt(zt+="",!0);return Gt.toString=function(){return zt},Gt}}}var n,a,l,u={"-":"",_:" ",0:"0"},h=/^\s*\d+/,c=/^%/,x=/[\\^$*+?|[\]().{}]/g;function d(Qe,Je,Tt){var Ot=Qe<0?"-":"",Pt=(Ot?-Qe:Qe)+"",Mt=Pt.length;return Ot+(Mt<Tt?new Array(Tt-Mt+1).join(Je)+Pt:Pt)}function v(Qe){return Qe.replace(x,"\\$&")}function g(Qe){return new RegExp("^(?:"+Qe.map(v).join("|")+")","i")}function y(Qe){for(var Je={},Tt=-1,Ot=Qe.length;++Tt<Ot;)Je[Qe[Tt].toLowerCase()]=Tt;return Je}function m(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+1));return Ot?(Qe.w=+Ot[0],Tt+Ot[0].length):-1}function b(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+1));return Ot?(Qe.u=+Ot[0],Tt+Ot[0].length):-1}function f(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.U=+Ot[0],Tt+Ot[0].length):-1}function S(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.V=+Ot[0],Tt+Ot[0].length):-1}function w(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.W=+Ot[0],Tt+Ot[0].length):-1}function E(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+4));return Ot?(Qe.y=+Ot[0],Tt+Ot[0].length):-1}function O(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.y=+Ot[0]+(+Ot[0]>68?1900:2e3),Tt+Ot[0].length):-1}function C(Qe,Je,Tt){var Ot=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Je.slice(Tt,Tt+6));return Ot?(Qe.Z=Ot[1]?0:-(Ot[2]+(Ot[3]||"00")),Tt+Ot[0].length):-1}function P(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+1));return Ot?(Qe.q=3*Ot[0]-3,Tt+Ot[0].length):-1}function D(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.m=Ot[0]-1,Tt+Ot[0].length):-1}function U(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.d=+Ot[0],Tt+Ot[0].length):-1}function I(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+3));return Ot?(Qe.m=0,Qe.d=+Ot[0],Tt+Ot[0].length):-1}function N(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.H=+Ot[0],Tt+Ot[0].length):-1}function W(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.M=+Ot[0],Tt+Ot[0].length):-1}function F(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+2));return Ot?(Qe.S=+Ot[0],Tt+Ot[0].length):-1}function j(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+3));return Ot?(Qe.L=+Ot[0],Tt+Ot[0].length):-1}function H(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt,Tt+6));return Ot?(Qe.L=Math.floor(Ot[0]/1e3),Tt+Ot[0].length):-1}function te(Qe,Je,Tt){var Ot=c.exec(Je.slice(Tt,Tt+1));return Ot?Tt+Ot[0].length:-1}function Q(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt));return Ot?(Qe.Q=+Ot[0],Tt+Ot[0].length):-1}function $(Qe,Je,Tt){var Ot=h.exec(Je.slice(Tt));return Ot?(Qe.s=+Ot[0],Tt+Ot[0].length):-1}function K(Qe,Je){return d(Qe.getDate(),Je,2)}function X(Qe,Je){return d(Qe.getHours(),Je,2)}function Y(Qe,Je){return d(Qe.getHours()%12||12,Je,2)}function re(Qe,Je){return d(1+T.c.count((0,_.c)(Qe),Qe),Je,3)}function se(Qe,Je){return d(Qe.getMilliseconds(),Je,3)}function ae(Qe,Je){return se(Qe,Je)+"000"}function ce(Qe,Je){return d(Qe.getMonth()+1,Je,2)}function fe(Qe,Je){return d(Qe.getMinutes(),Je,2)}function he(Qe,Je){return d(Qe.getSeconds(),Je,2)}function ve(Qe){var Je=Qe.getDay();return Je===0?7:Je}function ye(Qe,Je){return d(o.uU.count((0,_.c)(Qe)-1,Qe),Je,2)}function me(Qe,Je){var Tt=Qe.getDay();return Qe=Tt>=4||Tt===0?(0,o.kD)(Qe):o.kD.ceil(Qe),d(o.kD.count((0,_.c)(Qe),Qe)+((0,_.c)(Qe).getDay()===4),Je,2)}function Me(Qe){return Qe.getDay()}function Pe(Qe,Je){return d(o.qT.count((0,_.c)(Qe)-1,Qe),Je,2)}function ge(Qe,Je){return d(Qe.getFullYear()%100,Je,2)}function oe(Qe,Je){return d(Qe.getFullYear()%1e4,Je,4)}function ie(Qe){var Je=Qe.getTimezoneOffset();return(Je>0?"-":(Je*=-1,"+"))+d(Je/60|0,"0",2)+d(Je%60,"0",2)}function de(Qe,Je){return d(Qe.getUTCDate(),Je,2)}function Se(Qe,Je){return d(Qe.getUTCHours(),Je,2)}function _e(Qe,Je){return d(Qe.getUTCHours()%12||12,Je,2)}function we(Qe,Je){return d(1+k.c.count((0,p.c)(Qe),Qe),Je,3)}function Ae(Qe,Je){return d(Qe.getUTCMilliseconds(),Je,3)}function Oe(Qe,Je){return Ae(Qe,Je)+"000"}function ze(Qe,Je){return d(Qe.getUTCMonth()+1,Je,2)}function pe(Qe,Je){return d(Qe.getUTCMinutes(),Je,2)}function be(Qe,Je){return d(Qe.getUTCSeconds(),Je,2)}function ke(Qe){var Je=Qe.getUTCDay();return Je===0?7:Je}function Ie(Qe,Je){return d(M.EV.count((0,p.c)(Qe)-1,Qe),Je,2)}function Ee(Qe,Je){var Tt=Qe.getUTCDay();return Qe=Tt>=4||Tt===0?(0,M.yA)(Qe):M.yA.ceil(Qe),d(M.yA.count((0,p.c)(Qe),Qe)+((0,p.c)(Qe).getUTCDay()===4),Je,2)}function Be(Qe){return Qe.getUTCDay()}function Ve(Qe,Je){return d(M.ot.count((0,p.c)(Qe)-1,Qe),Je,2)}function Ze(Qe,Je){return d(Qe.getUTCFullYear()%100,Je,2)}function rt(Qe,Je){return d(Qe.getUTCFullYear()%1e4,Je,4)}function it(){return"+0000"}function dt(){return"%"}function vt(Qe){return+Qe}function ht(Qe){return Math.floor(+Qe/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,n.parse,l=n.utcFormat,n.utcParse},68936:function(ee,R,e){e.d(R,{m:function(){return T}});var M=e(81628),k=e(69792),o=(0,M.c)(function(_){_.setHours(0,0,0,0)},function(_,p){_.setDate(_.getDate()+p)},function(_,p){return(p-_-(p.getTimezoneOffset()-_.getTimezoneOffset())*k.iy)/k.SK},function(_){return _.getDate()-1});R.c=o;var T=o.range},69792:function(ee,R,e){e.d(R,{KK:function(){return _},SK:function(){return T},cg:function(){return o},iy:function(){return k},yc:function(){return M}});var M=1e3,k=6e4,o=36e5,T=864e5,_=6048e5},73220:function(ee,R,e){e.r(R),e.d(R,{timeDay:function(){return h.c},timeDays:function(){return h.m},timeFriday:function(){return c.iB},timeFridays:function(){return c.sJ},timeHour:function(){return l},timeHours:function(){return u},timeInterval:function(){return M.c},timeMillisecond:function(){return o},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return c.qT},timeMondays:function(){return c.QP},timeMonth:function(){return d},timeMonths:function(){return v},timeSaturday:function(){return c.Wc},timeSaturdays:function(){return c.aI},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return c.uU},timeSundays:function(){return c.Ab},timeThursday:function(){return c.kD},timeThursdays:function(){return c.eC},timeTuesday:function(){return c.Mf},timeTuesdays:function(){return c.Oc},timeWednesday:function(){return c.eg},timeWednesdays:function(){return c.sn},timeWeek:function(){return c.uU},timeWeeks:function(){return c.Ab},timeYear:function(){return g.c},timeYears:function(){return g.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return O.od},utcFridays:function(){return O.iG},utcHour:function(){return S},utcHours:function(){return w},utcMillisecond:function(){return o},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return b},utcMonday:function(){return O.ot},utcMondays:function(){return O.iO},utcMonth:function(){return P},utcMonths:function(){return D},utcSaturday:function(){return O.Ad},utcSaturdays:function(){return O.K8},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return O.EV},utcSundays:function(){return O.Wq},utcThursday:function(){return O.yA},utcThursdays:function(){return O.ob},utcTuesday:function(){return O.sG},utcTuesdays:function(){return O.kl},utcWednesday:function(){return O._6},utcWednesdays:function(){return O.W_},utcWeek:function(){return O.EV},utcWeeks:function(){return O.Wq},utcYear:function(){return U.c},utcYears:function(){return U.i}});var M=e(81628),k=(0,M.c)(function(){},function(I,N){I.setTime(+I+N)},function(I,N){return N-I});k.every=function(I){return I=Math.floor(I),isFinite(I)&&I>0?I>1?(0,M.c)(function(N){N.setTime(Math.floor(N/I)*I)},function(N,W){N.setTime(+N+W*I)},function(N,W){return(W-N)/I}):k:null};var o=k,T=k.range,_=e(69792),p=(0,M.c)(function(I){I.setTime(I-I.getMilliseconds())},function(I,N){I.setTime(+I+N*_.yc)},function(I,N){return(N-I)/_.yc},function(I){return I.getUTCSeconds()}),s=p,t=p.range,i=(0,M.c)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*_.yc)},function(I,N){I.setTime(+I+N*_.iy)},function(I,N){return(N-I)/_.iy},function(I){return I.getMinutes()}),r=i,n=i.range,a=(0,M.c)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*_.yc-I.getMinutes()*_.iy)},function(I,N){I.setTime(+I+N*_.cg)},function(I,N){return(N-I)/_.cg},function(I){return I.getHours()}),l=a,u=a.range,h=e(68936),c=e(46192),x=(0,M.c)(function(I){I.setDate(1),I.setHours(0,0,0,0)},function(I,N){I.setMonth(I.getMonth()+N)},function(I,N){return N.getMonth()-I.getMonth()+12*(N.getFullYear()-I.getFullYear())},function(I){return I.getMonth()}),d=x,v=x.range,g=e(32171),y=(0,M.c)(function(I){I.setUTCSeconds(0,0)},function(I,N){I.setTime(+I+N*_.iy)},function(I,N){return(N-I)/_.iy},function(I){return I.getUTCMinutes()}),m=y,b=y.range,f=(0,M.c)(function(I){I.setUTCMinutes(0,0,0)},function(I,N){I.setTime(+I+N*_.cg)},function(I,N){return(N-I)/_.cg},function(I){return I.getUTCHours()}),S=f,w=f.range,E=e(58931),O=e(8208),C=(0,M.c)(function(I){I.setUTCDate(1),I.setUTCHours(0,0,0,0)},function(I,N){I.setUTCMonth(I.getUTCMonth()+N)},function(I,N){return N.getUTCMonth()-I.getUTCMonth()+12*(N.getUTCFullYear()-I.getUTCFullYear())},function(I){return I.getUTCMonth()}),P=C,D=C.range,U=e(53528)},81628:function(ee,R,e){e.d(R,{c:function(){return o}});var M=new Date,k=new Date;function o(T,_,p,s){function t(i){return T(i=arguments.length===0?new Date:new Date(+i)),i}return t.floor=function(i){return T(i=new Date(+i)),i},t.ceil=function(i){return T(i=new Date(i-1)),_(i,1),T(i),i},t.round=function(i){var r=t(i),n=t.ceil(i);return i-r<n-i?r:n},t.offset=function(i,r){return _(i=new Date(+i),r==null?1:Math.floor(r)),i},t.range=function(i,r,n){var a,l=[];if(i=t.ceil(i),n=n==null?1:Math.floor(n),!(i<r&&n>0))return l;do l.push(a=new Date(+i)),_(i,n),T(i);while(a<i&&i<r);return l},t.filter=function(i){return o(function(r){if(r>=r)for(;T(r),!i(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;_(r,-1),!i(r););else for(;--n>=0;)for(;_(r,1),!i(r););})},p&&(t.count=function(i,r){return M.setTime(+i),k.setTime(+r),T(M),T(k),Math.floor(p(M,k))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(s?function(r){return s(r)%i==0}:function(r){return t.count(0,r)%i==0}):t:null}),t}},58931:function(ee,R,e){e.d(R,{o:function(){return T}});var M=e(81628),k=e(69792),o=(0,M.c)(function(_){_.setUTCHours(0,0,0,0)},function(_,p){_.setUTCDate(_.getUTCDate()+p)},function(_,p){return(p-_)/k.SK},function(_){return _.getUTCDate()-1});R.c=o;var T=o.range},8208:function(ee,R,e){e.d(R,{Ad:function(){return r},EV:function(){return T},K8:function(){return x},W_:function(){return u},Wq:function(){return n},_6:function(){return s},iG:function(){return c},iO:function(){return a},kl:function(){return l},ob:function(){return h},od:function(){return i},ot:function(){return _},sG:function(){return p},yA:function(){return t}});var M=e(81628),k=e(69792);function o(d){return(0,M.c)(function(v){v.setUTCDate(v.getUTCDate()-(v.getUTCDay()+7-d)%7),v.setUTCHours(0,0,0,0)},function(v,g){v.setUTCDate(v.getUTCDate()+7*g)},function(v,g){return(g-v)/k.KK})}var T=o(0),_=o(1),p=o(2),s=o(3),t=o(4),i=o(5),r=o(6),n=T.range,a=_.range,l=p.range,u=s.range,h=t.range,c=i.range,x=r.range},53528:function(ee,R,e){e.d(R,{i:function(){return o}});var M=e(81628),k=(0,M.c)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,_){T.setUTCFullYear(T.getUTCFullYear()+_)},function(T,_){return _.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(_){_.setUTCFullYear(Math.floor(_.getUTCFullYear()/T)*T),_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},function(_,p){_.setUTCFullYear(_.getUTCFullYear()+p*T)}):null},R.c=k;var o=k.range},46192:function(ee,R,e){e.d(R,{Ab:function(){return n},Mf:function(){return p},Oc:function(){return l},QP:function(){return a},Wc:function(){return r},aI:function(){return x},eC:function(){return h},eg:function(){return s},iB:function(){return i},kD:function(){return t},qT:function(){return _},sJ:function(){return c},sn:function(){return u},uU:function(){return T}});var M=e(81628),k=e(69792);function o(d){return(0,M.c)(function(v){v.setDate(v.getDate()-(v.getDay()+7-d)%7),v.setHours(0,0,0,0)},function(v,g){v.setDate(v.getDate()+7*g)},function(v,g){return(g-v-(g.getTimezoneOffset()-v.getTimezoneOffset())*k.iy)/k.KK})}var T=o(0),_=o(1),p=o(2),s=o(3),t=o(4),i=o(5),r=o(6),n=T.range,a=_.range,l=p.range,u=s.range,h=t.range,c=i.range,x=r.range},32171:function(ee,R,e){e.d(R,{Q:function(){return o}});var M=e(81628),k=(0,M.c)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,_){T.setFullYear(T.getFullYear()+_)},function(T,_){return _.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(_){_.setFullYear(Math.floor(_.getFullYear()/T)*T),_.setMonth(0,1),_.setHours(0,0,0,0)},function(_,p){_.setFullYear(_.getFullYear()+p*T)}):null},R.c=k;var o=k.range},64348:function(ee,R,e){var M=e(39640)(),k=e(53664),o=M&&k("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=!1}var T=k("%SyntaxError%"),_=k("%TypeError%"),p=e(2304);ee.exports=function(s,t,i){if(!s||typeof s!="object"&&typeof s!="function")throw new _("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new _("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new _("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new _("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new _("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new _("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],u=!!p&&p(s,t);if(o)o(s,t,{configurable:a===null&&u?u.configurable:!a,enumerable:r===null&&u?u.enumerable:!r,value:i,writable:n===null&&u?u.writable:!n});else{if(!l&&(r||n||a))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");s[t]=i}}},81288:function(ee,R,e){var M=e(41820),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",o=Object.prototype.toString,T=Array.prototype.concat,_=Object.defineProperty,p=e(39640)(),s=_&&p,t=function(r,n,a,l){if(n in r){if(l===!0){if(r[n]===a)return}else if(typeof(u=l)!="function"||o.call(u)!=="[object Function]"||!l())return}var u;s?_(r,n,{configurable:!0,enumerable:!1,value:a,writable:!0}):r[n]=a},i=function(r,n){var a=arguments.length>2?arguments[2]:{},l=M(n);k&&(l=T.call(l,Object.getOwnPropertySymbols(n)));for(var u=0;u<l.length;u+=1)t(r,l[u],n[l[u]],a[l[u]])};i.supportsDescriptors=!!s,ee.exports=i},31264:function(ee){ee.exports=function(){for(var R=0;R<arguments.length;R++)if(arguments[R]!==void 0)return arguments[R]}},63768:function(ee){ee.exports=M;var R=(M.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function M(o,T){Array.isArray(o)&&(o=o.join(", "));var _,p={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?_=k(T):Array.isArray(T)?_=T:(T.o?_=k(T.o):T.pairs&&(_=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),_||(_=e),R.font=s+"px "+o;for(var i=0;i<_.length;i++){var r=_[i],n=R.measureText(r[0]).width+R.measureText(r[1]).width,a=R.measureText(r).width;if(Math.abs(n-a)>s*t){var l=(a-n)/s;p[r]=1e3*l}}return p}function k(o){for(var T=[],_=o[0];_<=o[1];_++)for(var p=String.fromCharCode(_),s=o[0];s<o[1];s++){var t=p+String.fromCharCode(s);T.push(t)}return T}M.createPairs=k,M.ascii=e},22235:function(ee,R,e){var M=e(49972),k=e(48816),o={M:"moveTo",C:"bezierCurveTo"};ee.exports=function(T,_){T.beginPath(),k(M(_)).forEach(function(p){var s=p[0],t=p.slice(1);T[o[s]].apply(T,t)}),T.closePath()}},72512:function(ee){ee.exports=function(R){switch(R){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(ee){function R(e,M,k){var o=0|e[k];if(o<=0)return[];var T,_=new Array(o);if(k===e.length-1)for(T=0;T<o;++T)_[T]=M;else for(T=0;T<o;++T)_[T]=R(e,M,k+1);return _}ee.exports=function(e,M){switch(M===void 0&&(M=0),typeof e){case"number":if(e>0)return function(k,o){var T,_;for(T=new Array(k),_=0;_<k;++_)T[_]=o;return T}(0|e,M);break;case"object":if(typeof e.length=="number")return R(e,M,0)}return[]}},28912:function(ee){function R(S,w,E){E=E||2;var O,C,P,D,U,I,N,W=w&&w.length,F=W?w[0]*E:S.length,j=e(S,0,F,E,!0),H=[];if(!j||j.next===j.prev)return H;if(W&&(j=function(Q,$,K,X){var Y,re,se,ae=[];for(Y=0,re=$.length;Y<re;Y++)(se=e(Q,$[Y]*X,Y<re-1?$[Y+1]*X:Q.length,X,!1))===se.next&&(se.steiner=!0),ae.push(n(se));for(ae.sort(s),Y=0;Y<ae.length;Y++)t(ae[Y],K),K=M(K,K.next);return K}(S,w,j,E)),S.length>80*E){O=P=S[0],C=D=S[1];for(var te=E;te<F;te+=E)(U=S[te])<O&&(O=U),(I=S[te+1])<C&&(C=I),U>P&&(P=U),I>D&&(D=I);N=(N=Math.max(P-O,D-C))!==0?1/N:0}return k(j,H,E,O,C,N),H}function e(S,w,E,O,C){var P,D;if(C===f(S,w,E,O)>0)for(P=w;P<E;P+=O)D=y(P,S[P],S[P+1],D);else for(P=E-O;P>=w;P-=O)D=y(P,S[P],S[P+1],D);return D&&h(D,D.next)&&(m(D),D=D.next),D}function M(S,w){if(!S)return S;w||(w=S);var E,O=S;do if(E=!1,O.steiner||!h(O,O.next)&&u(O.prev,O,O.next)!==0)O=O.next;else{if(m(O),(O=w=O.prev)===O.next)break;E=!0}while(E||O!==w);return w}function k(S,w,E,O,C,P,D){if(S){!D&&P&&function(W,F,j,H){var te=W;do te.z===null&&(te.z=r(te.x,te.y,F,j,H)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==W);te.prevZ.nextZ=null,te.prevZ=null,function(Q){var $,K,X,Y,re,se,ae,ce,fe=1;do{for(K=Q,Q=null,re=null,se=0;K;){for(se++,X=K,ae=0,$=0;$<fe&&(ae++,X=X.nextZ);$++);for(ce=fe;ae>0||ce>0&&X;)ae!==0&&(ce===0||!X||K.z<=X.z)?(Y=K,K=K.nextZ,ae--):(Y=X,X=X.nextZ,ce--),re?re.nextZ=Y:Q=Y,Y.prevZ=re,re=Y;K=X}re.nextZ=null,fe*=2}while(se>1)}(te)}(S,O,C,P);for(var U,I,N=S;S.prev!==S.next;)if(U=S.prev,I=S.next,P?T(S,O,C,P):o(S))w.push(U.i/E),w.push(S.i/E),w.push(I.i/E),m(S),S=I.next,N=I.next;else if((S=I)===N){D?D===1?k(S=_(M(S),w,E),w,E,O,C,P,2):D===2&&p(S,w,E,O,C,P):k(M(S),w,E,O,C,P,1);break}}}function o(S){var w=S.prev,E=S,O=S.next;if(u(w,E,O)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(a(w.x,w.y,E.x,E.y,O.x,O.y,C.x,C.y)&&u(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,w,E,O){var C=S.prev,P=S,D=S.next;if(u(C,P,D)>=0)return!1;for(var U=C.x<P.x?C.x<D.x?C.x:D.x:P.x<D.x?P.x:D.x,I=C.y<P.y?C.y<D.y?C.y:D.y:P.y<D.y?P.y:D.y,N=C.x>P.x?C.x>D.x?C.x:D.x:P.x>D.x?P.x:D.x,W=C.y>P.y?C.y>D.y?C.y:D.y:P.y>D.y?P.y:D.y,F=r(U,I,w,E,O),j=r(N,W,w,E,O),H=S.prevZ,te=S.nextZ;H&&H.z>=F&&te&&te.z<=j;){if(H!==S.prev&&H!==S.next&&a(C.x,C.y,P.x,P.y,D.x,D.y,H.x,H.y)&&u(H.prev,H,H.next)>=0||(H=H.prevZ,te!==S.prev&&te!==S.next&&a(C.x,C.y,P.x,P.y,D.x,D.y,te.x,te.y)&&u(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;H&&H.z>=F;){if(H!==S.prev&&H!==S.next&&a(C.x,C.y,P.x,P.y,D.x,D.y,H.x,H.y)&&u(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;te&&te.z<=j;){if(te!==S.prev&&te!==S.next&&a(C.x,C.y,P.x,P.y,D.x,D.y,te.x,te.y)&&u(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function _(S,w,E){var O=S;do{var C=O.prev,P=O.next.next;!h(C,P)&&c(C,O,O.next,P)&&v(C,P)&&v(P,C)&&(w.push(C.i/E),w.push(O.i/E),w.push(P.i/E),m(O),m(O.next),O=S=P),O=O.next}while(O!==S);return M(O)}function p(S,w,E,O,C,P){var D=S;do{for(var U=D.next.next;U!==D.prev;){if(D.i!==U.i&&l(D,U)){var I=g(D,U);return D=M(D,D.next),I=M(I,I.next),k(D,w,E,O,C,P),void k(I,w,E,O,C,P)}U=U.next}D=D.next}while(D!==S)}function s(S,w){return S.x-w.x}function t(S,w){if(w=function(O,C){var P,D=C,U=O.x,I=O.y,N=-1/0;do{if(I<=D.y&&I>=D.next.y&&D.next.y!==D.y){var W=D.x+(I-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(W<=U&&W>N){if(N=W,W===U){if(I===D.y)return D;if(I===D.next.y)return D.next}P=D.x<D.next.x?D:D.next}}D=D.next}while(D!==C);if(!P)return null;if(U===N)return P;var F,j=P,H=P.x,te=P.y,Q=1/0;D=P;do U>=D.x&&D.x>=H&&U!==D.x&&a(I<te?U:N,I,H,te,I<te?N:U,I,D.x,D.y)&&(F=Math.abs(I-D.y)/(U-D.x),v(D,O)&&(F<Q||F===Q&&(D.x>P.x||D.x===P.x&&i(P,D)))&&(P=D,Q=F)),D=D.next;while(D!==j);return P}(S,w),w){var E=g(w,S);M(w,w.next),M(E,E.next)}}function i(S,w){return u(S.prev,S,w.prev)<0&&u(w.next,S,S.next)<0}function r(S,w,E,O,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-O)*C)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function n(S){var w=S,E=S;do(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next;while(w!==S);return E}function a(S,w,E,O,C,P,D,U){return(C-D)*(w-U)-(S-D)*(P-U)>=0&&(S-D)*(O-U)-(E-D)*(w-U)>=0&&(E-D)*(P-U)-(C-D)*(O-U)>=0}function l(S,w){return S.next.i!==w.i&&S.prev.i!==w.i&&!function(E,O){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==O.i&&C.next.i!==O.i&&c(C,C.next,E,O))return!0;C=C.next}while(C!==E);return!1}(S,w)&&(v(S,w)&&v(w,S)&&function(E,O){var C=E,P=!1,D=(E.x+O.x)/2,U=(E.y+O.y)/2;do C.y>U!=C.next.y>U&&C.next.y!==C.y&&D<(C.next.x-C.x)*(U-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next;while(C!==E);return P}(S,w)&&(u(S.prev,S,w.prev)||u(S,w.prev,w))||h(S,w)&&u(S.prev,S,S.next)>0&&u(w.prev,w,w.next)>0)}function u(S,w,E){return(w.y-S.y)*(E.x-w.x)-(w.x-S.x)*(E.y-w.y)}function h(S,w){return S.x===w.x&&S.y===w.y}function c(S,w,E,O){var C=d(u(S,w,E)),P=d(u(S,w,O)),D=d(u(E,O,S)),U=d(u(E,O,w));return C!==P&&D!==U||!(C!==0||!x(S,E,w))||!(P!==0||!x(S,O,w))||!(D!==0||!x(E,S,O))||!(U!==0||!x(E,w,O))}function x(S,w,E){return w.x<=Math.max(S.x,E.x)&&w.x>=Math.min(S.x,E.x)&&w.y<=Math.max(S.y,E.y)&&w.y>=Math.min(S.y,E.y)}function d(S){return S>0?1:S<0?-1:0}function v(S,w){return u(S.prev,S,S.next)<0?u(S,w,S.next)>=0&&u(S,S.prev,w)>=0:u(S,w,S.prev)<0||u(S,S.next,w)<0}function g(S,w){var E=new b(S.i,S.x,S.y),O=new b(w.i,w.x,w.y),C=S.next,P=w.prev;return S.next=w,w.prev=S,E.next=C,C.prev=E,O.next=E,E.prev=O,P.next=O,O.prev=P,O}function y(S,w,E,O){var C=new b(S,w,E);return O?(C.next=O.next,C.prev=O,O.next.prev=C,O.next=C):(C.prev=C,C.next=C),C}function m(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function b(S,w,E){this.i=S,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function f(S,w,E,O){for(var C=0,P=w,D=E-O;P<E;P+=O)C+=(S[D]-S[P])*(S[P+1]+S[D+1]),D=P;return C}ee.exports=R,ee.exports.default=R,R.deviation=function(S,w,E,O){var C=w&&w.length,P=C?w[0]*E:S.length,D=Math.abs(f(S,0,P,E));if(C)for(var U=0,I=w.length;U<I;U++){var N=w[U]*E,W=U<I-1?w[U+1]*E:S.length;D-=Math.abs(f(S,N,W,E))}var F=0;for(U=0;U<O.length;U+=3){var j=O[U]*E,H=O[U+1]*E,te=O[U+2]*E;F+=Math.abs((S[j]-S[te])*(S[H+1]-S[j+1])-(S[j]-S[H])*(S[te+1]-S[j+1]))}return D===0&&F===0?0:Math.abs((F-D)/D)},R.flatten=function(S){for(var w=S[0][0].length,E={vertices:[],holes:[],dimensions:w},O=0,C=0;C<S.length;C++){for(var P=0;P<S[C].length;P++)for(var D=0;D<w;D++)E.vertices.push(S[C][P][D]);C>0&&(O+=S[C-1].length,E.holes.push(O))}return E}},6688:function(ee,R,e){var M=e(78484);ee.exports=function(k,o){var T,_=[],p=[],s=[],t={},i=[];function r(v){s[v]=!1,t.hasOwnProperty(v)&&Object.keys(t[v]).forEach(function(g){delete t[v][g],s[g]&&r(g)})}function n(v){var g,y,m=!1;for(p.push(v),s[v]=!0,g=0;g<i[v].length;g++)(y=i[v][g])===T?(a(T,p),m=!0):s[y]||(m=n(y));if(m)r(v);else for(g=0;g<i[v].length;g++){y=i[v][g];var b=t[y];b||(b={},t[y]=b),b[y]=!0}return p.pop(),m}function a(v,g){var y=[].concat(g).concat(v);o?o(n):_.push(y)}function l(v){(function(E){for(var O=0;O<k.length;O++)O<E&&(k[O]=[]),k[O]=k[O].filter(function(C){return C>=E})})(v);for(var g,y=M(k).components.filter(function(E){return E.length>1}),m=1/0,b=0;b<y.length;b++)for(var f=0;f<y[b].length;f++)y[b][f]<m&&(m=y[b][f],g=b);var S=y[g];if(!S)return!1;var w=k.map(function(E,O){return S.indexOf(O)===-1?[]:E.filter(function(C){return S.indexOf(C)!==-1})});return{leastVertex:m,adjList:w}}T=0;for(var u=k.length;T<u;){var h=l(T);if(T=h.leastVertex,i=h.adjList){for(var c=0;c<i.length;c++)for(var x=0;x<i[c].length;x++){var d=i[c][x];s[+d]=!1,t[d]={}}n(T),T+=1}else T=u}return o?void 0:_}},41476:function(ee,R,e){var M=e(9252);ee.exports=function(){return M(this).length=0,this}},74772:function(ee,R,e){ee.exports=e(44716)()?Array.from:e(80816)},44716:function(ee){ee.exports=function(){var R,e,M=Array.from;return typeof M=="function"&&(e=M(R=["raz","dwa"]),!!(e&&e!==R&&e[1]==="dwa"))}},80816:function(ee,R,e){var M=e(92664).iterator,k=e(60948),o=e(17024),T=e(81304),_=e(34044),p=e(9252),s=e(42584),t=e(29768),i=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;ee.exports=function(l){var u,h,c,x,d,v,g,y,m,b,f=arguments[1],S=arguments[2];if(l=Object(p(l)),s(f)&&_(f),this&&this!==Array&&o(this))u=this;else{if(!f){if(k(l))return(d=l.length)!==1?Array.apply(null,l):((x=new Array(1))[0]=l[0],x);if(i(l)){for(x=new Array(d=l.length),h=0;h<d;++h)x[h]=l[h];return x}}x=[]}if(!i(l)){if((m=l[M])!==void 0){for(g=_(m).call(l),u&&(x=new u),y=g.next(),h=0;!y.done;)b=f?r.call(f,S,y.value,h):y.value,u?(n.value=b,a(x,h,n)):x[h]=b,y=g.next(),++h;d=h}else if(t(l)){for(d=l.length,u&&(x=new u),h=0,c=0;h<d;++h)b=l[h],h+1<d&&(v=b.charCodeAt(0))>=55296&&v<=56319&&(b+=l[++h]),b=f?r.call(f,S,b,c):b,u?(n.value=b,a(x,c,n)):x[c]=b,++c;d=c}}if(d===void 0)for(d=T(l.length),u&&(x=new u(d)),h=0;h<d;++h)b=f?r.call(f,S,l[h],h):l[h],u?(n.value=b,a(x,h,n)):x[h]=b;return u&&(n.value=null,x.length=d),x}},60948:function(ee){var R=Object.prototype.toString,e=R.call(function(){return arguments}());ee.exports=function(M){return R.call(M)===e}},17024:function(ee){var R=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ee.exports=function(M){return typeof M=="function"&&e(R.call(M))}},33208:function(ee){ee.exports=function(){}},85608:function(ee,R,e){ee.exports=e(37328)()?Math.sign:e(92928)},37328:function(ee){ee.exports=function(){var R=Math.sign;return typeof R=="function"&&R(10)===1&&R(-20)===-1}},92928:function(ee){ee.exports=function(R){return R=Number(R),isNaN(R)||R===0?R:R>0?1:-1}},96936:function(ee,R,e){var M=e(85608),k=Math.abs,o=Math.floor;ee.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?M(T)*o(k(T)):T}},81304:function(ee,R,e){var M=e(96936),k=Math.max;ee.exports=function(o){return k(0,M(o))}},14428:function(ee,R,e){var M=e(34044),k=e(9252),o=Function.prototype.bind,T=Function.prototype.call,_=Object.keys,p=Object.prototype.propertyIsEnumerable;ee.exports=function(s,t){return function(i,r){var n,a=arguments[2],l=arguments[3];return i=Object(k(i)),M(r),n=_(i),l&&n.sort(typeof l=="function"?o.call(l,i):void 0),typeof s!="function"&&(s=n[s]),T.call(s,n,function(u,h){return p.call(i,u)?T.call(r,a,i[u],u,i,h):t})}}},38452:function(ee,R,e){ee.exports=e(96276)()?Object.assign:e(81892)},96276:function(ee){ee.exports=function(){var R,e=Object.assign;return typeof e=="function"&&(e(R={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),R.foo+R.bar+R.trzy==="razdwatrzy")}},81892:function(ee,R,e){var M=e(54768),k=e(9252),o=Math.max;ee.exports=function(T,_){var p,s,t,i=o(arguments.length,2);for(T=Object(k(T)),t=function(r){try{T[r]=_[r]}catch(n){p||(p=n)}},s=1;s<i;++s)M(_=arguments[s]).forEach(t);if(p!==void 0)throw p;return T}},95920:function(ee,R,e){var M=e(74772),k=e(38452),o=e(9252);ee.exports=function(T){var _=Object(o(T)),p=arguments[1],s=Object(arguments[2]);if(_!==T&&!p)return _;var t={};return p?M(p,function(i){(s.ensure||i in T)&&(t[i]=T[i])}):k(t,T),t}},14452:function(ee,R,e){var M,k,o,T,_=Object.create;e(63092)()||(M=e(8672)),ee.exports=M?M.level!==1?_:(k={},o={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(p){o[p]=p!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,o),Object.defineProperty(M,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(p,s){return _(p===null?k:p,s)}):_},42748:function(ee,R,e){ee.exports=e(14428)("forEach")},69127:function(ee,R,e){var M=e(42584),k={function:!0,object:!0};ee.exports=function(o){return M(o)&&k[typeof o]||!1}},42584:function(ee,R,e){var M=e(33208)();ee.exports=function(k){return k!==M&&k!==null}},54768:function(ee,R,e){ee.exports=e(87888)()?Object.keys:e(89592)},87888:function(ee){ee.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(ee,R,e){var M=e(42584),k=Object.keys;ee.exports=function(o){return k(M(o)?Object(o):o)}},84323:function(ee,R,e){var M=e(34044),k=e(42748),o=Function.prototype.call;ee.exports=function(T,_){var p={},s=arguments[2];return M(_),k(T,function(t,i,r,n){p[i]=o.call(_,s,t,i,r,n)}),p}},50868:function(ee,R,e){var M=e(42584),k=Array.prototype.forEach,o=Object.create;ee.exports=function(T){var _=o(null);return k.call(arguments,function(p){M(p)&&function(s,t){var i;for(i in s)t[i]=s[i]}(Object(p),_)}),_}},69932:function(ee,R,e){ee.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(ee){var R=Object.create,e=Object.getPrototypeOf,M={};ee.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&e(k((arguments[0]||R)(null),M))===M}},8672:function(ee,R,e){var M,k,o,T,_=e(69127),p=e(9252),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};M=function(r,n){if(p(r),n===null||_(n))return r;throw new TypeError("Prototype must be null or an object")},ee.exports=(k=function(){var r,n=Object.create(null),a={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(r=l.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,o=function(r,n){return T.call(M(r,n),n),r}):o=function(r,n){return M(r,n).__proto__=n,r}:o=function r(n,a){var l;return M(n,a),(l=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,a===null&&(a=r.nullPolyfill),n.__proto__=a,l&&t(r.nullPolyfill,"__proto__",i),n},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(14452)},34044:function(ee){ee.exports=function(R){if(typeof R!="function")throw new TypeError(R+" is not a function");return R}},92584:function(ee,R,e){var M=e(69127);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not an Object");return k}},9252:function(ee,R,e){var M=e(42584);ee.exports=function(k){if(!M(k))throw new TypeError("Cannot use null or undefined");return k}},71056:function(ee,R,e){ee.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(ee){var R="razdwatrzy";ee.exports=function(){return typeof R.contains=="function"&&R.contains("dwa")===!0&&R.contains("foo")===!1}},93040:function(ee){var R=String.prototype.indexOf;ee.exports=function(e){return R.call(this,e,arguments[1])>-1}},29768:function(ee){var R=Object.prototype.toString,e=R.call("");ee.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||R.call(M)===e)||!1}},82252:function(ee){var R=Object.create(null),e=Math.random;ee.exports=function(){var M;do M=e().toString(36).slice(2);while(R[M]);return M}},52104:function(ee,R,e){var M,k=e(69932),o=e(71056),T=e(21092),_=e(92664),p=e(85512),s=Object.defineProperty;M=ee.exports=function(t,i){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");p.call(this,t),i=i?o.call(i,"key+value")?"key+value":o.call(i,"key")?"key":"value":"value",s(this,"__kind__",T("",i))},k&&k(M,p),delete M.prototype.constructor,M.prototype=Object.create(p.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(M.prototype,_.toStringTag,T("c","Array Iterator"))},76024:function(ee,R,e){var M=e(60948),k=e(34044),o=e(29768),T=e(76252),_=Array.isArray,p=Function.prototype.call,s=Array.prototype.some;ee.exports=function(t,i){var r,n,a,l,u,h,c,x,d=arguments[2];if(_(t)||M(t)?r="array":o(t)?r="string":t=T(t),k(i),a=function(){l=!0},r!=="array")if(r!=="string")for(n=t.next();!n.done;){if(p.call(i,d,n.value,a),l)return;n=t.next()}else for(h=t.length,u=0;u<h&&(c=t[u],u+1<h&&(x=c.charCodeAt(0))>=55296&&x<=56319&&(c+=t[++u]),p.call(i,d,c,a),!l);++u);else s.call(t,function(v){return p.call(i,d,v,a),l})}},76252:function(ee,R,e){var M=e(60948),k=e(29768),o=e(52104),T=e(80940),_=e(52891),p=e(92664).iterator;ee.exports=function(s){return typeof _(s)[p]=="function"?s[p]():M(s)?new o(s):k(s)?new T(s):new o(s)}},85512:function(ee,R,e){var M,k=e(41476),o=e(38452),T=e(34044),_=e(9252),p=e(21092),s=e(27940),t=e(92664),i=Object.defineProperty,r=Object.defineProperties;ee.exports=M=function(n,a){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");r(this,{__list__:p("w",_(n)),__context__:p("w",a),__nextIndex__:p("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete M.prototype.constructor,r(M.prototype,o({_next:p(function(){var n;if(this.__list__)return this.__redo__&&(n=this.__redo__.shift())!==void 0?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:p(function(){return this._createResult(this._next())}),_createResult:p(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:p(function(n){return this.__list__[n]}),_unBind:p(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:p(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:p(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,l){a>=n&&(this.__redo__[l]=++a)},this),this.__redo__.push(n)):i(this,"__redo__",p("c",[n])))}),_onDelete:p(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(n))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(l,u){l>n&&(this.__redo__[u]=--l)},this)))}),_onClear:p(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(M.prototype,t.iterator,p(function(){return this}))},76368:function(ee,R,e){var M=e(60948),k=e(42584),o=e(29768),T=e(92664).iterator,_=Array.isArray;ee.exports=function(p){return!(!k(p)||!_(p)&&!o(p)&&!M(p)&&typeof p[T]!="function")}},80940:function(ee,R,e){var M,k=e(69932),o=e(21092),T=e(92664),_=e(85512),p=Object.defineProperty;M=ee.exports=function(s){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");s=String(s),_.call(this,s),p(this,"__length__",o("",s.length))},k&&k(M,_),delete M.prototype.constructor,M.prototype=Object.create(_.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(s){var t,i=this.__list__[s];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),p(M.prototype,T.toStringTag,o("c","String Iterator"))},52891:function(ee,R,e){var M=e(76368);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not iterable");return k}},60964:function(ee){function R(e,M){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),o=1;o<arguments.length;o++){var T=arguments[o];if(T!=null)for(var _=Object.keys(Object(T)),p=0,s=_.length;p<s;p++){var t=_[p],i=Object.getOwnPropertyDescriptor(T,t);i!==void 0&&i.enumerable&&(k[t]=T[t])}}return k}ee.exports={assign:R,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:R})}}},92664:function(ee,R,e){ee.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(ee,R,e){var M=e(12296),k={object:!0,symbol:!0};ee.exports=function(){var o,T=M.Symbol;if(typeof T!="function")return!1;o=T("test symbol");try{String(o)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},53908:function(ee){ee.exports=function(R){return!!R&&(typeof R=="symbol"||!!R.constructor&&R.constructor.name==="Symbol"&&R[R.constructor.toStringTag]==="Symbol")}},96863:function(ee,R,e){var M=e(21092),k=Object.create,o=Object.defineProperty,T=Object.prototype,_=k(null);ee.exports=function(p){for(var s,t,i=0;_[p+(i||"")];)++i;return _[p+=i||""]=!0,o(T,s="@@"+p,M.gs(null,function(r){t||(t=!0,o(this,s,M(r)),t=!1)})),s}},53540:function(ee,R,e){var M=e(21092),k=e(12296).Symbol;ee.exports=function(o){return Object.defineProperties(o,{hasInstance:M("",k&&k.hasInstance||o("hasInstance")),isConcatSpreadable:M("",k&&k.isConcatSpreadable||o("isConcatSpreadable")),iterator:M("",k&&k.iterator||o("iterator")),match:M("",k&&k.match||o("match")),replace:M("",k&&k.replace||o("replace")),search:M("",k&&k.search||o("search")),species:M("",k&&k.species||o("species")),split:M("",k&&k.split||o("split")),toPrimitive:M("",k&&k.toPrimitive||o("toPrimitive")),toStringTag:M("",k&&k.toStringTag||o("toStringTag")),unscopables:M("",k&&k.unscopables||o("unscopables"))})}},73852:function(ee,R,e){var M=e(21092),k=e(63948),o=Object.create(null);ee.exports=function(T){return Object.defineProperties(T,{for:M(function(_){return o[_]?o[_]:o[_]=T(String(_))}),keyFor:M(function(_){var p;for(p in k(_),o)if(o[p]===_)return p})})}},18376:function(ee,R,e){var M,k,o,T=e(21092),_=e(63948),p=e(12296).Symbol,s=e(96863),t=e(53540),i=e(73852),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if(typeof p=="function")try{String(p()),o=!0}catch{}else p=null;k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return M(l)},ee.exports=M=function l(u){var h;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return o?p(u):(h=r(k.prototype),u=u===void 0?"":String(u),n(h,{__description__:T("",u),__name__:T("",s(u))}))},t(M),i(M),n(k.prototype,{constructor:T(M),toString:T("",function(){return this.__name__})}),n(M.prototype,{toString:T(function(){return"Symbol ("+_(this).__description__+")"}),valueOf:T(function(){return _(this)})}),a(M.prototype,M.toPrimitive,T("",function(){var l=_(this);return typeof l=="symbol"?l:l.toString()})),a(M.prototype,M.toStringTag,T("c","Symbol")),a(k.prototype,M.toStringTag,T("c",M.prototype[M.toStringTag])),a(k.prototype,M.toPrimitive,T("c",M.prototype[M.toPrimitive]))},63948:function(ee,R,e){var M=e(53908);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not a symbol");return k}},60463:function(ee,R,e){ee.exports=e(96979)()?WeakMap:e(64864)},96979:function(ee){ee.exports=function(){var R,e;if(typeof WeakMap!="function")return!1;try{R=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(R)==="[object WeakMap]"&&typeof R.set=="function"&&R.set({},1)===R&&typeof R.delete=="function"&&typeof R.has=="function"&&R.get(e)==="one"}},69876:function(ee){ee.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(ee,R,e){var M,k=e(42584),o=e(69932),T=e(92584),_=e(9252),p=e(82252),s=e(21092),t=e(76252),i=e(76024),r=e(92664).toStringTag,n=e(69876),a=Array.isArray,l=Object.defineProperty,u=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;ee.exports=M=function(){var c,x=arguments[0];if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");return c=n&&o&&WeakMap!==M?o(new WeakMap,h(this)):this,k(x)&&(a(x)||(x=t(x))),l(c,"__weakMapData__",s("c","$weakMap$"+p())),x&&i(x,function(d){_(d),c.set(d[0],d[1])}),c},n&&(o&&o(M,WeakMap),M.prototype=Object.create(WeakMap.prototype,{constructor:s(M)})),Object.defineProperties(M.prototype,{delete:s(function(c){return!!u.call(T(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:s(function(c){if(u.call(T(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:s(function(c){return u.call(T(c),this.__weakMapData__)}),set:s(function(c,x){return l(T(c),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),l(M.prototype,r,s("c","WeakMap"))},61252:function(ee){var R,e=typeof Reflect=="object"?Reflect:null,M=e&&typeof e.apply=="function"?e.apply:function(u,h,c){return Function.prototype.apply.call(u,h,c)};R=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function o(){o.init.call(this)}ee.exports=o,ee.exports.once=function(u,h){return new Promise(function(c,x){function d(g){u.removeListener(h,v),x(g)}function v(){typeof u.removeListener=="function"&&u.removeListener("error",d),c([].slice.call(arguments))}l(u,h,v,{once:!0}),h!=="error"&&function(g,y,m){typeof g.on=="function"&&l(g,"error",y,{once:!0})}(u,d)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var T=10;function _(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function p(u){return u._maxListeners===void 0?o.defaultMaxListeners:u._maxListeners}function s(u,h,c,x){var d,v,g,y;if(_(c),(v=u._events)===void 0?(v=u._events=Object.create(null),u._eventsCount=0):(v.newListener!==void 0&&(u.emit("newListener",h,c.listener?c.listener:c),v=u._events),g=v[h]),g===void 0)g=v[h]=c,++u._eventsCount;else if(typeof g=="function"?g=v[h]=x?[c,g]:[g,c]:x?g.unshift(c):g.push(c),(d=p(u))>0&&g.length>d&&!g.warned){g.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=u,m.type=h,m.count=g.length,y=m,console&&console.warn&&console.warn(y)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,h,c){var x={fired:!1,wrapFn:void 0,target:u,type:h,listener:c},d=t.bind(x);return d.listener=c,x.wrapFn=d,d}function r(u,h,c){var x=u._events;if(x===void 0)return[];var d=x[h];return d===void 0?[]:typeof d=="function"?c?[d.listener||d]:[d]:c?function(v){for(var g=new Array(v.length),y=0;y<g.length;++y)g[y]=v[y].listener||v[y];return g}(d):a(d,d.length)}function n(u){var h=this._events;if(h!==void 0){var c=h[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function a(u,h){for(var c=new Array(h),x=0;x<h;++x)c[x]=u[x];return c}function l(u,h,c,x){if(typeof u.on=="function")x.once?u.once(h,c):u.on(h,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(h,function d(v){x.once&&u.removeEventListener(h,d),c(v)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");T=u}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(u){for(var h=[],c=1;c<arguments.length;c++)h.push(arguments[c]);var x=u==="error",d=this._events;if(d!==void 0)x=x&&d.error===void 0;else if(!x)return!1;if(x){var v;if(h.length>0&&(v=h[0]),v instanceof Error)throw v;var g=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw g.context=v,g}var y=d[u];if(y===void 0)return!1;if(typeof y=="function")M(y,this,h);else{var m=y.length,b=a(y,m);for(c=0;c<m;++c)M(b[c],this,h)}return!0},o.prototype.addListener=function(u,h){return s(this,u,h,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(u,h){return s(this,u,h,!0)},o.prototype.once=function(u,h){return _(h),this.on(u,i(this,u,h)),this},o.prototype.prependOnceListener=function(u,h){return _(h),this.prependListener(u,i(this,u,h)),this},o.prototype.removeListener=function(u,h){var c,x,d,v,g;if(_(h),(x=this._events)===void 0)return this;if((c=x[u])===void 0)return this;if(c===h||c.listener===h)--this._eventsCount==0?this._events=Object.create(null):(delete x[u],x.removeListener&&this.emit("removeListener",u,c.listener||h));else if(typeof c!="function"){for(d=-1,v=c.length-1;v>=0;v--)if(c[v]===h||c[v].listener===h){g=c[v].listener,d=v;break}if(d<0)return this;d===0?c.shift():function(y,m){for(;m+1<y.length;m++)y[m]=y[m+1];y.pop()}(c,d),c.length===1&&(x[u]=c[0]),x.removeListener!==void 0&&this.emit("removeListener",u,g||h)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(u){var h,c,x;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var d,v=Object.keys(c);for(x=0;x<v.length;++x)(d=v[x])!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(h=c[u])=="function")this.removeListener(u,h);else if(h!==void 0)for(x=h.length-1;x>=0;x--)this.removeListener(u,h[x]);return this},o.prototype.listeners=function(u){return r(this,u,!0)},o.prototype.rawListeners=function(u){return r(this,u,!1)},o.listenerCount=function(u,h){return typeof u.listenerCount=="function"?u.listenerCount(h):n.call(u,h)},o.prototype.listenerCount=n,o.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},39072:function(ee){var R=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ee.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return R()}try{return __global__||R()}finally{delete Object.prototype.__global__}}()},12296:function(ee,R,e){ee.exports=e(45072)()?globalThis:e(39072)},45072:function(ee){ee.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(ee,R,e){var M=e(94576);ee.exports=function(k){var o=typeof k;if(o==="string"){var T=k;if((k=+k)==0&&M(T))return!1}else if(o!=="number")return!1;return k-k<1}},47520:function(ee,R,e){var M=e(72512);ee.exports=function(k,o,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var _,p,s,t,i=k[0].length,r=k.length*i;o&&typeof o!="string"||(o=new(M(o||"float32"))(r+T));var n=o.length-T;if(r!==n)throw new Error("source length "+r+" ("+i+"x"+k.length+") does not match destination length "+n);for(_=0,s=T;_<k.length;_++)for(p=0;p<i;p++)o[s++]=k[_][p]===null?NaN:k[_][p]}else if(o&&typeof o!="string")o.set(k,T);else{var a=M(o||"float32");if(Array.isArray(k)||o==="array")for(_=0,s=T,t=(o=new a(k.length+T)).length;s<t;s++,_++)o[s]=k[_]===null?NaN:k[_];else T===0?o=new a(k):(o=new a(k.length+T)).set(k,T)}return o}},33888:function(ee,R,e){var M=e(49395),k=[32,126];ee.exports=function(o){var T=(o=o||{}).shape?o.shape:o.canvas?[o.canvas.width,o.canvas.height]:[512,512],_=o.canvas||document.createElement("canvas"),p=o.font,s=typeof o.step=="number"?[o.step,o.step]:o.step||[32,32],t=o.chars||k;if(p&&typeof p!="string"&&(p=M(p)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var i=[],r=t[0],n=0;r<=t[1];r++)i[n++]=String.fromCharCode(r);t=i}}else t=String(t).split("");T=T.slice(),_.width=T[0],_.height=T[1];var a=_.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,_.width,_.height),a.font=p,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var l=s[0]/2,u=s[1]/2;for(r=0;r<t.length;r++)a.fillText(t[r],l,u),(l+=s[0])>T[0]-s[0]/2&&(l=s[0]/2,u+=s[1]);return _}},71920:function(ee){function R(o,T){T||(T={}),(typeof o=="string"||Array.isArray(o))&&(T.family=o);var _=Array.isArray(T.family)?T.family.join(", "):T.family;if(!_)throw Error("`family` must be defined");var p=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(o=[T.style||T.fontStyle||"",s,p].join(" ")+"px "+_,T.origin||"top");if(R.cache[_]&&p<=R.cache[_].em)return e(R.cache[_],t);var i=T.canvas||R.canvas,r=i.getContext("2d"),n={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*p);i.height=a,i.width=.5*a,r.font=o;var l="H",u={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(l,0,0);var h=M(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(l,0,a);var c=M(r.getImageData(0,0,a,a));u.lineHeight=u.bottom=a-c+h,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(l,0,a);var x=a-M(r.getImageData(0,0,a,a))-1+h;u.baseline=u.alphabetic=x,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(l,0,.5*a);var d=M(r.getImageData(0,0,a,a));u.median=u.middle=a-d-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(l,0,.5*a);var v=M(r.getImageData(0,0,a,a));u.hanging=a-v-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(l,0,a);var g=M(r.getImageData(0,0,a,a));if(u.ideographic=a-g-1+h,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),u.upper=M(r.getImageData(0,0,a,a)),u.capHeight=u.baseline-u.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),u.lower=M(r.getImageData(0,0,a,a)),u.xHeight=u.baseline-u.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),u.tittle=M(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),u.ascent=M(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),u.descent=k(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var y=k(r.getImageData(0,0,a,a));u.overshoot=y-x}for(var m in u)u[m]/=p;return u.em=p,R.cache[_]=u,e(u,t)}function e(o,T){var _={};for(var p in typeof T=="string"&&(T=o[T]),o)p!=="em"&&(_[p]=o[p]-T);return _}function M(o){for(var T=o.height,_=o.data,p=3;p<_.length;p+=4)if(_[p]!==0)return Math.floor(.25*(p-3)/T)}function k(o){for(var T=o.height,_=o.data,p=_.length-1;p>0;p-=4)if(_[p]!==0)return Math.floor(.25*(p-3)/T)}ee.exports=R,R.canvas=document.createElement("canvas"),R.cache={}},46492:function(ee,R,e){var M=e(90720),k=Object.prototype.toString,o=Object.prototype.hasOwnProperty;ee.exports=function(T,_,p){if(!M(_))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=p),k.call(T)==="[object Array]"?function(t,i,r){for(var n=0,a=t.length;n<a;n++)o.call(t,n)&&(r==null?i(t[n],n,t):i.call(r,t[n],n,t))}(T,_,s):typeof T=="string"?function(t,i,r){for(var n=0,a=t.length;n<a;n++)r==null?i(t.charAt(n),n,t):i.call(r,t.charAt(n),n,t)}(T,_,s):function(t,i,r){for(var n in t)o.call(t,n)&&(r==null?i(t[n],n,t):i.call(r,t[n],n,t))}(T,_,s)}},74336:function(ee){var R=Object.prototype.toString,e=Math.max,M=function(k,o){for(var T=[],_=0;_<k.length;_+=1)T[_]=k[_];for(var p=0;p<o.length;p+=1)T[p+k.length]=o[p];return T};ee.exports=function(k){var o=this;if(typeof o!="function"||R.apply(o)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var T,_=function(r,n){for(var a=[],l=1,u=0;l<r.length;l+=1,u+=1)a[u]=r[l];return a}(arguments),p=e(0,o.length-_.length),s=[],t=0;t<p;t++)s[t]="$"+t;if(T=Function("binder","return function ("+function(r,n){for(var a="",l=0;l<r.length;l+=1)a+=r[l],l+1<r.length&&(a+=",");return a}(s)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof T){var r=o.apply(this,M(_,arguments));return Object(r)===r?r:this}return o.apply(k,M(_,arguments))}),o.prototype){var i=function(){};i.prototype=o.prototype,T.prototype=new i,i.prototype=null}return T}},8844:function(ee,R,e){var M=e(74336);ee.exports=Function.prototype.bind||M},13380:function(ee){ee.exports=function(R,e){if(typeof R!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var M=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(M.width=e.width),typeof e.height=="number"&&(M.height=e.height);var k,o=e;try{var T=[R];R.indexOf("webgl")===0&&T.push("experimental-"+R);for(var _=0;_<T.length;_++)if(k=M.getContext(T[_],o))return k}catch{k=null}return k||null}},53664:function(ee,R,e){var M,k=SyntaxError,o=Function,T=TypeError,_=function(O){try{return o('"use strict"; return ('+O+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var s=function(){throw new T},t=p?function(){try{return s}catch{try{return p(arguments,"callee").get}catch{return s}}}():s,i=e(71080)(),r=e(69572)(),n=Object.getPrototypeOf||(r?function(O){return O.__proto__}:null),a={},l=typeof Uint8Array<"u"&&n?n(Uint8Array):M,u={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":i&&n?n([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i&&n?n(n([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i&&n?n(new Map()[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i&&n?n(new Set()[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i&&n?n(""[Symbol.iterator]()):M,"%Symbol%":i?Symbol:M,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":l,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};if(n)try{null.error}catch(O){var h=n(n(O));u["%Error.prototype%"]=h}var c=function O(C){var P;if(C==="%AsyncFunction%")P=_("async function () {}");else if(C==="%GeneratorFunction%")P=_("function* () {}");else if(C==="%AsyncGeneratorFunction%")P=_("async function* () {}");else if(C==="%AsyncGenerator%"){var D=O("%AsyncGeneratorFunction%");D&&(P=D.prototype)}else if(C==="%AsyncIteratorPrototype%"){var U=O("%AsyncGenerator%");U&&n&&(P=n(U.prototype))}return u[C]=P,P},x={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},d=e(8844),v=e(92064),g=d.call(Function.call,Array.prototype.concat),y=d.call(Function.apply,Array.prototype.splice),m=d.call(Function.call,String.prototype.replace),b=d.call(Function.call,String.prototype.slice),f=d.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,E=function(O,C){var P,D=O;if(v(x,D)&&(D="%"+(P=x[D])[0]+"%"),v(u,D)){var U=u[D];if(U===a&&(U=c(D)),U===void 0&&!C)throw new T("intrinsic "+O+" exists, but is not available. Please file an issue!");return{alias:P,name:D,value:U}}throw new k("intrinsic "+O+" does not exist!")};ee.exports=function(O,C){if(typeof O!="string"||O.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof C!="boolean")throw new T('"allowMissing" argument must be a boolean');if(f(/^%?[^%]*%?$/,O)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var P=function(X){var Y=b(X,0,1),re=b(X,-1);if(Y==="%"&&re!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(re==="%"&&Y!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var se=[];return m(X,S,function(ae,ce,fe,he){se[se.length]=fe?m(he,w,"$1"):ce||ae}),se}(O),D=P.length>0?P[0]:"",U=E("%"+D+"%",C),I=U.name,N=U.value,W=!1,F=U.alias;F&&(D=F[0],y(P,g([0,1],F)));for(var j=1,H=!0;j<P.length;j+=1){var te=P[j],Q=b(te,0,1),$=b(te,-1);if((Q==='"'||Q==="'"||Q==="`"||$==='"'||$==="'"||$==="`")&&Q!==$)throw new k("property names with quotes must have matching quotes");if(te!=="constructor"&&H||(W=!0),v(u,I="%"+(D+="."+te)+"%"))N=u[I];else if(N!=null){if(!(te in N)){if(!C)throw new T("base intrinsic for "+O+" exists, but the property is not available.");return}if(p&&j+1>=P.length){var K=p(N,te);N=(H=!!K)&&"get"in K&&!("originalValue"in K.get)?K.get:N[te]}else H=v(N,te),N=N[te];H&&!W&&(u[I]=N)}}return N}},12408:function(ee){ee.exports=function(R,e){var M=e[0],k=e[1],o=e[2],T=e[3],_=e[4],p=e[5],s=e[6],t=e[7],i=e[8],r=e[9],n=e[10],a=e[11],l=e[12],u=e[13],h=e[14],c=e[15];return R[0]=p*(n*c-a*h)-r*(s*c-t*h)+u*(s*a-t*n),R[1]=-(k*(n*c-a*h)-r*(o*c-T*h)+u*(o*a-T*n)),R[2]=k*(s*c-t*h)-p*(o*c-T*h)+u*(o*t-T*s),R[3]=-(k*(s*a-t*n)-p*(o*a-T*n)+r*(o*t-T*s)),R[4]=-(_*(n*c-a*h)-i*(s*c-t*h)+l*(s*a-t*n)),R[5]=M*(n*c-a*h)-i*(o*c-T*h)+l*(o*a-T*n),R[6]=-(M*(s*c-t*h)-_*(o*c-T*h)+l*(o*t-T*s)),R[7]=M*(s*a-t*n)-_*(o*a-T*n)+i*(o*t-T*s),R[8]=_*(r*c-a*u)-i*(p*c-t*u)+l*(p*a-t*r),R[9]=-(M*(r*c-a*u)-i*(k*c-T*u)+l*(k*a-T*r)),R[10]=M*(p*c-t*u)-_*(k*c-T*u)+l*(k*t-T*p),R[11]=-(M*(p*a-t*r)-_*(k*a-T*r)+i*(k*t-T*p)),R[12]=-(_*(r*h-n*u)-i*(p*h-s*u)+l*(p*n-s*r)),R[13]=M*(r*h-n*u)-i*(k*h-o*u)+l*(k*n-o*r),R[14]=-(M*(p*h-s*u)-_*(k*h-o*u)+l*(k*s-o*p)),R[15]=M*(p*n-s*r)-_*(k*n-o*r)+i*(k*s-o*p),R}},76860:function(ee){ee.exports=function(R){var e=new Float32Array(16);return e[0]=R[0],e[1]=R[1],e[2]=R[2],e[3]=R[3],e[4]=R[4],e[5]=R[5],e[6]=R[6],e[7]=R[7],e[8]=R[8],e[9]=R[9],e[10]=R[10],e[11]=R[11],e[12]=R[12],e[13]=R[13],e[14]=R[14],e[15]=R[15],e}},64492:function(ee){ee.exports=function(R,e){return R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3],R[4]=e[4],R[5]=e[5],R[6]=e[6],R[7]=e[7],R[8]=e[8],R[9]=e[9],R[10]=e[10],R[11]=e[11],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15],R}},54212:function(ee){ee.exports=function(){var R=new Float32Array(16);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},70800:function(ee){ee.exports=function(R){var e=R[0],M=R[1],k=R[2],o=R[3],T=R[4],_=R[5],p=R[6],s=R[7],t=R[8],i=R[9],r=R[10],n=R[11],a=R[12],l=R[13],u=R[14],h=R[15];return(e*_-M*T)*(r*h-n*u)-(e*p-k*T)*(i*h-n*l)+(e*s-o*T)*(i*u-r*l)+(M*p-k*_)*(t*h-n*a)-(M*s-o*_)*(t*u-r*a)+(k*s-o*p)*(t*l-i*a)}},61784:function(ee){ee.exports=function(R,e){var M=e[0],k=e[1],o=e[2],T=e[3],_=M+M,p=k+k,s=o+o,t=M*_,i=k*_,r=k*p,n=o*_,a=o*p,l=o*s,u=T*_,h=T*p,c=T*s;return R[0]=1-r-l,R[1]=i+c,R[2]=n-h,R[3]=0,R[4]=i-c,R[5]=1-t-l,R[6]=a+u,R[7]=0,R[8]=n+h,R[9]=a-u,R[10]=1-t-r,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},91616:function(ee){ee.exports=function(R,e,M){var k,o,T,_=M[0],p=M[1],s=M[2],t=Math.sqrt(_*_+p*p+s*s);return Math.abs(t)<1e-6?null:(_*=t=1/t,p*=t,s*=t,k=Math.sin(e),T=1-(o=Math.cos(e)),R[0]=_*_*T+o,R[1]=p*_*T+s*k,R[2]=s*_*T-p*k,R[3]=0,R[4]=_*p*T-s*k,R[5]=p*p*T+o,R[6]=s*p*T+_*k,R[7]=0,R[8]=_*s*T+p*k,R[9]=p*s*T-_*k,R[10]=s*s*T+o,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R)}},51944:function(ee){ee.exports=function(R,e,M){var k=e[0],o=e[1],T=e[2],_=e[3],p=k+k,s=o+o,t=T+T,i=k*p,r=k*s,n=k*t,a=o*s,l=o*t,u=T*t,h=_*p,c=_*s,x=_*t;return R[0]=1-(a+u),R[1]=r+x,R[2]=n-c,R[3]=0,R[4]=r-x,R[5]=1-(i+u),R[6]=l+h,R[7]=0,R[8]=n+c,R[9]=l-h,R[10]=1-(i+a),R[11]=0,R[12]=M[0],R[13]=M[1],R[14]=M[2],R[15]=1,R}},69444:function(ee){ee.exports=function(R,e){return R[0]=e[0],R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=e[1],R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=e[2],R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},48268:function(ee){ee.exports=function(R,e){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=e[0],R[13]=e[1],R[14]=e[2],R[15]=1,R}},21856:function(ee){ee.exports=function(R,e){var M=Math.sin(e),k=Math.cos(e);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=k,R[6]=M,R[7]=0,R[8]=0,R[9]=-M,R[10]=k,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},79216:function(ee){ee.exports=function(R,e){var M=Math.sin(e),k=Math.cos(e);return R[0]=k,R[1]=0,R[2]=-M,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=M,R[9]=0,R[10]=k,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},57736:function(ee){ee.exports=function(R,e){var M=Math.sin(e),k=Math.cos(e);return R[0]=k,R[1]=M,R[2]=0,R[3]=0,R[4]=-M,R[5]=k,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},38848:function(ee){ee.exports=function(R,e,M,k,o,T,_){var p=1/(M-e),s=1/(o-k),t=1/(T-_);return R[0]=2*T*p,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=2*T*s,R[6]=0,R[7]=0,R[8]=(M+e)*p,R[9]=(o+k)*s,R[10]=(_+T)*t,R[11]=-1,R[12]=0,R[13]=0,R[14]=_*T*2*t,R[15]=0,R}},36635:function(ee){ee.exports=function(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},36524:function(ee,R,e){ee.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(ee){ee.exports=function(R,e){var M=e[0],k=e[1],o=e[2],T=e[3],_=e[4],p=e[5],s=e[6],t=e[7],i=e[8],r=e[9],n=e[10],a=e[11],l=e[12],u=e[13],h=e[14],c=e[15],x=M*p-k*_,d=M*s-o*_,v=M*t-T*_,g=k*s-o*p,y=k*t-T*p,m=o*t-T*s,b=i*u-r*l,f=i*h-n*l,S=i*c-a*l,w=r*h-n*u,E=r*c-a*u,O=n*c-a*h,C=x*O-d*E+v*w+g*S-y*f+m*b;return C?(C=1/C,R[0]=(p*O-s*E+t*w)*C,R[1]=(o*E-k*O-T*w)*C,R[2]=(u*m-h*y+c*g)*C,R[3]=(n*y-r*m-a*g)*C,R[4]=(s*S-_*O-t*f)*C,R[5]=(M*O-o*S+T*f)*C,R[6]=(h*v-l*m-c*d)*C,R[7]=(i*m-n*v+a*d)*C,R[8]=(_*E-p*S+t*b)*C,R[9]=(k*S-M*E-T*b)*C,R[10]=(l*y-u*v+c*x)*C,R[11]=(r*v-i*y-a*x)*C,R[12]=(p*f-_*w-s*b)*C,R[13]=(M*w-k*f+o*b)*C,R[14]=(u*d-l*g-h*x)*C,R[15]=(i*g-r*d+n*x)*C,R):null}},56508:function(ee,R,e){var M=e(36635);ee.exports=function(k,o,T,_){var p,s,t,i,r,n,a,l,u,h,c=o[0],x=o[1],d=o[2],v=_[0],g=_[1],y=_[2],m=T[0],b=T[1],f=T[2];return Math.abs(c-m)<1e-6&&Math.abs(x-b)<1e-6&&Math.abs(d-f)<1e-6?M(k):(a=c-m,l=x-b,u=d-f,p=g*(u*=h=1/Math.sqrt(a*a+l*l+u*u))-y*(l*=h),s=y*(a*=h)-v*u,t=v*l-g*a,(h=Math.sqrt(p*p+s*s+t*t))?(p*=h=1/h,s*=h,t*=h):(p=0,s=0,t=0),i=l*t-u*s,r=u*p-a*t,n=a*s-l*p,(h=Math.sqrt(i*i+r*r+n*n))?(i*=h=1/h,r*=h,n*=h):(i=0,r=0,n=0),k[0]=p,k[1]=i,k[2]=a,k[3]=0,k[4]=s,k[5]=r,k[6]=l,k[7]=0,k[8]=t,k[9]=n,k[10]=u,k[11]=0,k[12]=-(p*c+s*x+t*d),k[13]=-(i*c+r*x+n*d),k[14]=-(a*c+l*x+u*d),k[15]=1,k)}},80944:function(ee){ee.exports=function(R,e,M){var k=e[0],o=e[1],T=e[2],_=e[3],p=e[4],s=e[5],t=e[6],i=e[7],r=e[8],n=e[9],a=e[10],l=e[11],u=e[12],h=e[13],c=e[14],x=e[15],d=M[0],v=M[1],g=M[2],y=M[3];return R[0]=d*k+v*p+g*r+y*u,R[1]=d*o+v*s+g*n+y*h,R[2]=d*T+v*t+g*a+y*c,R[3]=d*_+v*i+g*l+y*x,d=M[4],v=M[5],g=M[6],y=M[7],R[4]=d*k+v*p+g*r+y*u,R[5]=d*o+v*s+g*n+y*h,R[6]=d*T+v*t+g*a+y*c,R[7]=d*_+v*i+g*l+y*x,d=M[8],v=M[9],g=M[10],y=M[11],R[8]=d*k+v*p+g*r+y*u,R[9]=d*o+v*s+g*n+y*h,R[10]=d*T+v*t+g*a+y*c,R[11]=d*_+v*i+g*l+y*x,d=M[12],v=M[13],g=M[14],y=M[15],R[12]=d*k+v*p+g*r+y*u,R[13]=d*o+v*s+g*n+y*h,R[14]=d*T+v*t+g*a+y*c,R[15]=d*_+v*i+g*l+y*x,R}},97688:function(ee){ee.exports=function(R,e,M,k,o,T,_){var p=1/(e-M),s=1/(k-o),t=1/(T-_);return R[0]=-2*p,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*s,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*t,R[11]=0,R[12]=(e+M)*p,R[13]=(o+k)*s,R[14]=(_+T)*t,R[15]=1,R}},51296:function(ee){ee.exports=function(R,e,M,k,o){var T=1/Math.tan(e/2),_=1/(k-o);return R[0]=T/M,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=T,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=(o+k)*_,R[11]=-1,R[12]=0,R[13]=0,R[14]=2*o*k*_,R[15]=0,R}},63688:function(ee){ee.exports=function(R,e,M,k){var o=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),_=Math.tan(e.leftDegrees*Math.PI/180),p=Math.tan(e.rightDegrees*Math.PI/180),s=2/(_+p),t=2/(o+T);return R[0]=s,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=t,R[6]=0,R[7]=0,R[8]=-(_-p)*s*.5,R[9]=(o-T)*t*.5,R[10]=k/(M-k),R[11]=-1,R[12]=0,R[13]=0,R[14]=k*M/(M-k),R[15]=0,R}},30016:function(ee){ee.exports=function(R,e,M,k){var o,T,_,p,s,t,i,r,n,a,l,u,h,c,x,d,v,g,y,m,b,f,S,w,E=k[0],O=k[1],C=k[2],P=Math.sqrt(E*E+O*O+C*C);return Math.abs(P)<1e-6?null:(E*=P=1/P,O*=P,C*=P,o=Math.sin(M),_=1-(T=Math.cos(M)),p=e[0],s=e[1],t=e[2],i=e[3],r=e[4],n=e[5],a=e[6],l=e[7],u=e[8],h=e[9],c=e[10],x=e[11],d=E*E*_+T,v=O*E*_+C*o,g=C*E*_-O*o,y=E*O*_-C*o,m=O*O*_+T,b=C*O*_+E*o,f=E*C*_+O*o,S=O*C*_-E*o,w=C*C*_+T,R[0]=p*d+r*v+u*g,R[1]=s*d+n*v+h*g,R[2]=t*d+a*v+c*g,R[3]=i*d+l*v+x*g,R[4]=p*y+r*m+u*b,R[5]=s*y+n*m+h*b,R[6]=t*y+a*m+c*b,R[7]=i*y+l*m+x*b,R[8]=p*f+r*S+u*w,R[9]=s*f+n*S+h*w,R[10]=t*f+a*S+c*w,R[11]=i*f+l*S+x*w,e!==R&&(R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R)}},15456:function(ee){ee.exports=function(R,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[4],_=e[5],p=e[6],s=e[7],t=e[8],i=e[9],r=e[10],n=e[11];return e!==R&&(R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[4]=T*o+t*k,R[5]=_*o+i*k,R[6]=p*o+r*k,R[7]=s*o+n*k,R[8]=t*o-T*k,R[9]=i*o-_*k,R[10]=r*o-p*k,R[11]=n*o-s*k,R}},64840:function(ee){ee.exports=function(R,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[0],_=e[1],p=e[2],s=e[3],t=e[8],i=e[9],r=e[10],n=e[11];return e!==R&&(R[4]=e[4],R[5]=e[5],R[6]=e[6],R[7]=e[7],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[0]=T*o-t*k,R[1]=_*o-i*k,R[2]=p*o-r*k,R[3]=s*o-n*k,R[8]=T*k+t*o,R[9]=_*k+i*o,R[10]=p*k+r*o,R[11]=s*k+n*o,R}},4192:function(ee){ee.exports=function(R,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[0],_=e[1],p=e[2],s=e[3],t=e[4],i=e[5],r=e[6],n=e[7];return e!==R&&(R[8]=e[8],R[9]=e[9],R[10]=e[10],R[11]=e[11],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[0]=T*o+t*k,R[1]=_*o+i*k,R[2]=p*o+r*k,R[3]=s*o+n*k,R[4]=t*o-T*k,R[5]=i*o-_*k,R[6]=r*o-p*k,R[7]=n*o-s*k,R}},68152:function(ee){ee.exports=function(R,e,M){var k=M[0],o=M[1],T=M[2];return R[0]=e[0]*k,R[1]=e[1]*k,R[2]=e[2]*k,R[3]=e[3]*k,R[4]=e[4]*o,R[5]=e[5]*o,R[6]=e[6]*o,R[7]=e[7]*o,R[8]=e[8]*T,R[9]=e[9]*T,R[10]=e[10]*T,R[11]=e[11]*T,R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15],R}},89412:function(ee){ee.exports=function(R){return"mat4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+", "+R[9]+", "+R[10]+", "+R[11]+", "+R[12]+", "+R[13]+", "+R[14]+", "+R[15]+")"}},35176:function(ee){ee.exports=function(R,e,M){var k,o,T,_,p,s,t,i,r,n,a,l,u=M[0],h=M[1],c=M[2];return e===R?(R[12]=e[0]*u+e[4]*h+e[8]*c+e[12],R[13]=e[1]*u+e[5]*h+e[9]*c+e[13],R[14]=e[2]*u+e[6]*h+e[10]*c+e[14],R[15]=e[3]*u+e[7]*h+e[11]*c+e[15]):(k=e[0],o=e[1],T=e[2],_=e[3],p=e[4],s=e[5],t=e[6],i=e[7],r=e[8],n=e[9],a=e[10],l=e[11],R[0]=k,R[1]=o,R[2]=T,R[3]=_,R[4]=p,R[5]=s,R[6]=t,R[7]=i,R[8]=r,R[9]=n,R[10]=a,R[11]=l,R[12]=k*u+p*h+r*c+e[12],R[13]=o*u+s*h+n*c+e[13],R[14]=T*u+t*h+a*c+e[14],R[15]=_*u+i*h+l*c+e[15]),R}},86520:function(ee){ee.exports=function(R,e){if(R===e){var M=e[1],k=e[2],o=e[3],T=e[6],_=e[7],p=e[11];R[1]=e[4],R[2]=e[8],R[3]=e[12],R[4]=M,R[6]=e[9],R[7]=e[13],R[8]=k,R[9]=T,R[11]=e[14],R[12]=o,R[13]=_,R[14]=p}else R[0]=e[0],R[1]=e[4],R[2]=e[8],R[3]=e[12],R[4]=e[1],R[5]=e[5],R[6]=e[9],R[7]=e[13],R[8]=e[2],R[9]=e[6],R[10]=e[10],R[11]=e[14],R[12]=e[3],R[13]=e[7],R[14]=e[11],R[15]=e[15];return R}},23352:function(ee,R,e){var M=e(42771),k=e(55616),o=e(28624),T=e(55212),_=e(60463),p=e(72160),s=e(33888),t=e(14144),i=e(51160),r=e(58908),n=e(65819),a=e(23464),l=e(63768),u=e(50896),h=e(71920),c=e(47520),x=e(308).nextPow2,d=new _,v=!1;if(document.body){var g=document.body.appendChild(document.createElement("div"));g.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(g).fontStretch&&(v=!0),document.body.removeChild(g)}var y=function(m){(function(b){return typeof b=="function"&&b._gl&&b.prop&&b.texture&&b.buffer})(m)?(m={regl:m},this.gl=m.regl._gl):this.gl=T(m),this.shader=d.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=m.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),d.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(m)?m:{})};y.prototype.createShader=function(){var m=this.regl,b=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(f,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(f,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(f,S){return S.atlas.texture},charStep:function(f,S){return S.atlas.step},em:function(f,S){return S.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:m,draw:b,atlas:{}}},y.prototype.update=function(m){var b=this;if(typeof m=="string")m={text:m};else if(!m)return;(m=k(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(m.opacity)?this.opacity=m.opacity.map(function(de){return parseFloat(de)}):this.opacity=parseFloat(m.opacity)),m.viewport!=null&&(this.viewport=i(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),m.kerning!=null&&(this.kerning=m.kerning),m.offset!=null&&(typeof m.offset=="number"&&(m.offset=[m.offset,0]),this.positionOffset=c(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=y.baseFontSize+"px sans-serif");var f,S=!1,w=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function(de,Se){if(typeof de=="string")try{de=M.parse(de)}catch{de=M.parse(y.baseFontSize+"px "+de)}else{var _e=de.style,we=de.weight,Ae=de.stretch,Oe=de.variant;de=M.parse(M.stringify(de)),_e&&(de.style=_e),we&&(de.weight=we),Ae&&(de.stretch=Ae),Oe&&(de.variant=Oe)}var ze=M.stringify({size:y.baseFontSize,family:de.family,stretch:v?de.stretch:void 0,variant:de.variant,weight:de.weight,style:de.style}),pe=n(de.size),be=Math.round(pe[0]*a(pe[1]));if(be!==b.fontSize[Se]&&(w=!0,b.fontSize[Se]=be),!(b.font[Se]&&ze==b.font[Se].baseString||(S=!0,b.font[Se]=y.fonts[ze],b.font[Se]))){var ke=de.family.join(", "),Ie=[de.style];de.style!=de.variant&&Ie.push(de.variant),de.variant!=de.weight&&Ie.push(de.weight),v&&de.weight!=de.stretch&&Ie.push(de.stretch),b.font[Se]={baseString:ze,family:ke,weight:de.weight,stretch:de.stretch,style:de.style,variant:de.variant,width:{},kerning:{},metrics:h(ke,{origin:"top",fontSize:y.baseFontSize,fontStyle:Ie.join(" ")})},y.fonts[ze]=b.font[Se]}}),(S||w)&&this.font.forEach(function(de,Se){var _e=M.stringify({size:b.fontSize[Se],family:de.family,stretch:v?de.stretch:void 0,variant:de.variant,weight:de.weight,style:de.style});if(b.fontAtlas[Se]=b.shader.atlas[_e],!b.fontAtlas[Se]){var we=de.metrics;b.shader.atlas[_e]=b.fontAtlas[Se]={fontString:_e,step:2*Math.ceil(b.fontSize[Se]*we.bottom*.5),em:b.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:b.regl.texture()}}m.text==null&&(m.text=b.text)}),typeof m.text=="string"&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),O=0;O<E.length;O++)E[O]=m.text;m.text=E}if(m.text!=null||S){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];f=[],this.font.forEach(function(de,Se){y.atlasContext.font=de.baseString;for(var _e=b.fontAtlas[Se],we=0;we<b.text.length;we++){var Ae=b.text.charAt(we);if(_e.ids[Ae]==null&&(_e.ids[Ae]=_e.chars.length,_e.chars.push(Ae),f.push(Ae)),de.width[Ae]==null&&(de.width[Ae]=y.atlasContext.measureText(Ae).width/y.baseFontSize,b.kerning)){var Oe=[];for(var ze in de.width)Oe.push(ze+Ae,Ae+ze);u(de.kerning,l(de.family,{pairs:Oe}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,D=t.mallocFloat(2*this.count),U=0,I=0;U<this.counts.length;U++){var N=this.counts[U];if(P)for(var W=0;W<N;W++)D[I++]=m.position[2*U],D[I++]=m.position[2*U+1];else for(var F=0;F<N;F++)D[I++]=m.position[U][0],D[I++]=m.position[U][1]}this.position.call?this.position({type:"float",data:D}):this.position=this.regl.buffer({type:"float",data:D}),t.freeFloat(D)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||S){var j=t.mallocUint8(this.count),H=t.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,Q=0;te<this.counts.length;te++){for(var $=this.counts[te],K=this.font[te]||this.font[0],X=this.fontAtlas[te]||this.fontAtlas[0],Y=0;Y<$;Y++){var re=this.text.charAt(Q),se=this.text.charAt(Q-1);if(j[Q]=X.ids[re],H[2*Q]=K.width[re],Y){var ae=H[2*Q-2],ce=H[2*Q],fe=H[2*Q-1]+.5*ae+.5*ce;if(this.kerning){var he=K.kerning[se+re];he&&(fe+=.001*he)}H[2*Q+1]=fe}else H[2*Q+1]=.5*H[2*Q];Q++}this.textWidth.push(H.length?.5*H[2*Q-2]+H[2*Q-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:j,type:"uint8",usage:"stream"}),this.sizeBuffer({data:H,type:"float",usage:"stream"}),t.freeUint8(j),t.freeFloat(H),f.length&&this.font.forEach(function(de,Se){var _e=b.fontAtlas[Se],we=_e.step,Ae=Math.floor(y.maxAtlasSize/we),Oe=Math.min(Ae,_e.chars.length),ze=Math.ceil(_e.chars.length/Oe),pe=x(Oe*we),be=x(ze*we);_e.width=pe,_e.height=be,_e.rows=ze,_e.cols=Oe,_e.em&&_e.texture({data:s({canvas:y.atlasCanvas,font:_e.fontString,chars:_e.chars,shape:[pe,be],step:[we,we]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function(de,Se){var _e=Array.isArray(b.align)?b.align.length>1?b.align[Se]:b.align[0]:b.align;if(typeof _e=="number")return _e;switch(_e){case"right":case"end":return-de;case"center":case"centre":case"middle":return .5*-de}return 0})),this.baseline==null&&m.baseline==null&&(m.baseline=0),m.baseline!=null&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(de,Se){var _e=(b.font[Se]||b.font[0]).metrics,we=0;return we+=.5*_e.bottom,-1*(we+=typeof de=="number"?de-_e.baseline:-_e[de])})),m.color!=null)if(m.color||(m.color="transparent"),typeof m.color!="string"&&isNaN(m.color)){var ve;if(typeof m.color[0]=="number"&&m.color.length>this.counts.length){var ye=m.color.length;ve=t.mallocUint8(ye);for(var me=(m.color.subarray||m.color.slice).bind(m.color),Me=0;Me<ye;Me+=4)ve.set(p(me(Me,Me+4),"uint8"),Me)}else{var Pe=m.color.length;ve=t.mallocUint8(4*Pe);for(var ge=0;ge<Pe;ge++)ve.set(p(m.color[ge]||0,"uint8"),4*ge)}this.color=ve}else this.color=p(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var oe=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(oe);for(var ie=0;ie<this.batch.length;ie++)this.batch[ie]={count:this.counts.length>1?this.counts[ie]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ie]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ie,4*ie+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ie]:this.opacity,baseline:this.baselineOffset[ie]!=null?this.baselineOffset[ie]:this.baselineOffset[0],align:this.align?this.alignOffset[ie]!=null?this.alignOffset[ie]:this.alignOffset[0]:0,atlas:this.fontAtlas[ie]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ie,2*ie+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},y.prototype.destroy=function(){},y.prototype.kerning=!0,y.prototype.position={constant:new Float32Array(2)},y.prototype.translate=null,y.prototype.scale=null,y.prototype.font=null,y.prototype.text="",y.prototype.positionOffset=[0,0],y.prototype.opacity=1,y.prototype.color=new Uint8Array([0,0,0,255]),y.prototype.alignOffset=[0,0],y.maxAtlasSize=1024,y.atlasCanvas=document.createElement("canvas"),y.atlasContext=y.atlasCanvas.getContext("2d",{alpha:!1}),y.baseFontSize=64,y.fonts={},ee.exports=y},55212:function(ee,R,e){var M=e(55616);function k(_){if(_.container)if(_.container==document.body)document.body.style.width||(_.canvas.width=_.width||_.pixelRatio*e.g.innerWidth),document.body.style.height||(_.canvas.height=_.height||_.pixelRatio*e.g.innerHeight);else{var p=_.container.getBoundingClientRect();_.canvas.width=_.width||p.right-p.left,_.canvas.height=_.height||p.bottom-p.top}}function o(_){return typeof _.getContext=="function"&&"width"in _&&"height"in _}function T(){var _=document.createElement("canvas");return _.style.position="absolute",_.style.top=0,_.style.left=0,_}ee.exports=function(_){var p;if(_?typeof _=="string"&&(_={container:_}):_={},(_=o(_)||typeof(p=_).nodeName=="string"&&typeof p.appendChild=="function"&&typeof p.getBoundingClientRect=="function"?{container:_}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(_)?{gl:_}:M(_,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(_.pixelRatio=e.g.pixelRatio||1),_.gl)return _.gl;if(_.canvas&&(_.container=_.canvas.parentNode),_.container){if(typeof _.container=="string"){var s=document.querySelector(_.container);if(!s)throw Error("Element "+_.container+" is not found");_.container=s}o(_.container)?(_.canvas=_.container,_.container=_.canvas.parentNode):_.canvas||(_.canvas=T(),_.container.appendChild(_.canvas),k(_))}else if(!_.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");_.container=document.body||document.documentElement,_.canvas=T(),_.container.appendChild(_.canvas),k(_)}return _.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{_.gl=_.canvas.getContext(t,_.attrs)}catch{}return _.gl}),_.gl}},26444:function(ee){ee.exports=function(R){typeof R=="string"&&(R=[R]);for(var e=[].slice.call(arguments,1),M=[],k=0;k<R.length-1;k++)M.push(R[k],e[k]||"");return M.push(R[k]),M.join("")}},2304:function(ee,R,e){var M=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}ee.exports=M},52264:function(ee,R,e){var M,k=e(24200);M=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,ee.exports=M},89184:function(ee,R,e){var M=e(24200);ee.exports=M&&function(){var k=!1;try{var o=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{k=!1}return k}()},39640:function(ee,R,e){var M=e(53664)("%Object.defineProperty%",!0),k=function(){if(M)try{return M({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return M([],"length",{value:1}).length!==1}catch{return!0}},ee.exports=k},69572:function(ee){var R={foo:{}},e=Object;ee.exports=function(){return{__proto__:R}.foo===R.foo&&!({__proto__:null}instanceof e)}},71080:function(ee,R,e){var M=typeof Symbol<"u"&&Symbol,k=e(89320);ee.exports=function(){return typeof M=="function"&&typeof Symbol=="function"&&typeof M("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},89320:function(ee){ee.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var R={},e=Symbol("test"),M=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(M)!=="[object Symbol]")return!1;for(e in R[e]=42,R)return!1;if(typeof Object.keys=="function"&&Object.keys(R).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(R).length!==0)return!1;var k=Object.getOwnPropertySymbols(R);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(R,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(R,e);if(o.value!==42||o.enumerable!==!0)return!1}return!0}},46672:function(ee,R,e){var M=e(89320);ee.exports=function(){return M()&&!!Symbol.toStringTag}},92064:function(ee,R,e){var M=Function.prototype.call,k=Object.prototype.hasOwnProperty,o=e(8844);ee.exports=o.call(M,k)},35984:function(ee,R){R.read=function(e,M,k,o,T){var _,p,s=8*T-o-1,t=(1<<s)-1,i=t>>1,r=-7,n=k?T-1:0,a=k?-1:1,l=e[M+n];for(n+=a,_=l&(1<<-r)-1,l>>=-r,r+=s;r>0;_=256*_+e[M+n],n+=a,r-=8);for(p=_&(1<<-r)-1,_>>=-r,r+=o;r>0;p=256*p+e[M+n],n+=a,r-=8);if(_===0)_=1-i;else{if(_===t)return p?NaN:1/0*(l?-1:1);p+=Math.pow(2,o),_-=i}return(l?-1:1)*p*Math.pow(2,_-o)},R.write=function(e,M,k,o,T,_){var p,s,t,i=8*_-T-1,r=(1<<i)-1,n=r>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=o?0:_-1,u=o?1:-1,h=M<0||M===0&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(s=isNaN(M)?1:0,p=r):(p=Math.floor(Math.log(M)/Math.LN2),M*(t=Math.pow(2,-p))<1&&(p--,t*=2),(M+=p+n>=1?a/t:a*Math.pow(2,1-n))*t>=2&&(p++,t/=2),p+n>=r?(s=0,p=r):p+n>=1?(s=(M*t-1)*Math.pow(2,T),p+=n):(s=M*Math.pow(2,n-1)*Math.pow(2,T),p=0));T>=8;e[k+l]=255&s,l+=u,s/=256,T-=8);for(p=p<<T|s,i+=T;i>0;e[k+l]=255&p,l+=u,p/=256,i-=8);e[k+l-u]|=128*h}},6768:function(ee){typeof Object.create=="function"?ee.exports=function(R,e){e&&(R.super_=e,R.prototype=Object.create(e.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}))}:ee.exports=function(R,e){if(e){R.super_=e;var M=function(){};M.prototype=e.prototype,R.prototype=new M,R.prototype.constructor=R}}},91148:function(ee,R,e){var M=e(46672)(),k=e(99676)("Object.prototype.toString"),o=function(p){return!(M&&p&&typeof p=="object"&&Symbol.toStringTag in p)&&k(p)==="[object Arguments]"},T=function(p){return!!o(p)||p!==null&&typeof p=="object"&&typeof p.length=="number"&&p.length>=0&&k(p)!=="[object Array]"&&k(p.callee)==="[object Function]"},_=function(){return o(arguments)}();o.isLegacyArguments=T,ee.exports=_?o:T},24200:function(ee){ee.exports=!0},90720:function(ee){var R,e,M=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{R=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,R)}catch(n){n!==e&&(k=null)}else k=null;var o=/^\s*class\b/,T=function(n){try{var a=M.call(n);return o.test(a)}catch{return!1}},_=function(n){try{return!T(n)&&(M.call(n),!0)}catch{return!1}},p=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var r=document.all;p.call(r)===p.call(document.all)&&(i=function(n){if((t||!n)&&(n===void 0||typeof n=="object"))try{var a=p.call(n);return(a==="[object HTMLAllCollection]"||a==="[object HTML document.all class]"||a==="[object HTMLCollection]"||a==="[object Object]")&&n("")==null}catch{}return!1})}ee.exports=k?function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{k(n,null,R)}catch(a){if(a!==e)return!1}return!T(n)&&_(n)}:function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(s)return _(n);if(T(n))return!1;var a=p.call(n);return!(a!=="[object Function]"&&a!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(a))&&_(n)}},84420:function(ee,R,e){var M,k=Object.prototype.toString,o=Function.prototype.toString,T=/^\s*(?:function)?\*/,_=e(46672)(),p=Object.getPrototypeOf;ee.exports=function(s){if(typeof s!="function")return!1;if(T.test(o.call(s)))return!0;if(!_)return k.call(s)==="[object GeneratorFunction]";if(!p)return!1;if(M===void 0){var t=function(){if(!_)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!t&&p(t)}return p(s)===M}},96604:function(ee){ee.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(ee){ee.exports=function(R){return R!=R}},1560:function(ee,R,e){var M=e(57916),k=e(81288),o=e(85992),T=e(57740),_=e(59736),p=M(T(),Number);k(p,{getPolyfill:T,implementation:o,shim:_}),ee.exports=p},57740:function(ee,R,e){var M=e(85992);ee.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},59736:function(ee,R,e){var M=e(81288),k=e(57740);ee.exports=function(){var o=k();return M(Number,{isNaN:o},{isNaN:function(){return Number.isNaN!==o}}),o}},18400:function(ee){ee.exports=function(R){var e=typeof R;return R!==null&&(e==="object"||e==="function")}},58908:function(ee){var R=Object.prototype.toString;ee.exports=function(e){var M;return R.call(e)==="[object Object]"&&((M=Object.getPrototypeOf(e))===null||M===Object.getPrototypeOf({}))}},94576:function(ee){ee.exports=function(R){for(var e,M=R.length,k=0;k<M;k++)if(((e=R.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(ee){ee.exports=function(R){return typeof R=="string"&&(R=R.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(R)&&/[\dz]$/i.test(R)&&R.length>4))}},7728:function(ee,R,e){var M=e(46492),k=e(63436),o=e(99676),T=o("Object.prototype.toString"),_=e(46672)(),p=e(2304),s=typeof globalThis>"u"?e.g:globalThis,t=k(),i=o("Array.prototype.indexOf",!0)||function(l,u){for(var h=0;h<l.length;h+=1)if(l[h]===u)return h;return-1},r=o("String.prototype.slice"),n={},a=Object.getPrototypeOf;_&&p&&a&&M(t,function(l){var u=new s[l];if(Symbol.toStringTag in u){var h=a(u),c=p(h,Symbol.toStringTag);if(!c){var x=a(h);c=p(x,Symbol.toStringTag)}n[l]=c.get}}),ee.exports=function(l){if(!l||typeof l!="object")return!1;if(!_||!(Symbol.toStringTag in l)){var u=r(T(l),8,-1);return i(t,u)>-1}return!!p&&function(h){var c=!1;return M(n,function(x,d){if(!c)try{c=x.call(h)===d}catch{}}),c}(l)}},76244:function(ee){ee.exports=Math.log2||function(R){return Math.log(R)*Math.LOG2E}},62644:function(ee,R,e){ee.exports=function(k,o){o||(o=k,k=window);var T=0,_=0,p=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(v){var g=!1;return"altKey"in v&&(g=g||v.altKey!==s.alt,s.alt=!!v.altKey),"shiftKey"in v&&(g=g||v.shiftKey!==s.shift,s.shift=!!v.shiftKey),"ctrlKey"in v&&(g=g||v.ctrlKey!==s.control,s.control=!!v.ctrlKey),"metaKey"in v&&(g=g||v.metaKey!==s.meta,s.meta=!!v.metaKey),g}function r(v,g){var y=M.x(g),m=M.y(g);"buttons"in g&&(v=0|g.buttons),(v!==T||y!==_||m!==p||i(g))&&(T=0|v,_=y||0,p=m||0,o&&o(T,_,p,s))}function n(v){r(0,v)}function a(){(T||_||p||s.shift||s.alt||s.meta||s.control)&&(_=p=0,T=0,s.shift=s.alt=s.control=s.meta=!1,o&&o(0,0,0,s))}function l(v){i(v)&&o&&o(T,_,p,s)}function u(v){M.buttons(v)===0?r(0,v):r(T,v)}function h(v){r(T|M.buttons(v),v)}function c(v){r(T&~M.buttons(v),v)}function x(){t||(t=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",h),k.addEventListener("mouseup",c),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",a),k.addEventListener("keyup",l),k.addEventListener("keydown",l),k.addEventListener("keypress",l),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}x();var d={element:k};return Object.defineProperties(d,{enabled:{get:function(){return t},set:function(v){v?x():t&&(t=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",h),k.removeEventListener("mouseup",c),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",a),k.removeEventListener("keyup",l),k.removeEventListener("keydown",l),k.removeEventListener("keypress",l),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return _},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),d};var M=e(93784)},29128:function(ee){var R={left:0,top:0};ee.exports=function(e,M,k){M=M||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var o,T=e.clientX||0,_=e.clientY||0,p=(o=M)===window||o===document||o===document.body?R:o.getBoundingClientRect();return k[0]=T-p.left,k[1]=_-p.top,k}},93784:function(ee,R){function e(M){return M.target||M.srcElement||window}R.buttons=function(M){if(typeof M=="object"){if("buttons"in M)return M.buttons;if("which"in M){if((k=M.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in M){var k;if((k=M.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},R.element=e,R.x=function(M){if(typeof M=="object"){if("offsetX"in M)return M.offsetX;var k=e(M).getBoundingClientRect();return M.clientX-k.left}return 0},R.y=function(M){if(typeof M=="object"){if("offsetY"in M)return M.offsetY;var k=e(M).getBoundingClientRect();return M.clientY-k.top}return 0}},97264:function(ee,R,e){var M=e(23464);ee.exports=function(k,o,T){typeof k=="function"&&(T=!!o,o=k,k=window);var _=M("ex",k),p=function(s){T&&s.preventDefault();var t=s.deltaX||0,i=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=_;break;case 2:n=window.innerHeight}if(i*=n,r*=n,(t*=n)||i||r)return o(t,i,r,s)};return k.addEventListener("wheel",p),p}},88324:function(ee,R,e){var M;(function(k,o,T){o[k]=o[k]||function(){var _,p,s,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(y){return setImmediate(y)}:setTimeout;try{Object.defineProperty({},"x",{}),_=function(y,m,b,f){return Object.defineProperty(y,m,{value:b,writable:!0,configurable:f!==!1})}}catch{_=function(m,b,f){return m[b]=f,m}}function r(y,m){s.add(y,m),p||(p=i(s.drain))}function n(y){var m,b=typeof y;return y==null||b!="object"&&b!="function"||(m=y.then),typeof m=="function"&&m}function a(){for(var y=0;y<this.chain.length;y++)l(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function l(y,m,b){var f,S;try{m===!1?b.reject(y.msg):(f=m===!0?y.msg:m.call(void 0,y.msg))===b.promise?b.reject(TypeError("Promise-chain cycle")):(S=n(f))?S.call(f,b.resolve,b.reject):b.resolve(f)}catch(w){b.reject(w)}}function u(y){var m,b=this;if(!b.triggered){b.triggered=!0,b.def&&(b=b.def);try{(m=n(y))?r(function(){var f=new x(b);try{m.call(y,function(){u.apply(f,arguments)},function(){h.apply(f,arguments)})}catch(S){h.call(f,S)}}):(b.msg=y,b.state=1,b.chain.length>0&&r(a,b))}catch(f){h.call(new x(b),f)}}}function h(y){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=y,m.state=2,m.chain.length>0&&r(a,m))}function c(y,m,b,f){for(var S=0;S<m.length;S++)(function(w){y.resolve(m[w]).then(function(E){b(w,E)},f)})(S)}function x(y){this.def=y,this.triggered=!1}function d(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function v(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new d(this);this.then=function(b,f){var S={success:typeof b!="function"||b,failure:typeof f=="function"&&f};return S.promise=new this.constructor(function(w,E){if(typeof w!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=w,S.reject=E}),m.chain.push(S),m.state!==0&&r(a,m),S.promise},this.catch=function(b){return this.then(void 0,b)};try{y.call(void 0,function(b){u.call(m,b)},function(b){h.call(m,b)})}catch(b){h.call(m,b)}}s=function(){var y,m,b;function f(S,w){this.fn=S,this.self=w,this.next=void 0}return{add:function(S,w){b=new f(S,w),m?m.next=b:y=b,m=b,b=void 0},drain:function(){var S=y;for(y=m=p=void 0;S;)S.fn.call(S.self),S=S.next}}}();var g=_({},"constructor",v,!1);return v.prototype=g,_(g,"__NPO__",0,!1),_(v,"resolve",function(y){return y&&typeof y=="object"&&y.__NPO__===1?y:new this(function(m,b){if(typeof m!="function"||typeof b!="function")throw TypeError("Not a function");m(y)})}),_(v,"reject",function(y){return new this(function(m,b){if(typeof m!="function"||typeof b!="function")throw TypeError("Not a function");b(y)})}),_(v,"all",function(y){var m=this;return t.call(y)!="[object Array]"?m.reject(TypeError("Not an array")):y.length===0?m.resolve([]):new m(function(b,f){if(typeof b!="function"||typeof f!="function")throw TypeError("Not a function");var S=y.length,w=Array(S),E=0;c(m,y,function(O,C){w[O]=C,++E===S&&b(w)},f)})}),_(v,"race",function(y){var m=this;return t.call(y)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(b,f){if(typeof b!="function"||typeof f!="function")throw TypeError("Not a function");c(m,y,function(S,w){b(w)},f)})}),v}(),ee.exports?ee.exports=o[k]:(M=(function(){return o[k]}).call(R,e,R,ee))===void 0||(ee.exports=M)})("Promise",e.g!==void 0?e.g:this)},48816:function(ee){var R=Math.PI,e=_(120);function M(p,s,t,i){return["C",p,s,t,i,t,i]}function k(p,s,t,i,r,n){return["C",p/3+.6666666666666666*t,s/3+.6666666666666666*i,r/3+.6666666666666666*t,n/3+.6666666666666666*i,r,n]}function o(p,s,t,i,r,n,a,l,u,h){if(h)S=h[0],w=h[1],b=h[2],f=h[3];else{var c=T(p,s,-r);p=c.x,s=c.y;var x=(p-(l=(c=T(l,u,-r)).x))/2,d=(s-(u=c.y))/2,v=x*x/(t*t)+d*d/(i*i);v>1&&(t*=v=Math.sqrt(v),i*=v);var g=t*t,y=i*i,m=(n==a?-1:1)*Math.sqrt(Math.abs((g*y-g*d*d-y*x*x)/(g*d*d+y*x*x)));m==1/0&&(m=1);var b=m*t*d/i+(p+l)/2,f=m*-i*x/t+(s+u)/2,S=Math.asin(((s-f)/i).toFixed(9)),w=Math.asin(((u-f)/i).toFixed(9));(S=p<b?R-S:S)<0&&(S=2*R+S),(w=l<b?R-w:w)<0&&(w=2*R+w),a&&S>w&&(S-=2*R),!a&&w>S&&(w-=2*R)}if(Math.abs(w-S)>e){var E=w,O=l,C=u;w=S+e*(a&&w>S?1:-1);var P=o(l=b+t*Math.cos(w),u=f+i*Math.sin(w),t,i,r,0,a,O,C,[w,E,b,f])}var D=Math.tan((w-S)/4),U=4/3*t*D,I=4/3*i*D,N=[2*p-(p+U*Math.sin(S)),2*s-(s-I*Math.cos(S)),l+U*Math.sin(w),u-I*Math.cos(w),l,u];if(h)return N;P&&(N=N.concat(P));for(var W=0;W<N.length;){var F=T(N[W],N[W+1],r);N[W++]=F.x,N[W++]=F.y}return N}function T(p,s,t){return{x:p*Math.cos(t)-s*Math.sin(t),y:p*Math.sin(t)+s*Math.cos(t)}}function _(p){return p*(R/180)}ee.exports=function(p){for(var s,t=[],i=0,r=0,n=0,a=0,l=null,u=null,h=0,c=0,x=0,d=p.length;x<d;x++){var v=p[x],g=v[0];switch(g){case"M":n=v[1],a=v[2];break;case"A":(v=o(h,c,v[1],v[2],_(v[3]),v[4],v[5],v[6],v[7])).unshift("C"),v.length>7&&(t.push(v.splice(0,7)),v.unshift("C"));break;case"S":var y=h,m=c;s!="C"&&s!="S"||(y+=y-i,m+=m-r),v=["C",y,m,v[1],v[2],v[3],v[4]];break;case"T":s=="Q"||s=="T"?(l=2*h-l,u=2*c-u):(l=h,u=c),v=k(h,c,l,u,v[1],v[2]);break;case"Q":l=v[1],u=v[2],v=k(h,c,v[1],v[2],v[3],v[4]);break;case"L":v=M(h,c,v[1],v[2]);break;case"H":v=M(h,c,v[1],c);break;case"V":v=M(h,c,h,v[1]);break;case"Z":v=M(h,c,n,a)}s=g,h=v[v.length-2],c=v[v.length-1],v.length>4?(i=v[v.length-4],r=v[v.length-3]):(i=h,r=c),t.push(v)}return t}},50896:function(ee){var R=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;ee.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var o={},T=0;T<10;T++)o["_"+String.fromCharCode(T)]=T;if(Object.getOwnPropertyNames(o).map(function(p){return o[p]}).join("")!=="0123456789")return!1;var _={};return"abcdefghijklmnopqrst".split("").forEach(function(p){_[p]=p}),Object.keys(Object.assign({},_)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(k,o){for(var T,_,p=function(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(k),s=1;s<arguments.length;s++){for(var t in T=Object(arguments[s]))e.call(T,t)&&(p[t]=T[t]);if(R){_=R(T);for(var i=0;i<_.length;i++)M.call(T,_[i])&&(p[_[i]]=T[_[i]])}}return p}},76835:function(ee){var R=function(e){return e!=e};ee.exports=function(e,M){return e===0&&M===0?1/e==1/M:e===M||!(!R(e)||!R(M))}},39896:function(ee,R,e){var M=e(81288),k=e(57916),o=e(76835),T=e(66148),_=e(16408),p=k(T(),Object);M(p,{getPolyfill:T,implementation:o,shim:_}),ee.exports=p},66148:function(ee,R,e){var M=e(76835);ee.exports=function(){return typeof Object.is=="function"?Object.is:M}},16408:function(ee,R,e){var M=e(66148),k=e(81288);ee.exports=function(){var o=M();return k(Object,{is:o},{is:function(){return Object.is!==o}}),o}},32764:function(ee,R,e){var M;if(!Object.keys){var k=Object.prototype.hasOwnProperty,o=Object.prototype.toString,T=e(97344),_=Object.prototype.propertyIsEnumerable,p=!_.call({toString:null},"toString"),s=_.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(a){var l=a.constructor;return l&&l.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&k.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{i(window[a])}catch{return!0}}catch{return!0}return!1}();M=function(a){var l=a!==null&&typeof a=="object",u=o.call(a)==="[object Function]",h=T(a),c=l&&o.call(a)==="[object String]",x=[];if(!l&&!u&&!h)throw new TypeError("Object.keys called on a non-object");var d=s&&u;if(c&&a.length>0&&!k.call(a,0))for(var v=0;v<a.length;++v)x.push(String(v));if(h&&a.length>0)for(var g=0;g<a.length;++g)x.push(String(g));else for(var y in a)d&&y==="prototype"||!k.call(a,y)||x.push(String(y));if(p)for(var m=function(f){if(typeof window>"u"||!n)return i(f);try{return i(f)}catch{return!1}}(a),b=0;b<t.length;++b)m&&t[b]==="constructor"||!k.call(a,t[b])||x.push(t[b]);return x}}ee.exports=M},41820:function(ee,R,e){var M=Array.prototype.slice,k=e(97344),o=Object.keys,T=o?function(p){return o(p)}:e(32764),_=Object.keys;T.shim=function(){if(Object.keys){var p=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);p||(Object.keys=function(s){return k(s)?_(M.call(s)):_(s)})}else Object.keys=T;return Object.keys||T},ee.exports=T},97344:function(ee){var R=Object.prototype.toString;ee.exports=function(e){var M=R.call(e),k=M==="[object Arguments]";return k||(k=M!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&R.call(e.callee)==="[object Function]"),k}},32868:function(ee){function R(k,o){if(typeof k!="string")return[k];var T=[k];typeof o=="string"||Array.isArray(o)?o={brackets:o}:o||(o={});var _=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],p=o.escape||"___",s=!!o.flat;_.forEach(function(i){var r=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),n=[];function a(l,u,h){var c=T.push(l.slice(i[0].length,-i[1].length))-1;return n.push(c),p+c+p}T.forEach(function(l,u){for(var h,c=0;l!=h;)if(h=l,l=l.replace(r,a),c++>1e4)throw Error("References have circular dependency. Please, check them.");T[u]=l}),n=n.reverse(),T=T.map(function(l){return n.forEach(function(u){l=l.replace(new RegExp("(\\"+p+u+"\\"+p+")","g"),i[0]+"$1"+i[1])}),l})});var t=new RegExp("\\"+p+"([0-9]+)\\"+p);return s?T:function i(r,n,a){for(var l,u=[],h=0;l=t.exec(r);){if(h++>1e4)throw Error("Circular references in parenthesis");u.push(r.slice(0,l.index)),u.push(i(n[l[1]],n)),r=r.slice(l.index+l[0].length)}return u.push(r),u}(T[0],T)}function e(k,o){if(o&&o.flat){var T,_=o&&o.escape||"___",p=k[0];if(!p)return"";for(var s=new RegExp("\\"+_+"([0-9]+)\\"+_),t=0;p!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=p,p=p.replace(s,i)}return p}return k.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function i(r,n){if(k[n]==null)throw Error("Reference "+n+"is undefined");return k[n]}}function M(k,o){return Array.isArray(k)?e(k,o):R(k,o)}M.parse=R,M.stringify=e,ee.exports=M},51160:function(ee,R,e){var M=e(55616);ee.exports=function(k){var o;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?o=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(o={x:(k=M(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?o.width=k.right-o.x:o.width=0:o.width=k.width,k.height==null?k.bottom?o.height=k.bottom-o.y:o.height=0:o.height=k.height),o}},21984:function(ee){ee.exports=function(k){var o=[];return k.replace(e,function(T,_,p){var s=_.toLowerCase();for(p=function(t){var i=t.match(M);return i?i.map(Number):[]}(p),s=="m"&&p.length>2&&(o.push([_].concat(p.splice(0,2))),s="l",_=_=="m"?"l":"L");;){if(p.length==R[s])return p.unshift(_),o.push(p);if(p.length<R[s])throw new Error("malformed path data");o.push([_].concat(p.splice(0,R[s])))}}),o};var R={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(ee){ee.exports=function(R,e){e||(e=[0,""]),R=String(R);var M=parseFloat(R,10);return e[0]=M,e[1]=R.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(ee,R,e){var M=e(4168);(function(){var k,o,T,_,p,s;typeof performance<"u"&&performance!==null&&performance.now?ee.exports=function(){return performance.now()}:M!=null&&M.hrtime?(ee.exports=function(){return(k()-p)/1e6},o=M.hrtime,_=(k=function(){var t;return 1e9*(t=o())[0]+t[1]})(),s=1e9*M.uptime(),p=_-s):Date.now?(ee.exports=function(){return Date.now()-T},T=Date.now()):(ee.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},55616:function(ee){ee.exports=function(M,k,o){var T,_,p={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var s={};for(_=0;_<k.length;_++)s[k[_]]=!0;k=s}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var i=k[T];if(Array.isArray(i))for(_=0;_<i.length;_++){var r=i[_];if(o&&(t[r]=!0),r in M){if(p[T]=M[r],o)for(var n=_;n<i.length;n++)t[i[n]]=!0;break}}else T in M&&(k[T]&&(p[T]=M[T]),o&&(t[T]=!0))}if(o)for(T in M)t[T]||(p[T]=M[T]);return p};var R={};function e(M){return R[M]?R[M]:(typeof M=="string"&&(M=R[M]=M.split(/\s*,\s*|\s+/)),M)}},61456:function(ee){ee.exports=function(R,e,M,k){var o=R[0],T=R[1],_=!1;M===void 0&&(M=0),k===void 0&&(k=e.length);for(var p=k-M,s=0,t=p-1;s<p;t=s++){var i=e[s+M][0],r=e[s+M][1],n=e[t+M][0],a=e[t+M][1];r>T!=a>T&&o<(n-i)*(T-r)/(a-r)+i&&(_=!_)}return _}},14756:function(ee,R,e){var M,k=e(7688),o=e(28648),T=e(72200),_=e(11403),p=e(82368),s=e(17792),t=!1,i=o();function r(n,a,l){var u=M.segments(n),h=M.segments(a),c=l(M.combine(u,h));return M.polygon(c)}M={buildLog:function(n){return n===!0?t=k():n===!1&&(t=!1),t!==!1&&t.list},epsilon:function(n){return i.epsilon(n)},segments:function(n){var a=T(!0,i,t);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,i,t).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:p.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:p.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:p.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:p.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:p.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:_(n.segments,i,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(M,n)},polygonToGeoJSON:function(n){return s.fromPolygon(M,i,n)},union:function(n,a){return r(n,a,M.selectUnion)},intersect:function(n,a){return r(n,a,M.selectIntersect)},difference:function(n,a){return r(n,a,M.selectDifference)},differenceRev:function(n,a){return r(n,a,M.selectDifferenceRev)},xor:function(n,a){return r(n,a,M.selectXor)}},typeof window=="object"&&(window.PolyBool=M),ee.exports=M},7688:function(ee){ee.exports=function(){var R,e=0,M=!1;function k(o,T){return R.list.push({type:o,data:T?JSON.parse(JSON.stringify(T)):void 0}),R}return R={list:[],segmentId:function(){return e++},checkIntersection:function(o,T){return k("check",{seg1:o,seg2:T})},segmentChop:function(o,T){return k("div_seg",{seg:o,pt:T}),k("chop",{seg:o,pt:T})},statusRemove:function(o){return k("pop_seg",{seg:o})},segmentUpdate:function(o){return k("seg_update",{seg:o})},segmentNew:function(o,T){return k("new_seg",{seg:o,primary:T})},segmentRemove:function(o){return k("rem_seg",{seg:o})},tempStatus:function(o,T,_){return k("temp_status",{seg:o,above:T,below:_})},rewind:function(o){return k("rewind",{seg:o})},status:function(o,T,_){return k("status",{seg:o,above:T,below:_})},vert:function(o){return o===M?R:(M=o,k("vert",{x:o}))},log:function(o){return typeof o!="string"&&(o=JSON.stringify(o,!1,"  ")),k("log",{txt:o})},reset:function(){return k("reset")},selected:function(o){return k("selected",{segs:o})},chainStart:function(o){return k("chain_start",{seg:o})},chainRemoveHead:function(o,T){return k("chain_rem_head",{index:o,pt:T})},chainRemoveTail:function(o,T){return k("chain_rem_tail",{index:o,pt:T})},chainNew:function(o,T){return k("chain_new",{pt1:o,pt2:T})},chainMatch:function(o){return k("chain_match",{index:o})},chainClose:function(o){return k("chain_close",{index:o})},chainAddHead:function(o,T){return k("chain_add_head",{index:o,pt:T})},chainAddTail:function(o,T){return k("chain_add_tail",{index:o,pt:T})},chainConnect:function(o,T){return k("chain_con",{index1:o,index2:T})},chainReverse:function(o){return k("chain_rev",{index:o})},chainJoin:function(o,T){return k("chain_join",{index1:o,index2:T})},done:function(){return k("done")}}}},28648:function(ee){ee.exports=function(R){typeof R!="number"&&(R=1e-10);var e={epsilon:function(M){return typeof M=="number"&&(R=M),R},pointAboveOrOnLine:function(M,k,o){var T=k[0],_=k[1],p=o[0],s=o[1],t=M[0];return(p-T)*(M[1]-_)-(s-_)*(t-T)>=-R},pointBetween:function(M,k,o){var T=M[1]-k[1],_=o[0]-k[0],p=M[0]-k[0],s=o[1]-k[1],t=p*_+T*s;return!(t<R||t-(_*_+s*s)>-R)},pointsSameX:function(M,k){return Math.abs(M[0]-k[0])<R},pointsSameY:function(M,k){return Math.abs(M[1]-k[1])<R},pointsSame:function(M,k){return e.pointsSameX(M,k)&&e.pointsSameY(M,k)},pointsCompare:function(M,k){return e.pointsSameX(M,k)?e.pointsSameY(M,k)?0:M[1]<k[1]?-1:1:M[0]<k[0]?-1:1},pointsCollinear:function(M,k,o){var T=M[0]-k[0],_=M[1]-k[1],p=k[0]-o[0],s=k[1]-o[1];return Math.abs(T*s-p*_)<R},linesIntersect:function(M,k,o,T){var _=k[0]-M[0],p=k[1]-M[1],s=T[0]-o[0],t=T[1]-o[1],i=_*t-p*s;if(Math.abs(i)<R)return!1;var r=M[0]-o[0],n=M[1]-o[1],a=(s*n-t*r)/i,l=(_*n-p*r)/i,u={alongA:0,alongB:0,pt:[M[0]+a*_,M[1]+a*p]};return u.alongA=a<=-R?-2:a<R?-1:a-1<=-R?0:a-1<R?1:2,u.alongB=l<=-R?-2:l<R?-1:l-1<=-R?0:l-1<R?1:2,u},pointInsideRegion:function(M,k){for(var o=M[0],T=M[1],_=k[k.length-1][0],p=k[k.length-1][1],s=!1,t=0;t<k.length;t++){var i=k[t][0],r=k[t][1];r-T>R!=p-T>R&&(_-i)*(T-r)/(p-r)+i-o>R&&(s=!s),_=i,p=r}return s}};return e}},17792:function(ee){var R={toPolygon:function(e,M){function k(_){if(_.length<=0)return e.segments({inverted:!1,regions:[]});function p(i){var r=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=p(_[0]),t=1;t<_.length;t++)s=e.selectDifference(e.combine(s,p(_[t])));return s}if(M.type==="Polygon")return e.polygon(k(M.coordinates));if(M.type==="MultiPolygon"){for(var o=e.segments({inverted:!1,regions:[]}),T=0;T<M.coordinates.length;T++)o=e.selectUnion(e.combine(o,k(M.coordinates[T])));return e.polygon(o)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,M,k){function o(l,u){return M.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],u)}function T(l){return{region:l,children:[]}}k=e.polygon(e.segments(k));var _=T(null);function p(l,u){for(var h=0;h<l.children.length;h++)if(o(u,(x=l.children[h]).region))return void p(x,u);var c=T(u);for(h=0;h<l.children.length;h++){var x;o((x=l.children[h]).region,u)&&(c.children.push(x),l.children.splice(h,1),h--)}l.children.push(c)}for(var s=0;s<k.regions.length;s++){var t=k.regions[s];t.length<3||p(_,t)}function i(l,u){for(var h=0,c=l[l.length-1][0],x=l[l.length-1][1],d=[],v=0;v<l.length;v++){var g=l[v][0],y=l[v][1];d.push([g,y]),h+=y*c-g*x,c=g,x=y}return h<0!==u&&d.reverse(),d.push([d[0][0],d[0][1]]),d}var r=[];function n(l){var u=[i(l.region,!1)];r.push(u);for(var h=0;h<l.children.length;h++)u.push(a(l.children[h]))}function a(l){for(var u=0;u<l.children.length;u++)n(l.children[u]);return i(l.region,!0)}for(s=0;s<_.children.length;s++)n(_.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};ee.exports=R},72200:function(ee,R,e){var M=e(48088);ee.exports=function(k,o,T){function _(n,a,l){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var p=M.create();function s(n,a){p.insertBefore(n,function(l){return u=n.isStart,h=n.pt,c=a,x=l.isStart,d=l.pt,v=l.other.pt,((g=o.pointsCompare(h,d))!==0?g:o.pointsSame(c,v)?0:u!==x?u?1:-1:o.pointAboveOrOnLine(c,x?d:v,x?v:d)?1:-1)<0;var u,h,c,x,d,v,g})}function t(n,a){var l=function(u,h){var c=M.node({isStart:!0,pt:u.start,seg:u,primary:h,other:null,status:null});return s(c,u.end),c}(n,a);return function(u,h,c){var x=M.node({isStart:!1,pt:h.end,seg:h,primary:c,other:u,status:null});u.other=x,s(x,u.pt)}(l,n,a),l}function i(n,a){var l=_(a,n.seg.end,n.seg);return function(u,h){T&&T.segmentChop(u.seg,h),u.other.remove(),u.seg.end=h,u.other.pt=h,s(u.other,u.pt)}(n,a),t(l,n.primary)}function r(n,a){var l=M.create();function u(E){return l.findTransition(function(O){var C,P,D,U,I,N;return C=E,P=O.ev,D=C.seg.start,U=C.seg.end,I=P.seg.start,N=P.seg.end,(o.pointsCollinear(D,I,N)?o.pointsCollinear(U,I,N)||o.pointAboveOrOnLine(U,I,N)?1:-1:o.pointAboveOrOnLine(D,I,N)?1:-1)>0})}function h(E,O){var C=E.seg,P=O.seg,D=C.start,U=C.end,I=P.start,N=P.end;T&&T.checkIntersection(C,P);var W=o.linesIntersect(D,U,I,N);if(W===!1){if(!o.pointsCollinear(D,U,I)||o.pointsSame(D,N)||o.pointsSame(U,I))return!1;var F=o.pointsSame(D,I),j=o.pointsSame(U,N);if(F&&j)return O;var H=!F&&o.pointBetween(D,I,N),te=!j&&o.pointBetween(U,I,N);if(F)return te?i(O,U):i(E,N),O;H&&(j||(te?i(O,U):i(E,N)),i(O,D))}else W.alongA===0&&(W.alongB===-1?i(E,I):W.alongB===0?i(E,W.pt):W.alongB===1&&i(E,N)),W.alongB===0&&(W.alongA===-1?i(O,D):W.alongA===0?i(O,W.pt):W.alongA===1&&i(O,U));return!1}for(var c=[];!p.isEmpty();){var x=p.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let E=function(){if(v){var O=h(x,v);if(O)return O}return!!g&&h(x,g)};var w=E;T&&T.segmentNew(x.seg,x.primary);var d=u(x),v=d.before?d.before.ev:null,g=d.after?d.after.ev:null;T&&T.tempStatus(x.seg,!!v&&v.seg,!!g&&g.seg);var y,m,b=E();if(b&&(k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(b.seg.myFill.above=!b.seg.myFill.above):b.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(b.seg),x.other.remove(),x.remove()),p.getHead()!==x){T&&T.rewind(x.seg);continue}k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=g?g.seg.myFill.above:n,x.seg.myFill.above=m?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(y=g?x.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:x.primary?a:n,x.seg.otherFill={above:y,below:y}),T&&T.status(x.seg,!!v&&v.seg,!!g&&g.seg),x.other.status=d.insert(M.node({ev:x}))}else{var f=x.status;if(f===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(f.prev)&&l.exists(f.next)&&h(f.prev.ev,f.next.ev),T&&T.statusRemove(f.ev.seg),f.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}c.push(x.seg)}p.getHead().remove()}return T&&T.done(),c}return k?{addRegion:function(n){for(var a,l,u,h=n[n.length-1],c=0;c<n.length;c++){a=h,h=n[c];var x=o.pointsCompare(a,h);x!==0&&t((l=x<0?a:h,u=x<0?h:a,{id:T?T.segmentId():-1,start:l,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,l,u){return n.forEach(function(h){t(_(h.start,h.end,h),!0)}),l.forEach(function(h){t(_(h.start,h.end,h),!1)}),r(a,u)}}}},48088:function(ee){ee.exports={create:function(){var R={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==R.root},isEmpty:function(){return R.root.next===null},getHead:function(){return R.root.next},insertBefore:function(e,M){for(var k=R.root,o=R.root.next;o!==null;){if(M(o))return e.prev=o.prev,e.next=o,o.prev.next=e,void(o.prev=e);k=o,o=o.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var M=R.root,k=R.root.next;k!==null&&!e(k);)M=k,k=k.next;return{before:M===R.root?null:M,after:k,insert:function(o){return o.prev=M,o.next=k,M.next=o,k!==null&&(k.prev=o),o}}}};return R},node:function(R){return R.prev=null,R.next=null,R.remove=function(){R.prev.next=R.next,R.next&&(R.next.prev=R.prev),R.prev=null,R.next=null},R}}},11403:function(ee){ee.exports=function(R,e,M){var k=[],o=[];return R.forEach(function(T){var _=T.start,p=T.end;if(e.pointsSame(_,p))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=s,r=0;r<k.length;r++){var n=(c=k[r])[0],a=(c[1],c[c.length-1]);if(c[c.length-2],e.pointsSame(n,_)){if(f(r,!0,!0))break}else if(e.pointsSame(n,p)){if(f(r,!0,!1))break}else if(e.pointsSame(a,_)){if(f(r,!1,!0))break}else if(e.pointsSame(a,p)&&f(r,!1,!1))break}if(i===s)return k.push([_,p]),void(M&&M.chainNew(_,p));if(i===t){M&&M.chainMatch(s.index);var l=s.index,u=s.matches_pt1?p:_,h=s.matches_head,c=k[l],x=h?c[0]:c[c.length-1],d=h?c[1]:c[c.length-2],v=h?c[c.length-1]:c[0],g=h?c[c.length-2]:c[1];return e.pointsCollinear(d,x,u)&&(h?(M&&M.chainRemoveHead(s.index,u),c.shift()):(M&&M.chainRemoveTail(s.index,u),c.pop()),x=d),e.pointsSame(v,u)?(k.splice(l,1),e.pointsCollinear(g,v,x)&&(h?(M&&M.chainRemoveTail(s.index,x),c.pop()):(M&&M.chainRemoveHead(s.index,x),c.shift())),M&&M.chainClose(s.index),void o.push(c)):void(h?(M&&M.chainAddHead(s.index,u),c.unshift(u)):(M&&M.chainAddTail(s.index,u),c.push(u)))}var y=s.index,m=t.index;M&&M.chainConnect(y,m);var b=k[y].length<k[m].length;s.matches_head?t.matches_head?b?(S(y),w(y,m)):(S(m),w(m,y)):w(m,y):t.matches_head?w(y,m):b?(S(y),w(m,y)):(S(m),w(y,m))}function f(E,O,C){return i.index=E,i.matches_head=O,i.matches_pt1=C,i===s?(i=t,!1):(i=null,!0)}function S(E){M&&M.chainReverse(E),k[E].reverse()}function w(E,O){var C=k[E],P=k[O],D=C[C.length-1],U=C[C.length-2],I=P[0],N=P[1];e.pointsCollinear(U,D,I)&&(M&&M.chainRemoveTail(E,D),C.pop(),D=U),e.pointsCollinear(D,I,N)&&(M&&M.chainRemoveHead(O,I),P.shift()),M&&M.chainJoin(E,O),k[E]=C.concat(P),k.splice(O,1)}}),o}},82368:function(ee){function R(M,k,o){var T=[];return M.forEach(function(_){var p=(_.myFill.above?8:0)+(_.myFill.below?4:0)+(_.otherFill&&_.otherFill.above?2:0)+(_.otherFill&&_.otherFill.below?1:0);k[p]!==0&&T.push({id:o?o.segmentId():-1,start:_.start,end:_.end,myFill:{above:k[p]===1,below:k[p]===2},otherFill:null})}),o&&o.selected(T),T}var e={union:function(M,k){return R(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(M,k){return R(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(M,k){return R(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(M,k){return R(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(M,k){return R(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};ee.exports=e},9696:function(ee,R,e){var M=e(29936).Transform,k=e(55619);function o(){M.call(this,{readableObjectMode:!0})}function T(_,p,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=_,p&&(this.code=p),s&&(this.statusCode=s)}o.prototype=Object.create(M.prototype),o.prototype.constructor=o,k(o.prototype),R.gS=function(_,p,s){for(var t=p,i=0;i<s.length;)if(_[t++]!==s[i++])return!1;return!0},R.wR=function(_,p){var s=[],t=0;if(p&&p==="hex")for(;t<_.length;)s.push(parseInt(_.slice(t,t+2),16)),t+=2;else for(;t<_.length;t++)s.push(255&_.charCodeAt(t));return s},R.Bz=function(_,p){return _[p]|_[p+1]<<8},R.eW=function(_,p){return _[p+1]|_[p]<<8},R.st=function(_,p){return _[p]|_[p+1]<<8|_[p+2]<<16|16777216*_[p+3]},R.eI=function(_,p){return _[p+3]|_[p+2]<<8|_[p+1]<<16|16777216*_[p]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},11688:function(ee){function R(k,o){var T=new Error(k);return T.code=o,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function M(k,o,T){this.input=k.subarray(o,T),this.start=o;var _=String.fromCharCode.apply(null,this.input.subarray(0,4));if(_!=="II*\0"&&_!=="MM\0*")throw R("invalid TIFF signature","EBADDATA");this.big_endian=_[0]==="M"}M.prototype.each=function(k){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},M.prototype.read_uint16=function(k){var o=this.input;if(k+2>o.length)throw R("unexpected EOF","EBADDATA");return this.big_endian?256*o[k]+o[k+1]:o[k]+256*o[k+1]},M.prototype.read_uint32=function(k){var o=this.input;if(k+4>o.length)throw R("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[k]+65536*o[k+1]+256*o[k+2]+o[k+3]:o[k]+256*o[k+1]+65536*o[k+2]+16777216*o[k+3]},M.prototype.is_subifd_link=function(k,o){return k===0&&o===34665||k===0&&o===34853||k===34665&&o===40965},M.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(k,o){var T;switch(k){case 1:case 2:return this.input[o];case 6:return(T=this.input[o])|33554430*(128&T);case 3:return this.read_uint16(o);case 8:return(T=this.read_uint16(o))|131070*(32768&T);case 4:return this.read_uint32(o);case 9:return 0|this.read_uint32(o);default:return null}},M.prototype.scan_ifd=function(k,o,T){var _=this.read_uint16(o);o+=2;for(var p=0;p<_;p++){var s=this.read_uint16(o),t=this.read_uint16(o+2),i=this.read_uint32(o+4),r=this.exif_format_length(t),n=i*r,a=n<=4?o+8:this.read_uint32(o+8),l=!1;if(a+n>this.input.length)throw R("unexpected EOF","EBADDATA");for(var u=[],h=a,c=0;c<i;c++,h+=r){var x=this.exif_format_read(t,h);if(x===null){u=null;break}u.push(x)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:s,offset:u[0]}),l=!0),T({is_big_endian:this.big_endian,ifd:k,tag:s,format:t,count:i,entry_offset:o+this.start,data_length:n,data_offset:a+this.start,value:u,is_subifd_link:l})===!1)return void(this.aborted=!0);o+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},ee.exports.ExifParser=M,ee.exports.get_orientation=function(k){var o=0;try{return new M(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return o=T.value[0],!1}),o}catch{return-1}}},44600:function(ee,R,e){var M=e(9696).eW,k=e(9696).eI;function o(i,r){if(i.length<4+r)return null;var n=k(i,r);return i.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(r+4,r+8)),data:i.slice(r+8,r+n),end:r+n}}function T(i,r){for(var n=0;;){var a=o(i,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function _(i,r,n){for(var a=0,l=0;l<n;l++)a=256*a+(i[r+l]||0);return a}function p(i,r){for(var n=i[4]>>4&15,a=15&i[4],l=i[5]>>4&15,u=M(i,6),h=8,c=0;c<u;c++){var x=M(i,h),d=M(i,h+=2),v=_(i,h+=2,l),g=M(i,h+=l);if(h+=2,d===0&&g===1){var y=_(i,h,n),m=_(i,h+n,a);r.item_loc[x]={length:m,offset:y+v}}h+=g*(n+a)}}function s(i,r){for(var n=M(i,4),a=6,l=0;l<n;l++){var u=o(i,a);if(!u)break;if(u.boxtype==="infe"){for(var h=M(u.data,4),c="",x=8;x<u.data.length&&u.data[x];x++)c+=String.fromCharCode(u.data[x]);r.item_inf[c]=h}a=u.end}}function t(i,r){for(var n=0;;){var a=o(i,n);if(!a)break;a.boxtype==="ipco"&&T(a.data,r),n=a.end}}ee.exports.unbox=o,ee.exports.readSizeFromMeta=function(i){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,d){for(var v=4;;){var g=o(x,v);if(!g)break;g.boxtype==="iprp"&&t(g.data,d),g.boxtype==="iloc"&&p(g.data,d),g.boxtype==="iinf"&&s(g.data,d),v=g.end}}(i,r),r.sizes.length){var n,a,l,u=(a=(n=r.sizes).reduce(function(x,d){return x.width>d.width||x.width===d.width&&x.height>d.height?x:d}),l=n.reduce(function(x,d){return x.height>d.height||x.height===d.height&&x.width>d.width?x:d}),a.width>l.height||a.width===l.height&&a.height>l.width?a:l),h=1;r.transforms.forEach(function(x){var d={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},v={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(h=x.value===0?v[h]:d[h=d[h=v[h]]]),x.type==="irot")for(var g=0;g<x.value;g++)h=d[h]});var c=null;return r.item_inf.Exif&&(c=r.item_loc[r.item_inf.Exif]),{width:u.width,height:u.height,orientation:r.transforms.length?h:null,variants:r.sizes,exif_location:c}}},ee.exports.getMimeType=function(i){var r=String.fromCharCode.apply(null,i.slice(0,4)),n={};n[r]=!0;for(var a=8;a<i.length;a+=4)n[String.fromCharCode.apply(null,i.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=e(44600),_=e(11688),p=M("ftyp");ee.exports=function(s){if(k(s,4,p)){var t=T.unbox(s,0);if(t){var i=T.getMimeType(t.data);if(i){for(var r,n=t.end;;){var a=T.unbox(s,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){r=a.data;break}}if(r){var l=T.readSizeFromMeta(r);if(l){var u={width:l.width,height:l.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(u.variants=l.variants),l.orientation&&(u.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=s.length){var h=o(s,l.exif_location.offset),c=s.slice(l.exif_location.offset+h+4,l.exif_location.offset+l.exif_location.length),x=_.get_orientation(c);x>0&&(u.orientation=x)}return u}}}}}}},38728:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=M("BM");ee.exports=function(_){if(!(_.length<26)&&k(_,0,T))return{width:o(_,18),height:o(_,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=M("GIF87a"),_=M("GIF89a");ee.exports=function(p){if(!(p.length<10)&&(k(p,0,T)||k(p,0,_)))return{width:o(p,6),height:o(p,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(ee,R,e){var M=e(9696).Bz;ee.exports=function(k){var o=M(k,0),T=M(k,2),_=M(k,4);if(o===0&&T===1&&_){for(var p=[],s={width:0,height:0},t=0;t<_;t++){var i=k[6+16*t]||256,r=k[6+16*t+1]||256,n={width:i,height:r};p.push(n),(i>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:p,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(ee,R,e){var M=e(9696).eW,k=e(9696).wR,o=e(9696).gS,T=e(11688),_=k("Exif\0\0");ee.exports=function(p){if(!(p.length<2)&&p[0]===255&&p[1]===216&&p[2]===255)for(var s=2;;){for(;;){if(p.length-s<2)return;if(p[s++]===255)break}for(var t,i,r=p[s++];r===255;)r=p[s++];if(208<=r&&r<=217||r===1)t=0;else{if(!(192<=r&&r<=254)||p.length-s<2)return;t=M(p,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&t>=10&&o(p,s,_)&&(i=T.get_orientation(p.slice(s+6,s+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(p.length-s<t)return;var n={width:M(p,s+3),height:M(p,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(n.orientation=i),n}s+=t}}},37276:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=M(`PNG\r

`),_=M("IHDR");ee.exports=function(p){if(!(p.length<24)&&k(p,0,T)&&k(p,12,_))return{width:o(p,16),height:o(p,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=M("8BPS\0");ee.exports=function(_){if(!(_.length<22)&&k(_,0,T))return{width:o(_,18),height:o(_,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(ee){function R(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,o=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,_=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function p(s){return _.test(s)?s.match(_)[0]:"px"}ee.exports=function(s){if(function(v){var g,y=0,m=v.length;for(v[0]===239&&v[1]===187&&v[2]===191&&(y=3);y<m&&((g=v[y])===32||g===9||g===13||g===10);)y++;return y!==m&&v[y]===60}(s)){for(var t="",i=0;i<s.length;i++)t+=String.fromCharCode(s[i]);var r=(t.match(e)||[""])[0];if(M.test(r)){var n=function(v){var g=v.match(k),y=v.match(o),m=v.match(T);return{width:g&&(g[1]||g[2]),height:y&&(y[1]||y[2]),viewbox:m&&(m[1]||m[2])}}(r),a=parseFloat(n.width),l=parseFloat(n.height);if(n.width&&n.height)return!R(a)||!R(l)?void 0:{width:a,height:l,type:"svg",mime:"image/svg+xml",wUnits:p(n.width),hUnits:p(n.height)};var u=(n.viewbox||"").split(" "),h={width:u[2],height:u[3]},c=parseFloat(h.width),x=parseFloat(h.height);if(R(c)&&R(x)&&p(h.width)===p(h.height)){var d=c/x;return n.width?R(a)?{width:a,height:a/d,type:"svg",mime:"image/svg+xml",wUnits:p(n.width),hUnits:p(n.width)}:void 0:n.height?R(l)?{width:l*d,height:l,type:"svg",mime:"image/svg+xml",wUnits:p(n.height),hUnits:p(n.height)}:void 0:{width:c,height:x,type:"svg",mime:"image/svg+xml",wUnits:p(h.width),hUnits:p(h.height)}}}}}},98792:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).eW,_=e(9696).st,p=e(9696).eI,s=M("II*\0"),t=M("MM\0*");function i(a,l,u){return u?T(a,l):o(a,l)}function r(a,l,u){return u?p(a,l):_(a,l)}function n(a,l,u){var h=i(a,l+2,u);return r(a,l+4,u)!==1||h!==3&&h!==4?null:h===3?i(a,l+8,u):r(a,l+8,u)}ee.exports=function(a){if(!(a.length<8)&&(k(a,0,s)||k(a,0,t))){var l=a[0]===77,u=r(a,4,l)-8;if(!(u<0)){var h=u+8;if(!(a.length-h<2)){var c=12*i(a,h+0,l);if(!(c<=0||(h+=2,a.length-h<c))){var x,d,v,g;for(x=0;x<c;x+=12)(g=i(a,h+x,l))===256?d=n(a,h+x,l):g===257&&(v=n(a,h+x,l));return d&&v?{width:d,height:v,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).st,_=e(11688),p=M("RIFF"),s=M("WEBP");function t(n,a){if(n[a+3]===157&&n[a+4]===1&&n[a+5]===42)return{width:16383&o(n,a+6),height:16383&o(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(n,a){if(n[a]===47){var l=T(n,a+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ee.exports=function(n){if(!(n.length<16)&&(k(n,0,p)||k(n,8,s))){var a=12,l=null,u=0,h=T(n,4)+8;if(!(h>n.length)){for(;a+8<h;)if(n[a]!==0){var c=String.fromCharCode.apply(null,n.slice(a,a+4)),x=T(n,a+4);c==="VP8 "&&x>=10?l=l||t(n,a+8):c==="VP8L"&&x>=9?l=l||i(n,a+8):c==="VP8X"&&x>=10?l=l||r(n,a+8):c==="EXIF"&&(u=_.get_orientation(n.slice(a+8,a+8+x)),a=1/0),a+=8+x}else a++;if(l)return u>0&&(l.orientation=u),l}}}},87480:function(ee,R,e){ee.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(ee,R,e){var M=e(87480);ee.exports=function(k){return function(o){for(var T=Object.keys(M),_=0;_<T.length;_++){var p=M[T[_]](o);if(p)return p}return null}(k)},ee.exports.parsers=M},4168:function(ee){var R,e,M=ee.exports={};function k(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function T(l){if(R===setTimeout)return setTimeout(l,0);if((R===k||!R)&&setTimeout)return R=setTimeout,setTimeout(l,0);try{return R(l,0)}catch{try{return R.call(null,l,0)}catch{return R.call(this,l,0)}}}(function(){try{R=typeof setTimeout=="function"?setTimeout:k}catch{R=k}try{e=typeof clearTimeout=="function"?clearTimeout:o}catch{e=o}})();var _,p=[],s=!1,t=-1;function i(){s&&_&&(s=!1,_.length?p=_.concat(p):t=-1,p.length&&r())}function r(){if(!s){var l=T(i);s=!0;for(var u=p.length;u;){for(_=p,p=[];++t<u;)_&&_[t].run();t=-1,u=p.length}_=null,s=!1,function(h){if(e===clearTimeout)return clearTimeout(h);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(h);try{return e(h)}catch{try{return e.call(null,h)}catch{return e.call(this,h)}}}(l)}}function n(l,u){this.fun=l,this.array=u}function a(){}M.nextTick=function(l){var u=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)u[h-1]=arguments[h];p.push(new n(l,u)),p.length!==1||s||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=a,M.addListener=a,M.once=a,M.off=a,M.removeListener=a,M.removeAllListeners=a,M.emit=a,M.prependListener=a,M.prependOnceListener=a,M.listeners=function(l){return[]},M.binding=function(l){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(l){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},3951:function(ee,R,e){for(var M=e(41984),k=typeof window>"u"?e.g:window,o=["moz","webkit"],T="AnimationFrame",_=k["request"+T],p=k["cancel"+T]||k["cancelRequest"+T],s=0;!_&&s<o.length;s++)_=k[o[s]+"Request"+T],p=k[o[s]+"Cancel"+T]||k[o[s]+"CancelRequest"+T];if(!_||!p){var t=0,i=0,r=[];_=function(n){if(r.length===0){var a=M(),l=Math.max(0,16.666666666666668-(a-t));t=l+a,setTimeout(function(){var u=r.slice(0);r.length=0;for(var h=0;h<u.length;h++)if(!u[h].cancelled)try{u[h].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(l))}return r.push({handle:++i,callback:n,cancelled:!1}),i},p=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}ee.exports=function(n){return _.call(k,n)},ee.exports.cancel=function(){p.apply(k,arguments)},ee.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=_,n.cancelAnimationFrame=p}},24544:function(ee,R,e){var M=e(76752),k=e(72160),o=e(45223),T=e(55616),_=e(50896),p=e(47520),s=e(37816),t=s.float32,i=s.fract32;ee.exports=function(n,a){if(typeof n=="function"?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,u,h,c,x,d,v=n._gl,g={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},y=[];return c=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=n.buffer({usage:"static",type:"float",data:r}),S(a),l=n({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,O){return[O.viewport.x,O.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,O){return 4*O.offset},divisor:1},position:{buffer:u,offset:function(E,O){return 8*O.offset},divisor:1},positionFract:{buffer:h,offset:function(E,O){return 8*O.offset},divisor:1},error:{buffer:x,offset:function(E,O){return 16*O.offset},divisor:1},direction:{buffer:d,stride:24,offset:0},lineOffset:{buffer:d,stride:24,offset:8},capOffset:{buffer:d,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),_(m,{update:S,draw:b,destroy:w,regl:n,gl:v,canvas:v.canvas,groups:y}),m;function m(E){E?S(E):E===null&&w(),b()}function b(E){if(typeof E=="number")return f(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),y.forEach(function(O,C){O&&(E&&(E[C]?O.draw=!0:O.draw=!1),O.draw?f(C):O.draw=!0)})}function f(E){typeof E=="number"&&(E=y[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],l(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var O=0,C=0;if(m.groups=y=E.map(function(F,j){var H=y[j];return F&&(typeof F=="function"?F={after:F}:typeof F[0]=="number"&&(F={positions:F}),F=T(F,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),H||(y[j]=H={id:j,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},F=_({},g,F)),o(H,F,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=p(te),C+=te.length,te},positions:function(te,Q){return te=p(te,"float64"),Q.count=Math.floor(te.length/2),Q.bounds=M(te,2),Q.offset=O,O+=Q.count,te}},{color:function(te,Q){var $=Q.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var K=te;te=Array($);for(var X=0;X<$;X++)te[X]=K}if(te.length<$)throw Error("Not enough colors");for(var Y=new Uint8Array(4*$),re=0;re<$;re++){var se=k(te[re],"uint8");Y.set(se,4*re)}return Y},range:function(te,Q,$){var K=Q.bounds;return te||(te=K),Q.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],Q.translate=[-te[0],-te[1]],Q.scaleFract=i(Q.scale),Q.translateFract=i(Q.translate),te},viewport:function(te){var Q;return Array.isArray(te)?Q={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?(Q={x:te.x||te.left||0,y:te.y||te.top||0},te.right?Q.width=te.right-Q.x:Q.width=te.w||te.width||0,te.bottom?Q.height=te.bottom-Q.y:Q.height=te.h||te.height||0):Q={x:0,y:0,width:v.drawingBufferWidth,height:v.drawingBufferHeight},Q}}])),H}),O||C){var P=y.reduce(function(F,j,H){return F+(j?j.count:0)},0),D=new Float64Array(2*P),U=new Uint8Array(4*P),I=new Float32Array(4*P);y.forEach(function(F,j){if(F){var H=F.positions,te=F.count,Q=F.offset,$=F.color,K=F.errors;te&&(U.set($,4*Q),I.set(K,4*Q),D.set(H,2*Q))}});var N=t(D);u(N);var W=i(D,N);h(W),c(U),x(I)}}}function w(){u.destroy(),h.destroy(),c.destroy(),x.destroy(),d.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(ee,R,e){var M=e(72160),k=e(76752),o=e(50896),T=e(55616),_=e(47520),p=e(28912),s=e(71152),t=e(37816),i=t.float32,r=t.fract32,n=e(60463),a=e(51160),l=e(10272);function u(h,c){if(!(this instanceof u))return new u(h,c);if(typeof h=="function"?(c||(c={}),c.regl=h):c=h,c.length&&(c.positions=c),!(h=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=u.shaders.has(h)?u.shaders.get(h):u.shaders.set(h,u.createShaders(h)).get(h),this.update(c)}ee.exports=u,u.dashMult=2,u.maxPatternLength=256,u.precisionThreshold=3e6,u.maxPoints=1e4,u.maxLines=2048,u.shaders=new n,u.createShaders=function(h){var c,x=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),d={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(g,y){return y.join==="round"?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(g,y){return[y.viewport.x,y.viewport.y,g.viewportWidth,g.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(g,y){return!y.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},v=h(o({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},d));try{c=h(o({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},d))}catch{c=v}return{fill:h({primitive:"triangle",elements:function(g,y){return y.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(g,y){return[y.viewport.x,y.viewport.y,g.viewportWidth,g.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:d.blend,depth:{enable:!1},scissor:d.scissor,stencil:d.stencil,viewport:d.viewport}),rect:v,miter:c}},u.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},u.prototype.render=function(){for(var h,c=[],x=arguments.length;x--;)c[x]=arguments[x];c.length&&(h=this).update.apply(h,c),this.draw()},u.prototype.draw=function(){for(var h=this,c=[],x=arguments.length;x--;)c[x]=arguments[x];return(c.length?c:this.passes).forEach(function(d,v){var g;if(d&&Array.isArray(d))return(g=h).draw.apply(g,d);typeof d=="number"&&(d=h.passes[d]),d&&d.count>1&&d.opacity&&(h.regl._refresh(),d.fill&&d.triangles&&d.triangles.length>2&&h.shaders.fill(d),d.thickness&&(d.scale[0]*d.viewport.width>u.precisionThreshold||d.scale[1]*d.viewport.height>u.precisionThreshold||d.join==="rect"||!d.join&&(d.thickness<=2||d.count>=u.maxPoints)?h.shaders.rect(d):h.shaders.miter(d)))}),this},u.prototype.update=function(h){var c=this;if(h){h.length!=null?typeof h[0]=="number"&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var x=this.regl,d=this.gl;if(h.forEach(function(b,f){var S=c.passes[f];if(b!==void 0)if(b!==null){if(typeof b[0]=="number"&&(b={positions:b}),b=T(b,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(c.passes[f]=S={id:f,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},b=o({},u.defaults,b)),b.thickness!=null&&(S.thickness=parseFloat(b.thickness)),b.opacity!=null&&(S.opacity=parseFloat(b.opacity)),b.miterLimit!=null&&(S.miterLimit=parseFloat(b.miterLimit)),b.overlay!=null&&(S.overlay=!!b.overlay,f<u.maxLines&&(S.depth=2*(u.maxLines-1-f%u.maxLines)/u.maxLines-1)),b.join!=null&&(S.join=b.join),b.hole!=null&&(S.hole=b.hole),b.fill!=null&&(S.fill=b.fill?M(b.fill,"uint8"):null),b.viewport!=null&&(S.viewport=a(b.viewport)),S.viewport||(S.viewport=a([d.drawingBufferWidth,d.drawingBufferHeight])),b.close!=null&&(S.close=b.close),b.positions===null&&(b.positions=[]),b.positions){var w,E;if(b.positions.x&&b.positions.y){var O=b.positions.x,C=b.positions.y;E=S.count=Math.max(O.length,C.length),w=new Float64Array(2*E);for(var P=0;P<E;P++)w[2*P]=O[P],w[2*P+1]=C[P]}else w=_(b.positions,"float64"),E=S.count=Math.floor(w.length/2);var D=S.bounds=k(w,2);if(S.fill){for(var U=[],I={},N=0,W=0,F=0,j=S.count;W<j;W++){var H=w[2*W],te=w[2*W+1];isNaN(H)||isNaN(te)||H==null||te==null?(H=w[2*N],te=w[2*N+1],I[W]=N):N=W,U[F++]=H,U[F++]=te}if(b.splitNull){S.count-1 in I||(I[S.count]=S.count-1);var Q=Object.keys(I).map(Number).sort(function(vt,ht){return vt-ht}),$=[],K=0,X=S.hole!=null?S.hole[0]:null;if(X!=null){var Y=l(Q,function(vt){return vt>=X});(Q=Q.slice(0,Y)).push(X)}for(var re=function(vt){var ht=U.slice(2*K,2*Q[vt]).concat(X?U.slice(2*X):[]),Qe=(S.hole||[]).map(function(Tt){return Tt-X+(Q[vt]-K)}),Je=p(ht,Qe);Je=Je.map(function(Tt){return Tt+K+(Tt+K<Q[vt]?0:X-Q[vt])}),$.push.apply($,Je),K=Q[vt]+1},se=0;se<Q.length;se++)re(se);for(var ae=0,ce=$.length;ae<ce;ae++)I[$[ae]]!=null&&($[ae]=I[$[ae]]);S.triangles=$}else{for(var fe=p(U,S.hole||[]),he=0,ve=fe.length;he<ve;he++)I[fe[he]]!=null&&(fe[he]=I[fe[he]]);S.triangles=fe}}var ye=new Float64Array(w);s(ye,2,D);var me=new Float64Array(2*E+6);S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(me[0]=ye[2*E-4],me[1]=ye[2*E-3]):(me[0]=ye[2*E-2],me[1]=ye[2*E-1]):(me[0]=ye[0],me[1]=ye[1]),me.set(ye,2),S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(me[2*E+2]=ye[2],me[2*E+3]=ye[3],S.count-=1):(me[2*E+2]=ye[0],me[2*E+3]=ye[1],me[2*E+4]=ye[2],me[2*E+5]=ye[3]):(me[2*E+2]=ye[2*E-2],me[2*E+3]=ye[2*E-1],me[2*E+4]=ye[2*E-2],me[2*E+5]=ye[2*E-1]);var Me=i(me);S.positionBuffer(Me);var Pe=r(me,Me);S.positionFractBuffer(Pe)}if(b.range?S.range=b.range:S.range||(S.range=S.bounds),(b.range||b.positions)&&S.count){var ge=S.bounds,oe=ge[2]-ge[0],ie=ge[3]-ge[1],de=S.range[2]-S.range[0],Se=S.range[3]-S.range[1];S.scale=[oe/de,ie/Se],S.translate=[-S.range[0]/de+ge[0]/de||0,-S.range[1]/Se+ge[1]/Se||0],S.scaleFract=r(S.scale),S.translateFract=r(S.translate)}if(b.dashes){var _e,we=0;if(!b.dashes||b.dashes.length<2)we=1,_e=new Uint8Array([255,255,255,255,255,255,255,255]);else{we=0;for(var Ae=0;Ae<b.dashes.length;++Ae)we+=b.dashes[Ae];_e=new Uint8Array(we*u.dashMult);for(var Oe=0,ze=255,pe=0;pe<2;pe++)for(var be=0;be<b.dashes.length;++be){for(var ke=0,Ie=b.dashes[be]*u.dashMult*.5;ke<Ie;++ke)_e[Oe++]=ze;ze^=255}}S.dashLength=we,S.dashTexture({channels:1,data:_e,width:_e.length,height:1,mag:"linear",min:"linear"},0,0)}if(b.color){var Ee=S.count,Be=b.color;Be||(Be="transparent");var Ve=new Uint8Array(4*Ee+4);if(Array.isArray(Be)&&typeof Be[0]!="number"){for(var Ze=0;Ze<Ee;Ze++){var rt=M(Be[Ze],"uint8");Ve.set(rt,4*Ze)}Ve.set(M(Be[0],"uint8"),4*Ee)}else for(var it=M(Be,"uint8"),dt=0;dt<Ee+1;dt++)Ve.set(it,4*dt);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ve})}}else c.passes[f]=null}),h.length<this.passes.length){for(var v=h.length;v<this.passes.length;v++){var g=this.passes[v];g&&(g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy())}this.passes.length=h.length}for(var y=[],m=0;m<this.passes.length;m++)this.passes[m]!==null&&y.push(this.passes[m]);return this.passes=y,this}},u.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(ee,R,e){function M(v,g){return function(y){if(Array.isArray(y))return y}(v)||function(y,m){var b=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(b!=null){var f,S,w,E,O=[],C=!0,P=!1;try{if(w=(b=b.call(y)).next,m!==0)for(;!(C=(f=w.call(b)).done)&&(O.push(f.value),O.length!==m);C=!0);}catch(D){P=!0,S=D}finally{try{if(!C&&b.return!=null&&(E=b.return(),Object(E)!==E))return}finally{if(P)throw S}}return O}}(v,g)||k(v,g)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(v,g){if(v){if(typeof v=="string")return o(v,g);var y=Object.prototype.toString.call(v).slice(8,-1);return y==="Object"&&v.constructor&&(y=v.constructor.name),y==="Map"||y==="Set"?Array.from(v):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?o(v,g):void 0}}function o(v,g){(g==null||g>v.length)&&(g=v.length);for(var y=0,m=new Array(g);y<g;y++)m[y]=v[y];return m}var T=e(72160),_=e(76752),p=e(3808),s=e(3108),t=e(50896),i=e(26444),r=e(55616),n=e(45223),a=e(47520),l=e(96604),u=e(37816),h=e(51160),c=x;function x(v,g){var y=this;if(!(this instanceof x))return new x(v,g);typeof v=="function"?(g||(g={}),g.regl=v):(g=v,v=null),g&&g.length&&(g.positions=g);var m,b=(v=g.regl)._gl,f=[];this.tooManyColors=l,m=v.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:v,gl:b,groups:[],markerCache:[null],markerTextures:[null],palette:f,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:b.canvas}),this.update(g);var S={uniforms:{constPointSize:!!g.constPointSize,opacity:v.prop("opacity"),paletteSize:function(O,C){return[y.tooManyColors?0:255,m.height]},pixelRatio:v.context("pixelRatio"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translate:v.prop("translate"),translateFract:v.prop("translateFract"),markerTexture:v.prop("markerTexture"),paletteTexture:m},attributes:{x:function(O,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(O,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(O,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(O,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(O,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/y.maxSize)]}},borderSize:function(O,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/y.maxSize)]}},colorId:function(O,C){return C.color.length?{buffer:C.colorBuffer,stride:y.tooManyColors?8:4,offset:0}:{constant:y.tooManyColors?f.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(O,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:y.tooManyColors?8:4,offset:y.tooManyColors?4:2}:{constant:y.tooManyColors?f.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(O,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:v.prop("elements"),count:v.prop("count"),offset:v.prop("offset"),primitive:"points"},w=t({},S);w.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),w.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=v(w);var E=t({},S);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=v(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var v=this,g=arguments.length,y=new Array(g),m=0;m<g;m++)y[m]=arguments[m];var b=this.groups;if(y.length===1&&Array.isArray(y[0])&&(y[0][0]===null||Array.isArray(y[0][0]))&&(y=y[0]),this.regl._refresh(),y.length)for(var f=0;f<y.length;f++)this.drawItem(f,y[f]);else b.forEach(function(S,w){v.drawItem(w)});return this},x.prototype.drawItem=function(v,g){var y,m=this.groups,b=m[v];if(typeof g=="number"&&(v=g,b=m[g],g=null),b&&b.count&&b.opacity){b.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,b,g));for(var f=[],S=1;S<b.activation.length;S++)b.activation[S]&&(b.activation[S]===!0||b.activation[S].data.length)&&f.push.apply(f,function(w){if(Array.isArray(w))return o(w)}(y=this.getMarkerDrawOptions(S,b,g))||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(y)||k(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());f.length&&this.drawMarker(f)}},x.prototype.getMarkerDrawOptions=function(v,g,y){var m=g.range,b=g.tree,f=g.viewport,S=g.activation,w=g.selectionBuffer,E=g.count;if(this.regl,!b)return y?[t({},g,{markerTexture:this.markerTextures[v],activation:S[v],count:y.length,elements:y,offset:0})]:[t({},g,{markerTexture:this.markerTextures[v],activation:S[v],offset:0})];var O=[],C=b.range(m,{lod:!0,px:[(m[2]-m[0])/f.width,(m[3]-m[1])/f.height]});if(y){for(var P=S[v].data,D=new Uint8Array(E),U=0;U<y.length;U++){var I=y[U];D[I]=P?P[I]:1}w.subdata(D)}for(var N=C.length;N--;){var W=M(C[N],2),F=W[0],j=W[1];O.push(t({},g,{markerTexture:this.markerTextures[v],activation:y?w:S[v],offset:F,count:j-F}))}return O},x.prototype.update=function(){for(var v=this,g=arguments.length,y=new Array(g),m=0;m<g;m++)y[m]=arguments[m];if(y.length){y.length===1&&Array.isArray(y[0])&&(y=y[0]);var b=this.groups,f=this.gl,S=this.regl,w=this.maxSize,E=this.maxColors,O=this.palette;this.groups=b=y.map(function(C,P){var D=b[P];if(C===void 0)return D;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=r(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(v.tooManyColors=C.tooManyColors),D||(b[P]=D={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},x.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=D.marker,delete D.marker),C.marker&&!("positions"in C)&&(C.positions=D.positions,delete D.positions);var U=0,I=0;if(n(D,C,[{snap:!0,size:function(ve,ye){return ve==null&&(ve=x.defaults.size),U+=ve&&ve.length?1:0,ve},borderSize:function(ve,ye){return ve==null&&(ve=x.defaults.borderSize),U+=ve&&ve.length?1:0,ve},opacity:parseFloat,color:function(ve,ye){return ve==null&&(ve=x.defaults.color),ve=v.updateColor(ve),I++,ve},borderColor:function(ve,ye){return ve==null&&(ve=x.defaults.borderColor),ve=v.updateColor(ve),I++,ve},bounds:function(ve,ye,me){return"range"in me||(me.range=null),ve},positions:function(ve,ye,me){var Me=ye.snap,Pe=ye.positionBuffer,ge=ye.positionFractBuffer,oe=ye.selectionBuffer;if(ve.x||ve.y)return ve.x.length?ye.xAttr={buffer:S.buffer(ve.x),offset:0,stride:4,count:ve.x.length}:ye.xAttr={buffer:ve.x.buffer,offset:4*ve.x.offset||0,stride:4*(ve.x.stride||1),count:ve.x.count},ve.y.length?ye.yAttr={buffer:S.buffer(ve.y),offset:0,stride:4,count:ve.y.length}:ye.yAttr={buffer:ve.y.buffer,offset:4*ve.y.offset||0,stride:4*(ve.y.stride||1),count:ve.y.count},ye.count=Math.max(ye.xAttr.count,ye.yAttr.count),ve;ve=a(ve,"float64");var ie=ye.count=Math.floor(ve.length/2),de=ye.bounds=ie?_(ve,2):null;if(me.range||ye.range||(delete ye.range,me.range=de),me.marker||ye.marker||(delete ye.marker,me.marker=null),Me&&(Me===!0||ie>Me)?ye.tree=s(ve,{bounds:de}):Me&&Me.length&&(ye.tree=Me),ye.tree){var Se={primitive:"points",usage:"static",data:ye.tree,type:"uint32"};ye.elements?ye.elements(Se):ye.elements=S.elements(Se)}var _e=u.float32(ve);return Pe({data:_e,usage:"dynamic"}),ge({data:u.fract32(ve,_e),usage:"dynamic"}),oe({data:new Uint8Array(ie),type:"uint8",usage:"stream"}),ve}},{marker:function(ve,ye,me){var Me=ye.activation;if(Me.forEach(function(_e){return _e&&_e.destroy&&_e.destroy()}),Me.length=0,ve&&typeof ve[0]!="number"){for(var Pe=[],ge=0,oe=Math.min(ve.length,ye.count);ge<oe;ge++){var ie=v.addMarker(ve[ge]);Pe[ie]||(Pe[ie]=new Uint8Array(ye.count)),Pe[ie][ge]=1}for(var de=0;de<Pe.length;de++)if(Pe[de]){var Se={data:Pe[de],type:"uint8",usage:"static"};Me[de]?Me[de](Se):Me[de]=S.buffer(Se),Me[de].data=Pe[de]}}else Me[v.addMarker(ve)]=!0;return ve},range:function(ve,ye,me){var Me=ye.bounds;if(Me)return ve||(ve=Me),ye.scale=[1/(ve[2]-ve[0]),1/(ve[3]-ve[1])],ye.translate=[-ve[0],-ve[1]],ye.scaleFract=u.fract(ye.scale),ye.translateFract=u.fract(ye.translate),ve},viewport:function(ve){return h(ve||[f.drawingBufferWidth,f.drawingBufferHeight])}}]),U){var N=D,W=N.count,F=N.size,j=N.borderSize,H=N.sizeBuffer,te=new Uint8Array(2*W);if(F.length||j.length)for(var Q=0;Q<W;Q++)te[2*Q]=Math.round(255*(F[Q]==null?F:F[Q])/w),te[2*Q+1]=Math.round(255*(j[Q]==null?j:j[Q])/w);H({data:te,usage:"dynamic"})}if(I){var $,K=D,X=K.count,Y=K.color,re=K.borderColor,se=K.colorBuffer;if(v.tooManyColors){if(Y.length||re.length){$=new Uint8Array(8*X);for(var ae=0;ae<X;ae++){var ce=Y[ae];$[8*ae]=O[4*ce],$[8*ae+1]=O[4*ce+1],$[8*ae+2]=O[4*ce+2],$[8*ae+3]=O[4*ce+3];var fe=re[ae];$[8*ae+4]=O[4*fe],$[8*ae+5]=O[4*fe+1],$[8*ae+6]=O[4*fe+2],$[8*ae+7]=O[4*fe+3]}}}else if(Y.length||re.length){$=new Uint8Array(4*X+2);for(var he=0;he<X;he++)Y[he]!=null&&($[4*he]=Y[he]%E,$[4*he+1]=Math.floor(Y[he]/E)),re[he]!=null&&($[4*he+2]=re[he]%E,$[4*he+3]=Math.floor(re[he]/E))}se({data:$||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return D})}},x.prototype.addMarker=function(v){var g,y=this.markerTextures,m=this.regl,b=this.markerCache,f=v==null?0:b.indexOf(v);if(f>=0)return f;if(v instanceof Uint8Array||v instanceof Uint8ClampedArray)g=v;else{g=new Uint8Array(v.length);for(var S=0,w=v.length;S<w;S++)g[S]=255*v[S]}var E=Math.floor(Math.sqrt(g.length));return f=y.length,b.push(v),y.push(m.texture({channels:1,data:g,radius:E,mag:"linear",min:"linear"})),f},x.prototype.updateColor=function(v){var g=this.paletteIds,y=this.palette,m=this.maxColors;Array.isArray(v)||(v=[v]);var b=[];if(typeof v[0]=="number"){var f=[];if(Array.isArray(v))for(var S=0;S<v.length;S+=4)f.push(v.slice(S,S+4));else for(var w=0;w<v.length;w+=4)f.push(v.subarray(w,w+4));v=f}for(var E=0;E<v.length;E++){var O=v[E];O=T(O,"uint8");var C=p(O,!1);if(g[C]==null){var P=y.length;g[C]=Math.floor(P/4),y[P]=O[0],y[P+1]=O[1],y[P+2]=O[2],y[P+3]=O[3]}b[E]=g[C]}return!this.tooManyColors&&y.length>4*m&&(this.tooManyColors=!0),this.updatePalette(y),b.length===1?b[0]:b},x.prototype.updatePalette=function(v){if(!this.tooManyColors){var g=this.maxColors,y=this.paletteTexture,m=Math.ceil(.25*v.length/g);if(m>1)for(var b=.25*(v=v.slice()).length%g;b<m*g;b++)v.push(0,0,0,0);y.height<m&&y.resize(g,m),y.subimage({width:Math.min(.25*v.length,g),height:m,data:v},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(v){v.sizeBuffer.destroy(),v.positionBuffer.destroy(),v.positionFractBuffer.destroy(),v.colorBuffer.destroy(),v.activation.forEach(function(g){return g&&g.destroy&&g.destroy()}),v.selectionBuffer.destroy(),v.elements&&v.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(v){return v&&v.destroy&&v.destroy()}),this};var d=e(50896);ee.exports=function(v,g){var y=new c(v,g),m=y.render.bind(y);return d(m,{render:m,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette}),m}},55795:function(ee,R,e){var M=e(38540),k=e(55616),o=e(76752),T=e(3951),_=e(67752),p=e(51160),s=e(47520);function t(a,l){if(!(this instanceof t))return new t(a);this.traces=[],this.passes={},this.regl=a,this.scatter=M(a),this.canvas=this.scatter.canvas}function i(a,l,u){return(a.id!=null?a.id:a)<<16|(255&l)<<8|255&u}function r(a,l,u){var h,c,x,d,v=a[l],g=a[u];return v.length>2?(v[0],v[2],h=v[1],c=v[3]):v.length?(h=v[0],c=v[1]):(v.x,h=v.y,v.x,v.width,c=v.y+v.height),g.length>2?(x=g[0],d=g[2],g[1],g[3]):g.length?(x=g[0],d=g[1]):(x=g.x,g.y,d=g.x+g.width,g.y,g.height),[x,h,d,c]}function n(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var l=p(a);return[l.x,l.y,l.x+l.width,l.y+l.height]}ee.exports=t,t.prototype.render=function(){for(var a,l=this,u=[],h=arguments.length;h--;)u[h]=arguments[h];return u.length&&(a=this).update.apply(a,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,T(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var a,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var h=0;h<l.length;h++)this.updateItem(h,l[h]);this.traces=this.traces.filter(Boolean);for(var c=[],x=0,d=0;d<this.traces.length;d++){for(var v=this.traces[d],g=this.traces[d].passes,y=0;y<g.length;y++)c.push(this.passes[g[y]]);v.passOffset=x,x+=v.passes.length}return(a=this.scatter).update.apply(a,c),this}},t.prototype.updateItem=function(a,l){var u=this.regl;if(l===null)return this.traces[a]=null,this;if(!l)return this;var h,c=k(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[a]||(this.traces[a]={id:a,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:p([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(x.color=c.color),c.size!=null&&(x.size=c.size),c.marker!=null&&(x.marker=c.marker),c.borderColor!=null&&(x.borderColor=c.borderColor),c.borderSize!=null&&(x.borderSize=c.borderSize),c.opacity!=null&&(x.opacity=c.opacity),c.viewport&&(x.viewport=p(c.viewport)),c.diagonal!=null&&(x.diagonal=c.diagonal),c.upper!=null&&(x.upper=c.upper),c.lower!=null&&(x.lower=c.lower),c.data){x.buffer(s(c.data)),x.columns=c.data.length,x.count=c.data[0].length,x.bounds=[];for(var d=0;d<x.columns;d++)x.bounds[d]=o(c.data[d],1)}c.range&&(x.range=c.range,h=x.range&&typeof x.range[0]!="number"),c.domain&&(x.domain=c.domain);var v=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===x.columns&&typeof c.padding[c.padding.length-1]=="number"?(x.padding=c.padding.map(n),v=!0):x.padding=n(c.padding));var g=x.columns,y=x.count,m=x.viewport.width,b=x.viewport.height,f=x.viewport.x,S=x.viewport.y,w=m/g,E=b/g;x.passes=[];for(var O=0;O<g;O++)for(var C=0;C<g;C++)if((x.diagonal||C!==O)&&(x.upper||!(O>C))&&(x.lower||!(O<C))){var P=i(x.id,O,C),D=this.passes[P]||(this.passes[P]={});if(c.data&&(c.transpose?D.positions={x:{buffer:x.buffer,offset:C,count:y,stride:g},y:{buffer:x.buffer,offset:O,count:y,stride:g}}:D.positions={x:{buffer:x.buffer,offset:C*y,count:y},y:{buffer:x.buffer,offset:O*y,count:y}},D.bounds=r(x.bounds,O,C)),c.domain||c.viewport||c.data){var U=v?r(x.padding,O,C):x.padding;if(x.domain){var I=r(x.domain,O,C),N=I[0],W=I[1],F=I[2],j=I[3];D.viewport=[f+N*m+U[0],S+W*b+U[1],f+F*m-U[2],S+j*b-U[3]]}else D.viewport=[f+C*w+w*U[0],S+O*E+E*U[1],f+(C+1)*w-w*U[2],S+(O+1)*E-E*U[3]]}c.color&&(D.color=x.color),c.size&&(D.size=x.size),c.marker&&(D.marker=x.marker),c.borderSize&&(D.borderSize=x.borderSize),c.borderColor&&(D.borderColor=x.borderColor),c.opacity&&(D.opacity=x.opacity),c.range&&(D.range=h?r(x.range,O,C):x.range||D.bounds),x.passes.push(P)}return this},t.prototype.draw=function(){for(var a,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var h=[],c=0;c<l.length;c++)if(typeof l[c]=="number"){var x=this.traces[l[c]],d=x.passes,v=x.passOffset;h.push.apply(h,_(v,v+d.length))}else if(l[c].length){var g=l[c],y=this.traces[c],m=y.passes,b=y.passOffset;m=m.map(function(f,S){h[b+S]=g})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(ee){ee.exports=function(){function R(Ne,We){this.id=re++,this.type=Ne,this.data=We}function e(Ne){if(Ne.length===0)return[];var We=Ne.charAt(0),ot=Ne.charAt(Ne.length-1);if(1<Ne.length&&We===ot&&(We==='"'||We==="'"))return['"'+Ne.substr(1,Ne.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(We=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ne))return e(Ne.substr(0,We.index)).concat(e(We[1])).concat(e(Ne.substr(We.index+We[0].length)));if((We=Ne.split(".")).length===1)return['"'+Ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ne=[],ot=0;ot<We.length;++ot)Ne=Ne.concat(e(We[ot]));return Ne}function M(Ne){return"["+e(Ne).join("][")+"]"}function k(Ne){return typeof Ne=="string"?Ne.split():Ne}function o(Ne){return typeof Ne=="string"?document.querySelector(Ne):Ne}function T(Ne){var We,ot,tt,Re,Fe=Ne||{};Ne={};var nt=[],Ge=[],ct=typeof window>"u"?1:window.devicePixelRatio,pt=!1,gt={},ut=function(mt){},kt=function(){};if(typeof Fe=="string"?We=document.querySelector(Fe):typeof Fe=="object"&&(typeof Fe.nodeName=="string"&&typeof Fe.appendChild=="function"&&typeof Fe.getBoundingClientRect=="function"?We=Fe:typeof Fe.drawArrays=="function"||typeof Fe.drawElements=="function"?tt=(Re=Fe).canvas:("gl"in Fe?Re=Fe.gl:"canvas"in Fe?tt=o(Fe.canvas):"container"in Fe&&(ot=o(Fe.container)),"attributes"in Fe&&(Ne=Fe.attributes),"extensions"in Fe&&(nt=k(Fe.extensions)),"optionalExtensions"in Fe&&(Ge=k(Fe.optionalExtensions)),"onDone"in Fe&&(ut=Fe.onDone),"profile"in Fe&&(pt=!!Fe.profile),"pixelRatio"in Fe&&(ct=+Fe.pixelRatio),"cachedCode"in Fe&&(gt=Fe.cachedCode))),We&&(We.nodeName.toLowerCase()==="canvas"?tt=We:ot=We),!Re){if(!tt){if(!(We=function(mt,At,Lt){function Ct(){var rn=window.innerWidth,Nt=window.innerHeight;mt!==document.body&&(rn=(Nt=Gt.getBoundingClientRect()).right-Nt.left,Nt=Nt.bottom-Nt.top),Gt.width=Lt*rn,Gt.height=Lt*Nt}var zt,Gt=document.createElement("canvas");return Y(Gt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),mt.appendChild(Gt),mt===document.body&&(Gt.style.position="absolute",Y(mt.style,{margin:0,padding:0})),mt!==document.body&&typeof ResizeObserver=="function"?(zt=new ResizeObserver(function(){setTimeout(Ct)})).observe(mt):window.addEventListener("resize",Ct,!1),Ct(),{canvas:Gt,onDestroy:function(){zt?zt.disconnect():window.removeEventListener("resize",Ct),mt.removeChild(Gt)}}}(ot||document.body,0,ct)))return null;tt=We.canvas,kt=We.onDestroy}Ne.premultipliedAlpha===void 0&&(Ne.premultipliedAlpha=!0),Re=function(mt,At){function Lt(Ct){try{return mt.getContext(Ct,At)}catch{return null}}return Lt("webgl")||Lt("experimental-webgl")||Lt("webgl-experimental")}(tt,Ne)}return Re?{gl:Re,canvas:tt,container:ot,extensions:nt,optionalExtensions:Ge,pixelRatio:ct,profile:pt,cachedCode:gt,onDone:ut,onDestroy:kt}:(kt(),ut("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function _(Ne,We){for(var ot=Array(Ne),tt=0;tt<Ne;++tt)ot[tt]=We(tt);return ot}function p(Ne){var We,ot;return We=(65535<Ne)<<4,We|=ot=(255<(Ne>>>=We))<<3,(We|=ot=(15<(Ne>>>=ot))<<2)|(ot=(3<(Ne>>>=ot))<<1)|Ne>>>ot>>1}function s(){function Ne(tt){e:{for(var Re=16;268435456>=Re;Re*=16)if(tt<=Re){tt=Re;break e}tt=0}return 0<(Re=ot[p(tt)>>2]).length?Re.pop():new ArrayBuffer(tt)}function We(tt){ot[p(tt.byteLength)>>2].push(tt)}var ot=_(8,function(){return[]});return{alloc:Ne,free:We,allocType:function(tt,Re){var Fe=null;switch(tt){case 5120:Fe=new Int8Array(Ne(Re),0,Re);break;case 5121:Fe=new Uint8Array(Ne(Re),0,Re);break;case 5122:Fe=new Int16Array(Ne(2*Re),0,Re);break;case 5123:Fe=new Uint16Array(Ne(2*Re),0,Re);break;case 5124:Fe=new Int32Array(Ne(4*Re),0,Re);break;case 5125:Fe=new Uint32Array(Ne(4*Re),0,Re);break;case 5126:Fe=new Float32Array(Ne(4*Re),0,Re);break;default:return null}return Fe.length!==Re?Fe.subarray(0,Re):Fe},freeType:function(tt){We(tt.buffer)}}}function t(Ne){return!!Ne&&typeof Ne=="object"&&Array.isArray(Ne.shape)&&Array.isArray(Ne.stride)&&typeof Ne.offset=="number"&&Ne.shape.length===Ne.stride.length&&(Array.isArray(Ne.data)||ve(Ne.data))}function i(Ne,We,ot,tt,Re,Fe){for(var nt=0;nt<We;++nt)for(var Ge=Ne[nt],ct=0;ct<ot;++ct)for(var pt=Ge[ct],gt=0;gt<tt;++gt)Re[Fe++]=pt[gt]}function r(Ne,We,ot,tt,Re){for(var Fe=1,nt=ot+1;nt<We.length;++nt)Fe*=We[nt];var Ge=We[ot];if(We.length-ot==4){var ct=We[ot+1],pt=We[ot+2];for(We=We[ot+3],nt=0;nt<Ge;++nt)i(Ne[nt],ct,pt,We,tt,Re),Re+=Fe}else for(nt=0;nt<Ge;++nt)r(Ne[nt],We,ot+1,tt,Re),Re+=Fe}function n(Ne){return 0|Me[Object.prototype.toString.call(Ne)]}function a(Ne,We){for(var ot=0;ot<We.length;++ot)Ne[ot]=We[ot]}function l(Ne,We,ot,tt,Re,Fe,nt){for(var Ge=0,ct=0;ct<ot;++ct)for(var pt=0;pt<tt;++pt)Ne[Ge++]=We[Re*ct+Fe*pt+nt]}function u(Ne,We,ot,tt){function Re(ut){this.id=ct++,this.buffer=Ne.createBuffer(),this.type=ut,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,ot.profile&&(this.stats={size:0})}function Fe(ut,kt,mt){ut.byteLength=kt.byteLength,Ne.bufferData(ut.type,kt,mt)}function nt(ut,kt,mt,At,Lt,Ct){if(ut.usage=mt,Array.isArray(kt)){if(ut.dtype=At||5126,0<kt.length)if(Array.isArray(kt[0])){Lt=ie(kt);for(var zt=At=1;zt<Lt.length;++zt)At*=Lt[zt];ut.dimension=At,Fe(ut,kt=oe(kt,Lt,ut.dtype),mt),Ct?ut.persistentData=kt:fe.freeType(kt)}else typeof kt[0]=="number"?(ut.dimension=Lt,a(Lt=fe.allocType(ut.dtype,kt.length),kt),Fe(ut,Lt,mt),Ct?ut.persistentData=Lt:fe.freeType(Lt)):ve(kt[0])&&(ut.dimension=kt[0].length,ut.dtype=At||n(kt[0])||5126,Fe(ut,kt=oe(kt,[kt.length,kt[0].length],ut.dtype),mt),Ct?ut.persistentData=kt:fe.freeType(kt))}else if(ve(kt))ut.dtype=At||n(kt),ut.dimension=Lt,Fe(ut,kt,mt),Ct&&(ut.persistentData=new Uint8Array(new Uint8Array(kt.buffer)));else if(t(kt)){Lt=kt.shape;var Gt=kt.stride,rn=(zt=kt.offset,0),Nt=0,Wt=0,Rt=0;Lt.length===1?(rn=Lt[0],Nt=1,Wt=Gt[0],Rt=0):Lt.length===2&&(rn=Lt[0],Nt=Lt[1],Wt=Gt[0],Rt=Gt[1]),ut.dtype=At||n(kt.data)||5126,ut.dimension=Nt,l(Lt=fe.allocType(ut.dtype,rn*Nt),kt.data,rn,Nt,Wt,Rt,zt),Fe(ut,Lt,mt),Ct?ut.persistentData=Lt:fe.freeType(Lt)}else kt instanceof ArrayBuffer&&(ut.dtype=5121,ut.dimension=Lt,Fe(ut,kt,mt),Ct&&(ut.persistentData=new Uint8Array(new Uint8Array(kt))))}function Ge(ut){We.bufferCount--,tt(ut),Ne.deleteBuffer(ut.buffer),ut.buffer=null,delete pt[ut.id]}var ct=0,pt={};Re.prototype.bind=function(){Ne.bindBuffer(this.type,this.buffer)},Re.prototype.destroy=function(){Ge(this)};var gt=[];return ot.profile&&(We.getTotalBufferSize=function(){var ut=0;return Object.keys(pt).forEach(function(kt){ut+=pt[kt].stats.size}),ut}),{create:function(ut,kt,mt,At){function Lt(zt){var Gt=35044,rn=null,Nt=0,Wt=0,Rt=1;return Array.isArray(zt)||ve(zt)||t(zt)||zt instanceof ArrayBuffer?rn=zt:typeof zt=="number"?Nt=0|zt:zt&&("data"in zt&&(rn=zt.data),"usage"in zt&&(Gt=ge[zt.usage]),"type"in zt&&(Wt=Pe[zt.type]),"dimension"in zt&&(Rt=0|zt.dimension),"length"in zt&&(Nt=0|zt.length)),Ct.bind(),rn?nt(Ct,rn,Gt,Wt,Rt,At):(Nt&&Ne.bufferData(Ct.type,Nt,Gt),Ct.dtype=Wt||5121,Ct.usage=Gt,Ct.dimension=Rt,Ct.byteLength=Nt),ot.profile&&(Ct.stats.size=Ct.byteLength*de[Ct.dtype]),Lt}We.bufferCount++;var Ct=new Re(kt);return pt[Ct.id]=Ct,mt||Lt(ut),Lt._reglType="buffer",Lt._buffer=Ct,Lt.subdata=function(zt,Gt){var rn,Nt=0|(Gt||0);if(Ct.bind(),ve(zt)||zt instanceof ArrayBuffer)Ne.bufferSubData(Ct.type,Nt,zt);else if(Array.isArray(zt)){if(0<zt.length)if(typeof zt[0]=="number"){var Wt=fe.allocType(Ct.dtype,zt.length);a(Wt,zt),Ne.bufferSubData(Ct.type,Nt,Wt),fe.freeType(Wt)}else(Array.isArray(zt[0])||ve(zt[0]))&&(rn=ie(zt),Wt=oe(zt,rn,Ct.dtype),Ne.bufferSubData(Ct.type,Nt,Wt),fe.freeType(Wt))}else if(t(zt)){rn=zt.shape;var Rt=zt.stride,Ln=Wt=0,bn=0,hn=0;rn.length===1?(Wt=rn[0],Ln=1,bn=Rt[0],hn=0):rn.length===2&&(Wt=rn[0],Ln=rn[1],bn=Rt[0],hn=Rt[1]),rn=Array.isArray(zt.data)?Ct.dtype:n(zt.data),l(rn=fe.allocType(rn,Wt*Ln),zt.data,Wt,Ln,bn,hn,zt.offset),Ne.bufferSubData(Ct.type,Nt,rn),fe.freeType(rn)}return Lt},ot.profile&&(Lt.stats=Ct.stats),Lt.destroy=function(){Ge(Ct)},Lt},createStream:function(ut,kt){var mt=gt.pop();return mt||(mt=new Re(ut)),mt.bind(),nt(mt,kt,35040,0,1,!1),mt},destroyStream:function(ut){gt.push(ut)},clear:function(){ye(pt).forEach(Ge),gt.forEach(Ge)},getBuffer:function(ut){return ut&&ut._buffer instanceof Re?ut._buffer:null},restore:function(){ye(pt).forEach(function(ut){ut.buffer=Ne.createBuffer(),Ne.bindBuffer(ut.type,ut.buffer),Ne.bufferData(ut.type,ut.persistentData||ut.byteLength,ut.usage)})},_initBuffer:nt}}function h(Ne,We,ot,tt){function Re(ut){this.id=ct++,Ge[this.id]=this,this.buffer=ut,this.primType=4,this.type=this.vertCount=0}function Fe(ut,kt,mt,At,Lt,Ct,zt){var Gt;if(ut.buffer.bind(),kt?((Gt=zt)||ve(kt)&&(!t(kt)||ve(kt.data))||(Gt=We.oes_element_index_uint?5125:5123),ot._initBuffer(ut.buffer,kt,mt,Gt,3)):(Ne.bufferData(34963,Ct,mt),ut.buffer.dtype=Gt||5121,ut.buffer.usage=mt,ut.buffer.dimension=3,ut.buffer.byteLength=Ct),Gt=zt,!zt){switch(ut.buffer.dtype){case 5121:case 5120:Gt=5121;break;case 5123:case 5122:Gt=5123;break;case 5125:case 5124:Gt=5125}ut.buffer.dtype=Gt}ut.type=Gt,0>(kt=Lt)&&(kt=ut.buffer.byteLength,Gt===5123?kt>>=1:Gt===5125&&(kt>>=2)),ut.vertCount=kt,kt=At,0>At&&(kt=4,(At=ut.buffer.dimension)===1&&(kt=0),At===2&&(kt=1),At===3&&(kt=4)),ut.primType=kt}function nt(ut){tt.elementsCount--,delete Ge[ut.id],ut.buffer.destroy(),ut.buffer=null}var Ge={},ct=0,pt={uint8:5121,uint16:5123};We.oes_element_index_uint&&(pt.uint32=5125),Re.prototype.bind=function(){this.buffer.bind()};var gt=[];return{create:function(ut,kt){function mt(Ct){if(Ct)if(typeof Ct=="number")At(Ct),Lt.primType=4,Lt.vertCount=0|Ct,Lt.type=5121;else{var zt=null,Gt=35044,rn=-1,Nt=-1,Wt=0,Rt=0;Array.isArray(Ct)||ve(Ct)||t(Ct)?zt=Ct:("data"in Ct&&(zt=Ct.data),"usage"in Ct&&(Gt=ge[Ct.usage]),"primitive"in Ct&&(rn=Se[Ct.primitive]),"count"in Ct&&(Nt=0|Ct.count),"type"in Ct&&(Rt=pt[Ct.type]),"length"in Ct?Wt=0|Ct.length:(Wt=Nt,Rt===5123||Rt===5122?Wt*=2:Rt!==5125&&Rt!==5124||(Wt*=4))),Fe(Lt,zt,Gt,rn,Nt,Wt,Rt)}else At(),Lt.primType=4,Lt.vertCount=0,Lt.type=5121;return mt}var At=ot.create(null,34963,!0),Lt=new Re(At._buffer);return tt.elementsCount++,mt(ut),mt._reglType="elements",mt._elements=Lt,mt.subdata=function(Ct,zt){return At.subdata(Ct,zt),mt},mt.destroy=function(){nt(Lt)},mt},createStream:function(ut){var kt=gt.pop();return kt||(kt=new Re(ot.create(null,34963,!0,!1)._buffer)),Fe(kt,ut,35040,-1,-1,0,0),kt},destroyStream:function(ut){gt.push(ut)},getElements:function(ut){return typeof ut=="function"&&ut._elements instanceof Re?ut._elements:null},clear:function(){ye(Ge).forEach(nt)}}}function c(Ne){for(var We=fe.allocType(5123,Ne.length),ot=0;ot<Ne.length;++ot)if(isNaN(Ne[ot]))We[ot]=65535;else if(Ne[ot]===1/0)We[ot]=31744;else if(Ne[ot]===-1/0)We[ot]=64512;else{_e[0]=Ne[ot];var tt=(Fe=we[0])>>>31<<15,Re=(Fe<<1>>>24)-127,Fe=Fe>>13&1023;We[ot]=-24>Re?tt:-14>Re?tt+(Fe+1024>>-14-Re):15<Re?tt+31744:tt+(Re+15<<10)+Fe}return We}function x(Ne){return Array.isArray(Ne)||ve(Ne)}function d(Ne){return"[object "+Ne+"]"}function v(Ne){return Array.isArray(Ne)&&(Ne.length===0||typeof Ne[0]=="number")}function g(Ne){return!(!Array.isArray(Ne)||Ne.length===0||!x(Ne[0]))}function y(Ne){return Object.prototype.toString.call(Ne)}function m(Ne){if(!Ne)return!1;var We=y(Ne);return 0<=Ve.indexOf(We)||v(Ne)||g(Ne)||t(Ne)}function b(Ne,We){Ne.type===36193?(Ne.data=c(We),fe.freeType(We)):Ne.data=We}function f(Ne,We,ot,tt,Re,Fe){if(Ne=rt[Ne]!==void 0?rt[Ne]:ze[Ne]*Ze[We],Fe&&(Ne*=6),Re){for(tt=0;1<=ot;)tt+=Ne*ot*ot,ot/=2;return tt}return Ne*ot*tt}function S(Ne,We,ot,tt,Re,Fe,nt){function Ge(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ct(Zt,dn){Zt.internalformat=dn.internalformat,Zt.format=dn.format,Zt.type=dn.type,Zt.compressed=dn.compressed,Zt.premultiplyAlpha=dn.premultiplyAlpha,Zt.flipY=dn.flipY,Zt.unpackAlignment=dn.unpackAlignment,Zt.colorSpace=dn.colorSpace,Zt.width=dn.width,Zt.height=dn.height,Zt.channels=dn.channels}function pt(Zt,dn){if(typeof dn=="object"&&dn){"premultiplyAlpha"in dn&&(Zt.premultiplyAlpha=dn.premultiplyAlpha),"flipY"in dn&&(Zt.flipY=dn.flipY),"alignment"in dn&&(Zt.unpackAlignment=dn.alignment),"colorSpace"in dn&&(Zt.colorSpace=Sn[dn.colorSpace]),"type"in dn&&(Zt.type=Tn[dn.type]);var bt=Zt.width,Ut=Zt.height,Xt=Zt.channels,un=!1;"shape"in dn?(bt=dn.shape[0],Ut=dn.shape[1],dn.shape.length===3&&(Xt=dn.shape[2],un=!0)):("radius"in dn&&(bt=Ut=dn.radius),"width"in dn&&(bt=dn.width),"height"in dn&&(Ut=dn.height),"channels"in dn&&(Xt=dn.channels,un=!0)),Zt.width=0|bt,Zt.height=0|Ut,Zt.channels=0|Xt,bt=!1,"format"in dn&&(bt=dn.format,Ut=Zt.internalformat=Rn[bt],Zt.format=En[Ut],bt in Tn&&!("type"in dn)&&(Zt.type=Tn[bt]),bt in Pn&&(Zt.compressed=!0),bt=!0),!un&&bt?Zt.channels=ze[Zt.format]:un&&!bt&&Zt.channels!==Oe[Zt.format]&&(Zt.format=Zt.internalformat=Oe[Zt.channels])}}function gt(Zt){Ne.pixelStorei(37440,Zt.flipY),Ne.pixelStorei(37441,Zt.premultiplyAlpha),Ne.pixelStorei(37443,Zt.colorSpace),Ne.pixelStorei(3317,Zt.unpackAlignment)}function ut(){Ge.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt(Zt,dn){var bt=null;if(m(dn)?bt=dn:dn&&(pt(Zt,dn),"x"in dn&&(Zt.xOffset=0|dn.x),"y"in dn&&(Zt.yOffset=0|dn.y),m(dn.data)&&(bt=dn.data)),dn.copy){var Ut=Re.viewportWidth,Xt=Re.viewportHeight;Zt.width=Zt.width||Ut-Zt.xOffset,Zt.height=Zt.height||Xt-Zt.yOffset,Zt.needsCopy=!0}else if(bt){if(ve(bt))Zt.channels=Zt.channels||4,Zt.data=bt,"type"in dn||Zt.type!==5121||(Zt.type=0|Me[Object.prototype.toString.call(bt)]);else if(v(bt)){switch(Zt.channels=Zt.channels||4,Xt=(Ut=bt).length,Zt.type){case 5121:case 5123:case 5125:case 5126:(Xt=fe.allocType(Zt.type,Xt)).set(Ut),Zt.data=Xt;break;case 36193:Zt.data=c(Ut)}Zt.alignment=1,Zt.needsFree=!0}else if(t(bt)){Ut=bt.data,Array.isArray(Ut)||Zt.type!==5121||(Zt.type=0|Me[Object.prototype.toString.call(Ut)]),Xt=bt.shape;var un,cn,vn,en,Vt=bt.stride;Xt.length===3?(vn=Xt[2],en=Vt[2]):en=vn=1,un=Xt[0],cn=Xt[1],Xt=Vt[0],Vt=Vt[1],Zt.alignment=1,Zt.width=un,Zt.height=cn,Zt.channels=vn,Zt.format=Zt.internalformat=Oe[vn],Zt.needsFree=!0,un=en,bt=bt.offset,vn=Zt.width,en=Zt.height,cn=Zt.channels;for(var Ht=fe.allocType(Zt.type===36193?5126:Zt.type,vn*en*cn),tn=0,sn=0;sn<en;++sn)for(var wn=0;wn<vn;++wn)for(var An=0;An<cn;++An)Ht[tn++]=Ut[Xt*wn+Vt*sn+un*An+bt];b(Zt,Ht)}else if(y(bt)===pe||y(bt)===be||y(bt)===ke)y(bt)===pe||y(bt)===be?Zt.element=bt:Zt.element=bt.canvas,Zt.width=Zt.element.width,Zt.height=Zt.element.height,Zt.channels=4;else if(y(bt)===Ie)Zt.element=bt,Zt.width=bt.width,Zt.height=bt.height,Zt.channels=4;else if(y(bt)===Ee)Zt.element=bt,Zt.width=bt.naturalWidth,Zt.height=bt.naturalHeight,Zt.channels=4;else if(y(bt)===Be)Zt.element=bt,Zt.width=bt.videoWidth,Zt.height=bt.videoHeight,Zt.channels=4;else if(g(bt)){for(Ut=Zt.width||bt[0].length,Xt=Zt.height||bt.length,Vt=Zt.channels,Vt=x(bt[0][0])?Vt||bt[0][0].length:Vt||1,un=me.shape(bt),vn=1,en=0;en<un.length;++en)vn*=un[en];vn=fe.allocType(Zt.type===36193?5126:Zt.type,vn),me.flatten(bt,un,"",vn),b(Zt,vn),Zt.alignment=1,Zt.width=Ut,Zt.height=Xt,Zt.channels=Vt,Zt.format=Zt.internalformat=Oe[Vt],Zt.needsFree=!0}}else Zt.width=Zt.width||1,Zt.height=Zt.height||1,Zt.channels=Zt.channels||4}function mt(Zt,dn,bt,Ut,Xt){var un=Zt.element,cn=Zt.data,vn=Zt.internalformat,en=Zt.format,Vt=Zt.type,Ht=Zt.width,tn=Zt.height;gt(Zt),un?Ne.texSubImage2D(dn,Xt,bt,Ut,en,Vt,un):Zt.compressed?Ne.compressedTexSubImage2D(dn,Xt,bt,Ut,vn,Ht,tn,cn):Zt.needsCopy?(tt(),Ne.copyTexSubImage2D(dn,Xt,bt,Ut,Zt.xOffset,Zt.yOffset,Ht,tn)):Ne.texSubImage2D(dn,Xt,bt,Ut,Ht,tn,en,Vt,cn)}function At(){return pn.pop()||new ut}function Lt(Zt){Zt.needsFree&&fe.freeType(Zt.data),ut.call(Zt),pn.push(Zt)}function Ct(){Ge.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function zt(Zt,dn,bt){var Ut=Zt.images[0]=At();Zt.mipmask=1,Ut.width=Zt.width=dn,Ut.height=Zt.height=bt,Ut.channels=Zt.channels=4}function Gt(Zt,dn){var bt=null;if(m(dn))ct(bt=Zt.images[0]=At(),Zt),kt(bt,dn),Zt.mipmask=1;else if(pt(Zt,dn),Array.isArray(dn.mipmap))for(var Ut=dn.mipmap,Xt=0;Xt<Ut.length;++Xt)ct(bt=Zt.images[Xt]=At(),Zt),bt.width>>=Xt,bt.height>>=Xt,kt(bt,Ut[Xt]),Zt.mipmask|=1<<Xt;else ct(bt=Zt.images[0]=At(),Zt),kt(bt,dn),Zt.mipmask=1;ct(Zt,Zt.images[0])}function rn(Zt,dn){for(var bt=Zt.images,Ut=0;Ut<bt.length&&bt[Ut];++Ut){var Xt=bt[Ut],un=dn,cn=Ut,vn=Xt.element,en=Xt.data,Vt=Xt.internalformat,Ht=Xt.format,tn=Xt.type,sn=Xt.width,wn=Xt.height;gt(Xt),vn?Ne.texImage2D(un,cn,Ht,Ht,tn,vn):Xt.compressed?Ne.compressedTexImage2D(un,cn,Vt,sn,wn,0,en):Xt.needsCopy?(tt(),Ne.copyTexImage2D(un,cn,Ht,Xt.xOffset,Xt.yOffset,sn,wn,0)):Ne.texImage2D(un,cn,Ht,sn,wn,0,Ht,tn,en||null)}}function Nt(){var Zt=Cn.pop()||new Ct;Ge.call(Zt);for(var dn=Zt.mipmask=0;16>dn;++dn)Zt.images[dn]=null;return Zt}function Wt(Zt){for(var dn=Zt.images,bt=0;bt<dn.length;++bt)dn[bt]&&Lt(dn[bt]),dn[bt]=null;Cn.push(Zt)}function Rt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Ln(Zt,dn){"min"in dn&&(Zt.minFilter=Mn[dn.min],0<=Ae.indexOf(Zt.minFilter)&&!("faces"in dn)&&(Zt.genMipmaps=!0)),"mag"in dn&&(Zt.magFilter=xn[dn.mag]);var bt=Zt.wrapS,Ut=Zt.wrapT;if("wrap"in dn){var Xt=dn.wrap;typeof Xt=="string"?bt=Ut=mn[Xt]:Array.isArray(Xt)&&(bt=mn[Xt[0]],Ut=mn[Xt[1]])}else"wrapS"in dn&&(bt=mn[dn.wrapS]),"wrapT"in dn&&(Ut=mn[dn.wrapT]);if(Zt.wrapS=bt,Zt.wrapT=Ut,"anisotropic"in dn&&(Zt.anisotropic=dn.anisotropic),"mipmap"in dn){switch(bt=!1,typeof dn.mipmap){case"string":Zt.mipmapHint=ln[dn.mipmap],bt=Zt.genMipmaps=!0;break;case"boolean":bt=Zt.genMipmaps=dn.mipmap;break;case"object":Zt.genMipmaps=!1,bt=!0}!bt||"min"in dn||(Zt.minFilter=9984)}}function bn(Zt,dn){Ne.texParameteri(dn,10241,Zt.minFilter),Ne.texParameteri(dn,10240,Zt.magFilter),Ne.texParameteri(dn,10242,Zt.wrapS),Ne.texParameteri(dn,10243,Zt.wrapT),We.ext_texture_filter_anisotropic&&Ne.texParameteri(dn,34046,Zt.anisotropic),Zt.genMipmaps&&(Ne.hint(33170,Zt.mipmapHint),Ne.generateMipmap(dn))}function hn(Zt){Ge.call(this),this.mipmask=0,this.internalformat=6408,this.id=Vn++,this.refCount=1,this.target=Zt,this.texture=Ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Rt,nt.profile&&(this.stats={size:0})}function Kt(Zt){Ne.activeTexture(33984),Ne.bindTexture(Zt.target,Zt.texture)}function on(){var Zt=fr[0];Zt?Ne.bindTexture(Zt.target,Zt.texture):Ne.bindTexture(3553,null)}function $t(Zt){var dn=Zt.texture,bt=Zt.unit,Ut=Zt.target;0<=bt&&(Ne.activeTexture(33984+bt),Ne.bindTexture(Ut,null),fr[bt]=null),Ne.deleteTexture(dn),Zt.texture=null,Zt.params=null,Zt.pixels=null,Zt.refCount=0,delete Fn[Zt.id],Fe.textureCount--}var ln={"don't care":4352,"dont care":4352,nice:4354,fast:4353},mn={repeat:10497,clamp:33071,mirror:33648},xn={nearest:9728,linear:9729},Mn=Y({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},xn),Sn={none:0,browser:37444},Tn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Rn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Pn={};We.ext_srgb&&(Rn.srgb=35904,Rn.srgba=35906),We.oes_texture_float&&(Tn.float32=Tn.float=5126),We.oes_texture_half_float&&(Tn.float16=Tn["half float"]=36193),We.webgl_depth_texture&&(Y(Rn,{depth:6402,"depth stencil":34041}),Y(Tn,{uint16:5123,uint32:5125,"depth stencil":34042})),We.webgl_compressed_texture_s3tc&&Y(Pn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),We.webgl_compressed_texture_atc&&Y(Pn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),We.webgl_compressed_texture_pvrtc&&Y(Pn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),We.webgl_compressed_texture_etc1&&(Pn["rgb etc1"]=36196);var jn=Array.prototype.slice.call(Ne.getParameter(34467));Object.keys(Pn).forEach(function(Zt){var dn=Pn[Zt];0<=jn.indexOf(dn)&&(Rn[Zt]=dn)});var Jn=Object.keys(Rn);ot.textureFormats=Jn;var $n=[];Object.keys(Rn).forEach(function(Zt){$n[Rn[Zt]]=Zt});var Gn=[];Object.keys(Tn).forEach(function(Zt){Gn[Tn[Zt]]=Zt});var lr=[];Object.keys(xn).forEach(function(Zt){lr[xn[Zt]]=Zt});var Jt=[];Object.keys(Mn).forEach(function(Zt){Jt[Mn[Zt]]=Zt});var Qt=[];Object.keys(mn).forEach(function(Zt){Qt[mn[Zt]]=Zt});var En=Jn.reduce(function(Zt,dn){var bt=Rn[dn];return bt===6409||bt===6406||bt===6409||bt===6410||bt===6402||bt===34041||We.ext_srgb&&(bt===35904||bt===35906)?Zt[bt]=bt:bt===32855||0<=dn.indexOf("rgba")?Zt[bt]=6408:Zt[bt]=6407,Zt},{}),pn=[],Cn=[],Vn=0,Fn={},Yn=ot.maxTextureUnits,fr=Array(Yn).map(function(){return null});return Y(hn.prototype,{bind:function(){this.bindCount+=1;var Zt=this.unit;if(0>Zt){for(var dn=0;dn<Yn;++dn){var bt=fr[dn];if(bt){if(0<bt.bindCount)continue;bt.unit=-1}fr[dn]=this,Zt=dn;break}nt.profile&&Fe.maxTextureUnits<Zt+1&&(Fe.maxTextureUnits=Zt+1),this.unit=Zt,Ne.activeTexture(33984+Zt),Ne.bindTexture(this.target,this.texture)}return Zt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&$t(this)}}),nt.profile&&(Fe.getTotalTextureSize=function(){var Zt=0;return Object.keys(Fn).forEach(function(dn){Zt+=Fn[dn].stats.size}),Zt}),{create2D:function(Zt,dn){function bt(Xt,un){var cn=Ut.texInfo;Rt.call(cn);var vn=Nt();return typeof Xt=="number"?zt(vn,0|Xt,typeof un=="number"?0|un:0|Xt):Xt?(Ln(cn,Xt),Gt(vn,Xt)):zt(vn,1,1),cn.genMipmaps&&(vn.mipmask=(vn.width<<1)-1),Ut.mipmask=vn.mipmask,ct(Ut,vn),Ut.internalformat=vn.internalformat,bt.width=vn.width,bt.height=vn.height,Kt(Ut),rn(vn,3553),bn(cn,3553),on(),Wt(vn),nt.profile&&(Ut.stats.size=f(Ut.internalformat,Ut.type,vn.width,vn.height,cn.genMipmaps,!1)),bt.format=$n[Ut.internalformat],bt.type=Gn[Ut.type],bt.mag=lr[cn.magFilter],bt.min=Jt[cn.minFilter],bt.wrapS=Qt[cn.wrapS],bt.wrapT=Qt[cn.wrapT],bt}var Ut=new hn(3553);return Fn[Ut.id]=Ut,Fe.textureCount++,bt(Zt,dn),bt.subimage=function(Xt,un,cn,vn){un|=0,cn|=0,vn|=0;var en=At();return ct(en,Ut),en.width=0,en.height=0,kt(en,Xt),en.width=en.width||(Ut.width>>vn)-un,en.height=en.height||(Ut.height>>vn)-cn,Kt(Ut),mt(en,3553,un,cn,vn),on(),Lt(en),bt},bt.resize=function(Xt,un){var cn=0|Xt,vn=0|un||cn;if(cn===Ut.width&&vn===Ut.height)return bt;bt.width=Ut.width=cn,bt.height=Ut.height=vn,Kt(Ut);for(var en=0;Ut.mipmask>>en;++en){var Vt=cn>>en,Ht=vn>>en;if(!Vt||!Ht)break;Ne.texImage2D(3553,en,Ut.format,Vt,Ht,0,Ut.format,Ut.type,null)}return on(),nt.profile&&(Ut.stats.size=f(Ut.internalformat,Ut.type,cn,vn,!1,!1)),bt},bt._reglType="texture2d",bt._texture=Ut,nt.profile&&(bt.stats=Ut.stats),bt.destroy=function(){Ut.decRef()},bt},createCube:function(Zt,dn,bt,Ut,Xt,un){function cn(Vt,Ht,tn,sn,wn,An){var Dn,Bn=vn.texInfo;for(Rt.call(Bn),Dn=0;6>Dn;++Dn)en[Dn]=Nt();if(typeof Vt!="number"&&Vt){if(typeof Vt=="object")if(Ht)Gt(en[0],Vt),Gt(en[1],Ht),Gt(en[2],tn),Gt(en[3],sn),Gt(en[4],wn),Gt(en[5],An);else if(Ln(Bn,Vt),pt(vn,Vt),"faces"in Vt)for(Vt=Vt.faces,Dn=0;6>Dn;++Dn)ct(en[Dn],vn),Gt(en[Dn],Vt[Dn]);else for(Dn=0;6>Dn;++Dn)Gt(en[Dn],Vt)}else for(Vt=0|Vt||1,Dn=0;6>Dn;++Dn)zt(en[Dn],Vt,Vt);for(ct(vn,en[0]),vn.mipmask=Bn.genMipmaps?(en[0].width<<1)-1:en[0].mipmask,vn.internalformat=en[0].internalformat,cn.width=en[0].width,cn.height=en[0].height,Kt(vn),Dn=0;6>Dn;++Dn)rn(en[Dn],34069+Dn);for(bn(Bn,34067),on(),nt.profile&&(vn.stats.size=f(vn.internalformat,vn.type,cn.width,cn.height,Bn.genMipmaps,!0)),cn.format=$n[vn.internalformat],cn.type=Gn[vn.type],cn.mag=lr[Bn.magFilter],cn.min=Jt[Bn.minFilter],cn.wrapS=Qt[Bn.wrapS],cn.wrapT=Qt[Bn.wrapT],Dn=0;6>Dn;++Dn)Wt(en[Dn]);return cn}var vn=new hn(34067);Fn[vn.id]=vn,Fe.cubeCount++;var en=Array(6);return cn(Zt,dn,bt,Ut,Xt,un),cn.subimage=function(Vt,Ht,tn,sn,wn){tn|=0,sn|=0,wn|=0;var An=At();return ct(An,vn),An.width=0,An.height=0,kt(An,Ht),An.width=An.width||(vn.width>>wn)-tn,An.height=An.height||(vn.height>>wn)-sn,Kt(vn),mt(An,34069+Vt,tn,sn,wn),on(),Lt(An),cn},cn.resize=function(Vt){if((Vt|=0)!==vn.width){cn.width=vn.width=Vt,cn.height=vn.height=Vt,Kt(vn);for(var Ht=0;6>Ht;++Ht)for(var tn=0;vn.mipmask>>tn;++tn)Ne.texImage2D(34069+Ht,tn,vn.format,Vt>>tn,Vt>>tn,0,vn.format,vn.type,null);return on(),nt.profile&&(vn.stats.size=f(vn.internalformat,vn.type,cn.width,cn.height,!1,!0)),cn}},cn._reglType="textureCube",cn._texture=vn,nt.profile&&(cn.stats=vn.stats),cn.destroy=function(){vn.decRef()},cn},clear:function(){for(var Zt=0;Zt<Yn;++Zt)Ne.activeTexture(33984+Zt),Ne.bindTexture(3553,null),fr[Zt]=null;ye(Fn).forEach($t),Fe.cubeCount=0,Fe.textureCount=0},getTexture:function(Zt){return null},restore:function(){for(var Zt=0;Zt<Yn;++Zt){var dn=fr[Zt];dn&&(dn.bindCount=0,dn.unit=-1,fr[Zt]=null)}ye(Fn).forEach(function(bt){bt.texture=Ne.createTexture(),Ne.bindTexture(bt.target,bt.texture);for(var Ut=0;32>Ut;++Ut)if(bt.mipmask&1<<Ut)if(bt.target===3553)Ne.texImage2D(3553,Ut,bt.internalformat,bt.width>>Ut,bt.height>>Ut,0,bt.internalformat,bt.type,null);else for(var Xt=0;6>Xt;++Xt)Ne.texImage2D(34069+Xt,Ut,bt.internalformat,bt.width>>Ut,bt.height>>Ut,0,bt.internalformat,bt.type,null);bn(bt.texInfo,bt.target)})},refresh:function(){for(var Zt=0;Zt<Yn;++Zt){var dn=fr[Zt];dn&&(dn.bindCount=0,dn.unit=-1,fr[Zt]=null),Ne.activeTexture(33984+Zt),Ne.bindTexture(3553,null),Ne.bindTexture(34067,null)}}}}function w(Ne,We,ot,tt,Re,Fe){function nt(hn,Kt,on){this.target=hn,this.texture=Kt,this.renderbuffer=on;var $t=hn=0;Kt?(hn=Kt.width,$t=Kt.height):on&&(hn=on.width,$t=on.height),this.width=hn,this.height=$t}function Ge(hn){hn&&(hn.texture&&hn.texture._texture.decRef(),hn.renderbuffer&&hn.renderbuffer._renderbuffer.decRef())}function ct(hn,Kt,on){hn&&(hn.texture?hn.texture._texture.refCount+=1:hn.renderbuffer._renderbuffer.refCount+=1)}function pt(hn,Kt){Kt&&(Kt.texture?Ne.framebufferTexture2D(36160,hn,Kt.target,Kt.texture._texture.texture,0):Ne.framebufferRenderbuffer(36160,hn,36161,Kt.renderbuffer._renderbuffer.renderbuffer))}function gt(hn){var Kt=3553,on=null,$t=null,ln=hn;return typeof hn=="object"&&(ln=hn.data,"target"in hn&&(Kt=0|hn.target)),(hn=ln._reglType)==="texture2d"||hn==="textureCube"?on=ln:hn==="renderbuffer"&&($t=ln,Kt=36161),new nt(Kt,on,$t)}function ut(hn,Kt,on,$t,ln){return on?((hn=tt.create2D({width:hn,height:Kt,format:$t,type:ln}))._texture.refCount=0,new nt(3553,hn,null)):((hn=Re.create({width:hn,height:Kt,format:$t}))._renderbuffer.refCount=0,new nt(36161,null,hn))}function kt(hn){return hn&&(hn.texture||hn.renderbuffer)}function mt(hn,Kt,on){hn&&(hn.texture?hn.texture.resize(Kt,on):hn.renderbuffer&&hn.renderbuffer.resize(Kt,on),hn.width=Kt,hn.height=on)}function At(){this.id=Ln++,bn[this.id]=this,this.framebuffer=Ne.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Lt(hn){hn.colorAttachments.forEach(Ge),Ge(hn.depthAttachment),Ge(hn.stencilAttachment),Ge(hn.depthStencilAttachment)}function Ct(hn){Ne.deleteFramebuffer(hn.framebuffer),hn.framebuffer=null,Fe.framebufferCount--,delete bn[hn.id]}function zt(hn){var Kt;Ne.bindFramebuffer(36160,hn.framebuffer);var on=hn.colorAttachments;for(Kt=0;Kt<on.length;++Kt)pt(36064+Kt,on[Kt]);for(Kt=on.length;Kt<ot.maxColorAttachments;++Kt)Ne.framebufferTexture2D(36160,36064+Kt,3553,null,0);Ne.framebufferTexture2D(36160,33306,3553,null,0),Ne.framebufferTexture2D(36160,36096,3553,null,0),Ne.framebufferTexture2D(36160,36128,3553,null,0),pt(36096,hn.depthAttachment),pt(36128,hn.stencilAttachment),pt(33306,hn.depthStencilAttachment),Ne.checkFramebufferStatus(36160),Ne.isContextLost(),Ne.bindFramebuffer(36160,rn.next?rn.next.framebuffer:null),rn.cur=rn.next,Ne.getError()}function Gt(hn,Kt){function on(ln,mn){var xn,Mn=0,Sn=0,Tn=!0,Rn=!0;xn=null;var Pn=!0,jn="rgba",Jn="uint8",$n=1,Gn=null,lr=null,Jt=null,Qt=!1;typeof ln=="number"?(Mn=0|ln,Sn=0|mn||Mn):ln?("shape"in ln?(Mn=(Sn=ln.shape)[0],Sn=Sn[1]):("radius"in ln&&(Mn=Sn=ln.radius),"width"in ln&&(Mn=ln.width),"height"in ln&&(Sn=ln.height)),("color"in ln||"colors"in ln)&&(xn=ln.color||ln.colors,Array.isArray(xn)),xn||("colorCount"in ln&&($n=0|ln.colorCount),"colorTexture"in ln&&(Pn=!!ln.colorTexture,jn="rgba4"),"colorType"in ln&&(Jn=ln.colorType,!Pn)&&(Jn==="half float"||Jn==="float16"?jn="rgba16f":Jn!=="float"&&Jn!=="float32"||(jn="rgba32f")),"colorFormat"in ln&&(jn=ln.colorFormat,0<=Nt.indexOf(jn)?Pn=!0:0<=Wt.indexOf(jn)&&(Pn=!1))),("depthTexture"in ln||"depthStencilTexture"in ln)&&(Qt=!(!ln.depthTexture&&!ln.depthStencilTexture)),"depth"in ln&&(typeof ln.depth=="boolean"?Tn=ln.depth:(Gn=ln.depth,Rn=!1)),"stencil"in ln&&(typeof ln.stencil=="boolean"?Rn=ln.stencil:(lr=ln.stencil,Tn=!1)),"depthStencil"in ln&&(typeof ln.depthStencil=="boolean"?Tn=Rn=ln.depthStencil:(Jt=ln.depthStencil,Rn=Tn=!1))):Mn=Sn=1;var En=null,pn=null,Cn=null,Vn=null;if(Array.isArray(xn))En=xn.map(gt);else if(xn)En=[gt(xn)];else for(En=Array($n),xn=0;xn<$n;++xn)En[xn]=ut(Mn,Sn,Pn,jn,Jn);for(Mn=Mn||En[0].width,Sn=Sn||En[0].height,Gn?pn=gt(Gn):Tn&&!Rn&&(pn=ut(Mn,Sn,Qt,"depth","uint32")),lr?Cn=gt(lr):Rn&&!Tn&&(Cn=ut(Mn,Sn,!1,"stencil","uint8")),Jt?Vn=gt(Jt):!Gn&&!lr&&Rn&&Tn&&(Vn=ut(Mn,Sn,Qt,"depth stencil","depth stencil")),Tn=null,xn=0;xn<En.length;++xn)ct(En[xn]),En[xn]&&En[xn].texture&&(Rn=vt[En[xn].texture._texture.format]*ht[En[xn].texture._texture.type],Tn===null&&(Tn=Rn));return ct(pn),ct(Cn),ct(Vn),Lt($t),$t.width=Mn,$t.height=Sn,$t.colorAttachments=En,$t.depthAttachment=pn,$t.stencilAttachment=Cn,$t.depthStencilAttachment=Vn,on.color=En.map(kt),on.depth=kt(pn),on.stencil=kt(Cn),on.depthStencil=kt(Vn),on.width=$t.width,on.height=$t.height,zt($t),on}var $t=new At;return Fe.framebufferCount++,on(hn,Kt),Y(on,{resize:function(ln,mn){var xn=Math.max(0|ln,1),Mn=Math.max(0|mn||xn,1);if(xn===$t.width&&Mn===$t.height)return on;for(var Sn=$t.colorAttachments,Tn=0;Tn<Sn.length;++Tn)mt(Sn[Tn],xn,Mn);return mt($t.depthAttachment,xn,Mn),mt($t.stencilAttachment,xn,Mn),mt($t.depthStencilAttachment,xn,Mn),$t.width=on.width=xn,$t.height=on.height=Mn,zt($t),on},_reglType:"framebuffer",_framebuffer:$t,destroy:function(){Ct($t),Lt($t)},use:function(ln){rn.setFBO({framebuffer:on},ln)}})}var rn={cur:null,next:null,dirty:!1,setFBO:null},Nt=["rgba"],Wt=["rgba4","rgb565","rgb5 a1"];We.ext_srgb&&Wt.push("srgba"),We.ext_color_buffer_half_float&&Wt.push("rgba16f","rgb16f"),We.webgl_color_buffer_float&&Wt.push("rgba32f");var Rt=["uint8"];We.oes_texture_half_float&&Rt.push("half float","float16"),We.oes_texture_float&&Rt.push("float","float32");var Ln=0,bn={};return Y(rn,{getFramebuffer:function(hn){return typeof hn=="function"&&hn._reglType==="framebuffer"&&(hn=hn._framebuffer)instanceof At?hn:null},create:Gt,createCube:function(hn){function Kt($t){var ln,mn={color:null},xn=0,Mn=null;ln="rgba";var Sn="uint8",Tn=1;if(typeof $t=="number"?xn=0|$t:$t?("shape"in $t?xn=$t.shape[0]:("radius"in $t&&(xn=0|$t.radius),"width"in $t?xn=0|$t.width:"height"in $t&&(xn=0|$t.height)),("color"in $t||"colors"in $t)&&(Mn=$t.color||$t.colors,Array.isArray(Mn)),Mn||("colorCount"in $t&&(Tn=0|$t.colorCount),"colorType"in $t&&(Sn=$t.colorType),"colorFormat"in $t&&(ln=$t.colorFormat)),"depth"in $t&&(mn.depth=$t.depth),"stencil"in $t&&(mn.stencil=$t.stencil),"depthStencil"in $t&&(mn.depthStencil=$t.depthStencil)):xn=1,Mn)if(Array.isArray(Mn))for($t=[],ln=0;ln<Mn.length;++ln)$t[ln]=Mn[ln];else $t=[Mn];else for($t=Array(Tn),Mn={radius:xn,format:ln,type:Sn},ln=0;ln<Tn;++ln)$t[ln]=tt.createCube(Mn);for(mn.color=Array($t.length),ln=0;ln<$t.length;++ln)Tn=$t[ln],xn=xn||Tn.width,mn.color[ln]={target:34069,data:$t[ln]};for(ln=0;6>ln;++ln){for(Tn=0;Tn<$t.length;++Tn)mn.color[Tn].target=34069+ln;0<ln&&(mn.depth=on[0].depth,mn.stencil=on[0].stencil,mn.depthStencil=on[0].depthStencil),on[ln]?on[ln](mn):on[ln]=Gt(mn)}return Y(Kt,{width:xn,height:xn,color:$t})}var on=Array(6);return Kt(hn),Y(Kt,{faces:on,resize:function($t){var ln=0|$t;if(ln===Kt.width)return Kt;var mn=Kt.color;for($t=0;$t<mn.length;++$t)mn[$t].resize(ln);for($t=0;6>$t;++$t)on[$t].resize(ln);return Kt.width=Kt.height=ln,Kt},_reglType:"framebufferCube",destroy:function(){on.forEach(function($t){$t.destroy()})}})},clear:function(){ye(bn).forEach(Ct)},restore:function(){rn.cur=null,rn.next=null,rn.dirty=!0,ye(bn).forEach(function(hn){hn.framebuffer=Ne.createFramebuffer(),zt(hn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function O(Ne,We,ot,tt,Re,Fe,nt){function Ge(){this.id=++gt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var mt=We.oes_vertex_array_object;this.vao=mt?mt.createVertexArrayOES():null,ut[this.id]=this,this.buffers=[]}var ct=ot.maxAttributes,pt=Array(ct);for(ot=0;ot<ct;++ot)pt[ot]=new E;var gt=0,ut={},kt={Record:E,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:We.oes_vertex_array_object?function(){We.oes_vertex_array_object&&ye(ut).forEach(function(mt){mt.refresh()})}:function(){},createVAO:function(mt){function At(Ct){var zt;Array.isArray(Ct)?(zt=Ct,Lt.elements&&Lt.ownsElements&&Lt.elements.destroy(),Lt.elements=null,Lt.ownsElements=!1,Lt.offset=0,Lt.count=0,Lt.instances=-1,Lt.primitive=4):(Ct.elements?(zt=Ct.elements,Lt.ownsElements?(typeof zt=="function"&&zt._reglType==="elements"?Lt.elements.destroy():Lt.elements(zt),Lt.ownsElements=!1):Fe.getElements(Ct.elements)?(Lt.elements=Ct.elements,Lt.ownsElements=!1):(Lt.elements=Fe.create(Ct.elements),Lt.ownsElements=!0)):(Lt.elements=null,Lt.ownsElements=!1),zt=Ct.attributes,Lt.offset=0,Lt.count=-1,Lt.instances=-1,Lt.primitive=4,Lt.elements&&(Lt.count=Lt.elements._elements.vertCount,Lt.primitive=Lt.elements._elements.primType),"offset"in Ct&&(Lt.offset=0|Ct.offset),"count"in Ct&&(Lt.count=0|Ct.count),"instances"in Ct&&(Lt.instances=0|Ct.instances),"primitive"in Ct&&(Lt.primitive=Se[Ct.primitive])),Ct={};var Gt=Lt.attributes;Gt.length=zt.length;for(var rn=0;rn<zt.length;++rn){var Nt,Wt=zt[rn],Rt=Gt[rn]=new E,Ln=Wt.data||Wt;Array.isArray(Ln)||ve(Ln)||t(Ln)?(Lt.buffers[rn]&&(Nt=Lt.buffers[rn],ve(Ln)&&Nt._buffer.byteLength>=Ln.byteLength?Nt.subdata(Ln):(Nt.destroy(),Lt.buffers[rn]=null)),Lt.buffers[rn]||(Nt=Lt.buffers[rn]=Re.create(Wt,34962,!1,!0)),Rt.buffer=Re.getBuffer(Nt),Rt.size=0|Rt.buffer.dimension,Rt.normalized=!1,Rt.type=Rt.buffer.dtype,Rt.offset=0,Rt.stride=0,Rt.divisor=0,Rt.state=1,Ct[rn]=1):Re.getBuffer(Wt)?(Rt.buffer=Re.getBuffer(Wt),Rt.size=0|Rt.buffer.dimension,Rt.normalized=!1,Rt.type=Rt.buffer.dtype,Rt.offset=0,Rt.stride=0,Rt.divisor=0,Rt.state=1):Re.getBuffer(Wt.buffer)?(Rt.buffer=Re.getBuffer(Wt.buffer),Rt.size=0|(+Wt.size||Rt.buffer.dimension),Rt.normalized=!!Wt.normalized||!1,Rt.type="type"in Wt?Pe[Wt.type]:Rt.buffer.dtype,Rt.offset=0|(Wt.offset||0),Rt.stride=0|(Wt.stride||0),Rt.divisor=0|(Wt.divisor||0),Rt.state=1):"x"in Wt&&(Rt.x=+Wt.x||0,Rt.y=+Wt.y||0,Rt.z=+Wt.z||0,Rt.w=+Wt.w||0,Rt.state=2)}for(Nt=0;Nt<Lt.buffers.length;++Nt)!Ct[Nt]&&Lt.buffers[Nt]&&(Lt.buffers[Nt].destroy(),Lt.buffers[Nt]=null);return Lt.refresh(),At}var Lt=new Ge;return tt.vaoCount+=1,At.destroy=function(){for(var Ct=0;Ct<Lt.buffers.length;++Ct)Lt.buffers[Ct]&&Lt.buffers[Ct].destroy();Lt.buffers.length=0,Lt.ownsElements&&(Lt.elements.destroy(),Lt.elements=null,Lt.ownsElements=!1),Lt.destroy()},At._vao=Lt,At._reglType="vao",At(mt)},getVAO:function(mt){return typeof mt=="function"&&mt._vao?mt._vao:null},destroyBuffer:function(mt){for(var At=0;At<pt.length;++At){var Lt=pt[At];Lt.buffer===mt&&(Ne.disableVertexAttribArray(At),Lt.buffer=null)}},setVAO:We.oes_vertex_array_object?function(mt){if(mt!==kt.currentVAO){var At=We.oes_vertex_array_object;mt?At.bindVertexArrayOES(mt.vao):At.bindVertexArrayOES(null),kt.currentVAO=mt}}:function(mt){if(mt!==kt.currentVAO){if(mt)mt.bindAttrs();else{for(var At=We.angle_instanced_arrays,Lt=0;Lt<pt.length;++Lt){var Ct=pt[Lt];Ct.buffer?(Ne.enableVertexAttribArray(Lt),Ct.buffer.bind(),Ne.vertexAttribPointer(Lt,Ct.size,Ct.type,Ct.normalized,Ct.stride,Ct.offfset),At&&Ct.divisor&&At.vertexAttribDivisorANGLE(Lt,Ct.divisor)):(Ne.disableVertexAttribArray(Lt),Ne.vertexAttrib4f(Lt,Ct.x,Ct.y,Ct.z,Ct.w))}nt.elements?Ne.bindBuffer(34963,nt.elements.buffer.buffer):Ne.bindBuffer(34963,null)}kt.currentVAO=mt}},clear:We.oes_vertex_array_object?function(){ye(ut).forEach(function(mt){mt.destroy()})}:function(){}};return Ge.prototype.bindAttrs=function(){for(var mt=We.angle_instanced_arrays,At=this.attributes,Lt=0;Lt<At.length;++Lt){var Ct=At[Lt];Ct.buffer?(Ne.enableVertexAttribArray(Lt),Ne.bindBuffer(34962,Ct.buffer.buffer),Ne.vertexAttribPointer(Lt,Ct.size,Ct.type,Ct.normalized,Ct.stride,Ct.offset),mt&&Ct.divisor&&mt.vertexAttribDivisorANGLE(Lt,Ct.divisor)):(Ne.disableVertexAttribArray(Lt),Ne.vertexAttrib4f(Lt,Ct.x,Ct.y,Ct.z,Ct.w))}for(mt=At.length;mt<ct;++mt)Ne.disableVertexAttribArray(mt);(mt=Fe.getElements(this.elements))?Ne.bindBuffer(34963,mt.buffer.buffer):Ne.bindBuffer(34963,null)},Ge.prototype.refresh=function(){var mt=We.oes_vertex_array_object;mt&&(mt.bindVertexArrayOES(this.vao),this.bindAttrs(),kt.currentVAO=null,mt.bindVertexArrayOES(null))},Ge.prototype.destroy=function(){if(this.vao){var mt=We.oes_vertex_array_object;this===kt.currentVAO&&(kt.currentVAO=null,mt.bindVertexArrayOES(null)),mt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ut[this.id]&&(delete ut[this.id],--tt.vaoCount)},kt}function C(Ne,We,ot,tt){function Re(At,Lt,Ct,zt){this.name=At,this.id=Lt,this.location=Ct,this.info=zt}function Fe(At,Lt){for(var Ct=0;Ct<At.length;++Ct)if(At[Ct].id===Lt.id)return void(At[Ct].location=Lt.location);At.push(Lt)}function nt(At,Lt,Ct){if(!(Gt=(Ct=At===35632?pt:gt)[Lt])){var zt=We.str(Lt),Gt=Ne.createShader(At);Ne.shaderSource(Gt,zt),Ne.compileShader(Gt),Ct[Lt]=Gt}return Gt}function Ge(At,Lt){this.id=mt++,this.fragId=At,this.vertId=Lt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,tt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ct(At,Lt,Ct){var zt;zt=nt(35632,At.fragId);var Gt=nt(35633,At.vertId);if(Lt=At.program=Ne.createProgram(),Ne.attachShader(Lt,zt),Ne.attachShader(Lt,Gt),Ct)for(zt=0;zt<Ct.length;++zt)Gt=Ct[zt],Ne.bindAttribLocation(Lt,Gt[0],Gt[1]);Ne.linkProgram(Lt),Gt=Ne.getProgramParameter(Lt,35718),tt.profile&&(At.stats.uniformsCount=Gt);var rn=At.uniforms;for(zt=0;zt<Gt;++zt)if(Ct=Ne.getActiveUniform(Lt,zt))if(1<Ct.size)for(var Nt=0;Nt<Ct.size;++Nt){var Wt=Ct.name.replace("[0]","["+Nt+"]");Fe(rn,new Re(Wt,We.id(Wt),Ne.getUniformLocation(Lt,Wt),Ct))}else Fe(rn,new Re(Ct.name,We.id(Ct.name),Ne.getUniformLocation(Lt,Ct.name),Ct));for(Gt=Ne.getProgramParameter(Lt,35721),tt.profile&&(At.stats.attributesCount=Gt),At=At.attributes,zt=0;zt<Gt;++zt)(Ct=Ne.getActiveAttrib(Lt,zt))&&Fe(At,new Re(Ct.name,We.id(Ct.name),Ne.getAttribLocation(Lt,Ct.name),Ct))}var pt={},gt={},ut={},kt=[],mt=0;return tt.profile&&(ot.getMaxUniformsCount=function(){var At=0;return kt.forEach(function(Lt){Lt.stats.uniformsCount>At&&(At=Lt.stats.uniformsCount)}),At},ot.getMaxAttributesCount=function(){var At=0;return kt.forEach(function(Lt){Lt.stats.attributesCount>At&&(At=Lt.stats.attributesCount)}),At}),{clear:function(){var At=Ne.deleteShader.bind(Ne);ye(pt).forEach(At),pt={},ye(gt).forEach(At),gt={},kt.forEach(function(Lt){Ne.deleteProgram(Lt.program)}),kt.length=0,ut={},ot.shaderCount=0},program:function(At,Lt,Ct,zt){var Gt=ut[Lt];Gt||(Gt=ut[Lt]={});var rn=Gt[At];if(rn&&(rn.refCount++,!zt))return rn;var Nt=new Ge(Lt,At);return ot.shaderCount++,ct(Nt,Ct,zt),rn||(Gt[At]=Nt),kt.push(Nt),Y(Nt,{destroy:function(){if(Nt.refCount--,0>=Nt.refCount){Ne.deleteProgram(Nt.program);var Wt=kt.indexOf(Nt);kt.splice(Wt,1),ot.shaderCount--}0>=Gt[Nt.vertId].refCount&&(Ne.deleteShader(gt[Nt.vertId]),delete gt[Nt.vertId],delete ut[Nt.fragId][Nt.vertId]),Object.keys(ut[Nt.fragId]).length||(Ne.deleteShader(pt[Nt.fragId]),delete pt[Nt.fragId],delete ut[Nt.fragId])}})},restore:function(){pt={},gt={};for(var At=0;At<kt.length;++At)ct(kt[At],null,kt[At].attributes.map(function(Lt){return[Lt.location,Lt.name]}))},shader:nt,frag:-1,vert:-1}}function P(Ne,We,ot,tt,Re,Fe,nt){function Ge(ct){var pt;pt=We.next===null?5121:We.next.colorAttachments[0].texture._texture.type;var gt=0,ut=0,kt=tt.framebufferWidth,mt=tt.framebufferHeight,At=null;return ve(ct)?At=ct:ct&&(gt=0|ct.x,ut=0|ct.y,kt=0|(ct.width||tt.framebufferWidth-gt),mt=0|(ct.height||tt.framebufferHeight-ut),At=ct.data||null),ot(),ct=kt*mt*4,At||(pt===5121?At=new Uint8Array(ct):pt===5126&&(At=At||new Float32Array(ct))),Ne.pixelStorei(3333,4),Ne.readPixels(gt,ut,kt,mt,6408,pt,At),At}return function(ct){return ct&&"framebuffer"in ct?function(pt){var gt;return We.setFBO({framebuffer:pt.framebuffer},function(){gt=Ge(pt)}),gt}(ct):Ge(ct)}}function D(Ne,We){return Ne>>>We|Ne<<32-We}function U(Ne,We){var ot=(65535&Ne)+(65535&We);return(Ne>>16)+(We>>16)+(ot>>16)<<16|65535&ot}function I(Ne){return Array.prototype.slice.call(Ne)}function N(Ne){return I(Ne).join("")}function W(Ne){function We(){var gt=[],ut=[];return Y(function(){gt.push.apply(gt,I(arguments))},{def:function(){var kt="v"+Re++;return ut.push(kt),0<arguments.length&&(gt.push(kt,"="),gt.push.apply(gt,I(arguments)),gt.push(";")),kt},toString:function(){return N([0<ut.length?"var "+ut.join(",")+";":"",N(gt)])}})}function ot(){function gt(Lt,Ct){kt(Lt,Ct,"=",ut.def(Lt,Ct),";")}var ut=We(),kt=We(),mt=ut.toString,At=kt.toString;return Y(function(){ut.apply(ut,I(arguments))},{def:ut.def,entry:ut,exit:kt,save:gt,set:function(Lt,Ct,zt){gt(Lt,Ct),ut(Lt,Ct,"=",zt,";")},toString:function(){return mt()+At()}})}var tt=Ne&&Ne.cache,Re=0,Fe=[],nt=[],Ge=[],ct=We(),pt={};return{global:ct,link:function(gt,ut){var kt=ut&&ut.stable;if(!kt){for(var mt=0;mt<nt.length;++mt)if(nt[mt]===gt&&!Ge[mt])return Fe[mt]}return mt="g"+Re++,Fe.push(mt),nt.push(gt),Ge.push(kt),mt},block:We,proc:function(gt,ut){function kt(){var Ct="a"+mt.length;return mt.push(Ct),Ct}var mt=[];ut=ut||0;for(var At=0;At<ut;++At)kt();var Lt=(At=ot()).toString;return pt[gt]=Y(At,{arg:kt,toString:function(){return N(["function(",mt.join(),"){",Lt(),"}"])}})},scope:ot,cond:function(){var gt=N(arguments),ut=ot(),kt=ot(),mt=ut.toString,At=kt.toString;return Y(ut,{then:function(){return ut.apply(ut,I(arguments)),this},else:function(){return kt.apply(kt,I(arguments)),this},toString:function(){var Lt=At();return Lt&&(Lt="else{"+Lt+"}"),N(["if(",gt,"){",mt(),"}",Lt])}})},compile:function(){var gt=['"use strict";',ct,"return {"];Object.keys(pt).forEach(function(mt){gt.push('"',mt,'":',pt[mt].toString(),",")}),gt.push("}");var ut,kt=N(gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return tt&&(ut=function(mt){for(var At,Lt="",Ct=0;Ct<mt.length;Ct++)At=mt.charCodeAt(Ct),Lt+="0123456789abcdef".charAt(At>>>4&15)+"0123456789abcdef".charAt(15&At);return Lt}(function(mt){for(var At=Array(mt.length>>2),Lt=0;Lt<At.length;Lt++)At[Lt]=0;for(Lt=0;Lt<8*mt.length;Lt+=8)At[Lt>>5]|=(255&mt.charCodeAt(Lt/8))<<24-Lt%32;var Ct,zt,Gt,rn,Nt,Wt,Rt,Ln,bn,hn,Kt,on=8*mt.length;for(mt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Lt=Array(64),At[on>>5]|=128<<24-on%32,At[15+(on+64>>9<<4)]=on,Ln=0;Ln<At.length;Ln+=16){for(on=mt[0],Ct=mt[1],zt=mt[2],Gt=mt[3],rn=mt[4],Nt=mt[5],Wt=mt[6],Rt=mt[7],bn=0;64>bn;bn++){var $t;16>bn?Lt[bn]=At[bn+Ln]:(hn=bn,Kt=U(Kt=D(Kt=Lt[bn-2],17)^D(Kt,19)^Kt>>>10,Lt[bn-7]),$t=D($t=Lt[bn-15],7)^D($t,18)^$t>>>3,Lt[hn]=U(U(Kt,$t),Lt[bn-16])),hn=U(U(U(U(Rt,hn=D(hn=rn,6)^D(hn,11)^D(hn,25)),rn&Nt^~rn&Wt),Qe[bn]),Lt[bn]),Kt=U(Rt=D(Rt=on,2)^D(Rt,13)^D(Rt,22),on&Ct^on&zt^Ct&zt),Rt=Wt,Wt=Nt,Nt=rn,rn=U(Gt,hn),Gt=zt,zt=Ct,Ct=on,on=U(hn,Kt)}mt[0]=U(on,mt[0]),mt[1]=U(Ct,mt[1]),mt[2]=U(zt,mt[2]),mt[3]=U(Gt,mt[3]),mt[4]=U(rn,mt[4]),mt[5]=U(Nt,mt[5]),mt[6]=U(Wt,mt[6]),mt[7]=U(Rt,mt[7])}for(At="",Lt=0;Lt<32*mt.length;Lt+=8)At+=String.fromCharCode(mt[Lt>>5]>>>24-Lt%32&255);return At}(function(mt){for(var At,Lt,Ct="",zt=-1;++zt<mt.length;)At=mt.charCodeAt(zt),Lt=zt+1<mt.length?mt.charCodeAt(zt+1):0,55296<=At&&56319>=At&&56320<=Lt&&57343>=Lt&&(At=65536+((1023&At)<<10)+(1023&Lt),zt++),127>=At?Ct+=String.fromCharCode(At):2047>=At?Ct+=String.fromCharCode(192|At>>>6&31,128|63&At):65535>=At?Ct+=String.fromCharCode(224|At>>>12&15,128|At>>>6&63,128|63&At):2097151>=At&&(Ct+=String.fromCharCode(240|At>>>18&7,128|At>>>12&63,128|At>>>6&63,128|63&At));return Ct}(kt))),tt[ut])?tt[ut].apply(null,nt):(kt=Function.apply(null,Fe.concat(kt)),tt&&(tt[ut]=kt),kt.apply(null,nt))}}}function F(Ne){return Array.isArray(Ne)||ve(Ne)||t(Ne)}function j(Ne){return Ne.sort(function(We,ot){return We==="viewport"?-1:ot==="viewport"?1:We<ot?-1:1})}function H(Ne,We,ot,tt){this.thisDep=Ne,this.contextDep=We,this.propDep=ot,this.append=tt}function te(Ne){return Ne&&!(Ne.thisDep||Ne.contextDep||Ne.propDep)}function Q(Ne){return new H(!1,!1,!1,Ne)}function $(Ne,We){var ot=Ne.type;if(ot===0)return new H(!0,1<=(ot=Ne.data.length),2<=ot,We);if(ot===4)return new H((ot=Ne.data).thisDep,ot.contextDep,ot.propDep,We);if(ot===5)return new H(!1,!1,!1,We);if(ot===6){for(var tt=ot=!1,Re=!1,Fe=0;Fe<Ne.data.length;++Fe){var nt=Ne.data[Fe];nt.type===1?Re=!0:nt.type===2?tt=!0:nt.type===3?ot=!0:nt.type===0?(ot=!0,1<=(nt=nt.data)&&(tt=!0),2<=nt&&(Re=!0)):nt.type===4&&(ot=ot||nt.data.thisDep,tt=tt||nt.data.contextDep,Re=Re||nt.data.propDep)}return new H(ot,tt,Re,We)}return new H(ot===3,ot===2,ot===1,We)}function K(Ne,We,ot,tt,Re,Fe,nt,Ge,ct,pt,gt,ut,kt,mt,At,Lt){function Ct(bt){return bt.replace(".","_")}function zt(bt,Ut,Xt){var un=Ct(bt);Vn.push(bt),Cn[un]=pn[un]=!!Xt,Fn[un]=Ut}function Gt(bt,Ut,Xt){var un=Ct(bt);Vn.push(bt),Array.isArray(Xt)?(pn[un]=Xt.slice(),Cn[un]=Xt.slice()):pn[un]=Cn[un]=Xt,Yn[un]=Ut}function rn(){var bt=W({cache:At}),Ut=bt.link,Xt=bt.global;bt.id=dn++,bt.batchId="0";var un=Ut(fr),cn=bt.shared={props:"a0"};Object.keys(fr).forEach(function(tn){cn[tn]=Xt.def(un,".",tn)});var vn=bt.next={},en=bt.current={};Object.keys(Yn).forEach(function(tn){Array.isArray(pn[tn])&&(vn[tn]=Xt.def(cn.next,".",tn),en[tn]=Xt.def(cn.current,".",tn))});var Vt=bt.constants={};Object.keys(Zt).forEach(function(tn){Vt[tn]=Xt.def(JSON.stringify(Zt[tn]))}),bt.invoke=function(tn,sn){switch(sn.type){case 0:var wn=["this",cn.context,cn.props,bt.batchId];return tn.def(Ut(sn.data),".call(",wn.slice(0,Math.max(sn.data.length+1,4)),")");case 1:return tn.def(cn.props,sn.data);case 2:return tn.def(cn.context,sn.data);case 3:return tn.def("this",sn.data);case 4:return sn.data.append(bt,tn),sn.data.ref;case 5:return sn.data.toString();case 6:return sn.data.map(function(An){return bt.invoke(tn,An)})}},bt.attribCache={};var Ht={};return bt.scopeAttrib=function(tn){if((tn=We.id(tn))in Ht)return Ht[tn];var sn=pt.scope[tn];return sn||(sn=pt.scope[tn]=new Gn),Ht[tn]=Ut(sn)},bt}function Nt(bt,Ut){var Xt=bt.static,un=bt.dynamic;if("framebuffer"in Xt){var cn=Xt.framebuffer;return cn?(cn=Ge.getFramebuffer(cn),Q(function(en,Vt){var Ht=en.link(cn),tn=en.shared;return Vt.set(tn.framebuffer,".next",Ht),tn=tn.context,Vt.set(tn,".framebufferWidth",Ht+".width"),Vt.set(tn,".framebufferHeight",Ht+".height"),Ht})):Q(function(en,Vt){var Ht=en.shared;return Vt.set(Ht.framebuffer,".next","null"),Ht=Ht.context,Vt.set(Ht,".framebufferWidth",Ht+".drawingBufferWidth"),Vt.set(Ht,".framebufferHeight",Ht+".drawingBufferHeight"),"null"})}if("framebuffer"in un){var vn=un.framebuffer;return $(vn,function(en,Vt){var Ht=en.invoke(Vt,vn),tn=en.shared,sn=tn.framebuffer;return Ht=Vt.def(sn,".getFramebuffer(",Ht,")"),Vt.set(sn,".next",Ht),tn=tn.context,Vt.set(tn,".framebufferWidth",Ht+"?"+Ht+".width:"+tn+".drawingBufferWidth"),Vt.set(tn,".framebufferHeight",Ht+"?"+Ht+".height:"+tn+".drawingBufferHeight"),Ht})}return null}function Wt(bt,Ut,Xt){function un(tn){if(tn in cn){var sn=We.id(cn[tn]);return(tn=Q(function(){return sn})).id=sn,tn}if(tn in vn){var wn=vn[tn];return $(wn,function(An,Dn){var Bn=An.invoke(Dn,wn);return Dn.def(An.shared.strings,".id(",Bn,")")})}return null}var cn=bt.static,vn=bt.dynamic,en=un("frag"),Vt=un("vert"),Ht=null;return te(en)&&te(Vt)?(Ht=gt.program(Vt.id,en.id,null,Xt),bt=Q(function(tn,sn){return tn.link(Ht)})):bt=new H(en&&en.thisDep||Vt&&Vt.thisDep,en&&en.contextDep||Vt&&Vt.contextDep,en&&en.propDep||Vt&&Vt.propDep,function(tn,sn){var wn,An,Dn=tn.shared.shader;return wn=en?en.append(tn,sn):sn.def(Dn,".","frag"),An=Vt?Vt.append(tn,sn):sn.def(Dn,".","vert"),sn.def(Dn+".program("+An+","+wn+")")}),{frag:en,vert:Vt,progVar:bt,program:Ht}}function Rt(bt,Ut){function Xt(Bn,Xn){if(Bn in un){var Un=0|un[Bn];return Xn?vn.offset=Un:vn.instances=Un,Q(function(Qn,Zn){return Xn&&(Qn.OFFSET=Un),Un})}if(Bn in cn){var tr=cn[Bn];return $(tr,function(Qn,Zn){var ur=Qn.invoke(Zn,tr);return Xn&&(Qn.OFFSET=ur),ur})}if(Xn){if(Ht)return Q(function(Qn,Zn){return Qn.OFFSET=0});if(en)return new H(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Qn,Zn){return Zn.def(Qn.shared.vao+".currentVAO?"+Qn.shared.vao+".currentVAO.offset:0")})}else if(en)return new H(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Qn,Zn){return Zn.def(Qn.shared.vao+".currentVAO?"+Qn.shared.vao+".currentVAO.instances:-1")});return null}var un=bt.static,cn=bt.dynamic,vn={},en=!1,Vt=function(){if("vao"in un){var Bn=un.vao;return Bn!==null&&pt.getVAO(Bn)===null&&(Bn=pt.createVAO(Bn)),en=!0,vn.vao=Bn,Q(function(Un){var tr=pt.getVAO(Bn);return tr?Un.link(tr):"null"})}if("vao"in cn){en=!0;var Xn=cn.vao;return $(Xn,function(Un,tr){var Qn=Un.invoke(tr,Xn);return tr.def(Un.shared.vao+".getVAO("+Qn+")")})}return null}(),Ht=!1,tn=function(){if("elements"in un){var Bn=un.elements;if(vn.elements=Bn,F(Bn)){var Xn=vn.elements=Fe.create(Bn,!0);Bn=Fe.getElements(Xn),Ht=!0}else Bn&&(Bn=Fe.getElements(Bn),Ht=!0);return Xn=Q(function(tr,Qn){if(Bn){var Zn=tr.link(Bn);return tr.ELEMENTS=Zn}return tr.ELEMENTS=null}),Xn.value=Bn,Xn}if("elements"in cn){Ht=!0;var Un=cn.elements;return $(Un,function(tr,Qn){var Zn=(ur=tr.shared).isBufferArgs,ur=ur.elements,mr=tr.invoke(Qn,Un),hr=Qn.def("null");return Zn=Qn.def(Zn,"(",mr,")"),mr=tr.cond(Zn).then(hr,"=",ur,".createStream(",mr,");").else(hr,"=",ur,".getElements(",mr,");"),Qn.entry(mr),Qn.exit(tr.cond(Zn).then(ur,".destroyStream(",hr,");")),tr.ELEMENTS=hr})}return en?new H(Vt.thisDep,Vt.contextDep,Vt.propDep,function(tr,Qn){return Qn.def(tr.shared.vao+".currentVAO?"+tr.shared.elements+".getElements("+tr.shared.vao+".currentVAO.elements):null")}):null}(),sn=Xt("offset",!0),wn=function(){if("primitive"in un){var Bn=un.primitive;return vn.primitive=Bn,Q(function(Un,tr){return Se[Bn]})}if("primitive"in cn){var Xn=cn.primitive;return $(Xn,function(Un,tr){var Qn=Un.constants.primTypes,Zn=Un.invoke(tr,Xn);return tr.def(Qn,"[",Zn,"]")})}return Ht?te(tn)?tn.value?Q(function(Un,tr){return tr.def(Un.ELEMENTS,".primType")}):Q(function(){return 4}):new H(tn.thisDep,tn.contextDep,tn.propDep,function(Un,tr){var Qn=Un.ELEMENTS;return tr.def(Qn,"?",Qn,".primType:",4)}):en?new H(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Un,tr){return tr.def(Un.shared.vao+".currentVAO?"+Un.shared.vao+".currentVAO.primitive:4")}):null}(),An=function(){if("count"in un){var Bn=0|un.count;return vn.count=Bn,Q(function(){return Bn})}if("count"in cn){var Xn=cn.count;return $(Xn,function(Un,tr){return Un.invoke(tr,Xn)})}return Ht?te(tn)?tn?sn?new H(sn.thisDep,sn.contextDep,sn.propDep,function(Un,tr){return tr.def(Un.ELEMENTS,".vertCount-",Un.OFFSET)}):Q(function(Un,tr){return tr.def(Un.ELEMENTS,".vertCount")}):Q(function(){return-1}):new H(tn.thisDep||sn.thisDep,tn.contextDep||sn.contextDep,tn.propDep||sn.propDep,function(Un,tr){var Qn=Un.ELEMENTS;return Un.OFFSET?tr.def(Qn,"?",Qn,".vertCount-",Un.OFFSET,":-1"):tr.def(Qn,"?",Qn,".vertCount:-1")}):en?new H(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Un,tr){return tr.def(Un.shared.vao,".currentVAO?",Un.shared.vao,".currentVAO.count:-1")}):null}(),Dn=Xt("instances",!1);return{elements:tn,primitive:wn,count:An,instances:Dn,offset:sn,vao:Vt,vaoActive:en,elementsActive:Ht,static:vn}}function Ln(bt,Ut){var Xt=bt.static,un=bt.dynamic,cn={};return Object.keys(Xt).forEach(function(vn){var en=Xt[vn],Vt=We.id(vn),Ht=new Gn;if(F(en))Ht.state=1,Ht.buffer=Re.getBuffer(Re.create(en,34962,!1,!0)),Ht.type=0;else if(sn=Re.getBuffer(en))Ht.state=1,Ht.buffer=sn,Ht.type=0;else if("constant"in en){var tn=en.constant;Ht.buffer="null",Ht.state=2,typeof tn=="number"?Ht.x=tn:Je.forEach(function(Un,tr){tr<tn.length&&(Ht[Un]=tn[tr])})}else{var sn=F(en.buffer)?Re.getBuffer(Re.create(en.buffer,34962,!1,!0)):Re.getBuffer(en.buffer),wn=0|en.offset,An=0|en.stride,Dn=0|en.size,Bn=!!en.normalized,Xn=0;"type"in en&&(Xn=Pe[en.type]),en=0|en.divisor,Ht.buffer=sn,Ht.state=1,Ht.size=Dn,Ht.normalized=Bn,Ht.type=Xn||sn.dtype,Ht.offset=wn,Ht.stride=An,Ht.divisor=en}cn[vn]=Q(function(Un,tr){var Qn=Un.attribCache;if(Vt in Qn)return Qn[Vt];var Zn={isStream:!1};return Object.keys(Ht).forEach(function(ur){Zn[ur]=Ht[ur]}),Ht.buffer&&(Zn.buffer=Un.link(Ht.buffer),Zn.type=Zn.type||Zn.buffer+".dtype"),Qn[Vt]=Zn})}),Object.keys(un).forEach(function(vn){var en=un[vn];cn[vn]=$(en,function(Vt,Ht){function tn(Qn){Ht(Bn[Qn],"=",sn,".",Qn,"|0;")}var sn=Vt.invoke(Ht,en),wn=Vt.shared,An=Vt.constants,Dn=wn.isBufferArgs,Bn=(wn=wn.buffer,{isStream:Ht.def(!1)}),Xn=new Gn;Xn.state=1,Object.keys(Xn).forEach(function(Qn){Bn[Qn]=Ht.def(""+Xn[Qn])});var Un=Bn.buffer,tr=Bn.type;return Ht("if(",Dn,"(",sn,")){",Bn.isStream,"=true;",Un,"=",wn,".createStream(",34962,",",sn,");",tr,"=",Un,".dtype;","}else{",Un,"=",wn,".getBuffer(",sn,");","if(",Un,"){",tr,"=",Un,".dtype;",'}else if("constant" in ',sn,"){",Bn.state,"=",2,";","if(typeof "+sn+'.constant === "number"){',Bn[Je[0]],"=",sn,".constant;",Je.slice(1).map(function(Qn){return Bn[Qn]}).join("="),"=0;","}else{",Je.map(function(Qn,Zn){return Bn[Qn]+"="+sn+".constant.length>"+Zn+"?"+sn+".constant["+Zn+"]:0;"}).join(""),"}}else{","if(",Dn,"(",sn,".buffer)){",Un,"=",wn,".createStream(",34962,",",sn,".buffer);","}else{",Un,"=",wn,".getBuffer(",sn,".buffer);","}",tr,'="type" in ',sn,"?",An.glTypes,"[",sn,".type]:",Un,".dtype;",Bn.normalized,"=!!",sn,".normalized;"),tn("size"),tn("offset"),tn("stride"),tn("divisor"),Ht("}}"),Ht.exit("if(",Bn.isStream,"){",wn,".destroyStream(",Un,");","}"),Bn})}),cn}function bn(bt,Ut,Xt,un,cn){function vn(Xn){var Un=Vt[Xn];Un&&(tn[Xn]=Un)}var en=function(Xn,Un){if(typeof(tr=Xn.static).frag=="string"&&typeof tr.vert=="string"){if(0<Object.keys(Un.dynamic).length)return null;var tr=Un.static,Qn=Object.keys(tr);if(0<Qn.length&&typeof tr[Qn[0]]=="number"){for(var Zn=[],ur=0;ur<Qn.length;++ur)Zn.push([0|tr[Qn[ur]],Qn[ur]]);return Zn}}return null}(bt,Ut),Vt=function(Xn,Un,tr){function Qn(hr){if(hr in Zn){var rr=Zn[hr];hr=!0;var gr,xr,Pr=0|rr.x,ii=0|rr.y;return"width"in rr?gr=0|rr.width:hr=!1,"height"in rr?xr=0|rr.height:hr=!1,new H(!hr&&Un&&Un.thisDep,!hr&&Un&&Un.contextDep,!hr&&Un&&Un.propDep,function(Vi,ti){var ki=Vi.shared.context,Or=gr;"width"in rr||(Or=ti.def(ki,".","framebufferWidth","-",Pr));var hi=xr;return"height"in rr||(hi=ti.def(ki,".","framebufferHeight","-",ii)),[Pr,ii,Or,hi]})}if(hr in ur){var oi=ur[hr];return hr=$(oi,function(Vi,ti){var ki=Vi.invoke(ti,oi),Or=Vi.shared.context,hi=ti.def(ki,".x|0"),sa=ti.def(ki,".y|0");return[hi,sa,ti.def('"width" in ',ki,"?",ki,".width|0:","(",Or,".","framebufferWidth","-",hi,")"),ki=ti.def('"height" in ',ki,"?",ki,".height|0:","(",Or,".","framebufferHeight","-",sa,")")]}),Un&&(hr.thisDep=hr.thisDep||Un.thisDep,hr.contextDep=hr.contextDep||Un.contextDep,hr.propDep=hr.propDep||Un.propDep),hr}return Un?new H(Un.thisDep,Un.contextDep,Un.propDep,function(Vi,ti){var ki=Vi.shared.context;return[0,0,ti.def(ki,".","framebufferWidth"),ti.def(ki,".","framebufferHeight")]}):null}var Zn=Xn.static,ur=Xn.dynamic;if(Xn=Qn("viewport")){var mr=Xn;Xn=new H(Xn.thisDep,Xn.contextDep,Xn.propDep,function(hr,rr){var gr=mr.append(hr,rr),xr=hr.shared.context;return rr.set(xr,".viewportWidth",gr[2]),rr.set(xr,".viewportHeight",gr[3]),gr})}return{viewport:Xn,scissor_box:Qn("scissor.box")}}(bt,wn=Nt(bt)),Ht=Rt(bt),tn=function(Xn,Un){var tr=Xn.static,Qn=Xn.dynamic,Zn={};return Vn.forEach(function(ur){function mr(rr,gr){if(ur in tr){var xr=rr(tr[ur]);Zn[hr]=Q(function(){return xr})}else if(ur in Qn){var Pr=Qn[ur];Zn[hr]=$(Pr,function(ii,oi){return gr(ii,oi,ii.invoke(oi,Pr))})}}var hr=Ct(ur);switch(ur){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return mr(function(rr){return rr},function(rr,gr,xr){return xr});case"depth.func":return mr(function(rr){return Pt[rr]},function(rr,gr,xr){return gr.def(rr.constants.compareFuncs,"[",xr,"]")});case"depth.range":return mr(function(rr){return rr},function(rr,gr,xr){return[gr.def("+",xr,"[0]"),gr=gr.def("+",xr,"[1]")]});case"blend.func":return mr(function(rr){return[Ot["srcRGB"in rr?rr.srcRGB:rr.src],Ot["dstRGB"in rr?rr.dstRGB:rr.dst],Ot["srcAlpha"in rr?rr.srcAlpha:rr.src],Ot["dstAlpha"in rr?rr.dstAlpha:rr.dst]]},function(rr,gr,xr){function Pr(ti,ki){return gr.def('"',ti,ki,'" in ',xr,"?",xr,".",ti,ki,":",xr,".",ti)}rr=rr.constants.blendFuncs;var ii=Pr("src","RGB"),oi=Pr("dst","RGB"),Vi=(ii=gr.def(rr,"[",ii,"]"),gr.def(rr,"[",Pr("src","Alpha"),"]"));return[ii,oi=gr.def(rr,"[",oi,"]"),Vi,rr=gr.def(rr,"[",Pr("dst","Alpha"),"]")]});case"blend.equation":return mr(function(rr){return typeof rr=="string"?[lr[rr],lr[rr]]:typeof rr=="object"?[lr[rr.rgb],lr[rr.alpha]]:void 0},function(rr,gr,xr){var Pr=rr.constants.blendEquations,ii=gr.def(),oi=gr.def();return(rr=rr.cond("typeof ",xr,'==="string"')).then(ii,"=",oi,"=",Pr,"[",xr,"];"),rr.else(ii,"=",Pr,"[",xr,".rgb];",oi,"=",Pr,"[",xr,".alpha];"),gr(rr),[ii,oi]});case"blend.color":return mr(function(rr){return _(4,function(gr){return+rr[gr]})},function(rr,gr,xr){return _(4,function(Pr){return gr.def("+",xr,"[",Pr,"]")})});case"stencil.mask":return mr(function(rr){return 0|rr},function(rr,gr,xr){return gr.def(xr,"|0")});case"stencil.func":return mr(function(rr){return[Pt[rr.cmp||"keep"],rr.ref||0,"mask"in rr?rr.mask:-1]},function(rr,gr,xr){return[rr=gr.def('"cmp" in ',xr,"?",rr.constants.compareFuncs,"[",xr,".cmp]",":",7680),gr.def(xr,".ref|0"),gr=gr.def('"mask" in ',xr,"?",xr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return mr(function(rr){return[ur==="stencil.opBack"?1029:1028,Mt[rr.fail||"keep"],Mt[rr.zfail||"keep"],Mt[rr.zpass||"keep"]]},function(rr,gr,xr){function Pr(oi){return gr.def('"',oi,'" in ',xr,"?",ii,"[",xr,".",oi,"]:",7680)}var ii=rr.constants.stencilOps;return[ur==="stencil.opBack"?1029:1028,Pr("fail"),Pr("zfail"),Pr("zpass")]});case"polygonOffset.offset":return mr(function(rr){return[0|rr.factor,0|rr.units]},function(rr,gr,xr){return[gr.def(xr,".factor|0"),gr=gr.def(xr,".units|0")]});case"cull.face":return mr(function(rr){var gr=0;return rr==="front"?gr=1028:rr==="back"&&(gr=1029),gr},function(rr,gr,xr){return gr.def(xr,'==="front"?',1028,":",1029)});case"frontFace":return mr(function(rr){return He[rr]},function(rr,gr,xr){return gr.def(xr+'==="cw"?2304:2305')});case"colorMask":return mr(function(rr){return rr.map(function(gr){return!!gr})},function(rr,gr,xr){return _(4,function(Pr){return"!!"+xr+"["+Pr+"]"})});case"sample.coverage":return mr(function(rr){return["value"in rr?rr.value:1,!!rr.invert]},function(rr,gr,xr){return[gr.def('"value" in ',xr,"?+",xr,".value:1"),gr=gr.def("!!",xr,".invert")]})}}),Zn}(bt),sn=Wt(bt,0,en);vn("viewport"),vn(Ct("scissor.box"));var wn,An=0<Object.keys(tn).length;if((wn={framebuffer:wn,draw:Ht,shader:sn,state:tn,dirty:An,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Xn){var Un,tr=Xn.static;if(Xn=Xn.dynamic,"profile"in tr){var Qn=!!tr.profile;(Un=Q(function(ur,mr){return Qn})).enable=Qn}else if("profile"in Xn){var Zn=Xn.profile;Un=$(Zn,function(ur,mr){return ur.invoke(mr,Zn)})}return Un}(bt),wn.uniforms=function(Xn,Un){var tr=Xn.static,Qn=Xn.dynamic,Zn={};return Object.keys(tr).forEach(function(ur){var mr,hr=tr[ur];if(typeof hr=="number"||typeof hr=="boolean")mr=Q(function(){return hr});else if(typeof hr=="function"){var rr=hr._reglType;rr==="texture2d"||rr==="textureCube"?mr=Q(function(gr){return gr.link(hr)}):rr!=="framebuffer"&&rr!=="framebufferCube"||(mr=Q(function(gr){return gr.link(hr.color[0])}))}else x(hr)&&(mr=Q(function(gr){return gr.global.def("[",_(hr.length,function(xr){return hr[xr]}),"]")}));mr.value=hr,Zn[ur]=mr}),Object.keys(Qn).forEach(function(ur){var mr=Qn[ur];Zn[ur]=$(mr,function(hr,rr){return hr.invoke(rr,mr)})}),Zn}(Xt),wn.drawVAO=wn.scopeVAO=Ht.vao,!wn.drawVAO&&sn.program&&!en&&ot.angle_instanced_arrays&&Ht.static.elements){var Dn=!0;if(bt=sn.program.attributes.map(function(Xn){return Xn=Ut.static[Xn],Dn=Dn&&!!Xn,Xn}),Dn&&0<bt.length){var Bn=pt.getVAO(pt.createVAO({attributes:bt,elements:Ht.static.elements}));wn.drawVAO=new H(null,null,null,function(Xn,Un){return Xn.link(Bn)}),wn.useVAO=!0}}return en?wn.useVAO=!0:wn.attributes=Ln(Ut),wn.context=function(Xn){var Un=Xn.static,tr=Xn.dynamic,Qn={};return Object.keys(Un).forEach(function(Zn){var ur=Un[Zn];Qn[Zn]=Q(function(mr,hr){return typeof ur=="number"||typeof ur=="boolean"?""+ur:mr.link(ur)})}),Object.keys(tr).forEach(function(Zn){var ur=tr[Zn];Qn[Zn]=$(ur,function(mr,hr){return mr.invoke(hr,ur)})}),Qn}(un),wn}function hn(bt,Ut,Xt){var un=bt.shared.context,cn=bt.scope();Object.keys(Xt).forEach(function(vn){Ut.save(un,"."+vn);var en=Xt[vn].append(bt,Ut);Array.isArray(en)?cn(un,".",vn,"=[",en.join(),"];"):cn(un,".",vn,"=",en,";")}),Ut(cn)}function Kt(bt,Ut,Xt,un){var cn,vn=(Vt=bt.shared).gl,en=Vt.framebuffer;Qt&&(cn=Ut.def(Vt.extensions,".webgl_draw_buffers"));var Vt=(Ht=bt.constants).drawBuffer,Ht=Ht.backBuffer;bt=Xt?Xt.append(bt,Ut):Ut.def(en,".next"),un||Ut("if(",bt,"!==",en,".cur){"),Ut("if(",bt,"){",vn,".bindFramebuffer(",36160,",",bt,".framebuffer);"),Qt&&Ut(cn,".drawBuffersWEBGL(",Vt,"[",bt,".colorAttachments.length]);"),Ut("}else{",vn,".bindFramebuffer(",36160,",null);"),Qt&&Ut(cn,".drawBuffersWEBGL(",Ht,");"),Ut("}",en,".cur=",bt,";"),un||Ut("}")}function on(bt,Ut,Xt){var un=bt.shared,cn=un.gl,vn=bt.current,en=bt.next,Vt=un.current,Ht=un.next,tn=bt.cond(Vt,".dirty");Vn.forEach(function(sn){var wn,An;if(!((sn=Ct(sn))in Xt.state))if(sn in en){wn=en[sn],An=vn[sn];var Dn=_(pn[sn].length,function(Bn){return tn.def(wn,"[",Bn,"]")});tn(bt.cond(Dn.map(function(Bn,Xn){return Bn+"!=="+An+"["+Xn+"]"}).join("||")).then(cn,".",Yn[sn],"(",Dn,");",Dn.map(function(Bn,Xn){return An+"["+Xn+"]="+Bn}).join(";"),";"))}else wn=tn.def(Ht,".",sn),Dn=bt.cond(wn,"!==",Vt,".",sn),tn(Dn),sn in Fn?Dn(bt.cond(wn).then(cn,".enable(",Fn[sn],");").else(cn,".disable(",Fn[sn],");"),Vt,".",sn,"=",wn,";"):Dn(cn,".",Yn[sn],"(",wn,");",Vt,".",sn,"=",wn,";")}),Object.keys(Xt.state).length===0&&tn(Vt,".dirty=false;"),Ut(tn)}function $t(bt,Ut,Xt,un){var cn,vn=bt.shared,en=bt.current,Vt=vn.current,Ht=vn.gl;j(Object.keys(Xt)).forEach(function(tn){var sn=Xt[tn];if(!un||un(sn)){var wn=sn.append(bt,Ut);if(Fn[tn]){var An=Fn[tn];te(sn)?(cn=bt.link(wn,{stable:!0}),Ut(bt.cond(cn).then(Ht,".enable(",An,");").else(Ht,".disable(",An,");")),Ut(Vt,".",tn,"=",cn,";")):(Ut(bt.cond(wn).then(Ht,".enable(",An,");").else(Ht,".disable(",An,");")),Ut(Vt,".",tn,"=",wn,";"))}else if(x(wn)){var Dn=en[tn];Ut(Ht,".",Yn[tn],"(",wn,");",wn.map(function(Bn,Xn){return Dn+"["+Xn+"]="+Bn}).join(";"),";")}else te(sn)?(cn=bt.link(wn,{stable:!0}),Ut(Ht,".",Yn[tn],"(",cn,");",Vt,".",tn,"=",cn,";")):Ut(Ht,".",Yn[tn],"(",wn,");",Vt,".",tn,"=",wn,";")}})}function ln(bt,Ut){Jt&&(bt.instancing=Ut.def(bt.shared.extensions,".angle_instanced_arrays"))}function mn(bt,Ut,Xt,un,cn){function vn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function en(Xn){Xn(tn=Ut.def(),"=",vn(),";"),typeof cn=="string"?Xn(An,".count+=",cn,";"):Xn(An,".count++;"),mt&&(un?Xn(sn=Ut.def(),"=",Bn,".getNumPendingQueries();"):Xn(Bn,".beginQuery(",An,");"))}function Vt(Xn){Xn(An,".cpuTime+=",vn(),"-",tn,";"),mt&&(un?Xn(Bn,".pushScopeStats(",sn,",",Bn,".getNumPendingQueries(),",An,");"):Xn(Bn,".endQuery();"))}function Ht(Xn){var Un=Ut.def(Dn,".profile");Ut(Dn,".profile=",Xn,";"),Ut.exit(Dn,".profile=",Un,";")}var tn,sn,wn=bt.shared,An=bt.stats,Dn=wn.current,Bn=wn.timer;if(Xt=Xt.profile){if(te(Xt))return void(Xt.enable?(en(Ut),Vt(Ut.exit),Ht("true")):Ht("false"));Ht(Xt=Xt.append(bt,Ut))}else Xt=Ut.def(Dn,".profile");en(wn=bt.block()),Ut("if(",Xt,"){",wn,"}"),Vt(bt=bt.block()),Ut.exit("if(",Xt,"){",bt,"}")}function xn(bt,Ut,Xt,un,cn){function vn(Vt,Ht,tn){function sn(){Ut("if(!",Bn,".buffer){",An,".enableVertexAttribArray(",Dn,");}");var Qn,Zn=tn.type;Qn=tn.size?Ut.def(tn.size,"||",Ht):Ht,Ut("if(",Bn,".type!==",Zn,"||",Bn,".size!==",Qn,"||",tr.map(function(ur){return Bn+"."+ur+"!=="+tn[ur]}).join("||"),"){",An,".bindBuffer(",34962,",",Xn,".buffer);",An,".vertexAttribPointer(",[Dn,Qn,Zn,tn.normalized,tn.stride,tn.offset],");",Bn,".type=",Zn,";",Bn,".size=",Qn,";",tr.map(function(ur){return Bn+"."+ur+"="+tn[ur]+";"}).join(""),"}"),Jt&&(Zn=tn.divisor,Ut("if(",Bn,".divisor!==",Zn,"){",bt.instancing,".vertexAttribDivisorANGLE(",[Dn,Zn],");",Bn,".divisor=",Zn,";}"))}function wn(){Ut("if(",Bn,".buffer){",An,".disableVertexAttribArray(",Dn,");",Bn,".buffer=null;","}if(",Je.map(function(Qn,Zn){return Bn+"."+Qn+"!=="+Un[Zn]}).join("||"),"){",An,".vertexAttrib4f(",Dn,",",Un,");",Je.map(function(Qn,Zn){return Bn+"."+Qn+"="+Un[Zn]+";"}).join(""),"}")}var An=en.gl,Dn=Ut.def(Vt,".location"),Bn=Ut.def(en.attributes,"[",Dn,"]");Vt=tn.state;var Xn=tn.buffer,Un=[tn.x,tn.y,tn.z,tn.w],tr=["buffer","normalized","offset","stride"];Vt===1?sn():Vt===2?wn():(Ut("if(",Vt,"===",1,"){"),sn(),Ut("}else{"),wn(),Ut("}"))}var en=bt.shared;un.forEach(function(Vt){var Ht,tn=Vt.name,sn=Xt.attributes[tn];if(sn){if(!cn(sn))return;Ht=sn.append(bt,Ut)}else{if(!cn(Ye))return;var wn=bt.scopeAttrib(tn);Ht={},Object.keys(new Gn).forEach(function(An){Ht[An]=Ut.def(wn,".",An)})}vn(bt.link(Vt),function(An){switch(An){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Vt.info.type),Ht)})}function Mn(bt,Ut,Xt,un,cn,vn){for(var en,Vt=bt.shared,Ht=Vt.gl,tn=0;tn<un.length;++tn){var sn,wn=(Bn=un[tn]).name,An=Bn.info.type,Dn=Xt.uniforms[wn],Bn=bt.link(Bn)+".location";if(Dn){if(!cn(Dn))continue;if(te(Dn)){if(wn=Dn.value,An===35678||An===35680)Ut(Ht,".uniform1i(",Bn,",",(An=bt.link(wn._texture||wn.color[0]._texture))+".bind());"),Ut.exit(An,".unbind();");else if(An===35674||An===35675||An===35676)Dn=2,An===35675?Dn=3:An===35676&&(Dn=4),Ut(Ht,".uniformMatrix",Dn,"fv(",Bn,",false,",wn=bt.global.def("new Float32Array(["+Array.prototype.slice.call(wn)+"])"),");");else{switch(An){case 5126:en="1f";break;case 35664:en="2f";break;case 35665:en="3f";break;case 35666:en="4f";break;case 35670:case 5124:en="1i";break;case 35671:case 35667:en="2i";break;case 35672:case 35668:en="3i";break;case 35673:case 35669:en="4i"}Ut(Ht,".uniform",en,"(",Bn,",",x(wn)?Array.prototype.slice.call(wn):wn,");")}continue}sn=Dn.append(bt,Ut)}else{if(!cn(Ye))continue;sn=Ut.def(Vt.uniforms,"[",We.id(wn),"]")}switch(An===35678?Ut("if(",sn,"&&",sn,'._reglType==="framebuffer"){',sn,"=",sn,".color[0];","}"):An===35680&&Ut("if(",sn,"&&",sn,'._reglType==="framebufferCube"){',sn,"=",sn,".color[0];","}"),wn=1,An){case 35678:case 35680:An=Ut.def(sn,"._texture"),Ut(Ht,".uniform1i(",Bn,",",An,".bind());"),Ut.exit(An,".unbind();");continue;case 5124:case 35670:en="1i";break;case 35667:case 35671:en="2i",wn=2;break;case 35668:case 35672:en="3i",wn=3;break;case 35669:case 35673:en="4i",wn=4;break;case 5126:en="1f";break;case 35664:en="2f",wn=2;break;case 35665:en="3f",wn=3;break;case 35666:en="4f",wn=4;break;case 35674:en="Matrix2fv";break;case 35675:en="Matrix3fv";break;case 35676:en="Matrix4fv"}if(en.charAt(0)==="M"){Ut(Ht,".uniform",en,"(",Bn,","),Bn=Math.pow(An-35674+2,2);var Xn=bt.global.def("new Float32Array(",Bn,")");Array.isArray(sn)?Ut("false,(",_(Bn,function(tr){return Xn+"["+tr+"]="+sn[tr]}),",",Xn,")"):Ut("false,(Array.isArray(",sn,")||",sn," instanceof Float32Array)?",sn,":(",_(Bn,function(tr){return Xn+"["+tr+"]="+sn+"["+tr+"]"}),",",Xn,")"),Ut(");")}else{if(1<wn){An=[];var Un=[];for(Dn=0;Dn<wn;++Dn)Array.isArray(sn)?Un.push(sn[Dn]):Un.push(Ut.def(sn+"["+Dn+"]")),vn&&An.push(Ut.def());vn&&Ut("if(!",bt.batchId,"||",An.map(function(tr,Qn){return tr+"!=="+Un[Qn]}).join("||"),"){",An.map(function(tr,Qn){return tr+"="+Un[Qn]+";"}).join("")),Ut(Ht,".uniform",en,"(",Bn,",",Un.join(","),");")}else vn&&(An=Ut.def(),Ut("if(!",bt.batchId,"||",An,"!==",sn,"){",An,"=",sn,";")),Ut(Ht,".uniform",en,"(",Bn,",",sn,");");vn&&Ut("}")}}}function Sn(bt,Ut,Xt,un){function cn(Zn){var ur=An[Zn];return ur?ur.contextDep&&un.contextDynamic||ur.propDep?ur.append(bt,Xt):ur.append(bt,Ut):Ut.def(wn,".",Zn)}function vn(){function Zn(){Xt(Ht,".drawElementsInstancedANGLE(",[Bn,Un,tr,Xn+"<<(("+tr+"-5121)>>1)",Vt],");")}function ur(){Xt(Ht,".drawArraysInstancedANGLE(",[Bn,Xn,Un,Vt],");")}Dn&&Dn!=="null"?Qn?Zn():(Xt("if(",Dn,"){"),Zn(),Xt("}else{"),ur(),Xt("}")):ur()}function en(){function Zn(){Xt(sn+".drawElements("+[Bn,Un,tr,Xn+"<<(("+tr+"-5121)>>1)"]+");")}function ur(){Xt(sn+".drawArrays("+[Bn,Xn,Un]+");")}Dn&&Dn!=="null"?Qn?Zn():(Xt("if(",Dn,"){"),Zn(),Xt("}else{"),ur(),Xt("}")):ur()}var Vt,Ht,tn=bt.shared,sn=tn.gl,wn=tn.draw,An=un.draw,Dn=function(){var Zn=An.elements,ur=Ut;return Zn?((Zn.contextDep&&un.contextDynamic||Zn.propDep)&&(ur=Xt),Zn=Zn.append(bt,ur),An.elementsActive&&ur("if("+Zn+")"+sn+".bindBuffer(34963,"+Zn+".buffer.buffer);")):(Zn=ur.def(),ur(Zn,"=",wn,".","elements",";","if(",Zn,"){",sn,".bindBuffer(",34963,",",Zn,".buffer.buffer);}","else if(",tn.vao,".currentVAO){",Zn,"=",bt.shared.elements+".getElements("+tn.vao,".currentVAO.elements);",En?"":"if("+Zn+")"+sn+".bindBuffer(34963,"+Zn+".buffer.buffer);","}")),Zn}(),Bn=cn("primitive"),Xn=cn("offset"),Un=function(){var Zn=An.count,ur=Ut;return Zn?((Zn.contextDep&&un.contextDynamic||Zn.propDep)&&(ur=Xt),Zn=Zn.append(bt,ur)):Zn=ur.def(wn,".","count"),Zn}();if(typeof Un=="number"){if(Un===0)return}else Xt("if(",Un,"){"),Xt.exit("}");Jt&&(Vt=cn("instances"),Ht=bt.instancing);var tr=Dn+".type",Qn=An.elements&&te(An.elements)&&!An.vaoActive;Jt&&(typeof Vt!="number"||0<=Vt)?typeof Vt=="string"?(Xt("if(",Vt,">0){"),vn(),Xt("}else if(",Vt,"<0){"),en(),Xt("}")):vn():en()}function Tn(bt,Ut,Xt,un,cn){return cn=(Ut=rn()).proc("body",cn),Jt&&(Ut.instancing=cn.def(Ut.shared.extensions,".angle_instanced_arrays")),bt(Ut,cn,Xt,un),Ut.compile().body}function Rn(bt,Ut,Xt,un){ln(bt,Ut),Xt.useVAO?Xt.drawVAO?Ut(bt.shared.vao,".setVAO(",Xt.drawVAO.append(bt,Ut),");"):Ut(bt.shared.vao,".setVAO(",bt.shared.vao,".targetVAO);"):(Ut(bt.shared.vao,".setVAO(null);"),xn(bt,Ut,Xt,un.attributes,function(){return!0})),Mn(bt,Ut,Xt,un.uniforms,function(){return!0},!1),Sn(bt,Ut,Ut,Xt)}function Pn(bt,Ut,Xt,un){function cn(){return!0}bt.batchId="a1",ln(bt,Ut),xn(bt,Ut,Xt,un.attributes,cn),Mn(bt,Ut,Xt,un.uniforms,cn,!1),Sn(bt,Ut,Ut,Xt)}function jn(bt,Ut,Xt,un){function cn(wn){return wn.contextDep&&en||wn.propDep}function vn(wn){return!cn(wn)}ln(bt,Ut);var en=Xt.contextDep,Vt=Ut.def(),Ht=Ut.def();bt.shared.props=Ht,bt.batchId=Vt;var tn=bt.scope(),sn=bt.scope();Ut(tn.entry,"for(",Vt,"=0;",Vt,"<","a1",";++",Vt,"){",Ht,"=","a0","[",Vt,"];",sn,"}",tn.exit),Xt.needsContext&&hn(bt,sn,Xt.context),Xt.needsFramebuffer&&Kt(bt,sn,Xt.framebuffer),$t(bt,sn,Xt.state,cn),Xt.profile&&cn(Xt.profile)&&mn(bt,sn,Xt,!1,!0),un?(Xt.useVAO?Xt.drawVAO?cn(Xt.drawVAO)?sn(bt.shared.vao,".setVAO(",Xt.drawVAO.append(bt,sn),");"):tn(bt.shared.vao,".setVAO(",Xt.drawVAO.append(bt,tn),");"):tn(bt.shared.vao,".setVAO(",bt.shared.vao,".targetVAO);"):(tn(bt.shared.vao,".setVAO(null);"),xn(bt,tn,Xt,un.attributes,vn),xn(bt,sn,Xt,un.attributes,cn)),Mn(bt,tn,Xt,un.uniforms,vn,!1),Mn(bt,sn,Xt,un.uniforms,cn,!0),Sn(bt,tn,sn,Xt)):(Ut=bt.global.def("{}"),un=Xt.shader.progVar.append(bt,sn),Ht=sn.def(un,".id"),tn=sn.def(Ut,"[",Ht,"]"),sn(bt.shared.gl,".useProgram(",un,".program);","if(!",tn,"){",tn,"=",Ut,"[",Ht,"]=",bt.link(function(wn){return Tn(Pn,bt,Xt,wn,2)}),"(",un,");}",tn,".call(this,a0[",Vt,"],",Vt,");"))}function Jn(bt,Ut){function Xt(Vt){var Ht=Ut.shader[Vt];Ht&&(Ht=Ht.append(bt,un),isNaN(Ht)?un.set(cn.shader,"."+Vt,Ht):un.set(cn.shader,"."+Vt,bt.link(Ht,{stable:!0})))}var un=bt.proc("scope",3);bt.batchId="a2";var cn=bt.shared,vn=cn.current;if(hn(bt,un,Ut.context),Ut.framebuffer&&Ut.framebuffer.append(bt,un),j(Object.keys(Ut.state)).forEach(function(Vt){var Ht=Ut.state[Vt],tn=Ht.append(bt,un);x(tn)?tn.forEach(function(sn,wn){isNaN(sn)?un.set(bt.next[Vt],"["+wn+"]",sn):un.set(bt.next[Vt],"["+wn+"]",bt.link(sn,{stable:!0}))}):te(Ht)?un.set(cn.next,"."+Vt,bt.link(tn,{stable:!0})):un.set(cn.next,"."+Vt,tn)}),mn(bt,un,Ut,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Vt){var Ht=Ut.draw[Vt];Ht&&(Ht=Ht.append(bt,un),isNaN(Ht)?un.set(cn.draw,"."+Vt,Ht):un.set(cn.draw,"."+Vt,bt.link(Ht),{stable:!0}))}),Object.keys(Ut.uniforms).forEach(function(Vt){var Ht=Ut.uniforms[Vt].append(bt,un);Array.isArray(Ht)&&(Ht="["+Ht.map(function(tn){return isNaN(tn)?tn:bt.link(tn,{stable:!0})})+"]"),un.set(cn.uniforms,"["+bt.link(We.id(Vt),{stable:!0})+"]",Ht)}),Object.keys(Ut.attributes).forEach(function(Vt){var Ht=Ut.attributes[Vt].append(bt,un),tn=bt.scopeAttrib(Vt);Object.keys(new Gn).forEach(function(sn){un.set(tn,"."+sn,Ht[sn])})}),Ut.scopeVAO){var en=Ut.scopeVAO.append(bt,un);isNaN(en)?un.set(cn.vao,".targetVAO",en):un.set(cn.vao,".targetVAO",bt.link(en,{stable:!0}))}Xt("vert"),Xt("frag"),0<Object.keys(Ut.state).length&&(un(vn,".dirty=true;"),un.exit(vn,".dirty=true;")),un("a1(",bt.shared.context,",a0,",bt.batchId,");")}function $n(bt,Ut,Xt){var un=Ut.static[Xt];if(un&&function(sn){if(typeof sn=="object"&&!x(sn)){for(var wn=Object.keys(sn),An=0;An<wn.length;++An)if(se.isDynamic(sn[wn[An]]))return!0;return!1}}(un)){var cn=bt.global,vn=Object.keys(un),en=!1,Vt=!1,Ht=!1,tn=bt.global.def("{}");vn.forEach(function(sn){var wn=un[sn];if(se.isDynamic(wn))typeof wn=="function"&&(wn=un[sn]=se.unbox(wn)),sn=$(wn,null),en=en||sn.thisDep,Ht=Ht||sn.propDep,Vt=Vt||sn.contextDep;else{switch(cn(tn,".",sn,"="),typeof wn){case"number":cn(wn);break;case"string":cn('"',wn,'"');break;case"object":Array.isArray(wn)&&cn("[",wn.join(),"]");break;default:cn(bt.link(wn))}cn(";")}}),Ut.dynamic[Xt]=new se.DynamicVariable(4,{thisDep:en,contextDep:Vt,propDep:Ht,ref:tn,append:function(sn,wn){vn.forEach(function(An){var Dn=un[An];se.isDynamic(Dn)&&(Dn=sn.invoke(wn,Dn),wn(tn,".",An,"=",Dn,";"))})}}),delete Ut.static[Xt]}}var Gn=pt.Record,lr={add:32774,subtract:32778,"reverse subtract":32779};ot.ext_blend_minmax&&(lr.min=32775,lr.max=32776);var Jt=ot.angle_instanced_arrays,Qt=ot.webgl_draw_buffers,En=ot.oes_vertex_array_object,pn={dirty:!0,profile:Lt.profile},Cn={},Vn=[],Fn={},Yn={};zt("dither",3024),zt("blend.enable",3042),Gt("blend.color","blendColor",[0,0,0,0]),Gt("blend.equation","blendEquationSeparate",[32774,32774]),Gt("blend.func","blendFuncSeparate",[1,0,1,0]),zt("depth.enable",2929,!0),Gt("depth.func","depthFunc",513),Gt("depth.range","depthRange",[0,1]),Gt("depth.mask","depthMask",!0),Gt("colorMask","colorMask",[!0,!0,!0,!0]),zt("cull.enable",2884),Gt("cull.face","cullFace",1029),Gt("frontFace","frontFace",2305),Gt("lineWidth","lineWidth",1),zt("polygonOffset.enable",32823),Gt("polygonOffset.offset","polygonOffset",[0,0]),zt("sample.alpha",32926),zt("sample.enable",32928),Gt("sample.coverage","sampleCoverage",[1,!1]),zt("stencil.enable",2960),Gt("stencil.mask","stencilMask",-1),Gt("stencil.func","stencilFunc",[519,0,-1]),Gt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Gt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),zt("scissor.enable",3089),Gt("scissor.box","scissor",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]),Gt("viewport","viewport",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]);var fr={gl:Ne,context:kt,strings:We,next:Cn,current:pn,draw:ut,elements:Fe,buffer:Re,shader:gt,attributes:pt.state,vao:pt,uniforms:ct,framebuffer:Ge,extensions:ot,timer:mt,isBufferArgs:F},Zt={primTypes:Se,compareFuncs:Pt,blendFuncs:Ot,blendEquations:lr,stencilOps:Mt,glTypes:Pe,orientationType:He};Qt&&(Zt.backBuffer=[1029],Zt.drawBuffer=_(tt.maxDrawbuffers,function(bt){return bt===0?[0]:_(bt,function(Ut){return 36064+Ut})}));var dn=0;return{next:Cn,current:pn,procs:function(){var bt=rn(),Ut=bt.proc("poll"),Xt=bt.proc("refresh"),un=bt.block();Ut(un),Xt(un);var cn,vn=(Ht=bt.shared).gl,en=Ht.next,Vt=Ht.current;un(Vt,".dirty=false;"),Kt(bt,Ut),Kt(bt,Xt,null,!0),Jt&&(cn=bt.link(Jt)),ot.oes_vertex_array_object&&Xt(bt.link(ot.oes_vertex_array_object),".bindVertexArrayOES(null);");var Ht=Xt.def(Ht.attributes),tn=Xt.def(0),sn=bt.cond(tn,".buffer");sn.then(vn,".enableVertexAttribArray(i);",vn,".bindBuffer(",34962,",",tn,".buffer.buffer);",vn,".vertexAttribPointer(i,",tn,".size,",tn,".type,",tn,".normalized,",tn,".stride,",tn,".offset);").else(vn,".disableVertexAttribArray(i);",vn,".vertexAttrib4f(i,",tn,".x,",tn,".y,",tn,".z,",tn,".w);",tn,".buffer=null;");var wn=bt.link(tt.maxAttributes,{stable:!0});return Xt("for(var i=0;i<",wn,";++i){",tn,"=",Ht,"[i];",sn,"}"),Jt&&Xt("for(var i=0;i<",wn,";++i){",cn,".vertexAttribDivisorANGLE(i,",Ht,"[i].divisor);","}"),Xt(bt.shared.vao,".currentVAO=null;",bt.shared.vao,".setVAO(",bt.shared.vao,".targetVAO);"),Object.keys(Fn).forEach(function(An){var Dn=Fn[An],Bn=un.def(en,".",An),Xn=bt.block();Xn("if(",Bn,"){",vn,".enable(",Dn,")}else{",vn,".disable(",Dn,")}",Vt,".",An,"=",Bn,";"),Xt(Xn),Ut("if(",Bn,"!==",Vt,".",An,"){",Xn,"}")}),Object.keys(Yn).forEach(function(An){var Dn,Bn,Xn=Yn[An],Un=pn[An],tr=bt.block();tr(vn,".",Xn,"("),x(Un)?(Xn=Un.length,Dn=bt.global.def(en,".",An),Bn=bt.global.def(Vt,".",An),tr(_(Xn,function(Qn){return Dn+"["+Qn+"]"}),");",_(Xn,function(Qn){return Bn+"["+Qn+"]="+Dn+"["+Qn+"];"}).join("")),Ut("if(",_(Xn,function(Qn){return Dn+"["+Qn+"]!=="+Bn+"["+Qn+"]"}).join("||"),"){",tr,"}")):(Dn=un.def(en,".",An),Bn=un.def(Vt,".",An),tr(Dn,");",Vt,".",An,"=",Dn,";"),Ut("if(",Dn,"!==",Bn,"){",tr,"}")),Xt(tr)}),bt.compile()}(),compile:function(bt,Ut,Xt,un,cn){var vn=rn();vn.stats=vn.link(cn),Object.keys(Ut.static).forEach(function(Vt){$n(vn,Ut,Vt)}),Tt.forEach(function(Vt){$n(vn,bt,Vt)});var en=bn(bt,Ut,Xt,un);return en.shader.program&&(en.shader.program.attributes.sort(function(Vt,Ht){return Vt.name<Ht.name?-1:1}),en.shader.program.uniforms.sort(function(Vt,Ht){return Vt.name<Ht.name?-1:1})),function(Vt,Ht){var tn=Vt.proc("draw",1);ln(Vt,tn),hn(Vt,tn,Ht.context),Kt(Vt,tn,Ht.framebuffer),on(Vt,tn,Ht),$t(Vt,tn,Ht.state),mn(Vt,tn,Ht,!1,!0);var sn=Ht.shader.progVar.append(Vt,tn);if(tn(Vt.shared.gl,".useProgram(",sn,".program);"),Ht.shader.program)Rn(Vt,tn,Ht,Ht.shader.program);else{tn(Vt.shared.vao,".setVAO(null);");var wn=Vt.global.def("{}"),An=tn.def(sn,".id"),Dn=tn.def(wn,"[",An,"]");tn(Vt.cond(Dn).then(Dn,".call(this,a0);").else(Dn,"=",wn,"[",An,"]=",Vt.link(function(Bn){return Tn(Rn,Vt,Ht,Bn,1)}),"(",sn,");",Dn,".call(this,a0);"))}0<Object.keys(Ht.state).length&&tn(Vt.shared.current,".dirty=true;"),Vt.shared.vao&&tn(Vt.shared.vao,".setVAO(null);")}(vn,en),Jn(vn,en),function(Vt,Ht){function tn(Un){return Un.contextDep&&wn||Un.propDep}var sn=Vt.proc("batch",2);Vt.batchId="0",ln(Vt,sn);var wn=!1,An=!0;Object.keys(Ht.context).forEach(function(Un){wn=wn||Ht.context[Un].propDep}),wn||(hn(Vt,sn,Ht.context),An=!1);var Dn=!1;if((Bn=Ht.framebuffer)?(Bn.propDep?wn=Dn=!0:Bn.contextDep&&wn&&(Dn=!0),Dn||Kt(Vt,sn,Bn)):Kt(Vt,sn,null),Ht.state.viewport&&Ht.state.viewport.propDep&&(wn=!0),on(Vt,sn,Ht),$t(Vt,sn,Ht.state,function(Un){return!tn(Un)}),Ht.profile&&tn(Ht.profile)||mn(Vt,sn,Ht,!1,"a1"),Ht.contextDep=wn,Ht.needsContext=An,Ht.needsFramebuffer=Dn,(An=Ht.shader.progVar).contextDep&&wn||An.propDep)jn(Vt,sn,Ht,null);else if(An=An.append(Vt,sn),sn(Vt.shared.gl,".useProgram(",An,".program);"),Ht.shader.program)jn(Vt,sn,Ht,Ht.shader.program);else{sn(Vt.shared.vao,".setVAO(null);");var Bn=Vt.global.def("{}"),Xn=(Dn=sn.def(An,".id"),sn.def(Bn,"[",Dn,"]"));sn(Vt.cond(Xn).then(Xn,".call(this,a0,a1);").else(Xn,"=",Bn,"[",Dn,"]=",Vt.link(function(Un){return Tn(jn,Vt,Ht,Un,2)}),"(",An,");",Xn,".call(this,a0,a1);"))}0<Object.keys(Ht.state).length&&sn(Vt.shared.current,".dirty=true;"),Vt.shared.vao&&sn(Vt.shared.vao,".setVAO(null);")}(vn,en),Y(vn.compile(),{destroy:function(){en.shader.program.destroy()}})}}}function X(Ne,We){for(var ot=0;ot<Ne.length;++ot)if(Ne[ot]===We)return ot;return-1}var Y=function(Ne,We){for(var ot=Object.keys(We),tt=0;tt<ot.length;++tt)Ne[ot[tt]]=We[ot[tt]];return Ne},re=0,se={DynamicVariable:R,define:function(Ne,We){return new R(Ne,M(We+""))},isDynamic:function(Ne){return typeof Ne=="function"&&!Ne._reglType||Ne instanceof R},unbox:function Ne(We,ot){return typeof We=="function"?new R(0,We):typeof We=="number"||typeof We=="boolean"?new R(5,We):Array.isArray(We)?new R(6,We.map(function(tt,Re){return Ne(tt)})):We instanceof R?We:void 0},accessor:M},ae={next:typeof requestAnimationFrame=="function"?function(Ne){return requestAnimationFrame(Ne)}:function(Ne){return setTimeout(Ne,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ne){return cancelAnimationFrame(Ne)}:clearTimeout},ce=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},fe=s();fe.zero=s();var he=function(Ne,We){var ot=1;We.ext_texture_filter_anisotropic&&(ot=Ne.getParameter(34047));var tt=1,Re=1;We.webgl_draw_buffers&&(tt=Ne.getParameter(34852),Re=Ne.getParameter(36063));var Fe=!!We.oes_texture_float;if(Fe){Fe=Ne.createTexture(),Ne.bindTexture(3553,Fe),Ne.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var nt=Ne.createFramebuffer();if(Ne.bindFramebuffer(36160,nt),Ne.framebufferTexture2D(36160,36064,3553,Fe,0),Ne.bindTexture(3553,null),Ne.checkFramebufferStatus(36160)!==36053)Fe=!1;else{Ne.viewport(0,0,1,1),Ne.clearColor(1,0,0,1),Ne.clear(16384);var Ge=fe.allocType(5126,4);Ne.readPixels(0,0,1,1,6408,5126,Ge),Ne.getError()?Fe=!1:(Ne.deleteFramebuffer(nt),Ne.deleteTexture(Fe),Fe=Ge[0]===1),fe.freeType(Ge)}}return Ge=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Ge=Ne.createTexture(),nt=fe.allocType(5121,36),Ne.activeTexture(33984),Ne.bindTexture(34067,Ge),Ne.texImage2D(34069,0,6408,3,3,0,6408,5121,nt),fe.freeType(nt),Ne.bindTexture(34067,null),Ne.deleteTexture(Ge),Ge=!Ne.getError()),{colorBits:[Ne.getParameter(3410),Ne.getParameter(3411),Ne.getParameter(3412),Ne.getParameter(3413)],depthBits:Ne.getParameter(3414),stencilBits:Ne.getParameter(3415),subpixelBits:Ne.getParameter(3408),extensions:Object.keys(We).filter(function(ct){return!!We[ct]}),maxAnisotropic:ot,maxDrawbuffers:tt,maxColorAttachments:Re,pointSizeDims:Ne.getParameter(33901),lineWidthDims:Ne.getParameter(33902),maxViewportDims:Ne.getParameter(3386),maxCombinedTextureUnits:Ne.getParameter(35661),maxCubeMapSize:Ne.getParameter(34076),maxRenderbufferSize:Ne.getParameter(34024),maxTextureUnits:Ne.getParameter(34930),maxTextureSize:Ne.getParameter(3379),maxAttributes:Ne.getParameter(34921),maxVertexUniforms:Ne.getParameter(36347),maxVertexTextureUnits:Ne.getParameter(35660),maxVaryingVectors:Ne.getParameter(36348),maxFragmentUniforms:Ne.getParameter(36349),glsl:Ne.getParameter(35724),renderer:Ne.getParameter(7937),vendor:Ne.getParameter(7936),version:Ne.getParameter(7938),readFloat:Fe,npotTextureCube:Ge}},ve=function(Ne){return Ne instanceof Uint8Array||Ne instanceof Uint16Array||Ne instanceof Uint32Array||Ne instanceof Int8Array||Ne instanceof Int16Array||Ne instanceof Int32Array||Ne instanceof Float32Array||Ne instanceof Float64Array||Ne instanceof Uint8ClampedArray},ye=function(Ne){return Object.keys(Ne).map(function(We){return Ne[We]})},me={shape:function(Ne){for(var We=[];Ne.length;Ne=Ne[0])We.push(Ne.length);return We},flatten:function(Ne,We,ot,tt){var Re=1;if(We.length)for(var Fe=0;Fe<We.length;++Fe)Re*=We[Fe];else Re=0;switch(ot=tt||fe.allocType(ot,Re),We.length){case 0:break;case 1:for(tt=We[0],We=0;We<tt;++We)ot[We]=Ne[We];break;case 2:for(tt=We[0],We=We[1],Fe=Re=0;Fe<tt;++Fe)for(var nt=Ne[Fe],Ge=0;Ge<We;++Ge)ot[Re++]=nt[Ge];break;case 3:i(Ne,We[0],We[1],We[2],ot,0);break;default:r(Ne,We,0,ot,0)}return ot}},Me={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Pe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ge={dynamic:35048,stream:35040,static:35044},oe=me.flatten,ie=me.shape,de=[];de[5120]=1,de[5122]=2,de[5124]=4,de[5121]=1,de[5123]=2,de[5125]=4,de[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},_e=new Float32Array(1),we=new Uint32Array(_e.buffer),Ae=[9984,9986,9985,9987],Oe=[0,6409,6410,6407,6408],ze={};ze[6409]=ze[6406]=ze[6402]=1,ze[34041]=ze[6410]=2,ze[6407]=ze[35904]=3,ze[6408]=ze[35906]=4;var pe=d("HTMLCanvasElement"),be=d("OffscreenCanvas"),ke=d("CanvasRenderingContext2D"),Ie=d("ImageBitmap"),Ee=d("HTMLImageElement"),Be=d("HTMLVideoElement"),Ve=Object.keys(Me).concat([pe,be,ke,Ie,Ee,Be]),Ze=[];Ze[5121]=1,Ze[5126]=4,Ze[36193]=2,Ze[5123]=2,Ze[5125]=4;var rt=[];rt[32854]=2,rt[32855]=2,rt[36194]=2,rt[34041]=4,rt[33776]=.5,rt[33777]=.5,rt[33778]=1,rt[33779]=1,rt[35986]=.5,rt[35987]=1,rt[34798]=1,rt[35840]=.5,rt[35841]=.25,rt[35842]=.5,rt[35843]=.25,rt[36196]=.5;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[33189]=2,it[36168]=1,it[34041]=4,it[35907]=4,it[34836]=16,it[34842]=8,it[34843]=6;var dt=function(Ne,We,ot,tt,Re){function Fe(ut){this.id=pt++,this.refCount=1,this.renderbuffer=ut,this.format=32854,this.height=this.width=0,Re.profile&&(this.stats={size:0})}function nt(ut){var kt=ut.renderbuffer;Ne.bindRenderbuffer(36161,null),Ne.deleteRenderbuffer(kt),ut.renderbuffer=null,ut.refCount=0,delete gt[ut.id],tt.renderbufferCount--}var Ge={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};We.ext_srgb&&(Ge.srgba=35907),We.ext_color_buffer_half_float&&(Ge.rgba16f=34842,Ge.rgb16f=34843),We.webgl_color_buffer_float&&(Ge.rgba32f=34836);var ct=[];Object.keys(Ge).forEach(function(ut){ct[Ge[ut]]=ut});var pt=0,gt={};return Fe.prototype.decRef=function(){0>=--this.refCount&&nt(this)},Re.profile&&(tt.getTotalRenderbufferSize=function(){var ut=0;return Object.keys(gt).forEach(function(kt){ut+=gt[kt].stats.size}),ut}),{create:function(ut,kt){function mt(Lt,Ct){var zt=0,Gt=0,rn=32854;if(typeof Lt=="object"&&Lt?("shape"in Lt?(zt=0|(Gt=Lt.shape)[0],Gt=0|Gt[1]):("radius"in Lt&&(zt=Gt=0|Lt.radius),"width"in Lt&&(zt=0|Lt.width),"height"in Lt&&(Gt=0|Lt.height)),"format"in Lt&&(rn=Ge[Lt.format])):typeof Lt=="number"?(zt=0|Lt,Gt=typeof Ct=="number"?0|Ct:zt):Lt||(zt=Gt=1),zt!==At.width||Gt!==At.height||rn!==At.format)return mt.width=At.width=zt,mt.height=At.height=Gt,At.format=rn,Ne.bindRenderbuffer(36161,At.renderbuffer),Ne.renderbufferStorage(36161,rn,zt,Gt),Re.profile&&(At.stats.size=it[At.format]*At.width*At.height),mt.format=ct[At.format],mt}var At=new Fe(Ne.createRenderbuffer());return gt[At.id]=At,tt.renderbufferCount++,mt(ut,kt),mt.resize=function(Lt,Ct){var zt=0|Lt,Gt=0|Ct||zt;return zt===At.width&&Gt===At.height||(mt.width=At.width=zt,mt.height=At.height=Gt,Ne.bindRenderbuffer(36161,At.renderbuffer),Ne.renderbufferStorage(36161,At.format,zt,Gt),Re.profile&&(At.stats.size=it[At.format]*At.width*At.height)),mt},mt._reglType="renderbuffer",mt._renderbuffer=At,Re.profile&&(mt.stats=At.stats),mt.destroy=function(){At.decRef()},mt},clear:function(){ye(gt).forEach(nt)},restore:function(){ye(gt).forEach(function(ut){ut.renderbuffer=Ne.createRenderbuffer(),Ne.bindRenderbuffer(36161,ut.renderbuffer),Ne.renderbufferStorage(36161,ut.format,ut.width,ut.height)}),Ne.bindRenderbuffer(36161,null)}}},vt=[];vt[6408]=4,vt[6407]=3;var ht=[];ht[5121]=1,ht[5126]=4,ht[36193]=2;var Qe=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Je=["x","y","z","w"],Tt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ot={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Pt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Mt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},He={cw:2304,ccw:2305},Ye=new H(!1,!1,!1,function(){});return function(Ne){function We(){if(Pn.length===0)Nt&&Nt.update(),Gn=null;else{Gn=ae.next(We),gt();for(var Jt=Pn.length-1;0<=Jt;--Jt){var Qt=Pn[Jt];Qt&&Qt(bn,null,0)}mt.flush(),Nt&&Nt.update()}}function ot(){!Gn&&0<Pn.length&&(Gn=ae.next(We))}function tt(){Gn&&(ae.cancel(We),Gn=null)}function Re(Jt){Jt.preventDefault(),tt(),jn.forEach(function(Qt){Qt()})}function Fe(Jt){mt.getError(),Lt.restore(),ln.restore(),Kt.restore(),mn.restore(),xn.restore(),Mn.restore(),$t.restore(),Nt&&Nt.restore(),Sn.procs.refresh(),ot(),Jn.forEach(function(Qt){Qt()})}function nt(Jt){function Qt(bt,Ut){var Xt={},un={};return Object.keys(bt).forEach(function(cn){var vn=bt[cn];if(se.isDynamic(vn))un[cn]=se.unbox(vn,cn);else{if(Ut&&Array.isArray(vn)){for(var en=0;en<vn.length;++en)if(se.isDynamic(vn[en]))return void(un[cn]=se.unbox(vn,cn))}Xt[cn]=vn}}),{dynamic:un,static:Xt}}var En=Qt(Jt.context||{},!0),pn=Qt(Jt.uniforms||{},!0),Cn=Qt(Jt.attributes||{},!1);Jt=Qt(function(bt){function Ut(un){if(un in Xt){var cn=Xt[un];delete Xt[un],Object.keys(cn).forEach(function(vn){Xt[un+"."+vn]=cn[vn]})}}var Xt=Y({},bt);return delete Xt.uniforms,delete Xt.attributes,delete Xt.context,delete Xt.vao,"stencil"in Xt&&Xt.stencil.op&&(Xt.stencil.opBack=Xt.stencil.opFront=Xt.stencil.op,delete Xt.stencil.op),Ut("blend"),Ut("depth"),Ut("cull"),Ut("stencil"),Ut("polygonOffset"),Ut("scissor"),Ut("sample"),"vao"in bt&&(Xt.vao=bt.vao),Xt}(Jt),!1);var Vn={gpuTime:0,cpuTime:0,count:0},Fn=Sn.compile(Jt,Cn,pn,En,Vn),Yn=Fn.draw,fr=Fn.batch,Zt=Fn.scope,dn=[];return Y(function(bt,Ut){var Xt;if(typeof bt=="function")return Zt.call(this,null,bt,0);if(typeof Ut=="function")if(typeof bt=="number")for(Xt=0;Xt<bt;++Xt)Zt.call(this,null,Ut,Xt);else{if(!Array.isArray(bt))return Zt.call(this,bt,Ut,0);for(Xt=0;Xt<bt.length;++Xt)Zt.call(this,bt[Xt],Ut,Xt)}else if(typeof bt=="number"){if(0<bt)return fr.call(this,function(un){for(;dn.length<un;)dn.push(null);return dn}(0|bt),0|bt)}else{if(!Array.isArray(bt))return Yn.call(this,bt);if(bt.length)return fr.call(this,bt,bt.length)}},{stats:Vn,destroy:function(){Fn.destroy()}})}function Ge(Jt,Qt){var En=0;Sn.procs.poll();var pn=Qt.color;pn&&(mt.clearColor(+pn[0]||0,+pn[1]||0,+pn[2]||0,+pn[3]||0),En|=16384),"depth"in Qt&&(mt.clearDepth(+Qt.depth),En|=256),"stencil"in Qt&&(mt.clearStencil(0|Qt.stencil),En|=1024),mt.clear(En)}function ct(Jt){return Pn.push(Jt),ot(),{cancel:function(){var Qt=X(Pn,Jt);Pn[Qt]=function En(){var pn=X(Pn,En);Pn[pn]=Pn[Pn.length-1],--Pn.length,0>=Pn.length&&tt()}}}}function pt(){var Jt=Tn.viewport,Qt=Tn.scissor_box;Jt[0]=Jt[1]=Qt[0]=Qt[1]=0,bn.viewportWidth=bn.framebufferWidth=bn.drawingBufferWidth=Jt[2]=Qt[2]=mt.drawingBufferWidth,bn.viewportHeight=bn.framebufferHeight=bn.drawingBufferHeight=Jt[3]=Qt[3]=mt.drawingBufferHeight}function gt(){bn.tick+=1,bn.time=kt(),pt(),Sn.procs.poll()}function ut(){mn.refresh(),pt(),Sn.procs.refresh(),Nt&&Nt.update()}function kt(){return(ce()-Wt)/1e3}if(!(Ne=T(Ne)))return null;var mt=Ne.gl,At=mt.getContextAttributes();mt.isContextLost();var Lt=function(Jt,Qt){function En(Fn){var Yn;Fn=Fn.toLowerCase();try{Yn=pn[Fn]=Jt.getExtension(Fn)}catch{}return!!Yn}for(var pn={},Cn=0;Cn<Qt.extensions.length;++Cn){var Vn=Qt.extensions[Cn];if(!En(Vn))return Qt.onDestroy(),Qt.onDone('"'+Vn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Qt.optionalExtensions.forEach(En),{extensions:pn,restore:function(){Object.keys(pn).forEach(function(Fn){if(pn[Fn]&&!En(Fn))throw Error("(regl): error restoring extension "+Fn)})}}}(mt,Ne);if(!Lt)return null;var Ct=function(){var Jt={"":0},Qt=[""];return{id:function(En){var pn=Jt[En];return pn||(pn=Jt[En]=Qt.length,Qt.push(En),pn)},str:function(En){return Qt[En]}}}(),zt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Gt=Ne.cachedCode||{},rn=Lt.extensions,Nt=function(Jt,Qt){function En(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function pn(dn,bt,Ut){var Xt=Fn.pop()||new En;Xt.startQueryIndex=dn,Xt.endQueryIndex=bt,Xt.sum=0,Xt.stats=Ut,Yn.push(Xt)}if(!Qt.ext_disjoint_timer_query)return null;var Cn=[],Vn=[],Fn=[],Yn=[],fr=[],Zt=[];return{beginQuery:function(dn){var bt=Cn.pop()||Qt.ext_disjoint_timer_query.createQueryEXT();Qt.ext_disjoint_timer_query.beginQueryEXT(35007,bt),Vn.push(bt),pn(Vn.length-1,Vn.length,dn)},endQuery:function(){Qt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:pn,update:function(){var dn,bt;if((dn=Vn.length)!==0){Zt.length=Math.max(Zt.length,dn+1),fr.length=Math.max(fr.length,dn+1),fr[0]=0;var Ut=Zt[0]=0;for(bt=dn=0;bt<Vn.length;++bt){var Xt=Vn[bt];Qt.ext_disjoint_timer_query.getQueryObjectEXT(Xt,34919)?(Ut+=Qt.ext_disjoint_timer_query.getQueryObjectEXT(Xt,34918),Cn.push(Xt)):Vn[dn++]=Xt,fr[bt+1]=Ut,Zt[bt+1]=dn}for(Vn.length=dn,bt=dn=0;bt<Yn.length;++bt){var un=(Ut=Yn[bt]).startQueryIndex;Xt=Ut.endQueryIndex,Ut.sum+=fr[Xt]-fr[un],un=Zt[un],(Xt=Zt[Xt])===un?(Ut.stats.gpuTime+=Ut.sum/1e6,Fn.push(Ut)):(Ut.startQueryIndex=un,Ut.endQueryIndex=Xt,Yn[dn++]=Ut)}Yn.length=dn}},getNumPendingQueries:function(){return Vn.length},clear:function(){Cn.push.apply(Cn,Vn);for(var dn=0;dn<Cn.length;dn++)Qt.ext_disjoint_timer_query.deleteQueryEXT(Cn[dn]);Vn.length=0,Cn.length=0},restore:function(){Vn.length=0,Cn.length=0}}}(0,rn),Wt=ce(),Rt=mt.drawingBufferWidth,Ln=mt.drawingBufferHeight,bn={tick:0,time:0,viewportWidth:Rt,viewportHeight:Ln,framebufferWidth:Rt,framebufferHeight:Ln,drawingBufferWidth:Rt,drawingBufferHeight:Ln,pixelRatio:Ne.pixelRatio},hn=(Rt={elements:null,primitive:4,count:-1,offset:0,instances:-1},he(mt,rn)),Kt=u(mt,zt,Ne,function(Jt){return $t.destroyBuffer(Jt)}),on=h(mt,rn,Kt,zt),$t=O(mt,rn,hn,zt,Kt,on,Rt),ln=C(mt,Ct,zt,Ne),mn=S(mt,rn,hn,function(){Sn.procs.poll()},bn,zt,Ne),xn=dt(mt,rn,0,zt,Ne),Mn=w(mt,rn,hn,mn,xn,zt),Sn=K(mt,Ct,rn,hn,Kt,on,0,Mn,{},$t,ln,Rt,bn,Nt,Gt,Ne),Tn=(Ct=P(mt,Mn,Sn.procs.poll,bn),Sn.next),Rn=mt.canvas,Pn=[],jn=[],Jn=[],$n=[Ne.onDestroy],Gn=null;Rn&&(Rn.addEventListener("webglcontextlost",Re,!1),Rn.addEventListener("webglcontextrestored",Fe,!1));var lr=Mn.setFBO=nt({framebuffer:se.define.call(null,1,"framebuffer")});return ut(),At=Y(nt,{clear:function(Jt){if("framebuffer"in Jt)if(Jt.framebuffer&&Jt.framebuffer_reglType==="framebufferCube")for(var Qt=0;6>Qt;++Qt)lr(Y({framebuffer:Jt.framebuffer.faces[Qt]},Jt),Ge);else lr(Jt,Ge);else Ge(0,Jt)},prop:se.define.bind(null,1),context:se.define.bind(null,2),this:se.define.bind(null,3),draw:nt({}),buffer:function(Jt){return Kt.create(Jt,34962,!1,!1)},elements:function(Jt){return on.create(Jt,!1)},texture:mn.create2D,cube:mn.createCube,renderbuffer:xn.create,framebuffer:Mn.create,framebufferCube:Mn.createCube,vao:$t.createVAO,attributes:At,frame:ct,on:function(Jt,Qt){var En;switch(Jt){case"frame":return ct(Qt);case"lost":En=jn;break;case"restore":En=Jn;break;case"destroy":En=$n}return En.push(Qt),{cancel:function(){for(var pn=0;pn<En.length;++pn)if(En[pn]===Qt){En[pn]=En[En.length-1],En.pop();break}}}},limits:hn,hasExtension:function(Jt){return 0<=hn.extensions.indexOf(Jt.toLowerCase())},read:Ct,destroy:function(){Pn.length=0,tt(),Rn&&(Rn.removeEventListener("webglcontextlost",Re),Rn.removeEventListener("webglcontextrestored",Fe)),ln.clear(),Mn.clear(),xn.clear(),$t.clear(),mn.clear(),on.clear(),Kt.clear(),Nt&&Nt.clear(),$n.forEach(function(Jt){Jt()})},_gl:mt,_refresh:ut,poll:function(){gt(),Nt&&Nt.update()},now:kt,stats:zt,getCachedCode:function(){return Gt},preloadCachedCode:function(Jt){Object.entries(Jt).forEach(function(Qt){Gt[Qt[0]]=Qt[1]})}}),Ne.onDone(null,At),At}}()},30456:function(ee,R,e){var M=e(33576),k=M.Buffer;function o(_,p){for(var s in _)p[s]=_[s]}function T(_,p,s){return k(_,p,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?ee.exports=M:(o(M,R),R.Buffer=T),T.prototype=Object.create(k.prototype),o(k,T),T.from=function(_,p,s){if(typeof _=="number")throw new TypeError("Argument must not be a number");return k(_,p,s)},T.alloc=function(_,p,s){if(typeof _!="number")throw new TypeError("Argument must be a number");var t=k(_);return p!==void 0?typeof s=="string"?t.fill(p,s):t.fill(p):t.fill(0),t},T.allocUnsafe=function(_){if(typeof _!="number")throw new TypeError("Argument must be a number");return k(_)},T.allocUnsafeSlow=function(_){if(typeof _!="number")throw new TypeError("Argument must be a number");return M.SlowBuffer(_)}},14500:function(ee,R,e){var M=e(53664),k=e(64348),o=e(39640)(),T=e(2304),_=M("%TypeError%"),p=M("%Math.floor%");ee.exports=function(s,t){if(typeof s!="function")throw new _("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||p(t)!==t)throw new _("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,n=!0;if("length"in s&&T){var a=T(s,"length");a&&!a.configurable&&(r=!1),a&&!a.writable&&(n=!1)}return(r||n||!i)&&(o?k(s,"length",t,!0,!0):k(s,"length",t)),s}},29936:function(ee,R,e){ee.exports=k;var M=e(61252).EventEmitter;function k(){M.call(this)}e(6768)(k,M),k.Readable=e(12348),k.Writable=e(11288),k.Duplex=e(15316),k.Transform=e(22477),k.PassThrough=e(27136),k.finished=e(15932),k.pipeline=e(38180),k.Stream=k,k.prototype.pipe=function(o,T){var _=this;function p(l){o.writable&&o.write(l)===!1&&_.pause&&_.pause()}function s(){_.readable&&_.resume&&_.resume()}_.on("data",p),o.on("drain",s),o._isStdio||T&&T.end===!1||(_.on("end",i),_.on("close",r));var t=!1;function i(){t||(t=!0,o.end())}function r(){t||(t=!0,typeof o.destroy=="function"&&o.destroy())}function n(l){if(a(),M.listenerCount(this,"error")===0)throw l}function a(){_.removeListener("data",p),o.removeListener("drain",s),_.removeListener("end",i),_.removeListener("close",r),_.removeListener("error",n),o.removeListener("error",n),_.removeListener("end",a),_.removeListener("close",a),o.removeListener("close",a)}return _.on("error",n),o.on("error",n),_.on("end",a),_.on("close",a),o.on("close",a),o.emit("pipe",_),o}},92784:function(ee){var R={};function e(k,o,T){T||(T=Error);var _=function(p){var s,t;function i(r,n,a){return p.call(this,function(l,u,h){return typeof o=="string"?o:o(l,u,h)}(r,n,a))||this}return t=p,(s=i).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,i}(T);_.prototype.name=T.name,_.prototype.code=k,R[k]=_}function M(k,o){if(Array.isArray(k)){var T=k.length;return k=k.map(function(_){return String(_)}),T>2?"one of ".concat(o," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(o," ").concat(k[0]," or ").concat(k[1]):"of ".concat(o," ").concat(k[0])}return"of ".concat(o," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,o){return'The value "'+o+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,o,T){var _,p,s,t,i;if(typeof o=="string"&&(p="not ",o.substr(0,4)===p)?(_="must not be",o=o.replace(/^not /,"")):_="must be",function(n,a,l){return(l===void 0||l>n.length)&&(l=n.length),n.substring(l-9,l)===a}(k," argument"))s="The ".concat(k," ").concat(_," ").concat(M(o,"type"));else{var r=(typeof i!="number"&&(i=0),i+1>(t=k).length||t.indexOf(".",i)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(r," ").concat(_," ").concat(M(o,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ee.exports.i=R},15316:function(ee,R,e){var M=e(4168),k=Object.keys||function(n){var a=[];for(var l in n)a.push(l);return a};ee.exports=t;var o=e(12348),T=e(11288);e(6768)(t,o);for(var _=k(T.prototype),p=0;p<_.length;p++){var s=_[p];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(n){if(!(this instanceof t))return new t(n);o.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||M.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},27136:function(ee,R,e){ee.exports=k;var M=e(22477);function k(o){if(!(this instanceof k))return new k(o);M.call(this,o)}e(6768)(k,M),k.prototype._transform=function(o,T,_){_(null,o)}},12348:function(ee,R,e){var M,k=e(4168);ee.exports=b,b.ReadableState=m,e(61252).EventEmitter;var o,T=function(Q,$){return Q.listeners($).length},_=e(4776),p=e(33576).Buffer,s=e.g.Uint8Array||function(){},t=e(19768);o=t&&t.debuglog?t.debuglog("stream"):function(){};var i,r,n,a=e(47264),l=e(55324),u=e(24888).getHighWaterMark,h=e(92784).i,c=h.ERR_INVALID_ARG_TYPE,x=h.ERR_STREAM_PUSH_AFTER_EOF,d=h.ERR_METHOD_NOT_IMPLEMENTED,v=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(b,_);var g=l.errorOrDestroy,y=["error","close","destroy","pause","resume"];function m(Q,$,K){M=M||e(15316),Q=Q||{},typeof K!="boolean"&&(K=$ instanceof M),this.objectMode=!!Q.objectMode,K&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=u(this,Q,"readableHighWaterMark",K),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(i||(i=e(86032).o),this.decoder=new i(Q.encoding),this.encoding=Q.encoding)}function b(Q){if(M=M||e(15316),!(this instanceof b))return new b(Q);var $=this instanceof M;this._readableState=new m(Q,this,$),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),_.call(this)}function f(Q,$,K,X,Y){o("readableAddChunk",$);var re,se=Q._readableState;if($===null)se.reading=!1,function(ae,ce){if(o("onEofChunk"),!ce.ended){if(ce.decoder){var fe=ce.decoder.end();fe&&fe.length&&(ce.buffer.push(fe),ce.length+=ce.objectMode?1:fe.length)}ce.ended=!0,ce.sync?O(ae):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,C(ae)))}}(Q,se);else if(Y||(re=function(ae,ce){var fe,he;return he=ce,p.isBuffer(he)||he instanceof s||typeof ce=="string"||ce===void 0||ae.objectMode||(fe=new c("chunk",["string","Buffer","Uint8Array"],ce)),fe}(se,$)),re)g(Q,re);else if(se.objectMode||$&&$.length>0)if(typeof $=="string"||se.objectMode||Object.getPrototypeOf($)===p.prototype||($=function(ae){return p.from(ae)}($)),X)se.endEmitted?g(Q,new v):S(Q,se,$,!0);else if(se.ended)g(Q,new x);else{if(se.destroyed)return!1;se.reading=!1,se.decoder&&!K?($=se.decoder.write($),se.objectMode||$.length!==0?S(Q,se,$,!1):P(Q,se)):S(Q,se,$,!1)}else X||(se.reading=!1,P(Q,se));return!se.ended&&(se.length<se.highWaterMark||se.length===0)}function S(Q,$,K,X){$.flowing&&$.length===0&&!$.sync?($.awaitDrain=0,Q.emit("data",K)):($.length+=$.objectMode?1:K.length,X?$.buffer.unshift(K):$.buffer.push(K),$.needReadable&&O(Q)),P(Q,$)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Q){this._readableState&&(this._readableState.destroyed=Q)}}),b.prototype.destroy=l.destroy,b.prototype._undestroy=l.undestroy,b.prototype._destroy=function(Q,$){$(Q)},b.prototype.push=function(Q,$){var K,X=this._readableState;return X.objectMode?K=!0:typeof Q=="string"&&(($=$||X.defaultEncoding)!==X.encoding&&(Q=p.from(Q,$),$=""),K=!0),f(this,Q,$,!1,K)},b.prototype.unshift=function(Q){return f(this,Q,null,!0,!1)},b.prototype.isPaused=function(){return this._readableState.flowing===!1},b.prototype.setEncoding=function(Q){i||(i=e(86032).o);var $=new i(Q);this._readableState.decoder=$,this._readableState.encoding=this._readableState.decoder.encoding;for(var K=this._readableState.buffer.head,X="";K!==null;)X+=$.write(K.data),K=K.next;return this._readableState.buffer.clear(),X!==""&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};var w=1073741824;function E(Q,$){return Q<=0||$.length===0&&$.ended?0:$.objectMode?1:Q!=Q?$.flowing&&$.length?$.buffer.head.data.length:$.length:(Q>$.highWaterMark&&($.highWaterMark=function(K){return K>=w?K=w:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K}(Q)),Q<=$.length?Q:$.ended?$.length:($.needReadable=!0,0))}function O(Q){var $=Q._readableState;o("emitReadable",$.needReadable,$.emittedReadable),$.needReadable=!1,$.emittedReadable||(o("emitReadable",$.flowing),$.emittedReadable=!0,k.nextTick(C,Q))}function C(Q){var $=Q._readableState;o("emitReadable_",$.destroyed,$.length,$.ended),$.destroyed||!$.length&&!$.ended||(Q.emit("readable"),$.emittedReadable=!1),$.needReadable=!$.flowing&&!$.ended&&$.length<=$.highWaterMark,W(Q)}function P(Q,$){$.readingMore||($.readingMore=!0,k.nextTick(D,Q,$))}function D(Q,$){for(;!$.reading&&!$.ended&&($.length<$.highWaterMark||$.flowing&&$.length===0);){var K=$.length;if(o("maybeReadMore read 0"),Q.read(0),K===$.length)break}$.readingMore=!1}function U(Q){var $=Q._readableState;$.readableListening=Q.listenerCount("readable")>0,$.resumeScheduled&&!$.paused?$.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function I(Q){o("readable nexttick read 0"),Q.read(0)}function N(Q,$){o("resume",$.reading),$.reading||Q.read(0),$.resumeScheduled=!1,Q.emit("resume"),W(Q),$.flowing&&!$.reading&&Q.read(0)}function W(Q){var $=Q._readableState;for(o("flow",$.flowing);$.flowing&&Q.read()!==null;);}function F(Q,$){return $.length===0?null:($.objectMode?K=$.buffer.shift():!Q||Q>=$.length?(K=$.decoder?$.buffer.join(""):$.buffer.length===1?$.buffer.first():$.buffer.concat($.length),$.buffer.clear()):K=$.buffer.consume(Q,$.decoder),K);var K}function j(Q){var $=Q._readableState;o("endReadable",$.endEmitted),$.endEmitted||($.ended=!0,k.nextTick(H,$,Q))}function H(Q,$){if(o("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,$.readable=!1,$.emit("end"),Q.autoDestroy)){var K=$._writableState;(!K||K.autoDestroy&&K.finished)&&$.destroy()}}function te(Q,$){for(var K=0,X=Q.length;K<X;K++)if(Q[K]===$)return K;return-1}b.prototype.read=function(Q){o("read",Q),Q=parseInt(Q,10);var $=this._readableState,K=Q;if(Q!==0&&($.emittedReadable=!1),Q===0&&$.needReadable&&(($.highWaterMark!==0?$.length>=$.highWaterMark:$.length>0)||$.ended))return o("read: emitReadable",$.length,$.ended),$.length===0&&$.ended?j(this):O(this),null;if((Q=E(Q,$))===0&&$.ended)return $.length===0&&j(this),null;var X,Y=$.needReadable;return o("need readable",Y),($.length===0||$.length-Q<$.highWaterMark)&&o("length less than watermark",Y=!0),$.ended||$.reading?o("reading or ended",Y=!1):Y&&(o("do read"),$.reading=!0,$.sync=!0,$.length===0&&($.needReadable=!0),this._read($.highWaterMark),$.sync=!1,$.reading||(Q=E(K,$))),(X=Q>0?F(Q,$):null)===null?($.needReadable=$.length<=$.highWaterMark,Q=0):($.length-=Q,$.awaitDrain=0),$.length===0&&($.ended||($.needReadable=!0),K!==Q&&$.ended&&j(this)),X!==null&&this.emit("data",X),X},b.prototype._read=function(Q){g(this,new d("_read()"))},b.prototype.pipe=function(Q,$){var K=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=Q;break;case 1:X.pipes=[X.pipes,Q];break;default:X.pipes.push(Q)}X.pipesCount+=1,o("pipe count=%d opts=%j",X.pipesCount,$);var Y=$&&$.end===!1||Q===k.stdout||Q===k.stderr?ye:re;function re(){o("onend"),Q.end()}X.endEmitted?k.nextTick(Y):K.once("end",Y),Q.on("unpipe",function me(Me,Pe){o("onunpipe"),Me===K&&Pe&&Pe.hasUnpiped===!1&&(Pe.hasUnpiped=!0,o("cleanup"),Q.removeListener("close",he),Q.removeListener("finish",ve),Q.removeListener("drain",se),Q.removeListener("error",fe),Q.removeListener("unpipe",me),K.removeListener("end",re),K.removeListener("end",ye),K.removeListener("data",ce),ae=!0,!X.awaitDrain||Q._writableState&&!Q._writableState.needDrain||se())});var se=function(me){return function(){var Me=me._readableState;o("pipeOnDrain",Me.awaitDrain),Me.awaitDrain&&Me.awaitDrain--,Me.awaitDrain===0&&T(me,"data")&&(Me.flowing=!0,W(me))}}(K);Q.on("drain",se);var ae=!1;function ce(me){o("ondata");var Me=Q.write(me);o("dest.write",Me),Me===!1&&((X.pipesCount===1&&X.pipes===Q||X.pipesCount>1&&te(X.pipes,Q)!==-1)&&!ae&&(o("false write response, pause",X.awaitDrain),X.awaitDrain++),K.pause())}function fe(me){o("onerror",me),ye(),Q.removeListener("error",fe),T(Q,"error")===0&&g(Q,me)}function he(){Q.removeListener("finish",ve),ye()}function ve(){o("onfinish"),Q.removeListener("close",he),ye()}function ye(){o("unpipe"),K.unpipe(Q)}return K.on("data",ce),function(me,Me,Pe){if(typeof me.prependListener=="function")return me.prependListener(Me,Pe);me._events&&me._events[Me]?Array.isArray(me._events[Me])?me._events[Me].unshift(Pe):me._events[Me]=[Pe,me._events[Me]]:me.on(Me,Pe)}(Q,"error",fe),Q.once("close",he),Q.once("finish",ve),Q.emit("pipe",K),X.flowing||(o("pipe resume"),K.resume()),Q},b.prototype.unpipe=function(Q){var $=this._readableState,K={hasUnpiped:!1};if($.pipesCount===0)return this;if($.pipesCount===1)return Q&&Q!==$.pipes||(Q||(Q=$.pipes),$.pipes=null,$.pipesCount=0,$.flowing=!1,Q&&Q.emit("unpipe",this,K)),this;if(!Q){var X=$.pipes,Y=$.pipesCount;$.pipes=null,$.pipesCount=0,$.flowing=!1;for(var re=0;re<Y;re++)X[re].emit("unpipe",this,{hasUnpiped:!1});return this}var se=te($.pipes,Q);return se===-1||($.pipes.splice(se,1),$.pipesCount-=1,$.pipesCount===1&&($.pipes=$.pipes[0]),Q.emit("unpipe",this,K)),this},b.prototype.on=function(Q,$){var K=_.prototype.on.call(this,Q,$),X=this._readableState;return Q==="data"?(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1&&this.resume()):Q==="readable"&&(X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,o("on readable",X.length,X.reading),X.length?O(this):X.reading||k.nextTick(I,this))),K},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(Q,$){var K=_.prototype.removeListener.call(this,Q,$);return Q==="readable"&&k.nextTick(U,this),K},b.prototype.removeAllListeners=function(Q){var $=_.prototype.removeAllListeners.apply(this,arguments);return Q!=="readable"&&Q!==void 0||k.nextTick(U,this),$},b.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(o("resume"),Q.flowing=!Q.readableListening,function($,K){K.resumeScheduled||(K.resumeScheduled=!0,k.nextTick(N,$,K))}(this,Q)),Q.paused=!1,this},b.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(Q){var $=this,K=this._readableState,X=!1;for(var Y in Q.on("end",function(){if(o("wrapped end"),K.decoder&&!K.ended){var se=K.decoder.end();se&&se.length&&$.push(se)}$.push(null)}),Q.on("data",function(se){o("wrapped data"),K.decoder&&(se=K.decoder.write(se)),K.objectMode&&se==null||(K.objectMode||se&&se.length)&&($.push(se)||(X=!0,Q.pause()))}),Q)this[Y]===void 0&&typeof Q[Y]=="function"&&(this[Y]=function(se){return function(){return Q[se].apply(Q,arguments)}}(Y));for(var re=0;re<y.length;re++)Q.on(y[re],this.emit.bind(this,y[re]));return this._read=function(se){o("wrapped _read",se),X&&(X=!1,Q.resume())},this},typeof Symbol=="function"&&(b.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=e(60328)),r(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Q){this._readableState&&(this._readableState.flowing=Q)}}),b._fromList=F,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(b.from=function(Q,$){return n===void 0&&(n=e(90555)),n(b,Q,$)})},22477:function(ee,R,e){ee.exports=t;var M=e(92784).i,k=M.ERR_METHOD_NOT_IMPLEMENTED,o=M.ERR_MULTIPLE_CALLBACK,T=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,_=M.ERR_TRANSFORM_WITH_LENGTH_0,p=e(15316);function s(n,a){var l=this._transformState;l.transforming=!1;var u=l.writecb;if(u===null)return this.emit("error",new o);l.writechunk=null,l.writecb=null,a!=null&&this.push(a),u(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);p.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",i)}function i(){var n=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(a,l){r(n,a,l)})}function r(n,a,l){if(a)return n.emit("error",a);if(l!=null&&n.push(l),n._writableState.length)throw new _;if(n._transformState.transforming)throw new T;return n.push(null)}e(6768)(t,p),t.prototype.push=function(n,a){return this._transformState.needTransform=!1,p.prototype.push.call(this,n,a)},t.prototype._transform=function(n,a,l){l(new k("_transform()"))},t.prototype._write=function(n,a,l){var u=this._transformState;if(u.writecb=l,u.writechunk=n,u.writeencoding=a,!u.transforming){var h=this._readableState;(u.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},t.prototype._read=function(n){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(n,a){p.prototype._destroy.call(this,n,function(l){a(l)})}},11288:function(ee,R,e){var M,k=e(4168);function o(P){var D=this;this.next=null,this.entry=null,this.finish=function(){(function(U,I,N){var W=U.entry;for(U.entry=null;W;){var F=W.callback;I.pendingcb--,F(void 0),W=W.next}I.corkedRequestsFree.next=U})(D,P)}}ee.exports=b,b.WritableState=m;var T,_={deprecate:e(96656)},p=e(4776),s=e(33576).Buffer,t=e.g.Uint8Array||function(){},i=e(55324),r=e(24888).getHighWaterMark,n=e(92784).i,a=n.ERR_INVALID_ARG_TYPE,l=n.ERR_METHOD_NOT_IMPLEMENTED,u=n.ERR_MULTIPLE_CALLBACK,h=n.ERR_STREAM_CANNOT_PIPE,c=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,d=n.ERR_STREAM_WRITE_AFTER_END,v=n.ERR_UNKNOWN_ENCODING,g=i.errorOrDestroy;function y(){}function m(P,D,U){M=M||e(15316),P=P||{},typeof U!="boolean"&&(U=D instanceof M),this.objectMode=!!P.objectMode,U&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=r(this,P,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var I=P.decodeStrings===!1;this.decodeStrings=!I,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){(function(W,F){var j=W._writableState,H=j.sync,te=j.writecb;if(typeof te!="function")throw new u;if(function($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}(j),F)(function($,K,X,Y,re){--K.pendingcb,X?(k.nextTick(re,Y),k.nextTick(C,$,K),$._writableState.errorEmitted=!0,g($,Y)):(re(Y),$._writableState.errorEmitted=!0,g($,Y),C($,K))})(W,j,H,F,te);else{var Q=E(j)||W.destroyed;Q||j.corked||j.bufferProcessing||!j.bufferedRequest||w(W,j),H?k.nextTick(S,W,j,Q,te):S(W,j,Q,te)}})(D,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(P){var D=this instanceof(M=M||e(15316));if(!D&&!T.call(b,this))return new b(P);this._writableState=new m(P,this,D),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),p.call(this)}function f(P,D,U,I,N,W,F){D.writelen=I,D.writecb=F,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new c("write")):U?P._writev(N,D.onwrite):P._write(N,W,D.onwrite),D.sync=!1}function S(P,D,U,I){U||function(N,W){W.length===0&&W.needDrain&&(W.needDrain=!1,N.emit("drain"))}(P,D),D.pendingcb--,I(),C(P,D)}function w(P,D){D.bufferProcessing=!0;var U=D.bufferedRequest;if(P._writev&&U&&U.next){var I=D.bufferedRequestCount,N=new Array(I),W=D.corkedRequestsFree;W.entry=U;for(var F=0,j=!0;U;)N[F]=U,U.isBuf||(j=!1),U=U.next,F+=1;N.allBuffers=j,f(P,D,!0,D.length,N,"",W.finish),D.pendingcb++,D.lastBufferedRequest=null,W.next?(D.corkedRequestsFree=W.next,W.next=null):D.corkedRequestsFree=new o(D),D.bufferedRequestCount=0}else{for(;U;){var H=U.chunk,te=U.encoding,Q=U.callback;if(f(P,D,!1,D.objectMode?1:H.length,H,te,Q),U=U.next,D.bufferedRequestCount--,D.writing)break}U===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=U,D.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function O(P,D){P._final(function(U){D.pendingcb--,U&&g(P,U),D.prefinished=!0,P.emit("prefinish"),C(P,D)})}function C(P,D){var U=E(D);if(U&&(function(N,W){W.prefinished||W.finalCalled||(typeof N._final!="function"||W.destroyed?(W.prefinished=!0,N.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,k.nextTick(O,N,W)))}(P,D),D.pendingcb===0&&(D.finished=!0,P.emit("finish"),D.autoDestroy))){var I=P._readableState;(!I||I.autoDestroy&&I.endEmitted)&&P.destroy()}return U}e(6768)(b,p),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,D=[];P;)D.push(P),P=P.next;return D},function(){try{Object.defineProperty(m.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===b&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},b.prototype.pipe=function(){g(this,new h)},b.prototype.write=function(P,D,U){var I,N=this._writableState,W=!1,F=!N.objectMode&&(I=P,s.isBuffer(I)||I instanceof t);return F&&!s.isBuffer(P)&&(P=function(j){return s.from(j)}(P)),typeof D=="function"&&(U=D,D=null),F?D="buffer":D||(D=N.defaultEncoding),typeof U!="function"&&(U=y),N.ending?function(j,H){var te=new d;g(j,te),k.nextTick(H,te)}(this,U):(F||function(j,H,te,Q){var $;return te===null?$=new x:typeof te=="string"||H.objectMode||($=new a("chunk",["string","Buffer"],te)),!$||(g(j,$),k.nextTick(Q,$),!1)}(this,N,P,U))&&(N.pendingcb++,W=function(j,H,te,Q,$,K){if(!te){var X=function(ae,ce,fe){return ae.objectMode||ae.decodeStrings===!1||typeof ce!="string"||(ce=s.from(ce,fe)),ce}(H,Q,$);Q!==X&&(te=!0,$="buffer",Q=X)}var Y=H.objectMode?1:Q.length;H.length+=Y;var re=H.length<H.highWaterMark;if(re||(H.needDrain=!0),H.writing||H.corked){var se=H.lastBufferedRequest;H.lastBufferedRequest={chunk:Q,encoding:$,isBuf:te,callback:K,next:null},se?se.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else f(j,H,!1,Y,Q,$,K);return re}(this,N,F,P,D,U)),W},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||w(this,P))},b.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new v(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(P,D,U){U(new l("_write()"))},b.prototype._writev=null,b.prototype.end=function(P,D,U){var I=this._writableState;return typeof P=="function"?(U=P,P=null,D=null):typeof D=="function"&&(U=D,D=null),P!=null&&this.write(P,D),I.corked&&(I.corked=1,this.uncork()),I.ending||function(N,W,F){W.ending=!0,C(N,W),F&&(W.finished?k.nextTick(F):N.once("finish",F)),W.ended=!0,N.writable=!1}(this,I,U),this},Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),b.prototype.destroy=i.destroy,b.prototype._undestroy=i.undestroy,b.prototype._destroy=function(P,D){D(P)}},60328:function(ee,R,e){var M,k=e(4168);function o(x,d,v){return d in x?Object.defineProperty(x,d,{value:v,enumerable:!0,configurable:!0,writable:!0}):x[d]=v,x}var T=e(15932),_=Symbol("lastResolve"),p=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(x,d){return{value:x,done:d}}function l(x){var d=x[_];if(d!==null){var v=x[n].read();v!==null&&(x[i]=null,x[_]=null,x[p]=null,d(a(v,!1)))}}function u(x){k.nextTick(l,x)}var h=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((o(M={get stream(){return this[n]},next:function(){var x=this,d=this[s];if(d!==null)return Promise.reject(d);if(this[t])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(m,b){k.nextTick(function(){x[s]?b(x[s]):m(a(void 0,!0))})});var v,g=this[i];if(g)v=new Promise(function(m,b){return function(f,S){m.then(function(){b[t]?f(a(void 0,!0)):b[r](f,S)},S)}}(g,this));else{var y=this[n].read();if(y!==null)return Promise.resolve(a(y,!1));v=new Promise(this[r])}return this[i]=v,v}},Symbol.asyncIterator,function(){return this}),o(M,"return",function(){var x=this;return new Promise(function(d,v){x[n].destroy(null,function(g){g?v(g):d(a(void 0,!0))})})}),M),h);ee.exports=function(x){var d,v=Object.create(c,(o(d={},n,{value:x,writable:!0}),o(d,_,{value:null,writable:!0}),o(d,p,{value:null,writable:!0}),o(d,s,{value:null,writable:!0}),o(d,t,{value:x._readableState.endEmitted,writable:!0}),o(d,r,{value:function(g,y){var m=v[n].read();m?(v[i]=null,v[_]=null,v[p]=null,g(a(m,!1))):(v[_]=g,v[p]=y)},writable:!0}),d));return v[i]=null,T(x,function(g){if(g&&g.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=v[p];return y!==null&&(v[i]=null,v[_]=null,v[p]=null,y(g)),void(v[s]=g)}var m=v[_];m!==null&&(v[i]=null,v[_]=null,v[p]=null,m(a(void 0,!0))),v[t]=!0}),x.on("readable",u.bind(null,v)),v}},47264:function(ee,R,e){function M(s,t){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),i.push.apply(i,r)}return i}function k(s,t,i){return t in s?Object.defineProperty(s,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[t]=i,s}function o(s,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var T=e(33576).Buffer,_=e(21576).inspect,p=_&&_.custom||"inspect";ee.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,i;return t=s,i=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return T.alloc(0);for(var n,a,l,u=T.allocUnsafe(r>>>0),h=this.head,c=0;h;)n=h.data,a=u,l=c,T.prototype.copy.call(n,a,l),c+=h.data.length,h=h.next;return u}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,l=n.data;for(r-=l.length;n=n.next;){var u=n.data,h=r>u.length?u.length:r;if(h===u.length?l+=u:l+=u.slice(0,r),(r-=h)==0){h===u.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=u.slice(h));break}++a}return this.length-=a,l}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,l=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var u=a.data,h=r>u.length?u.length:r;if(u.copy(n,n.length-r,0,h),(r-=h)==0){h===u.length?(++l,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=u.slice(h));break}++l}return this.length-=l,n}},{key:p,value:function(r,n){return _(this,function(a){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?M(Object(u),!0).forEach(function(h){k(a,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):M(Object(u)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(u,h))})}return a}({},n,{depth:0,customInspect:!1}))}}],i&&o(t.prototype,i),s}()},55324:function(ee,R,e){var M=e(4168);function k(_,p){T(_,p),o(_)}function o(_){_._writableState&&!_._writableState.emitClose||_._readableState&&!_._readableState.emitClose||_.emit("close")}function T(_,p){_.emit("error",p)}ee.exports={destroy:function(_,p){var s=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return t||i?(p?p(_):_&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(T,this,_)):M.nextTick(T,this,_)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(_||null,function(r){!p&&r?s._writableState?s._writableState.errorEmitted?M.nextTick(o,s):(s._writableState.errorEmitted=!0,M.nextTick(k,s,r)):M.nextTick(k,s,r):p?(M.nextTick(o,s),p(r)):M.nextTick(o,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(_,p){var s=_._readableState,t=_._writableState;s&&s.autoDestroy||t&&t.autoDestroy?_.destroy(p):_.emit("error",p)}}},15932:function(ee,R,e){var M=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function k(){}ee.exports=function o(T,_,p){if(typeof _=="function")return o(T,null,_);_||(_={}),p=function(x){var d=!1;return function(){if(!d){d=!0;for(var v=arguments.length,g=new Array(v),y=0;y<v;y++)g[y]=arguments[y];x.apply(this,g)}}}(p||k);var s=_.readable||_.readable!==!1&&T.readable,t=_.writable||_.writable!==!1&&T.writable,i=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){t=!1,r=!0,s||p.call(T)},a=T._readableState&&T._readableState.endEmitted,l=function(){s=!1,a=!0,t||p.call(T)},u=function(x){p.call(T,x)},h=function(){var x;return s&&!a?(T._readableState&&T._readableState.ended||(x=new M),p.call(T,x)):t&&!r?(T._writableState&&T._writableState.ended||(x=new M),p.call(T,x)):void 0},c=function(){T.req.on("finish",n)};return function(x){return x.setHeader&&typeof x.abort=="function"}(T)?(T.on("complete",n),T.on("abort",h),T.req?c():T.on("request",c)):t&&!T._writableState&&(T.on("end",i),T.on("close",i)),T.on("end",l),T.on("finish",n),_.error!==!1&&T.on("error",u),T.on("close",h),function(){T.removeListener("complete",n),T.removeListener("abort",h),T.removeListener("request",c),T.req&&T.req.removeListener("finish",n),T.removeListener("end",i),T.removeListener("close",i),T.removeListener("finish",n),T.removeListener("end",l),T.removeListener("error",u),T.removeListener("close",h)}}},90555:function(ee){ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(ee,R,e){var M,k=e(92784).i,o=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function _(t){if(t)throw t}function p(t){t()}function s(t,i){return t.pipe(i)}ee.exports=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var n,a=function(u){return u.length?typeof u[u.length-1]!="function"?_:u.pop():_}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new o("streams");var l=i.map(function(u,h){var c=h<i.length-1;return function(x,d,v,g){g=function(b){var f=!1;return function(){f||(f=!0,b.apply(void 0,arguments))}}(g);var y=!1;x.on("close",function(){y=!0}),M===void 0&&(M=e(15932)),M(x,{readable:d,writable:v},function(b){if(b)return g(b);y=!0,g()});var m=!1;return function(b){if(!y&&!m)return m=!0,function(f){return f.setHeader&&typeof f.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void g(b||new T("pipe"))}}(u,c,h>0,function(x){n||(n=x),x&&l.forEach(p),c||(l.forEach(p),a(n))})});return i.reduce(s)}},24888:function(ee,R,e){var M=e(92784).i.ERR_INVALID_OPT_VALUE;ee.exports={getHighWaterMark:function(k,o,T,_){var p=function(s,t,i){return s.highWaterMark!=null?s.highWaterMark:t?s[i]:null}(o,_,T);if(p!=null){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new M(_?T:"highWaterMark",p);return Math.floor(p)}return k.objectMode?16:16384}}},4776:function(ee,R,e){ee.exports=e(61252).EventEmitter},86032:function(ee,R,e){var M=e(30456).Buffer,k=M.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(a){var l;switch(this.encoding=function(u){var h=function(c){if(!c)return"utf8";for(var x;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(x)return;c=(""+c).toLowerCase(),x=!0}}(u);if(typeof h!="string"&&(M.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return h||u}(a),this.encoding){case"utf16le":this.text=p,this.end=s,l=4;break;case"utf8":this.fillLast=_,l=4;break;case"base64":this.text=t,this.end=i,l=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(l)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function _(a){var l=this.lastTotal-this.lastNeed,u=function(h,c,x){if((192&c[0])!=128)return h.lastNeed=0,"�";if(h.lastNeed>1&&c.length>1){if((192&c[1])!=128)return h.lastNeed=1,"�";if(h.lastNeed>2&&c.length>2&&(192&c[2])!=128)return h.lastNeed=2,"�"}}(this,a);return u!==void 0?u:this.lastNeed<=a.length?(a.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,l,0,a.length),void(this.lastNeed-=a.length))}function p(a,l){if((a.length-l)%2==0){var u=a.toString("utf16le",l);if(u){var h=u.charCodeAt(u.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",l,a.length-1)}function s(a){var l=a&&a.length?this.write(a):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,u)}return l}function t(a,l){var u=(a.length-l)%3;return u===0?a.toString("base64",l):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",l,a.length-u))}function i(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}R.o=o,o.prototype.write=function(a){if(a.length===0)return"";var l,u;if(this.lastNeed){if((l=this.fillLast(a))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<a.length?l?l+this.text(a,u):this.text(a,u):l||""},o.prototype.end=function(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+"�":l},o.prototype.text=function(a,l){var u=function(c,x,d){var v=x.length-1;if(v<d)return 0;var g=T(x[v]);return g>=0?(g>0&&(c.lastNeed=g-1),g):--v<d||g===-2?0:(g=T(x[v]))>=0?(g>0&&(c.lastNeed=g-2),g):--v<d||g===-2?0:(g=T(x[v]))>=0?(g>0&&(g===2?g=0:c.lastNeed=g-3),g):0}(this,a,l);if(!this.lastNeed)return a.toString("utf8",l);this.lastTotal=u;var h=a.length-(u-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",l,h)},o.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},55619:function(ee,R,e){var M=e(45408),k=e(86844)("stream-parser");ee.exports=function(c){var x=c&&typeof c._transform=="function",d=c&&typeof c._write=="function";if(!x&&!d)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),c._bytes=t,c._skipBytes=i,x&&(c._passthrough=r),x?c._transform=a:c._write=n};var o=-1,T=0,_=1,p=2;function s(c){k("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=o,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||s(this),k("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=T}function i(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=_}function r(c,x){M(!this._parserCallback,'There is already a "callback" set!'),M(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=p}function n(c,x,d){this._parserInit||s(this),k("write(%o bytes)",c.length),typeof x=="function"&&(d=x),u(this,c,null,d)}function a(c,x,d){this._parserInit||s(this),k("transform(%o bytes)",c.length),typeof x!="function"&&(x=this._parserOutput),u(this,c,x,d)}function l(c,x,d,v){if(c._parserBytesLeft-=x.length,k("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===T?(c._parserBuffers.push(x),c._parserBuffered+=x.length):c._parserState===p&&d(x),c._parserBytesLeft!==0)return v;var g=c._parserCallback;if(g&&c._parserState===T&&c._parserBuffers.length>1&&(x=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==T&&(x=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=o,c._parserBuffers.splice(0),g){var y=[];x&&y.push(x),d&&y.push(d);var m=g.length>y.length;m&&y.push(h(v));var b=g.apply(c,y);if(!m||v===b)return v}}var u=h(function c(x,d,v,g){return x._parserBytesLeft<=0?g(new Error("got data but not currently parsing anything")):d.length<=x._parserBytesLeft?function(){return l(x,d,v,g)}:function(){var y=d.slice(0,x._parserBytesLeft);return l(x,y,v,function(m){return m?g(m):d.length>y.length?function(){return c(x,d.slice(y.length),v,g)}:void 0})}});function h(c){return function(){for(var x=c.apply(this,arguments);typeof x=="function";)x=x();return x}}},86844:function(ee,R,e){var M=e(4168);function k(){var o;try{o=R.storage.debug}catch{}return!o&&M!==void 0&&"env"in M&&(o=M.env.DEBUG),o}(R=ee.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},R.formatArgs=function(o){var T=this.useColors;if(o[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+o[0]+(T?"%c ":" ")+"+"+R.humanize(this.diff),T){var _="color: "+this.color;o.splice(1,0,_,"color: inherit");var p=0,s=0;o[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(p++,t==="%c"&&(s=p))}),o.splice(s,0,_)}},R.save=function(o){try{o==null?R.storage.removeItem("debug"):R.storage.debug=o}catch{}},R.load=k,R.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},R.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),R.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],R.formatters.j=function(o){try{return JSON.stringify(o)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},R.enable(k())},89416:function(ee,R,e){var M;function k(o){function T(){if(T.enabled){var _=T,p=+new Date,s=p-(M||p);_.diff=s,_.prev=M,_.curr=p,M=p;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=R.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(n,a){if(n==="%%")return n;r++;var l=R.formatters[a];if(typeof l=="function"){var u=t[r];n=l.call(_,u),t.splice(r,1),r--}return n}),R.formatArgs.call(_,t),(T.log||R.log||console.log.bind(console)).apply(_,t)}}return T.namespace=o,T.enabled=R.enabled(o),T.useColors=R.useColors(),T.color=function(_){var p,s=0;for(p in _)s=(s<<5)-s+_.charCodeAt(p),s|=0;return R.colors[Math.abs(s)%R.colors.length]}(o),typeof R.init=="function"&&R.init(T),T}(R=ee.exports=k.debug=k.default=k).coerce=function(o){return o instanceof Error?o.stack||o.message:o},R.disable=function(){R.enable("")},R.enable=function(o){R.save(o),R.names=[],R.skips=[];for(var T=(typeof o=="string"?o:"").split(/[\s,]+/),_=T.length,p=0;p<_;p++)T[p]&&((o=T[p].replace(/\*/g,".*?"))[0]==="-"?R.skips.push(new RegExp("^"+o.substr(1)+"$")):R.names.push(new RegExp("^"+o+"$")))},R.enabled=function(o){var T,_;for(T=0,_=R.skips.length;T<_;T++)if(R.skips[T].test(o))return!1;for(T=0,_=R.names.length;T<_;T++)if(R.names[T].test(o))return!0;return!1},R.humanize=e(93744),R.names=[],R.skips=[],R.formatters={}},93744:function(ee){var R=1e3,e=60*R,M=60*e,k=24*M;function o(T,_,p){if(!(T<_))return T<1.5*_?Math.floor(T/_)+" "+p:Math.ceil(T/_)+" "+p+"s"}ee.exports=function(T,_){_=_||{};var p,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var r=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*M;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return _.long?o(p=T,k,"day")||o(p,M,"hour")||o(p,e,"minute")||o(p,R,"second")||p+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=M?Math.round(t/M)+"h":t>=e?Math.round(t/e)+"m":t>=R?Math.round(t/R)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},39956:function(ee,R,e){var M=e(32868);ee.exports=function(k,o,T){if(k==null)throw Error("First argument should be a string");if(o==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","“”","«»"]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return n.length===1&&(n+=n),n}));var _=M.parse(k,{flat:!0,brackets:T.ignore}),p=_[0].split(o);if(T.escape){for(var s=[],t=0;t<p.length;t++){var i=p[t],r=p[t+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(s.push(i+o+r),t++):s.push(i)}p=s}for(t=0;t<p.length;t++)_[0]=p[t],p[t]=M.stringify(_,{flat:!0});return p}},78484:function(ee){ee.exports=function(R){for(var e=R.length,M=new Array(e),k=new Array(e),o=new Array(e),T=new Array(e),_=new Array(e),p=new Array(e),s=0;s<e;++s)M[s]=-1,k[s]=0,o[s]=!1,T[s]=0,_[s]=-1,p[s]=[];var t,i=0,r=[],n=[];function a(h){var c=[h],x=[h];for(M[h]=k[h]=i,o[h]=!0,i+=1;x.length>0;){h=x[x.length-1];var d=R[h];if(T[h]<d.length){for(var v=T[h];v<d.length;++v){var g=d[v];if(M[g]<0){M[g]=k[g]=i,o[g]=!0,i+=1,c.push(g),x.push(g);break}o[g]&&(k[h]=0|Math.min(k[h],k[g])),_[g]>=0&&p[h].push(_[g])}T[h]=v}else{if(k[h]===M[h]){var y=[],m=[],b=0;for(v=c.length-1;v>=0;--v){var f=c[v];if(o[f]=!1,y.push(f),m.push(p[f]),b+=p[f].length,_[f]=r.length,f===h){c.length=v;break}}r.push(y);var S=new Array(b);for(v=0;v<m.length;v++)for(var w=0;w<m[v].length;w++)S[--b]=m[v][w];n.push(S)}x.pop()}}}for(s=0;s<e;++s)M[s]<0&&a(s);for(s=0;s<n.length;s++){var l=n[s];if(l.length!==0){l.sort(function(h,c){return h-c}),t=[l[0]];for(var u=1;u<l.length;u++)l[u]!==l[u-1]&&t.push(l[u]);n[s]=t}}return{components:r,adjacencyList:n}}},92848:function(ee,R,e){e.r(R);var M=2*Math.PI,k=function(_,p,s,t,i,r,n){var a=_.x,l=_.y;return{x:t*(a*=p)-i*(l*=s)+r,y:i*a+t*l+n}},o=function(_,p){var s=p===1.5707963267948966?.551915024494:p===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(p/4),t=Math.cos(_),i=Math.sin(_),r=Math.cos(_+p),n=Math.sin(_+p);return[{x:t-i*s,y:i+t*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},T=function(_,p,s,t){var i=_*s+p*t;return i>1&&(i=1),i<-1&&(i=-1),(_*t-p*s<0?-1:1)*Math.acos(i)};R.default=function(_){var p=_.px,s=_.py,t=_.cx,i=_.cy,r=_.rx,n=_.ry,a=_.xAxisRotation,l=a===void 0?0:a,u=_.largeArcFlag,h=u===void 0?0:u,c=_.sweepFlag,x=c===void 0?0:c,d=[];if(r===0||n===0)return[];var v=Math.sin(l*M/360),g=Math.cos(l*M/360),y=g*(p-t)/2+v*(s-i)/2,m=-v*(p-t)/2+g*(s-i)/2;if(y===0&&m===0)return[];r=Math.abs(r),n=Math.abs(n);var b=Math.pow(y,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);b>1&&(r*=Math.sqrt(b),n*=Math.sqrt(b));var f=function(I,N,W,F,j,H,te,Q,$,K,X,Y){var re=Math.pow(j,2),se=Math.pow(H,2),ae=Math.pow(X,2),ce=Math.pow(Y,2),fe=re*se-re*ce-se*ae;fe<0&&(fe=0),fe/=re*ce+se*ae;var he=(fe=Math.sqrt(fe)*(te===Q?-1:1))*j/H*Y,ve=fe*-H/j*X,ye=K*he-$*ve+(I+W)/2,me=$*he+K*ve+(N+F)/2,Me=(X-he)/j,Pe=(Y-ve)/H,ge=(-X-he)/j,oe=(-Y-ve)/H,ie=T(1,0,Me,Pe),de=T(Me,Pe,ge,oe);return Q===0&&de>0&&(de-=M),Q===1&&de<0&&(de+=M),[ye,me,ie,de]}(p,s,t,i,r,n,h,x,v,g,y,m),S=function(I,N){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(W,F){var j=[],H=!0,te=!1,Q=void 0;try{for(var $,K=W[Symbol.iterator]();!(H=($=K.next()).done)&&(j.push($.value),!F||j.length!==F);H=!0);}catch(X){te=!0,Q=X}finally{try{!H&&K.return&&K.return()}finally{if(te)throw Q}}return j}(I,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(f,4),w=S[0],E=S[1],O=S[2],C=S[3],P=Math.abs(C)/(M/4);Math.abs(1-P)<1e-7&&(P=1);var D=Math.max(Math.ceil(P),1);C/=D;for(var U=0;U<D;U++)d.push(o(O,C)),O+=C;return d.map(function(I){var N=k(I[0],r,n,g,v,w,E),W=N.x,F=N.y,j=k(I[1],r,n,g,v,w,E),H=j.x,te=j.y,Q=k(I[2],r,n,g,v,w,E);return{x1:W,y1:F,x2:H,y2:te,x:Q.x,y:Q.y}})}},74840:function(ee,R,e){var M=e(21984),k=e(49972),o=e(41976),T=e(53520),_=e(45408);ee.exports=function(p){if(Array.isArray(p)&&p.length===1&&typeof p[0]=="string"&&(p=p[0]),typeof p=="string"&&(_(T(p),"String is not an SVG path."),p=M(p)),_(Array.isArray(p),"Argument should be a string or an array of path segments."),p=k(p),!(p=o(p)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,i=p.length;t<i;t++)for(var r=p[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},41976:function(ee,R,e){ee.exports=function(T){for(var _,p=[],s=0,t=0,i=0,r=0,n=null,a=null,l=0,u=0,h=0,c=T.length;h<c;h++){var x=T[h],d=x[0];switch(d){case"M":i=x[1],r=x[2];break;case"A":var v=M({px:l,py:u,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!v.length)continue;for(var g,y=0;y<v.length;y++)x=["C",(g=v[y]).x1,g.y1,g.x2,g.y2,g.x,g.y],y<v.length-1&&p.push(x);break;case"S":var m=l,b=u;_!="C"&&_!="S"||(m+=m-s,b+=b-t),x=["C",m,b,x[1],x[2],x[3],x[4]];break;case"T":_=="Q"||_=="T"?(n=2*l-n,a=2*u-a):(n=l,a=u),x=o(l,u,n,a,x[1],x[2]);break;case"Q":n=x[1],a=x[2],x=o(l,u,x[1],x[2],x[3],x[4]);break;case"L":x=k(l,u,x[1],x[2]);break;case"H":x=k(l,u,x[1],u);break;case"V":x=k(l,u,l,x[1]);break;case"Z":x=k(l,u,i,r)}_=d,l=x[x.length-2],u=x[x.length-1],x.length>4?(s=x[x.length-4],t=x[x.length-3]):(s=l,t=u),p.push(x)}return p};var M=e(92848);function k(T,_,p,s){return["C",T,_,p,s,p,s]}function o(T,_,p,s,t,i){return["C",T/3+.6666666666666666*p,_/3+.6666666666666666*s,t/3+.6666666666666666*p,i/3+.6666666666666666*s,t,i]}},20472:function(ee,R,e){var M,k=e(74840),o=e(21984),T=e(22235),_=e(53520),p=e(29620),s=document.createElement("canvas"),t=s.getContext("2d");ee.exports=function(i,r){if(!_(i))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=s.width=r.w||r.width||200,a=s.height=r.h||r.height||200);var l=Math.min(n,a),u=r.stroke||0,h=r.viewbox||r.viewBox||k(i),c=[n/(h[2]-h[0]),a/(h[3]-h[1])],x=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,a),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*n,.5*a),t.scale(x,x),function(){if(M!=null)return M;var g=document.createElement("canvas").getContext("2d");if(g.canvas.width=g.canvas.height=1,!window.Path2D)return M=!1;var y=new Path2D("M0,0h1v1h-1v-1Z");g.fillStyle="black",g.fill(y);var m=g.getImageData(0,0,1,1);return M=m&&m.data&&m.data[3]===255}()){var d=new Path2D(i);t.fill(d),u&&t.stroke(d)}else{var v=o(i);T(t,v),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),p(t,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*l})}},49760:function(ee,R,e){var M;(function(k){var o=/^\s+/,T=/\s+$/,_=0,p=k.round,s=k.min,t=k.max,i=k.random;function r(X,Y){if(Y=Y||{},(X=X||"")instanceof r)return X;if(!(this instanceof r))return new r(X,Y);var re=function(se){var ae,ce,fe,he={r:0,g:0,b:0},ve=1,ye=null,me=null,Me=null,Pe=!1,ge=!1;return typeof se=="string"&&(se=function(oe){oe=oe.replace(o,"").replace(T,"").toLowerCase();var ie,de=!1;if(O[oe])oe=O[oe],de=!0;else if(oe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ie=$.rgb.exec(oe))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=$.rgba.exec(oe))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=$.hsl.exec(oe))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=$.hsla.exec(oe))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=$.hsv.exec(oe))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=$.hsva.exec(oe))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=$.hex8.exec(oe))?{r:I(ie[1]),g:I(ie[2]),b:I(ie[3]),a:j(ie[4]),format:de?"name":"hex8"}:(ie=$.hex6.exec(oe))?{r:I(ie[1]),g:I(ie[2]),b:I(ie[3]),format:de?"name":"hex"}:(ie=$.hex4.exec(oe))?{r:I(ie[1]+""+ie[1]),g:I(ie[2]+""+ie[2]),b:I(ie[3]+""+ie[3]),a:j(ie[4]+""+ie[4]),format:de?"name":"hex8"}:!!(ie=$.hex3.exec(oe))&&{r:I(ie[1]+""+ie[1]),g:I(ie[2]+""+ie[2]),b:I(ie[3]+""+ie[3]),format:de?"name":"hex"}}(se)),typeof se=="object"&&(K(se.r)&&K(se.g)&&K(se.b)?(ae=se.r,ce=se.g,fe=se.b,he={r:255*D(ae,255),g:255*D(ce,255),b:255*D(fe,255)},Pe=!0,ge=String(se.r).substr(-1)==="%"?"prgb":"rgb"):K(se.h)&&K(se.s)&&K(se.v)?(ye=W(se.s),me=W(se.v),he=function(oe,ie,de){oe=6*D(oe,360),ie=D(ie,100),de=D(de,100);var Se=k.floor(oe),_e=oe-Se,we=de*(1-ie),Ae=de*(1-_e*ie),Oe=de*(1-(1-_e)*ie),ze=Se%6;return{r:255*[de,Ae,we,we,Oe,de][ze],g:255*[Oe,de,de,Ae,we,we][ze],b:255*[we,we,Oe,de,de,Ae][ze]}}(se.h,ye,me),Pe=!0,ge="hsv"):K(se.h)&&K(se.s)&&K(se.l)&&(ye=W(se.s),Me=W(se.l),he=function(oe,ie,de){var Se,_e,we;function Ae(pe,be,ke){return ke<0&&(ke+=1),ke>1&&(ke-=1),ke<1/6?pe+6*(be-pe)*ke:ke<.5?be:ke<2/3?pe+(be-pe)*(2/3-ke)*6:pe}if(oe=D(oe,360),ie=D(ie,100),de=D(de,100),ie===0)Se=_e=we=de;else{var Oe=de<.5?de*(1+ie):de+ie-de*ie,ze=2*de-Oe;Se=Ae(ze,Oe,oe+1/3),_e=Ae(ze,Oe,oe),we=Ae(ze,Oe,oe-1/3)}return{r:255*Se,g:255*_e,b:255*we}}(se.h,ye,Me),Pe=!0,ge="hsl"),se.hasOwnProperty("a")&&(ve=se.a)),ve=P(ve),{ok:Pe,format:se.format||ge,r:s(255,t(he.r,0)),g:s(255,t(he.g,0)),b:s(255,t(he.b,0)),a:ve}}(X);this._originalInput=X,this._r=re.r,this._g=re.g,this._b=re.b,this._a=re.a,this._roundA=p(100*this._a)/100,this._format=Y.format||re.format,this._gradientType=Y.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=re.ok,this._tc_id=_++}function n(X,Y,re){X=D(X,255),Y=D(Y,255),re=D(re,255);var se,ae,ce=t(X,Y,re),fe=s(X,Y,re),he=(ce+fe)/2;if(ce==fe)se=ae=0;else{var ve=ce-fe;switch(ae=he>.5?ve/(2-ce-fe):ve/(ce+fe),ce){case X:se=(Y-re)/ve+(Y<re?6:0);break;case Y:se=(re-X)/ve+2;break;case re:se=(X-Y)/ve+4}se/=6}return{h:se,s:ae,l:he}}function a(X,Y,re){X=D(X,255),Y=D(Y,255),re=D(re,255);var se,ae,ce=t(X,Y,re),fe=s(X,Y,re),he=ce,ve=ce-fe;if(ae=ce===0?0:ve/ce,ce==fe)se=0;else{switch(ce){case X:se=(Y-re)/ve+(Y<re?6:0);break;case Y:se=(re-X)/ve+2;break;case re:se=(X-Y)/ve+4}se/=6}return{h:se,s:ae,v:he}}function l(X,Y,re,se){var ae=[N(p(X).toString(16)),N(p(Y).toString(16)),N(p(re).toString(16))];return se&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function u(X,Y,re,se){return[N(F(se)),N(p(X).toString(16)),N(p(Y).toString(16)),N(p(re).toString(16))].join("")}function h(X,Y){Y=Y===0?0:Y||10;var re=r(X).toHsl();return re.s-=Y/100,re.s=U(re.s),r(re)}function c(X,Y){Y=Y===0?0:Y||10;var re=r(X).toHsl();return re.s+=Y/100,re.s=U(re.s),r(re)}function x(X){return r(X).desaturate(100)}function d(X,Y){Y=Y===0?0:Y||10;var re=r(X).toHsl();return re.l+=Y/100,re.l=U(re.l),r(re)}function v(X,Y){Y=Y===0?0:Y||10;var re=r(X).toRgb();return re.r=t(0,s(255,re.r-p(-Y/100*255))),re.g=t(0,s(255,re.g-p(-Y/100*255))),re.b=t(0,s(255,re.b-p(-Y/100*255))),r(re)}function g(X,Y){Y=Y===0?0:Y||10;var re=r(X).toHsl();return re.l-=Y/100,re.l=U(re.l),r(re)}function y(X,Y){var re=r(X).toHsl(),se=(re.h+Y)%360;return re.h=se<0?360+se:se,r(re)}function m(X){var Y=r(X).toHsl();return Y.h=(Y.h+180)%360,r(Y)}function b(X){var Y=r(X).toHsl(),re=Y.h;return[r(X),r({h:(re+120)%360,s:Y.s,l:Y.l}),r({h:(re+240)%360,s:Y.s,l:Y.l})]}function f(X){var Y=r(X).toHsl(),re=Y.h;return[r(X),r({h:(re+90)%360,s:Y.s,l:Y.l}),r({h:(re+180)%360,s:Y.s,l:Y.l}),r({h:(re+270)%360,s:Y.s,l:Y.l})]}function S(X){var Y=r(X).toHsl(),re=Y.h;return[r(X),r({h:(re+72)%360,s:Y.s,l:Y.l}),r({h:(re+216)%360,s:Y.s,l:Y.l})]}function w(X,Y,re){Y=Y||6,re=re||30;var se=r(X).toHsl(),ae=360/re,ce=[r(X)];for(se.h=(se.h-(ae*Y>>1)+720)%360;--Y;)se.h=(se.h+ae)%360,ce.push(r(se));return ce}function E(X,Y){Y=Y||6;for(var re=r(X).toHsv(),se=re.h,ae=re.s,ce=re.v,fe=[],he=1/Y;Y--;)fe.push(r({h:se,s:ae,v:ce})),ce=(ce+he)%1;return fe}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var X=this.toRgb();return(299*X.r+587*X.g+114*X.b)/1e3},getLuminance:function(){var X,Y,re,se=this.toRgb();return X=se.r/255,Y=se.g/255,re=se.b/255,.2126*(X<=.03928?X/12.92:k.pow((X+.055)/1.055,2.4))+.7152*(Y<=.03928?Y/12.92:k.pow((Y+.055)/1.055,2.4))+.0722*(re<=.03928?re/12.92:k.pow((re+.055)/1.055,2.4))},setAlpha:function(X){return this._a=P(X),this._roundA=p(100*this._a)/100,this},toHsv:function(){var X=a(this._r,this._g,this._b);return{h:360*X.h,s:X.s,v:X.v,a:this._a}},toHsvString:function(){var X=a(this._r,this._g,this._b),Y=p(360*X.h),re=p(100*X.s),se=p(100*X.v);return this._a==1?"hsv("+Y+", "+re+"%, "+se+"%)":"hsva("+Y+", "+re+"%, "+se+"%, "+this._roundA+")"},toHsl:function(){var X=n(this._r,this._g,this._b);return{h:360*X.h,s:X.s,l:X.l,a:this._a}},toHslString:function(){var X=n(this._r,this._g,this._b),Y=p(360*X.h),re=p(100*X.s),se=p(100*X.l);return this._a==1?"hsl("+Y+", "+re+"%, "+se+"%)":"hsla("+Y+", "+re+"%, "+se+"%, "+this._roundA+")"},toHex:function(X){return l(this._r,this._g,this._b,X)},toHexString:function(X){return"#"+this.toHex(X)},toHex8:function(X){return function(Y,re,se,ae,ce){var fe=[N(p(Y).toString(16)),N(p(re).toString(16)),N(p(se).toString(16)),N(F(ae))];return ce&&fe[0].charAt(0)==fe[0].charAt(1)&&fe[1].charAt(0)==fe[1].charAt(1)&&fe[2].charAt(0)==fe[2].charAt(1)&&fe[3].charAt(0)==fe[3].charAt(1)?fe[0].charAt(0)+fe[1].charAt(0)+fe[2].charAt(0)+fe[3].charAt(0):fe.join("")}(this._r,this._g,this._b,this._a,X)},toHex8String:function(X){return"#"+this.toHex8(X)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*D(this._r,255))+"%",g:p(100*D(this._g,255))+"%",b:p(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+p(100*D(this._r,255))+"%, "+p(100*D(this._g,255))+"%, "+p(100*D(this._b,255))+"%)":"rgba("+p(100*D(this._r,255))+"%, "+p(100*D(this._g,255))+"%, "+p(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(X){var Y="#"+u(this._r,this._g,this._b,this._a),re=Y,se=this._gradientType?"GradientType = 1, ":"";if(X){var ae=r(X);re="#"+u(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+se+"startColorstr="+Y+",endColorstr="+re+")"},toString:function(X){var Y=!!X;X=X||this._format;var re=!1,se=this._a<1&&this._a>=0;return Y||!se||X!=="hex"&&X!=="hex6"&&X!=="hex3"&&X!=="hex4"&&X!=="hex8"&&X!=="name"?(X==="rgb"&&(re=this.toRgbString()),X==="prgb"&&(re=this.toPercentageRgbString()),X!=="hex"&&X!=="hex6"||(re=this.toHexString()),X==="hex3"&&(re=this.toHexString(!0)),X==="hex4"&&(re=this.toHex8String(!0)),X==="hex8"&&(re=this.toHex8String()),X==="name"&&(re=this.toName()),X==="hsl"&&(re=this.toHslString()),X==="hsv"&&(re=this.toHsvString()),re||this.toHexString()):X==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(X,Y){var re=X.apply(null,[this].concat([].slice.call(Y)));return this._r=re._r,this._g=re._g,this._b=re._b,this.setAlpha(re._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(X,Y){return X.apply(null,[this].concat([].slice.call(Y)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(f,arguments)}},r.fromRatio=function(X,Y){if(typeof X=="object"){var re={};for(var se in X)X.hasOwnProperty(se)&&(re[se]=se==="a"?X[se]:W(X[se]));X=re}return r(X,Y)},r.equals=function(X,Y){return!(!X||!Y)&&r(X).toRgbString()==r(Y).toRgbString()},r.random=function(){return r.fromRatio({r:i(),g:i(),b:i()})},r.mix=function(X,Y,re){re=re===0?0:re||50;var se=r(X).toRgb(),ae=r(Y).toRgb(),ce=re/100;return r({r:(ae.r-se.r)*ce+se.r,g:(ae.g-se.g)*ce+se.g,b:(ae.b-se.b)*ce+se.b,a:(ae.a-se.a)*ce+se.a})},r.readability=function(X,Y){var re=r(X),se=r(Y);return(k.max(re.getLuminance(),se.getLuminance())+.05)/(k.min(re.getLuminance(),se.getLuminance())+.05)},r.isReadable=function(X,Y,re){var se,ae,ce,fe,he,ve=r.readability(X,Y);switch(ae=!1,(ce=re,(fe=((ce=ce||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&fe!=="AAA"&&(fe="AA"),(he=(ce.size||"small").toLowerCase())!=="small"&&he!=="large"&&(he="small"),se={level:fe,size:he}).level+se.size){case"AAsmall":case"AAAlarge":ae=ve>=4.5;break;case"AAlarge":ae=ve>=3;break;case"AAAsmall":ae=ve>=7}return ae},r.mostReadable=function(X,Y,re){var se,ae,ce,fe,he=null,ve=0;ae=(re=re||{}).includeFallbackColors,ce=re.level,fe=re.size;for(var ye=0;ye<Y.length;ye++)(se=r.readability(X,Y[ye]))>ve&&(ve=se,he=r(Y[ye]));return r.isReadable(X,he,{level:ce,size:fe})||!ae?he:(re.includeFallbackColors=!1,r.mostReadable(X,["#fff","#000"],re))};var O=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=r.hexNames=function(X){var Y={};for(var re in X)X.hasOwnProperty(re)&&(Y[X[re]]=re);return Y}(O);function P(X){return X=parseFloat(X),(isNaN(X)||X<0||X>1)&&(X=1),X}function D(X,Y){(function(se){return typeof se=="string"&&se.indexOf(".")!=-1&&parseFloat(se)===1})(X)&&(X="100%");var re=function(se){return typeof se=="string"&&se.indexOf("%")!=-1}(X);return X=s(Y,t(0,parseFloat(X))),re&&(X=parseInt(X*Y,10)/100),k.abs(X-Y)<1e-6?1:X%Y/parseFloat(Y)}function U(X){return s(1,t(0,X))}function I(X){return parseInt(X,16)}function N(X){return X.length==1?"0"+X:""+X}function W(X){return X<=1&&(X=100*X+"%"),X}function F(X){return k.round(255*parseFloat(X)).toString(16)}function j(X){return I(X)/255}var H,te,Q,$=(te="[\\s|\\(]+("+(H="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",Q="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",{CSS_UNIT:new RegExp(H),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+Q),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+Q),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+Q),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function K(X){return!!$.CSS_UNIT.exec(X)}ee.exports?ee.exports=r:(M=(function(){return r}).call(R,e,R,ee))===void 0||(ee.exports=M)})(Math)},37816:function(ee){ee.exports=e,ee.exports.float32=ee.exports.float=e,ee.exports.fract32=ee.exports.fract=function(M,k){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);k instanceof Float32Array||(k=e(M));for(var o=0,T=k.length;o<T;o++)k[o]=M[o]-k[o];return k}return e(M-e(M))};var R=new Float32Array(1);function e(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(R[0]=M,R[0])}},23464:function(ee,R,e){var M=e(65819);ee.exports=T;var k=96;function o(_,p){var s=M(getComputedStyle(_).getPropertyValue(p));return s[0]*T(s[1],_)}function T(_,p){switch(p=p||document.body,_=(_||"px").trim().toLowerCase(),p!==window&&p!==document||(p=document.body),_){case"%":return p.clientHeight/100;case"ch":case"ex":return function(s,t){var i=document.createElement("div");i.style["font-size"]="128"+s,t.appendChild(i);var r=o(i,"font-size")/128;return t.removeChild(i),r}(_,p);case"em":return o(p,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},55712:function(ee,R,e){function M(T){return T}function k(T,_){return typeof _=="string"&&(_=T.objects[_]),_.type==="GeometryCollection"?{type:"FeatureCollection",features:_.geometries.map(function(p){return o(T,p)})}:o(T,_)}function o(T,_){var p=_.id,s=_.bbox,t=_.properties==null?{}:_.properties,i=function(r,n){var a=function(v){if(v==null)return M;var g,y,m=v.scale[0],b=v.scale[1],f=v.translate[0],S=v.translate[1];return function(w,E){E||(g=y=0);var O=2,C=w.length,P=new Array(C);for(P[0]=(g+=w[0])*m+f,P[1]=(y+=w[1])*b+S;O<C;)P[O]=w[O],++O;return P}}(r.transform),l=r.arcs;function u(v,g){g.length&&g.pop();for(var y=l[v<0?~v:v],m=0,b=y.length;m<b;++m)g.push(a(y[m],m));v<0&&function(f,S){for(var w,E=f.length,O=E-S;O<--E;)w=f[O],f[O++]=f[E],f[E]=w}(g,b)}function h(v){return a(v)}function c(v){for(var g=[],y=0,m=v.length;y<m;++y)u(v[y],g);return g.length<2&&g.push(g[0]),g}function x(v){for(var g=c(v);g.length<4;)g.push(g[0]);return g}function d(v){return v.map(x)}return function v(g){var y,m=g.type;switch(m){case"GeometryCollection":return{type:m,geometries:g.geometries.map(v)};case"Point":y=h(g.coordinates);break;case"MultiPoint":y=g.coordinates.map(h);break;case"LineString":y=c(g.arcs);break;case"MultiLineString":y=g.arcs.map(c);break;case"Polygon":y=d(g.arcs);break;case"MultiPolygon":y=g.arcs.map(d);break;default:return null}return{type:m,coordinates:y}}(n)}(T,_);return p==null&&s==null?{type:"Feature",properties:t,geometry:i}:s==null?{type:"Feature",id:p,properties:t,geometry:i}:{type:"Feature",id:p,bbox:s,properties:t,geometry:i}}e.d(R,{NO:function(){return k}})},73384:function(ee,R,e){var M=e(54612);ee.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!M(k)}},57980:function(ee,R,e){var M=e(81680),k=e(7328),o=e(33940),T=e(18856),_=function(p,s){return p.replace("%v",T(s))};ee.exports=function(p,s,t){if(!k(t))throw new TypeError(_(s,p));if(!M(p)){if("default"in t)return t.default;if(t.isOptional)return null}var i=o(t.errorMessage);throw M(i)||(i=s),new TypeError(_(i,p))}},32336:function(ee){ee.exports=function(R){try{return R.toString()}catch{try{return String(R)}catch{return null}}}},18856:function(ee,R,e){var M=e(32336),k=/[\n\r\u2028\u2029]/g;ee.exports=function(o){var T=M(o);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"…"),T=T.replace(k,function(_){switch(_){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(ee,R,e){var M=e(81680),k={object:!0,function:!0,undefined:!0};ee.exports=function(o){return!!M(o)&&hasOwnProperty.call(k,typeof o)}},87396:function(ee,R,e){var M=e(57980),k=e(85488);ee.exports=function(o){return k(o)?o:M(o,"%v is not a plain function",arguments[1])}},85488:function(ee,R,e){var M=e(73384),k=/^\s*class[\s{/}]/,o=Function.prototype.toString;ee.exports=function(T){return!!M(T)&&!k.test(o.call(T))}},54612:function(ee,R,e){var M=e(7328);ee.exports=function(k){if(!M(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},33940:function(ee,R,e){var M=e(81680),k=e(7328),o=Object.prototype.toString;ee.exports=function(T){if(!M(T))return null;if(k(T)){var _=T.toString;if(typeof _!="function"||_===o)return null}try{return""+T}catch{return null}}},18496:function(ee,R,e){var M=e(57980),k=e(81680);ee.exports=function(o){return k(o)?o:M(o,"Cannot use %v",arguments[1])}},81680:function(ee){ee.exports=function(R){return R!=null}},14144:function(ee,R,e){var M=e(308),k=e(10352),o=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",_=typeof BigUint64Array<"u",p=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var t=s.DATA,i=s.BUFFER;function r(S){if(S){var w=S.length||S.byteLength,E=M.log2(w);t[E].push(S)}}function n(S){S=M.nextPow2(S);var w=M.log2(S),E=t[w];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(n(S),0,S)}function l(S){return new Uint16Array(n(2*S),0,S)}function u(S){return new Uint32Array(n(4*S),0,S)}function h(S){return new Int8Array(n(S),0,S)}function c(S){return new Int16Array(n(2*S),0,S)}function x(S){return new Int32Array(n(4*S),0,S)}function d(S){return new Float32Array(n(4*S),0,S)}function v(S){return new Float64Array(n(8*S),0,S)}function g(S){return T?new Uint8ClampedArray(n(S),0,S):a(S)}function y(S){return _?new BigUint64Array(n(8*S),0,S):null}function m(S){return p?new BigInt64Array(n(8*S),0,S):null}function b(S){return new DataView(n(S),0,S)}function f(S){S=M.nextPow2(S);var w=M.log2(S),E=i[w];return E.length>0?E.pop():new o(S)}R.free=function(S){if(o.isBuffer(S))i[M.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var w=S.length||S.byteLength,E=0|M.log2(w);t[E].push(S)}},R.freeUint8=R.freeUint16=R.freeUint32=R.freeBigUint64=R.freeInt8=R.freeInt16=R.freeInt32=R.freeBigInt64=R.freeFloat32=R.freeFloat=R.freeFloat64=R.freeDouble=R.freeUint8Clamped=R.freeDataView=function(S){r(S.buffer)},R.freeArrayBuffer=r,R.freeBuffer=function(S){i[M.log2(S.length)].push(S)},R.malloc=function(S,w){if(w===void 0||w==="arraybuffer")return n(S);switch(w){case"uint8":return a(S);case"uint16":return l(S);case"uint32":return u(S);case"int8":return h(S);case"int16":return c(S);case"int32":return x(S);case"float":case"float32":return d(S);case"double":case"float64":return v(S);case"uint8_clamped":return g(S);case"bigint64":return m(S);case"biguint64":return y(S);case"buffer":return f(S);case"data":case"dataview":return b(S);default:return null}return null},R.mallocArrayBuffer=n,R.mallocUint8=a,R.mallocUint16=l,R.mallocUint32=u,R.mallocInt8=h,R.mallocInt16=c,R.mallocInt32=x,R.mallocFloat32=R.mallocFloat=d,R.mallocFloat64=R.mallocDouble=v,R.mallocUint8Clamped=g,R.mallocBigUint64=y,R.mallocBigInt64=m,R.mallocDataView=b,R.mallocBuffer=f,R.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},92384:function(ee){var R=/[\'\"]/;ee.exports=function(e){return e?(R.test(e.charAt(0))&&(e=e.substr(1)),R.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(ee){ee.exports=function(R,e,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var k=0,o=M.length;k<o;k++){var T=M[k];for(var _ in T)if((e[_]===void 0||Array.isArray(e[_])||R[_]!==e[_])&&_ in e){var p;if(T[_]===!0)p=e[_];else if(T[_]===!1||typeof T[_]=="function"&&(p=T[_](e[_],R,e))===void 0)continue;R[_]=p}}return R}},96656:function(ee,R,e){function M(k){try{if(!e.g.localStorage)return!1}catch{return!1}var o=e.g.localStorage[k];return o!=null&&String(o).toLowerCase()==="true"}ee.exports=function(k,o){if(M("noDeprecation"))return k;var T=!1;return function(){if(!T){if(M("throwDeprecation"))throw new Error(o);M("traceDeprecation")?console.trace(o):console.warn(o),T=!0}return k.apply(this,arguments)}}},75272:function(ee){ee.exports=function(R){return R&&typeof R=="object"&&typeof R.copy=="function"&&typeof R.fill=="function"&&typeof R.readUInt8=="function"}},41088:function(ee,R,e){var M=e(91148),k=e(84420),o=e(96632),T=e(7728);function _(D){return D.call.bind(D)}var p=typeof BigInt<"u",s=typeof Symbol<"u",t=_(Object.prototype.toString),i=_(Number.prototype.valueOf),r=_(String.prototype.valueOf),n=_(Boolean.prototype.valueOf);if(p)var a=_(BigInt.prototype.valueOf);if(s)var l=_(Symbol.prototype.valueOf);function u(D,U){if(typeof D!="object")return!1;try{return U(D),!0}catch{return!1}}function h(D){return t(D)==="[object Map]"}function c(D){return t(D)==="[object Set]"}function x(D){return t(D)==="[object WeakMap]"}function d(D){return t(D)==="[object WeakSet]"}function v(D){return t(D)==="[object ArrayBuffer]"}function g(D){return typeof ArrayBuffer<"u"&&(v.working?v(D):D instanceof ArrayBuffer)}function y(D){return t(D)==="[object DataView]"}function m(D){return typeof DataView<"u"&&(y.working?y(D):D instanceof DataView)}R.isArgumentsObject=M,R.isGeneratorFunction=k,R.isTypedArray=T,R.isPromise=function(D){return typeof Promise<"u"&&D instanceof Promise||D!==null&&typeof D=="object"&&typeof D.then=="function"&&typeof D.catch=="function"},R.isArrayBufferView=function(D){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(D):T(D)||m(D)},R.isUint8Array=function(D){return o(D)==="Uint8Array"},R.isUint8ClampedArray=function(D){return o(D)==="Uint8ClampedArray"},R.isUint16Array=function(D){return o(D)==="Uint16Array"},R.isUint32Array=function(D){return o(D)==="Uint32Array"},R.isInt8Array=function(D){return o(D)==="Int8Array"},R.isInt16Array=function(D){return o(D)==="Int16Array"},R.isInt32Array=function(D){return o(D)==="Int32Array"},R.isFloat32Array=function(D){return o(D)==="Float32Array"},R.isFloat64Array=function(D){return o(D)==="Float64Array"},R.isBigInt64Array=function(D){return o(D)==="BigInt64Array"},R.isBigUint64Array=function(D){return o(D)==="BigUint64Array"},h.working=typeof Map<"u"&&h(new Map),R.isMap=function(D){return typeof Map<"u"&&(h.working?h(D):D instanceof Map)},c.working=typeof Set<"u"&&c(new Set),R.isSet=function(D){return typeof Set<"u"&&(c.working?c(D):D instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),R.isWeakMap=function(D){return typeof WeakMap<"u"&&(x.working?x(D):D instanceof WeakMap)},d.working=typeof WeakSet<"u"&&d(new WeakSet),R.isWeakSet=function(D){return d(D)},v.working=typeof ArrayBuffer<"u"&&v(new ArrayBuffer),R.isArrayBuffer=g,y.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&y(new DataView(new ArrayBuffer(1),0,1)),R.isDataView=m;var b=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function f(D){return t(D)==="[object SharedArrayBuffer]"}function S(D){return b!==void 0&&(f.working===void 0&&(f.working=f(new b)),f.working?f(D):D instanceof b)}function w(D){return u(D,i)}function E(D){return u(D,r)}function O(D){return u(D,n)}function C(D){return p&&u(D,a)}function P(D){return s&&u(D,l)}R.isSharedArrayBuffer=S,R.isAsyncFunction=function(D){return t(D)==="[object AsyncFunction]"},R.isMapIterator=function(D){return t(D)==="[object Map Iterator]"},R.isSetIterator=function(D){return t(D)==="[object Set Iterator]"},R.isGeneratorObject=function(D){return t(D)==="[object Generator]"},R.isWebAssemblyCompiledModule=function(D){return t(D)==="[object WebAssembly.Module]"},R.isNumberObject=w,R.isStringObject=E,R.isBooleanObject=O,R.isBigIntObject=C,R.isSymbolObject=P,R.isBoxedPrimitive=function(D){return w(D)||E(D)||O(D)||C(D)||P(D)},R.isAnyArrayBuffer=function(D){return typeof Uint8Array<"u"&&(g(D)||S(D))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(D){Object.defineProperty(R,D,{enumerable:!1,value:function(){throw new Error(D+" is not supported in userland")}})})},35840:function(ee,R,e){var M=e(4168),k=Object.getOwnPropertyDescriptors||function(P){for(var D=Object.keys(P),U={},I=0;I<D.length;I++)U[D[I]]=Object.getOwnPropertyDescriptor(P,D[I]);return U},o=/%[sdj%]/g;R.format=function(P){if(!x(P)){for(var D=[],U=0;U<arguments.length;U++)D.push(s(arguments[U]));return D.join(" ")}U=1;for(var I=arguments,N=I.length,W=String(P).replace(o,function(j){if(j==="%%")return"%";if(U>=N)return j;switch(j){case"%s":return String(I[U++]);case"%d":return Number(I[U++]);case"%j":try{return JSON.stringify(I[U++])}catch{return"[Circular]"}default:return j}}),F=I[U];U<N;F=I[++U])h(F)||!g(F)?W+=" "+F:W+=" "+s(F);return W},R.deprecate=function(P,D){if(M!==void 0&&M.noDeprecation===!0)return P;if(M===void 0)return function(){return R.deprecate(P,D).apply(this,arguments)};var U=!1;return function(){if(!U){if(M.throwDeprecation)throw new Error(D);M.traceDeprecation?console.trace(D):console.error(D),U=!0}return P.apply(this,arguments)}};var T={},_=/^$/;if(M.env.NODE_DEBUG){var p=M.env.NODE_DEBUG;p=p.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),_=new RegExp("^"+p+"$","i")}function s(P,D){var U={seen:[],stylize:i};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),u(D)?U.showHidden=D:D&&R._extend(U,D),d(U.showHidden)&&(U.showHidden=!1),d(U.depth)&&(U.depth=2),d(U.colors)&&(U.colors=!1),d(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=t),r(U,P,U.depth)}function t(P,D){var U=s.styles[D];return U?"\x1B["+s.colors[U][0]+"m"+P+"\x1B["+s.colors[U][1]+"m":P}function i(P,D){return P}function r(P,D,U){if(P.customInspect&&D&&b(D.inspect)&&D.inspect!==R.inspect&&(!D.constructor||D.constructor.prototype!==D)){var I=D.inspect(U,P);return x(I)||(I=r(P,I,U)),I}var N=function(K,X){if(d(X))return K.stylize("undefined","undefined");if(x(X)){var Y="'"+JSON.stringify(X).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return K.stylize(Y,"string")}return c(X)?K.stylize(""+X,"number"):u(X)?K.stylize(""+X,"boolean"):h(X)?K.stylize("null","null"):void 0}(P,D);if(N)return N;var W=Object.keys(D),F=function(K){var X={};return K.forEach(function(Y,re){X[Y]=!0}),X}(W);if(P.showHidden&&(W=Object.getOwnPropertyNames(D)),m(D)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return n(D);if(W.length===0){if(b(D)){var j=D.name?": "+D.name:"";return P.stylize("[Function"+j+"]","special")}if(v(D))return P.stylize(RegExp.prototype.toString.call(D),"regexp");if(y(D))return P.stylize(Date.prototype.toString.call(D),"date");if(m(D))return n(D)}var H,te="",Q=!1,$=["{","}"];return l(D)&&(Q=!0,$=["[","]"]),b(D)&&(te=" [Function"+(D.name?": "+D.name:"")+"]"),v(D)&&(te=" "+RegExp.prototype.toString.call(D)),y(D)&&(te=" "+Date.prototype.toUTCString.call(D)),m(D)&&(te=" "+n(D)),W.length!==0||Q&&D.length!=0?U<0?v(D)?P.stylize(RegExp.prototype.toString.call(D),"regexp"):P.stylize("[Object]","special"):(P.seen.push(D),H=Q?function(K,X,Y,re,se){for(var ae=[],ce=0,fe=X.length;ce<fe;++ce)E(X,String(ce))?ae.push(a(K,X,Y,re,String(ce),!0)):ae.push("");return se.forEach(function(he){he.match(/^\d+$/)||ae.push(a(K,X,Y,re,he,!0))}),ae}(P,D,U,F,W):W.map(function(K){return a(P,D,U,F,K,Q)}),P.seen.pop(),function(K,X,Y){return K.reduce(function(re,se){return se.indexOf(`
`),re+se.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Y[0]+(X===""?"":X+`
 `)+" "+K.join(`,
  `)+" "+Y[1]:Y[0]+X+" "+K.join(", ")+" "+Y[1]}(H,te,$)):$[0]+te+$[1]}function n(P){return"["+Error.prototype.toString.call(P)+"]"}function a(P,D,U,I,N,W){var F,j,H;if((H=Object.getOwnPropertyDescriptor(D,N)||{value:D[N]}).get?j=H.set?P.stylize("[Getter/Setter]","special"):P.stylize("[Getter]","special"):H.set&&(j=P.stylize("[Setter]","special")),E(I,N)||(F="["+N+"]"),j||(P.seen.indexOf(H.value)<0?(j=h(U)?r(P,H.value,null):r(P,H.value,U-1)).indexOf(`
`)>-1&&(j=W?j.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+j.split(`
`).map(function(te){return"   "+te}).join(`
`)):j=P.stylize("[Circular]","special")),d(F)){if(W&&N.match(/^\d+$/))return j;(F=JSON.stringify(""+N)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=P.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=P.stylize(F,"string"))}return F+": "+j}function l(P){return Array.isArray(P)}function u(P){return typeof P=="boolean"}function h(P){return P===null}function c(P){return typeof P=="number"}function x(P){return typeof P=="string"}function d(P){return P===void 0}function v(P){return g(P)&&f(P)==="[object RegExp]"}function g(P){return typeof P=="object"&&P!==null}function y(P){return g(P)&&f(P)==="[object Date]"}function m(P){return g(P)&&(f(P)==="[object Error]"||P instanceof Error)}function b(P){return typeof P=="function"}function f(P){return Object.prototype.toString.call(P)}function S(P){return P<10?"0"+P.toString(10):P.toString(10)}R.debuglog=function(P){if(P=P.toUpperCase(),!T[P])if(_.test(P)){var D=M.pid;T[P]=function(){var U=R.format.apply(R,arguments);console.error("%s %d: %s",P,D,U)}}else T[P]=function(){};return T[P]},R.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},R.types=e(41088),R.isArray=l,R.isBoolean=u,R.isNull=h,R.isNullOrUndefined=function(P){return P==null},R.isNumber=c,R.isString=x,R.isSymbol=function(P){return typeof P=="symbol"},R.isUndefined=d,R.isRegExp=v,R.types.isRegExp=v,R.isObject=g,R.isDate=y,R.types.isDate=y,R.isError=m,R.types.isNativeError=m,R.isFunction=b,R.isPrimitive=function(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||P===void 0},R.isBuffer=e(75272);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(P,D){return Object.prototype.hasOwnProperty.call(P,D)}R.log=function(){var P,D;console.log("%s - %s",(D=[S((P=new Date).getHours()),S(P.getMinutes()),S(P.getSeconds())].join(":"),[P.getDate(),w[P.getMonth()],D].join(" ")),R.format.apply(R,arguments))},R.inherits=e(6768),R._extend=function(P,D){if(!D||!g(D))return P;for(var U=Object.keys(D),I=U.length;I--;)P[U[I]]=D[U[I]];return P};var O=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function C(P,D){if(!P){var U=new Error("Promise was rejected with a falsy value");U.reason=P,P=U}return D(P)}R.promisify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');if(O&&P[O]){var D;if(typeof(D=P[O])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(D,O,{value:D,enumerable:!1,writable:!1,configurable:!0}),D}function D(){for(var U,I,N=new Promise(function(j,H){U=j,I=H}),W=[],F=0;F<arguments.length;F++)W.push(arguments[F]);W.push(function(j,H){j?I(j):U(H)});try{P.apply(this,W)}catch(j){I(j)}return N}return Object.setPrototypeOf(D,Object.getPrototypeOf(P)),O&&Object.defineProperty(D,O,{value:D,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(D,k(P))},R.promisify.custom=O,R.callbackify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');function D(){for(var U=[],I=0;I<arguments.length;I++)U.push(arguments[I]);var N=U.pop();if(typeof N!="function")throw new TypeError("The last argument must be of type Function");var W=this,F=function(){return N.apply(W,arguments)};P.apply(this,U).then(function(j){M.nextTick(F.bind(null,null,j))},function(j){M.nextTick(C.bind(null,j,F))})}return Object.setPrototypeOf(D,Object.getPrototypeOf(P)),Object.defineProperties(D,k(P)),D}},5408:function(ee,R,e){var M=e(13380);ee.exports=function(k){return M("webgl",k)}},96632:function(ee,R,e){var M=e(46492),k=e(63436),o=e(57916),T=e(99676),_=e(2304),p=T("Object.prototype.toString"),s=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,i=k(),r=T("String.prototype.slice"),n=Object.getPrototypeOf,a=T("Array.prototype.indexOf",!0)||function(u,h){for(var c=0;c<u.length;c+=1)if(u[c]===h)return c;return-1},l={__proto__:null};M(i,s&&_&&n?function(u){var h=new t[u];if(Symbol.toStringTag in h){var c=n(h),x=_(c,Symbol.toStringTag);if(!x){var d=n(c);x=_(d,Symbol.toStringTag)}l["$"+u]=o(x.get)}}:function(u){var h=new t[u],c=h.slice||h.set;c&&(l["$"+u]=o(c))}),ee.exports=function(u){if(!u||typeof u!="object")return!1;if(!s){var h=r(p(u),8,-1);return a(i,h)>-1?h:h==="Object"&&function(c){var x=!1;return M(l,function(d,v){if(!x)try{d(c),x=r(v,1)}catch{}}),x}(u)}return _?function(c){var x=!1;return M(l,function(d,v){if(!x)try{"$"+d(c)===v&&(x=r(v,1))}catch{}}),x}(u):null}},67020:function(ee,R,e){var M=e(38700),k=e(50896),o=M.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if(typeof n=="string"){var l=n.match(p);return l?l[0]:""}var u=this._validateYear(n),h=n.month(),c=""+this.toChineseMonth(u,h);return a&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,h)&&(c+="i"),c},monthNames:function(n){if(typeof n=="string"){var a=n.match(s);return a?a[0]:""}var l=this._validateYear(n),u=n.month(),h=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(h="闰"+h),h},monthNamesShort:function(n){if(typeof n=="string"){var a=n.match(t);return a?a[0]:""}var l=this._validateYear(n),u=n.month(),h=["一","二","三","四","五","六","七","八","九","十","十一","十二"][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(h="闰"+h),h},parseMonth:function(n,a){n=this._validateYear(n);var l,u=parseInt(a);if(isNaN(u))a[0]==="闰"&&(l=!0,a=a.substring(1)),a[a.length-1]==="月"&&(a=a.substring(0,a.length-1)),u=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(a);else{var h=a[a.length-1];l=h==="i"||h==="I"}return this.toMonthIndex(n,u,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),typeof n!="number"||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,l){var u=this.intercalaryMonth(n);if(l&&a!==u||a<1||a>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!l&&a<=u?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var l=this.intercalaryMonth(n);if(a<0||a>(l?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?a<l?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),i[n-i[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var l=this.intercalaryMonth(n);return!!l&&l===a},leapYear:function(n){return this.intercalaryMonth(n)!==0},weekOfYear:function(n,a,l){var u,h=this._validateYear(n,M.local.invalidyear),c=r[h-r[0]],x=c>>9&4095,d=c>>5&15,v=31&c;(u=o.newDate(x,d,v)).add(4-(u.dayOfWeek()||7),"d");var g=this.toJD(n,a,l)-u.toJD();return 1+Math.floor(g/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var l=i[n-i[0]];if(a>(l>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-a?30:29},weekDay:function(n,a,l){return(this.dayOfWeek(n,a,l)||7)<6},toJD:function(n,a,l){var u=this._validate(n,c,l,M.local.invalidDate);n=this._validateYear(u.year()),a=u.month(),l=u.day();var h=this.isIntercalaryMonth(n,a),c=this.toChineseMonth(n,a),x=function(d,v,g,y,m){var b,f,S;if(typeof d=="object")f=d,b=v||{};else{var w;if(!(typeof d=="number"&&d>=1888&&d<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof v=="number"&&v>=1&&v<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof g=="number"&&g>=1&&g<=30))throw new Error("Lunar day outside range 1 - 30");typeof y=="object"?(w=!1,b=y):(w=!!y,b={}),f={year:d,month:v,day:g,isIntercalary:w}}S=f.day-1;var E,O=i[f.year-i[0]],C=O>>13;E=C&&(f.month>C||f.isIntercalary)?f.month:f.month-1;for(var P=0;P<E;P++)S+=O&1<<12-P?30:29;var D=r[f.year-r[0]],U=new Date(D>>9&4095,(D>>5&15)-1,(31&D)+S);return b.year=U.getFullYear(),b.month=1+U.getMonth(),b.day=U.getDate(),b}(n,c,l,h);return o.toJD(x.year,x.month,x.day)},fromJD:function(n){var a=o.fromJD(n),l=function(h,c,x,d){var v,g;if(typeof h=="object")v=h,g=c||{};else{if(!(typeof h=="number"&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");v={year:h,month:c,day:x},g={}}var y=r[v.year-r[0]],m=v.year<<9|v.month<<5|v.day;g.year=m>=y?v.year:v.year-1,y=r[g.year-r[0]];var b,f=new Date(y>>9&4095,(y>>5&15)-1,31&y),S=new Date(v.year,v.month-1,v.day);b=Math.round((S-f)/864e5);var w,E=i[g.year-i[0]];for(w=0;w<13;w++){var O=E&1<<12-w?30:29;if(b<O)break;b-=O}var C=E>>13;return!C||w<C?(g.isIntercalary=!1,g.month=1+w):w===C?(g.isIntercalary=!0,g.month=w):(g.isIntercalary=!1,g.month=w),g.day=1+b,g}(a.year(),a.month(),a.day()),u=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,u,l.day)},fromString:function(n){var a=n.match(_),l=this._validateYear(+a[1]),u=+a[2],h=!!a[3],c=this.toMonthIndex(l,u,h),x=+a[4];return this.newDate(l,c,x)},add:function(n,a,l){var u=n.year(),h=n.month(),c=this.isIntercalaryMonth(u,h),x=this.toChineseMonth(u,h),d=Object.getPrototypeOf(T.prototype).add.call(this,n,a,l);if(l==="y"){var v=d.year(),g=d.month(),y=this.isIntercalaryMonth(v,x),m=c&&y?this.toMonthIndex(v,x,!0):this.toMonthIndex(v,x,!1);m!==g&&d.month(m)}return d}});var _=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,p=/^\d?\d[iI]?/m,s=/^闰?十?[一二三四五六七八九]?月/m,t=/^闰?十?[一二三四五六七八九]?/m;M.calendars.chinese=T;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(ee,R,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var _=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=_.year()+(_.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,_,p){var s=this.newDate(T,_,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,_){var p=this._validate(T,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(T,_,p){return(this.dayOfWeek(T,_,p)||7)<6},toJD:function(T,_,p){var s=this._validate(T,_,p,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var _=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((_-Math.floor((_+366)/1461))/365)+1;p<=0&&p--,_=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var s=Math.floor(_/30)+1,t=_-30*(s-1)+1;return this.newDate(p,s,t)}}),M.calendars.coptic=o},55668:function(ee,R,e){var M=e(38700),k=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(_,p,s){var t=this.newDate(_,p,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(_,p,s){return(this._validate(_,p,s,M.local.invalidDate).day()+1)%8},weekDay:function(_,p,s){var t=this.dayOfWeek(_,p,s);return t>=2&&t<=6},extraInfo:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidDate);return _=t.year()+(t.year()<0?1:0),p=t.month(),(s=t.day())+(p>1?16:0)+(p>2?32*(p-2):0)+400*(_-1)+this.jdEpoch-1},fromJD:function(_){_=Math.floor(_+.5)-Math.floor(this.jdEpoch)-1;var p=Math.floor(_/400)+1;_-=400*(p-1),_+=_>15?16:0;var s=Math.floor(_/32)+1,t=_-32*(s-1)+1;return this.newDate(p<=0?p-1:p,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=o},65168:function(ee,R,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var _=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=_.year()+(_.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,_,p){var s=this.newDate(T,_,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,_){var p=this._validate(T,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(T,_,p){return(this.dayOfWeek(T,_,p)||7)<6},toJD:function(T,_,p){var s=this._validate(T,_,p,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var _=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((_-Math.floor((_+366)/1461))/365)+1;p<=0&&p--,_=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var s=Math.floor(_/30)+1,t=_-30*(s-1)+1;return this.newDate(p,s,t)}}),M.calendars.ethiopian=o},2084:function(ee,R,e){var M=e(38700),k=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}function T(_,p){return _-p*Math.floor(_/p)}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(p.year())},_leapYear:function(_){return T(7*(_=_<0?_+1:_)+1,19)<7},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(_.year?_.year():_)?13:12},weekOfYear:function(_,p,s){var t=this.newDate(_,p,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(_){return _=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(_===-1?1:_+1,7,1)-this.toJD(_,7,1)},daysInMonth:function(_,p){return _.year&&(p=_.month(),_=_.year()),this._validate(_,p,this.minDay,M.local.invalidMonth),p===12&&this.leapYear(_)||p===8&&T(this.daysInYear(_),10)===5?30:p===9&&T(this.daysInYear(_),10)===3?29:this.daysPerMonth[p-1]},weekDay:function(_,p,s){return this.dayOfWeek(_,p,s)!==6},extraInfo:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidDate);_=t.year(),p=t.month(),s=t.day();var i=_<=0?_+1:_,r=this.jdEpoch+this._delay1(i)+this._delay2(i)+s+1;if(p<7){for(var n=7;n<=this.monthsInYear(_);n++)r+=this.daysInMonth(_,n);for(n=1;n<p;n++)r+=this.daysInMonth(_,n)}else for(n=7;n<p;n++)r+=this.daysInMonth(_,n);return r},_delay1:function(_){var p=Math.floor((235*_-234)/19),s=12084+13753*p,t=29*p+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(_){var p=this._delay1(_-1),s=this._delay1(_);return this._delay1(_+1)-s==356?2:s-p==382?1:0},fromJD:function(_){_=Math.floor(_)+.5;for(var p=Math.floor(98496*(_-this.jdEpoch)/35975351)-1;_>=this.toJD(p===-1?1:p+1,7,1);)p++;for(var s=_<this.toJD(p,1,1)?7:1;_>this.toJD(p,s,this.daysInMonth(p,s));)s++;var t=_-this.toJD(p,s,1)+1;return this.newDate(p,s,t)}}),M.calendars.hebrew=o},26368:function(ee,R,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,_,p){var s=this.newDate(T,_,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,_){var p=this._validate(T,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===12&&this.leapYear(p.year())?1:0)},weekDay:function(T,_,p){return this.dayOfWeek(T,_,p)!==5},toJD:function(T,_,p){var s=this._validate(T,_,p,M.local.invalidDate);return T=s.year(),_=s.month(),T=T<=0?T+1:T,(p=s.day())+Math.ceil(29.5*(_-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var _=Math.floor((30*(T-this.jdEpoch)+10646)/10631);_=_<=0?_-1:_;var p=Math.min(12,Math.ceil((T-29-this.toJD(_,1,1))/29.5)+1),s=T-this.toJD(_,p,1)+1;return this.newDate(_,p,s)}}),M.calendars.islamic=o},24747:function(ee,R,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var _=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=_.year()<0?_.year()+1:_.year())%4==0},weekOfYear:function(T,_,p){var s=this.newDate(T,_,p);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,_){var p=this._validate(T,_,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===2&&this.leapYear(p.year())?1:0)},weekDay:function(T,_,p){return(this.dayOfWeek(T,_,p)||7)<6},toJD:function(T,_,p){var s=this._validate(T,_,p,M.local.invalidDate);return T=s.year(),_=s.month(),p=s.day(),T<0&&T++,_<=2&&(T--,_+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(_+1))+p-1524.5},fromJD:function(T){var _=Math.floor(T+.5)+1524,p=Math.floor((_-122.1)/365.25),s=Math.floor(365.25*p),t=Math.floor((_-s)/30.6001),i=t-Math.floor(t<14?1:13),r=p-Math.floor(i>2?4716:4715),n=_-s-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,i,n)}}),M.calendars.julian=o},65616:function(ee,R,e){var M=e(38700),k=e(50896);function o(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}function T(p,s){return p-s*Math.floor(p/s)}function _(p,s){return T(p-1,s)+1}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(p){p=this._validate(p,this.minMonth,this.minDay,M.local.invalidYear).year();var s=Math.floor(p/400);return p%=400,p+=p<0?400:0,s+"."+Math.floor(p/20)+"."+p%20},forYear:function(p){if((p=p.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<p.length;t++){var i=parseInt(p[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";s=20*s+i}return s},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(p,s,t){return this._validate(p,s,t,M.local.invalidDate),0},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(p,s){return this._validate(p,s,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(p,s,t){return this._validate(p,s,t,M.local.invalidDate).day()},weekDay:function(p,s,t){return this._validate(p,s,t,M.local.invalidDate),!0},extraInfo:function(p,s,t){var i=this._validate(p,s,t,M.local.invalidDate).toJD(),r=this._toHaab(i),n=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(p){var s=T(8+(p-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(p){return[_(20+(p-=this.jdEpoch),20),_(p+4,13)]},toJD:function(p,s,t){var i=this._validate(p,s,t,M.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(p){p=Math.floor(p)+.5-this.jdEpoch;var s=Math.floor(p/360);p%=360,p+=p<0?360:0;var t=Math.floor(p/20),i=p%20;return this.newDate(s,t,i)}}),M.calendars.mayan=o},30632:function(ee,R,e){var M=e(38700),k=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar;var T=M.instance("gregorian");k(o.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return T.leapYear(p.year()+(p.year()<1?1:0)+1469)},weekOfYear:function(_,p,s){var t=this.newDate(_,p,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(_,p,s){return(this.dayOfWeek(_,p,s)||7)<6},toJD:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidMonth);(_=t.year())<0&&_++;for(var i=t.day(),r=1;r<t.month();r++)i+=this.daysPerMonth[r-1];return i+T.toJD(_+1468,3,13)},fromJD:function(_){_=Math.floor(_+.5);for(var p=Math.floor((_-(this.jdEpoch-1))/366);_>=this.toJD(p+1,1,1);)p++;for(var s=_-Math.floor(this.toJD(p,1,1)+.5)+1,t=1;s>this.daysInMonth(p,t);)s-=this.daysInMonth(p,t),t++;return this.newDate(p,t,s)}}),M.calendars.nanakshahi=o},73040:function(ee,R,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,_,p){var s=this.newDate(T,_,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var _=0,p=this.minMonth;p<=12;p++)_+=this.NEPALI_CALENDAR_DATA[T][p];return _},daysInMonth:function(T,_){return T.year&&(_=T.month(),T=T.year()),this._validate(T,_,this.minDay,M.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[_-1]:this.NEPALI_CALENDAR_DATA[T][_]},weekDay:function(T,_,p){return this.dayOfWeek(T,_,p)!==6},toJD:function(T,_,p){var s=this._validate(T,_,p,M.local.invalidDate);T=s.year(),_=s.month(),p=s.day();var t=M.instance(),i=0,r=_,n=T;this._createMissingCalendarData(T);var a=T-(r>9||r===9&&p>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(_!==9&&(i=p,r--);r!==9;)r<=0&&(r=12,n--),i+=this.NEPALI_CALENDAR_DATA[n][r],r--;return _===9?(i+=p-this.NEPALI_CALENDAR_DATA[n][0])<0&&(i+=t.daysInYear(a)):i+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(a,1,1).add(i,"d").toJD()},fromJD:function(T){var _=M.instance().fromJD(T),p=_.year(),s=_.dayOfYear(),t=p+56;this._createMissingCalendarData(t);for(var i=9,r=this.NEPALI_CALENDAR_DATA[t][0],n=this.NEPALI_CALENDAR_DATA[t][i]-r+1;s>n;)++i>12&&(i=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][i];var a=this.NEPALI_CALENDAR_DATA[t][i]-(n-s);return this.newDate(t,i,a)},_createMissingCalendarData:function(T){var _=this.daysPerMonth.slice(0);_.unshift(17);for(var p=T-1;p<T+2;p++)this.NEPALI_CALENDAR_DATA[p]===void 0&&(this.NEPALI_CALENDAR_DATA[p]=_)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=o},1104:function(ee,R,e){var M=e(38700),k=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}function T(_,p){return _-p*Math.floor(_/p)}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return 682*((p.year()-(p.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(_,p,s){var t=this.newDate(_,p,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(_,p,s){return this.dayOfWeek(_,p,s)!==5},toJD:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidDate);_=t.year(),p=t.month(),s=t.day();var i=_-(_>=0?474:473),r=474+T(i,2820);return s+(p<=7?31*(p-1):30*(p-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(_){var p=(_=Math.floor(_)+.5)-this.toJD(475,1,1),s=Math.floor(p/1029983),t=T(p,1029983),i=2820;if(t!==1029982){var r=Math.floor(t/366),n=T(t,366);i=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=i+2820*s+474;a=a<=0?a-1:a;var l=_-this.toJD(a,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),h=_-this.toJD(a,u,1)+1;return this.newDate(a,u,h)}}),M.calendars.persian=o,M.calendars.jalali=o},51456:function(ee,R,e){var M=e(38700),k=e(50896),o=M.instance();function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(p.year()),o.leapYear(_)},weekOfYear:function(_,p,s){var t=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(t.year()),o.weekOfYear(_,t.month(),t.day())},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(_,p,s){return(this.dayOfWeek(_,p,s)||7)<6},toJD:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidDate);return _=this._t2gYear(t.year()),o.toJD(_,t.month(),t.day())},fromJD:function(_){var p=o.fromJD(_),s=this._g2tYear(p.year());return this.newDate(s,p.month(),p.day())},_t2gYear:function(_){return _+this.yearsOffset+(_>=-this.yearsOffset&&_<=-1?1:0)},_g2tYear:function(_){return _-this.yearsOffset-(_>=1&&_<=this.yearsOffset?1:0)}}),M.calendars.taiwan=T},4592:function(ee,R,e){var M=e(38700),k=e(50896),o=M.instance();function T(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(p.year()),o.leapYear(_)},weekOfYear:function(_,p,s){var t=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return _=this._t2gYear(t.year()),o.weekOfYear(_,t.month(),t.day())},daysInMonth:function(_,p){var s=this._validate(_,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(_,p,s){return(this.dayOfWeek(_,p,s)||7)<6},toJD:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidDate);return _=this._t2gYear(t.year()),o.toJD(_,t.month(),t.day())},fromJD:function(_){var p=o.fromJD(_),s=this._g2tYear(p.year());return this.newDate(s,p.month(),p.day())},_t2gYear:function(_){return _-this.yearsOffset-(_>=1&&_<=this.yearsOffset?1:0)},_g2tYear:function(_){return _+this.yearsOffset+(_>=-this.yearsOffset&&_<=-1?1:0)}}),M.calendars.thai=T},45348:function(ee,R,e){var M=e(38700),k=e(50896);function o(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(_){var p=this._validate(_,this.minMonth,this.minDay,M.local.invalidYear);return this.daysInYear(p.year())===355},weekOfYear:function(_,p,s){var t=this.newDate(_,p,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(_){for(var p=0,s=1;s<=12;s++)p+=this.daysInMonth(_,s);return p},daysInMonth:function(_,p){for(var s=this._validate(_,p,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<T.length;i++){if(T[i]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(_,p,s){return this.dayOfWeek(_,p,s)!==5},toJD:function(_,p,s){var t=this._validate(_,p,s,M.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+T[i-1]-1+24e5-.5},fromJD:function(_){for(var p=_-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>p);t++)s++;var i=s+15292,r=Math.floor((i-1)/12),n=r+1,a=i-12*r,l=p-T[s-1]+1;return this.newDate(n,a,l)},isValid:function(_,p,s){var t=M.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(_=_.year!=null?_.year:_)>=1276&&_<=1500),t},_validate:function(_,p,s,t){var i=M.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),M.calendars.ummalqura=o;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(ee,R,e){var M=e(50896);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function o(t,i,r,n){if(this._calendar=t,this._year=i,this._month=r,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function _(){this.shortYearCutoff="+10"}function p(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}M(k.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase(),i=i||"";var r=this._localCals[t+"-"+i];if(!r&&this.calendars[t]&&(r=new this.calendars[t](i),this._localCals[t+"-"+i]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,i,r,n,a){return(n=(t!=null&&t.year?t.calendar():typeof n=="string"?this.instance(n,a):n)||this.instance()).newDate(t,i,r)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,i){return function(r){for(var n="",a=0;r>0;){var l=r%10;n=(l===0?"":t[l]+i[a])+n,a++,r=Math.floor(r/10)}return n.indexOf(t[1]+i[1])===0&&(n=n.substr(1)),n||t[0]}}}),M(o.prototype,{newDate:function(t,i,r){return this._calendar.newDate(t??this,i,r)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,i,r){if(!this._calendar.isValid(t,i,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),M(_.prototype,{_validateLevel:0,newDate:function(t,i,r){return t==null?this.today():(t.year&&(this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=t.day(),i=t.month(),t=t.year()),new o(this,t,i,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+T(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var r=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,i){var r=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,i,r){return this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,i,r){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,r),i,r)},_add:function(t,i,r){if(this._validateLevel++,r==="d"||r==="w"){var n=t.toJD()+i*(r==="w"?this.daysInWeek():1),a=t.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var l=t.year()+(r==="y"?i:0),u=t.monthOfYear()+(r==="m"?i:0);a=t.day(),r==="y"?(t.month()!==this.fromMonthOfYear(l,u)&&(u=this.newDate(l,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(l)),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,u)))):r==="m"&&(function(c){for(;u<c.minMonth;)l--,u+=c.monthsInYear(l);for(var x=c.monthsInYear(l);u>x-1+c.minMonth;)l++,u-=x,x=c.monthsInYear(l)}(this),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,u))));var h=[l,this.fromMonthOfYear(l,u),a];return this._validateLevel--,h}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,i,r,n){if(!(this.hasYearZero||n!=="y"&&n!=="m"||i[0]!==0&&t.year()>0==i[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],l=r<0?-1:1;i=this._add(t,r*a[0]+l*a[1],a[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,r){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n=r==="y"?i:t.year(),a=r==="m"?i:t.month(),l=r==="d"?i:t.day();return r!=="y"&&r!=="m"||(l=Math.min(l,this.daysInMonth(n,a))),t.date(n,a,l)},isValid:function(t,i,r){this._validateLevel++;var n=this.hasYearZero||t!==0;if(n){var a=this.newDate(t,i,this.minDay);n=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,i,r,n){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,i,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(t,i,r);return this._validateLevel--,a}catch(l){throw this._validateLevel--,l}}}),p.prototype=new _,M(p.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,r){var n=this.newDate(t,i,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var r=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(t,i,r){return(this.dayOfWeek(t,i,r)||7)<6},toJD:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=n.year(),i=n.month(),r=n.day(),t<0&&t++,i<3&&(i+=12,t--);var a=Math.floor(t/100),l=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+r+l-1524.5},fromJD:function(t){var i=Math.floor(t+.5),r=Math.floor((i-186721625e-2)/36524.25),n=1524+(r=i+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),l=Math.floor(365.25*a),u=Math.floor((n-l)/30.6001),h=n-l-Math.floor(30.6001*u),c=u-(u>13.5?13:1),x=a-(c>2.5?4716:4715);return x<=0&&x--,this.newDate(x,c,h)},toJSDate:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=ee.exports=new k;s.cdate=o,s.baseCalendar=_,s.calendars.gregorian=p},15168:function(ee,R,e){var M=e(50896),k=e(38700);M(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],M(k.cdate.prototype,{formatDate:function(o,T){return typeof o!="string"&&(T=o,o=""),this._calendar.formatDate(o||"",this,T)}}),M(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(o,T,_){if(typeof o!="string"&&(_=T,T=o,o=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;o=o||this.local.dateFormat;for(var p,s,t,i=(_=_||{}).dayNamesShort||this.local.dayNamesShort,r=_.dayNames||this.local.dayNames,n=_.monthNumbers||this.local.monthNumbers,a=_.monthNamesShort||this.local.monthNamesShort,l=_.monthNames||this.local.monthNames,u=(_.calculateWeek||this.local.calculateWeek,function(f,S){for(var w=1;b+w<o.length&&o.charAt(b+w)===f;)w++;return b+=w-1,Math.floor(w/(S||1))>1}),h=function(f,S,w,E){var O=""+S;if(u(f,E))for(;O.length<w;)O="0"+O;return O},c=this,x=function(f){return typeof n=="function"?n.call(c,f,u("m")):g(h("m",f.month(),2))},d=function(f,S){return S?typeof l=="function"?l.call(c,f):l[f.month()-c.minMonth]:typeof a=="function"?a.call(c,f):a[f.month()-c.minMonth]},v=this.local.digits,g=function(f){return _.localNumbers&&v?v(f):f},y="",m=!1,b=0;b<o.length;b++)if(m)o.charAt(b)!=="'"||u("'")?y+=o.charAt(b):m=!1;else switch(o.charAt(b)){case"d":y+=g(h("d",T.day(),2));break;case"D":y+=(p=T.dayOfWeek(),s=i,t=r,u("D")?t[p]:s[p]);break;case"o":y+=h("o",T.dayOfYear(),3);break;case"w":y+=h("w",T.weekOfYear(),2);break;case"m":y+=x(T);break;case"M":y+=d(T,u("M"));break;case"y":y+=u("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":u("Y",2),y+=T.formatYear();break;case"J":y+=T.toJD();break;case"@":y+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?y+="'":m=!0;break;default:y+=o.charAt(b)}return y},parseDate:function(o,T,_){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;o=o||this.local.dateFormat;var p=(_=_||{}).shortYearCutoff||this.shortYearCutoff;p=typeof p!="string"?p:this.today().year()%100+parseInt(p,10);for(var s=_.dayNamesShort||this.local.dayNamesShort,t=_.dayNames||this.local.dayNames,i=_.parseMonth||this.local.parseMonth,r=_.monthNumbers||this.local.monthNumbers,n=_.monthNamesShort||this.local.monthNamesShort,a=_.monthNames||this.local.monthNames,l=-1,u=-1,h=-1,c=-1,x=-1,d=!1,v=!1,g=function(D,U){for(var I=1;O+I<o.length&&o.charAt(O+I)===D;)I++;return O+=I-1,Math.floor(I/(U||1))>1},y=function(D,U){var I=g(D,U),N=[2,3,I?4:2,I?4:2,10,11,20]["oyYJ@!".indexOf(D)+1],W=new RegExp("^-?\\d{1,"+N+"}"),F=T.substring(E).match(W);if(!F)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=F[0].length,parseInt(F[0],10)},m=this,b=function(){if(typeof r=="function"){g("m");var D=r.call(m,T.substring(E));return E+=D.length,D}return y("m")},f=function(D,U,I,N){for(var W=g(D,N)?I:U,F=0;F<W.length;F++)if(T.substr(E,W[F].length).toLowerCase()===W[F].toLowerCase())return E+=W[F].length,F+m.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof a=="function"){var D=g("M")?a.call(m,T.substring(E)):n.call(m,T.substring(E));return E+=D.length,D}return f("M",n,a)},w=function(){if(T.charAt(E)!==o.charAt(O))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,O=0;O<o.length;O++)if(v)o.charAt(O)!=="'"||g("'")?w():v=!1;else switch(o.charAt(O)){case"d":c=y("d");break;case"D":f("D",s,t);break;case"o":x=y("o");break;case"w":y("w");break;case"m":h=b();break;case"M":h=S();break;case"y":var C=O;d=!g("y",2),O=C,u=y("y",2);break;case"Y":u=y("Y",2);break;case"J":l=y("J")+.5,T.charAt(E)==="."&&(E++,y("J"));break;case"@":l=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":g("'")?w():v=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&d&&(u+=p===-1?1900:this.today().year()-this.today().year()%100-(u<=p?0:100)),typeof h=="string"&&(h=i.call(this,u,h)),x>-1){h=1,c=x;for(var P=this.daysInMonth(u,h);c>P;P=this.daysInMonth(u,h))h++,c-=P}return l>-1?this.fromJD(l):this.newDate(u,h,c)},determineDate:function(o,T,_,p,s){_&&typeof _!="object"&&(s=p,p=_,_=null),typeof p!="string"&&(s=p,p="");var t=this;return T=T?T.newDate():null,o==null?T:typeof o=="string"?function(i){try{return t.parseDate(p,i,s)}catch{}for(var r=((i=i.toLowerCase()).match(/^c/)&&_?_.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(i);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(i);return r}(o):typeof o=="number"?isNaN(o)||o===1/0||o===-1/0?T:t.today().add(o,"d"):t.newDate(o)}})},21576:function(){},19768:function(){},63436:function(ee,R,e){var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;ee.exports=function(){for(var o=[],T=0;T<M.length;T++)typeof k[M[T]]=="function"&&(o[o.length]=M[T]);return o}},67756:function(ee,R,e){function M(fe,he,ve){fe.prototype=he.prototype=ve,ve.constructor=fe}function k(fe,he){var ve=Object.create(fe.prototype);for(var ye in he)ve[ye]=he[ye];return ve}function o(){}e.d(R,{qy:function(){return ce},Gz:function(){return Q}});var T=.7,_=1/T,p="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(p,",").concat(p,",").concat(p,"\\)$")),n=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(p,",").concat(p,",").concat(p,",").concat(s,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),u=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),h=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function v(fe){var he,ve;return fe=(fe+"").trim().toLowerCase(),(he=i.exec(fe))?(ve=he[1].length,he=parseInt(he[1],16),ve===6?g(he):ve===3?new b(he>>8&15|he>>4&240,he>>4&15|240&he,(15&he)<<4|15&he,1):ve===8?y(he>>24&255,he>>16&255,he>>8&255,(255&he)/255):ve===4?y(he>>12&15|he>>8&240,he>>8&15|he>>4&240,he>>4&15|240&he,((15&he)<<4|15&he)/255):null):(he=r.exec(fe))?new b(he[1],he[2],he[3],1):(he=n.exec(fe))?new b(255*he[1]/100,255*he[2]/100,255*he[3]/100,1):(he=a.exec(fe))?y(he[1],he[2],he[3],he[4]):(he=l.exec(fe))?y(255*he[1]/100,255*he[2]/100,255*he[3]/100,he[4]):(he=u.exec(fe))?C(he[1],he[2]/100,he[3]/100,1):(he=h.exec(fe))?C(he[1],he[2]/100,he[3]/100,he[4]):c.hasOwnProperty(fe)?g(c[fe]):fe==="transparent"?new b(NaN,NaN,NaN,0):null}function g(fe){return new b(fe>>16&255,fe>>8&255,255&fe,1)}function y(fe,he,ve,ye){return ye<=0&&(fe=he=ve=NaN),new b(fe,he,ve,ye)}function m(fe,he,ve,ye){return arguments.length===1?((me=fe)instanceof o||(me=v(me)),me?new b((me=me.rgb()).r,me.g,me.b,me.opacity):new b):new b(fe,he,ve,ye??1);var me}function b(fe,he,ve,ye){this.r=+fe,this.g=+he,this.b=+ve,this.opacity=+ye}function f(){return"#".concat(O(this.r)).concat(O(this.g)).concat(O(this.b))}function S(){var fe=w(this.opacity);return"".concat(fe===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(fe===1?")":", ".concat(fe,")"))}function w(fe){return isNaN(fe)?1:Math.max(0,Math.min(1,fe))}function E(fe){return Math.max(0,Math.min(255,Math.round(fe)||0))}function O(fe){return((fe=E(fe))<16?"0":"")+fe.toString(16)}function C(fe,he,ve,ye){return ye<=0?fe=he=ve=NaN:ve<=0||ve>=1?fe=he=NaN:he<=0&&(fe=NaN),new D(fe,he,ve,ye)}function P(fe){if(fe instanceof D)return new D(fe.h,fe.s,fe.l,fe.opacity);if(fe instanceof o||(fe=v(fe)),!fe)return new D;if(fe instanceof D)return fe;var he=(fe=fe.rgb()).r/255,ve=fe.g/255,ye=fe.b/255,me=Math.min(he,ve,ye),Me=Math.max(he,ve,ye),Pe=NaN,ge=Me-me,oe=(Me+me)/2;return ge?(Pe=he===Me?(ve-ye)/ge+6*(ve<ye):ve===Me?(ye-he)/ge+2:(he-ve)/ge+4,ge/=oe<.5?Me+me:2-Me-me,Pe*=60):ge=oe>0&&oe<1?0:Pe,new D(Pe,ge,oe,fe.opacity)}function D(fe,he,ve,ye){this.h=+fe,this.s=+he,this.l=+ve,this.opacity=+ye}function U(fe){return(fe=(fe||0)%360)<0?fe+360:fe}function I(fe){return Math.max(0,Math.min(1,fe||0))}function N(fe,he,ve){return 255*(fe<60?he+(ve-he)*fe/60:fe<180?ve:fe<240?he+(ve-he)*(240-fe)/60:he)}M(o,v,{copy:function(fe){return Object.assign(new this.constructor,this,fe)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:d,toString:d}),M(b,m,k(o,{brighter:function(fe){return fe=fe==null?_:Math.pow(_,fe),new b(this.r*fe,this.g*fe,this.b*fe,this.opacity)},darker:function(fe){return fe=fe==null?T:Math.pow(T,fe),new b(this.r*fe,this.g*fe,this.b*fe,this.opacity)},rgb:function(){return this},clamp:function(){return new b(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f,formatHex:f,formatHex8:function(){return"#".concat(O(this.r)).concat(O(this.g)).concat(O(this.b)).concat(O(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),M(D,function(fe,he,ve,ye){return arguments.length===1?P(fe):new D(fe,he,ve,ye??1)},k(o,{brighter:function(fe){return fe=fe==null?_:Math.pow(_,fe),new D(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=fe==null?T:Math.pow(T,fe),new D(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=this.h%360+360*(this.h<0),he=isNaN(fe)||isNaN(this.s)?0:this.s,ve=this.l,ye=ve+(ve<.5?ve:1-ve)*he,me=2*ve-ye;return new b(N(fe>=240?fe-240:fe+120,me,ye),N(fe,me,ye),N(fe<120?fe+240:fe-120,me,ye),this.opacity)},clamp:function(){return new D(U(this.h),I(this.s),I(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var fe=w(this.opacity);return"".concat(fe===1?"hsl(":"hsla(").concat(U(this.h),", ").concat(100*I(this.s),"%, ").concat(100*I(this.l),"%").concat(fe===1?")":", ".concat(fe,")"))}}));var W=function(fe){return function(){return fe}};function F(fe,he){var ve=he-fe;return ve?function(ye,me){return function(Me){return ye+Me*me}}(fe,ve):W(isNaN(fe)?he:fe)}var j=function fe(he){var ve=function(me){return(me=+me)==1?F:function(Me,Pe){return Pe-Me?function(ge,oe,ie){return ge=Math.pow(ge,ie),oe=Math.pow(oe,ie)-ge,ie=1/ie,function(de){return Math.pow(ge+de*oe,ie)}}(Me,Pe,me):W(isNaN(Me)?Pe:Me)}}(he);function ye(me,Me){var Pe=ve((me=m(me)).r,(Me=m(Me)).r),ge=ve(me.g,Me.g),oe=ve(me.b,Me.b),ie=F(me.opacity,Me.opacity);return function(de){return me.r=Pe(de),me.g=ge(de),me.b=oe(de),me.opacity=ie(de),me+""}}return ye.gamma=fe,ye}(1);function H(fe,he){var ve,ye=he?he.length:0,me=fe?Math.min(ye,fe.length):0,Me=new Array(me),Pe=new Array(ye);for(ve=0;ve<me;++ve)Me[ve]=ce(fe[ve],he[ve]);for(;ve<ye;++ve)Pe[ve]=he[ve];return function(ge){for(ve=0;ve<me;++ve)Pe[ve]=Me[ve](ge);return Pe}}function te(fe,he){var ve=new Date;return fe=+fe,he=+he,function(ye){return ve.setTime(fe*(1-ye)+he*ye),ve}}function Q(fe,he){return fe=+fe,he=+he,function(ve){return fe*(1-ve)+he*ve}}function $(fe){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},$(fe)}function K(fe,he){var ve,ye={},me={};for(ve in fe!==null&&$(fe)==="object"||(fe={}),he!==null&&$(he)==="object"||(he={}),he)ve in fe?ye[ve]=ce(fe[ve],he[ve]):me[ve]=he[ve];return function(Me){for(ve in ye)me[ve]=ye[ve](Me);return me}}var X=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Y=new RegExp(X.source,"g");function re(fe,he){var ve,ye,me,Me=X.lastIndex=Y.lastIndex=0,Pe=-1,ge=[],oe=[];for(fe+="",he+="";(ve=X.exec(fe))&&(ye=Y.exec(he));)(me=ye.index)>Me&&(me=he.slice(Me,me),ge[Pe]?ge[Pe]+=me:ge[++Pe]=me),(ve=ve[0])===(ye=ye[0])?ge[Pe]?ge[Pe]+=ye:ge[++Pe]=ye:(ge[++Pe]=null,oe.push({i:Pe,x:Q(ve,ye)})),Me=Y.lastIndex;return Me<he.length&&(me=he.slice(Me),ge[Pe]?ge[Pe]+=me:ge[++Pe]=me),ge.length<2?oe[0]?function(ie){return function(de){return ie(de)+""}}(oe[0].x):function(ie){return function(){return ie}}(he):(he=oe.length,function(ie){for(var de,Se=0;Se<he;++Se)ge[(de=oe[Se]).i]=de.x(ie);return ge.join("")})}function se(fe,he){he||(he=[]);var ve,ye=fe?Math.min(he.length,fe.length):0,me=he.slice();return function(Me){for(ve=0;ve<ye;++ve)me[ve]=fe[ve]*(1-Me)+he[ve]*Me;return me}}function ae(fe){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},ae(fe)}function ce(fe,he){var ve,ye,me=ae(he);return he==null||me==="boolean"?W(he):(me==="number"?Q:me==="string"?(ve=v(he))?(he=ve,j):re:he instanceof v?j:he instanceof Date?te:(ye=he,!ArrayBuffer.isView(ye)||ye instanceof DataView?Array.isArray(he)?H:typeof he.valueOf!="function"&&typeof he.toString!="function"||isNaN(he)?K:Q:se))(fe,he)}},30584:function(ee){ee.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(ee){ee.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(ee){ee.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(ee){ee.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(ee){ee.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(ee){ee.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},bl={};function Di(ee){var R=bl[ee];if(R!==void 0)return R.exports;var e=bl[ee]={exports:{}};return Iu[ee].call(e.exports,e,e.exports,Di),e.exports}return Di.n=function(ee){var R=ee&&ee.__esModule?function(){return ee.default}:function(){return ee};return Di.d(R,{a:R}),R},Di.d=function(ee,R){for(var e in R)Di.o(R,e)&&!Di.o(ee,e)&&Object.defineProperty(ee,e,{enumerable:!0,get:R[e]})},Di.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Di.o=function(ee,R){return Object.prototype.hasOwnProperty.call(ee,R)},Di.r=function(ee){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ee,"__esModule",{value:!0})},Di(13792)}()})})(jh);var Ld=jh.exports;const Cd=Ed(Ld),Od=document.getElementById("root");Cd.newPlot(Od,[{x:[1,2,3,4,5],y:[1,2,4,8,16]}],{margin:{t:0}});
